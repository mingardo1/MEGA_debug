<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>136</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    136
                    <a href="135.html">prev</a>
                    <a href="137.html">next</a>
                    <a href="136_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    Automattic/simplenote-android_962705190f65e71cd7922fc2e4bbdcc05cc33b63_Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;962705190f65e71cd7922fc2e4bbdcc05cc33b63:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;962705190f65e71cd7922fc2e4bbdcc05cc33b63^1:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;962705190f65e71cd7922fc2e4bbdcc05cc33b63^2:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\Automattic\simplenote-android show &quot;c6289aa6d474f6c1cadd75d353442a115070586d:Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[b], [j]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8 import android.database.Cursor;                                                                          </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  13 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  14 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  15 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16 import android.text.Spanned;                                                                             </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  18 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  19 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  20 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  21 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  23 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  24 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  25 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  26 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  27 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  28 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  29 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  30 import android.webkit.WebView;                                                                           </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  31 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32 import android.widget.LinearLayout;                                                                      </span>
<span class="6117110559667671300" onmouseenter="enter('6117110559667671300');" onmouseout="out('6117110559667671300');" style="">  33 import android.widget.ScrollView;                                                                        </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  34 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  35 import android.widget.Toast;                                                                             </span>
<span  style="">  36                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  37 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  38 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  39 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  40 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  41 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  42 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span  style="">  43                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  44 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  45 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  46 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  47 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  48 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  49 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  50 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  51 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  52 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  53 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  54 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  55 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  56 import com.automattic.simplenote.utils.SnackbarUtils;                                                    </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  57 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  58 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  59 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  60 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  61 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  62 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  63 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  64 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  65 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  66 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  67 import com.simperium.client.Query;                                                                       </span>
<span  style="">  68                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  69 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  70 import java.util.Calendar;                                                                               </span>
<span  style="">  71                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  72 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  73         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  74         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  75         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  76         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="715837164460589842" onmouseenter="enter('715837164460589842');" onmouseout="out('715837164460589842');" style="">  77         InfoBottomSheetDialog.InfoSheetListener,                                                         </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  78         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style="">  79                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  80     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  81     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style="">  82     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style="">  83     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style="">  84     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style="">  85     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  86     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  87     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="">  88     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="">  89     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  90     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style="">  91     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">  93         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">  94             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  96     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  97     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style="">  98     private View mRootView;                                                                              </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  99     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style=""> 100     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 101     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 102     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 103     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 104     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 105     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 106     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 107     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 108     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 109     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 110     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 111     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 112     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 113     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 114     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 115     private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 116     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 117     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 118     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 119     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 120     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 121     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 123         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 124             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 125                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126             }                                                                                            </span>
<span  style=""> 127                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 128             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 129                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 130                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 131                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 131                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 132                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 133                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 136             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 138     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 139     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 140     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 141     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 142     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 143         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 144         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 145         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 146             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 147             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 148                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 149             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 150                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 151                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 152                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 153                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 154                                                                                                          </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 155                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156             }                                                                                            </span>
<span  style=""> 157                                                                                                          </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 158             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 158             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.colðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 159             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 159             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireAcðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 160             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span  style=""> 162                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 163         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 164         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 166         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 167             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168         }                                                                                                </span>
<span  style=""> 169                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 170         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 172         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 173             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 174                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 175                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 176                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 177                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 178                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 179                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 180                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 181                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 182                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 184                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 186                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 187                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 188                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 189                         copyToClipboard(mLinkText);                                                      </span>
<span class="3326463149460041317" onmouseenter="enter('3326463149460041317');" onmouseout="out('3326463149460041317');" style=""><abbr title=" 190                         Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 190                         Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 191                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 193                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 194                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 195                     if (mLinkText != null) {                                                             </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 196                         showShareSheet();                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 197                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 199                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 200                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 201                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203         }                                                                                                </span>
<span  style=""> 204                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 205         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 207         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 208             mActionMode = null;                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 209             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 210                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 211                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 212                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 213                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 213                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 215                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 216                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 217             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 219     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 220     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="9194238965806529126" onmouseenter="enter('9194238965806529126');" onmouseout="out('9194238965806529126');" style=""> 221     private boolean mIsUndoingPublishing;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 222     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 223     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 224         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 225         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 226             if (!isAdded()) return;                                                                      </span>
<span  style=""> 227                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 228             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 229                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 230                 public void run() {                                                                      </span>
<span  style=""> 231                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 232                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 233                     mNote.save();                                                                        </span>
<span  style=""> 234                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 235                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 237             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 239     };                                                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 240     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 241     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 242     private WebView mMarkdown;                                                                           </span>
<span  style=""> 243                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 245      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 246      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 247      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 248     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249     }                                                                                                    </span>
<span  style=""> 250                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 252     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 253         super.onCreate(savedInstanceState);                                                              </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style=""> 254         mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                        </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 255         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 256         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 257                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 258         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 259         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 260                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 261         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 261         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 262         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 262         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 263         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 263         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, RðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 264         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 264         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, RðŸ”µ</abbr></span>
<span  style=""> 265                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 266         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 267         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 268         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 269                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 270         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 271                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 271                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 272         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 274             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 275                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 276                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 277                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278             }                                                                                            </span>
<span  style=""> 279                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 280             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 281             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 282                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 283                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284             }                                                                                            </span>
<span  style=""> 285                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 287             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 288                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289             }                                                                                            </span>
<span  style=""> 290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 292             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 293                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 294                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 295                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 296                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 297                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 298                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 299                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 300                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 301                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 302                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 303                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 303                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 304                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 306         };                                                                                               </span>
<span  style=""> 307                                                                                                          </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 308         WidgetUtils.updateNoteWidgets(getActivity());                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309     }                                                                                                    </span>
<span  style=""> 310                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 311     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 312     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 312     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 313         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 314         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 315         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 316         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 317         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="8247847837270423645" onmouseenter="enter('8247847837270423645');" onmouseout="out('8247847837270423645');" style=""> 318         mTagView = mRootView.findViewById(R.id.tag_view);                                                </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 319         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 320         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 321         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 322                                                                                                          </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 323         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 324         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 325             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 326             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 327             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 328             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 329                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 330                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331         }                                                                                                </span>
<span  style=""> 332                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 333         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 334                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 335         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 336         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 337             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 338             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 339             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 340                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341             }                                                                                            </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 342             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1032230432854321396" onmouseenter="enter('-1032230432854321396');" onmouseout="out('-1032230432854321396');" style=""> 343         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null ) {  </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 344             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 345             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 346             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 347                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349         }                                                                                                </span>
<span  style=""> 350                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 351         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 352         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 354             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 355                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 356                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 357                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 358                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359                     }                                                                                    </span>
<span  style=""> 360                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 361                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 362                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 363                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 364                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 365                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 366                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 367                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368                     }                                                                                    </span>
<span  style=""> 369                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 370                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 371                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 372                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span  style=""> 373                                                                                                          </span>
<span class="5020302440416452113" onmouseenter="enter('5020302440416452113');" onmouseout="out('5020302440416452113');" style=""> 374                     // We use different scroll views in the root of the layout files... yuck.            </span>
<span class="-2313309201646667285" onmouseenter="enter('-2313309201646667285');" onmouseout="out('-2313309201646667285');" style=""> 375                     // So we have to cast appropriately to do a smooth scroll                            </span>
<span class="4785183779479911307" onmouseenter="enter('4785183779479911307');" onmouseout="out('4785183779479911307');" style=""> 376                     if (mRootView instanceof NestedScrollView) {                                         </span>
<span class="-2957331341634255052" onmouseenter="enter('-2957331341634255052');" onmouseout="out('-2957331341634255052');" style=""> 377                         ((NestedScrollView)mRootView).smoothScrollTo(0, lineTop);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 378                     } else {                                                                             </span>
<span class="-2547502694507835703" onmouseenter="enter('-2547502694507835703');" onmouseout="out('-2547502694507835703');" style=""> 379                         ((ScrollView)mRootView).smoothScrollTo(0, lineTop);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                     }                                                                                    </span>
<span  style=""> 381                                                                                                          </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 382                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 385         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 386         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 387         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388     }                                                                                                    </span>
<span  style=""> 389                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 390     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 391     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 392         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 393         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 394         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 395                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 396         mTagView.setOnTagAddedListener(this);                                                            </span>
<span  style=""> 397                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 398         if (mContentEditText != null) {                                                                  </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""><abbr title=" 399             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));"> 399             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity())ðŸ”µ</abbr></span>
<span  style=""> 400                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 401             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 402                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405     }                                                                                                    </span>
<span  style=""> 406                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 407     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 408         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 409             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 410             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 411                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 412                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                 }                                                                                        </span>
<span  style=""> 414                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 415                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 415                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 416                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 417                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 420         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421     }                                                                                                    </span>
<span  style=""> 422                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 423     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 424     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 425         super.onPause();  // Always call the superclass method first                                     </span>
<span  style=""> 426                                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 427         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 428         mNotesBucket.stop();                                                                             </span>
<span  style=""> 429                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 430         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 431         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 432                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 433         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 434                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 435         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 436             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437         }                                                                                                </span>
<span  style=""> 438                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 439         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 440             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441         }                                                                                                </span>
<span  style=""> 442                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 443         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 444             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445         }                                                                                                </span>
<span  style=""> 446                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 447         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 448         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 452     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 453         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 454                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 455         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 456             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458     }                                                                                                    </span>
<span  style=""> 459                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 460     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 461     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 462         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""><abbr title=" 463         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {"> 463         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 464             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465         }                                                                                                </span>
<span  style=""> 466                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 467         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 468                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 469         if (mNote != null) {                                                                             </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 470             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                         </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 471             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 472                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 473             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span  style=""> 474                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 475             if (mNote.isDeleted()) {                                                                     </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 476                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7281764457900946953" onmouseenter="enter('-7281764457900946953');" onmouseout="out('-7281764457900946953');" style=""> 477                 trashItem.setIcon(R.drawable.ic_trash_restore_24dp);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 478             } else {                                                                                     </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 479                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-276308356326274253" onmouseenter="enter('-276308356326274253');" onmouseout="out('-276308356326274253');" style=""> 480                 trashItem.setIcon(R.drawable.ic_trash_24dp);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482         }                                                                                                </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 483         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484     }                                                                                                    </span>
<span  style=""> 485                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 487     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 488         switch (item.getItemId()) {                                                                      </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 489             case R.id.menu_view_info:                                                                    </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 490                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 491                 return true;                                                                             </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 492             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 493                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 494                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 495             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 496                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 497                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 498             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 499                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 500                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 501             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 502                 if (!isAdded()) return false;                                                            </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 503                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 504                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 505             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 506                 if (!isAdded()) return false;                                                            </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 507                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 508                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 509             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 510                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512     }                                                                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style=""> 514     private void insertChecklist() {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 515         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 516             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 517         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 518             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 519             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520         }                                                                                                </span>
<span  style=""> 521                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 522         AnalyticsTracker.track(                                                                          </span>
<span class="3978226561215059527" onmouseenter="enter('3978226561215059527');" onmouseout="out('3978226561215059527');" style=""> 523                 AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED,                                         </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 524                 AnalyticsTracker.CATEGORY_NOTE,                                                          </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 525                 &quot;toolbar_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 526         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527     }                                                                                                    </span>
<span  style=""> 528                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 529     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 530     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 531         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 532         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 533             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 534             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536     }                                                                                                    </span>
<span  style=""> 537                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 538     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 539         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 540         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541     }                                                                                                    </span>
<span  style=""> 542                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 543     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 544         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 547     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 548         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549     }                                                                                                    </span>
<span  style=""> 550                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 551     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 552         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 553         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554     }                                                                                                    </span>
<span  style=""> 555                                                                                                          </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 556     private void shareNote() {                                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 557         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 558             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 559             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 560             AnalyticsTracker.track(                                                                      </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 561                     AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 562                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 563                     &quot;action_bar_share_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 564             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566     }                                                                                                    </span>
<span  style=""> 567                                                                                                          </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 568     private void showHistory() {                                                                         </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 569         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 570             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 571             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 572             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 573         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 574             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 578     private void showInfo() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 579         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 580             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 581             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 582             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584     }                                                                                                    </span>
<span  style=""> 585                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 586     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 587         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 588                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 589         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 590             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 594     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 595         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 596                 mCss,                                                                                    </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 597                 mContentEditText.getPlainTextContent()                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 598         );                                                                                               </span>
<span  style=""> 599                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 600         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span  style=""> 602                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 603     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 604         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 605             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 606                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 607         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 608                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 609         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 610             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 611         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 612             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613         }                                                                                                </span>
<span  style=""> 614                                                                                                          </span>
<span  style=""> 615                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 616         saveNote();                                                                                      </span>
<span  style=""> 617                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 618         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619     }                                                                                                    </span>
<span  style=""> 620                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 621     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 622         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 623         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 624         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625     }                                                                                                    </span>
<span  style=""> 626                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 627     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 628         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 629             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 630                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 631             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 631             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 632                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 633             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 634                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 635             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 636                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 637                 mNote.save();                                                                            </span>
<span  style=""> 638                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 639                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 640                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 641                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 642                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644             }                                                                                            </span>
<span  style=""> 645                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 646             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 647             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 648             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 652     private void updateTagList() {                                                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 653         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 654         if (activity == null) return;                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 656         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 657         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658     }                                                                                                    </span>
<span  style=""> 659                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 660     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 661         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 662         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 663         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 664         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 665         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 666         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 667         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 668         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 669                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 670         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 671                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 672         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 673                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 674         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 675                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 676         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 677         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 678             return newText.length();                                                                     </span>
<span  style=""> 679                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 680         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 681         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 682                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 683         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 684             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 684             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 685             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 685             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 686         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 687             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688         }                                                                                                </span>
<span  style=""> 689                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 690         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 691         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 692             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 693                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 694         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 695         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 698     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 699     public void onTagsChanged(String tagString) {                                                        </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 700         if (mNote == null || !isAdded()) return;                                                         </span>
<span  style=""> 701                                                                                                          </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 702         if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 703             AnalyticsTracker.track(                                                                      </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 704                     AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 705                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 706                     &quot;tag_added_to_note&quot;                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 707             );                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 708         } else {                                                                                         </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 709             AnalyticsTracker.track(                                                                      </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 710                     AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 711                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 712                     &quot;tag_removed_from_note&quot;                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 713             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span  style=""> 715                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 716         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 717         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 718         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 719         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720     }                                                                                                    </span>
<span  style=""> 721                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 723     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 724         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 728     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 729         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 730         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 731         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 734     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 735     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 736         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 737         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 738             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 739             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740         }                                                                                                </span>
<span  style=""> 741                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 742         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 743         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 744             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 745             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746         }                                                                                                </span>
<span  style=""> 747                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 748         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 749         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 750         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 751         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752     }                                                                                                    </span>
<span  style=""> 753                                                                                                          </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 754     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 755         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 756         // Remove any existing size spans                                                                </span>
<span class="-3345432347418186953" onmouseenter="enter('-3345432347418186953');" onmouseout="out('-3345432347418186953');" style=""> 757         RelativeSizeSpan[] spans = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 758         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 759             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 761         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 762         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 763             return;                                                                                      </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 764         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 764         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765     }                                                                                                    </span>
<span  style=""> 766                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 767     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 768         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 769         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 770         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 771         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772     }                                                                                                    </span>
<span  style=""> 773                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 774     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 775         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 776             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777         }                                                                                                </span>
<span  style=""> 778                                                                                                          </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 779         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780     }                                                                                                    </span>
<span  style=""> 781                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 782     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 783         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 784             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 785             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 786             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 787             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 788                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 789         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 790             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 791                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793     }                                                                                                    </span>
<span  style=""> 794                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 795     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 796     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 797         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 798             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 799             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 800                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803     }                                                                                                    </span>
<span  style=""> 804                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 805     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 806         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807     }                                                                                                    </span>
<span  style=""> 808                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 809     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 810         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811     }                                                                                                    </span>
<span  style=""> 812                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 813     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 814         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 815             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 816         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 817             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819     }                                                                                                    </span>
<span  style=""> 820                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 821     private String getNoteTagsString() {                                                                 </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 822         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 823             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 824         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 825             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827     }                                                                                                    </span>
<span  style=""> 828                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 829     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style=""> 830      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 831      */                                                                                                  </span>
<span  style=""> 832                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 833     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 834     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 835         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 836         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 837             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 841     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 842     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 843         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 844         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 845             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847     }                                                                                                    </span>
<span  style=""> 848                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 849     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style=""> 850     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 851         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 852             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853         }                                                                                                </span>
<span  style=""> 854                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style=""> 855         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 856             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857         }                                                                                                </span>
<span  style=""> 858                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style=""> 859         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style=""> 860         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style=""> 861         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style=""> 862             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style=""> 864         ft.addToBackStack(null);                                                                         </span>
<span  style=""> 865                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style=""> 866         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style=""> 867         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style=""> 868         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style=""> 869         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870     }                                                                                                    </span>
<span  style=""> 871                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 872     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 873     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 874         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875     }                                                                                                    </span>
<span  style=""> 876                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 877     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 878     public void onShareDismissed() {                                                                     </span>
<span  style=""> 879                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880     }                                                                                                    </span>
<span  style=""> 881                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 882     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style=""> 883      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 884      */                                                                                                  </span>
<span  style=""> 885                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 887     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 888         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 889         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 890             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892     }                                                                                                    </span>
<span  style=""> 893                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 894     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 895     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 896         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 897             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 899         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900     }                                                                                                    </span>
<span  style=""> 901                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 902     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 903     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 904         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 905             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906         }                                                                                                </span>
<span  style=""> 907                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 908         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 909             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911     }                                                                                                    </span>
<span  style=""> 912                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 913     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 914     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 915         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916     }                                                                                                    </span>
<span  style=""> 917                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 918     /**                                                                                                  </span>
<span class="278795310073326946" onmouseenter="enter('278795310073326946');" onmouseout="out('278795310073326946');" style=""> 919      * Info bottom sheet listeners                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 920      */                                                                                                  </span>
<span  style=""> 921                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 922     @Override                                                                                            </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 923     public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                           </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 924         NoteUtils.setNotePin(mNote, isSwitchedOn);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925     }                                                                                                    </span>
<span  style=""> 926                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 927     @Override                                                                                            </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 928     public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                      </span>
<span class="2498037679736242197" onmouseenter="enter('2498037679736242197');" onmouseout="out('2498037679736242197');" style=""> 929         mIsMarkdownEnabled = isSwitchedOn;                                                               </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 930         Activity activity = getActivity();                                                               </span>
<span  style=""> 931                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 932         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span  style=""> 933                                                                                                          </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 934             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 935             if (mIsMarkdownEnabled) {                                                                    </span>
<span  style=""> 936                                                                                                          </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 937                 editorActivity.showTabs();                                                               </span>
<span  style=""> 938                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 939                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 940                     // Get markdown fragment and update content                                          </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 941                     mNoteMarkdownFragment =                                                              </span>
<span class="5596511960413116475" onmouseenter="enter('5596511960413116475');" onmouseout="out('5596511960413116475');" style=""> 942                             editorActivity.getNoteMarkdownFragment();                                    </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 943                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 945             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 946                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 948         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 949             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 950             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951         }                                                                                                </span>
<span  style=""> 952                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 953         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954     }                                                                                                    </span>
<span  style=""> 955                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 956     @Override                                                                                            </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 957     public void onInfoCopyLinkClicked() {                                                                </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 958         copyToClipboard(mNote.getPublishedUrl());                                                        </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 959         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960     }                                                                                                    </span>
<span  style=""> 961                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 962     @Override                                                                                            </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 963     public void onInfoShareLinkClicked() {                                                               </span>
<span class="-7399939689867674649" onmouseenter="enter('-7399939689867674649');" onmouseout="out('-7399939689867674649');" style=""> 964         if (mInfoBottomSheet != null) {                                                                  </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 965             mInfoBottomSheet.dismiss();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966         }                                                                                                </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 967         showShareSheet();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968     }                                                                                                    </span>
<span  style=""> 969                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 970     @Override                                                                                            </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 971     public void onInfoDismissed() {                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972     }                                                                                                    </span>
<span  style=""> 973                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style=""> 974     protected void saveNote() {                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 975 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-3105099670941444201" onmouseenter="enter('-3105099670941444201');" onmouseout="out('-3105099670941444201');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 976         if (mNote == null || mContentEditText == null || mIsLoadingNote ||                               </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 977             (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {"> 977             (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheeðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 978             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 979         }                                                                                                </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 980 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 981     protected void saveNote() {                                                                          </span>
<span class="6573885176676722224" onmouseenter="enter('6573885176676722224');" onmouseout="out('6573885176676722224');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 982         if (mNote == null ||                                                                             </span>
<span class="-704198539817842861" onmouseenter="enter('-704198539817842861');" onmouseout="out('-704198539817842861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 983                 mContentEditText == null ||                                                              </span>
<span class="-7342228029026764788" onmouseenter="enter('-7342228029026764788');" onmouseout="out('-7342228029026764788');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 984                 mIsLoadingNote ||                                                                        </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 985                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 986 =======                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 987         try {                                                                                            </span>
<span class="5923515376230853284" onmouseenter="enter('5923515376230853284');" onmouseout="out('5923515376230853284');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 988             Simplenote application = (Simplenote) requireActivity().getApplication();                    </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 989             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="1614046200152628925" onmouseenter="enter('1614046200152628925');" onmouseout="out('1614046200152628925');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 990             mNote = notesBucket.get(mNote.getSimperiumKey());                                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 991 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 992                                                                                                          </span>
<span class="-3105099670941444201" onmouseenter="enter('-3105099670941444201');" onmouseout="out('-3105099670941444201');" style=""> 993             if (mNote == null || mContentEditText == null || mIsLoadingNote ||                           </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style=""> 994                     (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 995                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 996             } else {                                                                                     </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 997                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998             }                                                                                            </span>
<span  style=""> 999                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1000             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1001             String tagString = getNoteTagsString();                                                      </span>
<span  style="">1002                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1003             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1003             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1004                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1005                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1006                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1007                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1008                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1009                 mNote.save();                                                                            </span>
<span  style="">1010                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1011                 AnalyticsTracker.track(                                                                  </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="">1012                         AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1013                         AnalyticsTracker.CATEGORY_NOTE,                                                  </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1014                         &quot;editor_save&quot;                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1015                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1017         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1018             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1019         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020     }                                                                                                    </span>
<span  style="">1021                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1022     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1023     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1024     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1025     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1026         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1027         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1028             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1029             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1030                 return;                                                                                  </span>
<span  style="">1031                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1032             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1033             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1034                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1035                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1036                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1036                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1037                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1038                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1039                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1040                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041                 }                                                                                        </span>
<span  style="">1042                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1043                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1044                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1045                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1045                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1046                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1047                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048                     }                                                                                    </span>
<span  style="">1049                                                                                                          </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1050                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1052             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1053                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1054                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1056         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1057             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1058             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060     }                                                                                                    </span>
<span  style="">1061                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1062     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1063         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1064             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1065                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1066                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1067             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1068                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1069                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1070             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1071                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1072                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1073             } else {                                                                                     </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1074                 mViewLinkMenuItem.setIcon(mWebIcon);                                                     </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1075                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078     }                                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1080     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1081         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1082             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1083             mNote.save();                                                                                </span>
<span  style="">1084                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1085             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1086             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1087                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1088             AnalyticsTracker.track(                                                                      </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1089                     (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                        </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1090                             AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                               </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1091                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1092                     &quot;publish_note_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1093             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095     }                                                                                                    </span>
<span  style="">1096                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1097     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span  style="">1098                                                                                                          </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1099         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1100             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101         }                                                                                                </span>
<span  style="">1102                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1103         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1104         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1105                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1106         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1107             if (mNote.isPublished()) {                                                                   </span>
<span  style="">1108                                                                                                          </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1109                 if (mIsUndoingPublishing) {                                                              </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1110                     SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,           </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1111                             R.color.status_positive,                                                     </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1112                             Snackbar.LENGTH_LONG);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1113                 } else {                                                                                 </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1114                     SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,           </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1115                             R.color.status_positive,                                                     </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1116                             Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1117                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1118                                 public void onClick(View v) {                                            </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1119                                     mIsUndoingPublishing = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1120                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121                                 }                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1122                             });                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1123                 }                                                                                        </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1124                 copyToClipboard(mNote.getPublishedUrl());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1125             } else {                                                                                     </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1126                 if (mIsUndoingPublishing) {                                                              </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1127                     SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,         </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1128                             R.color.status_negative,                                                     </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1129                             Snackbar.LENGTH_LONG);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1130                 } else {                                                                                 </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1131                     SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,         </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1132                             R.color.status_negative,                                                     </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1133                             Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1134                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1135                                 public void onClick(View v) {                                            </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1136                                     mIsUndoingPublishing = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1137                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138                                 }                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1139                             });                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1142         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1143             if (mNote.isPublished()) {                                                                   </span>
<span class="-6121697006332454273" onmouseenter="enter('-6121697006332454273');" onmouseout="out('-6121697006332454273');" style="">1144                 SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_error,                  </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1145                         R.color.status_negative, Snackbar.LENGTH_LONG);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1146             } else {                                                                                     </span>
<span class="-4531979614724167785" onmouseenter="enter('-4531979614724167785');" onmouseout="out('-4531979614724167785');" style="">1147                 SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_error,                    </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1148                         R.color.status_negative, Snackbar.LENGTH_LONG);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150         }                                                                                                </span>
<span  style="">1151                                                                                                          </span>
<span class="265789452469033686" onmouseenter="enter('265789452469033686');" onmouseout="out('265789452469033686');" style="">1152         mIsUndoingPublishing = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153     }                                                                                                    </span>
<span  style="">1154                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1155     private void publishNote() {                                                                         </span>
<span  style="">1156                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1157         if (isAdded()) {                                                                                 </span>
<span class="4291898079933948381" onmouseenter="enter('4291898079933948381');" onmouseout="out('4291898079933948381');" style="">1158             mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.publishing,     </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1159                     R.color.blue, Snackbar.LENGTH_INDEFINITE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160         }                                                                                                </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1161         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162     }                                                                                                    </span>
<span  style="">1163                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1164     private void unpublishNote() {                                                                       </span>
<span  style="">1165                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1166         if (isAdded()) {                                                                                 </span>
<span class="-6747781156546415836" onmouseenter="enter('-6747781156546415836');" onmouseout="out('-6747781156546415836');" style="">1167             mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublishing,   </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1168                     R.color.blue, Snackbar.LENGTH_INDEFINITE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1170         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171     }                                                                                                    </span>
<span  style="">1172                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1173     private void copyToClipboard(String text) {                                                          </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="">1174         ClipboardManager clipboard = (ClipboardManager) requireActivity()                                </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="">1175                 .getSystemService(Context.CLIPBOARD_SERVICE);                                            </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1176         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="">1177         if (clipboard != null) {                                                                         </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1178             clipboard.setPrimaryClip(clip);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180     }                                                                                                    </span>
<span  style="">1181                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1182     private void showShareSheet() {                                                                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1183         if (isAdded()) {                                                                                 </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1184             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186     }                                                                                                    </span>
<span  style="">1187                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1188     private void showInfoSheet() {                                                                       </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1189         if (isAdded()) {                                                                                 </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1190             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192     }                                                                                                    </span>
<span  style="">1193                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1194     private void showHistorySheet() {                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1195         if (isAdded()) {                                                                                 </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1196             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1197             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1197             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1198             saveNote();                                                                                  </span>
<span  style="">1199                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1200             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202     }                                                                                                    </span>
<span  style="">1203                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1204     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1205      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1206      */                                                                                                  </span>
<span  style="">1207                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1208     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1209     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1210                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1213     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1214     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1214     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1215         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1216             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1217                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1218                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1219                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1220                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1221                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1222                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1223                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1224                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225                                 }                                                                        </span>
<span  style="">1226                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1227                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1228                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1230                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1232                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1233                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237     }                                                                                                    </span>
<span  style="">1238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1239     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1240     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1241         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242     }                                                                                                    </span>
<span  style="">1243                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1244     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1245     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1246         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1247         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1248             return;                                                                                      </span>
<span  style="">1249                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1250         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1251         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1252             return;                                                                                      </span>
<span  style="">1253                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1254         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255     }                                                                                                    </span>
<span  style="">1256                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1257     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1258         WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                  </span>
<span  style="">1259                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1260         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1261             weakFragment = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262         }                                                                                                </span>
<span  style="">1263                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1264         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1265         protected void onPreExecute() {                                                                  </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1266             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1267             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1268                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1269                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271         }                                                                                                </span>
<span  style="">1272                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1273         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1274         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1275             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1276             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1277                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278             }                                                                                            </span>
<span  style="">1279                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1280             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1281             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1282             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1283                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1284             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1285                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1286                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1287                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1288                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289                 }                                                                                        </span>
<span  style="">1290                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1291                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1292                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1293                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1294                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1296             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1297                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1298                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1299                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1300                     Note currentNote = notesCursor.getObject();                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1301                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1302                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1303                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306             }                                                                                            </span>
<span  style="">1307                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1308             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309         }                                                                                                </span>
<span  style="">1310                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1311         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1312         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-7212142050064810641" onmouseenter="enter('-7212142050064810641');" onmouseout="out('-7212142050064810641');" style="">1313             final NoteEditorFragment fragment = weakFragment.get();                                      </span>
<span class="-799665902142491282" onmouseenter="enter('-799665902142491282');" onmouseout="out('-799665902142491282');" style="">1314             if (fragment == null                                                                         </span>
<span class="-3592720682984648780" onmouseenter="enter('-3592720682984648780');" onmouseout="out('-3592720682984648780');" style="">1315                     || fragment.getActivity() == null                                                    </span>
<span class="-193925863612874363" onmouseenter="enter('-193925863612874363');" onmouseout="out('-193925863612874363');" style="">1316                     || fragment.getActivity().isFinishing()) {                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1317                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318             }                                                                                            </span>
<span  style="">1319                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1320             fragment.refreshContent(false);                                                              </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1321             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1322                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1322                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1323                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span  style="">1324                                                                                                          </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1325                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326             }                                                                                            </span>
<span  style="">1327                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1328             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1329                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1330             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1331                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1332                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1333                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1334                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1335                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1336                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1337                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1338                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339                         }                                                                                </span>
<span  style="">1340                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1341                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1341                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivityðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1342                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1343                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1346                 }, 100);                                                                                 </span>
<span  style="">1347                                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1348             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1349                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1350                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351             }                                                                                            </span>
<span  style="">1352                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1353             fragment.updateMarkdownView();                                                               </span>
<span  style="">1354                                                                                                          </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1355             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span  style="">1356                                                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1357             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1358             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360     }                                                                                                    </span>
<span  style="">1361                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1362     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1363         WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                  </span>
<span  style="">1364                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1365         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1366             weakFragment = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367         }                                                                                                </span>
<span  style="">1368                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1369         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1370         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1371             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1372             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1373                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1375             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376         }                                                                                                </span>
<span  style="">1377                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1378         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1379         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1380             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1381             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1381             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishingðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1382                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1383                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1384                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387     }                                                                                                    </span>
<span  style="">1388                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1389     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1390         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1391             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392         }                                                                                                </span>
<span  style="">1393                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1394         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1395             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397     }                                                                                                    </span>
<span  style="">1398                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1399     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1400     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1401         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1402             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403         }                                                                                                </span>
<span  style="">1404                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1405         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1406         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1407             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1408             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1409         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1410             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1411             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1412                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1413                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1414                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1416             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1417             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420 }                                                                                                        </span>


</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8 import android.database.Cursor;                                                                          </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  13 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  14 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  15 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16 import android.text.Spanned;                                                                             </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  18 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  19 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  20 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  21 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  23 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  24 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  25 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  26 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  27 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  28 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  29 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  30 import android.webkit.WebView;                                                                           </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  31 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32 import android.widget.LinearLayout;                                                                      </span>
<span class="6117110559667671300" onmouseenter="enter('6117110559667671300');" onmouseout="out('6117110559667671300');" style="">  33 import android.widget.ScrollView;                                                                        </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  34 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  35 import android.widget.Toast;                                                                             </span>
<span  style="">  36                                                                                                          </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  37 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  38 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  39 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  40 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  41 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  42 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span  style="">  43                                                                                                          </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  44 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  45 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  46 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  47 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  48 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  49 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  50 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  51 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  52 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  53 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  54 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  55 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  56 import com.automattic.simplenote.utils.SnackbarUtils;                                                    </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  57 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  58 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  59 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  60 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  61 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  62 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  63 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  64 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  65 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  66 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  67 import com.simperium.client.Query;                                                                       </span>
<span  style="">  68                                                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  69 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  70 import java.util.Calendar;                                                                               </span>
<span  style="">  71                                                                                                          </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  72 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                       </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  73         TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                     </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  74         SimplenoteEditText.OnSelectionChangedListener,                                                   </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  75         ShareBottomSheetDialog.ShareSheetListener,                                                       </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  76         HistoryBottomSheetDialog.HistorySheetListener,                                                   </span>
<span class="715837164460589842" onmouseenter="enter('715837164460589842');" onmouseout="out('715837164460589842');" style="">  77         InfoBottomSheetDialog.InfoSheetListener,                                                         </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  78         SimplenoteEditText.OnCheckboxToggledListener {                                                   </span>
<span  style="">  79                                                                                                          </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  80     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  81     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style="">  82     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style="">  83     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style="">  84     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style="">  85     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  86     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  87     private static final int MAX_REVISIONS = 30;                                                         </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="">  88     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="">  89     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  90     private Note mNote;                                                                                  </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style="">  91     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">  93         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">  94             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  96     };                                                                                                   </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  97     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style="">  98     private View mRootView;                                                                              </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  99     private SimplenoteEditText mContentEditText;                                                         </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style=""> 100     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 101     private Handler mAutoSaveHandler;                                                                    </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 102     private Handler mPublishTimeoutHandler;                                                              </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 103     private Handler mHistoryTimeoutHandler;                                                              </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 104     private LinearLayout mPlaceholderView;                                                               </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 105     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 106     private boolean mIsLoadingNote;                                                                      </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 107     private boolean mIsMarkdownEnabled;                                                                  </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 108     private boolean mIsPreviewEnabled;                                                                   </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 109     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 110     private ActionMode mActionMode;                                                                      </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 111     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 112     private String mLinkUrl;                                                                             </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 113     private String mLinkText;                                                                            </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 114     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 115     private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 116     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 117     private String mMatchOffsets;                                                                        </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 118     private int mCurrentCursorPosition;                                                                  </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 119     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 120     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 121     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 123         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 124             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 125                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126             }                                                                                            </span>
<span  style=""> 127                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 128             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 129                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 130                 public void run() {                                                                      </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style=""><abbr title=" 131                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 131                     if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 132                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 133                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 136             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 138     };                                                                                                   </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 139     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 140     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 141     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 142     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 143         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 144         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 145         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 146             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 147             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span  style=""> 148                                                                                                          </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 149             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 150                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 151                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 152                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 153                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 154                                                                                                          </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 155                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156             }                                                                                            </span>
<span  style=""> 157                                                                                                          </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 158             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 158             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.colðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 159             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 159             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireAcðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 160             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161         }                                                                                                </span>
<span  style=""> 162                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 163         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 164         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 166         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 167             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168         }                                                                                                </span>
<span  style=""> 169                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 170         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 172         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 173             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 174                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 175                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 176                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 177                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 178                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 179                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 180                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 181                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 182                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 184                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 186                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 187                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 188                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 189                         copyToClipboard(mLinkText);                                                      </span>
<span class="3326463149460041317" onmouseenter="enter('3326463149460041317');" onmouseout="out('3326463149460041317');" style=""><abbr title=" 190                         Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 190                         Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 191                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 193                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 194                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 195                     if (mLinkText != null) {                                                             </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 196                         showShareSheet();                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 197                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 199                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 200                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 201                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203         }                                                                                                </span>
<span  style=""> 204                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 205         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 207         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 208             mActionMode = null;                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 209             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 210                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 211                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 212                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 213                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 213                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 215                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 216                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 217             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 219     };                                                                                                   </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 220     private Snackbar mPublishingSnackbar;                                                                </span>
<span class="9194238965806529126" onmouseenter="enter('9194238965806529126');" onmouseout="out('9194238965806529126');" style=""> 221     private boolean mIsUndoingPublishing;                                                                </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 222     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 223     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 224         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 225         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 226             if (!isAdded()) return;                                                                      </span>
<span  style=""> 227                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 228             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 229                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 230                 public void run() {                                                                      </span>
<span  style=""> 231                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 232                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 233                     mNote.save();                                                                        </span>
<span  style=""> 234                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 235                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 237             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 239     };                                                                                                   </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 240     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 241     private String mCss;                                                                                 </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 242     private WebView mMarkdown;                                                                           </span>
<span  style=""> 243                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 245      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 246      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 247      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 248     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249     }                                                                                                    </span>
<span  style=""> 250                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 252     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 253         super.onCreate(savedInstanceState);                                                              </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style=""> 254         mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                        </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 255         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 256         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 257                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 258         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 259         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 260                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 261         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 261         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 262         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 262         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 263         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 263         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, RðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 264         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 264         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, RðŸ”µ</abbr></span>
<span  style=""> 265                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 266         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 267         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 268         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 269                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 270         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 271                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 271                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 272         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 274             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 275                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 276                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 277                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278             }                                                                                            </span>
<span  style=""> 279                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 280             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 281             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 282                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 283                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284             }                                                                                            </span>
<span  style=""> 285                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 287             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 288                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289             }                                                                                            </span>
<span  style=""> 290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 292             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 293                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 294                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 295                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 296                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 297                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 298                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 299                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 300                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 301                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 302                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 303                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 303                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 304                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 306         };                                                                                               </span>
<span  style=""> 307                                                                                                          </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 308         WidgetUtils.updateNoteWidgets(getActivity());                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309     }                                                                                                    </span>
<span  style=""> 310                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 311     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 312     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 312     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 313         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 314         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 315         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 316         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 317         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="8247847837270423645" onmouseenter="enter('8247847837270423645');" onmouseout="out('8247847837270423645');" style=""> 318         mTagView = mRootView.findViewById(R.id.tag_view);                                                </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 319         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 320         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 321         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 322                                                                                                          </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 323         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 324         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 325             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 326             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 327             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 328             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 329                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 330                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331         }                                                                                                </span>
<span  style=""> 332                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 333         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 334                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 335         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 336         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 337             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 338             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 339             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 340                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341             }                                                                                            </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 342             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1032230432854321396" onmouseenter="enter('-1032230432854321396');" onmouseout="out('-1032230432854321396');" style=""> 343         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null ) {  </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 344             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 345             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 346             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 347                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349         }                                                                                                </span>
<span  style=""> 350                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 351         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 352         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 354             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 355                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 356                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 357                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 358                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359                     }                                                                                    </span>
<span  style=""> 360                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 361                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 362                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 363                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 364                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 365                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 366                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 367                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368                     }                                                                                    </span>
<span  style=""> 369                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 370                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 371                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 372                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span  style=""> 373                                                                                                          </span>
<span class="5020302440416452113" onmouseenter="enter('5020302440416452113');" onmouseout="out('5020302440416452113');" style=""> 374                     // We use different scroll views in the root of the layout files... yuck.            </span>
<span class="-2313309201646667285" onmouseenter="enter('-2313309201646667285');" onmouseout="out('-2313309201646667285');" style=""> 375                     // So we have to cast appropriately to do a smooth scroll                            </span>
<span class="4785183779479911307" onmouseenter="enter('4785183779479911307');" onmouseout="out('4785183779479911307');" style=""> 376                     if (mRootView instanceof NestedScrollView) {                                         </span>
<span class="-2957331341634255052" onmouseenter="enter('-2957331341634255052');" onmouseout="out('-2957331341634255052');" style=""> 377                         ((NestedScrollView)mRootView).smoothScrollTo(0, lineTop);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 378                     } else {                                                                             </span>
<span class="-2547502694507835703" onmouseenter="enter('-2547502694507835703');" onmouseout="out('-2547502694507835703');" style=""> 379                         ((ScrollView)mRootView).smoothScrollTo(0, lineTop);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                     }                                                                                    </span>
<span  style=""> 381                                                                                                          </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 382                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 385         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 386         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 387         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388     }                                                                                                    </span>
<span  style=""> 389                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 390     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 391     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 392         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 393         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 394         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 395                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 396         mTagView.setOnTagAddedListener(this);                                                            </span>
<span  style=""> 397                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 398         if (mContentEditText != null) {                                                                  </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""><abbr title=" 399             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));"> 399             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity())ðŸ”µ</abbr></span>
<span  style=""> 400                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 401             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 402                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405     }                                                                                                    </span>
<span  style=""> 406                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 407     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 408         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 409             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 410             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 411                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 412                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                 }                                                                                        </span>
<span  style=""> 414                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 415                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 415                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 416                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 417                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 420         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421     }                                                                                                    </span>
<span  style=""> 422                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 423     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 424     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 425         super.onPause();  // Always call the superclass method first                                     </span>
<span  style=""> 426                                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 427         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 428         mNotesBucket.stop();                                                                             </span>
<span  style=""> 429                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 430         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 431         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 432                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 433         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 434                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 435         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 436             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437         }                                                                                                </span>
<span  style=""> 438                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 439         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 440             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441         }                                                                                                </span>
<span  style=""> 442                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 443         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 444             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445         }                                                                                                </span>
<span  style=""> 446                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 447         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 448         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449     }                                                                                                    </span>
<span  style=""> 450                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 452     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 453         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 454                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 455         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 456             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458     }                                                                                                    </span>
<span  style=""> 459                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 460     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 461     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 462         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""><abbr title=" 463         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {"> 463         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 464             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465         }                                                                                                </span>
<span  style=""> 466                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 467         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 468                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 469         if (mNote != null) {                                                                             </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 470             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                         </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 471             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 472                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 473             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span  style=""> 474                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 475             if (mNote.isDeleted()) {                                                                     </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 476                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7281764457900946953" onmouseenter="enter('-7281764457900946953');" onmouseout="out('-7281764457900946953');" style=""> 477                 trashItem.setIcon(R.drawable.ic_trash_restore_24dp);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 478             } else {                                                                                     </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 479                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-276308356326274253" onmouseenter="enter('-276308356326274253');" onmouseout="out('-276308356326274253');" style=""> 480                 trashItem.setIcon(R.drawable.ic_trash_24dp);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482         }                                                                                                </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 483         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484     }                                                                                                    </span>
<span  style=""> 485                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 487     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 488         switch (item.getItemId()) {                                                                      </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 489             case R.id.menu_view_info:                                                                    </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 490                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 491                 return true;                                                                             </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 492             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 493                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 494                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 495             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 496                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 497                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 498             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 499                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 500                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 501             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 502                 if (!isAdded()) return false;                                                            </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 503                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 504                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 505             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 506                 if (!isAdded()) return false;                                                            </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 507                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 508                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 509             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 510                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512     }                                                                                                    </span>
<span  style=""> 513                                                                                                          </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style=""> 514     private void insertChecklist() {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 515         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 516             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 517         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 518             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 519             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520         }                                                                                                </span>
<span  style=""> 521                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 522         AnalyticsTracker.track(                                                                          </span>
<span class="3978226561215059527" onmouseenter="enter('3978226561215059527');" onmouseout="out('3978226561215059527');" style=""> 523                 AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED,                                         </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 524                 AnalyticsTracker.CATEGORY_NOTE,                                                          </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 525                 &quot;toolbar_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 526         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527     }                                                                                                    </span>
<span  style=""> 528                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 529     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 530     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 531         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 532         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 533             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 534             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536     }                                                                                                    </span>
<span  style=""> 537                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 538     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 539         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 540         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541     }                                                                                                    </span>
<span  style=""> 542                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 543     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 544         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 547     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 548         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549     }                                                                                                    </span>
<span  style=""> 550                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 551     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 552         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 553         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554     }                                                                                                    </span>
<span  style=""> 555                                                                                                          </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 556     private void shareNote() {                                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 557         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 558             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 559             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 560             AnalyticsTracker.track(                                                                      </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 561                     AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 562                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 563                     &quot;action_bar_share_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 564             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566     }                                                                                                    </span>
<span  style=""> 567                                                                                                          </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 568     private void showHistory() {                                                                         </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 569         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 570             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 571             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 572             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 573         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 574             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 578     private void showInfo() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 579         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 580             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 581             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 582             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584     }                                                                                                    </span>
<span  style=""> 585                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 586     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 587         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 588                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 589         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 590             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 594     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 595         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 596                 mCss,                                                                                    </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 597                 mContentEditText.getPlainTextContent()                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 598         );                                                                                               </span>
<span  style=""> 599                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 600         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601     }                                                                                                    </span>
<span  style=""> 602                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 603     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 604         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 605             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 606                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 607         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 608                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 609         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 610             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 611         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 612             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613         }                                                                                                </span>
<span  style=""> 614                                                                                                          </span>
<span  style=""> 615                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 616         saveNote();                                                                                      </span>
<span  style=""> 617                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 618         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619     }                                                                                                    </span>
<span  style=""> 620                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 621     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 622         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 623         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 624         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625     }                                                                                                    </span>
<span  style=""> 626                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 627     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 628         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 629             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 630                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 631             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 631             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 632                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 633             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 634                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 635             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 636                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 637                 mNote.save();                                                                            </span>
<span  style=""> 638                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 639                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 640                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 641                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 642                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644             }                                                                                            </span>
<span  style=""> 645                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 646             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 647             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 648             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650     }                                                                                                    </span>
<span  style=""> 651                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 652     private void updateTagList() {                                                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 653         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 654         if (activity == null) return;                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 656         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 657         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658     }                                                                                                    </span>
<span  style=""> 659                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 660     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 661         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 662         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 663         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 664         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 665         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 666         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 667         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 668         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 669                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 670         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 671                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 672         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 673                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 674         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 675                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 676         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 677         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 678             return newText.length();                                                                     </span>
<span  style=""> 679                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 680         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 681         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 682                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 683         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 684             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 684             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 685             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 685             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 686         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 687             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688         }                                                                                                </span>
<span  style=""> 689                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 690         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 691         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 692             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 693                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 694         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 695         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696     }                                                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 698     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 699     public void onTagsChanged(String tagString) {                                                        </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 700         if (mNote == null || !isAdded()) return;                                                         </span>
<span  style=""> 701                                                                                                          </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 702         if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 703             AnalyticsTracker.track(                                                                      </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 704                     AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 705                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 706                     &quot;tag_added_to_note&quot;                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 707             );                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 708         } else {                                                                                         </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 709             AnalyticsTracker.track(                                                                      </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 710                     AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 711                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 712                     &quot;tag_removed_from_note&quot;                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 713             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span  style=""> 715                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 716         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 717         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 718         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 719         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720     }                                                                                                    </span>
<span  style=""> 721                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 723     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 724         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725     }                                                                                                    </span>
<span  style=""> 726                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 728     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 729         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 730         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 731         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732     }                                                                                                    </span>
<span  style=""> 733                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 734     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 735     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 736         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 737         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 738             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 739             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740         }                                                                                                </span>
<span  style=""> 741                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 742         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 743         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 744             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 745             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746         }                                                                                                </span>
<span  style=""> 747                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 748         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 749         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 750         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 751         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752     }                                                                                                    </span>
<span  style=""> 753                                                                                                          </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 754     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 755         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 756         // Remove any existing size spans                                                                </span>
<span class="-3345432347418186953" onmouseenter="enter('-3345432347418186953');" onmouseout="out('-3345432347418186953');" style=""> 757         RelativeSizeSpan[] spans = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 758         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 759             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 761         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 762         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 763             return;                                                                                      </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 764         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 764         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765     }                                                                                                    </span>
<span  style=""> 766                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 767     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 768         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 769         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 770         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 771         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772     }                                                                                                    </span>
<span  style=""> 773                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 774     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 775         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 776             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777         }                                                                                                </span>
<span  style=""> 778                                                                                                          </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 779         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780     }                                                                                                    </span>
<span  style=""> 781                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 782     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 783         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 784             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 785             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 786             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 787             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 788                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 789         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 790             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 791                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793     }                                                                                                    </span>
<span  style=""> 794                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 795     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 796     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 797         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 798             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 799             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 800                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803     }                                                                                                    </span>
<span  style=""> 804                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 805     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 806         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807     }                                                                                                    </span>
<span  style=""> 808                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 809     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 810         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811     }                                                                                                    </span>
<span  style=""> 812                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 813     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 814         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 815             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 816         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 817             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819     }                                                                                                    </span>
<span  style=""> 820                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 821     private String getNoteTagsString() {                                                                 </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 822         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 823             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 824         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 825             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827     }                                                                                                    </span>
<span  style=""> 828                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 829     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style=""> 830      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 831      */                                                                                                  </span>
<span  style=""> 832                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 833     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 834     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 835         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 836         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 837             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839     }                                                                                                    </span>
<span  style=""> 840                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 841     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 842     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 843         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 844         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 845             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847     }                                                                                                    </span>
<span  style=""> 848                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 849     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style=""> 850     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 851         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 852             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853         }                                                                                                </span>
<span  style=""> 854                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style=""> 855         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 856             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857         }                                                                                                </span>
<span  style=""> 858                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style=""> 859         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style=""> 860         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style=""> 861         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style=""> 862             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style=""> 864         ft.addToBackStack(null);                                                                         </span>
<span  style=""> 865                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style=""> 866         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style=""> 867         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style=""> 868         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style=""> 869         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870     }                                                                                                    </span>
<span  style=""> 871                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 872     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 873     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 874         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875     }                                                                                                    </span>
<span  style=""> 876                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 877     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 878     public void onShareDismissed() {                                                                     </span>
<span  style=""> 879                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880     }                                                                                                    </span>
<span  style=""> 881                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 882     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style=""> 883      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 884      */                                                                                                  </span>
<span  style=""> 885                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 887     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 888         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 889         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 890             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892     }                                                                                                    </span>
<span  style=""> 893                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 894     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 895     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 896         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 897             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 899         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900     }                                                                                                    </span>
<span  style=""> 901                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 902     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 903     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 904         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 905             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906         }                                                                                                </span>
<span  style=""> 907                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 908         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 909             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911     }                                                                                                    </span>
<span  style=""> 912                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 913     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 914     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 915         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916     }                                                                                                    </span>
<span  style=""> 917                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 918     /**                                                                                                  </span>
<span class="278795310073326946" onmouseenter="enter('278795310073326946');" onmouseout="out('278795310073326946');" style=""> 919      * Info bottom sheet listeners                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 920      */                                                                                                  </span>
<span  style=""> 921                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 922     @Override                                                                                            </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 923     public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                           </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 924         NoteUtils.setNotePin(mNote, isSwitchedOn);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925     }                                                                                                    </span>
<span  style=""> 926                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 927     @Override                                                                                            </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 928     public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                      </span>
<span class="2498037679736242197" onmouseenter="enter('2498037679736242197');" onmouseout="out('2498037679736242197');" style=""> 929         mIsMarkdownEnabled = isSwitchedOn;                                                               </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 930         Activity activity = getActivity();                                                               </span>
<span  style=""> 931                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 932         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span  style=""> 933                                                                                                          </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 934             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 935             if (mIsMarkdownEnabled) {                                                                    </span>
<span  style=""> 936                                                                                                          </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 937                 editorActivity.showTabs();                                                               </span>
<span  style=""> 938                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 939                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 940                     // Get markdown fragment and update content                                          </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 941                     mNoteMarkdownFragment =                                                              </span>
<span class="5596511960413116475" onmouseenter="enter('5596511960413116475');" onmouseout="out('5596511960413116475');" style=""> 942                             editorActivity.getNoteMarkdownFragment();                                    </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 943                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 945             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 946                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 948         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 949             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 950             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951         }                                                                                                </span>
<span  style=""> 952                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 953         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954     }                                                                                                    </span>
<span  style=""> 955                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 956     @Override                                                                                            </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 957     public void onInfoCopyLinkClicked() {                                                                </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 958         copyToClipboard(mNote.getPublishedUrl());                                                        </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 959         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960     }                                                                                                    </span>
<span  style=""> 961                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 962     @Override                                                                                            </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 963     public void onInfoShareLinkClicked() {                                                               </span>
<span class="-7399939689867674649" onmouseenter="enter('-7399939689867674649');" onmouseout="out('-7399939689867674649');" style=""> 964         if (mInfoBottomSheet != null) {                                                                  </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 965             mInfoBottomSheet.dismiss();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966         }                                                                                                </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 967         showShareSheet();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968     }                                                                                                    </span>
<span  style=""> 969                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 970     @Override                                                                                            </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 971     public void onInfoDismissed() {                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 972     }                                                                                                    </span>
<span  style=""> 973                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style=""> 974     protected void saveNote() {                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 975 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-3105099670941444201" onmouseenter="enter('-3105099670941444201');" onmouseout="out('-3105099670941444201');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 976         if (mNote == null || mContentEditText == null || mIsLoadingNote ||                               </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 977             (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {"> 977             (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheeðŸ”µ</abbr></span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 978 ||||||| BASE                                                                                             </span>
<span class="6573885176676722224" onmouseenter="enter('6573885176676722224');" onmouseout="out('6573885176676722224');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 979         if (mNote == null ||                                                                             </span>
<span class="-704198539817842861" onmouseenter="enter('-704198539817842861');" onmouseout="out('-704198539817842861');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 980                 mContentEditText == null ||                                                              </span>
<span class="-7342228029026764788" onmouseenter="enter('-7342228029026764788');" onmouseout="out('-7342228029026764788');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 981                 mIsLoadingNote ||                                                                        </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 982                 (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 983             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 984         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 985                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 986 =======                                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 987         try {                                                                                            </span>
<span class="5923515376230853284" onmouseenter="enter('5923515376230853284');" onmouseout="out('5923515376230853284');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 988             Simplenote application = (Simplenote) requireActivity().getApplication();                    </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 989             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="1614046200152628925" onmouseenter="enter('1614046200152628925');" onmouseout="out('1614046200152628925');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 990             mNote = notesBucket.get(mNote.getSimperiumKey());                                            </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 991                                                                                                          </span>
<span class="-3105099670941444201" onmouseenter="enter('-3105099670941444201');" onmouseout="out('-3105099670941444201');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 992             if (mNote == null || mContentEditText == null || mIsLoadingNote ||                           </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 993                     (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 994 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 995             return;                                                                                      </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 996             } else {                                                                                     </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style=""> 997                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 998         }                                                                                                </span>
<span  style=""> 999                                                                                                          </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1000         String content = mContentEditText.getPlainTextContent();                                         </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1001         String tagString = getNoteTagsString();                                                          </span>
<span  style="">1002                                                                                                          </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1003         if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1003         if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1004             mNote.setContent(content);                                                                   </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1005             mNote.setTagString(tagString);                                                               </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1006             mNote.setModificationDate(Calendar.getInstance());                                           </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1007             mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1008             mNote.setPreviewEnabled(mIsPreviewEnabled);                                                  </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1009             mNote.save();                                                                                </span>
<span  style="">1010                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1011             AnalyticsTracker.track(                                                                      </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="">1012                     AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1013                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1014                     &quot;editor_save&quot;                                                                        </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1015             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1016         }                                                                                                </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1017         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1018             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1019         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1020     }                                                                                                    </span>
<span  style="">1021                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1022     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1023     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1024     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1025     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1026         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1027         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1028             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1029             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1030                 return;                                                                                  </span>
<span  style="">1031                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1032             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1033             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1034                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1035                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1036                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1036                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1037                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1038                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1039                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1040                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041                 }                                                                                        </span>
<span  style="">1042                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1043                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1044                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1045                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1045                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1046                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1047                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1048                     }                                                                                    </span>
<span  style="">1049                                                                                                          </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1050                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1051                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1052             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1053                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1054                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1055             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1056         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1057             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1058             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1060     }                                                                                                    </span>
<span  style="">1061                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1062     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1063         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1064             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1065                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1066                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1067             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1068                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1069                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1070             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1071                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1072                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1073             } else {                                                                                     </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1074                 mViewLinkMenuItem.setIcon(mWebIcon);                                                     </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1075                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1077         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1078     }                                                                                                    </span>
<span  style="">1079                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1080     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1081         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1082             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1083             mNote.save();                                                                                </span>
<span  style="">1084                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1085             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1086             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1087                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1088             AnalyticsTracker.track(                                                                      </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1089                     (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                        </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1090                             AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                               </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1091                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1092                     &quot;publish_note_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1093             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1094         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1095     }                                                                                                    </span>
<span  style="">1096                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1097     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span  style="">1098                                                                                                          </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1099         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1100             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1101         }                                                                                                </span>
<span  style="">1102                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1103         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1104         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1105                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1106         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1107             if (mNote.isPublished()) {                                                                   </span>
<span  style="">1108                                                                                                          </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1109                 if (mIsUndoingPublishing) {                                                              </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1110                     SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,           </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1111                             R.color.status_positive,                                                     </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1112                             Snackbar.LENGTH_LONG);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1113                 } else {                                                                                 </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1114                     SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,           </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1115                             R.color.status_positive,                                                     </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1116                             Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1117                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1118                                 public void onClick(View v) {                                            </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1119                                     mIsUndoingPublishing = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1120                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1121                                 }                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1122                             });                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1123                 }                                                                                        </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1124                 copyToClipboard(mNote.getPublishedUrl());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1125             } else {                                                                                     </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1126                 if (mIsUndoingPublishing) {                                                              </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1127                     SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,         </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1128                             R.color.status_negative,                                                     </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1129                             Snackbar.LENGTH_LONG);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1130                 } else {                                                                                 </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1131                     SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,         </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1132                             R.color.status_negative,                                                     </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1133                             Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1134                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1135                                 public void onClick(View v) {                                            </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1136                                     mIsUndoingPublishing = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1137                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1138                                 }                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1139                             });                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1141             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1142         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1143             if (mNote.isPublished()) {                                                                   </span>
<span class="-6121697006332454273" onmouseenter="enter('-6121697006332454273');" onmouseout="out('-6121697006332454273');" style="">1144                 SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_error,                  </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1145                         R.color.status_negative, Snackbar.LENGTH_LONG);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1146             } else {                                                                                     </span>
<span class="-4531979614724167785" onmouseenter="enter('-4531979614724167785');" onmouseout="out('-4531979614724167785');" style="">1147                 SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_error,                    </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1148                         R.color.status_negative, Snackbar.LENGTH_LONG);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1150         }                                                                                                </span>
<span  style="">1151                                                                                                          </span>
<span class="265789452469033686" onmouseenter="enter('265789452469033686');" onmouseout="out('265789452469033686');" style="">1152         mIsUndoingPublishing = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1153     }                                                                                                    </span>
<span  style="">1154                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1155     private void publishNote() {                                                                         </span>
<span  style="">1156                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1157         if (isAdded()) {                                                                                 </span>
<span class="4291898079933948381" onmouseenter="enter('4291898079933948381');" onmouseout="out('4291898079933948381');" style="">1158             mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.publishing,     </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1159                     R.color.blue, Snackbar.LENGTH_INDEFINITE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160         }                                                                                                </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1161         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162     }                                                                                                    </span>
<span  style="">1163                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1164     private void unpublishNote() {                                                                       </span>
<span  style="">1165                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1166         if (isAdded()) {                                                                                 </span>
<span class="-6747781156546415836" onmouseenter="enter('-6747781156546415836');" onmouseout="out('-6747781156546415836');" style="">1167             mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublishing,   </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1168                     R.color.blue, Snackbar.LENGTH_INDEFINITE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1169         }                                                                                                </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1170         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171     }                                                                                                    </span>
<span  style="">1172                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1173     private void copyToClipboard(String text) {                                                          </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="">1174         ClipboardManager clipboard = (ClipboardManager) requireActivity()                                </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="">1175                 .getSystemService(Context.CLIPBOARD_SERVICE);                                            </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1176         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="">1177         if (clipboard != null) {                                                                         </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1178             clipboard.setPrimaryClip(clip);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1179         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180     }                                                                                                    </span>
<span  style="">1181                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1182     private void showShareSheet() {                                                                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1183         if (isAdded()) {                                                                                 </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1184             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1185         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1186     }                                                                                                    </span>
<span  style="">1187                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1188     private void showInfoSheet() {                                                                       </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1189         if (isAdded()) {                                                                                 </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1190             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192     }                                                                                                    </span>
<span  style="">1193                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1194     private void showHistorySheet() {                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1195         if (isAdded()) {                                                                                 </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1196             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1197             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1197             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1198             saveNote();                                                                                  </span>
<span  style="">1199                                                                                                          </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1200             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202     }                                                                                                    </span>
<span  style="">1203                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1204     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1205      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1206      */                                                                                                  </span>
<span  style="">1207                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1208     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1209     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1210                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1211     }                                                                                                    </span>
<span  style="">1212                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1213     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1214     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1214     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1215         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1216             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1217                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1218                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1219                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1220                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1221                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1222                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1223                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1224                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1225                                 }                                                                        </span>
<span  style="">1226                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1227                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1228                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1230                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1232                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1233                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1235             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1236         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237     }                                                                                                    </span>
<span  style="">1238                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1239     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1240     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1241         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1242     }                                                                                                    </span>
<span  style="">1243                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1244     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1245     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1246         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1247         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1248             return;                                                                                      </span>
<span  style="">1249                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1250         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1251         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1252             return;                                                                                      </span>
<span  style="">1253                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1254         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255     }                                                                                                    </span>
<span  style="">1256                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1257     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1258         WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                  </span>
<span  style="">1259                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1260         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1261             weakFragment = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262         }                                                                                                </span>
<span  style="">1263                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1264         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1265         protected void onPreExecute() {                                                                  </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1266             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1267             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1268                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1269                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1271         }                                                                                                </span>
<span  style="">1272                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1273         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1274         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1275             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1276             if (fragment == null || fragment.getActivity() == null) {                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1277                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1278             }                                                                                            </span>
<span  style="">1279                                                                                                          </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1280             String noteID = args[0];                                                                     </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1281             Simplenote application = (Simplenote) fragment.getActivity().getApplication();               </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1282             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span  style="">1283                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1284             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1285                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1286                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1287                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1288                     ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1289                 }                                                                                        </span>
<span  style="">1290                                                                                                          </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1291                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1292                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1293                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1294                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1295                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1296             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1297                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1298                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1299                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1300                     Note currentNote = notesCursor.getObject();                                          </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1301                     if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {           </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1302                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1303                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1304                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1305                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1306             }                                                                                            </span>
<span  style="">1307                                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1308             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1309         }                                                                                                </span>
<span  style="">1310                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1311         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1312         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-7212142050064810641" onmouseenter="enter('-7212142050064810641');" onmouseout="out('-7212142050064810641');" style="">1313             final NoteEditorFragment fragment = weakFragment.get();                                      </span>
<span class="-799665902142491282" onmouseenter="enter('-799665902142491282');" onmouseout="out('-799665902142491282');" style="">1314             if (fragment == null                                                                         </span>
<span class="-3592720682984648780" onmouseenter="enter('-3592720682984648780');" onmouseout="out('-3592720682984648780');" style="">1315                     || fragment.getActivity() == null                                                    </span>
<span class="-193925863612874363" onmouseenter="enter('-193925863612874363');" onmouseout="out('-193925863612874363');" style="">1316                     || fragment.getActivity().isFinishing()) {                                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1317                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318             }                                                                                            </span>
<span  style="">1319                                                                                                          </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1320             fragment.refreshContent(false);                                                              </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1321             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1322                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1322                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1323                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span  style="">1324                                                                                                          </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1325                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1326             }                                                                                            </span>
<span  style="">1327                                                                                                          </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1328             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span  style="">1329                                                                                                          </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1330             if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                       </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1331                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1332                 fragment.mContentEditText.requestFocus();                                                </span>
<span  style="">1333                                                                                                          </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1334                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1335                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1336                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1337                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1338                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1339                         }                                                                                </span>
<span  style="">1340                                                                                                          </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1341                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1341                         InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivityðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1342                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1343                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1344                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1345                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1346                 }, 100);                                                                                 </span>
<span  style="">1347                                                                                                          </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1348             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1349                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1350                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351             }                                                                                            </span>
<span  style="">1352                                                                                                          </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1353             fragment.updateMarkdownView();                                                               </span>
<span  style="">1354                                                                                                          </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1355             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span  style="">1356                                                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1357             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1358             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1360     }                                                                                                    </span>
<span  style="">1361                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1362     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1363         WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                  </span>
<span  style="">1364                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1365         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1366             weakFragment = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1367         }                                                                                                </span>
<span  style="">1368                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1369         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1370         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1371             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1372             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1373                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1374             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1375             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1376         }                                                                                                </span>
<span  style="">1377                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1378         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1379         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1380             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style=""><abbr title="1381             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {">1381             if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishingðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1382                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1383                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1384                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1385             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1387     }                                                                                                    </span>
<span  style="">1388                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1389     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1390         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1391             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1392         }                                                                                                </span>
<span  style="">1393                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1394         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1395             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397     }                                                                                                    </span>
<span  style="">1398                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1399     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1400     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1401         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1402             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1403         }                                                                                                </span>
<span  style="">1404                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1405         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1406         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1407             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1408             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1409         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1410             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1411             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1412                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1413                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1414                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1416             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1417             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1418         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1420 }                                                                                                        </span>


</pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1 package com.automattic.simplenote;                                                                       </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4 import android.content.ClipData;                                                                         </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5 import android.content.ClipboardManager;                                                                 </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8 import android.database.Cursor;                                                                          </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10 import android.net.Uri;                                                                                  </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11 import android.os.AsyncTask;                                                                             </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12 import android.os.Bundle;                                                                                </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  13 import android.os.Handler;                                                                               </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  14 import android.text.Editable;                                                                            </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  15 import android.text.Layout;                                                                              </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16 import android.text.Spanned;                                                                             </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17 import android.text.TextWatcher;                                                                         </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  18 import android.text.style.RelativeSizeSpan;                                                              </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  19 import android.text.style.URLSpan;                                                                       </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  20 import android.text.util.Linkify;                                                                        </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  21 import android.util.TypedValue;                                                                          </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22 import android.view.LayoutInflater;                                                                      </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  23 import android.view.Menu;                                                                                </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  24 import android.view.MenuInflater;                                                                        </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  25 import android.view.MenuItem;                                                                            </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  26 import android.view.View;                                                                                </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  27 import android.view.ViewGroup;                                                                           </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  28 import android.view.ViewTreeObserver;                                                                    </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  29 import android.view.inputmethod.InputMethodManager;                                                      </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  30 import android.webkit.WebView;                                                                           </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  31 import android.widget.CursorAdapter;                                                                     </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32 import android.widget.LinearLayout;                                                                      </span>
<span class="6117110559667671300" onmouseenter="enter('6117110559667671300');" onmouseout="out('6117110559667671300');" style="">  33 import android.widget.ScrollView;                                                                        </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  34 import android.widget.TextView;                                                                          </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  35 import android.widget.Toast;                                                                             </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  36 import androidx.annotation.NonNull;                                                                      </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  37 import androidx.appcompat.app.AppCompatActivity;                                                         </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  38 import androidx.appcompat.view.ActionMode;                                                               </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  39 import androidx.core.widget.NestedScrollView;                                                            </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  40 import androidx.fragment.app.Fragment;                                                                   </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  41 import androidx.fragment.app.FragmentTransaction;                                                        </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  42 import com.automattic.simplenote.analytics.AnalyticsTracker;                                             </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  43 import com.automattic.simplenote.models.Note;                                                            </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  44 import com.automattic.simplenote.models.Tag;                                                             </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  45 import com.automattic.simplenote.utils.AutoBullet;                                                       </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  46 import com.automattic.simplenote.utils.ContextUtils;                                                     </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  47 import com.automattic.simplenote.utils.DisplayUtils;                                                     </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  48 import com.automattic.simplenote.utils.DrawableUtils;                                                    </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  49 import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                           </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  50 import com.automattic.simplenote.utils.NoteUtils;                                                        </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  51 import com.automattic.simplenote.utils.PrefUtils;                                                        </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  52 import com.automattic.simplenote.utils.SimplenoteLinkify;                                                </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  53 import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                         </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  54 import com.automattic.simplenote.utils.SnackbarUtils;                                                    </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  55 import com.automattic.simplenote.utils.SpaceTokenizer;                                                   </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  56 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                 </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  57 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                    </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  58 import com.automattic.simplenote.utils.TextHighlighter;                                                  </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  59 import com.automattic.simplenote.utils.ThemeUtils;                                                       </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  60 import com.automattic.simplenote.utils.WidgetUtils;                                                      </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  61 import com.automattic.simplenote.widgets.SimplenoteEditText;                                             </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  62 import com.google.android.material.snackbar.Snackbar;                                                    </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  63 import com.simperium.client.Bucket;                                                                      </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  64 import com.simperium.client.BucketObjectMissingException;                                                </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  65 import com.simperium.client.Query;                                                                       </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  66 import java.lang.ref.WeakReference;                                                                      </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  67 import java.util.Calendar;                                                                               </span>
<span  style="">  68                                                                                                          </span>
<span  style="">  69                                                                                                          </span>
<span class="2870144926955369676" onmouseenter="enter('2870144926955369676');" onmouseout="out('2870144926955369676');" style=""><abbr title="  70 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAddedListener , View.OnFocusChangeListener , SimplenoteEditText.OnSelectionChangedListener , ShareBottomSheetDialog.ShareSheetListener , HistoryBottomSheetDialog.HistorySheetListener , InfoBottomSheetDialog.InfoSheetListener , SimplenoteEditText.OnCheckboxToggledListener {">  70 public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt; , TextWatcher , OnTagAdðŸ”µ</abbr></span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  71     public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                  </span>
<span  style="">  72                                                                                                          </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  73     public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                </span>
<span  style="">  74                                                                                                          </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style="">  75     public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                      </span>
<span  style="">  76                                                                                                          </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style="">  77     public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                </span>
<span  style="">  78                                                                                                          </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style="">  79     public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                  </span>
<span  style="">  80                                                                                                          </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style="">  81     private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                         </span>
<span  style="">  82                                                                                                          </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  83     private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                               </span>
<span  style="">  84                                                                                                          </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  85     private static final int MAX_REVISIONS = 30;                                                         </span>
<span  style="">  86                                                                                                          </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="">  87     private static final int PUBLISH_TIMEOUT = 20000;                                                    </span>
<span  style="">  88                                                                                                          </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="">  89     private static final int HISTORY_TIMEOUT = 10000;                                                    </span>
<span  style="">  90                                                                                                          </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  91     private Note mNote;                                                                                  </span>
<span  style="">  92                                                                                                          </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style="">  93     private final Runnable mAutoSaveRunnable = new Runnable() {                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  94         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">  95         public void run() {                                                                              </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">  96             saveAndSyncNote();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  97         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  98     };                                                                                                   </span>
<span  style="">  99                                                                                                          </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style=""> 100     private Bucket&lt;Note&gt; mNotesBucket;                                                                   </span>
<span  style=""> 101                                                                                                          </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style=""> 102     private View mRootView;                                                                              </span>
<span  style=""> 103                                                                                                          </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style=""> 104     private SimplenoteEditText mContentEditText;                                                         </span>
<span  style=""> 105                                                                                                          </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style=""> 106     private TagsMultiAutoCompleteTextView mTagView;                                                      </span>
<span  style=""> 107                                                                                                          </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 108     private Handler mAutoSaveHandler;                                                                    </span>
<span  style=""> 109                                                                                                          </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 110     private Handler mPublishTimeoutHandler;                                                              </span>
<span  style=""> 111                                                                                                          </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 112     private Handler mHistoryTimeoutHandler;                                                              </span>
<span  style=""> 113                                                                                                          </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 114     private LinearLayout mPlaceholderView;                                                               </span>
<span  style=""> 115                                                                                                          </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 116     private CursorAdapter mAutocompleteAdapter;                                                          </span>
<span  style=""> 117                                                                                                          </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 118     private boolean mIsLoadingNote;                                                                      </span>
<span  style=""> 119                                                                                                          </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 120     private boolean mIsMarkdownEnabled;                                                                  </span>
<span  style=""> 121                                                                                                          </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 122     private boolean mIsPreviewEnabled;                                                                   </span>
<span  style=""> 123                                                                                                          </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 124     private boolean mShouldScrollToSearchMatch;                                                          </span>
<span  style=""> 125                                                                                                          </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 126     private ActionMode mActionMode;                                                                      </span>
<span  style=""> 127                                                                                                          </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 128     private MenuItem mViewLinkMenuItem;                                                                  </span>
<span  style=""> 129                                                                                                          </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 130     private String mLinkUrl;                                                                             </span>
<span  style=""> 131                                                                                                          </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 132     private String mLinkText;                                                                            </span>
<span  style=""> 133                                                                                                          </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 134     private MatchOffsetHighlighter mHighlighter;                                                         </span>
<span  style=""> 135                                                                                                          </span>
<span class="6775927648012186278" onmouseenter="enter('6775927648012186278');" onmouseout="out('6775927648012186278');" style=""> 136     private Drawable mEmailIcon;                                                                         </span>
<span  style=""> 137                                                                                                          </span>
<span class="-7718281137001828185" onmouseenter="enter('-7718281137001828185');" onmouseout="out('-7718281137001828185');" style=""> 138     private Drawable mWebIcon;                                                                           </span>
<span  style=""> 139                                                                                                          </span>
<span class="-2947594512272302462" onmouseenter="enter('-2947594512272302462');" onmouseout="out('-2947594512272302462');" style=""> 140     private Drawable mMapIcon;                                                                           </span>
<span  style=""> 141                                                                                                          </span>
<span class="-2893651165769435735" onmouseenter="enter('-2893651165769435735');" onmouseout="out('-2893651165769435735');" style=""> 142     private Drawable mCallIcon;                                                                          </span>
<span  style=""> 143                                                                                                          </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 144     private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                        </span>
<span  style=""> 145                                                                                                          </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 146     private String mMatchOffsets;                                                                        </span>
<span  style=""> 147                                                                                                          </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 148     private int mCurrentCursorPosition;                                                                  </span>
<span  style=""> 149                                                                                                          </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 150     private HistoryBottomSheetDialog mHistoryBottomSheet;                                                </span>
<span  style=""> 151                                                                                                          </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 152     // Hides the history bottom sheet if no revisions are loaded                                         </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 153     private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 155         public void run() {                                                                              </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 156             if (!isAdded()) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 157                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158             }                                                                                            </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 159             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 160                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 161                 public void run() {                                                                      </span>
<span class="-3430635143743134220" onmouseenter="enter('-3430635143743134220');" onmouseout="out('-3430635143743134220');" style=""><abbr title=" 162                     if (((mHistoryBottomSheet.getDialog() != null) &amp;&amp; mHistoryBottomSheet.getDialog().isShowing()) &amp;&amp; (!mHistoryBottomSheet.isHistoryLoaded())) {"> 162                     if (((mHistoryBottomSheet.getDialog() != null) &amp;&amp; mHistoryBottomSheet.getDialog().isSðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 163                         mHistoryBottomSheet.dismiss();                                                   </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 164                         Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show(); </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 167             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 169     };                                                                                                   </span>
<span  style=""> 170                                                                                                          </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 171     private InfoBottomSheetDialog mInfoBottomSheet;                                                      </span>
<span  style=""> 172                                                                                                          </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 173     private ShareBottomSheetDialog mShareBottomSheet;                                                    </span>
<span  style=""> 174                                                                                                          </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 175     // Contextual action bar for dealing with links                                                      </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 176     // Contextual action bar for dealing with links                                                      </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 177     private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                  </span>
<span  style=""> 178                                                                                                          </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 179         // Called when the action mode is created; startActionMode() was called                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 180         @Override                                                                                        </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 181         public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                  </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 182             // Inflate a menu resource providing context menu items                                      </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 183             MenuInflater inflater = mode.getMenuInflater();                                              </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 184             if (inflater != null) {                                                                      </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 185                 inflater.inflate(R.menu.view_link, menu);                                                </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 186                 mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                  </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 187                 mode.setTitle(getString(R.string.link));                                                 </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 188                 mode.setTitleOptionalHint(false);                                                        </span>
<span  style=""> 189                                                                                                          </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 190                 DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191             }                                                                                            </span>
<span  style=""> 192                                                                                                          </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 193             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 193             int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.colðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 194             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 194             requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireAcðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 195             return true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196         }                                                                                                </span>
<span  style=""> 197                                                                                                          </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 198         // Called each time the action mode is shown. Always called after onCreateActionMode, but        </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 199         // may be called multiple times if the mode is invalidated.                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 200         @Override                                                                                        </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 201         public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                 </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 202             return false; // Return false if nothing is done                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203         }                                                                                                </span>
<span  style=""> 204                                                                                                          </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 205         // Called when the user selects a contextual menu item                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206         @Override                                                                                        </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 207         public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                             </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 208             switch (item.getItemId()) {                                                                  </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 209                 case R.id.menu_view_link:                                                                </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 210                     if (mLinkUrl != null) {                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 211                         try {                                                                            </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 212                             Uri uri = Uri.parse(mLinkUrl);                                               </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 213                             Intent i = new Intent(Intent.ACTION_VIEW);                                   </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 214                             i.setData(uri);                                                              </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 215                             startActivity(i);                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 216                         } catch (Exception e) {                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 217                             e.printStackTrace();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218                         }                                                                                </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 219                         mode.finish(); // Action picked, so close the CAB                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 221                     return true;                                                                         </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 222                 case R.id.menu_copy:                                                                     </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 223                     if (mLinkText != null &amp;&amp; getActivity() != null) {                                    </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 224                         copyToClipboard(mLinkText);                                                      </span>
<span class="3326463149460041317" onmouseenter="enter('3326463149460041317');" onmouseout="out('3326463149460041317');" style=""><abbr title=" 225                         Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 225                         Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 226                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 227                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 228                     return true;                                                                         </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 229                 case R.id.menu_share:                                                                    </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 230                     if (mLinkText != null) {                                                             </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 231                         showShareSheet();                                                                </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 232                         mode.finish();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233                     }                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 234                     return true;                                                                         </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 235                 default:                                                                                 </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 236                     return false;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238         }                                                                                                </span>
<span  style=""> 239                                                                                                          </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 240         // Called when the user exits the action mode                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 241         @Override                                                                                        </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 242         public void onDestroyActionMode(ActionMode mode) {                                               </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 243             mActionMode = null;                                                                          </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 244             new Handler().postDelayed(                                                                   </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 245                 new Runnable() {                                                                         </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 246                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 247                     public void run() {                                                                  </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 248                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 248                         requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.RðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249                     }                                                                                    </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 250                 },                                                                                       </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 251                 requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)      </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 252             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 254     };                                                                                                   </span>
<span  style=""> 255                                                                                                          </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 256     private Snackbar mPublishingSnackbar;                                                                </span>
<span  style=""> 257                                                                                                          </span>
<span class="9194238965806529126" onmouseenter="enter('9194238965806529126');" onmouseout="out('9194238965806529126');" style=""> 258     private boolean mIsUndoingPublishing;                                                                </span>
<span  style=""> 259                                                                                                          </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 260     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 261     // Resets note publish status if Simperium never returned the new publish status                     </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 262     private final Runnable mPublishTimeoutRunnable = new Runnable() {                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 263         @Override                                                                                        </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 264         public void run() {                                                                              </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 265             if (!isAdded()) return;                                                                      </span>
<span  style=""> 266                                                                                                          </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 267             requireActivity().runOnUiThread(new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 268                 @Override                                                                                </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 269                 public void run() {                                                                      </span>
<span  style=""> 270                                                                                                          </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 271                     mNote.setPublished(!mNote.isPublished());                                            </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 272                     mNote.save();                                                                        </span>
<span  style=""> 273                                                                                                          </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 274                     updatePublishedState(false);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275                 }                                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 276             });                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 278     };                                                                                                   </span>
<span  style=""> 279                                                                                                          </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 280     private NoteMarkdownFragment mNoteMarkdownFragment;                                                  </span>
<span  style=""> 281                                                                                                          </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 282     private String mCss;                                                                                 </span>
<span  style=""> 283                                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 284     private WebView mMarkdown;                                                                           </span>
<span  style=""> 285                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 286     /**                                                                                                  </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 287      * Mandatory empty constructor for the fragment manager to instantiate the                           </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 288      * fragment (e.g. upon screen orientation changes).                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 289      */                                                                                                  </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 290     public NoteEditorFragment() {                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291     }                                                                                                    </span>
<span  style=""> 292                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 293     @Override                                                                                            </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 294     public void onCreate(Bundle savedInstanceState) {                                                    </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 295         super.onCreate(savedInstanceState);                                                              </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style=""> 296         mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                        </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 297         mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                      </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 298         mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                  </span>
<span  style=""> 299                                                                                                          </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 300         Simplenote currentApp = (Simplenote) requireActivity().getApplication();                         </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 301         mNotesBucket = currentApp.getNotesBucket();                                                      </span>
<span  style=""> 302                                                                                                          </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 303         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 303         mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp,ðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 304         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 304         mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 305         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 305         mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, RðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 306         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 306         mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, RðŸ”µ</abbr></span>
<span  style=""> 307                                                                                                          </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 308         mAutoSaveHandler = new Handler();                                                                </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 309         mPublishTimeoutHandler = new Handler();                                                          </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 310         mHistoryTimeoutHandler = new Handler();                                                          </span>
<span  style=""> 311                                                                                                          </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 312         mMatchHighlighter = new TextHighlighter(requireActivity(),                                       </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""><abbr title=" 313                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);"> 313                 R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor)ðŸ”µ</abbr></span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 314         mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 315             @Override                                                                                    </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 316             public View newView(Context context, Cursor cursor, ViewGroup parent) {                      </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 317                 Activity activity = (Activity) context;                                                  </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 318                 if (activity == null) return null;                                                       </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 319                 return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320             }                                                                                            </span>
<span  style=""> 321                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 322             @Override                                                                                    </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 323             public void bindView(View view, Context context, Cursor cursor) {                            </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 324                 TextView textView = (TextView) view;                                                     </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 325                 textView.setText(convertToString(cursor));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326             }                                                                                            </span>
<span  style=""> 327                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 328             @Override                                                                                    </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 329             public CharSequence convertToString(Cursor cursor) {                                         </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 330                 return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331             }                                                                                            </span>
<span  style=""> 332                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 333             @Override                                                                                    </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 334             public Cursor runQueryOnBackgroundThread(CharSequence filter) {                              </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 335                 Activity activity = getActivity();                                                       </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 336                 if (activity == null) return null;                                                       </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 337                 Simplenote application = (Simplenote) activity.getApplication();                         </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 338                 Query&lt;Tag&gt; query = application.getTagsBucket().query();                                  </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 339                 // make the tag name available to the cursor                                             </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 340                 query.include(Tag.NAME_PROPERTY);                                                        </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 341                 // sort the tags by their names                                                          </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 342                 query.order(Tag.NAME_PROPERTY);                                                          </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 343                 // if there&#x27;s a filter string find only matching tag names                               </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 344                 if (filter != null)                                                                      </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""><abbr title=" 345                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));"> 345                     query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filteðŸ”µ</abbr></span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 346                 return query.execute();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 348         };                                                                                               </span>
<span  style=""> 349                                                                                                          </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 350         WidgetUtils.updateNoteWidgets(getActivity());                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351     }                                                                                                    </span>
<span  style=""> 352                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353     @Override                                                                                            </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""><abbr title=" 354     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {"> 354     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceSðŸ”µ</abbr></span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 355         mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                   </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 356         mContentEditText = mRootView.findViewById(R.id.note_content);                                    </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 357         mContentEditText.addOnSelectionChangedListener(this);                                            </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 358         mContentEditText.setOnCheckboxToggledListener(this);                                             </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 359         mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                      </span>
<span class="8247847837270423645" onmouseenter="enter('8247847837270423645');" onmouseout="out('8247847837270423645');" style=""> 360         mTagView = mRootView.findViewById(R.id.tag_view);                                                </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 361         mTagView.setTokenizer(new SpaceTokenizer());                                                     </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 362         mTagView.setOnFocusChangeListener(this);                                                         </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 363         mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                  </span>
<span  style=""> 364                                                                                                          </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 365         mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                     </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 366         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                       </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 367             mPlaceholderView.setVisibility(View.VISIBLE);                                                </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 368             requireActivity().invalidateOptionsMenu();                                                   </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 369             mMarkdown = mRootView.findViewById(R.id.markdown);                                           </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 370             mCss = ThemeUtils.isLightTheme(requireContext())                                             </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 371                     ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                            </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 372                     : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373         }                                                                                                </span>
<span  style=""> 374                                                                                                          </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 375         mTagView.setAdapter(mAutocompleteAdapter);                                                       </span>
<span  style=""> 376                                                                                                          </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 377         Bundle arguments = getArguments();                                                               </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 378         if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                   </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 379             // Load note if we were passed a note Id                                                     </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 380             String key = arguments.getString(ARG_ITEM_ID);                                               </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 381             if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                              </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 382                 mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383             }                                                                                            </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 384             new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);               </span>
<span class="-1032230432854321396" onmouseenter="enter('-1032230432854321396');" onmouseout="out('-1032230432854321396');" style=""> 385         } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null ) {  </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 386             // Restore selected note when in dual pane mode                                              </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 387             String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                 </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 388             if (noteId != null) {                                                                        </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 389                 setNote(noteId);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391         }                                                                                                </span>
<span  style=""> 392                                                                                                          </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 393         ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                      </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 394         viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395             @Override                                                                                    </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 396             public void onGlobalLayout() {                                                               </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 397                 // If a note was loaded with search matches, scroll to the first match in the editor     </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 398                 if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 399                     if (!isAdded()) {                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 400                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                     }                                                                                    </span>
<span  style=""> 402                                                                                                          </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 403                     // Get the character location of the first search match                              </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 404                     int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                    </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 405                             mContentEditText.getText(),                                                  </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 406                             mMatchOffsets                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 407                     );                                                                                   </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 408                     if (matchLocation == 0) {                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 409                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410                     }                                                                                    </span>
<span  style=""> 411                                                                                                          </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 412                     // Calculate how far to scroll to bring the match into view                          </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 413                     Layout layout = mContentEditText.getLayout();                                        </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 414                     int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));             </span>
<span  style=""> 415                                                                                                          </span>
<span class="5020302440416452113" onmouseenter="enter('5020302440416452113');" onmouseout="out('5020302440416452113');" style=""> 416                     // We use different scroll views in the root of the layout files... yuck.            </span>
<span class="-2313309201646667285" onmouseenter="enter('-2313309201646667285');" onmouseout="out('-2313309201646667285');" style=""> 417                     // So we have to cast appropriately to do a smooth scroll                            </span>
<span class="4785183779479911307" onmouseenter="enter('4785183779479911307');" onmouseout="out('4785183779479911307');" style=""> 418                     if (mRootView instanceof NestedScrollView) {                                         </span>
<span class="-2957331341634255052" onmouseenter="enter('-2957331341634255052');" onmouseout="out('-2957331341634255052');" style=""> 419                         ((NestedScrollView)mRootView).smoothScrollTo(0, lineTop);                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 420                     } else {                                                                             </span>
<span class="-2547502694507835703" onmouseenter="enter('-2547502694507835703');" onmouseout="out('-2547502694507835703');" style=""> 421                         ((ScrollView)mRootView).smoothScrollTo(0, lineTop);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                     }                                                                                    </span>
<span  style=""> 423                                                                                                          </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 424                     mShouldScrollToSearchMatch = false;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426             }                                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 427         });                                                                                              </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 428         setHasOptionsMenu(true);                                                                         </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 429         return mRootView;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430     }                                                                                                    </span>
<span  style=""> 431                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 432     @Override                                                                                            </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 433     public void onResume() {                                                                             </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 434         super.onResume();                                                                                </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 435         mNotesBucket.start();                                                                            </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 436         mNotesBucket.addListener(this);                                                                  </span>
<span  style=""> 437                                                                                                          </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 438         mTagView.setOnTagAddedListener(this);                                                            </span>
<span  style=""> 439                                                                                                          </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 440         if (mContentEditText != null) {                                                                  </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""><abbr title=" 441             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));"> 441             mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity())ðŸ”µ</abbr></span>
<span  style=""> 442                                                                                                          </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 443             if (mContentEditText.hasFocus()) {                                                           </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 444                 showSoftKeyboard();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447     }                                                                                                    </span>
<span  style=""> 448                                                                                                          </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 449     private void showSoftKeyboard() {                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 450         new Handler().postDelayed(new Runnable() {                                                       </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451             @Override                                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 452             public void run() {                                                                          </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 453                 if (getActivity() == null) {                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 454                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 455                 }                                                                                        </span>
<span  style=""> 456                                                                                                          </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 457                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 457                 InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemServiðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 458                 if (inputMethodManager != null) {                                                        </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 459                     inputMethodManager.showSoftInput(mContentEditText, 0);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461             }                                                                                            </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 462         }, 100);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465     @Override                                                                                            </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 466     public void onPause() {                                                                              </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 467         super.onPause();  // Always call the superclass method first                                     </span>
<span  style=""> 468                                                                                                          </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 469         mNotesBucket.removeListener(this);                                                               </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 470         mNotesBucket.stop();                                                                             </span>
<span  style=""> 471                                                                                                          </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 472         // Hide soft keyboard if it is showing...                                                        </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 473         DisplayUtils.hideKeyboard(mContentEditText);                                                     </span>
<span  style=""> 474                                                                                                          </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 475         mTagView.setOnTagAddedListener(null);                                                            </span>
<span  style=""> 476                                                                                                          </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 477         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 478             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479         }                                                                                                </span>
<span  style=""> 480                                                                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 481         if (mPublishTimeoutHandler != null) {                                                            </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 482             mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483         }                                                                                                </span>
<span  style=""> 484                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 485         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 486             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487         }                                                                                                </span>
<span  style=""> 488                                                                                                          </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 489         mHighlighter.stop();                                                                             </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 490         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491     }                                                                                                    </span>
<span  style=""> 492                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 493     @Override                                                                                            </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 494     public void onSaveInstanceState(@NonNull Bundle outState) {                                          </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 495         super.onSaveInstanceState(outState);                                                             </span>
<span  style=""> 496                                                                                                          </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 497         if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                       </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 498             outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500     }                                                                                                    </span>
<span  style=""> 501                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 502     @Override                                                                                            </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 503     public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 504         super.onCreateOptionsMenu(menu, inflater);                                                       </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""><abbr title=" 505         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {"> 505         if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 506             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507         }                                                                                                </span>
<span  style=""> 508                                                                                                          </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 509         inflater.inflate(R.menu.note_editor, menu);                                                      </span>
<span  style=""> 510                                                                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 511         if (mNote != null) {                                                                             </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 512             MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                         </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 513             viewPublishedNoteItem.setVisible(true);                                                      </span>
<span  style=""> 514                                                                                                          </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 515             MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);            </span>
<span  style=""> 516                                                                                                          </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 517             if (mNote.isDeleted()) {                                                                     </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 518                 trashItem.setTitle(R.string.undelete);                                                   </span>
<span class="-7281764457900946953" onmouseenter="enter('-7281764457900946953');" onmouseout="out('-7281764457900946953');" style=""> 519                 trashItem.setIcon(R.drawable.ic_trash_restore_24dp);                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 520             } else {                                                                                     </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 521                 trashItem.setTitle(R.string.delete);                                                     </span>
<span class="-276308356326274253" onmouseenter="enter('-276308356326274253');" onmouseout="out('-276308356326274253');" style=""> 522                 trashItem.setIcon(R.drawable.ic_trash_24dp);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524         }                                                                                                </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 525         DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526     }                                                                                                    </span>
<span  style=""> 527                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 528     @Override                                                                                            </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 529     public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                       </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 530         switch (item.getItemId()) {                                                                      </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 531             case R.id.menu_view_info:                                                                    </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 532                 showInfo();                                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 533                 return true;                                                                             </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 534             case R.id.menu_checklist:                                                                    </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 535                 insertChecklist();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 536                 return true;                                                                             </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 537             case R.id.menu_history:                                                                      </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 538                 showHistory();                                                                           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 539                 return true;                                                                             </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 540             case R.id.menu_share:                                                                        </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 541                 shareNote();                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 542                 return true;                                                                             </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 543             case R.id.menu_delete:                                                                       </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 544                 if (!isAdded()) return false;                                                            </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 545                 deleteNote();                                                                            </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 546                 return true;                                                                             </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 547             case android.R.id.home:                                                                      </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 548                 if (!isAdded()) return false;                                                            </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 549                 requireActivity().finish();                                                              </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 550                 return true;                                                                             </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 551             default:                                                                                     </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 552                 return super.onOptionsItemSelected(item);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 553         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554     }                                                                                                    </span>
<span  style=""> 555                                                                                                          </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style=""> 556     private void insertChecklist() {                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 557         try {                                                                                            </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 558             mContentEditText.insertChecklist();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 559         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 560             e.printStackTrace();                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 561             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562         }                                                                                                </span>
<span  style=""> 563                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 564         AnalyticsTracker.track(                                                                          </span>
<span class="3978226561215059527" onmouseenter="enter('3978226561215059527');" onmouseout="out('3978226561215059527');" style=""> 565                 AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED,                                         </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 566                 AnalyticsTracker.CATEGORY_NOTE,                                                          </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 567                 &quot;toolbar_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 568         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569     }                                                                                                    </span>
<span  style=""> 570                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 571     @Override                                                                                            </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 572     public void onCheckboxToggled() {                                                                    </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 573         // Save note (using delay) after toggling a checkbox                                             </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 574         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 575             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 576             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578     }                                                                                                    </span>
<span  style=""> 579                                                                                                          </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 580     private void deleteNote() {                                                                          </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 581         NoteUtils.deleteNote(mNote, getActivity());                                                      </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 582         requireActivity().finish();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583     }                                                                                                    </span>
<span  style=""> 584                                                                                                          </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 585     protected void clearMarkdown() {                                                                     </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 586         mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 587     }                                                                                                    </span>
<span  style=""> 588                                                                                                          </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 589     protected void hideMarkdown() {                                                                      </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 590         mMarkdown.setVisibility(View.INVISIBLE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591     }                                                                                                    </span>
<span  style=""> 592                                                                                                          </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 593     protected void showMarkdown() {                                                                      </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 594         loadMarkdownData();                                                                              </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 595         mMarkdown.setVisibility(View.VISIBLE);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596     }                                                                                                    </span>
<span  style=""> 597                                                                                                          </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 598     private void shareNote() {                                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 599         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 600             mContentEditText.clearFocus();                                                               </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 601             showShareSheet();                                                                            </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 602             AnalyticsTracker.track(                                                                      </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 603                     AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                    </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 604                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 605                     &quot;action_bar_share_button&quot;                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 606             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 607         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 608     }                                                                                                    </span>
<span  style=""> 609                                                                                                          </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 610     private void showHistory() {                                                                         </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 611         if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                   </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 612             mContentEditText.clearFocus();                                                               </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 613             mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 614             showHistorySheet();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 615         } else {                                                                                         </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 616             Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618     }                                                                                                    </span>
<span  style=""> 619                                                                                                          </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 620     private void showInfo() {                                                                            </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 621         if (mNote != null) {                                                                             </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 622             mContentEditText.clearFocus();                                                               </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 623             saveNote();                                                                                  </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 624             showInfoSheet();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626     }                                                                                                    </span>
<span  style=""> 627                                                                                                          </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 628     protected void setMarkdownEnabled(boolean enabled) {                                                 </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 629         mIsMarkdownEnabled = enabled;                                                                    </span>
<span  style=""> 630                                                                                                          </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 631         if (mIsMarkdownEnabled) {                                                                        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 632             loadMarkdownData();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 634     }                                                                                                    </span>
<span  style=""> 635                                                                                                          </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 636     private void loadMarkdownData() {                                                                    </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 637         String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                      </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 638                 mCss,                                                                                    </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 639                 mContentEditText.getPlainTextContent()                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 640         );                                                                                               </span>
<span  style=""> 641                                                                                                          </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 642         mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643     }                                                                                                    </span>
<span  style=""> 644                                                                                                          </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 645     public void setNote(String noteID, String matchOffsets) {                                            </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 646         if (mAutoSaveHandler != null)                                                                    </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 647             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span  style=""> 648                                                                                                          </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 649         mPlaceholderView.setVisibility(View.GONE);                                                       </span>
<span  style=""> 650                                                                                                          </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 651         if (matchOffsets != null) {                                                                      </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 652             mMatchOffsets = matchOffsets;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 653         } else {                                                                                         </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 654             mMatchOffsets = null;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655         }                                                                                                </span>
<span  style=""> 656                                                                                                          </span>
<span  style=""> 657                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 658         saveNote();                                                                                      </span>
<span  style=""> 659                                                                                                          </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 660         new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661     }                                                                                                    </span>
<span  style=""> 662                                                                                                          </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 663     private void updateNote(Note updatedNote) {                                                          </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 664         // update note if network change arrived                                                         </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 665         mNote = updatedNote;                                                                             </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 666         refreshContent(true);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 667     }                                                                                                    </span>
<span  style=""> 668                                                                                                          </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 669     private void refreshContent(boolean isNoteUpdate) {                                                  </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 670         if (mNote != null) {                                                                             </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 671             // Restore the cursor position if possible.                                                  </span>
<span  style=""> 672                                                                                                          </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 673             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 673             int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEdðŸ”µ</abbr></span>
<span  style=""> 674                                                                                                          </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 675             mContentEditText.setText(mNote.getContent());                                                </span>
<span  style=""> 676                                                                                                          </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 677             if (isNoteUpdate) {                                                                          </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 678                 // Save the note so any local changes get synced                                         </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 679                 mNote.save();                                                                            </span>
<span  style=""> 680                                                                                                          </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 681                 if (mContentEditText.hasFocus()                                                          </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 682                         &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                          </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 683                         &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                       </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 684                     mContentEditText.setSelection(cursorPosition);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 685                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686             }                                                                                            </span>
<span  style=""> 687                                                                                                          </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 688             afterTextChanged(mContentEditText.getText());                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 689             mContentEditText.processChecklists();                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 690             updateTagList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692     }                                                                                                    </span>
<span  style=""> 693                                                                                                          </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 694     private void updateTagList() {                                                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 695         Activity activity = getActivity();                                                               </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 696         if (activity == null) return;                                                                    </span>
<span  style=""> 697                                                                                                          </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 698         // Populate this note&#x27;s tags in the tagView                                                      </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 699         mTagView.setChips(mNote.getTagString());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700     }                                                                                                    </span>
<span  style=""> 701                                                                                                          </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 702     private int newCursorLocation(String newText, String oldText, int cursorLocation) {                  </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 703         // Ported from the iOS app :)                                                                    </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 704         // Cases:                                                                                        </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 705         // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 706         // 1. Text was added after the cursor ==&gt; no change                                              </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 707         // 2. Text was added before the cursor ==&gt; location advances                                     </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 708         // 3. Text was removed after the cursor ==&gt; no change                                            </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 709         // 4. Text was removed before the cursor ==&gt; location retreats                                   </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 710         // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                         </span>
<span  style=""> 711                                                                                                          </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 712         cursorLocation = Math.max(cursorLocation, 0);                                                    </span>
<span  style=""> 713                                                                                                          </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 714         int newCursorLocation = cursorLocation;                                                          </span>
<span  style=""> 715                                                                                                          </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 716         int deltaLength = newText.length() - oldText.length();                                           </span>
<span  style=""> 717                                                                                                          </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 718         // Case 0                                                                                        </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 719         if (newText.length() &lt; cursorLocation)                                                           </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 720             return newText.length();                                                                     </span>
<span  style=""> 721                                                                                                          </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 722         boolean beforeCursorMatches = false;                                                             </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 723         boolean afterCursorMatches = false;                                                              </span>
<span  style=""> 724                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 725         try {                                                                                            </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 726             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 726             beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 727             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 727             afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocatioðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 728         } catch (Exception e) {                                                                          </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 729             e.printStackTrace();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730         }                                                                                                </span>
<span  style=""> 731                                                                                                          </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 732         // Cases 2 and 4                                                                                 </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 733         if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                  </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 734             newCursorLocation += deltaLength;                                                            </span>
<span  style=""> 735                                                                                                          </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 736         // Cases 1, 3 and 5 have no change                                                               </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 737         return newCursorLocation;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 738     }                                                                                                    </span>
<span  style=""> 739                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 740     @Override                                                                                            </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 741     public void onTagsChanged(String tagString) {                                                        </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 742         if (mNote == null || !isAdded()) return;                                                         </span>
<span  style=""> 743                                                                                                          </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 744         if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {        </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 745             AnalyticsTracker.track(                                                                      </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 746                     AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                              </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 747                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 748                     &quot;tag_added_to_note&quot;                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 749             );                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 750         } else {                                                                                         </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 751             AnalyticsTracker.track(                                                                      </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 752                     AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                            </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 753                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 754                     &quot;tag_removed_from_note&quot;                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 755             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 756         }                                                                                                </span>
<span  style=""> 757                                                                                                          </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 758         mNote.setTagString(tagString);                                                                   </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 759         mNote.setModificationDate(Calendar.getInstance());                                               </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 760         updateTagList();                                                                                 </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 761         mNote.save();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762     }                                                                                                    </span>
<span  style=""> 763                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 764     @Override                                                                                            </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 765     public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                    </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 766         // Unused                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767     }                                                                                                    </span>
<span  style=""> 768                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 769     @Override                                                                                            </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 770     public void afterTextChanged(Editable editable) {                                                    </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 771         attemptAutoList(editable);                                                                       </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 772         setTitleSpan(editable);                                                                          </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 773         mContentEditText.fixLineSpacing();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774     }                                                                                                    </span>
<span  style=""> 775                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 776     @Override                                                                                            </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 777     public void onTextChanged(CharSequence charSequence, int start, int before, int count) {             </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 778         // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes              </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 779         if (mAutoSaveHandler != null) {                                                                  </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 780             mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                         </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 781             mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782         }                                                                                                </span>
<span  style=""> 783                                                                                                          </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 784         // Remove search highlight spans when note content changes                                       </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 785         if (mMatchOffsets != null) {                                                                     </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 786             mMatchOffsets = null;                                                                        </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 787             mHighlighter.removeMatches();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788         }                                                                                                </span>
<span  style=""> 789                                                                                                          </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 790         // Temporarily remove the text watcher as we process checklists to prevent callback looping      </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 791         mContentEditText.removeTextChangedListener(this);                                                </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 792         mContentEditText.processChecklists();                                                            </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 793         mContentEditText.addTextChangedListener(this);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794     }                                                                                                    </span>
<span  style=""> 795                                                                                                          </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 796     private void setTitleSpan(Editable editable) {                                                       </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 797         // Set the note title to be a larger size                                                        </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 798         // Remove any existing size spans                                                                </span>
<span class="-3345432347418186953" onmouseenter="enter('-3345432347418186953');" onmouseout="out('-3345432347418186953');" style=""> 799         RelativeSizeSpan[] spans = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);      </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 800         for (RelativeSizeSpan span : spans) {                                                            </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 801             editable.removeSpan(span);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802         }                                                                                                </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 803         int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                      </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 804         if (newLinePosition == 0)                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 805             return;                                                                                      </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 806         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 806         editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editaðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807     }                                                                                                    </span>
<span  style=""> 808                                                                                                          </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 809     private void attemptAutoList(Editable editable) {                                                    </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 810         int oldCursorPosition = mCurrentCursorPosition;                                                  </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 811         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 812         AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 813         mCurrentCursorPosition = mContentEditText.getSelectionStart();                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814     }                                                                                                    </span>
<span  style=""> 815                                                                                                          </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 816     private void saveAndSyncNote() {                                                                     </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 817         if (mNote == null) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 818             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819         }                                                                                                </span>
<span  style=""> 820                                                                                                          </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 821         new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 822     }                                                                                                    </span>
<span  style=""> 823                                                                                                          </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 824     public void setPlaceholderVisible(boolean isVisible) {                                               </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 825         if (isVisible) {                                                                                 </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 826             mNote = null;                                                                                </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 827             mContentEditText.setText(&quot;&quot;);                                                                </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 828             mTagView.setText(&quot;&quot;);                                                                        </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 829             if (mPlaceholderView != null)                                                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 830                 mPlaceholderView.setVisibility(View.VISIBLE);                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 831         } else {                                                                                         </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 832             if (mPlaceholderView != null)                                                                </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 833                 mPlaceholderView.setVisibility(View.GONE);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 834         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 835     }                                                                                                    </span>
<span  style=""> 836                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 837     @Override                                                                                            </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 838     public void onFocusChange(View v, boolean hasFocus) {                                                </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 839         if (!hasFocus) {                                                                                 </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 840             String tagString = getNoteTagsString().trim();                                               </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 841             if (tagString.length() &gt; 0) {                                                                </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 842                 mTagView.setChips(tagString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 843             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 845     }                                                                                                    </span>
<span  style=""> 846                                                                                                          </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 847     private Note getNote() {                                                                             </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 848         return mNote;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 849     }                                                                                                    </span>
<span  style=""> 850                                                                                                          </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 851     public void setNote(String noteID) {                                                                 </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 852         setNote(noteID, null);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853     }                                                                                                    </span>
<span  style=""> 854                                                                                                          </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 855     private String getNoteContentString() {                                                              </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 856         if (mContentEditText == null || mContentEditText.getText() == null) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 857             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 858         } else {                                                                                         </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 859             return mContentEditText.getText().toString();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 860         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 861     }                                                                                                    </span>
<span  style=""> 862                                                                                                          </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 863     private String getNoteTagsString() {                                                                 </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 864         if (mTagView == null || mTagView.getText() == null) {                                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 865             return &quot;&quot;;                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 866         } else {                                                                                         </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 867             return mTagView.getText().toString();                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 869     }                                                                                                    </span>
<span  style=""> 870                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 871     /**                                                                                                  </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style=""> 872      * Share bottom sheet callbacks                                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 873      */                                                                                                  </span>
<span  style=""> 874                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 875     @Override                                                                                            </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 876     public void onSharePublishClicked() {                                                                </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 877         publishNote();                                                                                   </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 878         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 879             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 881     }                                                                                                    </span>
<span  style=""> 882                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 883     @Override                                                                                            </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 884     public void onShareUnpublishClicked() {                                                              </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 885         unpublishNote();                                                                                 </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 886         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 887             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 888         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 889     }                                                                                                    </span>
<span  style=""> 890                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 891     @Override                                                                                            </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style=""> 892     public void onWordPressPostClicked() {                                                               </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 893         if (mShareBottomSheet != null) {                                                                 </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 894             mShareBottomSheet.dismiss();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895         }                                                                                                </span>
<span  style=""> 896                                                                                                          </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style=""> 897         if (getFragmentManager() == null) {                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 898             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 899         }                                                                                                </span>
<span  style=""> 900                                                                                                          </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style=""> 901         FragmentTransaction ft = getFragmentManager().beginTransaction();                                </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style=""> 902         Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);      </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style=""> 903         if (prev != null) {                                                                              </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style=""> 904             ft.remove(prev);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905         }                                                                                                </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style=""> 906         ft.addToBackStack(null);                                                                         </span>
<span  style=""> 907                                                                                                          </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style=""> 908         // Create and show the dialog.                                                                   </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style=""> 909         WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                        </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style=""> 910         wpDialogFragment.setNote(mNote);                                                                 </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style=""> 911         wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 912     }                                                                                                    </span>
<span  style=""> 913                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 914     @Override                                                                                            </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 915     public void onShareCollaborateClicked() {                                                            </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 916         Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917     }                                                                                                    </span>
<span  style=""> 918                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 919     @Override                                                                                            </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 920     public void onShareDismissed() {                                                                     </span>
<span  style=""> 921                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 922     }                                                                                                    </span>
<span  style=""> 923                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 924     /**                                                                                                  </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style=""> 925      * History bottom sheet listeners                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 926      */                                                                                                  </span>
<span  style=""> 927                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 928     @Override                                                                                            </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 929     public void onHistoryCancelClicked() {                                                               </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 930         mContentEditText.setText(mNote.getContent());                                                    </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 931         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 932             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 933         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 934     }                                                                                                    </span>
<span  style=""> 935                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 936     @Override                                                                                            </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 937     public void onHistoryRestoreClicked() {                                                              </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 938         if (mHistoryBottomSheet != null) {                                                               </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 939             mHistoryBottomSheet.dismiss();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 940         }                                                                                                </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 941         saveAndSyncNote();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 942     }                                                                                                    </span>
<span  style=""> 943                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 944     @Override                                                                                            </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 945     public void onHistoryDismissed() {                                                                   </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 946         if (!mHistoryBottomSheet.didTapOnButton()) {                                                     </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 947             mContentEditText.setText(mNote.getContent());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948         }                                                                                                </span>
<span  style=""> 949                                                                                                          </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 950         if (mHistoryTimeoutHandler != null) {                                                            </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 951             mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 953     }                                                                                                    </span>
<span  style=""> 954                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 955     @Override                                                                                            </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 956     public void onHistoryUpdateNote(String content) {                                                    </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 957         mContentEditText.setText(content);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 958     }                                                                                                    </span>
<span  style=""> 959                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 960     /**                                                                                                  </span>
<span class="278795310073326946" onmouseenter="enter('278795310073326946');" onmouseout="out('278795310073326946');" style=""> 961      * Info bottom sheet listeners                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 962      */                                                                                                  </span>
<span  style=""> 963                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 964     @Override                                                                                            </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 965     public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                           </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 966         NoteUtils.setNotePin(mNote, isSwitchedOn);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 967     }                                                                                                    </span>
<span  style=""> 968                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 969     @Override                                                                                            </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 970     public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                      </span>
<span class="2498037679736242197" onmouseenter="enter('2498037679736242197');" onmouseout="out('2498037679736242197');" style=""> 971         mIsMarkdownEnabled = isSwitchedOn;                                                               </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 972         Activity activity = getActivity();                                                               </span>
<span  style=""> 973                                                                                                          </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 974         if (activity instanceof NoteEditorActivity) {                                                    </span>
<span  style=""> 975                                                                                                          </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 976             NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                           </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 977             if (mIsMarkdownEnabled) {                                                                    </span>
<span  style=""> 978                                                                                                          </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 979                 editorActivity.showTabs();                                                               </span>
<span  style=""> 980                                                                                                          </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 981                 if (mNoteMarkdownFragment == null) {                                                     </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 982                     // Get markdown fragment and update content                                          </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 983                     mNoteMarkdownFragment =                                                              </span>
<span class="5596511960413116475" onmouseenter="enter('5596511960413116475');" onmouseout="out('5596511960413116475');" style=""> 984                             editorActivity.getNoteMarkdownFragment();                                    </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 985                     mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 986                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 987             } else {                                                                                     </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 988                 editorActivity.hideTabs();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 989             }                                                                                            </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 990         } else if (activity instanceof NotesActivity) {                                                  </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 991             setMarkdownEnabled(mIsMarkdownEnabled);                                                      </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 992             ((NotesActivity) getActivity()).setMarkdownShowing(false);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 993         }                                                                                                </span>
<span  style=""> 994                                                                                                          </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 995         saveNote();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 996     }                                                                                                    </span>
<span  style=""> 997                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 998     @Override                                                                                            </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 999     public void onInfoCopyLinkClicked() {                                                                </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1000         copyToClipboard(mNote.getPublishedUrl());                                                        </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style="">1001         Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1002     }                                                                                                    </span>
<span  style="">1003                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1004     @Override                                                                                            </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style="">1005     public void onInfoShareLinkClicked() {                                                               </span>
<span class="-7399939689867674649" onmouseenter="enter('-7399939689867674649');" onmouseout="out('-7399939689867674649');" style="">1006         if (mInfoBottomSheet != null) {                                                                  </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style="">1007             mInfoBottomSheet.dismiss();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1008         }                                                                                                </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style="">1009         showShareSheet();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1010     }                                                                                                    </span>
<span  style="">1011                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1012     @Override                                                                                            </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style="">1013     public void onInfoDismissed() {                                                                      </span>
<span  style="">1014                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1015     }                                                                                                    </span>
<span  style="">1016                                                                                                          </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style="">1017     protected void saveNote() {                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1018         try {                                                                                            </span>
<span class="5745978767607965306" onmouseenter="enter('5745978767607965306');" onmouseout="out('5745978767607965306');" style="">1019             Simplenote application = ((Simplenote) (requireActivity().getApplication()));                </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1020             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="1614046200152628925" onmouseenter="enter('1614046200152628925');" onmouseout="out('1614046200152628925');" style="">1021             mNote = notesBucket.get(mNote.getSimperiumKey());                                            </span>
<span class="8094426069612110664" onmouseenter="enter('8094426069612110664');" onmouseout="out('8094426069612110664');" style=""><abbr title="1022             if ((((mNote == null) || (mContentEditText == null)) || mIsLoadingNote) || (((mHistoryBottomSheet != null) &amp;&amp; (mHistoryBottomSheet.getDialog() != null)) &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {">1022             if ((((mNote == null) || (mContentEditText == null)) || mIsLoadingNote) || (((mHistoryBottomSðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1023                 return;                                                                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1024             } else {                                                                                     </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="">1025                 mIsPreviewEnabled = mNote.isPreviewEnabled();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1026             }                                                                                            </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="">1027             String content = mContentEditText.getPlainTextContent();                                     </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="">1028             String tagString = getNoteTagsString();                                                      </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title="1029             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1029             if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPrevðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="">1030                 mNote.setContent(content);                                                               </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="">1031                 mNote.setTagString(tagString);                                                           </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="">1032                 mNote.setModificationDate(Calendar.getInstance());                                       </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="">1033                 mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                            </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="">1034                 mNote.setPreviewEnabled(mIsPreviewEnabled);                                              </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1035                 mNote.save();                                                                            </span>
<span class="274845630814137148" onmouseenter="enter('274845630814137148');" onmouseout="out('274845630814137148');" style=""><abbr title="1036                 AnalyticsTracker.track(AnalyticsTracker.Stat.EDITOR_NOTE_EDITED, AnalyticsTracker.CATEGORY_NOTE, &quot;editor_save&quot;);">1036                 AnalyticsTracker.track(AnalyticsTracker.Stat.EDITOR_NOTE_EDITED, AnalyticsTracker.CATEGORðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1037             }                                                                                            </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="">1038         } catch (BucketObjectMissingException exception) {                                               </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="">1039             exception.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1040         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1041     }                                                                                                    </span>
<span  style="">1042                                                                                                          </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1043     // Checks if cursor is at a URL when the selection changes                                           </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1044     // If it is a URL, show the contextual action bar                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1045     @Override                                                                                            </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1046     public void onSelectionChanged(int selStart, int selEnd) {                                           </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1047         mCurrentCursorPosition = selEnd;                                                                 </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1048         if (selStart == selEnd) {                                                                        </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1049             Editable noteContent = mContentEditText.getText();                                           </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1050             if (noteContent == null)                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1051                 return;                                                                                  </span>
<span  style="">1052                                                                                                          </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1053             URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1054             if (urlSpans.length &gt; 0) {                                                                   </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1055                 URLSpan urlSpan = urlSpans[0];                                                           </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1056                 mLinkUrl = urlSpan.getURL();                                                             </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1057                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1057                 mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpaðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1058                 if (mActionMode != null) {                                                               </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1059                     mActionMode.setSubtitle(mLinkText);                                                  </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1060                     setLinkMenuItem();                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1061                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                 }                                                                                        </span>
<span  style="">1063                                                                                                          </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1064                 // Show the Contextual Action Bar                                                        </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1065                 if (getActivity() != null) {                                                             </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style=""><abbr title="1066                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);">1066                     mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1067                     if (mActionMode != null) {                                                           </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1068                         mActionMode.setSubtitle(mLinkText);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1069                     }                                                                                    </span>
<span  style="">1070                                                                                                          </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1071                     setLinkMenuItem();                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1072                 }                                                                                        </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1073             } else if (mActionMode != null) {                                                            </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1074                 mActionMode.finish();                                                                    </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1075                 mActionMode = null;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1076             }                                                                                            </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1077         } else if (mActionMode != null) {                                                                </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1078             mActionMode.finish();                                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1079             mActionMode = null;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1080         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081     }                                                                                                    </span>
<span  style="">1082                                                                                                          </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1083     private void setLinkMenuItem() {                                                                     </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1084         if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                             </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1085             if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                           </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1086                 mViewLinkMenuItem.setIcon(mCallIcon);                                                    </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1087                 mViewLinkMenuItem.setTitle(getString(R.string.call));                                    </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1088             } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                 </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1089                 mViewLinkMenuItem.setIcon(mEmailIcon);                                                   </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1090                 mViewLinkMenuItem.setTitle(getString(R.string.email));                                   </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1091             } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                    </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1092                 mViewLinkMenuItem.setIcon(mMapIcon);                                                     </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1093                 mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1094             } else {                                                                                     </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1095                 mViewLinkMenuItem.setIcon(mWebIcon);                                                     </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1096                 mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1097             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1098         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1099     }                                                                                                    </span>
<span  style="">1100                                                                                                          </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1101     private void setPublishedNote(boolean isPublished) {                                                 </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1102         if (mNote != null) {                                                                             </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1103             mNote.setPublished(isPublished);                                                             </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1104             mNote.save();                                                                                </span>
<span  style="">1105                                                                                                          </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1106             // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                   </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1107             mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                </span>
<span  style="">1108                                                                                                          </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1109             AnalyticsTracker.track(                                                                      </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1110                     (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                        </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1111                             AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                               </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1112                     AnalyticsTracker.CATEGORY_NOTE,                                                      </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1113                     &quot;publish_note_button&quot;                                                                </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1114             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1115         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1116     }                                                                                                    </span>
<span  style="">1117                                                                                                          </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1118     private void updatePublishedState(boolean isSuccess) {                                               </span>
<span  style="">1119                                                                                                          </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1120         if (mPublishingSnackbar == null) {                                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1121             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1122         }                                                                                                </span>
<span  style="">1123                                                                                                          </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1124         mPublishingSnackbar.dismiss();                                                                   </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1125         mPublishingSnackbar = null;                                                                      </span>
<span  style="">1126                                                                                                          </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1127         if (isSuccess &amp;&amp; isAdded()) {                                                                    </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1128             if (mNote.isPublished()) {                                                                   </span>
<span  style="">1129                                                                                                          </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1130                 if (mIsUndoingPublishing) {                                                              </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1131                     SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,           </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1132                             R.color.status_positive,                                                     </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1133                             Snackbar.LENGTH_LONG);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1134                 } else {                                                                                 </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1135                     SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,           </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1136                             R.color.status_positive,                                                     </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1137                             Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1138                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1139                                 public void onClick(View v) {                                            </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1140                                     mIsUndoingPublishing = true;                                         </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1141                                     unpublishNote();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1142                                 }                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1143                             });                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1144                 }                                                                                        </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1145                 copyToClipboard(mNote.getPublishedUrl());                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1146             } else {                                                                                     </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1147                 if (mIsUndoingPublishing) {                                                              </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1148                     SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,         </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1149                             R.color.status_negative,                                                     </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1150                             Snackbar.LENGTH_LONG);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1151                 } else {                                                                                 </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1152                     SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,         </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1153                             R.color.status_negative,                                                     </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1154                             Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {            </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1155                                 @Override                                                                </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1156                                 public void onClick(View v) {                                            </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1157                                     mIsUndoingPublishing = true;                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1158                                     publishNote();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1159                                 }                                                                        </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1160                             });                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1162             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1163         } else {                                                                                         </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1164             if (mNote.isPublished()) {                                                                   </span>
<span class="-6121697006332454273" onmouseenter="enter('-6121697006332454273');" onmouseout="out('-6121697006332454273');" style="">1165                 SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_error,                  </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1166                         R.color.status_negative, Snackbar.LENGTH_LONG);                                  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1167             } else {                                                                                     </span>
<span class="-4531979614724167785" onmouseenter="enter('-4531979614724167785');" onmouseout="out('-4531979614724167785');" style="">1168                 SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_error,                    </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1169                         R.color.status_negative, Snackbar.LENGTH_LONG);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1170             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171         }                                                                                                </span>
<span  style="">1172                                                                                                          </span>
<span class="265789452469033686" onmouseenter="enter('265789452469033686');" onmouseout="out('265789452469033686');" style="">1173         mIsUndoingPublishing = false;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174     }                                                                                                    </span>
<span  style="">1175                                                                                                          </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1176     private void publishNote() {                                                                         </span>
<span  style="">1177                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1178         if (isAdded()) {                                                                                 </span>
<span class="4291898079933948381" onmouseenter="enter('4291898079933948381');" onmouseout="out('4291898079933948381');" style="">1179             mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.publishing,     </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1180                     R.color.blue, Snackbar.LENGTH_INDEFINITE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1181         }                                                                                                </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1182         setPublishedNote(true);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183     }                                                                                                    </span>
<span  style="">1184                                                                                                          </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1185     private void unpublishNote() {                                                                       </span>
<span  style="">1186                                                                                                          </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1187         if (isAdded()) {                                                                                 </span>
<span class="-6747781156546415836" onmouseenter="enter('-6747781156546415836');" onmouseout="out('-6747781156546415836');" style="">1188             mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublishing,   </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1189                     R.color.blue, Snackbar.LENGTH_INDEFINITE);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190         }                                                                                                </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1191         setPublishedNote(false);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1192     }                                                                                                    </span>
<span  style="">1193                                                                                                          </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1194     private void copyToClipboard(String text) {                                                          </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="">1195         ClipboardManager clipboard = (ClipboardManager) requireActivity()                                </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="">1196                 .getSystemService(Context.CLIPBOARD_SERVICE);                                            </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1197         ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                       </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="">1198         if (clipboard != null) {                                                                         </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1199             clipboard.setPrimaryClip(clip);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1200         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1201     }                                                                                                    </span>
<span  style="">1202                                                                                                          </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1203     private void showShareSheet() {                                                                      </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1204         if (isAdded()) {                                                                                 </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="">1205             mShareBottomSheet.show(requireFragmentManager(), mNote);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1206         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1207     }                                                                                                    </span>
<span  style="">1208                                                                                                          </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1209     private void showInfoSheet() {                                                                       </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1210         if (isAdded()) {                                                                                 </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="">1211             mInfoBottomSheet.show(requireFragmentManager(), mNote);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1212         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213     }                                                                                                    </span>
<span  style="">1214                                                                                                          </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1215     private void showHistorySheet() {                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1216         if (isAdded()) {                                                                                 </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1217             // Request revisions for the current note                                                    </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style=""><abbr title="1218             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());">1218             mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbaðŸ”µ</abbr></span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1219             saveNote();                                                                                  </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="">1220             mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1222     }                                                                                                    </span>
<span  style="">1223                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1224     /**                                                                                                  </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1225      * Simperium listeners                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1226      */                                                                                                  </span>
<span  style="">1227                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1228     @Override                                                                                            </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1229     public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                     </span>
<span  style="">1230                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1231     }                                                                                                    </span>
<span  style="">1232                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1233     @Override                                                                                            </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style=""><abbr title="1234     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {">1234     public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) ðŸ”µ</abbr></span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1235         if (changeType == Bucket.ChangeType.MODIFY) {                                                    </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1236             if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1237                 try {                                                                                    </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1238                     final Note updatedNote = mNotesBucket.get(key);                                      </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1239                     if (getActivity() != null) {                                                         </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1240                         getActivity().runOnUiThread(new Runnable() {                                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1241                             @Override                                                                    </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1242                             public void run() {                                                          </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1243                                 if (mPublishTimeoutHandler != null) {                                    </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1244                                     mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1245                                 }                                                                        </span>
<span  style="">1246                                                                                                          </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1247                                 updateNote(updatedNote);                                                 </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1248                                 updatePublishedState(true);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249                             }                                                                            </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1250                         });                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1251                     }                                                                                    </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1252                 } catch (BucketObjectMissingException e) {                                               </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1253                     e.printStackTrace();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1255             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1256         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1257     }                                                                                                    </span>
<span  style="">1258                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1259     @Override                                                                                            </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1260     public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                       </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1261         // noop                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262     }                                                                                                    </span>
<span  style="">1263                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1264     @Override                                                                                            </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1265     public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                   </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1266         // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                         </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1267         if (mIsLoadingNote)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1268             return;                                                                                      </span>
<span  style="">1269                                                                                                          </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1270         Note openNote = getNote();                                                                       </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1271         if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1272             return;                                                                                      </span>
<span  style="">1273                                                                                                          </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1274         note.setContent(mContentEditText.getPlainTextContent());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1275     }                                                                                                    </span>
<span  style="">1276                                                                                                          </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1277     private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                            </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1278         WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                  </span>
<span  style="">1279                                                                                                          </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1280         LoadNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1281             weakFragment = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282         }                                                                                                </span>
<span  style="">1283                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1284         @Override                                                                                        </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1285         protected void onPreExecute() {                                                                  </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1286             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1287             if (fragment != null) {                                                                      </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1288                 fragment.mContentEditText.removeTextChangedListener(fragment);                           </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1289                 fragment.mIsLoadingNote = true;                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1291         }                                                                                                </span>
<span  style="">1292                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1293         @Override                                                                                        </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1294         protected Void doInBackground(String... args) {                                                  </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1295             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="4349500834754523537" onmouseenter="enter('4349500834754523537');" onmouseout="out('4349500834754523537');" style="">1296             if ((fragment == null) || (fragment.getActivity() == null)) {                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1297                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298             }                                                                                            </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1299             String noteID = args[0];                                                                     </span>
<span class="2152357253618292092" onmouseenter="enter('2152357253618292092');" onmouseout="out('2152357253618292092');" style="">1300             Simplenote application = ((Simplenote) (fragment.getActivity().getApplication()));           </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1301             Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1302             try {                                                                                        </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1303                 fragment.mNote = notesBucket.get(noteID);                                                </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1304                 // Set the current note in NotesActivity when on a tablet                                </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1305                 if (fragment.getActivity() instanceof NotesActivity) {                                   </span>
<span class="8585053155468161660" onmouseenter="enter('8585053155468161660');" onmouseout="out('8585053155468161660');" style="">1306                     ((NotesActivity) (fragment.getActivity())).setCurrentNote(fragment.mNote);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307                 }                                                                                        </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1308                 // Set markdown and preview flags for current note                                       </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1309                 if (fragment.mNote != null) {                                                            </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1310                     fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                    </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1311                     fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1312                 }                                                                                        </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1313             } catch (BucketObjectMissingException e) {                                                   </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1314                 // See if the note is in the object store                                                </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1315                 Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                        </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1316                 while (notesCursor.moveToNext()) {                                                       </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1317                     Note currentNote = notesCursor.getObject();                                          </span>
<span class="8264360518691996978" onmouseenter="enter('8264360518691996978');" onmouseout="out('8264360518691996978');" style="">1318                     if ((currentNote != null) &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {         </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1319                         fragment.mNote = currentNote;                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1320                         return null;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1322                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1323             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1324             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1325         }                                                                                                </span>
<span  style="">1326                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1327         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1328         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-7212142050064810641" onmouseenter="enter('-7212142050064810641');" onmouseout="out('-7212142050064810641');" style="">1329             final NoteEditorFragment fragment = weakFragment.get();                                      </span>
<span class="-9214324735517901283" onmouseenter="enter('-9214324735517901283');" onmouseout="out('-9214324735517901283');" style=""><abbr title="1330             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFinishing()) {">1330             if (((fragment == null) || (fragment.getActivity() == null)) || fragment.getActivity().isFiniðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1331                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1332             }                                                                                            </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1333             fragment.refreshContent(false);                                                              </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1334             if (fragment.mMatchOffsets != null) {                                                        </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1335                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1335                 int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndeðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1336                 fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);             </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1337                 fragment.mShouldScrollToSearchMatch = true;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338             }                                                                                            </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1339             fragment.mContentEditText.addTextChangedListener(fragment);                                  </span>
<span class="-4686922819076112275" onmouseenter="enter('-4686922819076112275');" onmouseout="out('-4686922819076112275');" style="">1340             if ((fragment.mNote != null) &amp;&amp; fragment.mNote.getContent().isEmpty()) {                     </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1341                 // Show soft keyboard                                                                    </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1342                 fragment.mContentEditText.requestFocus();                                                </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1343                 new Handler().postDelayed(new Runnable() {                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1344                     @Override                                                                            </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1345                     public void run() {                                                                  </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1346                         if (fragment.getActivity() == null) {                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1347                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1348                         }                                                                                </span>
<span class="-6396953671275869188" onmouseenter="enter('-6396953671275869188');" onmouseout="out('-6396953671275869188');" style=""><abbr title="1349                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)));">1349                         InputMethodManager inputMethodManager = ((InputMethodManager) (fragment.getActiviðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1350                         if (inputMethodManager != null) {                                                </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1351                             inputMethodManager.showSoftInput(fragment.mContentEditText, 0);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1353                     }                                                                                    </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1354                 }, 100);                                                                                 </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1355             } else if (fragment.mNote != null) {                                                         </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1356                 // If we have a valid note, hide the placeholder                                         </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1357                 fragment.setPlaceholderVisible(false);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1358             }                                                                                            </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1359             fragment.updateMarkdownView();                                                               </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1360             fragment.requireActivity().invalidateOptionsMenu();                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1361             fragment.linkifyEditorContent();                                                             </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1362             fragment.mIsLoadingNote = false;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1363         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1364     }                                                                                                    </span>
<span  style="">1365                                                                                                          </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1366     private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                              </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1367         WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                  </span>
<span  style="">1368                                                                                                          </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1369         SaveNoteTask(NoteEditorFragment fragment) {                                                      </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1370             weakFragment = new WeakReference&lt;&gt;(fragment);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371         }                                                                                                </span>
<span  style="">1372                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1373         @Override                                                                                        </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1374         protected Void doInBackground(Void... args) {                                                    </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1375             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1376             if (fragment != null) {                                                                      </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1377                 fragment.saveNote();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378             }                                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1379             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1380         }                                                                                                </span>
<span  style="">1381                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1382         @Override                                                                                        </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1383         protected void onPostExecute(Void nada) {                                                        </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1384             NoteEditorFragment fragment = weakFragment.get();                                            </span>
<span class="4331800031661631828" onmouseenter="enter('4331800031661631828');" onmouseout="out('4331800031661631828');" style=""><abbr title="1385             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFinishing())) {">1385             if (((fragment != null) &amp;&amp; (fragment.getActivity() != null)) &amp;&amp; (!fragment.getActivity().isFiðŸ”µ</abbr></span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1386                 // Update links                                                                          </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1387                 fragment.linkifyEditorContent();                                                         </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1388                 fragment.updateMarkdownView();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1390         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1391     }                                                                                                    </span>
<span  style="">1392                                                                                                          </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1393     private void linkifyEditorContent() {                                                                </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1394         if (getActivity() == null || getActivity().isFinishing()) {                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1395             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1396         }                                                                                                </span>
<span  style="">1397                                                                                                          </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1398         if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                         </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1399             SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1400         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1401     }                                                                                                    </span>
<span  style="">1402                                                                                                          </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1403     // Show tabs if markdown is enabled globally, for current note, and not tablet landscape             </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1404     private void updateMarkdownView() {                                                                  </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1405         if (!mIsMarkdownEnabled) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1406             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407         }                                                                                                </span>
<span  style="">1408                                                                                                          </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1409         Activity activity = getActivity();                                                               </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1410         if (activity instanceof NotesActivity) {                                                         </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1411             // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.        </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1412             loadMarkdownData();                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1413         } else {                                                                                         </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1414             // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1415             if (mNoteMarkdownFragment == null) {                                                         </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1416                 mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                         </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1417                         .getNoteMarkdownFragment();                                                      </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1418                 ((NoteEditorActivity) requireActivity()).showTabs();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1419             }                                                                                            </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1420             // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                              </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1421             mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1422         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1423     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1424 }                                                                                                        </span></pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8  import android.database.Cursor;                                                                                   </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  13  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  14  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  15  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16  import android.text.Spanned;                                                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17  import android.text.TextWatcher;                                                                                  </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  18  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  19  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  20  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  21  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  23  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  24  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  25  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  26  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  27  import android.view.ViewGroup;                                                                                    </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  28  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  29  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  30  import android.webkit.WebView;                                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  31  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32  import android.widget.LinearLayout;                                                                               </span>
<span class="6117110559667671300" onmouseenter="enter('6117110559667671300');" onmouseout="out('6117110559667671300');" style="">  33  import android.widget.ScrollView;                                                                                 </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  34  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  35  import android.widget.Toast;                                                                                      </span>
<span  style="">  36                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  37  import androidx.annotation.NonNull;                                                                               </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  38  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  39  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  40  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  41  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  42  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span  style="">  43                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  44  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  45  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  46  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  47  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  48  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  49  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  50  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  51  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  52  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  53  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  54  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  55  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  56  import com.automattic.simplenote.utils.SnackbarUtils;                                                             </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  57  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  58  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  59  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  60  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  61  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  62  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  63  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  64  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  65  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  66  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  67  import com.simperium.client.Query;                                                                                </span>
<span  style="">  68                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  69  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  70  import java.util.Calendar;                                                                                        </span>
<span  style="">  71                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  72  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  73          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  74          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  75          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  76          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="715837164460589842" onmouseenter="enter('715837164460589842');" onmouseout="out('715837164460589842');" style="">  77          InfoBottomSheetDialog.InfoSheetListener,                                                                  </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  78          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style="">  79                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  80      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  81      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style="">  82      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style="">  83      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style="">  84      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style="">  85      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  86      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  87      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="">  88      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="">  89      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  90      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style="">  91      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">  93          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">  94              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  96      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  97      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style="">  98      private View mRootView;                                                                                       </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  99      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style=""> 100      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 101      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 102      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 103      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 104      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 105      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 106      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 107      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 108      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 109      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 110      private ActionMode mActionMode;                                                                               </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 111      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 112      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 113      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 114      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 115      private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                                   </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 116      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 117      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 118      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 119      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 120      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 121      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 123          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 124 -            if (!isAdded()) return;                                                                               </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 125 +            if (!isAdded()) {                                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 126 +                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 127 +            }                                                                                                     </span>
<span  style=""> 128                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 129              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 130                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 131                  public void run() {                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 132 -                                                                                                                  </span>
<span class="6844751493350163385" onmouseenter="enter('6844751493350163385');" onmouseout="out('6844751493350163385');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 133 -                    if (mHistoryBottomSheet.isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {              </span>
<span class="-3311389934398547914" onmouseenter="enter('-3311389934398547914');" onmouseout="out('-3311389934398547914');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 134 +                    if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {"> 134 +                    if (mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing() &amp;&amp; ðŸ”µ</abbr></span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 135                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 136                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 139              });                                                                                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 140 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 142      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 143      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 144      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 145      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 146      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 147 -                                                                                                                  </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 148          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 149          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 150          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 151              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 152              MenuInflater inflater = mode.getMenuInflater();                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +                                                                                                                  </span>
<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 154              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 155                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 156                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 157                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 158                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 159                                                                                                                    </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 160                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161              }                                                                                                     </span>
<span  style=""> 162                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 163              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 163              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgrðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 164              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 164              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().ðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 165              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166          }                                                                                                         </span>
<span  style=""> 167                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 168          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 169          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 171          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 172              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173          }                                                                                                         </span>
<span  style=""> 174                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 175          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 176          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 177          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 178              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 179                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 180                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 181                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 182                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 183                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 184                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 185                              startActivity(i);                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 186                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 187                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188                          }                                                                                         </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 189                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 191                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 192                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 193                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 194                          copyToClipboard(mLinkText);                                                               </span>
<span class="3326463149460041317" onmouseenter="enter('3326463149460041317');" onmouseout="out('3326463149460041317');" style=""><abbr title=" 195                          Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 195                          Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).shoðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 196                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 198                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 199                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 200                      if (mLinkText != null) {                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 201                          showShareSheet();                                                                         </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 202                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 204                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 205                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 206                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208          }                                                                                                         </span>
<span  style=""> 209                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 210          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 211          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 212          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 213              mActionMode = null;                                                                                   </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 214              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 215                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 216                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 217                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 218                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 218                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.trðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 220                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 221                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 222              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 223          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 224      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 225      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="9194238965806529126" onmouseenter="enter('9194238965806529126');" onmouseout="out('9194238965806529126');" style=""> 226      private boolean mIsUndoingPublishing;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 227      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 228      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 229          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 230          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 231              if (!isAdded()) return;                                                                               </span>
<span  style=""> 232                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 233              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 234                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 235                  public void run() {                                                                               </span>
<span  style=""> 236                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 237                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 238                      mNote.save();                                                                                 </span>
<span  style=""> 239                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 240                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 242              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 244      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 245      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 246      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 247      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 248                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 249      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 250       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 251       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 252       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 253      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254      }                                                                                                             </span>
<span  style=""> 255                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 256      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 257      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 258          super.onCreate(savedInstanceState);                                                                       </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style=""> 259          mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                                 </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 260          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 261          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 262                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 263          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 264          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 266          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 266          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 267          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 267          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attrðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 268          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 268          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 269          mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 269          mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actðŸ”µ</abbr></span>
<span  style=""> 270                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 271          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 272          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 273          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 274                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 275          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 276                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 277          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 278              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 279              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 280                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 281                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 282                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283              }                                                                                                     </span>
<span  style=""> 284                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 285              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 286              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 287                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 288                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289              }                                                                                                     </span>
<span  style=""> 290                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 292              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 293                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294              }                                                                                                     </span>
<span  style=""> 295                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 296              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 297              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 298                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 299                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 300                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 301                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 302                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 303                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 304                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 305                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 306                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 307                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 308                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 309                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 311          };                                                                                                        </span>
<span  style=""> 312                                                                                                                    </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 313          WidgetUtils.updateNoteWidgets(getActivity());                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314      }                                                                                                             </span>
<span  style=""> 315                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 316      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 317      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 318          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 319          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 320          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 321          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 322          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="8247847837270423645" onmouseenter="enter('8247847837270423645');" onmouseout="out('8247847837270423645');" style=""> 323          mTagView = mRootView.findViewById(R.id.tag_view);                                                         </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 324          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 325          mTagView.setOnFocusChangeListener(this);                                                                  </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 326          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span  style=""> 327                                                                                                                    </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 328          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 329          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 330              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 331              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 332              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 333              mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 334                      ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 335                      : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 336          }                                                                                                         </span>
<span  style=""> 337                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 338          mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>
<span  style=""> 339                                                                                                                    </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 340          Bundle arguments = getArguments();                                                                        </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 341          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 342              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 343              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 344              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 345                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346              }                                                                                                     </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 347              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-1032230432854321396" onmouseenter="enter('-1032230432854321396');" onmouseout="out('-1032230432854321396');" style=""> 348          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null ) {           </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 349              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 350              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 351              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 352                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354          }                                                                                                         </span>
<span  style=""> 355                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 356          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 357          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 358              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 359              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 360                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 361                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 362                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 363                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364                      }                                                                                             </span>
<span  style=""> 365                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 366                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 367                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 368                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 369                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 370                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 371                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 372                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373                      }                                                                                             </span>
<span  style=""> 374                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 375                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 376                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 377                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span  style=""> 378                                                                                                                    </span>
<span class="5020302440416452113" onmouseenter="enter('5020302440416452113');" onmouseout="out('5020302440416452113');" style=""> 379                      // We use different scroll views in the root of the layout files... yuck.                     </span>
<span class="-2313309201646667285" onmouseenter="enter('-2313309201646667285');" onmouseout="out('-2313309201646667285');" style=""> 380                      // So we have to cast appropriately to do a smooth scroll                                     </span>
<span class="4785183779479911307" onmouseenter="enter('4785183779479911307');" onmouseout="out('4785183779479911307');" style=""> 381                      if (mRootView instanceof NestedScrollView) {                                                  </span>
<span class="-2957331341634255052" onmouseenter="enter('-2957331341634255052');" onmouseout="out('-2957331341634255052');" style=""> 382                          ((NestedScrollView)mRootView).smoothScrollTo(0, lineTop);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 383                      } else {                                                                                      </span>
<span class="-2547502694507835703" onmouseenter="enter('-2547502694507835703');" onmouseout="out('-2547502694507835703');" style=""> 384                          ((ScrollView)mRootView).smoothScrollTo(0, lineTop);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385                      }                                                                                             </span>
<span  style=""> 386                                                                                                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 387                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 390          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 391          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 392          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393      }                                                                                                             </span>
<span  style=""> 394                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 395      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 396      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 397          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 398          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 399          mNotesBucket.addListener(this);                                                                           </span>
<span  style=""> 400                                                                                                                    </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 401          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span  style=""> 402                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 403          if (mContentEditText != null) {                                                                           </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""> 404              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));       </span>
<span  style=""> 405                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 406              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 407                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 408              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410      }                                                                                                             </span>
<span  style=""> 411                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 412      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 413          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 414              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 415              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 416                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 417                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                  }                                                                                                 </span>
<span  style=""> 419                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 420                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 420                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(ContexðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 421                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 422                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 425          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426      }                                                                                                             </span>
<span  style=""> 427                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 428      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 429      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 430          super.onPause();  // Always call the superclass method first                                              </span>
<span  style=""> 431                                                                                                                    </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 432          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 433          mNotesBucket.stop();                                                                                      </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 435          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 436          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 437                                                                                                                    </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 438          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 439                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 440          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 441              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442          }                                                                                                         </span>
<span  style=""> 443                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 444          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 445              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446          }                                                                                                         </span>
<span  style=""> 447                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 448          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 449              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450          }                                                                                                         </span>
<span  style=""> 451                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 452          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 453          saveNote();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454      }                                                                                                             </span>
<span  style=""> 455                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 456      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 457      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 458          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 459                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 460          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 461              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 462          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463      }                                                                                                             </span>
<span  style=""> 464                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 465      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 466      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 467          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""> 468          if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 469              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470          }                                                                                                         </span>
<span  style=""> 471                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 472          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span  style=""> 473                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 474          if (mNote != null) {                                                                                      </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 475              MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                                  </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 476              viewPublishedNoteItem.setVisible(true);                                                               </span>
<span  style=""> 477                                                                                                                    </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 478              MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);                     </span>
<span  style=""> 479                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 480              if (mNote.isDeleted()) {                                                                              </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 481                  trashItem.setTitle(R.string.undelete);                                                            </span>
<span class="-7281764457900946953" onmouseenter="enter('-7281764457900946953');" onmouseout="out('-7281764457900946953');" style=""> 482                  trashItem.setIcon(R.drawable.ic_trash_restore_24dp);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 483              } else {                                                                                              </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 484                  trashItem.setTitle(R.string.delete);                                                              </span>
<span class="-276308356326274253" onmouseenter="enter('-276308356326274253');" onmouseout="out('-276308356326274253');" style=""> 485                  trashItem.setIcon(R.drawable.ic_trash_24dp);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487          }                                                                                                         </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 488          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489      }                                                                                                             </span>
<span  style=""> 490                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 491      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 492      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 493          switch (item.getItemId()) {                                                                               </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 494              case R.id.menu_view_info:                                                                             </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 495                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 496                  return true;                                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 497              case R.id.menu_checklist:                                                                             </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 498                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 499                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 500              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 501                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 502                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 503              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 504                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 505                  return true;                                                                                      </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 506              case R.id.menu_delete:                                                                                </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 507                  if (!isAdded()) return false;                                                                     </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 508                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 509                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 510              case android.R.id.home:                                                                               </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 511                  if (!isAdded()) return false;                                                                     </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 512                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 513                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 514              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 515                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517      }                                                                                                             </span>
<span  style=""> 518                                                                                                                    </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style=""> 519      private void insertChecklist() {                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 520          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 521              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 522          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 523              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 524              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525          }                                                                                                         </span>
<span  style=""> 526                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 527          AnalyticsTracker.track(                                                                                   </span>
<span class="3978226561215059527" onmouseenter="enter('3978226561215059527');" onmouseout="out('3978226561215059527');" style=""> 528                  AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED,                                                  </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 529                  AnalyticsTracker.CATEGORY_NOTE,                                                                   </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 530                  &quot;toolbar_button&quot;                                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 531          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532      }                                                                                                             </span>
<span  style=""> 533                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 534      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 535      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 536          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 537          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 538              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 539              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541      }                                                                                                             </span>
<span  style=""> 542                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 543      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 544          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 545          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546      }                                                                                                             </span>
<span  style=""> 547                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 548      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 549          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550      }                                                                                                             </span>
<span  style=""> 551                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 552      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 553          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554      }                                                                                                             </span>
<span  style=""> 555                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 556      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 557          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 558          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559      }                                                                                                             </span>
<span  style=""> 560                                                                                                                    </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 561      private void shareNote() {                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 562          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 563              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 564              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 565              AnalyticsTracker.track(                                                                               </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 566                      AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                             </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 567                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 568                      &quot;action_bar_share_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 569              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571      }                                                                                                             </span>
<span  style=""> 572                                                                                                                    </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 573      private void showHistory() {                                                                                  </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 574          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 575              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 576              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 577              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 578          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 579              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581      }                                                                                                             </span>
<span  style=""> 582                                                                                                                    </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 583      private void showInfo() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 584          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 585              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 586              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 587              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 588          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589      }                                                                                                             </span>
<span  style=""> 590                                                                                                                    </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 591      protected void setMarkdownEnabled(boolean enabled) {                                                          </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 592          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 593                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 594          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 595              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 596          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597      }                                                                                                             </span>
<span  style=""> 598                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 599      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 600          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 601                  mCss,                                                                                             </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 602                  mContentEditText.getPlainTextContent()                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 603          );                                                                                                        </span>
<span  style=""> 604                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 605          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606      }                                                                                                             </span>
<span  style=""> 607                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 608      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 609          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 610              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 611                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 612          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 613                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 614          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 615              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 616          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 617              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618          }                                                                                                         </span>
<span  style=""> 619                                                                                                                    </span>
<span  style=""> 620                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 621          saveNote();                                                                                               </span>
<span  style=""> 622                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 623          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624      }                                                                                                             </span>
<span  style=""> 625                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 626      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 627          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 628          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 629          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630      }                                                                                                             </span>
<span  style=""> 631                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 632      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 633          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 634              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 635                                                                                                                    </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 636              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 636              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span  style=""> 637                                                                                                                    </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 638              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 639                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 640              if (isNoteUpdate) {                                                                                   </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 641                  // Save the note so any local changes get synced                                                  </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 642                  mNote.save();                                                                                     </span>
<span  style=""> 643                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 644                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 645                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 646                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 647                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649              }                                                                                                     </span>
<span  style=""> 650                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 651              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 652              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 653              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655      }                                                                                                             </span>
<span  style=""> 656                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 657      private void updateTagList() {                                                                                </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 658          Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 659          if (activity == null) return;                                                                             </span>
<span  style=""> 660                                                                                                                    </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 661          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 662          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663      }                                                                                                             </span>
<span  style=""> 664                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 665      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 666          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 667          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 668          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 669          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 670          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 671          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 672          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 673          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 674                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 675          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 676                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 677          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 678                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 679          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 680                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 681          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 682          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 683              return newText.length();                                                                              </span>
<span  style=""> 684                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 685          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 686          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 687                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 688          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 689              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 689              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 690              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 690              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 691          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 692              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 693          }                                                                                                         </span>
<span  style=""> 694                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 695          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 696          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 697              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 698                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 699          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 700          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701      }                                                                                                             </span>
<span  style=""> 702                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 703      @Override                                                                                                     </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 704      public void onTagsChanged(String tagString) {                                                                 </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 705          if (mNote == null || !isAdded()) return;                                                                  </span>
<span  style=""> 706                                                                                                                    </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 707          if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 708              AnalyticsTracker.track(                                                                               </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 709                      AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                                       </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 710                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 711                      &quot;tag_added_to_note&quot;                                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 712              );                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 713          } else {                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 714              AnalyticsTracker.track(                                                                               </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 715                      AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 716                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 717                      &quot;tag_removed_from_note&quot;                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 718              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 719          }                                                                                                         </span>
<span  style=""> 720                                                                                                                    </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 721          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 722          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 723          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 724          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725      }                                                                                                             </span>
<span  style=""> 726                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 728      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 729          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 730      }                                                                                                             </span>
<span  style=""> 731                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 732      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 733      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 734          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 735          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 736          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 737      }                                                                                                             </span>
<span  style=""> 738                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 739      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 740      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 741          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 742          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 743              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 744              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745          }                                                                                                         </span>
<span  style=""> 746                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 747          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 748          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 749              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 750              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 751          }                                                                                                         </span>
<span  style=""> 752                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 753          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 754          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 755          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 756          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 757      }                                                                                                             </span>
<span  style=""> 758                                                                                                                    </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 759      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 760          // Set the note title to be a larger size                                                                 </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 761          // Remove any existing size spans                                                                         </span>
<span class="-3345432347418186953" onmouseenter="enter('-3345432347418186953');" onmouseout="out('-3345432347418186953');" style=""> 762          RelativeSizeSpan[] spans = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);               </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 763          for (RelativeSizeSpan span : spans) {                                                                     </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 764              editable.removeSpan(span);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765          }                                                                                                         </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 766          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 767          if (newLinePosition == 0)                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 768              return;                                                                                               </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 769          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 769          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.lengtðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 770      }                                                                                                             </span>
<span  style=""> 771                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 772      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 773          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 774          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 775          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 776          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777      }                                                                                                             </span>
<span  style=""> 778                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 779      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 780          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 781              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 782          }                                                                                                         </span>
<span  style=""> 783                                                                                                                    </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 784          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 785      }                                                                                                             </span>
<span  style=""> 786                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 787      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 788          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 789              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 790              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 791              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 792              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 793                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 794          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 795              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 796                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 797          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 798      }                                                                                                             </span>
<span  style=""> 799                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 800      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 801      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 802          if (!hasFocus) {                                                                                          </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 803              String tagString = getNoteTagsString().trim();                                                        </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 804              if (tagString.length() &gt; 0) {                                                                         </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 805                  mTagView.setChips(tagString);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 806              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808      }                                                                                                             </span>
<span  style=""> 809                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 810      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 811          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 812      }                                                                                                             </span>
<span  style=""> 813                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 814      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 815          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 816      }                                                                                                             </span>
<span  style=""> 817                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 818      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 819          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 820              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 821          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 822              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824      }                                                                                                             </span>
<span  style=""> 825                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 826      private String getNoteTagsString() {                                                                          </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 827          if (mTagView == null || mTagView.getText() == null) {                                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 828              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 829          } else {                                                                                                  </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 830              return mTagView.getText().toString();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832      }                                                                                                             </span>
<span  style=""> 833                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 834      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style=""> 835       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 836       */                                                                                                           </span>
<span  style=""> 837                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 838      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 839      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 840          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 841          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 842              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 843          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844      }                                                                                                             </span>
<span  style=""> 845                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 846      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 847      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 848          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 849          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 850              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 851          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 852      }                                                                                                             </span>
<span  style=""> 853                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 854      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style=""> 855      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 856          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 857              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 858          }                                                                                                         </span>
<span  style=""> 859                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style=""> 860          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 861              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 862          }                                                                                                         </span>
<span  style=""> 863                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style=""> 864          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style=""> 865          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style=""> 866          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style=""> 867              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style=""> 869          ft.addToBackStack(null);                                                                                  </span>
<span  style=""> 870                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style=""> 871          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style=""> 872          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style=""> 873          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style=""> 874          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875      }                                                                                                             </span>
<span  style=""> 876                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 877      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 878      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 879          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880      }                                                                                                             </span>
<span  style=""> 881                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 882      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 883      public void onShareDismissed() {                                                                              </span>
<span  style=""> 884                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 885      }                                                                                                             </span>
<span  style=""> 886                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 887      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style=""> 888       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 889       */                                                                                                           </span>
<span  style=""> 890                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 891      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 892      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 893          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 894          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 895              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 896          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 897      }                                                                                                             </span>
<span  style=""> 898                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 899      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 900      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 901          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 902              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 903          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 904          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 905      }                                                                                                             </span>
<span  style=""> 906                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 907      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 908      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 909          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 910              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911          }                                                                                                         </span>
<span  style=""> 912                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 913          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 914              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 915          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916      }                                                                                                             </span>
<span  style=""> 917                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 918      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 919      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 920          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 921      }                                                                                                             </span>
<span  style=""> 922                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 923      /**                                                                                                           </span>
<span class="278795310073326946" onmouseenter="enter('278795310073326946');" onmouseout="out('278795310073326946');" style=""> 924       * Info bottom sheet listeners                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 925       */                                                                                                           </span>
<span  style=""> 926                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 927      @Override                                                                                                     </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 928      public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                                    </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 929          NoteUtils.setNotePin(mNote, isSwitchedOn);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 930      }                                                                                                             </span>
<span  style=""> 931                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 932      @Override                                                                                                     </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 933      public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                               </span>
<span class="2498037679736242197" onmouseenter="enter('2498037679736242197');" onmouseout="out('2498037679736242197');" style=""> 934          mIsMarkdownEnabled = isSwitchedOn;                                                                        </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 935          Activity activity = getActivity();                                                                        </span>
<span  style=""> 936                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 937          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span  style=""> 938                                                                                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 939              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 940              if (mIsMarkdownEnabled) {                                                                             </span>
<span  style=""> 941                                                                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 942                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 943                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 944                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 945                      // Get markdown fragment and update content                                                   </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 946                      mNoteMarkdownFragment =                                                                       </span>
<span class="5596511960413116475" onmouseenter="enter('5596511960413116475');" onmouseout="out('5596511960413116475');" style=""> 947                              editorActivity.getNoteMarkdownFragment();                                             </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 948                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 949                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 950              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 951                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 952              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 953          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 954              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 955              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 956          }                                                                                                         </span>
<span  style=""> 957                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 958          saveNote();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 959      }                                                                                                             </span>
<span  style=""> 960                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 961      @Override                                                                                                     </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 962      public void onInfoCopyLinkClicked() {                                                                         </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 963          copyToClipboard(mNote.getPublishedUrl());                                                                 </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 964          Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 965      }                                                                                                             </span>
<span  style=""> 966                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 967      @Override                                                                                                     </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 968      public void onInfoShareLinkClicked() {                                                                        </span>
<span class="-7399939689867674649" onmouseenter="enter('-7399939689867674649');" onmouseout="out('-7399939689867674649');" style=""> 969          if (mInfoBottomSheet != null) {                                                                           </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 970              mInfoBottomSheet.dismiss();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 971          }                                                                                                         </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 972          showShareSheet();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973      }                                                                                                             </span>
<span  style=""> 974                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 975      @Override                                                                                                     </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 976      public void onInfoDismissed() {                                                                               </span>
<span  style=""> 977                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 978      }                                                                                                             </span>
<span  style=""> 979                                                                                                                    </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style=""> 980      protected void saveNote() {                                                                                   </span>
<span class="6573885176676722224" onmouseenter="enter('6573885176676722224');" onmouseout="out('6573885176676722224');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 981 -        if (mNote == null ||                                                                                      </span>
<span class="-704198539817842861" onmouseenter="enter('-704198539817842861');" onmouseout="out('-704198539817842861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 982 -                mContentEditText == null ||                                                                       </span>
<span class="-7342228029026764788" onmouseenter="enter('-7342228029026764788');" onmouseout="out('-7342228029026764788');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 983 -                mIsLoadingNote ||                                                                                 </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 984 -                (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                               </span>
<span class="-3105099670941444201" onmouseenter="enter('-3105099670941444201');" onmouseout="out('-3105099670941444201');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 985 +        if (mNote == null || mContentEditText == null || mIsLoadingNote ||                                        </span>
<span class="-8027031690448598107" onmouseenter="enter('-8027031690448598107');" onmouseout="out('-8027031690448598107');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 986 +            (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialog().isShowing())) {"> 986 +            (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.getDialog() != null &amp;&amp; mHistoryBottomSheet.getDialðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 987              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 988          }                                                                                                         </span>
<span  style=""> 989                                                                                                                    </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style=""> 990          String content = mContentEditText.getPlainTextContent();                                                  </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style=""> 991          String tagString = getNoteTagsString();                                                                   </span>
<span  style=""> 992                                                                                                                    </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style=""><abbr title=" 993          if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {"> 993          if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) ðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style=""> 994              mNote.setContent(content);                                                                            </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 995              mNote.setTagString(tagString);                                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 996              mNote.setModificationDate(Calendar.getInstance());                                                    </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style=""> 997              mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                         </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style=""> 998              mNote.setPreviewEnabled(mIsPreviewEnabled);                                                           </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 999              mNote.save();                                                                                         </span>
<span  style="">1000                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1001              AnalyticsTracker.track(                                                                               </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="">1002                      AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1003                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="">1004                      &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1005              );                                                                                                    </span>































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1006          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1007      }                                                                                                             </span>
<span  style="">1008                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1009      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1010      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1011      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1012      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1013          mCurrentCursorPosition = selEnd;                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1014          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1015              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1016              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1017                  return;                                                                                           </span>
<span  style="">1018                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1019              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1020              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1021                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1022                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1023                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1023                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1024                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1025                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1026                      setLinkMenuItem();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1027                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1028                  }                                                                                                 </span>
<span  style="">1029                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1030                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1031                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1032                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1033                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1034                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1035                      }                                                                                             </span>
<span  style="">1036                                                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1037                      setLinkMenuItem();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1038                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1039              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1040                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1041                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1042              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1043          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1044              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1045              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1046          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1047      }                                                                                                             </span>
<span  style="">1048                                                                                                                    </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1049      private void setLinkMenuItem() {                                                                              </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1050          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1051              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1052                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1053                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1054              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1055                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1056                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1057              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1058                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1059                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1060              } else {                                                                                              </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1061                  mViewLinkMenuItem.setIcon(mWebIcon);                                                              </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1062                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1063              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1064          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1065      }                                                                                                             </span>
<span  style="">1066                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1067      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1068          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1069              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1070              mNote.save();                                                                                         </span>
<span  style="">1071                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1072              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1073              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1074                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1075              AnalyticsTracker.track(                                                                               </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1076                      (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                                 </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1077                              AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1078                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1079                      &quot;publish_note_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1080              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1081          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1082      }                                                                                                             </span>
<span  style="">1083                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1084      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span  style="">1085                                                                                                                    </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1086          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1087              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088          }                                                                                                         </span>
<span  style="">1089                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1090          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1091          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1092                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1093          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1094              if (mNote.isPublished()) {                                                                            </span>
<span  style="">1095                                                                                                                    </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1096                  if (mIsUndoingPublishing) {                                                                       </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1097                      SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,                    </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1098                              R.color.status_positive,                                                              </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1099                              Snackbar.LENGTH_LONG);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1100                  } else {                                                                                          </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1101                      SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,                    </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1102                              R.color.status_positive,                                                              </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1103                              Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1104                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1105                                  public void onClick(View v) {                                                     </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1106                                      mIsUndoingPublishing = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1107                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1108                                  }                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1109                              });                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1110                  }                                                                                                 </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1111                  copyToClipboard(mNote.getPublishedUrl());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1112              } else {                                                                                              </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1113                  if (mIsUndoingPublishing) {                                                                       </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1114                      SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,                  </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1115                              R.color.status_negative,                                                              </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1116                              Snackbar.LENGTH_LONG);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1117                  } else {                                                                                          </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1118                      SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,                  </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1119                              R.color.status_negative,                                                              </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1120                              Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1121                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1122                                  public void onClick(View v) {                                                     </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1123                                      mIsUndoingPublishing = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1124                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1125                                  }                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1126                              });                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1127                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1128              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1129          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1130              if (mNote.isPublished()) {                                                                            </span>
<span class="-6121697006332454273" onmouseenter="enter('-6121697006332454273');" onmouseout="out('-6121697006332454273');" style="">1131                  SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_error,                           </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1132                          R.color.status_negative, Snackbar.LENGTH_LONG);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1133              } else {                                                                                              </span>
<span class="-4531979614724167785" onmouseenter="enter('-4531979614724167785');" onmouseout="out('-4531979614724167785');" style="">1134                  SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_error,                             </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1135                          R.color.status_negative, Snackbar.LENGTH_LONG);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1136              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1137          }                                                                                                         </span>
<span  style="">1138                                                                                                                    </span>
<span class="265789452469033686" onmouseenter="enter('265789452469033686');" onmouseout="out('265789452469033686');" style="">1139          mIsUndoingPublishing = false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1140      }                                                                                                             </span>
<span  style="">1141                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1142      private void publishNote() {                                                                                  </span>
<span  style="">1143                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1144          if (isAdded()) {                                                                                          </span>
<span class="4291898079933948381" onmouseenter="enter('4291898079933948381');" onmouseout="out('4291898079933948381');" style="">1145              mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.publishing,              </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1146                      R.color.blue, Snackbar.LENGTH_INDEFINITE);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1147          }                                                                                                         </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1148          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149      }                                                                                                             </span>
<span  style="">1150                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1151      private void unpublishNote() {                                                                                </span>
<span  style="">1152                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1153          if (isAdded()) {                                                                                          </span>
<span class="-6747781156546415836" onmouseenter="enter('-6747781156546415836');" onmouseout="out('-6747781156546415836');" style="">1154              mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublishing,            </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1155                      R.color.blue, Snackbar.LENGTH_INDEFINITE);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1156          }                                                                                                         </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1157          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1158      }                                                                                                             </span>
<span  style="">1159                                                                                                                    </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1160      private void copyToClipboard(String text) {                                                                   </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="">1161          ClipboardManager clipboard = (ClipboardManager) requireActivity()                                         </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="">1162                  .getSystemService(Context.CLIPBOARD_SERVICE);                                                     </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1163          ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                                </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="">1164          if (clipboard != null) {                                                                                  </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1165              clipboard.setPrimaryClip(clip);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1166          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1167      }                                                                                                             </span>
<span  style="">1168                                                                                                                    </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1169      private void showShareSheet() {                                                                               </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1170          if (isAdded()) {                                                                                          </span>
<span class="-5706261914377124016" onmouseenter="enter('-5706261914377124016');" onmouseout="out('-5706261914377124016');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1171 -            mShareBottomSheet.show(mNote);                                                                        </span>
<span class="-6363695226018504364" onmouseenter="enter('-6363695226018504364');" onmouseout="out('-6363695226018504364');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1172 +            mShareBottomSheet.show(requireFragmentManager(), mNote);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1174      }                                                                                                             </span>
<span  style="">1175                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1176      private void showInfoSheet() {                                                                                </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1177          if (isAdded()) {                                                                                          </span>
<span class="-9107266656084872702" onmouseenter="enter('-9107266656084872702');" onmouseout="out('-9107266656084872702');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1178 -            mInfoBottomSheet.show(mNote);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1179 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1180 -                                                                                                                  </span>
<span class="-1248038515529606639" onmouseenter="enter('-1248038515529606639');" onmouseout="out('-1248038515529606639');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1181 +            mInfoBottomSheet.show(requireFragmentManager(), mNote);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1182 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1183      }                                                                                                             </span>
<span  style="">1184                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1185      private void showHistorySheet() {                                                                             </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1186          if (isAdded()) {                                                                                          </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1187              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1188              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1189              saveNote();                                                                                           </span>
<span  style="">1190                                                                                                                    </span>
<span class="-8018381336008501546" onmouseenter="enter('-8018381336008501546');" onmouseout="out('-8018381336008501546');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">1191 -            mHistoryBottomSheet.show(mNote);                                                                      </span>
<span class="4961792341108798217" onmouseenter="enter('4961792341108798217');" onmouseout="out('4961792341108798217');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1192 +            mHistoryBottomSheet.show(requireFragmentManager(), mNote);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1193          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1194      }                                                                                                             </span>
<span  style="">1195                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1196      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1197       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1198       */                                                                                                           </span>
<span  style="">1199                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1200      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1201      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1202                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1203      }                                                                                                             </span>
<span  style="">1204                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1205      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1206      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1207          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1208              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1209                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1210                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1211                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1212                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1213                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1214                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1215                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1216                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1217                                  }                                                                                 </span>
<span  style="">1218                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1219                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1220                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1221                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1222                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1224                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1225                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1226                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1227              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1228          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1229      }                                                                                                             </span>
<span  style="">1230                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1231      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1232      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1233          // noop                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1234      }                                                                                                             </span>
<span  style="">1235                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1236      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1237      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1238          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1239          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1240              return;                                                                                               </span>
<span  style="">1241                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1242          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1243          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1244              return;                                                                                               </span>
<span  style="">1245                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1246          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247      }                                                                                                             </span>
<span  style="">1248                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1249      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1250          WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                           </span>
<span  style="">1251                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1252          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1253              weakFragment = new WeakReference&lt;&gt;(fragment);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254          }                                                                                                         </span>
<span  style="">1255                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1256          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1257          protected void onPreExecute() {                                                                           </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1258              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1259              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1260                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1261                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1262              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1263          }                                                                                                         </span>
<span  style="">1264                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1265          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1266          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1267              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1268              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1269                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1270              }                                                                                                     </span>
<span  style="">1271                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1272              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1273              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1274              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1275                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1276              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1277                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1278                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1279                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1280                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1281                  }                                                                                                 </span>
<span  style="">1282                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1283                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1284                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1285                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1286                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1287                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1288              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1289                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1290                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1291                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1292                      Note currentNote = notesCursor.getObject();                                                   </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1293                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1294                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1295                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1296                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1297                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1298              }                                                                                                     </span>
<span  style="">1299                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1300              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301          }                                                                                                         </span>
<span  style="">1302                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1303          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1304          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-7212142050064810641" onmouseenter="enter('-7212142050064810641');" onmouseout="out('-7212142050064810641');" style="">1305              final NoteEditorFragment fragment = weakFragment.get();                                               </span>
<span class="-799665902142491282" onmouseenter="enter('-799665902142491282');" onmouseout="out('-799665902142491282');" style="">1306              if (fragment == null                                                                                  </span>
<span class="-3592720682984648780" onmouseenter="enter('-3592720682984648780');" onmouseout="out('-3592720682984648780');" style="">1307                      || fragment.getActivity() == null                                                             </span>
<span class="-193925863612874363" onmouseenter="enter('-193925863612874363');" onmouseout="out('-193925863612874363');" style="">1308                      || fragment.getActivity().isFinishing()) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1309                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1310              }                                                                                                     </span>
<span  style="">1311                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1312              fragment.refreshContent(false);                                                                       </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1313              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1314                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1314                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1315                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span  style="">1316                                                                                                                    </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1317                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318              }                                                                                                     </span>
<span  style="">1319                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1320              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1321                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1322              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1323                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1324                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1325                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1326                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1327                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1328                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1329                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1330                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1331                          }                                                                                         </span>
<span  style="">1332                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1333                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1333                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSysðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1334                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1335                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1336                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1337                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1338                  }, 100);                                                                                          </span>
<span  style="">1339                                                                                                                    </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1340              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1341                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1342                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1343              }                                                                                                     </span>
<span  style="">1344                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1345              fragment.updateMarkdownView();                                                                        </span>
<span  style="">1346                                                                                                                    </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1347              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span  style="">1348                                                                                                                    </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1349              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1350              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1352      }                                                                                                             </span>
<span  style="">1353                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1354      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1355          WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                           </span>
<span  style="">1356                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1357          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1358              weakFragment = new WeakReference&lt;&gt;(fragment);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1359          }                                                                                                         </span>
<span  style="">1360                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1361          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1362          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1363              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1364              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1365                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1366              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1367              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1368          }                                                                                                         </span>
<span  style="">1369                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1370          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1371          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1372              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1373              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1374                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1375                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1376                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1377              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1378          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379      }                                                                                                             </span>
<span  style="">1380                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1381      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1382          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1383              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1384          }                                                                                                         </span>
<span  style="">1385                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1386          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1387              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1389      }                                                                                                             </span>
<span  style="">1390                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1391      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1392      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1393          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1394              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1395          }                                                                                                         </span>
<span  style="">1396                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1397          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1398          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1399              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1400              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1401          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1402              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1403              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1404                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1405                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1406                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1407              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1408              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1409              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1410          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1411      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1412  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8328120990598135231" onmouseenter="enter('8328120990598135231');" onmouseout="out('8328120990598135231');" style="">   1  package com.automattic.simplenote;                                                                                </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="-1500972560159629307" onmouseenter="enter('-1500972560159629307');" onmouseout="out('-1500972560159629307');" style="">   4  import android.content.ClipData;                                                                                  </span>
<span class="-1154037727824652611" onmouseenter="enter('-1154037727824652611');" onmouseout="out('-1154037727824652611');" style="">   5  import android.content.ClipboardManager;                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">   8  import android.database.Cursor;                                                                                   </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">   9  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">  10  import android.net.Uri;                                                                                           </span>
<span class="955674827050616793" onmouseenter="enter('955674827050616793');" onmouseout="out('955674827050616793');" style="">  11  import android.os.AsyncTask;                                                                                      </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  12  import android.os.Bundle;                                                                                         </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  13  import android.os.Handler;                                                                                        </span>
<span class="4177373235046048356" onmouseenter="enter('4177373235046048356');" onmouseout="out('4177373235046048356');" style="">  14  import android.text.Editable;                                                                                     </span>
<span class="-578015270574978569" onmouseenter="enter('-578015270574978569');" onmouseout="out('-578015270574978569');" style="">  15  import android.text.Layout;                                                                                       </span>
<span class="7731806713123176572" onmouseenter="enter('7731806713123176572');" onmouseout="out('7731806713123176572');" style="">  16  import android.text.Spanned;                                                                                      </span>
<span class="4038639591141008331" onmouseenter="enter('4038639591141008331');" onmouseout="out('4038639591141008331');" style="">  17  import android.text.TextWatcher;                                                                                  </span>
<span class="2374973474356501783" onmouseenter="enter('2374973474356501783');" onmouseout="out('2374973474356501783');" style="">  18  import android.text.style.RelativeSizeSpan;                                                                       </span>
<span class="-1165963660754430642" onmouseenter="enter('-1165963660754430642');" onmouseout="out('-1165963660754430642');" style="">  19  import android.text.style.URLSpan;                                                                                </span>
<span class="-3804250137032727253" onmouseenter="enter('-3804250137032727253');" onmouseout="out('-3804250137032727253');" style="">  20  import android.text.util.Linkify;                                                                                 </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  21  import android.util.TypedValue;                                                                                   </span>
<span class="8553241717595905778" onmouseenter="enter('8553241717595905778');" onmouseout="out('8553241717595905778');" style="">  22  import android.view.LayoutInflater;                                                                               </span>
<span class="-603490076395619238" onmouseenter="enter('-603490076395619238');" onmouseout="out('-603490076395619238');" style="">  23  import android.view.Menu;                                                                                         </span>
<span class="-434306062495579804" onmouseenter="enter('-434306062495579804');" onmouseout="out('-434306062495579804');" style="">  24  import android.view.MenuInflater;                                                                                 </span>
<span class="6391706839654240930" onmouseenter="enter('6391706839654240930');" onmouseout="out('6391706839654240930');" style="">  25  import android.view.MenuItem;                                                                                     </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  26  import android.view.View;                                                                                         </span>
<span class="7569314084591619834" onmouseenter="enter('7569314084591619834');" onmouseout="out('7569314084591619834');" style="">  27  import android.view.ViewGroup;                                                                                    </span>
<span class="-4985651548362660777" onmouseenter="enter('-4985651548362660777');" onmouseout="out('-4985651548362660777');" style="">  28  import android.view.ViewTreeObserver;                                                                             </span>
<span class="-3117363671899680167" onmouseenter="enter('-3117363671899680167');" onmouseout="out('-3117363671899680167');" style="">  29  import android.view.inputmethod.InputMethodManager;                                                               </span>
<span class="2723690893492346945" onmouseenter="enter('2723690893492346945');" onmouseout="out('2723690893492346945');" style="">  30  import android.webkit.WebView;                                                                                    </span>
<span class="5634491474902588492" onmouseenter="enter('5634491474902588492');" onmouseout="out('5634491474902588492');" style="">  31  import android.widget.CursorAdapter;                                                                              </span>
<span class="5987800420235491716" onmouseenter="enter('5987800420235491716');" onmouseout="out('5987800420235491716');" style="">  32  import android.widget.LinearLayout;                                                                               </span>
<span class="6117110559667671300" onmouseenter="enter('6117110559667671300');" onmouseout="out('6117110559667671300');" style="">  33  import android.widget.ScrollView;                                                                                 </span>
<span class="-4961528671422147708" onmouseenter="enter('-4961528671422147708');" onmouseout="out('-4961528671422147708');" style="">  34  import android.widget.TextView;                                                                                   </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  35  import android.widget.Toast;                                                                                      </span>
<span  style="">  36                                                                                                                    </span>
<span class="6963272077887521702" onmouseenter="enter('6963272077887521702');" onmouseout="out('6963272077887521702');" style="">  37  import androidx.annotation.NonNull;                                                                               </span>
<span class="8057892732248099365" onmouseenter="enter('8057892732248099365');" onmouseout="out('8057892732248099365');" style="">  38  import androidx.appcompat.app.AppCompatActivity;                                                                  </span>
<span class="2035494855708115696" onmouseenter="enter('2035494855708115696');" onmouseout="out('2035494855708115696');" style="">  39  import androidx.appcompat.view.ActionMode;                                                                        </span>
<span class="-767584428700722881" onmouseenter="enter('-767584428700722881');" onmouseout="out('-767584428700722881');" style="">  40  import androidx.core.widget.NestedScrollView;                                                                     </span>
<span class="2878002094531064439" onmouseenter="enter('2878002094531064439');" onmouseout="out('2878002094531064439');" style="">  41  import androidx.fragment.app.Fragment;                                                                            </span>
<span class="-6950145472733447700" onmouseenter="enter('-6950145472733447700');" onmouseout="out('-6950145472733447700');" style="">  42  import androidx.fragment.app.FragmentTransaction;                                                                 </span>
<span  style="">  43                                                                                                                    </span>
<span class="-155835000323929258" onmouseenter="enter('-155835000323929258');" onmouseout="out('-155835000323929258');" style="">  44  import com.automattic.simplenote.analytics.AnalyticsTracker;                                                      </span>
<span class="9061368408436996655" onmouseenter="enter('9061368408436996655');" onmouseout="out('9061368408436996655');" style="">  45  import com.automattic.simplenote.models.Note;                                                                     </span>
<span class="107771998888903823" onmouseenter="enter('107771998888903823');" onmouseout="out('107771998888903823');" style="">  46  import com.automattic.simplenote.models.Tag;                                                                      </span>
<span class="-4380838228434146133" onmouseenter="enter('-4380838228434146133');" onmouseout="out('-4380838228434146133');" style="">  47  import com.automattic.simplenote.utils.AutoBullet;                                                                </span>
<span class="8229771960302052711" onmouseenter="enter('8229771960302052711');" onmouseout="out('8229771960302052711');" style="">  48  import com.automattic.simplenote.utils.ContextUtils;                                                              </span>
<span class="8577850632926167445" onmouseenter="enter('8577850632926167445');" onmouseout="out('8577850632926167445');" style="">  49  import com.automattic.simplenote.utils.DisplayUtils;                                                              </span>
<span class="930019215389101465" onmouseenter="enter('930019215389101465');" onmouseout="out('930019215389101465');" style="">  50  import com.automattic.simplenote.utils.DrawableUtils;                                                             </span>
<span class="1327521140651609704" onmouseenter="enter('1327521140651609704');" onmouseout="out('1327521140651609704');" style="">  51  import com.automattic.simplenote.utils.MatchOffsetHighlighter;                                                    </span>
<span class="2290458949892536112" onmouseenter="enter('2290458949892536112');" onmouseout="out('2290458949892536112');" style="">  52  import com.automattic.simplenote.utils.NoteUtils;                                                                 </span>
<span class="-7136497821822559876" onmouseenter="enter('-7136497821822559876');" onmouseout="out('-7136497821822559876');" style="">  53  import com.automattic.simplenote.utils.PrefUtils;                                                                 </span>
<span class="2537926396801226048" onmouseenter="enter('2537926396801226048');" onmouseout="out('2537926396801226048');" style="">  54  import com.automattic.simplenote.utils.SimplenoteLinkify;                                                         </span>
<span class="-42292328951391685" onmouseenter="enter('-42292328951391685');" onmouseout="out('-42292328951391685');" style="">  55  import com.automattic.simplenote.utils.SimplenoteMovementMethod;                                                  </span>
<span class="-8459919037275852366" onmouseenter="enter('-8459919037275852366');" onmouseout="out('-8459919037275852366');" style="">  56  import com.automattic.simplenote.utils.SnackbarUtils;                                                             </span>
<span class="13513923158165555" onmouseenter="enter('13513923158165555');" onmouseout="out('13513923158165555');" style="">  57  import com.automattic.simplenote.utils.SpaceTokenizer;                                                            </span>
<span class="-4652171765784917488" onmouseenter="enter('-4652171765784917488');" onmouseout="out('-4652171765784917488');" style="">  58  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;                                             </span>
<span class="451633977271230846" onmouseenter="enter('451633977271230846');" onmouseout="out('451633977271230846');" style="">  59  import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;                          </span>
<span class="3055903766206676561" onmouseenter="enter('3055903766206676561');" onmouseout="out('3055903766206676561');" style="">  60  import com.automattic.simplenote.utils.TextHighlighter;                                                           </span>
<span class="7305000128845659611" onmouseenter="enter('7305000128845659611');" onmouseout="out('7305000128845659611');" style="">  61  import com.automattic.simplenote.utils.ThemeUtils;                                                                </span>
<span class="-3457858113236631039" onmouseenter="enter('-3457858113236631039');" onmouseout="out('-3457858113236631039');" style="">  62  import com.automattic.simplenote.utils.WidgetUtils;                                                               </span>
<span class="4834384566534786428" onmouseenter="enter('4834384566534786428');" onmouseout="out('4834384566534786428');" style="">  63  import com.automattic.simplenote.widgets.SimplenoteEditText;                                                      </span>
<span class="-6749865676367010343" onmouseenter="enter('-6749865676367010343');" onmouseout="out('-6749865676367010343');" style="">  64  import com.google.android.material.snackbar.Snackbar;                                                             </span>
<span class="-8170925370861558125" onmouseenter="enter('-8170925370861558125');" onmouseout="out('-8170925370861558125');" style="">  65  import com.simperium.client.Bucket;                                                                               </span>
<span class="-8454203534157102839" onmouseenter="enter('-8454203534157102839');" onmouseout="out('-8454203534157102839');" style="">  66  import com.simperium.client.BucketObjectMissingException;                                                         </span>
<span class="-6020507013779766735" onmouseenter="enter('-6020507013779766735');" onmouseout="out('-6020507013779766735');" style="">  67  import com.simperium.client.Query;                                                                                </span>
<span  style="">  68                                                                                                                    </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  69  import java.lang.ref.WeakReference;                                                                               </span>
<span class="1562735530241225598" onmouseenter="enter('1562735530241225598');" onmouseout="out('1562735530241225598');" style="">  70  import java.util.Calendar;                                                                                        </span>
<span  style="">  71                                                                                                                    </span>
<span class="-5596461229958448202" onmouseenter="enter('-5596461229958448202');" onmouseout="out('-5596461229958448202');" style="">  72  public class NoteEditorFragment extends Fragment implements Bucket.Listener&lt;Note&gt;,                                </span>
<span class="-9099249676109797171" onmouseenter="enter('-9099249676109797171');" onmouseout="out('-9099249676109797171');" style="">  73          TextWatcher, OnTagAddedListener, View.OnFocusChangeListener,                                              </span>
<span class="-4114387936964500842" onmouseenter="enter('-4114387936964500842');" onmouseout="out('-4114387936964500842');" style="">  74          SimplenoteEditText.OnSelectionChangedListener,                                                            </span>
<span class="-5510788947576290679" onmouseenter="enter('-5510788947576290679');" onmouseout="out('-5510788947576290679');" style="">  75          ShareBottomSheetDialog.ShareSheetListener,                                                                </span>
<span class="2293972252045109195" onmouseenter="enter('2293972252045109195');" onmouseout="out('2293972252045109195');" style="">  76          HistoryBottomSheetDialog.HistorySheetListener,                                                            </span>
<span class="715837164460589842" onmouseenter="enter('715837164460589842');" onmouseout="out('715837164460589842');" style="">  77          InfoBottomSheetDialog.InfoSheetListener,                                                                  </span>
<span class="-712538187674189072" onmouseenter="enter('-712538187674189072');" onmouseout="out('-712538187674189072');" style="">  78          SimplenoteEditText.OnCheckboxToggledListener {                                                            </span>
<span  style="">  79                                                                                                                    </span>
<span class="-4619625032881090052" onmouseenter="enter('-4619625032881090052');" onmouseout="out('-4619625032881090052');" style="">  80      public static final String ARG_ITEM_ID = &quot;item_id&quot;;                                                           </span>
<span class="-7299684920632401552" onmouseenter="enter('-7299684920632401552');" onmouseout="out('-7299684920632401552');" style="">  81      public static final String ARG_NEW_NOTE = &quot;new_note&quot;;                                                         </span>
<span class="5570942911396170891" onmouseenter="enter('5570942911396170891');" onmouseout="out('5570942911396170891');" style="">  82      public static final String ARG_MATCH_OFFSETS = &quot;match_offsets&quot;;                                               </span>
<span class="8145563106929735928" onmouseenter="enter('8145563106929735928');" onmouseout="out('8145563106929735928');" style="">  83      public static final String ARG_MARKDOWN_ENABLED = &quot;markdown_enabled&quot;;                                         </span>
<span class="-9204037548779502592" onmouseenter="enter('-9204037548779502592');" onmouseout="out('-9204037548779502592');" style="">  84      public static final String ARG_PREVIEW_ENABLED = &quot;preview_enabled&quot;;                                           </span>
<span class="-4900097812038151447" onmouseenter="enter('-4900097812038151447');" onmouseout="out('-4900097812038151447');" style="">  85      private static final String STATE_NOTE_ID = &quot;state_note_id&quot;;                                                  </span>
<span class="8491452362607628076" onmouseenter="enter('8491452362607628076');" onmouseout="out('8491452362607628076');" style="">  86      private static final int AUTOSAVE_DELAY_MILLIS = 2000;                                                        </span>
<span class="6474488624255872222" onmouseenter="enter('6474488624255872222');" onmouseout="out('6474488624255872222');" style="">  87      private static final int MAX_REVISIONS = 30;                                                                  </span>
<span class="2597021995687752472" onmouseenter="enter('2597021995687752472');" onmouseout="out('2597021995687752472');" style="">  88      private static final int PUBLISH_TIMEOUT = 20000;                                                             </span>
<span class="3616229628179044566" onmouseenter="enter('3616229628179044566');" onmouseout="out('3616229628179044566');" style="">  89      private static final int HISTORY_TIMEOUT = 10000;                                                             </span>
<span class="-6846870049312317979" onmouseenter="enter('-6846870049312317979');" onmouseout="out('-6846870049312317979');" style="">  90      private Note mNote;                                                                                           </span>
<span class="-567099590261614492" onmouseenter="enter('-567099590261614492');" onmouseout="out('-567099590261614492');" style="">  91      private final Runnable mAutoSaveRunnable = new Runnable() {                                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  92          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">  93          public void run() {                                                                                       </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style="">  94              saveAndSyncNote();                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style="">  96      };                                                                                                            </span>
<span class="-7913886194286774922" onmouseenter="enter('-7913886194286774922');" onmouseout="out('-7913886194286774922');" style="">  97      private Bucket&lt;Note&gt; mNotesBucket;                                                                            </span>
<span class="335650161029573145" onmouseenter="enter('335650161029573145');" onmouseout="out('335650161029573145');" style="">  98      private View mRootView;                                                                                       </span>
<span class="6580801006778009663" onmouseenter="enter('6580801006778009663');" onmouseout="out('6580801006778009663');" style="">  99      private SimplenoteEditText mContentEditText;                                                                  </span>
<span class="-6964345898478101017" onmouseenter="enter('-6964345898478101017');" onmouseout="out('-6964345898478101017');" style=""> 100      private TagsMultiAutoCompleteTextView mTagView;                                                               </span>
<span class="6494121288462075344" onmouseenter="enter('6494121288462075344');" onmouseout="out('6494121288462075344');" style=""> 101      private Handler mAutoSaveHandler;                                                                             </span>
<span class="8783277907965445564" onmouseenter="enter('8783277907965445564');" onmouseout="out('8783277907965445564');" style=""> 102      private Handler mPublishTimeoutHandler;                                                                       </span>
<span class="4217449185156868905" onmouseenter="enter('4217449185156868905');" onmouseout="out('4217449185156868905');" style=""> 103      private Handler mHistoryTimeoutHandler;                                                                       </span>
<span class="-1776320876088405367" onmouseenter="enter('-1776320876088405367');" onmouseout="out('-1776320876088405367');" style=""> 104      private LinearLayout mPlaceholderView;                                                                        </span>
<span class="-5862875858497045082" onmouseenter="enter('-5862875858497045082');" onmouseout="out('-5862875858497045082');" style=""> 105      private CursorAdapter mAutocompleteAdapter;                                                                   </span>
<span class="-7523089573477153489" onmouseenter="enter('-7523089573477153489');" onmouseout="out('-7523089573477153489');" style=""> 106      private boolean mIsLoadingNote;                                                                               </span>
<span class="-721861736726211964" onmouseenter="enter('-721861736726211964');" onmouseout="out('-721861736726211964');" style=""> 107      private boolean mIsMarkdownEnabled;                                                                           </span>
<span class="5667351599274937983" onmouseenter="enter('5667351599274937983');" onmouseout="out('5667351599274937983');" style=""> 108      private boolean mIsPreviewEnabled;                                                                            </span>
<span class="1780690803770096596" onmouseenter="enter('1780690803770096596');" onmouseout="out('1780690803770096596');" style=""> 109      private boolean mShouldScrollToSearchMatch;                                                                   </span>
<span class="7307228847460234411" onmouseenter="enter('7307228847460234411');" onmouseout="out('7307228847460234411');" style=""> 110      private ActionMode mActionMode;                                                                               </span>
<span class="-1934738222867341331" onmouseenter="enter('-1934738222867341331');" onmouseout="out('-1934738222867341331');" style=""> 111      private MenuItem mViewLinkMenuItem;                                                                           </span>
<span class="-3624836155172024592" onmouseenter="enter('-3624836155172024592');" onmouseout="out('-3624836155172024592');" style=""> 112      private String mLinkUrl;                                                                                      </span>
<span class="-680149036339568713" onmouseenter="enter('-680149036339568713');" onmouseout="out('-680149036339568713');" style=""> 113      private String mLinkText;                                                                                     </span>
<span class="-8355060532383088001" onmouseenter="enter('-8355060532383088001');" onmouseout="out('-8355060532383088001');" style=""> 114      private MatchOffsetHighlighter mHighlighter;                                                                  </span>
<span class="-6925628041030715987" onmouseenter="enter('-6925628041030715987');" onmouseout="out('-6925628041030715987');" style=""> 115      private Drawable mEmailIcon, mWebIcon, mMapIcon, mCallIcon;                                                   </span>
<span class="-7542236593744276396" onmouseenter="enter('-7542236593744276396');" onmouseout="out('-7542236593744276396');" style=""> 116      private MatchOffsetHighlighter.SpanFactory mMatchHighlighter;                                                 </span>
<span class="2689815831275839045" onmouseenter="enter('2689815831275839045');" onmouseout="out('2689815831275839045');" style=""> 117      private String mMatchOffsets;                                                                                 </span>
<span class="-7790101837861097441" onmouseenter="enter('-7790101837861097441');" onmouseout="out('-7790101837861097441');" style=""> 118      private int mCurrentCursorPosition;                                                                           </span>
<span class="6178043190004357016" onmouseenter="enter('6178043190004357016');" onmouseout="out('6178043190004357016');" style=""> 119      private HistoryBottomSheetDialog mHistoryBottomSheet;                                                         </span>
<span class="-595864044689580029" onmouseenter="enter('-595864044689580029');" onmouseout="out('-595864044689580029');" style=""> 120      // Hides the history bottom sheet if no revisions are loaded                                                  </span>
<span class="9136224915231079842" onmouseenter="enter('9136224915231079842');" onmouseout="out('9136224915231079842');" style=""> 121      private final Runnable mHistoryTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 122          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 123          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 124              if (!isAdded()) return;                                                                               </span>



<span  style=""> 125                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 126              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 128                  public void run() {                                                                               </span>
<span  style=""> 129                                                                                                                    </span>
<span class="6844751493350163385" onmouseenter="enter('6844751493350163385');" onmouseout="out('6844751493350163385');" style=""> 130                      if (mHistoryBottomSheet.isShowing() &amp;&amp; !mHistoryBottomSheet.isHistoryLoaded()) {              </span>

<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 131                          mHistoryBottomSheet.dismiss();                                                            </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 132                          Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 135              });                                                                                                   </span>
<span  style=""> 136                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 138      };                                                                                                            </span>
<span class="-7982825583780013979" onmouseenter="enter('-7982825583780013979');" onmouseout="out('-7982825583780013979');" style=""> 139      private InfoBottomSheetDialog mInfoBottomSheet;                                                               </span>
<span class="3825770423127948234" onmouseenter="enter('3825770423127948234');" onmouseout="out('3825770423127948234');" style=""> 140      private ShareBottomSheetDialog mShareBottomSheet;                                                             </span>
<span class="9084056993766846780" onmouseenter="enter('9084056993766846780');" onmouseout="out('9084056993766846780');" style=""> 141      // Contextual action bar for dealing with links                                                               </span>
<span class="7674077006773948876" onmouseenter="enter('7674077006773948876');" onmouseout="out('7674077006773948876');" style=""> 142      private final ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {                           </span>
<span  style=""> 143                                                                                                                    </span>
<span class="-5830922032047880245" onmouseenter="enter('-5830922032047880245');" onmouseout="out('-5830922032047880245');" style=""> 144          // Called when the action mode is created; startActionMode() was called                                   </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 145          @Override                                                                                                 </span>
<span class="6869646826473679297" onmouseenter="enter('6869646826473679297');" onmouseout="out('6869646826473679297');" style=""> 146          public boolean onCreateActionMode(ActionMode mode, Menu menu) {                                           </span>
<span class="-5328486553851934265" onmouseenter="enter('-5328486553851934265');" onmouseout="out('-5328486553851934265');" style=""> 147              // Inflate a menu resource providing context menu items                                               </span>
<span class="8164139660214751060" onmouseenter="enter('8164139660214751060');" onmouseout="out('8164139660214751060');" style=""> 148              MenuInflater inflater = mode.getMenuInflater();                                                       </span>

<span class="-1400051225095864167" onmouseenter="enter('-1400051225095864167');" onmouseout="out('-1400051225095864167');" style=""> 149              if (inflater != null) {                                                                               </span>
<span class="6552624979414277895" onmouseenter="enter('6552624979414277895');" onmouseout="out('6552624979414277895');" style=""> 150                  inflater.inflate(R.menu.view_link, menu);                                                         </span>
<span class="2045169504868185532" onmouseenter="enter('2045169504868185532');" onmouseout="out('2045169504868185532');" style=""> 151                  mViewLinkMenuItem = menu.findItem(R.id.menu_view_link);                                           </span>
<span class="4190298810187820509" onmouseenter="enter('4190298810187820509');" onmouseout="out('4190298810187820509');" style=""> 152                  mode.setTitle(getString(R.string.link));                                                          </span>
<span class="-2927630225150463376" onmouseenter="enter('-2927630225150463376');" onmouseout="out('-2927630225150463376');" style=""> 153                  mode.setTitleOptionalHint(false);                                                                 </span>
<span  style=""> 154                                                                                                                    </span>
<span class="817684663542365996" onmouseenter="enter('817684663542365996');" onmouseout="out('817684663542365996');" style=""> 155                  DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionModeTextColor);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156              }                                                                                                     </span>
<span  style=""> 157                                                                                                                    </span>
<span class="397900323864486173" onmouseenter="enter('397900323864486173');" onmouseout="out('397900323864486173');" style=""><abbr title=" 158              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.background_dark;"> 158              int colorResId = ThemeUtils.isLightTheme(requireContext()) ? R.color.background_light : R.color.backgrðŸ”µ</abbr></span>
<span class="-1803795242967224864" onmouseenter="enter('-1803795242967224864');" onmouseout="out('-1803795242967224864');" style=""><abbr title=" 159              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().getTheme()));"> 159              requireActivity().getWindow().setStatusBarColor(getResources().getColor(colorResId, requireActivity().ðŸ”µ</abbr></span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 160              return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161          }                                                                                                         </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-7885162724385925248" onmouseenter="enter('-7885162724385925248');" onmouseout="out('-7885162724385925248');" style=""> 163          // Called each time the action mode is shown. Always called after onCreateActionMode, but                 </span>
<span class="6140331646129020842" onmouseenter="enter('6140331646129020842');" onmouseout="out('6140331646129020842');" style=""> 164          // may be called multiple times if the mode is invalidated.                                               </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165          @Override                                                                                                 </span>
<span class="5392123371105216364" onmouseenter="enter('5392123371105216364');" onmouseout="out('5392123371105216364');" style=""> 166          public boolean onPrepareActionMode(ActionMode mode, Menu menu) {                                          </span>
<span class="9220029862843236189" onmouseenter="enter('9220029862843236189');" onmouseout="out('9220029862843236189');" style=""> 167              return false; // Return false if nothing is done                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168          }                                                                                                         </span>
<span  style=""> 169                                                                                                                    </span>
<span class="-918812678605329556" onmouseenter="enter('-918812678605329556');" onmouseout="out('-918812678605329556');" style=""> 170          // Called when the user selects a contextual menu item                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 171          @Override                                                                                                 </span>
<span class="816131742774025467" onmouseenter="enter('816131742774025467');" onmouseout="out('816131742774025467');" style=""> 172          public boolean onActionItemClicked(ActionMode mode, MenuItem item) {                                      </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 173              switch (item.getItemId()) {                                                                           </span>
<span class="1241487664924667668" onmouseenter="enter('1241487664924667668');" onmouseout="out('1241487664924667668');" style=""> 174                  case R.id.menu_view_link:                                                                         </span>
<span class="2689068574112651560" onmouseenter="enter('2689068574112651560');" onmouseout="out('2689068574112651560');" style=""> 175                      if (mLinkUrl != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 176                          try {                                                                                     </span>
<span class="2961985398395482945" onmouseenter="enter('2961985398395482945');" onmouseout="out('2961985398395482945');" style=""> 177                              Uri uri = Uri.parse(mLinkUrl);                                                        </span>
<span class="-3647274578727323622" onmouseenter="enter('-3647274578727323622');" onmouseout="out('-3647274578727323622');" style=""> 178                              Intent i = new Intent(Intent.ACTION_VIEW);                                            </span>
<span class="3545520342926402522" onmouseenter="enter('3545520342926402522');" onmouseout="out('3545520342926402522');" style=""> 179                              i.setData(uri);                                                                       </span>
<span class="-9112757235036963275" onmouseenter="enter('-9112757235036963275');" onmouseout="out('-9112757235036963275');" style=""> 180                              startActivity(i);                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 181                          } catch (Exception e) {                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 182                              e.printStackTrace();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183                          }                                                                                         </span>
<span class="-5985541663234456921" onmouseenter="enter('-5985541663234456921');" onmouseout="out('-5985541663234456921');" style=""> 184                          mode.finish(); // Action picked, so close the CAB                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 186                      return true;                                                                                  </span>
<span class="1323072004784584241" onmouseenter="enter('1323072004784584241');" onmouseout="out('1323072004784584241');" style=""> 187                  case R.id.menu_copy:                                                                              </span>
<span class="5917848124130151943" onmouseenter="enter('5917848124130151943');" onmouseout="out('5917848124130151943');" style=""> 188                      if (mLinkText != null &amp;&amp; getActivity() != null) {                                             </span>
<span class="-1424276705837864025" onmouseenter="enter('-1424276705837864025');" onmouseout="out('-1424276705837864025');" style=""> 189                          copyToClipboard(mLinkText);                                                               </span>
<span class="3326463149460041317" onmouseenter="enter('3326463149460041317');" onmouseout="out('3326463149460041317');" style=""><abbr title=" 190                          Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();"> 190                          Toast.makeText(requireActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).shoðŸ”µ</abbr></span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 191                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 193                      return true;                                                                                  </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 194                  case R.id.menu_share:                                                                             </span>
<span class="-6928924091126055668" onmouseenter="enter('-6928924091126055668');" onmouseout="out('-6928924091126055668');" style=""> 195                      if (mLinkText != null) {                                                                      </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 196                          showShareSheet();                                                                         </span>
<span class="5768223614092288606" onmouseenter="enter('5768223614092288606');" onmouseout="out('5768223614092288606');" style=""> 197                          mode.finish();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198                      }                                                                                             </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 199                      return true;                                                                                  </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 200                  default:                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 201                      return false;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203          }                                                                                                         </span>
<span  style=""> 204                                                                                                                    </span>
<span class="2525157012953828009" onmouseenter="enter('2525157012953828009');" onmouseout="out('2525157012953828009');" style=""> 205          // Called when the user exits the action mode                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 206          @Override                                                                                                 </span>
<span class="-2232977199830239129" onmouseenter="enter('-2232977199830239129');" onmouseout="out('-2232977199830239129');" style=""> 207          public void onDestroyActionMode(ActionMode mode) {                                                        </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style=""> 208              mActionMode = null;                                                                                   </span>
<span class="-8355266079523609200" onmouseenter="enter('-8355266079523609200');" onmouseout="out('-8355266079523609200');" style=""> 209              new Handler().postDelayed(                                                                            </span>
<span class="4860439059348199630" onmouseenter="enter('4860439059348199630');" onmouseout="out('4860439059348199630');" style=""> 210                  new Runnable() {                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 211                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 212                      public void run() {                                                                           </span>
<span class="-407723737955280968" onmouseenter="enter('-407723737955280968');" onmouseout="out('-407723737955280968');" style=""><abbr title=" 213                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.transparent, requireActivity().getTheme()));"> 213                          requireActivity().getWindow().setStatusBarColor(getResources().getColor(android.R.color.trðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214                      }                                                                                             </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 215                  },                                                                                                </span>
<span class="-4127758747219082725" onmouseenter="enter('-4127758747219082725');" onmouseout="out('-4127758747219082725');" style=""> 216                  requireContext().getResources().getInteger(android.R.integer.config_mediumAnimTime)               </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 217              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 219      };                                                                                                            </span>
<span class="-2321350652617580771" onmouseenter="enter('-2321350652617580771');" onmouseout="out('-2321350652617580771');" style=""> 220      private Snackbar mPublishingSnackbar;                                                                         </span>
<span class="9194238965806529126" onmouseenter="enter('9194238965806529126');" onmouseout="out('9194238965806529126');" style=""> 221      private boolean mIsUndoingPublishing;                                                                         </span>
<span class="1686976550776889109" onmouseenter="enter('1686976550776889109');" onmouseout="out('1686976550776889109');" style=""> 222      // Resets note publish status if Simperium never returned the new publish status                              </span>
<span class="4037453836709826519" onmouseenter="enter('4037453836709826519');" onmouseout="out('4037453836709826519');" style=""> 223      private final Runnable mPublishTimeoutRunnable = new Runnable() {                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 224          @Override                                                                                                 </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 225          public void run() {                                                                                       </span>
<span class="6112154992837754036" onmouseenter="enter('6112154992837754036');" onmouseout="out('6112154992837754036');" style=""> 226              if (!isAdded()) return;                                                                               </span>
<span  style=""> 227                                                                                                                    </span>
<span class="5713980397306524156" onmouseenter="enter('5713980397306524156');" onmouseout="out('5713980397306524156');" style=""> 228              requireActivity().runOnUiThread(new Runnable() {                                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 229                  @Override                                                                                         </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 230                  public void run() {                                                                               </span>
<span  style=""> 231                                                                                                                    </span>
<span class="-6752199236124778161" onmouseenter="enter('-6752199236124778161');" onmouseout="out('-6752199236124778161');" style=""> 232                      mNote.setPublished(!mNote.isPublished());                                                     </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 233                      mNote.save();                                                                                 </span>
<span  style=""> 234                                                                                                                    </span>
<span class="7513447915538188553" onmouseenter="enter('7513447915538188553');" onmouseout="out('7513447915538188553');" style=""> 235                      updatePublishedState(false);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                  }                                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 237              });                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 239      };                                                                                                            </span>
<span class="-3565365231364209094" onmouseenter="enter('-3565365231364209094');" onmouseout="out('-3565365231364209094');" style=""> 240      private NoteMarkdownFragment mNoteMarkdownFragment;                                                           </span>
<span class="8334835640808763040" onmouseenter="enter('8334835640808763040');" onmouseout="out('8334835640808763040');" style=""> 241      private String mCss;                                                                                          </span>
<span class="2417381421481423525" onmouseenter="enter('2417381421481423525');" onmouseout="out('2417381421481423525');" style=""> 242      private WebView mMarkdown;                                                                                    </span>
<span  style=""> 243                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244      /**                                                                                                           </span>
<span class="7780585517980788373" onmouseenter="enter('7780585517980788373');" onmouseout="out('7780585517980788373');" style=""> 245       * Mandatory empty constructor for the fragment manager to instantiate the                                    </span>
<span class="7130060501227883159" onmouseenter="enter('7130060501227883159');" onmouseout="out('7130060501227883159');" style=""> 246       * fragment (e.g. upon screen orientation changes).                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 247       */                                                                                                           </span>
<span class="2055429757813344166" onmouseenter="enter('2055429757813344166');" onmouseout="out('2055429757813344166');" style=""> 248      public NoteEditorFragment() {                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249      }                                                                                                             </span>
<span  style=""> 250                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 251      @Override                                                                                                     </span>
<span class="2351026872416697132" onmouseenter="enter('2351026872416697132');" onmouseout="out('2351026872416697132');" style=""> 252      public void onCreate(Bundle savedInstanceState) {                                                             </span>
<span class="8760898167212384157" onmouseenter="enter('8760898167212384157');" onmouseout="out('8760898167212384157');" style=""> 253          super.onCreate(savedInstanceState);                                                                       </span>
<span class="8327604677557957148" onmouseenter="enter('8327604677557957148');" onmouseout="out('8327604677557957148');" style=""> 254          mInfoBottomSheet = new InfoBottomSheetDialog(this, this);                                                 </span>
<span class="-3585171833526124401" onmouseenter="enter('-3585171833526124401');" onmouseout="out('-3585171833526124401');" style=""> 255          mShareBottomSheet = new ShareBottomSheetDialog(this, this);                                               </span>
<span class="8727018902564285339" onmouseenter="enter('8727018902564285339');" onmouseout="out('8727018902564285339');" style=""> 256          mHistoryBottomSheet = new HistoryBottomSheetDialog(this, this);                                           </span>
<span  style=""> 257                                                                                                                    </span>
<span class="7015772157047139063" onmouseenter="enter('7015772157047139063');" onmouseout="out('7015772157047139063');" style=""> 258          Simplenote currentApp = (Simplenote) requireActivity().getApplication();                                  </span>
<span class="3464165486447434608" onmouseenter="enter('3464165486447434608');" onmouseout="out('3464165486447434608');" style=""> 259          mNotesBucket = currentApp.getNotesBucket();                                                               </span>
<span  style=""> 260                                                                                                                    </span>
<span class="-5396295556438155472" onmouseenter="enter('-5396295556438155472');" onmouseout="out('-5396295556438155472');" style=""><abbr title=" 261          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.actionModeTextColor);"> 261          mCallIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_call_white_24dp, R.attr.aðŸ”µ</abbr></span>
<span class="-533605383562503756" onmouseenter="enter('-533605383562503756');" onmouseout="out('-533605383562503756');" style=""><abbr title=" 262          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attr.actionModeTextColor);"> 262          mEmailIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_email_white_24dp, R.attrðŸ”µ</abbr></span>
<span class="-3792375149191155716" onmouseenter="enter('-3792375149191155716');" onmouseout="out('-3792375149191155716');" style=""><abbr title=" 263          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actionModeTextColor);"> 263          mMapIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_map_white_24dp, R.attr.actðŸ”µ</abbr></span>
<span class="-5459402171693296907" onmouseenter="enter('-5459402171693296907');" onmouseout="out('-5459402171693296907');" style=""><abbr title=" 264          mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actionModeTextColor);"> 264          mWebIcon = DrawableUtils.tintDrawableWithAttribute(getActivity(), R.drawable.ic_web_white_24dp, R.attr.actðŸ”µ</abbr></span>
<span  style=""> 265                                                                                                                    </span>
<span class="-7557436274459739944" onmouseenter="enter('-7557436274459739944');" onmouseout="out('-7557436274459739944');" style=""> 266          mAutoSaveHandler = new Handler();                                                                         </span>
<span class="5311700283685025064" onmouseenter="enter('5311700283685025064');" onmouseout="out('5311700283685025064');" style=""> 267          mPublishTimeoutHandler = new Handler();                                                                   </span>
<span class="-5335062074040604305" onmouseenter="enter('-5335062074040604305');" onmouseout="out('-5335062074040604305');" style=""> 268          mHistoryTimeoutHandler = new Handler();                                                                   </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-7210994120079343670" onmouseenter="enter('-7210994120079343670');" onmouseout="out('-7210994120079343670');" style=""> 270          mMatchHighlighter = new TextHighlighter(requireActivity(),                                                </span>
<span class="5690198221529347900" onmouseenter="enter('5690198221529347900');" onmouseout="out('5690198221529347900');" style=""> 271                  R.attr.editorSearchHighlightForegroundColor, R.attr.editorSearchHighlightBackgroundColor);        </span>
<span class="-2796700407695620291" onmouseenter="enter('-2796700407695620291');" onmouseout="out('-2796700407695620291');" style=""> 272          mAutocompleteAdapter = new CursorAdapter(getActivity(), null, 0x0) {                                      </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 273              @Override                                                                                             </span>
<span class="5082230411214880762" onmouseenter="enter('5082230411214880762');" onmouseout="out('5082230411214880762');" style=""> 274              public View newView(Context context, Cursor cursor, ViewGroup parent) {                               </span>
<span class="-7341849400851650995" onmouseenter="enter('-7341849400851650995');" onmouseout="out('-7341849400851650995');" style=""> 275                  Activity activity = (Activity) context;                                                           </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 276                  if (activity == null) return null;                                                                </span>
<span class="-3314008061858345993" onmouseenter="enter('-3314008061858345993');" onmouseout="out('-3314008061858345993');" style=""> 277                  return activity.getLayoutInflater().inflate(R.layout.tag_autocomplete_list_item, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278              }                                                                                                     </span>
<span  style=""> 279                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 280              @Override                                                                                             </span>
<span class="19024103499623332" onmouseenter="enter('19024103499623332');" onmouseout="out('19024103499623332');" style=""> 281              public void bindView(View view, Context context, Cursor cursor) {                                     </span>
<span class="1800045997788095368" onmouseenter="enter('1800045997788095368');" onmouseout="out('1800045997788095368');" style=""> 282                  TextView textView = (TextView) view;                                                              </span>
<span class="6731261465219202848" onmouseenter="enter('6731261465219202848');" onmouseout="out('6731261465219202848');" style=""> 283                  textView.setText(convertToString(cursor));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284              }                                                                                                     </span>
<span  style=""> 285                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286              @Override                                                                                             </span>
<span class="-8397701079695881614" onmouseenter="enter('-8397701079695881614');" onmouseout="out('-8397701079695881614');" style=""> 287              public CharSequence convertToString(Cursor cursor) {                                                  </span>
<span class="-7149458698442797769" onmouseenter="enter('-7149458698442797769');" onmouseout="out('-7149458698442797769');" style=""> 288                  return cursor.getString(cursor.getColumnIndex(Tag.NAME_PROPERTY));                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289              }                                                                                                     </span>
<span  style=""> 290                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291              @Override                                                                                             </span>
<span class="-6792310640715402890" onmouseenter="enter('-6792310640715402890');" onmouseout="out('-6792310640715402890');" style=""> 292              public Cursor runQueryOnBackgroundThread(CharSequence filter) {                                       </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 293                  Activity activity = getActivity();                                                                </span>
<span class="-4259990117100818562" onmouseenter="enter('-4259990117100818562');" onmouseout="out('-4259990117100818562');" style=""> 294                  if (activity == null) return null;                                                                </span>
<span class="9016693485500608067" onmouseenter="enter('9016693485500608067');" onmouseout="out('9016693485500608067');" style=""> 295                  Simplenote application = (Simplenote) activity.getApplication();                                  </span>
<span class="-288329532637656436" onmouseenter="enter('-288329532637656436');" onmouseout="out('-288329532637656436');" style=""> 296                  Query&lt;Tag&gt; query = application.getTagsBucket().query();                                           </span>
<span class="-1263658484466254954" onmouseenter="enter('-1263658484466254954');" onmouseout="out('-1263658484466254954');" style=""> 297                  // make the tag name available to the cursor                                                      </span>
<span class="5748018636045801946" onmouseenter="enter('5748018636045801946');" onmouseout="out('5748018636045801946');" style=""> 298                  query.include(Tag.NAME_PROPERTY);                                                                 </span>
<span class="-7615810455976629564" onmouseenter="enter('-7615810455976629564');" onmouseout="out('-7615810455976629564');" style=""> 299                  // sort the tags by their names                                                                   </span>
<span class="5674220988188306819" onmouseenter="enter('5674220988188306819');" onmouseout="out('5674220988188306819');" style=""> 300                  query.order(Tag.NAME_PROPERTY);                                                                   </span>
<span class="8185275162074884971" onmouseenter="enter('8185275162074884971');" onmouseout="out('8185275162074884971');" style=""> 301                  // if there&#x27;s a filter string find only matching tag names                                        </span>
<span class="-2390759895253291766" onmouseenter="enter('-2390759895253291766');" onmouseout="out('-2390759895253291766');" style=""> 302                  if (filter != null)                                                                               </span>
<span class="-8675928632322864405" onmouseenter="enter('-8675928632322864405');" onmouseout="out('-8675928632322864405');" style=""> 303                      query.where(Tag.NAME_PROPERTY, Query.ComparisonType.LIKE, String.format(&quot;%s%%&quot;, filter));     </span>
<span class="8392918727668200780" onmouseenter="enter('8392918727668200780');" onmouseout="out('8392918727668200780');" style=""> 304                  return query.execute();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 306          };                                                                                                        </span>
<span  style=""> 307                                                                                                                    </span>
<span class="-8654033558573025486" onmouseenter="enter('-8654033558573025486');" onmouseout="out('-8654033558573025486');" style=""> 308          WidgetUtils.updateNoteWidgets(getActivity());                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309      }                                                                                                             </span>
<span  style=""> 310                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 311      @Override                                                                                                     </span>
<span class="-3764996828666781026" onmouseenter="enter('-3764996828666781026');" onmouseout="out('-3764996828666781026');" style=""> 312      public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  </span>
<span class="3579130562560764282" onmouseenter="enter('3579130562560764282');" onmouseout="out('3579130562560764282');" style=""> 313          mRootView = inflater.inflate(R.layout.fragment_note_editor, container, false);                            </span>
<span class="-4779369533477417305" onmouseenter="enter('-4779369533477417305');" onmouseout="out('-4779369533477417305');" style=""> 314          mContentEditText = mRootView.findViewById(R.id.note_content);                                             </span>
<span class="-2924083774161461664" onmouseenter="enter('-2924083774161461664');" onmouseout="out('-2924083774161461664');" style=""> 315          mContentEditText.addOnSelectionChangedListener(this);                                                     </span>
<span class="5354424100413888199" onmouseenter="enter('5354424100413888199');" onmouseout="out('5354424100413888199');" style=""> 316          mContentEditText.setOnCheckboxToggledListener(this);                                                      </span>
<span class="4799293943910864448" onmouseenter="enter('4799293943910864448');" onmouseout="out('4799293943910864448');" style=""> 317          mContentEditText.setMovementMethod(SimplenoteMovementMethod.getInstance());                               </span>
<span class="8247847837270423645" onmouseenter="enter('8247847837270423645');" onmouseout="out('8247847837270423645');" style=""> 318          mTagView = mRootView.findViewById(R.id.tag_view);                                                         </span>
<span class="-1710279282572635872" onmouseenter="enter('-1710279282572635872');" onmouseout="out('-1710279282572635872');" style=""> 319          mTagView.setTokenizer(new SpaceTokenizer());                                                              </span>
<span class="-905473657518076069" onmouseenter="enter('-905473657518076069');" onmouseout="out('-905473657518076069');" style=""> 320          mTagView.setOnFocusChangeListener(this);                                                                  </span>
<span class="6080374810605667863" onmouseenter="enter('6080374810605667863');" onmouseout="out('6080374810605667863');" style=""> 321          mHighlighter = new MatchOffsetHighlighter(mMatchHighlighter, mContentEditText);                           </span>
<span  style=""> 322                                                                                                                    </span>
<span class="2946335853320733423" onmouseenter="enter('2946335853320733423');" onmouseout="out('2946335853320733423');" style=""> 323          mPlaceholderView = mRootView.findViewById(R.id.placeholder);                                              </span>
<span class="2767702191472733500" onmouseenter="enter('2767702191472733500');" onmouseout="out('2767702191472733500');" style=""> 324          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote == null) {                                </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 325              mPlaceholderView.setVisibility(View.VISIBLE);                                                         </span>
<span class="-8532471920650411447" onmouseenter="enter('-8532471920650411447');" onmouseout="out('-8532471920650411447');" style=""> 326              requireActivity().invalidateOptionsMenu();                                                            </span>
<span class="-5966136890047999161" onmouseenter="enter('-5966136890047999161');" onmouseout="out('-5966136890047999161');" style=""> 327              mMarkdown = mRootView.findViewById(R.id.markdown);                                                    </span>
<span class="4171573222855619135" onmouseenter="enter('4171573222855619135');" onmouseout="out('4171573222855619135');" style=""> 328              mCss = ThemeUtils.isLightTheme(requireContext())                                                      </span>
<span class="2330250883811648743" onmouseenter="enter('2330250883811648743');" onmouseout="out('2330250883811648743');" style=""> 329                      ? ContextUtils.readCssFile(requireContext(), &quot;light.css&quot;)                                     </span>
<span class="4652247646087549288" onmouseenter="enter('4652247646087549288');" onmouseout="out('4652247646087549288');" style=""> 330                      : ContextUtils.readCssFile(requireContext(), &quot;dark.css&quot;);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331          }                                                                                                         </span>
<span  style=""> 332                                                                                                                    </span>
<span class="-8386469275367064070" onmouseenter="enter('-8386469275367064070');" onmouseout="out('-8386469275367064070');" style=""> 333          mTagView.setAdapter(mAutocompleteAdapter);                                                                </span>
<span  style=""> 334                                                                                                                    </span>
<span class="-512438581163180757" onmouseenter="enter('-512438581163180757');" onmouseout="out('-512438581163180757');" style=""> 335          Bundle arguments = getArguments();                                                                        </span>
<span class="5652609996770636291" onmouseenter="enter('5652609996770636291');" onmouseout="out('5652609996770636291');" style=""> 336          if (arguments != null &amp;&amp; arguments.containsKey(ARG_ITEM_ID)) {                                            </span>
<span class="592168733134676120" onmouseenter="enter('592168733134676120');" onmouseout="out('592168733134676120');" style=""> 337              // Load note if we were passed a note Id                                                              </span>
<span class="-30854459346766710" onmouseenter="enter('-30854459346766710');" onmouseout="out('-30854459346766710');" style=""> 338              String key = arguments.getString(ARG_ITEM_ID);                                                        </span>
<span class="9138949033848867696" onmouseenter="enter('9138949033848867696');" onmouseout="out('9138949033848867696');" style=""> 339              if (arguments.containsKey(ARG_MATCH_OFFSETS)) {                                                       </span>
<span class="-1831707694683903303" onmouseenter="enter('-1831707694683903303');" onmouseout="out('-1831707694683903303');" style=""> 340                  mMatchOffsets = arguments.getString(ARG_MATCH_OFFSETS);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341              }                                                                                                     </span>
<span class="2821548101564163251" onmouseenter="enter('2821548101564163251');" onmouseout="out('2821548101564163251');" style=""> 342              new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);                        </span>
<span class="-1032230432854321396" onmouseenter="enter('-1032230432854321396');" onmouseout="out('-1032230432854321396');" style=""> 343          } else if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; savedInstanceState != null ) {           </span>
<span class="-5586601087309648352" onmouseenter="enter('-5586601087309648352');" onmouseout="out('-5586601087309648352');" style=""> 344              // Restore selected note when in dual pane mode                                                       </span>
<span class="-6627973434382116830" onmouseenter="enter('-6627973434382116830');" onmouseout="out('-6627973434382116830');" style=""> 345              String noteId = savedInstanceState.getString(STATE_NOTE_ID);                                          </span>
<span class="3431348253079949637" onmouseenter="enter('3431348253079949637');" onmouseout="out('3431348253079949637');" style=""> 346              if (noteId != null) {                                                                                 </span>
<span class="6131131744168781054" onmouseenter="enter('6131131744168781054');" onmouseout="out('6131131744168781054');" style=""> 347                  setNote(noteId);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349          }                                                                                                         </span>
<span  style=""> 350                                                                                                                    </span>
<span class="-6084360450426647292" onmouseenter="enter('-6084360450426647292');" onmouseout="out('-6084360450426647292');" style=""> 351          ViewTreeObserver viewTreeObserver = mContentEditText.getViewTreeObserver();                               </span>
<span class="5566036156549578856" onmouseenter="enter('5566036156549578856');" onmouseout="out('5566036156549578856');" style=""> 352          viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 353              @Override                                                                                             </span>
<span class="7412300164717447449" onmouseenter="enter('7412300164717447449');" onmouseout="out('7412300164717447449');" style=""> 354              public void onGlobalLayout() {                                                                        </span>
<span class="-1303582393563450897" onmouseenter="enter('-1303582393563450897');" onmouseout="out('-1303582393563450897');" style=""> 355                  // If a note was loaded with search matches, scroll to the first match in the editor              </span>
<span class="-6404251855291734375" onmouseenter="enter('-6404251855291734375');" onmouseout="out('-6404251855291734375');" style=""> 356                  if (mShouldScrollToSearchMatch &amp;&amp; mMatchOffsets != null) {                                        </span>
<span class="5514287417242355685" onmouseenter="enter('5514287417242355685');" onmouseout="out('5514287417242355685');" style=""> 357                      if (!isAdded()) {                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 358                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359                      }                                                                                             </span>
<span  style=""> 360                                                                                                                    </span>
<span class="-5871446470780506147" onmouseenter="enter('-5871446470780506147');" onmouseout="out('-5871446470780506147');" style=""> 361                      // Get the character location of the first search match                                       </span>
<span class="1328407546550738965" onmouseenter="enter('1328407546550738965');" onmouseout="out('1328407546550738965');" style=""> 362                      int matchLocation = MatchOffsetHighlighter.getFirstMatchLocation(                             </span>
<span class="2395792868164050050" onmouseenter="enter('2395792868164050050');" onmouseout="out('2395792868164050050');" style=""> 363                              mContentEditText.getText(),                                                           </span>
<span class="6736916049865032431" onmouseenter="enter('6736916049865032431');" onmouseout="out('6736916049865032431');" style=""> 364                              mMatchOffsets                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 365                      );                                                                                            </span>
<span class="3937327664514143598" onmouseenter="enter('3937327664514143598');" onmouseout="out('3937327664514143598');" style=""> 366                      if (matchLocation == 0) {                                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 367                          return;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368                      }                                                                                             </span>
<span  style=""> 369                                                                                                                    </span>
<span class="-8411350726545484842" onmouseenter="enter('-8411350726545484842');" onmouseout="out('-8411350726545484842');" style=""> 370                      // Calculate how far to scroll to bring the match into view                                   </span>
<span class="-8088580226996087877" onmouseenter="enter('-8088580226996087877');" onmouseout="out('-8088580226996087877');" style=""> 371                      Layout layout = mContentEditText.getLayout();                                                 </span>
<span class="4818857677317424270" onmouseenter="enter('4818857677317424270');" onmouseout="out('4818857677317424270');" style=""> 372                      int lineTop = layout.getLineTop(layout.getLineForOffset(matchLocation));                      </span>
<span  style=""> 373                                                                                                                    </span>
<span class="5020302440416452113" onmouseenter="enter('5020302440416452113');" onmouseout="out('5020302440416452113');" style=""> 374                      // We use different scroll views in the root of the layout files... yuck.                     </span>
<span class="-2313309201646667285" onmouseenter="enter('-2313309201646667285');" onmouseout="out('-2313309201646667285');" style=""> 375                      // So we have to cast appropriately to do a smooth scroll                                     </span>
<span class="4785183779479911307" onmouseenter="enter('4785183779479911307');" onmouseout="out('4785183779479911307');" style=""> 376                      if (mRootView instanceof NestedScrollView) {                                                  </span>
<span class="-2957331341634255052" onmouseenter="enter('-2957331341634255052');" onmouseout="out('-2957331341634255052');" style=""> 377                          ((NestedScrollView)mRootView).smoothScrollTo(0, lineTop);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 378                      } else {                                                                                      </span>
<span class="-2547502694507835703" onmouseenter="enter('-2547502694507835703');" onmouseout="out('-2547502694507835703');" style=""> 379                          ((ScrollView)mRootView).smoothScrollTo(0, lineTop);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                      }                                                                                             </span>
<span  style=""> 381                                                                                                                    </span>
<span class="1093252497226085042" onmouseenter="enter('1093252497226085042');" onmouseout="out('1093252497226085042');" style=""> 382                      mShouldScrollToSearchMatch = false;                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384              }                                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style=""> 385          });                                                                                                       </span>
<span class="7823602444079418117" onmouseenter="enter('7823602444079418117');" onmouseout="out('7823602444079418117');" style=""> 386          setHasOptionsMenu(true);                                                                                  </span>
<span class="-6258722083869792010" onmouseenter="enter('-6258722083869792010');" onmouseout="out('-6258722083869792010');" style=""> 387          return mRootView;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388      }                                                                                                             </span>
<span  style=""> 389                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 390      @Override                                                                                                     </span>
<span class="3212580988936830895" onmouseenter="enter('3212580988936830895');" onmouseout="out('3212580988936830895');" style=""> 391      public void onResume() {                                                                                      </span>
<span class="-6840488528374549322" onmouseenter="enter('-6840488528374549322');" onmouseout="out('-6840488528374549322');" style=""> 392          super.onResume();                                                                                         </span>
<span class="-295722270474880574" onmouseenter="enter('-295722270474880574');" onmouseout="out('-295722270474880574');" style=""> 393          mNotesBucket.start();                                                                                     </span>
<span class="8320491026461558488" onmouseenter="enter('8320491026461558488');" onmouseout="out('8320491026461558488');" style=""> 394          mNotesBucket.addListener(this);                                                                           </span>
<span  style=""> 395                                                                                                                    </span>
<span class="2283760307260285965" onmouseenter="enter('2283760307260285965');" onmouseout="out('2283760307260285965');" style=""> 396          mTagView.setOnTagAddedListener(this);                                                                     </span>
<span  style=""> 397                                                                                                                    </span>
<span class="-8630351771722931094" onmouseenter="enter('-8630351771722931094');" onmouseout="out('-8630351771722931094');" style=""> 398          if (mContentEditText != null) {                                                                           </span>
<span class="-163132820776513136" onmouseenter="enter('-163132820776513136');" onmouseout="out('-163132820776513136');" style=""> 399              mContentEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP, PrefUtils.getFontSize(getActivity()));       </span>
<span  style=""> 400                                                                                                                    </span>
<span class="-9045903618847243853" onmouseenter="enter('-9045903618847243853');" onmouseout="out('-9045903618847243853');" style=""> 401              if (mContentEditText.hasFocus()) {                                                                    </span>
<span class="2378139384018001812" onmouseenter="enter('2378139384018001812');" onmouseout="out('2378139384018001812');" style=""> 402                  showSoftKeyboard();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405      }                                                                                                             </span>
<span  style=""> 406                                                                                                                    </span>
<span class="-7408745136026343325" onmouseenter="enter('-7408745136026343325');" onmouseout="out('-7408745136026343325');" style=""> 407      private void showSoftKeyboard() {                                                                             </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style=""> 408          new Handler().postDelayed(new Runnable() {                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 409              @Override                                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style=""> 410              public void run() {                                                                                   </span>
<span class="-3170312762343778784" onmouseenter="enter('-3170312762343778784');" onmouseout="out('-3170312762343778784');" style=""> 411                  if (getActivity() == null) {                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 412                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                  }                                                                                                 </span>
<span  style=""> 414                                                                                                                    </span>
<span class="6943331498658216188" onmouseenter="enter('6943331498658216188');" onmouseout="out('6943331498658216188');" style=""><abbr title=" 415                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);"> 415                  InputMethodManager inputMethodManager = (InputMethodManager) getActivity().getSystemService(ContexðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style=""> 416                  if (inputMethodManager != null) {                                                                 </span>
<span class="7954226653587797662" onmouseenter="enter('7954226653587797662');" onmouseout="out('7954226653587797662');" style=""> 417                      inputMethodManager.showSoftInput(mContentEditText, 0);                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419              }                                                                                                     </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style=""> 420          }, 100);                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421      }                                                                                                             </span>
<span  style=""> 422                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 423      @Override                                                                                                     </span>
<span class="3108783673391190151" onmouseenter="enter('3108783673391190151');" onmouseout="out('3108783673391190151');" style=""> 424      public void onPause() {                                                                                       </span>
<span class="4626272369407912674" onmouseenter="enter('4626272369407912674');" onmouseout="out('4626272369407912674');" style=""> 425          super.onPause();  // Always call the superclass method first                                              </span>
<span  style=""> 426                                                                                                                    </span>
<span class="-1649552973291504175" onmouseenter="enter('-1649552973291504175');" onmouseout="out('-1649552973291504175');" style=""> 427          mNotesBucket.removeListener(this);                                                                        </span>
<span class="-9222421628383802707" onmouseenter="enter('-9222421628383802707');" onmouseout="out('-9222421628383802707');" style=""> 428          mNotesBucket.stop();                                                                                      </span>
<span  style=""> 429                                                                                                                    </span>
<span class="-4286062678685908757" onmouseenter="enter('-4286062678685908757');" onmouseout="out('-4286062678685908757');" style=""> 430          // Hide soft keyboard if it is showing...                                                                 </span>
<span class="5486984069351007864" onmouseenter="enter('5486984069351007864');" onmouseout="out('5486984069351007864');" style=""> 431          DisplayUtils.hideKeyboard(mContentEditText);                                                              </span>
<span  style=""> 432                                                                                                                    </span>
<span class="-5824468190651999684" onmouseenter="enter('-5824468190651999684');" onmouseout="out('-5824468190651999684');" style=""> 433          mTagView.setOnTagAddedListener(null);                                                                     </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 435          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 436              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437          }                                                                                                         </span>
<span  style=""> 438                                                                                                                    </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style=""> 439          if (mPublishTimeoutHandler != null) {                                                                     </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style=""> 440              mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441          }                                                                                                         </span>
<span  style=""> 442                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 443          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 444              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445          }                                                                                                         </span>
<span  style=""> 446                                                                                                                    </span>
<span class="212618759798230270" onmouseenter="enter('212618759798230270');" onmouseout="out('212618759798230270');" style=""> 447          mHighlighter.stop();                                                                                      </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 448          saveNote();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449      }                                                                                                             </span>
<span  style=""> 450                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 451      @Override                                                                                                     </span>
<span class="5678576148993170097" onmouseenter="enter('5678576148993170097');" onmouseout="out('5678576148993170097');" style=""> 452      public void onSaveInstanceState(@NonNull Bundle outState) {                                                   </span>
<span class="2796648189832219063" onmouseenter="enter('2796648189832219063');" onmouseout="out('2796648189832219063');" style=""> 453          super.onSaveInstanceState(outState);                                                                      </span>
<span  style=""> 454                                                                                                                    </span>
<span class="4471570229761422149" onmouseenter="enter('4471570229761422149');" onmouseout="out('4471570229761422149');" style=""> 455          if (DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNote != null) {                                </span>
<span class="7419969731723984173" onmouseenter="enter('7419969731723984173');" onmouseout="out('7419969731723984173');" style=""> 456              outState.putString(STATE_NOTE_ID, mNote.getSimperiumKey());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458      }                                                                                                             </span>
<span  style=""> 459                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 460      @Override                                                                                                     </span>
<span class="-3104619052446816858" onmouseenter="enter('-3104619052446816858');" onmouseout="out('-3104619052446816858');" style=""> 461      public void onCreateOptionsMenu(@NonNull Menu menu, @NonNull MenuInflater inflater) {                         </span>
<span class="5772887857065615623" onmouseenter="enter('5772887857065615623');" onmouseout="out('5772887857065615623');" style=""> 462          super.onCreateOptionsMenu(menu, inflater);                                                                </span>
<span class="2120616060118433562" onmouseenter="enter('2120616060118433562');" onmouseout="out('2120616060118433562');" style=""> 463          if (!isAdded() || DisplayUtils.isLargeScreenLandscape(getActivity()) &amp;&amp; mNoteMarkdownFragment == null) {  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 464              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465          }                                                                                                         </span>
<span  style=""> 466                                                                                                                    </span>
<span class="-5591635883999644357" onmouseenter="enter('-5591635883999644357');" onmouseout="out('-5591635883999644357');" style=""> 467          inflater.inflate(R.menu.note_editor, menu);                                                               </span>
<span  style=""> 468                                                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 469          if (mNote != null) {                                                                                      </span>
<span class="3411369858029698957" onmouseenter="enter('3411369858029698957');" onmouseout="out('3411369858029698957');" style=""> 470              MenuItem viewPublishedNoteItem = menu.findItem(R.id.menu_view_info);                                  </span>
<span class="-2499359923625437976" onmouseenter="enter('-2499359923625437976');" onmouseout="out('-2499359923625437976');" style=""> 471              viewPublishedNoteItem.setVisible(true);                                                               </span>
<span  style=""> 472                                                                                                                    </span>
<span class="7674470390729338414" onmouseenter="enter('7674470390729338414');" onmouseout="out('7674470390729338414');" style=""> 473              MenuItem trashItem = menu.findItem(R.id.menu_delete).setTitle(R.string.undelete);                     </span>
<span  style=""> 474                                                                                                                    </span>
<span class="5561093706160816776" onmouseenter="enter('5561093706160816776');" onmouseout="out('5561093706160816776');" style=""> 475              if (mNote.isDeleted()) {                                                                              </span>
<span class="2395244797129247894" onmouseenter="enter('2395244797129247894');" onmouseout="out('2395244797129247894');" style=""> 476                  trashItem.setTitle(R.string.undelete);                                                            </span>
<span class="-7281764457900946953" onmouseenter="enter('-7281764457900946953');" onmouseout="out('-7281764457900946953');" style=""> 477                  trashItem.setIcon(R.drawable.ic_trash_restore_24dp);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 478              } else {                                                                                              </span>
<span class="-2747782095374702281" onmouseenter="enter('-2747782095374702281');" onmouseout="out('-2747782095374702281');" style=""> 479                  trashItem.setTitle(R.string.delete);                                                              </span>
<span class="-276308356326274253" onmouseenter="enter('-276308356326274253');" onmouseout="out('-276308356326274253');" style=""> 480                  trashItem.setIcon(R.drawable.ic_trash_24dp);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482          }                                                                                                         </span>
<span class="-1642134856250205608" onmouseenter="enter('-1642134856250205608');" onmouseout="out('-1642134856250205608');" style=""> 483          DrawableUtils.tintMenuWithAttribute(getActivity(), menu, R.attr.actionBarTextColor);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484      }                                                                                                             </span>
<span  style=""> 485                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486      @Override                                                                                                     </span>
<span class="-882410792536471577" onmouseenter="enter('-882410792536471577');" onmouseout="out('-882410792536471577');" style=""> 487      public boolean onOptionsItemSelected(@NonNull MenuItem item) {                                                </span>
<span class="2068182408853392247" onmouseenter="enter('2068182408853392247');" onmouseout="out('2068182408853392247');" style=""> 488          switch (item.getItemId()) {                                                                               </span>
<span class="-3574644309369097250" onmouseenter="enter('-3574644309369097250');" onmouseout="out('-3574644309369097250');" style=""> 489              case R.id.menu_view_info:                                                                             </span>
<span class="1221863391504882204" onmouseenter="enter('1221863391504882204');" onmouseout="out('1221863391504882204');" style=""> 490                  showInfo();                                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 491                  return true;                                                                                      </span>
<span class="-9105547343157360739" onmouseenter="enter('-9105547343157360739');" onmouseout="out('-9105547343157360739');" style=""> 492              case R.id.menu_checklist:                                                                             </span>
<span class="2996686463249748346" onmouseenter="enter('2996686463249748346');" onmouseout="out('2996686463249748346');" style=""> 493                  insertChecklist();                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 494                  return true;                                                                                      </span>
<span class="1329351071337199880" onmouseenter="enter('1329351071337199880');" onmouseout="out('1329351071337199880');" style=""> 495              case R.id.menu_history:                                                                               </span>
<span class="3115064412317025337" onmouseenter="enter('3115064412317025337');" onmouseout="out('3115064412317025337');" style=""> 496                  showHistory();                                                                                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 497                  return true;                                                                                      </span>
<span class="4712317589059090097" onmouseenter="enter('4712317589059090097');" onmouseout="out('4712317589059090097');" style=""> 498              case R.id.menu_share:                                                                                 </span>
<span class="2819818847761455451" onmouseenter="enter('2819818847761455451');" onmouseout="out('2819818847761455451');" style=""> 499                  shareNote();                                                                                      </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 500                  return true;                                                                                      </span>
<span class="6443133868746637198" onmouseenter="enter('6443133868746637198');" onmouseout="out('6443133868746637198');" style=""> 501              case R.id.menu_delete:                                                                                </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 502                  if (!isAdded()) return false;                                                                     </span>
<span class="3639769569139585690" onmouseenter="enter('3639769569139585690');" onmouseout="out('3639769569139585690');" style=""> 503                  deleteNote();                                                                                     </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 504                  return true;                                                                                      </span>
<span class="4538874991877816092" onmouseenter="enter('4538874991877816092');" onmouseout="out('4538874991877816092');" style=""> 505              case android.R.id.home:                                                                               </span>
<span class="-1768387587418247599" onmouseenter="enter('-1768387587418247599');" onmouseout="out('-1768387587418247599');" style=""> 506                  if (!isAdded()) return false;                                                                     </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 507                  requireActivity().finish();                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 508                  return true;                                                                                      </span>
<span class="-8178136317704390296" onmouseenter="enter('-8178136317704390296');" onmouseout="out('-8178136317704390296');" style=""> 509              default:                                                                                              </span>
<span class="-3863613010288750787" onmouseenter="enter('-3863613010288750787');" onmouseout="out('-3863613010288750787');" style=""> 510                  return super.onOptionsItemSelected(item);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512      }                                                                                                             </span>
<span  style=""> 513                                                                                                                    </span>
<span class="-5213288265075350965" onmouseenter="enter('-5213288265075350965');" onmouseout="out('-5213288265075350965');" style=""> 514      private void insertChecklist() {                                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 515          try {                                                                                                     </span>
<span class="5818347684529310934" onmouseenter="enter('5818347684529310934');" onmouseout="out('5818347684529310934');" style=""> 516              mContentEditText.insertChecklist();                                                                   </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 517          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 518              e.printStackTrace();                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 519              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520          }                                                                                                         </span>
<span  style=""> 521                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 522          AnalyticsTracker.track(                                                                                   </span>
<span class="3978226561215059527" onmouseenter="enter('3978226561215059527');" onmouseout="out('3978226561215059527');" style=""> 523                  AnalyticsTracker.Stat.EDITOR_CHECKLIST_INSERTED,                                                  </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 524                  AnalyticsTracker.CATEGORY_NOTE,                                                                   </span>
<span class="3613116414135407305" onmouseenter="enter('3613116414135407305');" onmouseout="out('3613116414135407305');" style=""> 525                  &quot;toolbar_button&quot;                                                                                  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 526          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527      }                                                                                                             </span>
<span  style=""> 528                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 529      @Override                                                                                                     </span>
<span class="-8145186961220354967" onmouseenter="enter('-8145186961220354967');" onmouseout="out('-8145186961220354967');" style=""> 530      public void onCheckboxToggled() {                                                                             </span>
<span class="-2834824800808682286" onmouseenter="enter('-2834824800808682286');" onmouseout="out('-2834824800808682286');" style=""> 531          // Save note (using delay) after toggling a checkbox                                                      </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 532          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 533              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 534              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536      }                                                                                                             </span>
<span  style=""> 537                                                                                                                    </span>
<span class="-7228463698535350052" onmouseenter="enter('-7228463698535350052');" onmouseout="out('-7228463698535350052');" style=""> 538      private void deleteNote() {                                                                                   </span>
<span class="4492119149633458811" onmouseenter="enter('4492119149633458811');" onmouseout="out('4492119149633458811');" style=""> 539          NoteUtils.deleteNote(mNote, getActivity());                                                               </span>
<span class="-1923482990691915278" onmouseenter="enter('-1923482990691915278');" onmouseout="out('-1923482990691915278');" style=""> 540          requireActivity().finish();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 541      }                                                                                                             </span>
<span  style=""> 542                                                                                                                    </span>
<span class="6575837707802621057" onmouseenter="enter('6575837707802621057');" onmouseout="out('6575837707802621057');" style=""> 543      protected void clearMarkdown() {                                                                              </span>
<span class="4379033444024403701" onmouseenter="enter('4379033444024403701');" onmouseout="out('4379033444024403701');" style=""> 544          mMarkdown.loadDataWithBaseURL(&quot;file:///android_asset/&quot;, mCss + &quot;&quot;, &quot;text/html&quot;, &quot;utf-8&quot;, null);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545      }                                                                                                             </span>
<span  style=""> 546                                                                                                                    </span>
<span class="4876877473500420963" onmouseenter="enter('4876877473500420963');" onmouseout="out('4876877473500420963');" style=""> 547      protected void hideMarkdown() {                                                                               </span>
<span class="6362103358672335388" onmouseenter="enter('6362103358672335388');" onmouseout="out('6362103358672335388');" style=""> 548          mMarkdown.setVisibility(View.INVISIBLE);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549      }                                                                                                             </span>
<span  style=""> 550                                                                                                                    </span>
<span class="-3219341107535080329" onmouseenter="enter('-3219341107535080329');" onmouseout="out('-3219341107535080329');" style=""> 551      protected void showMarkdown() {                                                                               </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 552          loadMarkdownData();                                                                                       </span>
<span class="4346698976501095620" onmouseenter="enter('4346698976501095620');" onmouseout="out('4346698976501095620');" style=""> 553          mMarkdown.setVisibility(View.VISIBLE);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554      }                                                                                                             </span>
<span  style=""> 555                                                                                                                    </span>
<span class="-1078763375501980504" onmouseenter="enter('-1078763375501980504');" onmouseout="out('-1078763375501980504');" style=""> 556      private void shareNote() {                                                                                    </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 557          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 558              mContentEditText.clearFocus();                                                                        </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 559              showShareSheet();                                                                                     </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 560              AnalyticsTracker.track(                                                                               </span>
<span class="6281295684819862952" onmouseenter="enter('6281295684819862952');" onmouseout="out('6281295684819862952');" style=""> 561                      AnalyticsTracker.Stat.EDITOR_NOTE_CONTENT_SHARED,                                             </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 562                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="2749115305963564191" onmouseenter="enter('2749115305963564191');" onmouseout="out('2749115305963564191');" style=""> 563                      &quot;action_bar_share_button&quot;                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 564              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566      }                                                                                                             </span>
<span  style=""> 567                                                                                                                    </span>
<span class="-2514128303863836042" onmouseenter="enter('-2514128303863836042');" onmouseout="out('-2514128303863836042');" style=""> 568      private void showHistory() {                                                                                  </span>
<span class="-4132317386083687564" onmouseenter="enter('-4132317386083687564');" onmouseout="out('-4132317386083687564');" style=""> 569          if (mNote != null &amp;&amp; mNote.getVersion() &gt; 1) {                                                            </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 570              mContentEditText.clearFocus();                                                                        </span>
<span class="2792270431942423109" onmouseenter="enter('2792270431942423109');" onmouseout="out('2792270431942423109');" style=""> 571              mHistoryTimeoutHandler.postDelayed(mHistoryTimeoutRunnable, HISTORY_TIMEOUT);                         </span>
<span class="-6120831555230055153" onmouseenter="enter('-6120831555230055153');" onmouseout="out('-6120831555230055153');" style=""> 572              showHistorySheet();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 573          } else {                                                                                                  </span>
<span class="-1949769614201595359" onmouseenter="enter('-1949769614201595359');" onmouseout="out('-1949769614201595359');" style=""> 574              Toast.makeText(getActivity(), R.string.error_history, Toast.LENGTH_LONG).show();                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 575          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576      }                                                                                                             </span>
<span  style=""> 577                                                                                                                    </span>
<span class="5092819144300592935" onmouseenter="enter('5092819144300592935');" onmouseout="out('5092819144300592935');" style=""> 578      private void showInfo() {                                                                                     </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 579          if (mNote != null) {                                                                                      </span>
<span class="-5662939853121386036" onmouseenter="enter('-5662939853121386036');" onmouseout="out('-5662939853121386036');" style=""> 580              mContentEditText.clearFocus();                                                                        </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 581              saveNote();                                                                                           </span>
<span class="-4032532453651560177" onmouseenter="enter('-4032532453651560177');" onmouseout="out('-4032532453651560177');" style=""> 582              showInfoSheet();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 584      }                                                                                                             </span>
<span  style=""> 585                                                                                                                    </span>
<span class="6652831361661587102" onmouseenter="enter('6652831361661587102');" onmouseout="out('6652831361661587102');" style=""> 586      protected void setMarkdownEnabled(boolean enabled) {                                                          </span>
<span class="-9128949734751156553" onmouseenter="enter('-9128949734751156553');" onmouseout="out('-9128949734751156553');" style=""> 587          mIsMarkdownEnabled = enabled;                                                                             </span>
<span  style=""> 588                                                                                                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 589          if (mIsMarkdownEnabled) {                                                                                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style=""> 590              loadMarkdownData();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592      }                                                                                                             </span>
<span  style=""> 593                                                                                                                    </span>
<span class="-2467052403250215415" onmouseenter="enter('-2467052403250215415');" onmouseout="out('-2467052403250215415');" style=""> 594      private void loadMarkdownData() {                                                                             </span>
<span class="-8622237621259523057" onmouseenter="enter('-8622237621259523057');" onmouseout="out('-8622237621259523057');" style=""> 595          String formattedContent = NoteMarkdownFragment.getMarkdownFormattedContent(                               </span>
<span class="-107180190148709194" onmouseenter="enter('-107180190148709194');" onmouseout="out('-107180190148709194');" style=""> 596                  mCss,                                                                                             </span>
<span class="-8019269159529844915" onmouseenter="enter('-8019269159529844915');" onmouseout="out('-8019269159529844915');" style=""> 597                  mContentEditText.getPlainTextContent()                                                            </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 598          );                                                                                                        </span>
<span  style=""> 599                                                                                                                    </span>
<span class="-1179287945165338458" onmouseenter="enter('-1179287945165338458');" onmouseout="out('-1179287945165338458');" style=""> 600          mMarkdown.loadDataWithBaseURL(null, formattedContent, &quot;text/html&quot;, &quot;utf-8&quot;, null);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601      }                                                                                                             </span>
<span  style=""> 602                                                                                                                    </span>
<span class="8195105300246755684" onmouseenter="enter('8195105300246755684');" onmouseout="out('8195105300246755684');" style=""> 603      public void setNote(String noteID, String matchOffsets) {                                                     </span>
<span class="-3646372507164546123" onmouseenter="enter('-3646372507164546123');" onmouseout="out('-3646372507164546123');" style=""> 604          if (mAutoSaveHandler != null)                                                                             </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 605              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span  style=""> 606                                                                                                                    </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 607          mPlaceholderView.setVisibility(View.GONE);                                                                </span>
<span  style=""> 608                                                                                                                    </span>
<span class="-7566474685196195951" onmouseenter="enter('-7566474685196195951');" onmouseout="out('-7566474685196195951');" style=""> 609          if (matchOffsets != null) {                                                                               </span>
<span class="76822769413740338" onmouseenter="enter('76822769413740338');" onmouseout="out('76822769413740338');" style=""> 610              mMatchOffsets = matchOffsets;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 611          } else {                                                                                                  </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 612              mMatchOffsets = null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 613          }                                                                                                         </span>
<span  style=""> 614                                                                                                                    </span>
<span  style=""> 615                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 616          saveNote();                                                                                               </span>
<span  style=""> 617                                                                                                                    </span>
<span class="-2429694576102374369" onmouseenter="enter('-2429694576102374369');" onmouseout="out('-2429694576102374369');" style=""> 618          new LoadNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, noteID);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 619      }                                                                                                             </span>
<span  style=""> 620                                                                                                                    </span>
<span class="2912110192045859171" onmouseenter="enter('2912110192045859171');" onmouseout="out('2912110192045859171');" style=""> 621      private void updateNote(Note updatedNote) {                                                                   </span>
<span class="1053945494720623403" onmouseenter="enter('1053945494720623403');" onmouseout="out('1053945494720623403');" style=""> 622          // update note if network change arrived                                                                  </span>
<span class="8715526790189509580" onmouseenter="enter('8715526790189509580');" onmouseout="out('8715526790189509580');" style=""> 623          mNote = updatedNote;                                                                                      </span>
<span class="-1082183570760036139" onmouseenter="enter('-1082183570760036139');" onmouseout="out('-1082183570760036139');" style=""> 624          refreshContent(true);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625      }                                                                                                             </span>
<span  style=""> 626                                                                                                                    </span>
<span class="-7217331690392611444" onmouseenter="enter('-7217331690392611444');" onmouseout="out('-7217331690392611444');" style=""> 627      private void refreshContent(boolean isNoteUpdate) {                                                           </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style=""> 628          if (mNote != null) {                                                                                      </span>
<span class="9083634457699551889" onmouseenter="enter('9083634457699551889');" onmouseout="out('9083634457699551889');" style=""> 629              // Restore the cursor position if possible.                                                           </span>
<span  style=""> 630                                                                                                                    </span>
<span class="-3899995221280134201" onmouseenter="enter('-3899995221280134201');" onmouseout="out('-3899995221280134201');" style=""><abbr title=" 631              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.getSelectionEnd());"> 631              int cursorPosition = newCursorLocation(mNote.getContent(), getNoteContentString(), mContentEditText.geðŸ”µ</abbr></span>
<span  style=""> 632                                                                                                                    </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 633              mContentEditText.setText(mNote.getContent());                                                         </span>
<span  style=""> 634                                                                                                                    </span>
<span class="2353268123342341866" onmouseenter="enter('2353268123342341866');" onmouseout="out('2353268123342341866');" style=""> 635              if (isNoteUpdate) {                                                                                   </span>
<span class="-1678402685678405938" onmouseenter="enter('-1678402685678405938');" onmouseout="out('-1678402685678405938');" style=""> 636                  // Save the note so any local changes get synced                                                  </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 637                  mNote.save();                                                                                     </span>
<span  style=""> 638                                                                                                                    </span>
<span class="8073598210414419917" onmouseenter="enter('8073598210414419917');" onmouseout="out('8073598210414419917');" style=""> 639                  if (mContentEditText.hasFocus()                                                                   </span>
<span class="1644140795570121810" onmouseenter="enter('1644140795570121810');" onmouseout="out('1644140795570121810');" style=""> 640                          &amp;&amp; cursorPosition != mContentEditText.getSelectionEnd()                                   </span>
<span class="-7547165723183084197" onmouseenter="enter('-7547165723183084197');" onmouseout="out('-7547165723183084197');" style=""> 641                          &amp;&amp; cursorPosition &lt; mContentEditText.getText().length()) {                                </span>
<span class="2096054726124109686" onmouseenter="enter('2096054726124109686');" onmouseout="out('2096054726124109686');" style=""> 642                      mContentEditText.setSelection(cursorPosition);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644              }                                                                                                     </span>
<span  style=""> 645                                                                                                                    </span>
<span class="-2853209662220592982" onmouseenter="enter('-2853209662220592982');" onmouseout="out('-2853209662220592982');" style=""> 646              afterTextChanged(mContentEditText.getText());                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 647              mContentEditText.processChecklists();                                                                 </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 648              updateTagList();                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650      }                                                                                                             </span>
<span  style=""> 651                                                                                                                    </span>
<span class="8641648550056617419" onmouseenter="enter('8641648550056617419');" onmouseout="out('8641648550056617419');" style=""> 652      private void updateTagList() {                                                                                </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 653          Activity activity = getActivity();                                                                        </span>
<span class="5732290278551506292" onmouseenter="enter('5732290278551506292');" onmouseout="out('5732290278551506292');" style=""> 654          if (activity == null) return;                                                                             </span>
<span  style=""> 655                                                                                                                    </span>
<span class="-8748481830530330770" onmouseenter="enter('-8748481830530330770');" onmouseout="out('-8748481830530330770');" style=""> 656          // Populate this note&#x27;s tags in the tagView                                                               </span>
<span class="-3805230291902185366" onmouseenter="enter('-3805230291902185366');" onmouseout="out('-3805230291902185366');" style=""> 657          mTagView.setChips(mNote.getTagString());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658      }                                                                                                             </span>
<span  style=""> 659                                                                                                                    </span>
<span class="4246690832623096875" onmouseenter="enter('4246690832623096875');" onmouseout="out('4246690832623096875');" style=""> 660      private int newCursorLocation(String newText, String oldText, int cursorLocation) {                           </span>
<span class="9215253731107462720" onmouseenter="enter('9215253731107462720');" onmouseout="out('9215253731107462720');" style=""> 661          // Ported from the iOS app :)                                                                             </span>
<span class="746416875920517525" onmouseenter="enter('746416875920517525');" onmouseout="out('746416875920517525');" style=""> 662          // Cases:                                                                                                 </span>
<span class="5532692154938930485" onmouseenter="enter('5532692154938930485');" onmouseout="out('5532692154938930485');" style=""> 663          // 0. All text after cursor (and possibly more) was removed ==&gt; put cursor at end                         </span>
<span class="7679522442911259243" onmouseenter="enter('7679522442911259243');" onmouseout="out('7679522442911259243');" style=""> 664          // 1. Text was added after the cursor ==&gt; no change                                                       </span>
<span class="-7894032746042607578" onmouseenter="enter('-7894032746042607578');" onmouseout="out('-7894032746042607578');" style=""> 665          // 2. Text was added before the cursor ==&gt; location advances                                              </span>
<span class="-2716138352653500367" onmouseenter="enter('-2716138352653500367');" onmouseout="out('-2716138352653500367');" style=""> 666          // 3. Text was removed after the cursor ==&gt; no change                                                     </span>
<span class="-5135222146548415418" onmouseenter="enter('-5135222146548415418');" onmouseout="out('-5135222146548415418');" style=""> 667          // 4. Text was removed before the cursor ==&gt; location retreats                                            </span>
<span class="-7558810491072030947" onmouseenter="enter('-7558810491072030947');" onmouseout="out('-7558810491072030947');" style=""> 668          // 5. Text was added/removed on both sides of the cursor ==&gt; not handled                                  </span>
<span  style=""> 669                                                                                                                    </span>
<span class="6113131008706185379" onmouseenter="enter('6113131008706185379');" onmouseout="out('6113131008706185379');" style=""> 670          cursorLocation = Math.max(cursorLocation, 0);                                                             </span>
<span  style=""> 671                                                                                                                    </span>
<span class="2494517364842646163" onmouseenter="enter('2494517364842646163');" onmouseout="out('2494517364842646163');" style=""> 672          int newCursorLocation = cursorLocation;                                                                   </span>
<span  style=""> 673                                                                                                                    </span>
<span class="5908042661332565473" onmouseenter="enter('5908042661332565473');" onmouseout="out('5908042661332565473');" style=""> 674          int deltaLength = newText.length() - oldText.length();                                                    </span>
<span  style=""> 675                                                                                                                    </span>
<span class="-6285488792309831531" onmouseenter="enter('-6285488792309831531');" onmouseout="out('-6285488792309831531');" style=""> 676          // Case 0                                                                                                 </span>
<span class="-3414403190560247865" onmouseenter="enter('-3414403190560247865');" onmouseout="out('-3414403190560247865');" style=""> 677          if (newText.length() &lt; cursorLocation)                                                                    </span>
<span class="-8431314608568195365" onmouseenter="enter('-8431314608568195365');" onmouseout="out('-8431314608568195365');" style=""> 678              return newText.length();                                                                              </span>
<span  style=""> 679                                                                                                                    </span>
<span class="-8591384106259708496" onmouseenter="enter('-8591384106259708496');" onmouseout="out('-8591384106259708496');" style=""> 680          boolean beforeCursorMatches = false;                                                                      </span>
<span class="-2836779116340504068" onmouseenter="enter('-2836779116340504068');" onmouseout="out('-2836779116340504068');" style=""> 681          boolean afterCursorMatches = false;                                                                       </span>
<span  style=""> 682                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 683          try {                                                                                                     </span>
<span class="535177221055952012" onmouseenter="enter('535177221055952012');" onmouseout="out('535177221055952012');" style=""><abbr title=" 684              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation));"> 684              beforeCursorMatches = oldText.substring(0, cursorLocation).equals(newText.substring(0, cursorLocation)ðŸ”µ</abbr></span>
<span class="4519924127741002604" onmouseenter="enter('4519924127741002604');" onmouseout="out('4519924127741002604');" style=""><abbr title=" 685              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaLength));"> 685              afterCursorMatches = oldText.substring(cursorLocation).equals(newText.substring(cursorLocation + deltaðŸ”µ</abbr></span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 686          } catch (Exception e) {                                                                                   </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style=""> 687              e.printStackTrace();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 688          }                                                                                                         </span>
<span  style=""> 689                                                                                                                    </span>
<span class="-8188204612528872149" onmouseenter="enter('-8188204612528872149');" onmouseout="out('-8188204612528872149');" style=""> 690          // Cases 2 and 4                                                                                          </span>
<span class="6616414540674367624" onmouseenter="enter('6616414540674367624');" onmouseout="out('6616414540674367624');" style=""> 691          if (!beforeCursorMatches &amp;&amp; afterCursorMatches)                                                           </span>
<span class="-4510977125628343614" onmouseenter="enter('-4510977125628343614');" onmouseout="out('-4510977125628343614');" style=""> 692              newCursorLocation += deltaLength;                                                                     </span>
<span  style=""> 693                                                                                                                    </span>
<span class="6867115481875645839" onmouseenter="enter('6867115481875645839');" onmouseout="out('6867115481875645839');" style=""> 694          // Cases 1, 3 and 5 have no change                                                                        </span>
<span class="-7784410696724573059" onmouseenter="enter('-7784410696724573059');" onmouseout="out('-7784410696724573059');" style=""> 695          return newCursorLocation;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 696      }                                                                                                             </span>
<span  style=""> 697                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 698      @Override                                                                                                     </span>
<span class="-2796122281296135687" onmouseenter="enter('-2796122281296135687');" onmouseout="out('-2796122281296135687');" style=""> 699      public void onTagsChanged(String tagString) {                                                                 </span>
<span class="5357705753761437027" onmouseenter="enter('5357705753761437027');" onmouseout="out('5357705753761437027');" style=""> 700          if (mNote == null || !isAdded()) return;                                                                  </span>
<span  style=""> 701                                                                                                                    </span>
<span class="-6077287130430406243" onmouseenter="enter('-6077287130430406243');" onmouseout="out('-6077287130430406243');" style=""> 702          if (mNote.getTagString() != null &amp;&amp; tagString.length() &gt; mNote.getTagString().length()) {                 </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 703              AnalyticsTracker.track(                                                                               </span>
<span class="1828808368866752847" onmouseenter="enter('1828808368866752847');" onmouseout="out('1828808368866752847');" style=""> 704                      AnalyticsTracker.Stat.EDITOR_TAG_ADDED,                                                       </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 705                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7268236347956630095" onmouseenter="enter('7268236347956630095');" onmouseout="out('7268236347956630095');" style=""> 706                      &quot;tag_added_to_note&quot;                                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 707              );                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 708          } else {                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style=""> 709              AnalyticsTracker.track(                                                                               </span>
<span class="-4400569336023765553" onmouseenter="enter('-4400569336023765553');" onmouseout="out('-4400569336023765553');" style=""> 710                      AnalyticsTracker.Stat.EDITOR_TAG_REMOVED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style=""> 711                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7139119425176259618" onmouseenter="enter('7139119425176259618');" onmouseout="out('7139119425176259618');" style=""> 712                      &quot;tag_removed_from_note&quot;                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 713              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714          }                                                                                                         </span>
<span  style=""> 715                                                                                                                    </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style=""> 716          mNote.setTagString(tagString);                                                                            </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style=""> 717          mNote.setModificationDate(Calendar.getInstance());                                                        </span>
<span class="3745953297761259324" onmouseenter="enter('3745953297761259324');" onmouseout="out('3745953297761259324');" style=""> 718          updateTagList();                                                                                          </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style=""> 719          mNote.save();                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 720      }                                                                                                             </span>
<span  style=""> 721                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 722      @Override                                                                                                     </span>
<span class="-5110897291356760413" onmouseenter="enter('-5110897291356760413');" onmouseout="out('-5110897291356760413');" style=""> 723      public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3) {                             </span>
<span class="7490540504293754116" onmouseenter="enter('7490540504293754116');" onmouseout="out('7490540504293754116');" style=""> 724          // Unused                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 725      }                                                                                                             </span>
<span  style=""> 726                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 727      @Override                                                                                                     </span>
<span class="-3169498224421089624" onmouseenter="enter('-3169498224421089624');" onmouseout="out('-3169498224421089624');" style=""> 728      public void afterTextChanged(Editable editable) {                                                             </span>
<span class="4641646211430236365" onmouseenter="enter('4641646211430236365');" onmouseout="out('4641646211430236365');" style=""> 729          attemptAutoList(editable);                                                                                </span>
<span class="7005237563799171506" onmouseenter="enter('7005237563799171506');" onmouseout="out('7005237563799171506');" style=""> 730          setTitleSpan(editable);                                                                                   </span>
<span class="-7817145757567347170" onmouseenter="enter('-7817145757567347170');" onmouseout="out('-7817145757567347170');" style=""> 731          mContentEditText.fixLineSpacing();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732      }                                                                                                             </span>
<span  style=""> 733                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 734      @Override                                                                                                     </span>
<span class="-6004971105578563950" onmouseenter="enter('-6004971105578563950');" onmouseout="out('-6004971105578563950');" style=""> 735      public void onTextChanged(CharSequence charSequence, int start, int before, int count) {                      </span>
<span class="2036741165452809133" onmouseenter="enter('2036741165452809133');" onmouseout="out('2036741165452809133');" style=""> 736          // When text changes, start timer that will fire after AUTOSAVE_DELAY_MILLIS passes                       </span>
<span class="-2149096896161266035" onmouseenter="enter('-2149096896161266035');" onmouseout="out('-2149096896161266035');" style=""> 737          if (mAutoSaveHandler != null) {                                                                           </span>
<span class="-5465787548318672754" onmouseenter="enter('-5465787548318672754');" onmouseout="out('-5465787548318672754');" style=""> 738              mAutoSaveHandler.removeCallbacks(mAutoSaveRunnable);                                                  </span>
<span class="3237260668993885548" onmouseenter="enter('3237260668993885548');" onmouseout="out('3237260668993885548');" style=""> 739              mAutoSaveHandler.postDelayed(mAutoSaveRunnable, AUTOSAVE_DELAY_MILLIS);                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740          }                                                                                                         </span>
<span  style=""> 741                                                                                                                    </span>
<span class="5409551732025834677" onmouseenter="enter('5409551732025834677');" onmouseout="out('5409551732025834677');" style=""> 742          // Remove search highlight spans when note content changes                                                </span>
<span class="5721815250190525804" onmouseenter="enter('5721815250190525804');" onmouseout="out('5721815250190525804');" style=""> 743          if (mMatchOffsets != null) {                                                                              </span>
<span class="-5254682256162211718" onmouseenter="enter('-5254682256162211718');" onmouseout="out('-5254682256162211718');" style=""> 744              mMatchOffsets = null;                                                                                 </span>
<span class="2930846742809702691" onmouseenter="enter('2930846742809702691');" onmouseout="out('2930846742809702691');" style=""> 745              mHighlighter.removeMatches();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 746          }                                                                                                         </span>
<span  style=""> 747                                                                                                                    </span>
<span class="8786270533737299967" onmouseenter="enter('8786270533737299967');" onmouseout="out('8786270533737299967');" style=""> 748          // Temporarily remove the text watcher as we process checklists to prevent callback looping               </span>
<span class="2095720317794995897" onmouseenter="enter('2095720317794995897');" onmouseout="out('2095720317794995897');" style=""> 749          mContentEditText.removeTextChangedListener(this);                                                         </span>
<span class="-5644737892245114659" onmouseenter="enter('-5644737892245114659');" onmouseout="out('-5644737892245114659');" style=""> 750          mContentEditText.processChecklists();                                                                     </span>
<span class="8154880790715077967" onmouseenter="enter('8154880790715077967');" onmouseout="out('8154880790715077967');" style=""> 751          mContentEditText.addTextChangedListener(this);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 752      }                                                                                                             </span>
<span  style=""> 753                                                                                                                    </span>
<span class="6849776144692122373" onmouseenter="enter('6849776144692122373');" onmouseout="out('6849776144692122373');" style=""> 754      private void setTitleSpan(Editable editable) {                                                                </span>
<span class="-1378972571136516392" onmouseenter="enter('-1378972571136516392');" onmouseout="out('-1378972571136516392');" style=""> 755          // Set the note title to be a larger size                                                                 </span>
<span class="3997786880116952820" onmouseenter="enter('3997786880116952820');" onmouseout="out('3997786880116952820');" style=""> 756          // Remove any existing size spans                                                                         </span>
<span class="-3345432347418186953" onmouseenter="enter('-3345432347418186953');" onmouseout="out('-3345432347418186953');" style=""> 757          RelativeSizeSpan[] spans = editable.getSpans(0, editable.length(), RelativeSizeSpan.class);               </span>
<span class="2386014209880419735" onmouseenter="enter('2386014209880419735');" onmouseout="out('2386014209880419735');" style=""> 758          for (RelativeSizeSpan span : spans) {                                                                     </span>
<span class="-4538099325482792099" onmouseenter="enter('-4538099325482792099');" onmouseout="out('-4538099325482792099');" style=""> 759              editable.removeSpan(span);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 760          }                                                                                                         </span>
<span class="-901734861574280266" onmouseenter="enter('-901734861574280266');" onmouseout="out('-901734861574280266');" style=""> 761          int newLinePosition = getNoteContentString().indexOf(&quot;\n&quot;);                                               </span>
<span class="-2560738681101946885" onmouseenter="enter('-2560738681101946885');" onmouseout="out('-2560738681101946885');" style=""> 762          if (newLinePosition == 0)                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 763              return;                                                                                               </span>
<span class="-2775800673646162791" onmouseenter="enter('-2775800673646162791');" onmouseout="out('-2775800673646162791');" style=""><abbr title=" 764          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.length(), Spanned.SPAN_INCLUSIVE_INCLUSIVE);"> 764          editable.setSpan(new RelativeSizeSpan(1.227f), 0, (newLinePosition &gt; 0) ? newLinePosition : editable.lengtðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 765      }                                                                                                             </span>
<span  style=""> 766                                                                                                                    </span>
<span class="8395667075038215241" onmouseenter="enter('8395667075038215241');" onmouseout="out('8395667075038215241');" style=""> 767      private void attemptAutoList(Editable editable) {                                                             </span>
<span class="1630313539519665774" onmouseenter="enter('1630313539519665774');" onmouseout="out('1630313539519665774');" style=""> 768          int oldCursorPosition = mCurrentCursorPosition;                                                           </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 769          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1456162723219098064" onmouseenter="enter('-1456162723219098064');" onmouseout="out('-1456162723219098064');" style=""> 770          AutoBullet.apply(editable, oldCursorPosition, mCurrentCursorPosition);                                    </span>
<span class="2154628209294087333" onmouseenter="enter('2154628209294087333');" onmouseout="out('2154628209294087333');" style=""> 771          mCurrentCursorPosition = mContentEditText.getSelectionStart();                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 772      }                                                                                                             </span>
<span  style=""> 773                                                                                                                    </span>
<span class="-6933317077070028336" onmouseenter="enter('-6933317077070028336');" onmouseout="out('-6933317077070028336');" style=""> 774      private void saveAndSyncNote() {                                                                              </span>
<span class="-6566957513776356959" onmouseenter="enter('-6566957513776356959');" onmouseout="out('-6566957513776356959');" style=""> 775          if (mNote == null) {                                                                                      </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 776              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 777          }                                                                                                         </span>
<span  style=""> 778                                                                                                                    </span>
<span class="16839101082915315" onmouseenter="enter('16839101082915315');" onmouseout="out('16839101082915315');" style=""> 779          new SaveNoteTask(this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 780      }                                                                                                             </span>
<span  style=""> 781                                                                                                                    </span>
<span class="-4564004023547017377" onmouseenter="enter('-4564004023547017377');" onmouseout="out('-4564004023547017377');" style=""> 782      public void setPlaceholderVisible(boolean isVisible) {                                                        </span>
<span class="-6467031518050872536" onmouseenter="enter('-6467031518050872536');" onmouseout="out('-6467031518050872536');" style=""> 783          if (isVisible) {                                                                                          </span>
<span class="1687907534970456445" onmouseenter="enter('1687907534970456445');" onmouseout="out('1687907534970456445');" style=""> 784              mNote = null;                                                                                         </span>
<span class="-3407359796970873837" onmouseenter="enter('-3407359796970873837');" onmouseout="out('-3407359796970873837');" style=""> 785              mContentEditText.setText(&quot;&quot;);                                                                         </span>
<span class="-7997465605671669559" onmouseenter="enter('-7997465605671669559');" onmouseout="out('-7997465605671669559');" style=""> 786              mTagView.setText(&quot;&quot;);                                                                                 </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 787              if (mPlaceholderView != null)                                                                         </span>
<span class="-5306578928333558235" onmouseenter="enter('-5306578928333558235');" onmouseout="out('-5306578928333558235');" style=""> 788                  mPlaceholderView.setVisibility(View.VISIBLE);                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 789          } else {                                                                                                  </span>
<span class="8595752396614116138" onmouseenter="enter('8595752396614116138');" onmouseout="out('8595752396614116138');" style=""> 790              if (mPlaceholderView != null)                                                                         </span>
<span class="-2690182352330934584" onmouseenter="enter('-2690182352330934584');" onmouseout="out('-2690182352330934584');" style=""> 791                  mPlaceholderView.setVisibility(View.GONE);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 792          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793      }                                                                                                             </span>
<span  style=""> 794                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 795      @Override                                                                                                     </span>
<span class="-3315120631467309087" onmouseenter="enter('-3315120631467309087');" onmouseout="out('-3315120631467309087');" style=""> 796      public void onFocusChange(View v, boolean hasFocus) {                                                         </span>
<span class="-6285712256166584728" onmouseenter="enter('-6285712256166584728');" onmouseout="out('-6285712256166584728');" style=""> 797          if (!hasFocus) {                                                                                          </span>
<span class="-6666174322440118634" onmouseenter="enter('-6666174322440118634');" onmouseout="out('-6666174322440118634');" style=""> 798              String tagString = getNoteTagsString().trim();                                                        </span>
<span class="2918711019922442395" onmouseenter="enter('2918711019922442395');" onmouseout="out('2918711019922442395');" style=""> 799              if (tagString.length() &gt; 0) {                                                                         </span>
<span class="8488340728323435918" onmouseenter="enter('8488340728323435918');" onmouseout="out('8488340728323435918');" style=""> 800                  mTagView.setChips(tagString);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 801              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 802          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 803      }                                                                                                             </span>
<span  style=""> 804                                                                                                                    </span>
<span class="4758115017921537055" onmouseenter="enter('4758115017921537055');" onmouseout="out('4758115017921537055');" style=""> 805      private Note getNote() {                                                                                      </span>
<span class="6687317620803594982" onmouseenter="enter('6687317620803594982');" onmouseout="out('6687317620803594982');" style=""> 806          return mNote;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807      }                                                                                                             </span>
<span  style=""> 808                                                                                                                    </span>
<span class="627621646474661739" onmouseenter="enter('627621646474661739');" onmouseout="out('627621646474661739');" style=""> 809      public void setNote(String noteID) {                                                                          </span>
<span class="-6972394152055286124" onmouseenter="enter('-6972394152055286124');" onmouseout="out('-6972394152055286124');" style=""> 810          setNote(noteID, null);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 811      }                                                                                                             </span>
<span  style=""> 812                                                                                                                    </span>
<span class="-260751237439499239" onmouseenter="enter('-260751237439499239');" onmouseout="out('-260751237439499239');" style=""> 813      private String getNoteContentString() {                                                                       </span>
<span class="-8451380960236704581" onmouseenter="enter('-8451380960236704581');" onmouseout="out('-8451380960236704581');" style=""> 814          if (mContentEditText == null || mContentEditText.getText() == null) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 815              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 816          } else {                                                                                                  </span>
<span class="9069870454824528783" onmouseenter="enter('9069870454824528783');" onmouseout="out('9069870454824528783');" style=""> 817              return mContentEditText.getText().toString();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 818          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819      }                                                                                                             </span>
<span  style=""> 820                                                                                                                    </span>
<span class="1791713131652036535" onmouseenter="enter('1791713131652036535');" onmouseout="out('1791713131652036535');" style=""> 821      private String getNoteTagsString() {                                                                          </span>
<span class="2201751553125502793" onmouseenter="enter('2201751553125502793');" onmouseout="out('2201751553125502793');" style=""> 822          if (mTagView == null || mTagView.getText() == null) {                                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 823              return &quot;&quot;;                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 824          } else {                                                                                                  </span>
<span class="-3768945108519459655" onmouseenter="enter('-3768945108519459655');" onmouseout="out('-3768945108519459655');" style=""> 825              return mTagView.getText().toString();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 826          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 827      }                                                                                                             </span>
<span  style=""> 828                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 829      /**                                                                                                           </span>
<span class="-7590765322671442969" onmouseenter="enter('-7590765322671442969');" onmouseout="out('-7590765322671442969');" style=""> 830       * Share bottom sheet callbacks                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 831       */                                                                                                           </span>
<span  style=""> 832                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 833      @Override                                                                                                     </span>
<span class="2968602784493438427" onmouseenter="enter('2968602784493438427');" onmouseout="out('2968602784493438427');" style=""> 834      public void onSharePublishClicked() {                                                                         </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style=""> 835          publishNote();                                                                                            </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 836          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 837              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 838          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 839      }                                                                                                             </span>
<span  style=""> 840                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 841      @Override                                                                                                     </span>
<span class="2232780665187036053" onmouseenter="enter('2232780665187036053');" onmouseout="out('2232780665187036053');" style=""> 842      public void onShareUnpublishClicked() {                                                                       </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style=""> 843          unpublishNote();                                                                                          </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 844          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 845              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 847      }                                                                                                             </span>
<span  style=""> 848                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 849      @Override                                                                                                     </span>
<span class="1895662807531612039" onmouseenter="enter('1895662807531612039');" onmouseout="out('1895662807531612039');" style=""> 850      public void onWordPressPostClicked() {                                                                        </span>
<span class="4172821335322908069" onmouseenter="enter('4172821335322908069');" onmouseout="out('4172821335322908069');" style=""> 851          if (mShareBottomSheet != null) {                                                                          </span>
<span class="-4836834074376612243" onmouseenter="enter('-4836834074376612243');" onmouseout="out('-4836834074376612243');" style=""> 852              mShareBottomSheet.dismiss();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 853          }                                                                                                         </span>
<span  style=""> 854                                                                                                                    </span>
<span class="3314881699989820063" onmouseenter="enter('3314881699989820063');" onmouseout="out('3314881699989820063');" style=""> 855          if (getFragmentManager() == null) {                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 856              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857          }                                                                                                         </span>
<span  style=""> 858                                                                                                                    </span>
<span class="5636539351844670959" onmouseenter="enter('5636539351844670959');" onmouseout="out('5636539351844670959');" style=""> 859          FragmentTransaction ft = getFragmentManager().beginTransaction();                                         </span>
<span class="-500976049723048206" onmouseenter="enter('-500976049723048206');" onmouseout="out('-500976049723048206');" style=""> 860          Fragment prev = getFragmentManager().findFragmentByTag(WordPressDialogFragment.DIALOG_TAG);               </span>
<span class="6915708381430486628" onmouseenter="enter('6915708381430486628');" onmouseout="out('6915708381430486628');" style=""> 861          if (prev != null) {                                                                                       </span>
<span class="6191551415319260668" onmouseenter="enter('6191551415319260668');" onmouseout="out('6191551415319260668');" style=""> 862              ft.remove(prev);                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 863          }                                                                                                         </span>
<span class="4313436897323820694" onmouseenter="enter('4313436897323820694');" onmouseout="out('4313436897323820694');" style=""> 864          ft.addToBackStack(null);                                                                                  </span>
<span  style=""> 865                                                                                                                    </span>
<span class="-5506082590725208104" onmouseenter="enter('-5506082590725208104');" onmouseout="out('-5506082590725208104');" style=""> 866          // Create and show the dialog.                                                                            </span>
<span class="1756820858117205319" onmouseenter="enter('1756820858117205319');" onmouseout="out('1756820858117205319');" style=""> 867          WordPressDialogFragment wpDialogFragment = new WordPressDialogFragment();                                 </span>
<span class="8550268343842317092" onmouseenter="enter('8550268343842317092');" onmouseout="out('8550268343842317092');" style=""> 868          wpDialogFragment.setNote(mNote);                                                                          </span>
<span class="-7041960731203586914" onmouseenter="enter('-7041960731203586914');" onmouseout="out('-7041960731203586914');" style=""> 869          wpDialogFragment.show(ft, WordPressDialogFragment.DIALOG_TAG);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 870      }                                                                                                             </span>
<span  style=""> 871                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 872      @Override                                                                                                     </span>
<span class="8390280653962331927" onmouseenter="enter('8390280653962331927');" onmouseout="out('8390280653962331927');" style=""> 873      public void onShareCollaborateClicked() {                                                                     </span>
<span class="8508848920358466816" onmouseenter="enter('8508848920358466816');" onmouseout="out('8508848920358466816');" style=""> 874          Toast.makeText(getActivity(), R.string.collaborate_message, Toast.LENGTH_LONG).show();                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 875      }                                                                                                             </span>
<span  style=""> 876                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 877      @Override                                                                                                     </span>
<span class="-3569494199320067069" onmouseenter="enter('-3569494199320067069');" onmouseout="out('-3569494199320067069');" style=""> 878      public void onShareDismissed() {                                                                              </span>
<span  style=""> 879                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 880      }                                                                                                             </span>
<span  style=""> 881                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 882      /**                                                                                                           </span>
<span class="358915473298384679" onmouseenter="enter('358915473298384679');" onmouseout="out('358915473298384679');" style=""> 883       * History bottom sheet listeners                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 884       */                                                                                                           </span>
<span  style=""> 885                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 886      @Override                                                                                                     </span>
<span class="486589109199450506" onmouseenter="enter('486589109199450506');" onmouseout="out('486589109199450506');" style=""> 887      public void onHistoryCancelClicked() {                                                                        </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 888          mContentEditText.setText(mNote.getContent());                                                             </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 889          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 890              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 891          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 892      }                                                                                                             </span>
<span  style=""> 893                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 894      @Override                                                                                                     </span>
<span class="1746452780349475726" onmouseenter="enter('1746452780349475726');" onmouseout="out('1746452780349475726');" style=""> 895      public void onHistoryRestoreClicked() {                                                                       </span>
<span class="-7542139914053196629" onmouseenter="enter('-7542139914053196629');" onmouseout="out('-7542139914053196629');" style=""> 896          if (mHistoryBottomSheet != null) {                                                                        </span>
<span class="-2599981510781765889" onmouseenter="enter('-2599981510781765889');" onmouseout="out('-2599981510781765889');" style=""> 897              mHistoryBottomSheet.dismiss();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898          }                                                                                                         </span>
<span class="-2186856349666885424" onmouseenter="enter('-2186856349666885424');" onmouseout="out('-2186856349666885424');" style=""> 899          saveAndSyncNote();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 900      }                                                                                                             </span>
<span  style=""> 901                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 902      @Override                                                                                                     </span>
<span class="-1766878417892030172" onmouseenter="enter('-1766878417892030172');" onmouseout="out('-1766878417892030172');" style=""> 903      public void onHistoryDismissed() {                                                                            </span>
<span class="7350001942179054285" onmouseenter="enter('7350001942179054285');" onmouseout="out('7350001942179054285');" style=""> 904          if (!mHistoryBottomSheet.didTapOnButton()) {                                                              </span>
<span class="4148799213240179760" onmouseenter="enter('4148799213240179760');" onmouseout="out('4148799213240179760');" style=""> 905              mContentEditText.setText(mNote.getContent());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 906          }                                                                                                         </span>
<span  style=""> 907                                                                                                                    </span>
<span class="16247739636052398" onmouseenter="enter('16247739636052398');" onmouseout="out('16247739636052398');" style=""> 908          if (mHistoryTimeoutHandler != null) {                                                                     </span>
<span class="7316258928910882956" onmouseenter="enter('7316258928910882956');" onmouseout="out('7316258928910882956');" style=""> 909              mHistoryTimeoutHandler.removeCallbacks(mHistoryTimeoutRunnable);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 910          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 911      }                                                                                                             </span>
<span  style=""> 912                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 913      @Override                                                                                                     </span>
<span class="6142431680500084708" onmouseenter="enter('6142431680500084708');" onmouseout="out('6142431680500084708');" style=""> 914      public void onHistoryUpdateNote(String content) {                                                             </span>
<span class="5474545381550473491" onmouseenter="enter('5474545381550473491');" onmouseout="out('5474545381550473491');" style=""> 915          mContentEditText.setText(content);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 916      }                                                                                                             </span>
<span  style=""> 917                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 918      /**                                                                                                           </span>
<span class="278795310073326946" onmouseenter="enter('278795310073326946');" onmouseout="out('278795310073326946');" style=""> 919       * Info bottom sheet listeners                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 920       */                                                                                                           </span>
<span  style=""> 921                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 922      @Override                                                                                                     </span>
<span class="8237814855150796461" onmouseenter="enter('8237814855150796461');" onmouseout="out('8237814855150796461');" style=""> 923      public void onInfoPinSwitchChanged(boolean isSwitchedOn) {                                                    </span>
<span class="1875763960426997580" onmouseenter="enter('1875763960426997580');" onmouseout="out('1875763960426997580');" style=""> 924          NoteUtils.setNotePin(mNote, isSwitchedOn);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 925      }                                                                                                             </span>
<span  style=""> 926                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 927      @Override                                                                                                     </span>
<span class="6400184007599782807" onmouseenter="enter('6400184007599782807');" onmouseout="out('6400184007599782807');" style=""> 928      public void onInfoMarkdownSwitchChanged(boolean isSwitchedOn) {                                               </span>
<span class="2498037679736242197" onmouseenter="enter('2498037679736242197');" onmouseout="out('2498037679736242197');" style=""> 929          mIsMarkdownEnabled = isSwitchedOn;                                                                        </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style=""> 930          Activity activity = getActivity();                                                                        </span>
<span  style=""> 931                                                                                                                    </span>
<span class="2687579389951242136" onmouseenter="enter('2687579389951242136');" onmouseout="out('2687579389951242136');" style=""> 932          if (activity instanceof NoteEditorActivity) {                                                             </span>
<span  style=""> 933                                                                                                                    </span>
<span class="-2402557313247060047" onmouseenter="enter('-2402557313247060047');" onmouseout="out('-2402557313247060047');" style=""> 934              NoteEditorActivity editorActivity = (NoteEditorActivity) activity;                                    </span>
<span class="-5497853437151453135" onmouseenter="enter('-5497853437151453135');" onmouseout="out('-5497853437151453135');" style=""> 935              if (mIsMarkdownEnabled) {                                                                             </span>
<span  style=""> 936                                                                                                                    </span>
<span class="2738920073364403707" onmouseenter="enter('2738920073364403707');" onmouseout="out('2738920073364403707');" style=""> 937                  editorActivity.showTabs();                                                                        </span>
<span  style=""> 938                                                                                                                    </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style=""> 939                  if (mNoteMarkdownFragment == null) {                                                              </span>
<span class="-8091199532300597402" onmouseenter="enter('-8091199532300597402');" onmouseout="out('-8091199532300597402');" style=""> 940                      // Get markdown fragment and update content                                                   </span>
<span class="-5596154900216378430" onmouseenter="enter('-5596154900216378430');" onmouseout="out('-5596154900216378430');" style=""> 941                      mNoteMarkdownFragment =                                                                       </span>
<span class="5596511960413116475" onmouseenter="enter('5596511960413116475');" onmouseout="out('5596511960413116475');" style=""> 942                              editorActivity.getNoteMarkdownFragment();                                             </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style=""> 943                      mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 944                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 945              } else {                                                                                              </span>
<span class="-1827112023263463857" onmouseenter="enter('-1827112023263463857');" onmouseout="out('-1827112023263463857');" style=""> 946                  editorActivity.hideTabs();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 947              }                                                                                                     </span>
<span class="-8182258209329027497" onmouseenter="enter('-8182258209329027497');" onmouseout="out('-8182258209329027497');" style=""> 948          } else if (activity instanceof NotesActivity) {                                                           </span>
<span class="714586879751884809" onmouseenter="enter('714586879751884809');" onmouseout="out('714586879751884809');" style=""> 949              setMarkdownEnabled(mIsMarkdownEnabled);                                                               </span>
<span class="9075936053703013718" onmouseenter="enter('9075936053703013718');" onmouseout="out('9075936053703013718');" style=""> 950              ((NotesActivity) getActivity()).setMarkdownShowing(false);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951          }                                                                                                         </span>
<span  style=""> 952                                                                                                                    </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style=""> 953          saveNote();                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 954      }                                                                                                             </span>
<span  style=""> 955                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 956      @Override                                                                                                     </span>
<span class="-1723103922319199545" onmouseenter="enter('-1723103922319199545');" onmouseout="out('-1723103922319199545');" style=""> 957      public void onInfoCopyLinkClicked() {                                                                         </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style=""> 958          copyToClipboard(mNote.getPublishedUrl());                                                                 </span>
<span class="-7641316965107241771" onmouseenter="enter('-7641316965107241771');" onmouseout="out('-7641316965107241771');" style=""> 959          Toast.makeText(getActivity(), getString(R.string.link_copied), Toast.LENGTH_SHORT).show();                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 960      }                                                                                                             </span>
<span  style=""> 961                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 962      @Override                                                                                                     </span>
<span class="251004486893222554" onmouseenter="enter('251004486893222554');" onmouseout="out('251004486893222554');" style=""> 963      public void onInfoShareLinkClicked() {                                                                        </span>
<span class="-7399939689867674649" onmouseenter="enter('-7399939689867674649');" onmouseout="out('-7399939689867674649');" style=""> 964          if (mInfoBottomSheet != null) {                                                                           </span>
<span class="5461957305221977451" onmouseenter="enter('5461957305221977451');" onmouseout="out('5461957305221977451');" style=""> 965              mInfoBottomSheet.dismiss();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 966          }                                                                                                         </span>
<span class="-641201949227129854" onmouseenter="enter('-641201949227129854');" onmouseout="out('-641201949227129854');" style=""> 967          showShareSheet();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968      }                                                                                                             </span>
<span  style=""> 969                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 970      @Override                                                                                                     </span>
<span class="-4340446902886613241" onmouseenter="enter('-4340446902886613241');" onmouseout="out('-4340446902886613241');" style=""> 971      public void onInfoDismissed() {                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 972 -                                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 973      }                                                                                                             </span>
<span  style=""> 974                                                                                                                    </span>
<span class="-5351631094289756451" onmouseenter="enter('-5351631094289756451');" onmouseout="out('-5351631094289756451');" style=""> 975      protected void saveNote() {                                                                                   </span>
<span class="6573885176676722224" onmouseenter="enter('6573885176676722224');" onmouseout="out('6573885176676722224');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 976 -        if (mNote == null ||                                                                                      </span>
<span class="-704198539817842861" onmouseenter="enter('-704198539817842861');" onmouseout="out('-704198539817842861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 977 -                mContentEditText == null ||                                                                       </span>
<span class="-7342228029026764788" onmouseenter="enter('-7342228029026764788');" onmouseout="out('-7342228029026764788');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 978 -                mIsLoadingNote ||                                                                                 </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 979 -                (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                               </span>


<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 980 -            return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 981 -        }                                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 982 -                                                                                                                  </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 983 -        String content = mContentEditText.getPlainTextContent();                                                  </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 984 -        String tagString = getNoteTagsString();                                                                   </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 985 -                                                                                                                  </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 986 -        if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {"> 986 -        if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) ðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 987 -            mNote.setContent(content);                                                                            </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 988 -            mNote.setTagString(tagString);                                                                        </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 989 -            mNote.setModificationDate(Calendar.getInstance());                                                    </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 990 -            mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                         </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 991 -            mNote.setPreviewEnabled(mIsPreviewEnabled);                                                           </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 992 -            mNote.save();                                                                                         </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 993 -                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 994 -            AnalyticsTracker.track(                                                                               </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 995 -                    AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                                     </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 996 -                    AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 997 -                    &quot;editor_save&quot;                                                                                 </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 998 -            );                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 999 +        try {                                                                                                     </span>
<span class="5923515376230853284" onmouseenter="enter('5923515376230853284');" onmouseout="out('5923515376230853284');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1000 +            Simplenote application = (Simplenote) requireActivity().getApplication();                             </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1001 +            Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span class="1614046200152628925" onmouseenter="enter('1614046200152628925');" onmouseout="out('1614046200152628925');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1002 +            mNote = notesBucket.get(mNote.getSimperiumKey());                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1003 +                                                                                                                  </span>
<span class="-3105099670941444201" onmouseenter="enter('-3105099670941444201');" onmouseout="out('-3105099670941444201');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1004 +            if (mNote == null || mContentEditText == null || mIsLoadingNote ||                                    </span>
<span class="-7731560863544518158" onmouseenter="enter('-7731560863544518158');" onmouseout="out('-7731560863544518158');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1005 +                    (mHistoryBottomSheet != null &amp;&amp; mHistoryBottomSheet.isShowing())) {                           </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1006 +                return;                                                                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1007 +            } else {                                                                                              </span>
<span class="8897386780031316770" onmouseenter="enter('8897386780031316770');" onmouseout="out('8897386780031316770');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1008 +                mIsPreviewEnabled = mNote.isPreviewEnabled();                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1009 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1010 +                                                                                                                  </span>
<span class="6475969200315240778" onmouseenter="enter('6475969200315240778');" onmouseout="out('6475969200315240778');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1011 +            String content = mContentEditText.getPlainTextContent();                                              </span>
<span class="-8502490389039341280" onmouseenter="enter('-8502490389039341280');" onmouseout="out('-8502490389039341280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1012 +            String tagString = getNoteTagsString();                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1013 +                                                                                                                  </span>
<span class="3350877423550460602" onmouseenter="enter('3350877423550460602');" onmouseout="out('3350877423550460602');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="1014 +            if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnabled)) {">1014 +            if (mNote.hasChanges(content, tagString.trim(), mNote.isPinned(), mIsMarkdownEnabled, mIsPreviewEnableðŸ”µ</abbr></span>
<span class="843504871988910810" onmouseenter="enter('843504871988910810');" onmouseout="out('843504871988910810');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1015 +                mNote.setContent(content);                                                                        </span>
<span class="1553130968631643861" onmouseenter="enter('1553130968631643861');" onmouseout="out('1553130968631643861');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1016 +                mNote.setTagString(tagString);                                                                    </span>
<span class="-3343075472306200704" onmouseenter="enter('-3343075472306200704');" onmouseout="out('-3343075472306200704');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1017 +                mNote.setModificationDate(Calendar.getInstance());                                                </span>
<span class="-2172998267651300967" onmouseenter="enter('-2172998267651300967');" onmouseout="out('-2172998267651300967');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1018 +                mNote.setMarkdownEnabled(mIsMarkdownEnabled);                                                     </span>
<span class="822592535093481459" onmouseenter="enter('822592535093481459');" onmouseout="out('822592535093481459');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1019 +                mNote.setPreviewEnabled(mIsPreviewEnabled);                                                       </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1020 +                mNote.save();                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1021 +                                                                                                                  </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1022 +                AnalyticsTracker.track(                                                                           </span>
<span class="-2009685383903720533" onmouseenter="enter('-2009685383903720533');" onmouseout="out('-2009685383903720533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1023 +                        AnalyticsTracker.Stat.EDITOR_NOTE_EDITED,                                                 </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1024 +                        AnalyticsTracker.CATEGORY_NOTE,                                                           </span>
<span class="7262276752106887505" onmouseenter="enter('7262276752106887505');" onmouseout="out('7262276752106887505');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1025 +                        &quot;editor_save&quot;                                                                             </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1026 +                );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1027 +            }                                                                                                     </span>
<span class="-3643940737031631548" onmouseenter="enter('-3643940737031631548');" onmouseout="out('-3643940737031631548');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1028 +        } catch (BucketObjectMissingException exception) {                                                        </span>
<span class="-5036816163125879973" onmouseenter="enter('-5036816163125879973');" onmouseout="out('-5036816163125879973');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">1029 +            exception.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1030          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1031      }                                                                                                             </span>
<span  style="">1032                                                                                                                    </span>
<span class="-6769383367293074987" onmouseenter="enter('-6769383367293074987');" onmouseout="out('-6769383367293074987');" style="">1033      // Checks if cursor is at a URL when the selection changes                                                    </span>
<span class="499820509706145242" onmouseenter="enter('499820509706145242');" onmouseout="out('499820509706145242');" style="">1034      // If it is a URL, show the contextual action bar                                                             </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1035      @Override                                                                                                     </span>
<span class="-6619706727651867065" onmouseenter="enter('-6619706727651867065');" onmouseout="out('-6619706727651867065');" style="">1036      public void onSelectionChanged(int selStart, int selEnd) {                                                    </span>
<span class="7239443724625299771" onmouseenter="enter('7239443724625299771');" onmouseout="out('7239443724625299771');" style="">1037          mCurrentCursorPosition = selEnd;                                                                          </span>
<span class="-5773931921061181239" onmouseenter="enter('-5773931921061181239');" onmouseout="out('-5773931921061181239');" style="">1038          if (selStart == selEnd) {                                                                                 </span>
<span class="-1073801886026856185" onmouseenter="enter('-1073801886026856185');" onmouseout="out('-1073801886026856185');" style="">1039              Editable noteContent = mContentEditText.getText();                                                    </span>
<span class="6562974929235397620" onmouseenter="enter('6562974929235397620');" onmouseout="out('6562974929235397620');" style="">1040              if (noteContent == null)                                                                              </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1041                  return;                                                                                           </span>
<span  style="">1042                                                                                                                    </span>
<span class="1258634593958745929" onmouseenter="enter('1258634593958745929');" onmouseout="out('1258634593958745929');" style="">1043              URLSpan[] urlSpans = noteContent.getSpans(selStart, selStart, URLSpan.class);                         </span>
<span class="8265917182779455796" onmouseenter="enter('8265917182779455796');" onmouseout="out('8265917182779455796');" style="">1044              if (urlSpans.length &gt; 0) {                                                                            </span>
<span class="379938049561077801" onmouseenter="enter('379938049561077801');" onmouseout="out('379938049561077801');" style="">1045                  URLSpan urlSpan = urlSpans[0];                                                                    </span>
<span class="7382553573082356877" onmouseenter="enter('7382553573082356877');" onmouseout="out('7382553573082356877');" style="">1046                  mLinkUrl = urlSpan.getURL();                                                                      </span>
<span class="-2685141031372274993" onmouseenter="enter('-2685141031372274993');" onmouseout="out('-2685141031372274993');" style=""><abbr title="1047                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSpan)).toString();">1047                  mLinkText = noteContent.subSequence(noteContent.getSpanStart(urlSpan), noteContent.getSpanEnd(urlSðŸ”µ</abbr></span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1048                  if (mActionMode != null) {                                                                        </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1049                      mActionMode.setSubtitle(mLinkText);                                                           </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1050                      setLinkMenuItem();                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1051                      return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1052                  }                                                                                                 </span>
<span  style="">1053                                                                                                                    </span>
<span class="-4243988111679111503" onmouseenter="enter('-4243988111679111503');" onmouseout="out('-4243988111679111503');" style="">1054                  // Show the Contextual Action Bar                                                                 </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1055                  if (getActivity() != null) {                                                                      </span>
<span class="-21436323499410640" onmouseenter="enter('-21436323499410640');" onmouseout="out('-21436323499410640');" style="">1056                      mActionMode = ((AppCompatActivity) getActivity()).startSupportActionMode(mActionModeCallback);</span>
<span class="-1291529600191394909" onmouseenter="enter('-1291529600191394909');" onmouseout="out('-1291529600191394909');" style="">1057                      if (mActionMode != null) {                                                                    </span>
<span class="8256553390773794578" onmouseenter="enter('8256553390773794578');" onmouseout="out('8256553390773794578');" style="">1058                          mActionMode.setSubtitle(mLinkText);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1059                      }                                                                                             </span>
<span  style="">1060                                                                                                                    </span>
<span class="130933127965357900" onmouseenter="enter('130933127965357900');" onmouseout="out('130933127965357900');" style="">1061                      setLinkMenuItem();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1062                  }                                                                                                 </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1063              } else if (mActionMode != null) {                                                                     </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1064                  mActionMode.finish();                                                                             </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1065                  mActionMode = null;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1066              }                                                                                                     </span>
<span class="7515827566305000834" onmouseenter="enter('7515827566305000834');" onmouseout="out('7515827566305000834');" style="">1067          } else if (mActionMode != null) {                                                                         </span>
<span class="7165201847947665807" onmouseenter="enter('7165201847947665807');" onmouseout="out('7165201847947665807');" style="">1068              mActionMode.finish();                                                                                 </span>
<span class="291405596407736607" onmouseenter="enter('291405596407736607');" onmouseout="out('291405596407736607');" style="">1069              mActionMode = null;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1070          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1071      }                                                                                                             </span>
<span  style="">1072                                                                                                                    </span>
<span class="-1933854749523580289" onmouseenter="enter('-1933854749523580289');" onmouseout="out('-1933854749523580289');" style="">1073      private void setLinkMenuItem() {                                                                              </span>
<span class="-4542884014549729251" onmouseenter="enter('-4542884014549729251');" onmouseout="out('-4542884014549729251');" style="">1074          if (mViewLinkMenuItem != null &amp;&amp; mLinkUrl != null) {                                                      </span>
<span class="7070835845876331574" onmouseenter="enter('7070835845876331574');" onmouseout="out('7070835845876331574');" style="">1075              if (mLinkUrl.startsWith(&quot;tel:&quot;)) {                                                                    </span>
<span class="-3393709522714367611" onmouseenter="enter('-3393709522714367611');" onmouseout="out('-3393709522714367611');" style="">1076                  mViewLinkMenuItem.setIcon(mCallIcon);                                                             </span>
<span class="-1045706461125369539" onmouseenter="enter('-1045706461125369539');" onmouseout="out('-1045706461125369539');" style="">1077                  mViewLinkMenuItem.setTitle(getString(R.string.call));                                             </span>
<span class="-4087102511435152339" onmouseenter="enter('-4087102511435152339');" onmouseout="out('-4087102511435152339');" style="">1078              } else if (mLinkUrl.startsWith(&quot;mailto:&quot;)) {                                                          </span>
<span class="3689189789047011289" onmouseenter="enter('3689189789047011289');" onmouseout="out('3689189789047011289');" style="">1079                  mViewLinkMenuItem.setIcon(mEmailIcon);                                                            </span>
<span class="7417350135164215691" onmouseenter="enter('7417350135164215691');" onmouseout="out('7417350135164215691');" style="">1080                  mViewLinkMenuItem.setTitle(getString(R.string.email));                                            </span>
<span class="-1372170246346381865" onmouseenter="enter('-1372170246346381865');" onmouseout="out('-1372170246346381865');" style="">1081              } else if (mLinkUrl.startsWith(&quot;geo:&quot;)) {                                                             </span>
<span class="-4826865256995968603" onmouseenter="enter('-4826865256995968603');" onmouseout="out('-4826865256995968603');" style="">1082                  mViewLinkMenuItem.setIcon(mMapIcon);                                                              </span>
<span class="5018205442899714685" onmouseenter="enter('5018205442899714685');" onmouseout="out('5018205442899714685');" style="">1083                  mViewLinkMenuItem.setTitle(getString(R.string.view_map));                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1084              } else {                                                                                              </span>
<span class="4448565293260158108" onmouseenter="enter('4448565293260158108');" onmouseout="out('4448565293260158108');" style="">1085                  mViewLinkMenuItem.setIcon(mWebIcon);                                                              </span>
<span class="4171282647008223100" onmouseenter="enter('4171282647008223100');" onmouseout="out('4171282647008223100');" style="">1086                  mViewLinkMenuItem.setTitle(getString(R.string.view_in_browser));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1087              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1088          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1089      }                                                                                                             </span>
<span  style="">1090                                                                                                                    </span>
<span class="91579398727100136" onmouseenter="enter('91579398727100136');" onmouseout="out('91579398727100136');" style="">1091      private void setPublishedNote(boolean isPublished) {                                                          </span>
<span class="1654833331703303198" onmouseenter="enter('1654833331703303198');" onmouseout="out('1654833331703303198');" style="">1092          if (mNote != null) {                                                                                      </span>
<span class="316653489117166649" onmouseenter="enter('316653489117166649');" onmouseout="out('316653489117166649');" style="">1093              mNote.setPublished(isPublished);                                                                      </span>
<span class="-7698918877261210749" onmouseenter="enter('-7698918877261210749');" onmouseout="out('-7698918877261210749');" style="">1094              mNote.save();                                                                                         </span>
<span  style="">1095                                                                                                                    </span>
<span class="3198515589608942377" onmouseenter="enter('3198515589608942377');" onmouseout="out('3198515589608942377');" style="">1096              // reset publish status in 20 seconds if we don&#x27;t hear back from Simperium                            </span>
<span class="-8751687465189974985" onmouseenter="enter('-8751687465189974985');" onmouseout="out('-8751687465189974985');" style="">1097              mPublishTimeoutHandler.postDelayed(mPublishTimeoutRunnable, PUBLISH_TIMEOUT);                         </span>
<span  style="">1098                                                                                                                    </span>
<span class="-3532167543267950700" onmouseenter="enter('-3532167543267950700');" onmouseout="out('-3532167543267950700');" style="">1099              AnalyticsTracker.track(                                                                               </span>
<span class="8445333376271928124" onmouseenter="enter('8445333376271928124');" onmouseout="out('8445333376271928124');" style="">1100                      (isPublished) ? AnalyticsTracker.Stat.EDITOR_NOTE_PUBLISHED :                                 </span>
<span class="-1507943643432310711" onmouseenter="enter('-1507943643432310711');" onmouseout="out('-1507943643432310711');" style="">1101                              AnalyticsTracker.Stat.EDITOR_NOTE_UNPUBLISHED,                                        </span>
<span class="-1114111845670446347" onmouseenter="enter('-1114111845670446347');" onmouseout="out('-1114111845670446347');" style="">1102                      AnalyticsTracker.CATEGORY_NOTE,                                                               </span>
<span class="-4469222051298874183" onmouseenter="enter('-4469222051298874183');" onmouseout="out('-4469222051298874183');" style="">1103                      &quot;publish_note_button&quot;                                                                         </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="">1104              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1105          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1106      }                                                                                                             </span>
<span  style="">1107                                                                                                                    </span>
<span class="-8415113329489780394" onmouseenter="enter('-8415113329489780394');" onmouseout="out('-8415113329489780394');" style="">1108      private void updatePublishedState(boolean isSuccess) {                                                        </span>
<span  style="">1109                                                                                                                    </span>
<span class="7049673307523359848" onmouseenter="enter('7049673307523359848');" onmouseout="out('7049673307523359848');" style="">1110          if (mPublishingSnackbar == null) {                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1111              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1112          }                                                                                                         </span>
<span  style="">1113                                                                                                                    </span>
<span class="-7291151504336992329" onmouseenter="enter('-7291151504336992329');" onmouseout="out('-7291151504336992329');" style="">1114          mPublishingSnackbar.dismiss();                                                                            </span>
<span class="-2275300557144928477" onmouseenter="enter('-2275300557144928477');" onmouseout="out('-2275300557144928477');" style="">1115          mPublishingSnackbar = null;                                                                               </span>
<span  style="">1116                                                                                                                    </span>
<span class="3311052756729554547" onmouseenter="enter('3311052756729554547');" onmouseout="out('3311052756729554547');" style="">1117          if (isSuccess &amp;&amp; isAdded()) {                                                                             </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1118              if (mNote.isPublished()) {                                                                            </span>
<span  style="">1119                                                                                                                    </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1120                  if (mIsUndoingPublishing) {                                                                       </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1121                      SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,                    </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1122                              R.color.status_positive,                                                              </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1123                              Snackbar.LENGTH_LONG);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1124                  } else {                                                                                          </span>
<span class="-7933533256312549041" onmouseenter="enter('-7933533256312549041');" onmouseout="out('-7933533256312549041');" style="">1125                      SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_successful,                    </span>
<span class="7765634492143347482" onmouseenter="enter('7765634492143347482');" onmouseout="out('7765634492143347482');" style="">1126                              R.color.status_positive,                                                              </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1127                              Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1128                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1129                                  public void onClick(View v) {                                                     </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1130                                      mIsUndoingPublishing = true;                                                  </span>
<span class="4812123925634099655" onmouseenter="enter('4812123925634099655');" onmouseout="out('4812123925634099655');" style="">1131                                      unpublishNote();                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1132                                  }                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1133                              });                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1134                  }                                                                                                 </span>
<span class="7491029285417437417" onmouseenter="enter('7491029285417437417');" onmouseout="out('7491029285417437417');" style="">1135                  copyToClipboard(mNote.getPublishedUrl());                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1136              } else {                                                                                              </span>
<span class="-5133220124414488924" onmouseenter="enter('-5133220124414488924');" onmouseout="out('-5133220124414488924');" style="">1137                  if (mIsUndoingPublishing) {                                                                       </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1138                      SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,                  </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1139                              R.color.status_negative,                                                              </span>
<span class="-711689551077191192" onmouseenter="enter('-711689551077191192');" onmouseout="out('-711689551077191192');" style="">1140                              Snackbar.LENGTH_LONG);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1141                  } else {                                                                                          </span>
<span class="4450885673860702413" onmouseenter="enter('4450885673860702413');" onmouseout="out('4450885673860702413');" style="">1142                      SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_successful,                  </span>
<span class="-2451075549125736122" onmouseenter="enter('-2451075549125736122');" onmouseout="out('-2451075549125736122');" style="">1143                              R.color.status_negative,                                                              </span>
<span class="5065659875338532815" onmouseenter="enter('5065659875338532815');" onmouseout="out('5065659875338532815');" style="">1144                              Snackbar.LENGTH_LONG, R.string.undo, new View.OnClickListener() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1145                                  @Override                                                                         </span>
<span class="-6587489291029443051" onmouseenter="enter('-6587489291029443051');" onmouseout="out('-6587489291029443051');" style="">1146                                  public void onClick(View v) {                                                     </span>
<span class="-2003808211207706243" onmouseenter="enter('-2003808211207706243');" onmouseout="out('-2003808211207706243');" style="">1147                                      mIsUndoingPublishing = true;                                                  </span>
<span class="7985358866333072123" onmouseenter="enter('7985358866333072123');" onmouseout="out('7985358866333072123');" style="">1148                                      publishNote();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1149                                  }                                                                                 </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1150                              });                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1151                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1152              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1153          } else {                                                                                                  </span>
<span class="-1365615346790030662" onmouseenter="enter('-1365615346790030662');" onmouseout="out('-1365615346790030662');" style="">1154              if (mNote.isPublished()) {                                                                            </span>
<span class="-6121697006332454273" onmouseenter="enter('-6121697006332454273');" onmouseout="out('-6121697006332454273');" style="">1155                  SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublish_error,                           </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1156                          R.color.status_negative, Snackbar.LENGTH_LONG);                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1157              } else {                                                                                              </span>
<span class="-4531979614724167785" onmouseenter="enter('-4531979614724167785');" onmouseout="out('-4531979614724167785');" style="">1158                  SnackbarUtils.showSnackbar(requireActivity(), R.string.publish_error,                             </span>
<span class="3338026151138653534" onmouseenter="enter('3338026151138653534');" onmouseout="out('3338026151138653534');" style="">1159                          R.color.status_negative, Snackbar.LENGTH_LONG);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1160              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1161          }                                                                                                         </span>
<span  style="">1162                                                                                                                    </span>
<span class="265789452469033686" onmouseenter="enter('265789452469033686');" onmouseout="out('265789452469033686');" style="">1163          mIsUndoingPublishing = false;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1164      }                                                                                                             </span>
<span  style="">1165                                                                                                                    </span>
<span class="6900416574659568584" onmouseenter="enter('6900416574659568584');" onmouseout="out('6900416574659568584');" style="">1166      private void publishNote() {                                                                                  </span>
<span  style="">1167                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1168          if (isAdded()) {                                                                                          </span>
<span class="4291898079933948381" onmouseenter="enter('4291898079933948381');" onmouseout="out('4291898079933948381');" style="">1169              mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.publishing,              </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1170                      R.color.blue, Snackbar.LENGTH_INDEFINITE);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1171          }                                                                                                         </span>
<span class="5480526116728317891" onmouseenter="enter('5480526116728317891');" onmouseout="out('5480526116728317891');" style="">1172          setPublishedNote(true);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1173      }                                                                                                             </span>
<span  style="">1174                                                                                                                    </span>
<span class="-8215923685018306170" onmouseenter="enter('-8215923685018306170');" onmouseout="out('-8215923685018306170');" style="">1175      private void unpublishNote() {                                                                                </span>
<span  style="">1176                                                                                                                    </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1177          if (isAdded()) {                                                                                          </span>
<span class="-6747781156546415836" onmouseenter="enter('-6747781156546415836');" onmouseout="out('-6747781156546415836');" style="">1178              mPublishingSnackbar = SnackbarUtils.showSnackbar(requireActivity(), R.string.unpublishing,            </span>
<span class="-4269583096770065480" onmouseenter="enter('-4269583096770065480');" onmouseout="out('-4269583096770065480');" style="">1179                      R.color.blue, Snackbar.LENGTH_INDEFINITE);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1180          }                                                                                                         </span>
<span class="8445226168544755352" onmouseenter="enter('8445226168544755352');" onmouseout="out('8445226168544755352');" style="">1181          setPublishedNote(false);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1182      }                                                                                                             </span>
<span  style="">1183                                                                                                                    </span>
<span class="3055343723729328089" onmouseenter="enter('3055343723729328089');" onmouseout="out('3055343723729328089');" style="">1184      private void copyToClipboard(String text) {                                                                   </span>
<span class="-3396336639894410569" onmouseenter="enter('-3396336639894410569');" onmouseout="out('-3396336639894410569');" style="">1185          ClipboardManager clipboard = (ClipboardManager) requireActivity()                                         </span>
<span class="9010012128879326711" onmouseenter="enter('9010012128879326711');" onmouseout="out('9010012128879326711');" style="">1186                  .getSystemService(Context.CLIPBOARD_SERVICE);                                                     </span>
<span class="6466288418263607551" onmouseenter="enter('6466288418263607551');" onmouseout="out('6466288418263607551');" style="">1187          ClipData clip = ClipData.newPlainText(getString(R.string.app_name), text);                                </span>
<span class="-2930799407734462791" onmouseenter="enter('-2930799407734462791');" onmouseout="out('-2930799407734462791');" style="">1188          if (clipboard != null) {                                                                                  </span>
<span class="4071695444394328890" onmouseenter="enter('4071695444394328890');" onmouseout="out('4071695444394328890');" style="">1189              clipboard.setPrimaryClip(clip);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1190          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1191      }                                                                                                             </span>
<span  style="">1192                                                                                                                    </span>
<span class="552430204178555924" onmouseenter="enter('552430204178555924');" onmouseout="out('552430204178555924');" style="">1193      private void showShareSheet() {                                                                               </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1194          if (isAdded()) {                                                                                          </span>
<span class="-5706261914377124016" onmouseenter="enter('-5706261914377124016');" onmouseout="out('-5706261914377124016');" style="">1195              mShareBottomSheet.show(mNote);                                                                        </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1196          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1197      }                                                                                                             </span>
<span  style="">1198                                                                                                                    </span>
<span class="-4049506869902668727" onmouseenter="enter('-4049506869902668727');" onmouseout="out('-4049506869902668727');" style="">1199      private void showInfoSheet() {                                                                                </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1200          if (isAdded()) {                                                                                          </span>
<span class="-9107266656084872702" onmouseenter="enter('-9107266656084872702');" onmouseout="out('-9107266656084872702');" style="">1201              mInfoBottomSheet.show(mNote);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1202          }                                                                                                         </span>
<span  style="">1203                                                                                                                    </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1204      }                                                                                                             </span>
<span  style="">1205                                                                                                                    </span>
<span class="5911143564482716303" onmouseenter="enter('5911143564482716303');" onmouseout="out('5911143564482716303');" style="">1206      private void showHistorySheet() {                                                                             </span>
<span class="-7481427962806884462" onmouseenter="enter('-7481427962806884462');" onmouseout="out('-7481427962806884462');" style="">1207          if (isAdded()) {                                                                                          </span>
<span class="8706434621047143120" onmouseenter="enter('8706434621047143120');" onmouseout="out('8706434621047143120');" style="">1208              // Request revisions for the current note                                                             </span>
<span class="-1574938770535875074" onmouseenter="enter('-1574938770535875074');" onmouseout="out('-1574938770535875074');" style="">1209              mNotesBucket.getRevisions(mNote, MAX_REVISIONS, mHistoryBottomSheet.getRevisionsRequestCallbacks());  </span>
<span class="640220419932528956" onmouseenter="enter('640220419932528956');" onmouseout="out('640220419932528956');" style="">1210              saveNote();                                                                                           </span>
<span  style="">1211                                                                                                                    </span>
<span class="-8018381336008501546" onmouseenter="enter('-8018381336008501546');" onmouseout="out('-8018381336008501546');" style="">1212              mHistoryBottomSheet.show(mNote);                                                                      </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1213          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1214      }                                                                                                             </span>
<span  style="">1215                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">1216      /**                                                                                                           </span>
<span class="-1711188639399183775" onmouseenter="enter('-1711188639399183775');" onmouseout="out('-1711188639399183775');" style="">1217       * Simperium listeners                                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">1218       */                                                                                                           </span>
<span  style="">1219                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1220      @Override                                                                                                     </span>
<span class="3459602708969445883" onmouseenter="enter('3459602708969445883');" onmouseout="out('3459602708969445883');" style="">1221      public void onDeleteObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                              </span>
<span  style="">1222                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1223      }                                                                                                             </span>
<span  style="">1224                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1225      @Override                                                                                                     </span>
<span class="-2970240973750057256" onmouseenter="enter('-2970240973750057256');" onmouseout="out('-2970240973750057256');" style="">1226      public void onNetworkChange(Bucket&lt;Note&gt; noteBucket, Bucket.ChangeType changeType, final String key) {        </span>
<span class="6607037711761945955" onmouseenter="enter('6607037711761945955');" onmouseout="out('6607037711761945955');" style="">1227          if (changeType == Bucket.ChangeType.MODIFY) {                                                             </span>
<span class="-6254872391725782597" onmouseenter="enter('-6254872391725782597');" onmouseout="out('-6254872391725782597');" style="">1228              if (getNote() != null &amp;&amp; getNote().getSimperiumKey().equals(key)) {                                   </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1229                  try {                                                                                             </span>
<span class="3951885723067312215" onmouseenter="enter('3951885723067312215');" onmouseout="out('3951885723067312215');" style="">1230                      final Note updatedNote = mNotesBucket.get(key);                                               </span>
<span class="4809573797151136036" onmouseenter="enter('4809573797151136036');" onmouseout="out('4809573797151136036');" style="">1231                      if (getActivity() != null) {                                                                  </span>
<span class="-3876200887541462175" onmouseenter="enter('-3876200887541462175');" onmouseout="out('-3876200887541462175');" style="">1232                          getActivity().runOnUiThread(new Runnable() {                                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1233                              @Override                                                                             </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1234                              public void run() {                                                                   </span>
<span class="-8758788084050668688" onmouseenter="enter('-8758788084050668688');" onmouseout="out('-8758788084050668688');" style="">1235                                  if (mPublishTimeoutHandler != null) {                                             </span>
<span class="-1646454762641300025" onmouseenter="enter('-1646454762641300025');" onmouseout="out('-1646454762641300025');" style="">1236                                      mPublishTimeoutHandler.removeCallbacks(mPublishTimeoutRunnable);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1237                                  }                                                                                 </span>
<span  style="">1238                                                                                                                    </span>
<span class="-8617980127286778731" onmouseenter="enter('-8617980127286778731');" onmouseout="out('-8617980127286778731');" style="">1239                                  updateNote(updatedNote);                                                          </span>
<span class="2318735056997767280" onmouseenter="enter('2318735056997767280');" onmouseout="out('2318735056997767280');" style="">1240                                  updatePublishedState(true);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1241                              }                                                                                     </span>
<span class="7938821646327104961" onmouseenter="enter('7938821646327104961');" onmouseout="out('7938821646327104961');" style="">1242                          });                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1243                      }                                                                                             </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1244                  } catch (BucketObjectMissingException e) {                                                        </span>
<span class="4090663313211582937" onmouseenter="enter('4090663313211582937');" onmouseout="out('4090663313211582937');" style="">1245                      e.printStackTrace();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1246                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1247              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1248          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1249      }                                                                                                             </span>
<span  style="">1250                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1251      @Override                                                                                                     </span>
<span class="1835476648918604123" onmouseenter="enter('1835476648918604123');" onmouseout="out('1835476648918604123');" style="">1252      public void onSaveObject(Bucket&lt;Note&gt; noteBucket, Note note) {                                                </span>
<span class="-5784091718421357269" onmouseenter="enter('-5784091718421357269');" onmouseout="out('-5784091718421357269');" style="">1253          // noop                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1254      }                                                                                                             </span>
<span  style="">1255                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1256      @Override                                                                                                     </span>
<span class="-5956849782971602831" onmouseenter="enter('-5956849782971602831');" onmouseout="out('-5956849782971602831');" style="">1257      public void onBeforeUpdateObject(Bucket&lt;Note&gt; bucket, Note note) {                                            </span>
<span class="9133977848896323437" onmouseenter="enter('9133977848896323437');" onmouseout="out('9133977848896323437');" style="">1258          // Don&#x27;t apply updates if we haven&#x27;t loaded the note yet                                                  </span>
<span class="-1541782922582123662" onmouseenter="enter('-1541782922582123662');" onmouseout="out('-1541782922582123662');" style="">1259          if (mIsLoadingNote)                                                                                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1260              return;                                                                                               </span>
<span  style="">1261                                                                                                                    </span>
<span class="1341660593539808393" onmouseenter="enter('1341660593539808393');" onmouseout="out('1341660593539808393');" style="">1262          Note openNote = getNote();                                                                                </span>
<span class="-6997098079508589023" onmouseenter="enter('-6997098079508589023');" onmouseout="out('-6997098079508589023');" style="">1263          if (openNote == null || !openNote.getSimperiumKey().equals(note.getSimperiumKey()))                       </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1264              return;                                                                                               </span>
<span  style="">1265                                                                                                                    </span>
<span class="7121549238466162700" onmouseenter="enter('7121549238466162700');" onmouseout="out('7121549238466162700');" style="">1266          note.setContent(mContentEditText.getPlainTextContent());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1267      }                                                                                                             </span>
<span  style="">1268                                                                                                                    </span>
<span class="9045414880144452172" onmouseenter="enter('9045414880144452172');" onmouseout="out('9045414880144452172');" style="">1269      private static class LoadNoteTask extends AsyncTask&lt;String, Void, Void&gt; {                                     </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1270          WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                           </span>
<span  style="">1271                                                                                                                    </span>
<span class="-5095898803565568819" onmouseenter="enter('-5095898803565568819');" onmouseout="out('-5095898803565568819');" style="">1272          LoadNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1273              weakFragment = new WeakReference&lt;&gt;(fragment);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1274          }                                                                                                         </span>
<span  style="">1275                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1276          @Override                                                                                                 </span>
<span class="-2143377957271683587" onmouseenter="enter('-2143377957271683587');" onmouseout="out('-2143377957271683587');" style="">1277          protected void onPreExecute() {                                                                           </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1278              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1279              if (fragment != null) {                                                                               </span>
<span class="60782620590248864" onmouseenter="enter('60782620590248864');" onmouseout="out('60782620590248864');" style="">1280                  fragment.mContentEditText.removeTextChangedListener(fragment);                                    </span>
<span class="-1534119248334961722" onmouseenter="enter('-1534119248334961722');" onmouseout="out('-1534119248334961722');" style="">1281                  fragment.mIsLoadingNote = true;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1282              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1283          }                                                                                                         </span>
<span  style="">1284                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1285          @Override                                                                                                 </span>
<span class="2907103121668961470" onmouseenter="enter('2907103121668961470');" onmouseout="out('2907103121668961470');" style="">1286          protected Void doInBackground(String... args) {                                                           </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1287              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="-8032132530741633390" onmouseenter="enter('-8032132530741633390');" onmouseout="out('-8032132530741633390');" style="">1288              if (fragment == null || fragment.getActivity() == null) {                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1289                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1290              }                                                                                                     </span>
<span  style="">1291                                                                                                                    </span>
<span class="-6905640337159350056" onmouseenter="enter('-6905640337159350056');" onmouseout="out('-6905640337159350056');" style="">1292              String noteID = args[0];                                                                              </span>
<span class="-2377301998895691620" onmouseenter="enter('-2377301998895691620');" onmouseout="out('-2377301998895691620');" style="">1293              Simplenote application = (Simplenote) fragment.getActivity().getApplication();                        </span>
<span class="3820701427545927889" onmouseenter="enter('3820701427545927889');" onmouseout="out('3820701427545927889');" style="">1294              Bucket&lt;Note&gt; notesBucket = application.getNotesBucket();                                              </span>
<span  style="">1295                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">1296              try {                                                                                                 </span>
<span class="-4946232803333130386" onmouseenter="enter('-4946232803333130386');" onmouseout="out('-4946232803333130386');" style="">1297                  fragment.mNote = notesBucket.get(noteID);                                                         </span>
<span class="-8094446681246514952" onmouseenter="enter('-8094446681246514952');" onmouseout="out('-8094446681246514952');" style="">1298                  // Set the current note in NotesActivity when on a tablet                                         </span>
<span class="-8543118244487944112" onmouseenter="enter('-8543118244487944112');" onmouseout="out('-8543118244487944112');" style="">1299                  if (fragment.getActivity() instanceof NotesActivity) {                                            </span>
<span class="7201017209637424614" onmouseenter="enter('7201017209637424614');" onmouseout="out('7201017209637424614');" style="">1300                      ((NotesActivity) fragment.getActivity()).setCurrentNote(fragment.mNote);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1301                  }                                                                                                 </span>
<span  style="">1302                                                                                                                    </span>
<span class="-7559761486783625846" onmouseenter="enter('-7559761486783625846');" onmouseout="out('-7559761486783625846');" style="">1303                  // Set markdown and preview flags for current note                                                </span>
<span class="5610790463962208778" onmouseenter="enter('5610790463962208778');" onmouseout="out('5610790463962208778');" style="">1304                  if (fragment.mNote != null) {                                                                     </span>
<span class="-8180075389206795559" onmouseenter="enter('-8180075389206795559');" onmouseout="out('-8180075389206795559');" style="">1305                      fragment.mIsMarkdownEnabled = fragment.mNote.isMarkdownEnabled();                             </span>
<span class="4693841747578299424" onmouseenter="enter('4693841747578299424');" onmouseout="out('4693841747578299424');" style="">1306                      fragment.mIsPreviewEnabled = fragment.mNote.isPreviewEnabled();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1307                  }                                                                                                 </span>
<span class="-1560847995217927266" onmouseenter="enter('-1560847995217927266');" onmouseout="out('-1560847995217927266');" style="">1308              } catch (BucketObjectMissingException e) {                                                            </span>
<span class="2089208945464326929" onmouseenter="enter('2089208945464326929');" onmouseout="out('2089208945464326929');" style="">1309                  // See if the note is in the object store                                                         </span>
<span class="369229994761936281" onmouseenter="enter('369229994761936281');" onmouseout="out('369229994761936281');" style="">1310                  Bucket.ObjectCursor&lt;Note&gt; notesCursor = notesBucket.allObjects();                                 </span>
<span class="-3178781815102550114" onmouseenter="enter('-3178781815102550114');" onmouseout="out('-3178781815102550114');" style="">1311                  while (notesCursor.moveToNext()) {                                                                </span>
<span class="-6636674936476994775" onmouseenter="enter('-6636674936476994775');" onmouseout="out('-6636674936476994775');" style="">1312                      Note currentNote = notesCursor.getObject();                                                   </span>
<span class="5230840531090379031" onmouseenter="enter('5230840531090379031');" onmouseout="out('5230840531090379031');" style="">1313                      if (currentNote != null &amp;&amp; currentNote.getSimperiumKey().equals(noteID)) {                    </span>
<span class="8774517486286621197" onmouseenter="enter('8774517486286621197');" onmouseout="out('8774517486286621197');" style="">1314                          fragment.mNote = currentNote;                                                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1315                          return null;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1316                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1317                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1318              }                                                                                                     </span>
<span  style="">1319                                                                                                                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1320              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1321          }                                                                                                         </span>
<span  style="">1322                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1323          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1324          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-7212142050064810641" onmouseenter="enter('-7212142050064810641');" onmouseout="out('-7212142050064810641');" style="">1325              final NoteEditorFragment fragment = weakFragment.get();                                               </span>
<span class="-799665902142491282" onmouseenter="enter('-799665902142491282');" onmouseout="out('-799665902142491282');" style="">1326              if (fragment == null                                                                                  </span>
<span class="-3592720682984648780" onmouseenter="enter('-3592720682984648780');" onmouseout="out('-3592720682984648780');" style="">1327                      || fragment.getActivity() == null                                                             </span>
<span class="-193925863612874363" onmouseenter="enter('-193925863612874363');" onmouseout="out('-193925863612874363');" style="">1328                      || fragment.getActivity().isFinishing()) {                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1329                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1330              }                                                                                                     </span>
<span  style="">1331                                                                                                                    </span>
<span class="-6603799210363857095" onmouseenter="enter('-6603799210363857095');" onmouseout="out('-6603799210363857095');" style="">1332              fragment.refreshContent(false);                                                                       </span>
<span class="5917882013700041584" onmouseenter="enter('5917882013700041584');" onmouseout="out('5917882013700041584');" style="">1333              if (fragment.mMatchOffsets != null) {                                                                 </span>
<span class="3332467390516262576" onmouseenter="enter('3332467390516262576');" onmouseout="out('3332467390516262576');" style=""><abbr title="1334                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.CONTENT_PROPERTY);">1334                  int columnIndex = fragment.mNote.getBucket().getSchema().getFullTextIndex().getColumnIndex(Note.COðŸ”µ</abbr></span>
<span class="-941659818852434408" onmouseenter="enter('-941659818852434408');" onmouseout="out('-941659818852434408');" style="">1335                  fragment.mHighlighter.highlightMatches(fragment.mMatchOffsets, columnIndex);                      </span>
<span  style="">1336                                                                                                                    </span>
<span class="-5586540550370892268" onmouseenter="enter('-5586540550370892268');" onmouseout="out('-5586540550370892268');" style="">1337                  fragment.mShouldScrollToSearchMatch = true;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1338              }                                                                                                     </span>
<span  style="">1339                                                                                                                    </span>
<span class="973040091990718145" onmouseenter="enter('973040091990718145');" onmouseout="out('973040091990718145');" style="">1340              fragment.mContentEditText.addTextChangedListener(fragment);                                           </span>
<span  style="">1341                                                                                                                    </span>
<span class="2402633428423922470" onmouseenter="enter('2402633428423922470');" onmouseout="out('2402633428423922470');" style="">1342              if (fragment.mNote != null &amp;&amp; fragment.mNote.getContent().isEmpty()) {                                </span>
<span class="-7639034409774462373" onmouseenter="enter('-7639034409774462373');" onmouseout="out('-7639034409774462373');" style="">1343                  // Show soft keyboard                                                                             </span>
<span class="-4206285070691362757" onmouseenter="enter('-4206285070691362757');" onmouseout="out('-4206285070691362757');" style="">1344                  fragment.mContentEditText.requestFocus();                                                         </span>
<span  style="">1345                                                                                                                    </span>
<span class="7162501222170899627" onmouseenter="enter('7162501222170899627');" onmouseout="out('7162501222170899627');" style="">1346                  new Handler().postDelayed(new Runnable() {                                                        </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1347                      @Override                                                                                     </span>
<span class="5292860430507443886" onmouseenter="enter('5292860430507443886');" onmouseout="out('5292860430507443886');" style="">1348                      public void run() {                                                                           </span>
<span class="-3270581272855840613" onmouseenter="enter('-3270581272855840613');" onmouseout="out('-3270581272855840613');" style="">1349                          if (fragment.getActivity() == null) {                                                     </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1350                              return;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1351                          }                                                                                         </span>
<span  style="">1352                                                                                                                    </span>
<span class="-9053809797008075040" onmouseenter="enter('-9053809797008075040');" onmouseout="out('-9053809797008075040');" style=""><abbr title="1353                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);">1353                          InputMethodManager inputMethodManager = (InputMethodManager) fragment.getActivity().getSysðŸ”µ</abbr></span>
<span class="-9213036537020298306" onmouseenter="enter('-9213036537020298306');" onmouseout="out('-9213036537020298306');" style="">1354                          if (inputMethodManager != null) {                                                         </span>
<span class="195139432086188728" onmouseenter="enter('195139432086188728');" onmouseout="out('195139432086188728');" style="">1355                              inputMethodManager.showSoftInput(fragment.mContentEditText, 0);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1356                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1357                      }                                                                                             </span>
<span class="-4884776244894547305" onmouseenter="enter('-4884776244894547305');" onmouseout="out('-4884776244894547305');" style="">1358                  }, 100);                                                                                          </span>
<span  style="">1359                                                                                                                    </span>
<span class="-6150494714931322561" onmouseenter="enter('-6150494714931322561');" onmouseout="out('-6150494714931322561');" style="">1360              } else if (fragment.mNote != null) {                                                                  </span>
<span class="-1393000384089402121" onmouseenter="enter('-1393000384089402121');" onmouseout="out('-1393000384089402121');" style="">1361                  // If we have a valid note, hide the placeholder                                                  </span>
<span class="8494685023237855547" onmouseenter="enter('8494685023237855547');" onmouseout="out('8494685023237855547');" style="">1362                  fragment.setPlaceholderVisible(false);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1363              }                                                                                                     </span>
<span  style="">1364                                                                                                                    </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1365              fragment.updateMarkdownView();                                                                        </span>
<span  style="">1366                                                                                                                    </span>
<span class="-7853767312046629249" onmouseenter="enter('-7853767312046629249');" onmouseout="out('-7853767312046629249');" style="">1367              fragment.requireActivity().invalidateOptionsMenu();                                                   </span>
<span  style="">1368                                                                                                                    </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1369              fragment.linkifyEditorContent();                                                                      </span>
<span class="-4002830427376252976" onmouseenter="enter('-4002830427376252976');" onmouseout="out('-4002830427376252976');" style="">1370              fragment.mIsLoadingNote = false;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1371          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1372      }                                                                                                             </span>
<span  style="">1373                                                                                                                    </span>
<span class="-2513677254117436534" onmouseenter="enter('-2513677254117436534');" onmouseout="out('-2513677254117436534');" style="">1374      private static class SaveNoteTask extends AsyncTask&lt;Void, Void, Void&gt; {                                       </span>
<span class="-8446653401538129007" onmouseenter="enter('-8446653401538129007');" onmouseout="out('-8446653401538129007');" style="">1375          WeakReference&lt;NoteEditorFragment&gt; weakFragment;                                                           </span>
<span  style="">1376                                                                                                                    </span>
<span class="-3144982887415890281" onmouseenter="enter('-3144982887415890281');" onmouseout="out('-3144982887415890281');" style="">1377          SaveNoteTask(NoteEditorFragment fragment) {                                                               </span>
<span class="337571189503258630" onmouseenter="enter('337571189503258630');" onmouseout="out('337571189503258630');" style="">1378              weakFragment = new WeakReference&lt;&gt;(fragment);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1379          }                                                                                                         </span>
<span  style="">1380                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1381          @Override                                                                                                 </span>
<span class="1259374977543247181" onmouseenter="enter('1259374977543247181');" onmouseout="out('1259374977543247181');" style="">1382          protected Void doInBackground(Void... args) {                                                             </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1383              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="8682461618194216316" onmouseenter="enter('8682461618194216316');" onmouseout="out('8682461618194216316');" style="">1384              if (fragment != null) {                                                                               </span>
<span class="8575404770768137029" onmouseenter="enter('8575404770768137029');" onmouseout="out('8575404770768137029');" style="">1385                  fragment.saveNote();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1386              }                                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="">1387              return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1388          }                                                                                                         </span>
<span  style="">1389                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">1390          @Override                                                                                                 </span>
<span class="2295103304779241059" onmouseenter="enter('2295103304779241059');" onmouseout="out('2295103304779241059');" style="">1391          protected void onPostExecute(Void nada) {                                                                 </span>
<span class="-6407776554193970386" onmouseenter="enter('-6407776554193970386');" onmouseout="out('-6407776554193970386');" style="">1392              NoteEditorFragment fragment = weakFragment.get();                                                     </span>
<span class="-8106394483710371243" onmouseenter="enter('-8106394483710371243');" onmouseout="out('-8106394483710371243');" style="">1393              if (fragment != null &amp;&amp; fragment.getActivity() != null &amp;&amp; !fragment.getActivity().isFinishing()) {    </span>
<span class="4157206213844518202" onmouseenter="enter('4157206213844518202');" onmouseout="out('4157206213844518202');" style="">1394                  // Update links                                                                                   </span>
<span class="-6330986853491903464" onmouseenter="enter('-6330986853491903464');" onmouseout="out('-6330986853491903464');" style="">1395                  fragment.linkifyEditorContent();                                                                  </span>
<span class="-204842057880624038" onmouseenter="enter('-204842057880624038');" onmouseout="out('-204842057880624038');" style="">1396                  fragment.updateMarkdownView();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1397              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1398          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1399      }                                                                                                             </span>
<span  style="">1400                                                                                                                    </span>
<span class="5750088007463981533" onmouseenter="enter('5750088007463981533');" onmouseout="out('5750088007463981533');" style="">1401      private void linkifyEditorContent() {                                                                         </span>
<span class="-7408428876964241805" onmouseenter="enter('-7408428876964241805');" onmouseout="out('-7408428876964241805');" style="">1402          if (getActivity() == null || getActivity().isFinishing()) {                                               </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1403              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1404          }                                                                                                         </span>
<span  style="">1405                                                                                                                    </span>
<span class="-8676186023856313759" onmouseenter="enter('-8676186023856313759');" onmouseout="out('-8676186023856313759');" style="">1406          if (PrefUtils.getBoolPref(getActivity(), PrefUtils.PREF_DETECT_LINKS)) {                                  </span>
<span class="-5493645025534883433" onmouseenter="enter('-5493645025534883433');" onmouseout="out('-5493645025534883433');" style="">1407              SimplenoteLinkify.addLinks(mContentEditText, Linkify.ALL);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1408          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1409      }                                                                                                             </span>
<span  style="">1410                                                                                                                    </span>
<span class="-5950330616337931457" onmouseenter="enter('-5950330616337931457');" onmouseout="out('-5950330616337931457');" style="">1411      // Show tabs if markdown is enabled globally, for current note, and not tablet landscape                      </span>
<span class="2649812560178195830" onmouseenter="enter('2649812560178195830');" onmouseout="out('2649812560178195830');" style="">1412      private void updateMarkdownView() {                                                                           </span>
<span class="-6478060281573302790" onmouseenter="enter('-6478060281573302790');" onmouseout="out('-6478060281573302790');" style="">1413          if (!mIsMarkdownEnabled) {                                                                                </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="">1414              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1415          }                                                                                                         </span>
<span  style="">1416                                                                                                                    </span>
<span class="-5071525869541290984" onmouseenter="enter('-5071525869541290984');" onmouseout="out('-5071525869541290984');" style="">1417          Activity activity = getActivity();                                                                        </span>
<span class="6030899174327056570" onmouseenter="enter('6030899174327056570');" onmouseout="out('6030899174327056570');" style="">1418          if (activity instanceof NotesActivity) {                                                                  </span>
<span class="2782126590805787389" onmouseenter="enter('2782126590805787389');" onmouseout="out('2782126590805787389');" style="">1419              // This fragment lives in NotesActivity, so load markdown in this fragment&#x27;s WebView.                 </span>
<span class="3327794499329885328" onmouseenter="enter('3327794499329885328');" onmouseout="out('3327794499329885328');" style="">1420              loadMarkdownData();                                                                                   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">1421          } else {                                                                                                  </span>
<span class="8122704767225379324" onmouseenter="enter('8122704767225379324');" onmouseout="out('8122704767225379324');" style="">1422              // This fragment lives in the NoteEditorActivity&#x27;s ViewPager.                                         </span>
<span class="-3674842258349497418" onmouseenter="enter('-3674842258349497418');" onmouseout="out('-3674842258349497418');" style="">1423              if (mNoteMarkdownFragment == null) {                                                                  </span>
<span class="3603448342706497777" onmouseenter="enter('3603448342706497777');" onmouseout="out('3603448342706497777');" style="">1424                  mNoteMarkdownFragment = ((NoteEditorActivity) requireActivity())                                  </span>
<span class="-2617317400764712760" onmouseenter="enter('-2617317400764712760');" onmouseout="out('-2617317400764712760');" style="">1425                          .getNoteMarkdownFragment();                                                               </span>
<span class="3313661309460802096" onmouseenter="enter('3313661309460802096');" onmouseout="out('3313661309460802096');" style="">1426                  ((NoteEditorActivity) requireActivity()).showTabs();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1427              }                                                                                                     </span>
<span class="-1009334497805408344" onmouseenter="enter('-1009334497805408344');" onmouseout="out('-1009334497805408344');" style="">1428              // Load markdown in the sibling NoteMarkdownFragment&#x27;s WebView.                                       </span>
<span class="-7149150031968803246" onmouseenter="enter('-7149150031968803246');" onmouseout="out('-7149150031968803246');" style="">1429              mNoteMarkdownFragment.updateMarkdown(mContentEditText.getPlainTextContent());                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1430          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1431      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">1432  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            