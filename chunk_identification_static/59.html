<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>59</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    59
                    <a href="58.html">prev</a>
                    <a href="60.html">next</a>
                    <a href="59_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_ce886921a652b2ea1ded6e36a0748360e01c007f_aria/src/main/java/com/arialyy/aria/core/upload/UploadTask.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ce886921a652b2ea1ded6e36a0748360e01c007f:aria/src/main/java/com/arialyy/aria/core/upload/UploadTask.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ce886921a652b2ea1ded6e36a0748360e01c007f^1:aria/src/main/java/com/arialyy/aria/core/upload/UploadTask.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ce886921a652b2ea1ded6e36a0748360e01c007f^2:aria/src/main/java/com/arialyy/aria/core/upload/UploadTask.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;84ce7e06974326b39f68f3f23fd64570bcdb9bdc:aria/src/main/java/com/arialyy/aria/core/upload/UploadTask.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [bj], [bj], [bj], [bj], [bj], [bj], [bj], [bj], [bj], [bj]], subset: [[b], [bj], [bj], [bj], [bj], [bj], [bj], [bj], [bj], [bj], [bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="2296433254624375089" onmouseenter="enter('2296433254624375089');" onmouseout="out('2296433254624375089');" style="">  16 package com.arialyy.aria.core.upload;                                                                    </span>
<span  style="">  17                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  18 import android.content.Context;                                                                          </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  19 import android.os.Handler;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  20 import android.util.Log;                                                                                 </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  21 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  22 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  23 import com.arialyy.aria.core.inf.AbsTask;                                                                </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  24 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-3972257947549510103" onmouseenter="enter('-3972257947549510103');" onmouseout="out('-3972257947549510103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 import com.arialyy.aria.core.Aria;                                                                       </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  26 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="1932658903610588883" onmouseenter="enter('1932658903610588883');" onmouseout="out('1932658903610588883');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27 import com.arialyy.aria.core.download.DownloadEntity;                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  28 =======                                                                                                  </span>
<span class="1292836758351739604" onmouseenter="enter('1292836758351739604');" onmouseout="out('1292836758351739604');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  29 import com.arialyy.aria.core.inf.AbsNormalTask;                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  30 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  31 import com.arialyy.aria.core.inf.IEntity;                                                                </span>
<span class="-1011357815313335831" onmouseenter="enter('-1011357815313335831');" onmouseout="out('-1011357815313335831');" style="">  32 import com.arialyy.aria.core.scheduler.ISchedulers;                                                      </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  33 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  34 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  35                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  36 /**                                                                                                      </span>
<span class="403953507969790183" onmouseenter="enter('403953507969790183');" onmouseout="out('403953507969790183');" style="">  37  * Created by lyy on 2017/2/23.                                                                          </span>
<span class="-2449944654770999762" onmouseenter="enter('-2449944654770999762');" onmouseout="out('-2449944654770999762');" style="">  38  * 上传任务                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  39  */                                                                                                      </span>
<span class="7951812777603599569" onmouseenter="enter('7951812777603599569');" onmouseout="out('7951812777603599569');" style="">  40 public class UploadTask extends AbsNormalTask&lt;UploadEntity&gt; {                                            </span>
<span class="-48564423259191708" onmouseenter="enter('-48564423259191708');" onmouseout="out('-48564423259191708');" style="">  41   private static final String TAG = &quot;UploadTask&quot;;                                                        </span>
<span  style="">  42                                                                                                          </span>
<span class="-9212286462003963920" onmouseenter="enter('-9212286462003963920');" onmouseout="out('-9212286462003963920');" style="">  43   private UploadUtil mUtil;                                                                              </span>
<span class="-6466441420798853096" onmouseenter="enter('-6466441420798853096');" onmouseout="out('-6466441420798853096');" style="">  44   private UListener mListener;                                                                           </span>
<span  style="">  45                                                                                                          </span>
<span class="8143216272030926937" onmouseenter="enter('8143216272030926937');" onmouseout="out('8143216272030926937');" style="">  46   private UploadTask(UploadTaskEntity taskEntity, Handler outHandler) {                                  </span>
<span class="-516864359291379858" onmouseenter="enter('-516864359291379858');" onmouseout="out('-516864359291379858');" style="">  47     mOutHandler = outHandler;                                                                            </span>
<span class="9019271186603223430" onmouseenter="enter('9019271186603223430');" onmouseout="out('9019271186603223430');" style="">  48     mEntity = taskEntity.getEntity();                                                                    </span>
<span class="-6425870561160000081" onmouseenter="enter('-6425870561160000081');" onmouseout="out('-6425870561160000081');" style="">  49     mListener = new UListener(mOutHandler, this);                                                        </span>
<span class="-9181689321782889595" onmouseenter="enter('-9181689321782889595');" onmouseout="out('-9181689321782889595');" style="">  50     mUtil = new UploadUtil(taskEntity, mListener);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51   }                                                                                                      </span>
<span  style="">  52                                                                                                          </span>
<span class="-9027224204840754436" onmouseenter="enter('-9027224204840754436');" onmouseout="out('-9027224204840754436');" style="">  53   @Override public String getKey() {                                                                     </span>
<span class="2844108258582614869" onmouseenter="enter('2844108258582614869');" onmouseout="out('2844108258582614869');" style="">  54     return mEntity.getFilePath();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55   }                                                                                                      </span>
<span  style="">  56                                                                                                          </span>
<span class="-2237798856776801835" onmouseenter="enter('-2237798856776801835');" onmouseout="out('-2237798856776801835');" style="">  57   @Override public boolean isRunning() {                                                                 </span>
<span class="-7030310259877225970" onmouseenter="enter('-7030310259877225970');" onmouseout="out('-7030310259877225970');" style="">  58     return mUtil.isRunning();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59   }                                                                                                      </span>
<span  style="">  60                                                                                                          </span>
<span class="2908281040877937362" onmouseenter="enter('2908281040877937362');" onmouseout="out('2908281040877937362');" style="">  61   @Override public void start() {                                                                        </span>
<span class="1824095819662453088" onmouseenter="enter('1824095819662453088');" onmouseout="out('1824095819662453088');" style="">  62     if (mUtil.isRunning()) {                                                                             </span>
<span class="10798559816801575" onmouseenter="enter('10798559816801575');" onmouseout="out('10798559816801575');" style="">  63       Log.d(TAG, &quot;任务正在下载&quot;);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  64     } else {                                                                                             </span>
<span class="7551408284313429024" onmouseenter="enter('7551408284313429024');" onmouseout="out('7551408284313429024');" style="">  65       if (mListener == null) {                                                                           </span>
<span class="6491904422728072551" onmouseenter="enter('6491904422728072551');" onmouseout="out('6491904422728072551');" style="">  66         mListener = new UploadTask.UListener(mOutHandler, this);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67       }                                                                                                  </span>
<span class="-1185009500705100744" onmouseenter="enter('-1185009500705100744');" onmouseout="out('-1185009500705100744');" style="">  68       mUtil.start();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70   }                                                                                                      </span>
<span  style="">  71                                                                                                          </span>
<span class="6276273225669041403" onmouseenter="enter('6276273225669041403');" onmouseout="out('6276273225669041403');" style="">  72   @Override public void stop() {                                                                         </span>
<span  style="">  73                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74   }                                                                                                      </span>
<span  style="">  75                                                                                                          </span>
<span class="305234216015554819" onmouseenter="enter('305234216015554819');" onmouseout="out('305234216015554819');" style="">  76   @Override public void cancel() {                                                                       </span>
<span  style="">  77                                                                                                          </span>
<span class="-3455980629398546786" onmouseenter="enter('-3455980629398546786');" onmouseout="out('-3455980629398546786');" style="">  78     if (!mEntity.isComplete()) {                                                                         </span>
<span class="-878689237819636353" onmouseenter="enter('-878689237819636353');" onmouseout="out('-878689237819636353');" style="">  79       // 如果任务不是下载状态                                                                                      </span>
<span class="8398473292785284365" onmouseenter="enter('8398473292785284365');" onmouseout="out('8398473292785284365');" style="">  80       mUtil.cancel();                                                                                    </span>
<span class="4724878165560282777" onmouseenter="enter('4724878165560282777');" onmouseout="out('4724878165560282777');" style="">  81       mEntity.deleteData();                                                                              </span>
<span class="-8007871147257868362" onmouseenter="enter('-8007871147257868362');" onmouseout="out('-8007871147257868362');" style="">  82       if (mOutHandler != null) {                                                                         </span>
<span class="5217107786360241037" onmouseenter="enter('5217107786360241037');" onmouseout="out('5217107786360241037');" style="">  83         mOutHandler.obtainMessage(ISchedulers.CANCEL, this).sendToTarget();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86   }                                                                                                      </span>
<span  style="">  87                                                                                                          </span>
<span class="-1313325381653401769" onmouseenter="enter('-1313325381653401769');" onmouseout="out('-1313325381653401769');" style="">  88   private static class                                                                                   </span>
<span class="-867748330141471958" onmouseenter="enter('-867748330141471958');" onmouseout="out('-867748330141471958');" style="">  89   UListener extends UploadListener {                                                                     </span>
<span class="7333848870212734816" onmouseenter="enter('7333848870212734816');" onmouseout="out('7333848870212734816');" style="">  90     WeakReference&lt;Handler&gt; outHandler;                                                                   </span>
<span class="-1395916022342845790" onmouseenter="enter('-1395916022342845790');" onmouseout="out('-1395916022342845790');" style="">  91     WeakReference&lt;UploadTask&gt; task;                                                                      </span>
<span class="4165186735941775423" onmouseenter="enter('4165186735941775423');" onmouseout="out('4165186735941775423');" style="">  92     long lastLen = 0;   //上一次发送长度                                                                        </span>
<span class="-1785130162350666471" onmouseenter="enter('-1785130162350666471');" onmouseout="out('-1785130162350666471');" style="">  93     long lastTime = 0;                                                                                   </span>
<span class="-3251880946967376943" onmouseenter="enter('-3251880946967376943');" onmouseout="out('-3251880946967376943');" style="">  94     long INTERVAL_TIME = 1000;   //1m更新周期                                                                </span>
<span class="-995623574026977490" onmouseenter="enter('-995623574026977490');" onmouseout="out('-995623574026977490');" style="">  95     boolean isFirst = true;                                                                              </span>
<span class="145085728347001964" onmouseenter="enter('145085728347001964');" onmouseout="out('145085728347001964');" style="">  96     UploadEntity entity;                                                                                 </span>
<span class="4103820747141125151" onmouseenter="enter('4103820747141125151');" onmouseout="out('4103820747141125151');" style="">  97     boolean isConvertSpeed = false;                                                                      </span>
<span class="8963053501568911626" onmouseenter="enter('8963053501568911626');" onmouseout="out('8963053501568911626');" style="">  98     Context context;                                                                                     </span>
<span  style="">  99                                                                                                          </span>
<span class="-3725981275533116928" onmouseenter="enter('-3725981275533116928');" onmouseout="out('-3725981275533116928');" style=""> 100     UListener(Handler outHandle, UploadTask task) {                                                      </span>
<span class="7973565467859160609" onmouseenter="enter('7973565467859160609');" onmouseout="out('7973565467859160609');" style=""> 101       this.outHandler = new WeakReference&lt;&gt;(outHandle);                                                  </span>
<span class="1814841524841575643" onmouseenter="enter('1814841524841575643');" onmouseout="out('1814841524841575643');" style=""> 102       this.task = new WeakReference&lt;&gt;(task);                                                             </span>
<span class="6639542599046196708" onmouseenter="enter('6639542599046196708');" onmouseout="out('6639542599046196708');" style=""> 103       entity = this.task.get().getEntity();                                                              </span>
<span class="-3292822099803666113" onmouseenter="enter('-3292822099803666113');" onmouseout="out('-3292822099803666113');" style=""> 104       context = AriaManager.APP;                                                                         </span>
<span class="2480991993121624779" onmouseenter="enter('2480991993121624779');" onmouseout="out('2480991993121624779');" style=""> 105       final AriaManager manager = AriaManager.getInstance(context);                                      </span>
<span class="-1006399936797699118" onmouseenter="enter('-1006399936797699118');" onmouseout="out('-1006399936797699118');" style=""> 106       isConvertSpeed = manager.getUploadConfig().isConvertSpeed();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span  style=""> 108                                                                                                          </span>
<span class="1941248740392522719" onmouseenter="enter('1941248740392522719');" onmouseout="out('1941248740392522719');" style=""> 109     @Override public void onPre() {                                                                      </span>
<span class="6769389119254873713" onmouseenter="enter('6769389119254873713');" onmouseout="out('6769389119254873713');" style=""> 110       sendInState2Target(ISchedulers.PRE);                                                               </span>
<span class="1272045713932667636" onmouseenter="enter('1272045713932667636');" onmouseout="out('1272045713932667636');" style=""> 111       saveData(IEntity.STATE_PRE, -1);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112     }                                                                                                    </span>
<span  style=""> 113                                                                                                          </span>
<span class="-6235441032293659444" onmouseenter="enter('-6235441032293659444');" onmouseout="out('-6235441032293659444');" style=""> 114     @Override public void onPostPre(long fileSize) {                                                     </span>
<span class="-404964478618383017" onmouseenter="enter('-404964478618383017');" onmouseout="out('-404964478618383017');" style=""> 115       super.onPostPre(fileSize);                                                                         </span>
<span class="-8919115203469377593" onmouseenter="enter('-8919115203469377593');" onmouseout="out('-8919115203469377593');" style=""> 116       entity.setFileSize(fileSize);                                                                      </span>
<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style=""> 117       sendInState2Target(ISchedulers.POST_PRE);                                                          </span>
<span class="-5812366890446436095" onmouseenter="enter('-5812366890446436095');" onmouseout="out('-5812366890446436095');" style=""> 118       saveData(IEntity.STATE_POST_PRE, 0);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119     }                                                                                                    </span>
<span  style=""> 120                                                                                                          </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style=""> 121     @Override public void onStart() {                                                                    </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style=""> 122       sendInState2Target(ISchedulers.START);                                                             </span>
<span class="-4647267931158758171" onmouseenter="enter('-4647267931158758171');" onmouseout="out('-4647267931158758171');" style=""> 123       saveData(IEntity.STATE_RUNNING, 0);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style=""> 126     @Override public void onResume(long resumeLocation) {                                                </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 127 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 128       uploadEntity.setState(IEntity.STATE_RUNNING);                                                      </span>
<span class="-2450372929597487074" onmouseenter="enter('-2450372929597487074');" onmouseout="out('-2450372929597487074');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 129       sendInState2Target(ISchedulers.RESUME);                                                            </span>
<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 130       sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                    </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 131 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-6235441032293659444" onmouseenter="enter('-6235441032293659444');" onmouseout="out('-6235441032293659444');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132     @Override public void onPostPre(long fileSize) {                                                     </span>
<span class="-404964478618383017" onmouseenter="enter('-404964478618383017');" onmouseout="out('-404964478618383017');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133       super.onPostPre(fileSize);                                                                         </span>
<span class="8202102582283430979" onmouseenter="enter('8202102582283430979');" onmouseout="out('8202102582283430979');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134       uploadEntity.setFileSize(fileSize);                                                                </span>
<span class="5394749751465679999" onmouseenter="enter('5394749751465679999');" onmouseout="out('5394749751465679999');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135       uploadEntity.setState(IEntity.STATE_POST_PRE);                                                     </span>
<span class="-3826473697353831013" onmouseenter="enter('-3826473697353831013');" onmouseout="out('-3826473697353831013');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136       sendIntent(Aria.ACTION_POST_PRE, 0);                                                               </span>
<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137       sendInState2Target(ISchedulers.POST_PRE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139                                                                                                          </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140     @Override public void onStart() {                                                                    </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141       uploadEntity.setState(IEntity.STATE_RUNNING);                                                      </span>
<span class="1453973828620924818" onmouseenter="enter('1453973828620924818');" onmouseout="out('1453973828620924818');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142       sendIntent(Aria.ACTION_START, 0);                                                                  </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143       sendInState2Target(ISchedulers.START);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145                                                                                                          </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146     @Override public void onResume(long resumeLocation) {                                                </span>
<span class="2904464502949824974" onmouseenter="enter('2904464502949824974');" onmouseout="out('2904464502949824974');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147       uploadEntity.setState(DownloadEntity.STATE_RUNNING);                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 148 =======                                                                                                  </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149       sendInState2Target(DownloadSchedulers.RESUME);                                                     </span>
<span class="8518386853479101383" onmouseenter="enter('8518386853479101383');" onmouseout="out('8518386853479101383');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 150       saveData(IEntity.STATE_RUNNING, resumeLocation);                                                   </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 151 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="3409726051444324452" onmouseenter="enter('3409726051444324452');" onmouseout="out('3409726051444324452');" style=""> 154     @Override public void onStop(long stopLocation) {                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 155 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-4306861482015046346" onmouseenter="enter('-4306861482015046346');" onmouseout="out('-4306861482015046346');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 156       uploadEntity.setState(IEntity.STATE_STOP);                                                         </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 157 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158       sendInState2Target(ISchedulers.POST_PRE);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160                                                                                                          </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161     @Override public void onStart() {                                                                    </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162       uploadEntity.setState(IEntity.STATE_RUNNING);                                                      </span>
<span class="1453973828620924818" onmouseenter="enter('1453973828620924818');" onmouseout="out('1453973828620924818');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163       sendIntent(Aria.ACTION_START, 0);                                                                  </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164       sendInState2Target(ISchedulers.START);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166                                                                                                          </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167     @Override public void onResume(long resumeLocation) {                                                </span>
<span class="2904464502949824974" onmouseenter="enter('2904464502949824974');" onmouseout="out('2904464502949824974');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168       uploadEntity.setState(DownloadEntity.STATE_RUNNING);                                               </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169       sendInState2Target(DownloadSchedulers.RESUME);                                                     </span>
<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170       sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 172                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 173 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 174 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 175       handleSpeed(0);                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 176 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="6750804523428569640" onmouseenter="enter('6750804523428569640');" onmouseout="out('6750804523428569640');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 177       sendInState2Target(ISchedulers.STOP);                                                              </span>
<span class="1906645490253172748" onmouseenter="enter('1906645490253172748');" onmouseout="out('1906645490253172748');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 178       sendIntent(Aria.ACTION_STOP, stopLocation);                                                        </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 179 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181                                                                                                          </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182     @Override public void onStart() {                                                                    </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183       uploadEntity.setState(IEntity.STATE_RUNNING);                                                      </span>
<span class="1453973828620924818" onmouseenter="enter('1453973828620924818');" onmouseout="out('1453973828620924818');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184       sendIntent(Aria.ACTION_START, 0);                                                                  </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 185       sendInState2Target(ISchedulers.START);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 186     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 187                                                                                                          </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 188     @Override public void onResume(long resumeLocation) {                                                </span>
<span class="2904464502949824974" onmouseenter="enter('2904464502949824974');" onmouseout="out('2904464502949824974');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 189       uploadEntity.setState(DownloadEntity.STATE_RUNNING);                                               </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 190       sendInState2Target(DownloadSchedulers.RESUME);                                                     </span>
<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191       sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193                                                                                                          </span>
<span class="3409726051444324452" onmouseenter="enter('3409726051444324452');" onmouseout="out('3409726051444324452');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 194     @Override public void onStop(long stopLocation) {                                                    </span>
<span class="-7955475604668464285" onmouseenter="enter('-7955475604668464285');" onmouseout="out('-7955475604668464285');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195       uploadEntity.setState(DownloadEntity.STATE_STOP);                                                  </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196       handleSpeed(0);                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 197 =======                                                                                                  </span>
<span class="4355850862977331006" onmouseenter="enter('4355850862977331006');" onmouseout="out('4355850862977331006');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198       sendInState2Target(DownloadSchedulers.STOP);                                                       </span>
<span class="-1696356608019189548" onmouseenter="enter('-1696356608019189548');" onmouseout="out('-1696356608019189548');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 199       saveData(IEntity.STATE_STOP, stopLocation);                                                        </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 200 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style=""> 203     @Override public void onProgress(long currentLocation) {                                             </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style=""> 204       if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                       </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style=""> 205         long speed = currentLocation - lastLen;                                                          </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style=""> 206         lastTime = System.currentTimeMillis();                                                           </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style=""> 207         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style=""> 208           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style=""> 209           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style=""> 211         handleSpeed(speed);                                                                              </span>
<span class="-4238976656134225029" onmouseenter="enter('-4238976656134225029');" onmouseout="out('-4238976656134225029');" style=""> 212         entity.setCurrentProgress(currentLocation);                                                      </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style=""> 213         lastLen = currentLocation;                                                                       </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 214 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-8933350839933081633" onmouseenter="enter('-8933350839933081633');" onmouseout="out('-8933350839933081633');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215         sendInState2Target(ISchedulers.RUNNING);                                                         </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 216         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 217 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-7955475604668464285" onmouseenter="enter('-7955475604668464285');" onmouseout="out('-7955475604668464285');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 218       uploadEntity.setState(DownloadEntity.STATE_STOP);                                                  </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 219       handleSpeed(0);                                                                                    </span>
<span class="4355850862977331006" onmouseenter="enter('4355850862977331006');" onmouseout="out('4355850862977331006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220       sendInState2Target(DownloadSchedulers.STOP);                                                       </span>
<span class="1906645490253172748" onmouseenter="enter('1906645490253172748');" onmouseout="out('1906645490253172748');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 221       sendIntent(Aria.ACTION_STOP, stopLocation);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 222     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 223                                                                                                          </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 224     @Override public void onProgress(long currentLocation) {                                             </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 225       if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                       </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 226         long speed = currentLocation - lastLen;                                                          </span>
<span class="4057178467869940680" onmouseenter="enter('4057178467869940680');" onmouseout="out('4057178467869940680');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 227         sendIntent.putExtra(Aria.CURRENT_LOCATION, currentLocation);                                     </span>
<span class="9056633131567108545" onmouseenter="enter('9056633131567108545');" onmouseout="out('9056633131567108545');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 228         sendIntent.putExtra(Aria.CURRENT_SPEED, speed);                                                  </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 229         lastTime = System.currentTimeMillis();                                                           </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 230         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 231           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 232           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 233         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 234         handleSpeed(speed);                                                                              </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 235         uploadEntity.setCurrentProgress(currentLocation);                                                </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 236         lastLen = currentLocation;                                                                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 237 =======                                                                                                  </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 238         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 239 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241     }                                                                                                    </span>
<span  style=""> 242                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style=""> 243     @Override public void onCancel() {                                                                   </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 244 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="4589949575651396085" onmouseenter="enter('4589949575651396085');" onmouseout="out('4589949575651396085');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 245       uploadEntity.setState(IEntity.STATE_CANCEL);                                                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 246 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 247                                                                                                          </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 248     @Override public void onProgress(long currentLocation) {                                             </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 249       if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                       </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 250         long speed = currentLocation - lastLen;                                                          </span>
<span class="4057178467869940680" onmouseenter="enter('4057178467869940680');" onmouseout="out('4057178467869940680');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 251         sendIntent.putExtra(Aria.CURRENT_LOCATION, currentLocation);                                     </span>
<span class="9056633131567108545" onmouseenter="enter('9056633131567108545');" onmouseout="out('9056633131567108545');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 252         sendIntent.putExtra(Aria.CURRENT_SPEED, speed);                                                  </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 253         lastTime = System.currentTimeMillis();                                                           </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 254         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 255           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 256           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 257         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 258         handleSpeed(speed);                                                                              </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 259         uploadEntity.setCurrentProgress(currentLocation);                                                </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 260         lastLen = currentLocation;                                                                       </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 261         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 262         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 263       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 264     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 265                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 266 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 267 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 268       handleSpeed(0);                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 269 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-8974049740864780035" onmouseenter="enter('-8974049740864780035');" onmouseout="out('-8974049740864780035');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 270       sendInState2Target(ISchedulers.CANCEL);                                                            </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 271       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 272       uploadEntity.deleteData();                                                                         </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 273 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 274     @Override public void onProgress(long currentLocation) {                                             </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 275       if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                       </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 276         long speed = currentLocation - lastLen;                                                          </span>
<span class="4057178467869940680" onmouseenter="enter('4057178467869940680');" onmouseout="out('4057178467869940680');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 277         sendIntent.putExtra(Aria.CURRENT_LOCATION, currentLocation);                                     </span>
<span class="9056633131567108545" onmouseenter="enter('9056633131567108545');" onmouseout="out('9056633131567108545');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 278         sendIntent.putExtra(Aria.CURRENT_SPEED, speed);                                                  </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 279         lastTime = System.currentTimeMillis();                                                           </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 280         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 281           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 282           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 283         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 284         handleSpeed(speed);                                                                              </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 285         uploadEntity.setCurrentProgress(currentLocation);                                                </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 286         lastLen = currentLocation;                                                                       </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 287         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 288         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 289       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 290     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 291                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 292     @Override public void onCancel() {                                                                   </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 293       uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 294       handleSpeed(0);                                                                                    </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 295       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 296 =======                                                                                                  </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 297       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="-8209498279616463234" onmouseenter="enter('-8209498279616463234');" onmouseout="out('-8209498279616463234');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 298       saveData(IEntity.STATE_CANCEL, -1);                                                                </span>
<span class="8489197424479237881" onmouseenter="enter('8489197424479237881');" onmouseout="out('8489197424479237881');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 299       entity.deleteData();                                                                               </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 300 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301     }                                                                                                    </span>
<span  style=""> 302                                                                                                          </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style=""> 303     @Override public void onComplete() {                                                                 </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 304 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="1494665695645556959" onmouseenter="enter('1494665695645556959');" onmouseout="out('1494665695645556959');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 305       uploadEntity.setState(IEntity.STATE_COMPLETE);                                                     </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 306       uploadEntity.setComplete(true);                                                                    </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 307 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 308         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 309           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 310           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 311         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 312         handleSpeed(speed);                                                                              </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 313         uploadEntity.setCurrentProgress(currentLocation);                                                </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 314         lastLen = currentLocation;                                                                       </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 315         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 316         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 317       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 318     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 319                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 320     @Override public void onCancel() {                                                                   </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 321       uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 322       handleSpeed(0);                                                                                    </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 323       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 324       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 325       uploadEntity.deleteData();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327                                                                                                          </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 328     @Override public void onComplete() {                                                                 </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 329 =======                                                                                                  </span>
<span class="-3659910208889661414" onmouseenter="enter('-3659910208889661414');" onmouseout="out('-3659910208889661414');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 330       entity.setComplete(true);                                                                          </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 331 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 332       handleSpeed(0);                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 333 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-1833390057912781983" onmouseenter="enter('-1833390057912781983');" onmouseout="out('-1833390057912781983');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 334       sendInState2Target(ISchedulers.COMPLETE);                                                          </span>
<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 335       sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                      </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 336 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 337           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 338         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 339         handleSpeed(speed);                                                                              </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 340         uploadEntity.setCurrentProgress(currentLocation);                                                </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 341         lastLen = currentLocation;                                                                       </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 342         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 343         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 344       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 345     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 346                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 347     @Override public void onCancel() {                                                                   </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 348       uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 349       handleSpeed(0);                                                                                    </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 350       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 351       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 352       uploadEntity.deleteData();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 353     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 354                                                                                                          </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 355     @Override public void onComplete() {                                                                 </span>
<span class="-7026235990786915660" onmouseenter="enter('-7026235990786915660');" onmouseout="out('-7026235990786915660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 356       uploadEntity.setState(DownloadEntity.STATE_COMPLETE);                                              </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 357       uploadEntity.setComplete(true);                                                                    </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 358       handleSpeed(0);                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 359 =======                                                                                                  </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 360       sendInState2Target(DownloadSchedulers.COMPLETE);                                                   </span>
<span class="-4243478454233770036" onmouseenter="enter('-4243478454233770036');" onmouseout="out('-4243478454233770036');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 361       saveData(IEntity.STATE_COMPLETE, entity.getFileSize());                                            </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 362 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363     }                                                                                                    </span>
<span  style=""> 364                                                                                                          </span>
<span class="-8845666459040584461" onmouseenter="enter('-8845666459040584461');" onmouseout="out('-8845666459040584461');" style=""> 365     @Override public void onFail() {                                                                     </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 366 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-2424267164941877802" onmouseenter="enter('-2424267164941877802');" onmouseout="out('-2424267164941877802');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 367       uploadEntity.setFailNum(uploadEntity.getFailNum() + 1);                                            </span>
<span class="6069268799509013390" onmouseenter="enter('6069268799509013390');" onmouseout="out('6069268799509013390');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 368       uploadEntity.setState(IEntity.STATE_FAIL);                                                         </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 369 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 370         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 371         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 372       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 373     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 374                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 375     @Override public void onCancel() {                                                                   </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 376       uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 377       handleSpeed(0);                                                                                    </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 378       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 379       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 380       uploadEntity.deleteData();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 381     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 382                                                                                                          </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 383     @Override public void onComplete() {                                                                 </span>
<span class="-7026235990786915660" onmouseenter="enter('-7026235990786915660');" onmouseout="out('-7026235990786915660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 384       uploadEntity.setState(DownloadEntity.STATE_COMPLETE);                                              </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 385       uploadEntity.setComplete(true);                                                                    </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 386       handleSpeed(0);                                                                                    </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 387       sendInState2Target(DownloadSchedulers.COMPLETE);                                                   </span>
<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 388       sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 389     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 390                                                                                                          </span>
<span class="-8845666459040584461" onmouseenter="enter('-8845666459040584461');" onmouseout="out('-8845666459040584461');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 391     @Override public void onFail() {                                                                     </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 392 =======                                                                                                  </span>
<span class="-1614602823543137763" onmouseenter="enter('-1614602823543137763');" onmouseout="out('-1614602823543137763');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 393       entity.setFailNum(entity.getFailNum() + 1);                                                        </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 394 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 395       handleSpeed(0);                                                                                    </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 396 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6455920480656012873" onmouseenter="enter('-6455920480656012873');" onmouseout="out('-6455920480656012873');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 397       sendInState2Target(ISchedulers.FAIL);                                                              </span>
<span class="-5033899741291131460" onmouseenter="enter('-5033899741291131460');" onmouseout="out('-5033899741291131460');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 398       sendIntent(Aria.ACTION_FAIL, -1);                                                                  </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 399 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 400       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 401     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 402                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 403     @Override public void onCancel() {                                                                   </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 404       uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 405       handleSpeed(0);                                                                                    </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 406       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 407       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 408       uploadEntity.deleteData();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 409     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 410                                                                                                          </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 411     @Override public void onComplete() {                                                                 </span>
<span class="-7026235990786915660" onmouseenter="enter('-7026235990786915660');" onmouseout="out('-7026235990786915660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 412       uploadEntity.setState(DownloadEntity.STATE_COMPLETE);                                              </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 413       uploadEntity.setComplete(true);                                                                    </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 414       handleSpeed(0);                                                                                    </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 415       sendInState2Target(DownloadSchedulers.COMPLETE);                                                   </span>
<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 416       sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 417     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 418                                                                                                          </span>
<span class="-8845666459040584461" onmouseenter="enter('-8845666459040584461');" onmouseout="out('-8845666459040584461');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 419     @Override public void onFail() {                                                                     </span>
<span class="-2424267164941877802" onmouseenter="enter('-2424267164941877802');" onmouseout="out('-2424267164941877802');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 420       uploadEntity.setFailNum(uploadEntity.getFailNum() + 1);                                            </span>
<span class="2017604368611205733" onmouseenter="enter('2017604368611205733');" onmouseout="out('2017604368611205733');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 421       uploadEntity.setState(DownloadEntity.STATE_FAIL);                                                  </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 422       handleSpeed(0);                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 423 =======                                                                                                  </span>
<span class="10069564286438765" onmouseenter="enter('10069564286438765');" onmouseout="out('10069564286438765');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 424       sendInState2Target(DownloadSchedulers.FAIL);                                                       </span>
<span class="825111020644911099" onmouseenter="enter('825111020644911099');" onmouseout="out('825111020644911099');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 425       saveData(IEntity.STATE_FAIL, -1);                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 426 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427     }                                                                                                    </span>
<span  style=""> 428                                                                                                          </span>
<span class="7889271447688685611" onmouseenter="enter('7889271447688685611');" onmouseout="out('7889271447688685611');" style=""> 429     private void handleSpeed(long speed) {                                                               </span>
<span class="1151844561754699994" onmouseenter="enter('1151844561754699994');" onmouseout="out('1151844561754699994');" style=""> 430       if (isConvertSpeed) {                                                                              </span>
<span class="-1064122449029006503" onmouseenter="enter('-1064122449029006503');" onmouseout="out('-1064122449029006503');" style=""> 431         entity.setConvertSpeed(CommonUtil.formatFileSize(speed) + &quot;/s&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 432       } else {                                                                                           </span>
<span class="-8903176931212217262" onmouseenter="enter('-8903176931212217262');" onmouseout="out('-8903176931212217262');" style=""> 433         entity.setSpeed(speed);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435     }                                                                                                    </span>
<span  style=""> 436                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 437     /**                                                                                                  </span>
<span class="5309333678065732533" onmouseenter="enter('5309333678065732533');" onmouseout="out('5309333678065732533');" style=""> 438      * 将任务状态发送给下载器                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 439      *                                                                                                   </span>
<span class="4745042362407675676" onmouseenter="enter('4745042362407675676');" onmouseout="out('4745042362407675676');" style=""> 440      * @param state {@link ISchedulers#START}                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 441      */                                                                                                  </span>
<span class="3842237707578177232" onmouseenter="enter('3842237707578177232');" onmouseout="out('3842237707578177232');" style=""> 442     private void sendInState2Target(int state) {                                                         </span>
<span class="14240507737599715" onmouseenter="enter('14240507737599715');" onmouseout="out('14240507737599715');" style=""> 443       if (outHandler.get() != null) {                                                                    </span>
<span class="747666252236551572" onmouseenter="enter('747666252236551572');" onmouseout="out('747666252236551572');" style=""> 444         outHandler.get().obtainMessage(state, task.get()).sendToTarget();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446     }                                                                                                    </span>
<span  style=""> 447                                                                                                          </span>
<span class="-8417795030437306969" onmouseenter="enter('-8417795030437306969');" onmouseout="out('-8417795030437306969');" style=""> 448     private void saveData(int state, long location) {                                                    </span>
<span class="1870432086074469274" onmouseenter="enter('1870432086074469274');" onmouseout="out('1870432086074469274');" style=""> 449       entity.setState(state);                                                                            </span>
<span class="5476417475415693432" onmouseenter="enter('5476417475415693432');" onmouseout="out('5476417475415693432');" style=""> 450       entity.setComplete(state == IEntity.STATE_COMPLETE);                                               </span>
<span class="8919645422588846117" onmouseenter="enter('8919645422588846117');" onmouseout="out('8919645422588846117');" style=""> 451       entity.setCurrentProgress(location);                                                               </span>
<span class="-733466174510760140" onmouseenter="enter('-733466174510760140');" onmouseout="out('-733466174510760140');" style=""> 452       entity.update();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454   }                                                                                                      </span>
<span  style=""> 455                                                                                                          </span>
<span class="2010609695383714647" onmouseenter="enter('2010609695383714647');" onmouseout="out('2010609695383714647');" style=""> 456   public static class Builder {                                                                          </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style=""> 457     private Handler mOutHandler;                                                                         </span>
<span class="-7667731813459538063" onmouseenter="enter('-7667731813459538063');" onmouseout="out('-7667731813459538063');" style=""> 458     private UploadTaskEntity mTaskEntity;                                                                </span>
<span class="-3189317552395849100" onmouseenter="enter('-3189317552395849100');" onmouseout="out('-3189317552395849100');" style=""> 459     private String mTargetName;                                                                          </span>
<span  style=""> 460                                                                                                          </span>
<span class="-5398579486846956133" onmouseenter="enter('-5398579486846956133');" onmouseout="out('-5398579486846956133');" style=""> 461     public void setOutHandler(ISchedulers outHandler) {                                                  </span>
<span class="1621577143461664665" onmouseenter="enter('1621577143461664665');" onmouseout="out('1621577143461664665');" style=""> 462       mOutHandler = new Handler(outHandler);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463     }                                                                                                    </span>
<span  style=""> 464                                                                                                          </span>
<span class="4605908466670558074" onmouseenter="enter('4605908466670558074');" onmouseout="out('4605908466670558074');" style=""> 465     public void setUploadTaskEntity(UploadTaskEntity taskEntity) {                                       </span>
<span class="8662994215762856538" onmouseenter="enter('8662994215762856538');" onmouseout="out('8662994215762856538');" style=""> 466       mTaskEntity = taskEntity;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467     }                                                                                                    </span>
<span  style=""> 468                                                                                                          </span>
<span class="5139368500185827813" onmouseenter="enter('5139368500185827813');" onmouseout="out('5139368500185827813');" style=""> 469     public void setTargetName(String targetName) {                                                       </span>
<span class="7065259443227126232" onmouseenter="enter('7065259443227126232');" onmouseout="out('7065259443227126232');" style=""> 470       mTargetName = targetName;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471     }                                                                                                    </span>
<span  style=""> 472                                                                                                          </span>
<span class="-5965884622997208966" onmouseenter="enter('-5965884622997208966');" onmouseout="out('-5965884622997208966');" style=""> 473     public Builder() {                                                                                   </span>
<span  style=""> 474                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475     }                                                                                                    </span>
<span  style=""> 476                                                                                                          </span>
<span class="-3884470360854325651" onmouseenter="enter('-3884470360854325651');" onmouseout="out('-3884470360854325651');" style=""> 477     public UploadTask build() {                                                                          </span>
<span class="5566441679723565284" onmouseenter="enter('5566441679723565284');" onmouseout="out('5566441679723565284');" style=""> 478       UploadTask task = new UploadTask(mTaskEntity, mOutHandler);                                        </span>
<span class="8488479071402332460" onmouseenter="enter('8488479071402332460');" onmouseout="out('8488479071402332460');" style=""> 479       task.setTargetName(mTargetName);                                                                   </span>
<span class="8824306751398948689" onmouseenter="enter('8824306751398948689');" onmouseout="out('8824306751398948689');" style=""> 480       return task;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="2296433254624375089" onmouseenter="enter('2296433254624375089');" onmouseout="out('2296433254624375089');" style="">  16 package com.arialyy.aria.core.upload;                                                                    </span>
<span  style="">  17                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  18 import android.content.Context;                                                                          </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  19 import android.os.Handler;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  20 import android.util.Log;                                                                                 </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  21 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="1292836758351739604" onmouseenter="enter('1292836758351739604');" onmouseout="out('1292836758351739604');" style="">  22 import com.arialyy.aria.core.inf.AbsNormalTask;                                                          </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  23 import com.arialyy.aria.core.inf.IEntity;                                                                </span>
<span class="-1011357815313335831" onmouseenter="enter('-1011357815313335831');" onmouseout="out('-1011357815313335831');" style="">  24 import com.arialyy.aria.core.scheduler.ISchedulers;                                                      </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  25 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  26 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  27                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  28 /**                                                                                                      </span>
<span class="403953507969790183" onmouseenter="enter('403953507969790183');" onmouseout="out('403953507969790183');" style="">  29  * Created by lyy on 2017/2/23.                                                                          </span>
<span class="-2449944654770999762" onmouseenter="enter('-2449944654770999762');" onmouseout="out('-2449944654770999762');" style="">  30  * 上传任务                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  31  */                                                                                                      </span>
<span class="7951812777603599569" onmouseenter="enter('7951812777603599569');" onmouseout="out('7951812777603599569');" style="">  32 public class UploadTask extends AbsNormalTask&lt;UploadEntity&gt; {                                            </span>
<span class="-48564423259191708" onmouseenter="enter('-48564423259191708');" onmouseout="out('-48564423259191708');" style="">  33   private static final String TAG = &quot;UploadTask&quot;;                                                        </span>
<span  style="">  34                                                                                                          </span>
<span class="-9212286462003963920" onmouseenter="enter('-9212286462003963920');" onmouseout="out('-9212286462003963920');" style="">  35   private UploadUtil mUtil;                                                                              </span>
<span class="-6466441420798853096" onmouseenter="enter('-6466441420798853096');" onmouseout="out('-6466441420798853096');" style="">  36   private UListener mListener;                                                                           </span>
<span  style="">  37                                                                                                          </span>
<span class="8143216272030926937" onmouseenter="enter('8143216272030926937');" onmouseout="out('8143216272030926937');" style="">  38   private UploadTask(UploadTaskEntity taskEntity, Handler outHandler) {                                  </span>
<span class="-516864359291379858" onmouseenter="enter('-516864359291379858');" onmouseout="out('-516864359291379858');" style="">  39     mOutHandler = outHandler;                                                                            </span>
<span class="9019271186603223430" onmouseenter="enter('9019271186603223430');" onmouseout="out('9019271186603223430');" style="">  40     mEntity = taskEntity.getEntity();                                                                    </span>
<span class="-6425870561160000081" onmouseenter="enter('-6425870561160000081');" onmouseout="out('-6425870561160000081');" style="">  41     mListener = new UListener(mOutHandler, this);                                                        </span>
<span class="-9181689321782889595" onmouseenter="enter('-9181689321782889595');" onmouseout="out('-9181689321782889595');" style="">  42     mUtil = new UploadUtil(taskEntity, mListener);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  43   }                                                                                                      </span>
<span  style="">  44                                                                                                          </span>
<span class="-9027224204840754436" onmouseenter="enter('-9027224204840754436');" onmouseout="out('-9027224204840754436');" style="">  45   @Override public String getKey() {                                                                     </span>
<span class="2844108258582614869" onmouseenter="enter('2844108258582614869');" onmouseout="out('2844108258582614869');" style="">  46     return mEntity.getFilePath();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  47   }                                                                                                      </span>
<span  style="">  48                                                                                                          </span>
<span class="-2237798856776801835" onmouseenter="enter('-2237798856776801835');" onmouseout="out('-2237798856776801835');" style="">  49   @Override public boolean isRunning() {                                                                 </span>
<span class="-7030310259877225970" onmouseenter="enter('-7030310259877225970');" onmouseout="out('-7030310259877225970');" style="">  50     return mUtil.isRunning();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51   }                                                                                                      </span>
<span  style="">  52                                                                                                          </span>
<span class="2908281040877937362" onmouseenter="enter('2908281040877937362');" onmouseout="out('2908281040877937362');" style="">  53   @Override public void start() {                                                                        </span>
<span class="1824095819662453088" onmouseenter="enter('1824095819662453088');" onmouseout="out('1824095819662453088');" style="">  54     if (mUtil.isRunning()) {                                                                             </span>
<span class="10798559816801575" onmouseenter="enter('10798559816801575');" onmouseout="out('10798559816801575');" style="">  55       Log.d(TAG, &quot;任务正在下载&quot;);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  56     } else {                                                                                             </span>
<span class="7551408284313429024" onmouseenter="enter('7551408284313429024');" onmouseout="out('7551408284313429024');" style="">  57       if (mListener == null) {                                                                           </span>
<span class="6491904422728072551" onmouseenter="enter('6491904422728072551');" onmouseout="out('6491904422728072551');" style="">  58         mListener = new UploadTask.UListener(mOutHandler, this);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59       }                                                                                                  </span>
<span class="-1185009500705100744" onmouseenter="enter('-1185009500705100744');" onmouseout="out('-1185009500705100744');" style="">  60       mUtil.start();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  61     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62   }                                                                                                      </span>
<span  style="">  63                                                                                                          </span>
<span class="6276273225669041403" onmouseenter="enter('6276273225669041403');" onmouseout="out('6276273225669041403');" style="">  64   @Override public void stop() {                                                                         </span>
<span  style="">  65                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66   }                                                                                                      </span>
<span  style="">  67                                                                                                          </span>
<span class="305234216015554819" onmouseenter="enter('305234216015554819');" onmouseout="out('305234216015554819');" style="">  68   @Override public void cancel() {                                                                       </span>
<span  style="">  69                                                                                                          </span>
<span class="-3455980629398546786" onmouseenter="enter('-3455980629398546786');" onmouseout="out('-3455980629398546786');" style="">  70     if (!mEntity.isComplete()) {                                                                         </span>
<span class="-878689237819636353" onmouseenter="enter('-878689237819636353');" onmouseout="out('-878689237819636353');" style="">  71       // 如果任务不是下载状态                                                                                      </span>
<span class="8398473292785284365" onmouseenter="enter('8398473292785284365');" onmouseout="out('8398473292785284365');" style="">  72       mUtil.cancel();                                                                                    </span>
<span class="4724878165560282777" onmouseenter="enter('4724878165560282777');" onmouseout="out('4724878165560282777');" style="">  73       mEntity.deleteData();                                                                              </span>
<span class="-8007871147257868362" onmouseenter="enter('-8007871147257868362');" onmouseout="out('-8007871147257868362');" style="">  74       if (mOutHandler != null) {                                                                         </span>
<span class="5217107786360241037" onmouseenter="enter('5217107786360241037');" onmouseout="out('5217107786360241037');" style="">  75         mOutHandler.obtainMessage(ISchedulers.CANCEL, this).sendToTarget();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78   }                                                                                                      </span>
<span  style="">  79                                                                                                          </span>
<span class="2946122989880113363" onmouseenter="enter('2946122989880113363');" onmouseout="out('2946122989880113363');" style="">  80   private static class UListener extends UploadListener {                                                </span>
<span class="7333848870212734816" onmouseenter="enter('7333848870212734816');" onmouseout="out('7333848870212734816');" style="">  81     WeakReference&lt;Handler&gt; outHandler;                                                                   </span>
<span class="-1395916022342845790" onmouseenter="enter('-1395916022342845790');" onmouseout="out('-1395916022342845790');" style="">  82     WeakReference&lt;UploadTask&gt; task;                                                                      </span>
<span class="4165186735941775423" onmouseenter="enter('4165186735941775423');" onmouseout="out('4165186735941775423');" style="">  83     long lastLen = 0;   //上一次发送长度                                                                        </span>
<span class="-1785130162350666471" onmouseenter="enter('-1785130162350666471');" onmouseout="out('-1785130162350666471');" style="">  84     long lastTime = 0;                                                                                   </span>
<span class="-3251880946967376943" onmouseenter="enter('-3251880946967376943');" onmouseout="out('-3251880946967376943');" style="">  85     long INTERVAL_TIME = 1000;   //1m更新周期                                                                </span>
<span class="-995623574026977490" onmouseenter="enter('-995623574026977490');" onmouseout="out('-995623574026977490');" style="">  86     boolean isFirst = true;                                                                              </span>
<span class="145085728347001964" onmouseenter="enter('145085728347001964');" onmouseout="out('145085728347001964');" style="">  87     UploadEntity entity;                                                                                 </span>
<span class="4103820747141125151" onmouseenter="enter('4103820747141125151');" onmouseout="out('4103820747141125151');" style="">  88     boolean isConvertSpeed = false;                                                                      </span>
<span class="8963053501568911626" onmouseenter="enter('8963053501568911626');" onmouseout="out('8963053501568911626');" style="">  89     Context context;                                                                                     </span>
<span  style="">  90                                                                                                          </span>
<span class="-3725981275533116928" onmouseenter="enter('-3725981275533116928');" onmouseout="out('-3725981275533116928');" style="">  91     UListener(Handler outHandle, UploadTask task) {                                                      </span>
<span class="7973565467859160609" onmouseenter="enter('7973565467859160609');" onmouseout="out('7973565467859160609');" style="">  92       this.outHandler = new WeakReference&lt;&gt;(outHandle);                                                  </span>
<span class="1814841524841575643" onmouseenter="enter('1814841524841575643');" onmouseout="out('1814841524841575643');" style="">  93       this.task = new WeakReference&lt;&gt;(task);                                                             </span>
<span class="6639542599046196708" onmouseenter="enter('6639542599046196708');" onmouseout="out('6639542599046196708');" style="">  94       entity = this.task.get().getEntity();                                                              </span>
<span class="-3292822099803666113" onmouseenter="enter('-3292822099803666113');" onmouseout="out('-3292822099803666113');" style="">  95       context = AriaManager.APP;                                                                         </span>
<span class="2480991993121624779" onmouseenter="enter('2480991993121624779');" onmouseout="out('2480991993121624779');" style="">  96       final AriaManager manager = AriaManager.getInstance(context);                                      </span>
<span class="-1006399936797699118" onmouseenter="enter('-1006399936797699118');" onmouseout="out('-1006399936797699118');" style="">  97       isConvertSpeed = manager.getUploadConfig().isConvertSpeed();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98     }                                                                                                    </span>
<span  style="">  99                                                                                                          </span>
<span class="1941248740392522719" onmouseenter="enter('1941248740392522719');" onmouseout="out('1941248740392522719');" style=""> 100     @Override public void onPre() {                                                                      </span>
<span class="6769389119254873713" onmouseenter="enter('6769389119254873713');" onmouseout="out('6769389119254873713');" style=""> 101       sendInState2Target(ISchedulers.PRE);                                                               </span>
<span class="1272045713932667636" onmouseenter="enter('1272045713932667636');" onmouseout="out('1272045713932667636');" style=""> 102       saveData(IEntity.STATE_PRE, -1);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103     }                                                                                                    </span>
<span  style=""> 104                                                                                                          </span>
<span class="-6235441032293659444" onmouseenter="enter('-6235441032293659444');" onmouseout="out('-6235441032293659444');" style=""> 105     @Override public void onPostPre(long fileSize) {                                                     </span>
<span class="-404964478618383017" onmouseenter="enter('-404964478618383017');" onmouseout="out('-404964478618383017');" style=""> 106       super.onPostPre(fileSize);                                                                         </span>
<span class="-8919115203469377593" onmouseenter="enter('-8919115203469377593');" onmouseout="out('-8919115203469377593');" style=""> 107       entity.setFileSize(fileSize);                                                                      </span>
<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style=""> 108       sendInState2Target(ISchedulers.POST_PRE);                                                          </span>
<span class="-5812366890446436095" onmouseenter="enter('-5812366890446436095');" onmouseout="out('-5812366890446436095');" style=""> 109       saveData(IEntity.STATE_POST_PRE, 0);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110     }                                                                                                    </span>
<span  style=""> 111                                                                                                          </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style=""> 112     @Override public void onStart() {                                                                    </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style=""> 113       sendInState2Target(ISchedulers.START);                                                             </span>
<span class="-4647267931158758171" onmouseenter="enter('-4647267931158758171');" onmouseout="out('-4647267931158758171');" style=""> 114       saveData(IEntity.STATE_RUNNING, 0);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115     }                                                                                                    </span>
<span  style=""> 116                                                                                                          </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style=""> 117     @Override public void onResume(long resumeLocation) {                                                </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 118 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 119       uploadEntity.setState(IEntity.STATE_RUNNING);                                                      </span>
<span class="-2450372929597487074" onmouseenter="enter('-2450372929597487074');" onmouseout="out('-2450372929597487074');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 120       sendInState2Target(ISchedulers.RESUME);                                                            </span>
<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 121       sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                    </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 122 ||||||| BASE                                                                                             </span>
<span class="2904464502949824974" onmouseenter="enter('2904464502949824974');" onmouseout="out('2904464502949824974');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123       uploadEntity.setState(DownloadEntity.STATE_RUNNING);                                               </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124       sendInState2Target(DownloadSchedulers.RESUME);                                                     </span>
<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125       sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 126 =======                                                                                                  </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 127       sendInState2Target(DownloadSchedulers.RESUME);                                                     </span>
<span class="8518386853479101383" onmouseenter="enter('8518386853479101383');" onmouseout="out('8518386853479101383');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 128       saveData(IEntity.STATE_RUNNING, resumeLocation);                                                   </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 129 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="3409726051444324452" onmouseenter="enter('3409726051444324452');" onmouseout="out('3409726051444324452');" style=""> 132     @Override public void onStop(long stopLocation) {                                                    </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 133 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-4306861482015046346" onmouseenter="enter('-4306861482015046346');" onmouseout="out('-4306861482015046346');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 134       uploadEntity.setState(IEntity.STATE_STOP);                                                         </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 135 ||||||| BASE                                                                                             </span>
<span class="-7955475604668464285" onmouseenter="enter('-7955475604668464285');" onmouseout="out('-7955475604668464285');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136       uploadEntity.setState(DownloadEntity.STATE_STOP);                                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 137 =======                                                                                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 138 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 139       handleSpeed(0);                                                                                    </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 140 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="6750804523428569640" onmouseenter="enter('6750804523428569640');" onmouseout="out('6750804523428569640');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 141       sendInState2Target(ISchedulers.STOP);                                                              </span>
<span class="1906645490253172748" onmouseenter="enter('1906645490253172748');" onmouseout="out('1906645490253172748');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 142       sendIntent(Aria.ACTION_STOP, stopLocation);                                                        </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 143 ||||||| BASE                                                                                             </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144       handleSpeed(0);                                                                                    </span>
<span class="4355850862977331006" onmouseenter="enter('4355850862977331006');" onmouseout="out('4355850862977331006');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145       sendInState2Target(DownloadSchedulers.STOP);                                                       </span>
<span class="1906645490253172748" onmouseenter="enter('1906645490253172748');" onmouseout="out('1906645490253172748');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146       sendIntent(Aria.ACTION_STOP, stopLocation);                                                        </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 147 =======                                                                                                  </span>
<span class="4355850862977331006" onmouseenter="enter('4355850862977331006');" onmouseout="out('4355850862977331006');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 148       sendInState2Target(DownloadSchedulers.STOP);                                                       </span>
<span class="-1696356608019189548" onmouseenter="enter('-1696356608019189548');" onmouseout="out('-1696356608019189548');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 149       saveData(IEntity.STATE_STOP, stopLocation);                                                        </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 150 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style=""> 153     @Override public void onProgress(long currentLocation) {                                             </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style=""> 154       if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                       </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style=""> 155         long speed = currentLocation - lastLen;                                                          </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style=""> 156         lastTime = System.currentTimeMillis();                                                           </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style=""> 157         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style=""> 158           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style=""> 159           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style=""> 161         handleSpeed(speed);                                                                              </span>
<span class="-4238976656134225029" onmouseenter="enter('-4238976656134225029');" onmouseout="out('-4238976656134225029');" style=""> 162         entity.setCurrentProgress(currentLocation);                                                      </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style=""> 163         lastLen = currentLocation;                                                                       </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 164 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-8933350839933081633" onmouseenter="enter('-8933350839933081633');" onmouseout="out('-8933350839933081633');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 165         sendInState2Target(ISchedulers.RUNNING);                                                         </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 166         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 167 ||||||| BASE                                                                                             </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168         uploadEntity.setCurrentProgress(currentLocation);                                                </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 169         lastLen = currentLocation;                                                                       </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 170         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 171         AriaManager.APP.sendBroadcast(sendIntent);                                                       </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 172 =======                                                                                                  </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 173         sendInState2Target(DownloadSchedulers.RUNNING);                                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 174 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style=""> 178     @Override public void onCancel() {                                                                   </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 179 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="4589949575651396085" onmouseenter="enter('4589949575651396085');" onmouseout="out('4589949575651396085');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 180       uploadEntity.setState(IEntity.STATE_CANCEL);                                                       </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 181 ||||||| BASE                                                                                             </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182       uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 183 =======                                                                                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 184 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 185       handleSpeed(0);                                                                                    </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 186 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-8974049740864780035" onmouseenter="enter('-8974049740864780035');" onmouseout="out('-8974049740864780035');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 187       sendInState2Target(ISchedulers.CANCEL);                                                            </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 188       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 189       uploadEntity.deleteData();                                                                         </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 190 ||||||| BASE                                                                                             </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 191       handleSpeed(0);                                                                                    </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 192       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193       sendIntent(Aria.ACTION_CANCEL, -1);                                                                </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 194       uploadEntity.deleteData();                                                                         </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 195 =======                                                                                                  </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 196       sendInState2Target(DownloadSchedulers.CANCEL);                                                     </span>
<span class="-8209498279616463234" onmouseenter="enter('-8209498279616463234');" onmouseout="out('-8209498279616463234');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 197       saveData(IEntity.STATE_CANCEL, -1);                                                                </span>
<span class="8489197424479237881" onmouseenter="enter('8489197424479237881');" onmouseout="out('8489197424479237881');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 198       entity.deleteData();                                                                               </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 199 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200     }                                                                                                    </span>
<span  style=""> 201                                                                                                          </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style=""> 202     @Override public void onComplete() {                                                                 </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 203 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="1494665695645556959" onmouseenter="enter('1494665695645556959');" onmouseout="out('1494665695645556959');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 204       uploadEntity.setState(IEntity.STATE_COMPLETE);                                                     </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 205       uploadEntity.setComplete(true);                                                                    </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 206 ||||||| BASE                                                                                             </span>
<span class="-7026235990786915660" onmouseenter="enter('-7026235990786915660');" onmouseout="out('-7026235990786915660');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 207       uploadEntity.setState(DownloadEntity.STATE_COMPLETE);                                              </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 208       uploadEntity.setComplete(true);                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 209 =======                                                                                                  </span>
<span class="-3659910208889661414" onmouseenter="enter('-3659910208889661414');" onmouseout="out('-3659910208889661414');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 210       entity.setComplete(true);                                                                          </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 211 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 212       handleSpeed(0);                                                                                    </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 213 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-1833390057912781983" onmouseenter="enter('-1833390057912781983');" onmouseout="out('-1833390057912781983');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 214       sendInState2Target(ISchedulers.COMPLETE);                                                          </span>
<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215       sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                      </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 216 ||||||| BASE                                                                                             </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 217       handleSpeed(0);                                                                                    </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 218       sendInState2Target(DownloadSchedulers.COMPLETE);                                                   </span>
<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 219       sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                      </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 220 =======                                                                                                  </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 221       sendInState2Target(DownloadSchedulers.COMPLETE);                                                   </span>
<span class="-4243478454233770036" onmouseenter="enter('-4243478454233770036');" onmouseout="out('-4243478454233770036');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 222       saveData(IEntity.STATE_COMPLETE, entity.getFileSize());                                            </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 223 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224     }                                                                                                    </span>
<span  style=""> 225                                                                                                          </span>
<span class="-8845666459040584461" onmouseenter="enter('-8845666459040584461');" onmouseout="out('-8845666459040584461');" style=""> 226     @Override public void onFail() {                                                                     </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 227 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-2424267164941877802" onmouseenter="enter('-2424267164941877802');" onmouseout="out('-2424267164941877802');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 228       uploadEntity.setFailNum(uploadEntity.getFailNum() + 1);                                            </span>
<span class="6069268799509013390" onmouseenter="enter('6069268799509013390');" onmouseout="out('6069268799509013390');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 229       uploadEntity.setState(IEntity.STATE_FAIL);                                                         </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 230 ||||||| BASE                                                                                             </span>
<span class="-2424267164941877802" onmouseenter="enter('-2424267164941877802');" onmouseout="out('-2424267164941877802');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 231       uploadEntity.setFailNum(uploadEntity.getFailNum() + 1);                                            </span>
<span class="2017604368611205733" onmouseenter="enter('2017604368611205733');" onmouseout="out('2017604368611205733');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 232       uploadEntity.setState(DownloadEntity.STATE_FAIL);                                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 233 =======                                                                                                  </span>
<span class="-1614602823543137763" onmouseenter="enter('-1614602823543137763');" onmouseout="out('-1614602823543137763');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234       entity.setFailNum(entity.getFailNum() + 1);                                                        </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 235 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 236       handleSpeed(0);                                                                                    </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 237 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-6455920480656012873" onmouseenter="enter('-6455920480656012873');" onmouseout="out('-6455920480656012873');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 238       sendInState2Target(ISchedulers.FAIL);                                                              </span>
<span class="-5033899741291131460" onmouseenter="enter('-5033899741291131460');" onmouseout="out('-5033899741291131460');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 239       sendIntent(Aria.ACTION_FAIL, -1);                                                                  </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 240 ||||||| BASE                                                                                             </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 241       handleSpeed(0);                                                                                    </span>
<span class="10069564286438765" onmouseenter="enter('10069564286438765');" onmouseout="out('10069564286438765');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 242       sendInState2Target(DownloadSchedulers.FAIL);                                                       </span>
<span class="-5033899741291131460" onmouseenter="enter('-5033899741291131460');" onmouseout="out('-5033899741291131460');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 243       sendIntent(Aria.ACTION_FAIL, -1);                                                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 244 =======                                                                                                  </span>
<span class="10069564286438765" onmouseenter="enter('10069564286438765');" onmouseout="out('10069564286438765');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 245       sendInState2Target(DownloadSchedulers.FAIL);                                                       </span>
<span class="825111020644911099" onmouseenter="enter('825111020644911099');" onmouseout="out('825111020644911099');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 246       saveData(IEntity.STATE_FAIL, -1);                                                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 247 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248     }                                                                                                    </span>
<span  style=""> 249                                                                                                          </span>
<span class="7889271447688685611" onmouseenter="enter('7889271447688685611');" onmouseout="out('7889271447688685611');" style=""> 250     private void handleSpeed(long speed) {                                                               </span>
<span class="1151844561754699994" onmouseenter="enter('1151844561754699994');" onmouseout="out('1151844561754699994');" style=""> 251       if (isConvertSpeed) {                                                                              </span>
<span class="-1064122449029006503" onmouseenter="enter('-1064122449029006503');" onmouseout="out('-1064122449029006503');" style=""> 252         entity.setConvertSpeed(CommonUtil.formatFileSize(speed) + &quot;/s&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 253       } else {                                                                                           </span>
<span class="-8903176931212217262" onmouseenter="enter('-8903176931212217262');" onmouseout="out('-8903176931212217262');" style=""> 254         entity.setSpeed(speed);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256     }                                                                                                    </span>
<span  style=""> 257                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 258     /**                                                                                                  </span>
<span class="5309333678065732533" onmouseenter="enter('5309333678065732533');" onmouseout="out('5309333678065732533');" style=""> 259      * 将任务状态发送给下载器                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 260      *                                                                                                   </span>
<span class="4745042362407675676" onmouseenter="enter('4745042362407675676');" onmouseout="out('4745042362407675676');" style=""> 261      * @param state {@link ISchedulers#START}                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 262      */                                                                                                  </span>
<span class="3842237707578177232" onmouseenter="enter('3842237707578177232');" onmouseout="out('3842237707578177232');" style=""> 263     private void sendInState2Target(int state) {                                                         </span>
<span class="14240507737599715" onmouseenter="enter('14240507737599715');" onmouseout="out('14240507737599715');" style=""> 264       if (outHandler.get() != null) {                                                                    </span>
<span class="747666252236551572" onmouseenter="enter('747666252236551572');" onmouseout="out('747666252236551572');" style=""> 265         outHandler.get().obtainMessage(state, task.get()).sendToTarget();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267     }                                                                                                    </span>
<span  style=""> 268                                                                                                          </span>
<span class="-8417795030437306969" onmouseenter="enter('-8417795030437306969');" onmouseout="out('-8417795030437306969');" style=""> 269     private void saveData(int state, long location) {                                                    </span>
<span class="1870432086074469274" onmouseenter="enter('1870432086074469274');" onmouseout="out('1870432086074469274');" style=""> 270       entity.setState(state);                                                                            </span>
<span class="5476417475415693432" onmouseenter="enter('5476417475415693432');" onmouseout="out('5476417475415693432');" style=""> 271       entity.setComplete(state == IEntity.STATE_COMPLETE);                                               </span>
<span class="8919645422588846117" onmouseenter="enter('8919645422588846117');" onmouseout="out('8919645422588846117');" style=""> 272       entity.setCurrentProgress(location);                                                               </span>
<span class="-733466174510760140" onmouseenter="enter('-733466174510760140');" onmouseout="out('-733466174510760140');" style=""> 273       entity.update();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275   }                                                                                                      </span>
<span  style=""> 276                                                                                                          </span>
<span class="2010609695383714647" onmouseenter="enter('2010609695383714647');" onmouseout="out('2010609695383714647');" style=""> 277   public static class Builder {                                                                          </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style=""> 278     private Handler mOutHandler;                                                                         </span>
<span class="-7667731813459538063" onmouseenter="enter('-7667731813459538063');" onmouseout="out('-7667731813459538063');" style=""> 279     private UploadTaskEntity mTaskEntity;                                                                </span>
<span class="-3189317552395849100" onmouseenter="enter('-3189317552395849100');" onmouseout="out('-3189317552395849100');" style=""> 280     private String mTargetName;                                                                          </span>
<span  style=""> 281                                                                                                          </span>
<span class="-5398579486846956133" onmouseenter="enter('-5398579486846956133');" onmouseout="out('-5398579486846956133');" style=""> 282     public void setOutHandler(ISchedulers outHandler) {                                                  </span>
<span class="1621577143461664665" onmouseenter="enter('1621577143461664665');" onmouseout="out('1621577143461664665');" style=""> 283       mOutHandler = new Handler(outHandler);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="4605908466670558074" onmouseenter="enter('4605908466670558074');" onmouseout="out('4605908466670558074');" style=""> 286     public void setUploadTaskEntity(UploadTaskEntity taskEntity) {                                       </span>
<span class="8662994215762856538" onmouseenter="enter('8662994215762856538');" onmouseout="out('8662994215762856538');" style=""> 287       mTaskEntity = taskEntity;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 288     }                                                                                                    </span>
<span  style=""> 289                                                                                                          </span>
<span class="5139368500185827813" onmouseenter="enter('5139368500185827813');" onmouseout="out('5139368500185827813');" style=""> 290     public void setTargetName(String targetName) {                                                       </span>
<span class="7065259443227126232" onmouseenter="enter('7065259443227126232');" onmouseout="out('7065259443227126232');" style=""> 291       mTargetName = targetName;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292     }                                                                                                    </span>
<span  style=""> 293                                                                                                          </span>
<span class="-5965884622997208966" onmouseenter="enter('-5965884622997208966');" onmouseout="out('-5965884622997208966');" style=""> 294     public Builder() {                                                                                   </span>
<span  style=""> 295                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296     }                                                                                                    </span>
<span  style=""> 297                                                                                                          </span>
<span class="-3884470360854325651" onmouseenter="enter('-3884470360854325651');" onmouseout="out('-3884470360854325651');" style=""> 298     public UploadTask build() {                                                                          </span>
<span class="5566441679723565284" onmouseenter="enter('5566441679723565284');" onmouseout="out('5566441679723565284');" style=""> 299       UploadTask task = new UploadTask(mTaskEntity, mOutHandler);                                        </span>
<span class="8488479071402332460" onmouseenter="enter('8488479071402332460');" onmouseout="out('8488479071402332460');" style=""> 300       task.setTargetName(mTargetName);                                                                   </span>
<span class="8824306751398948689" onmouseenter="enter('8824306751398948689');" onmouseout="out('8824306751398948689');" style=""> 301       return task;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304 }                                                                                                        </span>

















































































































































































</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="2296433254624375089" onmouseenter="enter('2296433254624375089');" onmouseout="out('2296433254624375089');" style="">  16 package com.arialyy.aria.core.upload;                                                                    </span>
<span  style="">  17                                                                                                          </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  18 import android.content.Context;                                                                          </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  19 import android.os.Handler;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  20 import android.util.Log;                                                                                 </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  21 import com.arialyy.aria.core.AriaManager;                                                                </span>
<span class="1292836758351739604" onmouseenter="enter('1292836758351739604');" onmouseout="out('1292836758351739604');" style="">  22 import com.arialyy.aria.core.inf.AbsNormalTask;                                                          </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  23 import com.arialyy.aria.core.inf.IEntity;                                                                </span>
<span class="-1011357815313335831" onmouseenter="enter('-1011357815313335831');" onmouseout="out('-1011357815313335831');" style="">  24 import com.arialyy.aria.core.scheduler.ISchedulers;                                                      </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  25 import com.arialyy.aria.util.CommonUtil;                                                                 </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  26 import java.lang.ref.WeakReference;                                                                      </span>
<span  style="">  27                                                                                                          </span>
<span  style="">  28                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  29 /**                                                                                                      </span>
<span class="403953507969790183" onmouseenter="enter('403953507969790183');" onmouseout="out('403953507969790183');" style="">  30  * Created by lyy on 2017/2/23.                                                                          </span>
<span class="-2449944654770999762" onmouseenter="enter('-2449944654770999762');" onmouseout="out('-2449944654770999762');" style="">  31  * 上传任务                                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  32  */                                                                                                      </span>
<span class="7951812777603599569" onmouseenter="enter('7951812777603599569');" onmouseout="out('7951812777603599569');" style="">  33 public class UploadTask extends AbsNormalTask&lt;UploadEntity&gt; {                                            </span>
<span class="-48564423259191708" onmouseenter="enter('-48564423259191708');" onmouseout="out('-48564423259191708');" style="">  34   private static final String TAG = &quot;UploadTask&quot;;                                                        </span>
<span  style="">  35                                                                                                          </span>
<span class="-9212286462003963920" onmouseenter="enter('-9212286462003963920');" onmouseout="out('-9212286462003963920');" style="">  36   private UploadUtil mUtil;                                                                              </span>
<span  style="">  37                                                                                                          </span>
<span class="-6466441420798853096" onmouseenter="enter('-6466441420798853096');" onmouseout="out('-6466441420798853096');" style="">  38   private UListener mListener;                                                                           </span>
<span  style="">  39                                                                                                          </span>
<span class="8143216272030926937" onmouseenter="enter('8143216272030926937');" onmouseout="out('8143216272030926937');" style="">  40   private UploadTask(UploadTaskEntity taskEntity, Handler outHandler) {                                  </span>
<span class="-516864359291379858" onmouseenter="enter('-516864359291379858');" onmouseout="out('-516864359291379858');" style="">  41     mOutHandler = outHandler;                                                                            </span>
<span class="9019271186603223430" onmouseenter="enter('9019271186603223430');" onmouseout="out('9019271186603223430');" style="">  42     mEntity = taskEntity.getEntity();                                                                    </span>
<span class="-6425870561160000081" onmouseenter="enter('-6425870561160000081');" onmouseout="out('-6425870561160000081');" style="">  43     mListener = new UListener(mOutHandler, this);                                                        </span>
<span class="-9181689321782889595" onmouseenter="enter('-9181689321782889595');" onmouseout="out('-9181689321782889595');" style="">  44     mUtil = new UploadUtil(taskEntity, mListener);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  45   }                                                                                                      </span>
<span  style="">  46                                                                                                          </span>
<span class="-9027224204840754436" onmouseenter="enter('-9027224204840754436');" onmouseout="out('-9027224204840754436');" style="">  47   @Override public String getKey() {                                                                     </span>
<span class="2844108258582614869" onmouseenter="enter('2844108258582614869');" onmouseout="out('2844108258582614869');" style="">  48     return mEntity.getFilePath();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  49   }                                                                                                      </span>
<span  style="">  50                                                                                                          </span>
<span class="-2237798856776801835" onmouseenter="enter('-2237798856776801835');" onmouseout="out('-2237798856776801835');" style="">  51   @Override public boolean isRunning() {                                                                 </span>
<span class="-7030310259877225970" onmouseenter="enter('-7030310259877225970');" onmouseout="out('-7030310259877225970');" style="">  52     return mUtil.isRunning();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53   }                                                                                                      </span>
<span  style="">  54                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  55   @Override                                                                                              </span>
<span class="-2648331188945203940" onmouseenter="enter('-2648331188945203940');" onmouseout="out('-2648331188945203940');" style="">  56   public void start() {                                                                                  </span>
<span class="1824095819662453088" onmouseenter="enter('1824095819662453088');" onmouseout="out('1824095819662453088');" style="">  57     if (mUtil.isRunning()) {                                                                             </span>
<span class="10798559816801575" onmouseenter="enter('10798559816801575');" onmouseout="out('10798559816801575');" style="">  58       Log.d(TAG, &quot;任务正在下载&quot;);                                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  59     } else {                                                                                             </span>
<span class="7551408284313429024" onmouseenter="enter('7551408284313429024');" onmouseout="out('7551408284313429024');" style="">  60       if (mListener == null) {                                                                           </span>
<span class="6491904422728072551" onmouseenter="enter('6491904422728072551');" onmouseout="out('6491904422728072551');" style="">  61         mListener = new UploadTask.UListener(mOutHandler, this);                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62       }                                                                                                  </span>
<span class="-1185009500705100744" onmouseenter="enter('-1185009500705100744');" onmouseout="out('-1185009500705100744');" style="">  63       mUtil.start();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65   }                                                                                                      </span>
<span  style="">  66                                                                                                          </span>
<span class="6276273225669041403" onmouseenter="enter('6276273225669041403');" onmouseout="out('6276273225669041403');" style="">  67   @Override public void stop() {                                                                         </span>
<span  style="">  68                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69   }                                                                                                      </span>
<span  style="">  70                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  71   @Override                                                                                              </span>
<span class="-6930343012855552909" onmouseenter="enter('-6930343012855552909');" onmouseout="out('-6930343012855552909');" style="">  72   public void cancel() {                                                                                 </span>
<span class="-3455980629398546786" onmouseenter="enter('-3455980629398546786');" onmouseout="out('-3455980629398546786');" style="">  73     if (!mEntity.isComplete()) {                                                                         </span>
<span class="-878689237819636353" onmouseenter="enter('-878689237819636353');" onmouseout="out('-878689237819636353');" style="">  74       // 如果任务不是下载状态                                                                                      </span>
<span class="8398473292785284365" onmouseenter="enter('8398473292785284365');" onmouseout="out('8398473292785284365');" style="">  75       mUtil.cancel();                                                                                    </span>
<span class="4724878165560282777" onmouseenter="enter('4724878165560282777');" onmouseout="out('4724878165560282777');" style="">  76       mEntity.deleteData();                                                                              </span>
<span class="-8007871147257868362" onmouseenter="enter('-8007871147257868362');" onmouseout="out('-8007871147257868362');" style="">  77       if (mOutHandler != null) {                                                                         </span>
<span class="5217107786360241037" onmouseenter="enter('5217107786360241037');" onmouseout="out('5217107786360241037');" style="">  78         mOutHandler.obtainMessage(ISchedulers.CANCEL, this).sendToTarget();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81   }                                                                                                      </span>
<span  style="">  82                                                                                                          </span>
<span class="2946122989880113363" onmouseenter="enter('2946122989880113363');" onmouseout="out('2946122989880113363');" style="">  83   private static class UListener extends UploadListener {                                                </span>
<span class="7333848870212734816" onmouseenter="enter('7333848870212734816');" onmouseout="out('7333848870212734816');" style="">  84     WeakReference&lt;Handler&gt; outHandler;                                                                   </span>
<span  style="">  85                                                                                                          </span>
<span class="-1395916022342845790" onmouseenter="enter('-1395916022342845790');" onmouseout="out('-1395916022342845790');" style="">  86     WeakReference&lt;UploadTask&gt; task;                                                                      </span>
<span  style="">  87                                                                                                          </span>
<span class="-1332954245128652953" onmouseenter="enter('-1332954245128652953');" onmouseout="out('-1332954245128652953');" style="">  88     //上一次发送长度                                                                                            </span>
<span class="4165186735941775423" onmouseenter="enter('4165186735941775423');" onmouseout="out('4165186735941775423');" style="">  89     long lastLen = 0;   //上一次发送长度                                                                        </span>
<span  style="">  90                                                                                                          </span>
<span class="-1785130162350666471" onmouseenter="enter('-1785130162350666471');" onmouseout="out('-1785130162350666471');" style="">  91     long lastTime = 0;                                                                                   </span>
<span  style="">  92                                                                                                          </span>
<span class="-484227970858919584" onmouseenter="enter('-484227970858919584');" onmouseout="out('-484227970858919584');" style="">  93     //1m更新周期                                                                                             </span>
<span class="-3251880946967376943" onmouseenter="enter('-3251880946967376943');" onmouseout="out('-3251880946967376943');" style="">  94     long INTERVAL_TIME = 1000;   //1m更新周期                                                                </span>
<span  style="">  95                                                                                                          </span>
<span class="-995623574026977490" onmouseenter="enter('-995623574026977490');" onmouseout="out('-995623574026977490');" style="">  96     boolean isFirst = true;                                                                              </span>
<span  style="">  97                                                                                                          </span>
<span class="145085728347001964" onmouseenter="enter('145085728347001964');" onmouseout="out('145085728347001964');" style="">  98     UploadEntity entity;                                                                                 </span>
<span  style="">  99                                                                                                          </span>
<span class="4103820747141125151" onmouseenter="enter('4103820747141125151');" onmouseout="out('4103820747141125151');" style=""> 100     boolean isConvertSpeed = false;                                                                      </span>
<span  style=""> 101                                                                                                          </span>
<span class="8963053501568911626" onmouseenter="enter('8963053501568911626');" onmouseout="out('8963053501568911626');" style=""> 102     Context context;                                                                                     </span>
<span  style=""> 103                                                                                                          </span>
<span class="-3725981275533116928" onmouseenter="enter('-3725981275533116928');" onmouseout="out('-3725981275533116928');" style=""> 104     UListener(Handler outHandle, UploadTask task) {                                                      </span>
<span class="7973565467859160609" onmouseenter="enter('7973565467859160609');" onmouseout="out('7973565467859160609');" style=""> 105       this.outHandler = new WeakReference&lt;&gt;(outHandle);                                                  </span>
<span class="1814841524841575643" onmouseenter="enter('1814841524841575643');" onmouseout="out('1814841524841575643');" style=""> 106       this.task = new WeakReference&lt;&gt;(task);                                                             </span>
<span class="6639542599046196708" onmouseenter="enter('6639542599046196708');" onmouseout="out('6639542599046196708');" style=""> 107       entity = this.task.get().getEntity();                                                              </span>
<span class="-3292822099803666113" onmouseenter="enter('-3292822099803666113');" onmouseout="out('-3292822099803666113');" style=""> 108       context = AriaManager.APP;                                                                         </span>
<span class="2480991993121624779" onmouseenter="enter('2480991993121624779');" onmouseout="out('2480991993121624779');" style=""> 109       final AriaManager manager = AriaManager.getInstance(context);                                      </span>
<span class="-1006399936797699118" onmouseenter="enter('-1006399936797699118');" onmouseout="out('-1006399936797699118');" style=""> 110       isConvertSpeed = manager.getUploadConfig().isConvertSpeed();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113     @Override                                                                                            </span>
<span class="-4593079478565883732" onmouseenter="enter('-4593079478565883732');" onmouseout="out('-4593079478565883732');" style=""> 114     public void onPre() {                                                                                </span>
<span class="6769389119254873713" onmouseenter="enter('6769389119254873713');" onmouseout="out('6769389119254873713');" style=""> 115       sendInState2Target(ISchedulers.PRE);                                                               </span>
<span class="1272045713932667636" onmouseenter="enter('1272045713932667636');" onmouseout="out('1272045713932667636');" style=""> 116       saveData(IEntity.STATE_PRE, -1);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117     }                                                                                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 119     @Override                                                                                            </span>
<span class="2043803400458559476" onmouseenter="enter('2043803400458559476');" onmouseout="out('2043803400458559476');" style=""> 120     public void onPostPre(long fileSize) {                                                               </span>
<span class="-404964478618383017" onmouseenter="enter('-404964478618383017');" onmouseout="out('-404964478618383017');" style=""> 121       super.onPostPre(fileSize);                                                                         </span>
<span class="-8919115203469377593" onmouseenter="enter('-8919115203469377593');" onmouseout="out('-8919115203469377593');" style=""> 122       entity.setFileSize(fileSize);                                                                      </span>
<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style=""> 123       sendInState2Target(ISchedulers.POST_PRE);                                                          </span>
<span class="-5812366890446436095" onmouseenter="enter('-5812366890446436095');" onmouseout="out('-5812366890446436095');" style=""> 124       saveData(IEntity.STATE_POST_PRE, 0);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125     }                                                                                                    </span>
<span  style=""> 126                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 127     @Override                                                                                            </span>
<span class="9053694390373715088" onmouseenter="enter('9053694390373715088');" onmouseout="out('9053694390373715088');" style=""> 128     public void onStart() {                                                                              </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style=""> 129       sendInState2Target(ISchedulers.START);                                                             </span>
<span class="-4647267931158758171" onmouseenter="enter('-4647267931158758171');" onmouseout="out('-4647267931158758171');" style=""> 130       saveData(IEntity.STATE_RUNNING, 0);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131     }                                                                                                    </span>
<span  style=""> 132                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 133     @Override                                                                                            </span>
<span class="-6273855139450779482" onmouseenter="enter('-6273855139450779482');" onmouseout="out('-6273855139450779482');" style=""> 134     public void onResume(long resumeLocation) {                                                          </span>
<span class="-2450372929597487074" onmouseenter="enter('-2450372929597487074');" onmouseout="out('-2450372929597487074');" style=""> 135       sendInState2Target(ISchedulers.RESUME);                                                            </span>
<span class="8518386853479101383" onmouseenter="enter('8518386853479101383');" onmouseout="out('8518386853479101383');" style=""> 136       saveData(IEntity.STATE_RUNNING, resumeLocation);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 139     @Override                                                                                            </span>
<span class="6546006512658874783" onmouseenter="enter('6546006512658874783');" onmouseout="out('6546006512658874783');" style=""> 140     public void onStop(long stopLocation) {                                                              </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 141       handleSpeed(0);                                                                                    </span>
<span class="6750804523428569640" onmouseenter="enter('6750804523428569640');" onmouseout="out('6750804523428569640');" style=""> 142       sendInState2Target(ISchedulers.STOP);                                                              </span>
<span class="-1696356608019189548" onmouseenter="enter('-1696356608019189548');" onmouseout="out('-1696356608019189548');" style=""> 143       saveData(IEntity.STATE_STOP, stopLocation);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144     }                                                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 146     @Override                                                                                            </span>
<span class="-7270469419406779709" onmouseenter="enter('-7270469419406779709');" onmouseout="out('-7270469419406779709');" style=""> 147     public void onProgress(long currentLocation) {                                                       </span>
<span class="-666970758912010840" onmouseenter="enter('-666970758912010840');" onmouseout="out('-666970758912010840');" style=""> 148       if ((System.currentTimeMillis() - lastTime) &gt; INTERVAL_TIME) {                                     </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style=""> 149         long speed = currentLocation - lastLen;                                                          </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style=""> 150         lastTime = System.currentTimeMillis();                                                           </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style=""> 151         if (isFirst) {                                                                                   </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style=""> 152           speed = 0;                                                                                     </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style=""> 153           isFirst = false;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154         }                                                                                                </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style=""> 155         handleSpeed(speed);                                                                              </span>
<span class="-4238976656134225029" onmouseenter="enter('-4238976656134225029');" onmouseout="out('-4238976656134225029');" style=""> 156         entity.setCurrentProgress(currentLocation);                                                      </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style=""> 157         lastLen = currentLocation;                                                                       </span>
<span class="-8933350839933081633" onmouseenter="enter('-8933350839933081633');" onmouseout="out('-8933350839933081633');" style=""> 158         sendInState2Target(ISchedulers.RUNNING);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160     }                                                                                                    </span>
<span  style=""> 161                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162     @Override                                                                                            </span>
<span class="2622303874958043271" onmouseenter="enter('2622303874958043271');" onmouseout="out('2622303874958043271');" style=""> 163     public void onCancel() {                                                                             </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 164       handleSpeed(0);                                                                                    </span>
<span class="-8974049740864780035" onmouseenter="enter('-8974049740864780035');" onmouseout="out('-8974049740864780035');" style=""> 165       sendInState2Target(ISchedulers.CANCEL);                                                            </span>
<span class="-8209498279616463234" onmouseenter="enter('-8209498279616463234');" onmouseout="out('-8209498279616463234');" style=""> 166       saveData(IEntity.STATE_CANCEL, -1);                                                                </span>
<span class="8489197424479237881" onmouseenter="enter('8489197424479237881');" onmouseout="out('8489197424479237881');" style=""> 167       entity.deleteData();                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168     }                                                                                                    </span>
<span  style=""> 169                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170     @Override                                                                                            </span>
<span class="4257426807127393534" onmouseenter="enter('4257426807127393534');" onmouseout="out('4257426807127393534');" style=""> 171     public void onComplete() {                                                                           </span>
<span class="-3659910208889661414" onmouseenter="enter('-3659910208889661414');" onmouseout="out('-3659910208889661414');" style=""> 172       entity.setComplete(true);                                                                          </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 173       handleSpeed(0);                                                                                    </span>
<span class="-1833390057912781983" onmouseenter="enter('-1833390057912781983');" onmouseout="out('-1833390057912781983');" style=""> 174       sendInState2Target(ISchedulers.COMPLETE);                                                          </span>
<span class="-4243478454233770036" onmouseenter="enter('-4243478454233770036');" onmouseout="out('-4243478454233770036');" style=""> 175       saveData(IEntity.STATE_COMPLETE, entity.getFileSize());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 176     }                                                                                                    </span>
<span  style=""> 177                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 178     @Override                                                                                            </span>
<span class="-6652792850664576611" onmouseenter="enter('-6652792850664576611');" onmouseout="out('-6652792850664576611');" style=""> 179     public void onFail() {                                                                               </span>
<span class="-1614602823543137763" onmouseenter="enter('-1614602823543137763');" onmouseout="out('-1614602823543137763');" style=""> 180       entity.setFailNum(entity.getFailNum() + 1);                                                        </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 181       handleSpeed(0);                                                                                    </span>
<span class="-6455920480656012873" onmouseenter="enter('-6455920480656012873');" onmouseout="out('-6455920480656012873');" style=""> 182       sendInState2Target(ISchedulers.FAIL);                                                              </span>
<span class="825111020644911099" onmouseenter="enter('825111020644911099');" onmouseout="out('825111020644911099');" style=""> 183       saveData(IEntity.STATE_FAIL, -1);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184     }                                                                                                    </span>
<span  style=""> 185                                                                                                          </span>
<span class="7889271447688685611" onmouseenter="enter('7889271447688685611');" onmouseout="out('7889271447688685611');" style=""> 186     private void handleSpeed(long speed) {                                                               </span>
<span class="1151844561754699994" onmouseenter="enter('1151844561754699994');" onmouseout="out('1151844561754699994');" style=""> 187       if (isConvertSpeed) {                                                                              </span>
<span class="-1064122449029006503" onmouseenter="enter('-1064122449029006503');" onmouseout="out('-1064122449029006503');" style=""> 188         entity.setConvertSpeed(CommonUtil.formatFileSize(speed) + &quot;/s&quot;);                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 189       } else {                                                                                           </span>
<span class="-8903176931212217262" onmouseenter="enter('-8903176931212217262');" onmouseout="out('-8903176931212217262');" style=""> 190         entity.setSpeed(speed);                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192     }                                                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 194     /**                                                                                                  </span>
<span class="5309333678065732533" onmouseenter="enter('5309333678065732533');" onmouseout="out('5309333678065732533');" style=""> 195      * 将任务状态发送给下载器                                                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 196      *                                                                                                   </span>
<span class="-5915729695604424458" onmouseenter="enter('-5915729695604424458');" onmouseout="out('-5915729695604424458');" style=""> 197      * @param state {@link DownloadSchedulers#START}                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 198      */                                                                                                  </span>
<span class="3842237707578177232" onmouseenter="enter('3842237707578177232');" onmouseout="out('3842237707578177232');" style=""> 199     private void sendInState2Target(int state) {                                                         </span>
<span class="14240507737599715" onmouseenter="enter('14240507737599715');" onmouseout="out('14240507737599715');" style=""> 200       if (outHandler.get() != null) {                                                                    </span>
<span class="747666252236551572" onmouseenter="enter('747666252236551572');" onmouseout="out('747666252236551572');" style=""> 201         outHandler.get().obtainMessage(state, task.get()).sendToTarget();                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202       }                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203     }                                                                                                    </span>
<span  style=""> 204                                                                                                          </span>
<span class="-8417795030437306969" onmouseenter="enter('-8417795030437306969');" onmouseout="out('-8417795030437306969');" style=""> 205     private void saveData(int state, long location) {                                                    </span>
<span class="1870432086074469274" onmouseenter="enter('1870432086074469274');" onmouseout="out('1870432086074469274');" style=""> 206       entity.setState(state);                                                                            </span>
<span class="5476417475415693432" onmouseenter="enter('5476417475415693432');" onmouseout="out('5476417475415693432');" style=""> 207       entity.setComplete(state == IEntity.STATE_COMPLETE);                                               </span>
<span class="8919645422588846117" onmouseenter="enter('8919645422588846117');" onmouseout="out('8919645422588846117');" style=""> 208       entity.setCurrentProgress(location);                                                               </span>
<span class="-733466174510760140" onmouseenter="enter('-733466174510760140');" onmouseout="out('-733466174510760140');" style=""> 209       entity.update();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211   }                                                                                                      </span>
<span  style=""> 212                                                                                                          </span>
<span class="2010609695383714647" onmouseenter="enter('2010609695383714647');" onmouseout="out('2010609695383714647');" style=""> 213   public static class Builder {                                                                          </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style=""> 214     private Handler mOutHandler;                                                                         </span>
<span  style=""> 215                                                                                                          </span>
<span class="-7667731813459538063" onmouseenter="enter('-7667731813459538063');" onmouseout="out('-7667731813459538063');" style=""> 216     private UploadTaskEntity mTaskEntity;                                                                </span>
<span  style=""> 217                                                                                                          </span>
<span class="-3189317552395849100" onmouseenter="enter('-3189317552395849100');" onmouseout="out('-3189317552395849100');" style=""> 218     private String mTargetName;                                                                          </span>
<span  style=""> 219                                                                                                          </span>
<span class="-5398579486846956133" onmouseenter="enter('-5398579486846956133');" onmouseout="out('-5398579486846956133');" style=""> 220     public void setOutHandler(ISchedulers outHandler) {                                                  </span>
<span class="1621577143461664665" onmouseenter="enter('1621577143461664665');" onmouseout="out('1621577143461664665');" style=""> 221       mOutHandler = new Handler(outHandler);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222     }                                                                                                    </span>
<span  style=""> 223                                                                                                          </span>
<span class="4605908466670558074" onmouseenter="enter('4605908466670558074');" onmouseout="out('4605908466670558074');" style=""> 224     public void setUploadTaskEntity(UploadTaskEntity taskEntity) {                                       </span>
<span class="8662994215762856538" onmouseenter="enter('8662994215762856538');" onmouseout="out('8662994215762856538');" style=""> 225       mTaskEntity = taskEntity;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226     }                                                                                                    </span>
<span  style=""> 227                                                                                                          </span>
<span class="5139368500185827813" onmouseenter="enter('5139368500185827813');" onmouseout="out('5139368500185827813');" style=""> 228     public void setTargetName(String targetName) {                                                       </span>
<span class="7065259443227126232" onmouseenter="enter('7065259443227126232');" onmouseout="out('7065259443227126232');" style=""> 229       mTargetName = targetName;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230     }                                                                                                    </span>
<span  style=""> 231                                                                                                          </span>
<span class="-5965884622997208966" onmouseenter="enter('-5965884622997208966');" onmouseout="out('-5965884622997208966');" style=""> 232     public Builder() {                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233     }                                                                                                    </span>
<span  style=""> 234                                                                                                          </span>
<span class="-3884470360854325651" onmouseenter="enter('-3884470360854325651');" onmouseout="out('-3884470360854325651');" style=""> 235     public UploadTask build() {                                                                          </span>
<span class="5566441679723565284" onmouseenter="enter('5566441679723565284');" onmouseout="out('5566441679723565284');" style=""> 236       UploadTask task = new UploadTask(mTaskEntity, mOutHandler);                                        </span>
<span class="8488479071402332460" onmouseenter="enter('8488479071402332460');" onmouseout="out('8488479071402332460');" style=""> 237       task.setTargetName(mTargetName);                                                                   </span>
<span class="8824306751398948689" onmouseenter="enter('8824306751398948689');" onmouseout="out('8824306751398948689');" style=""> 238       return task;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240   }                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241 }                                                                                                        </span>
















































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span class="2296433254624375089" onmouseenter="enter('2296433254624375089');" onmouseout="out('2296433254624375089');" style="">  16  package com.arialyy.aria.core.upload;                                                                             </span>
<span  style="">  17                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  18  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  19  import android.content.Intent;                                                                                    </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  20  import android.os.Handler;                                                                                        </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  21  import android.util.Log;                                                                                          </span>
<span class="-3972257947549510103" onmouseenter="enter('-3972257947549510103');" onmouseout="out('-3972257947549510103');" style="">  22  import com.arialyy.aria.core.Aria;                                                                                </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  23  import com.arialyy.aria.core.AriaManager;                                                                         </span>
<span class="1932658903610588883" onmouseenter="enter('1932658903610588883');" onmouseout="out('1932658903610588883');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -import com.arialyy.aria.core.download.DownloadEntity;                                                             </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="">  25  import com.arialyy.aria.core.inf.AbsTask;                                                                         </span>

<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  26  import com.arialyy.aria.core.inf.IEntity;                                                                         </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  27 -import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                                        </span>
<span class="-1011357815313335831" onmouseenter="enter('-1011357815313335831');" onmouseout="out('-1011357815313335831');" style="">  28  import com.arialyy.aria.core.scheduler.ISchedulers;                                                               </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  29  import com.arialyy.aria.util.CommonUtil;                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  30  import java.lang.ref.WeakReference;                                                                               </span>
<span  style="">  31                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  32  /**                                                                                                               </span>
<span class="403953507969790183" onmouseenter="enter('403953507969790183');" onmouseout="out('403953507969790183');" style="">  33   * Created by lyy on 2017/2/23.                                                                                   </span>
<span class="-2449944654770999762" onmouseenter="enter('-2449944654770999762');" onmouseout="out('-2449944654770999762');" style="">  34   * 上传任务                                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  35   */                                                                                                               </span>
<span class="4252754931042712456" onmouseenter="enter('4252754931042712456');" onmouseout="out('4252754931042712456');" style="">  36  public class UploadTask extends AbsTask&lt;UploadTaskEntity, UploadEntity&gt; {                                         </span>

<span class="-48564423259191708" onmouseenter="enter('-48564423259191708');" onmouseout="out('-48564423259191708');" style="">  37    private static final String TAG = &quot;UploadTask&quot;;                                                                 </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style="">  38    private Handler mOutHandler;                                                                                    </span>
<span  style="">  39                                                                                                                    </span>
<span class="-9212286462003963920" onmouseenter="enter('-9212286462003963920');" onmouseout="out('-9212286462003963920');" style="">  40    private UploadUtil mUtil;                                                                                       </span>
<span class="-6466441420798853096" onmouseenter="enter('-6466441420798853096');" onmouseout="out('-6466441420798853096');" style="">  41    private UListener mListener;                                                                                    </span>
<span  style="">  42                                                                                                                    </span>
<span class="8143216272030926937" onmouseenter="enter('8143216272030926937');" onmouseout="out('8143216272030926937');" style="">  43    private UploadTask(UploadTaskEntity taskEntity, Handler outHandler) {                                           </span>
<span class="-516864359291379858" onmouseenter="enter('-516864359291379858');" onmouseout="out('-516864359291379858');" style="">  44      mOutHandler = outHandler;                                                                                     </span>
<span class="5967304955972623463" onmouseenter="enter('5967304955972623463');" onmouseout="out('5967304955972623463');" style="">  45      mEntity = taskEntity.uploadEntity;                                                                            </span>

<span class="-6425870561160000081" onmouseenter="enter('-6425870561160000081');" onmouseout="out('-6425870561160000081');" style="">  46      mListener = new UListener(mOutHandler, this);                                                                 </span>
<span class="-9181689321782889595" onmouseenter="enter('-9181689321782889595');" onmouseout="out('-9181689321782889595');" style="">  47      mUtil = new UploadUtil(taskEntity, mListener);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  48    }                                                                                                               </span>
<span  style="">  49                                                                                                                    </span>
<span class="-9027224204840754436" onmouseenter="enter('-9027224204840754436');" onmouseout="out('-9027224204840754436');" style="">  50    @Override public String getKey() {                                                                              </span>
<span class="2844108258582614869" onmouseenter="enter('2844108258582614869');" onmouseout="out('2844108258582614869');" style="">  51      return mEntity.getFilePath();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  52    }                                                                                                               </span>
<span  style="">  53                                                                                                                    </span>
<span class="-2237798856776801835" onmouseenter="enter('-2237798856776801835');" onmouseout="out('-2237798856776801835');" style="">  54    @Override public boolean isRunning() {                                                                          </span>
<span class="-7030310259877225970" onmouseenter="enter('-7030310259877225970');" onmouseout="out('-7030310259877225970');" style="">  55      return mUtil.isRunning();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  56    }                                                                                                               </span>
<span  style="">  57                                                                                                                    </span>
<span class="2908281040877937362" onmouseenter="enter('2908281040877937362');" onmouseout="out('2908281040877937362');" style="">  58    @Override public void start() {                                                                                 </span>
<span class="1824095819662453088" onmouseenter="enter('1824095819662453088');" onmouseout="out('1824095819662453088');" style="">  59      if (mUtil.isRunning()) {                                                                                      </span>
<span class="10798559816801575" onmouseenter="enter('10798559816801575');" onmouseout="out('10798559816801575');" style="">  60        Log.d(TAG, &quot;任务正在下载&quot;);                                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  61      } else {                                                                                                      </span>
<span class="7551408284313429024" onmouseenter="enter('7551408284313429024');" onmouseout="out('7551408284313429024');" style="">  62        if (mListener == null) {                                                                                    </span>
<span class="6491904422728072551" onmouseenter="enter('6491904422728072551');" onmouseout="out('6491904422728072551');" style="">  63          mListener = new UploadTask.UListener(mOutHandler, this);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  64        }                                                                                                           </span>
<span class="-1185009500705100744" onmouseenter="enter('-1185009500705100744');" onmouseout="out('-1185009500705100744');" style="">  65        mUtil.start();                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  66      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67    }                                                                                                               </span>
<span  style="">  68                                                                                                                    </span>
<span class="6276273225669041403" onmouseenter="enter('6276273225669041403');" onmouseout="out('6276273225669041403');" style="">  69    @Override public void stop() {                                                                                  </span>
<span  style="">  70                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71    }                                                                                                               </span>
<span  style="">  72                                                                                                                    </span>
<span class="305234216015554819" onmouseenter="enter('305234216015554819');" onmouseout="out('305234216015554819');" style="">  73    @Override public void cancel() {                                                                                </span>
<span  style="">  74                                                                                                                    </span>
<span class="-3455980629398546786" onmouseenter="enter('-3455980629398546786');" onmouseout="out('-3455980629398546786');" style="">  75      if (!mEntity.isComplete()) {                                                                                  </span>
<span class="-878689237819636353" onmouseenter="enter('-878689237819636353');" onmouseout="out('-878689237819636353');" style="">  76        // 如果任务不是下载状态                                                                                               </span>
<span class="8398473292785284365" onmouseenter="enter('8398473292785284365');" onmouseout="out('8398473292785284365');" style="">  77        mUtil.cancel();                                                                                             </span>
<span class="4724878165560282777" onmouseenter="enter('4724878165560282777');" onmouseout="out('4724878165560282777');" style="">  78        mEntity.deleteData();                                                                                       </span>
<span class="-8007871147257868362" onmouseenter="enter('-8007871147257868362');" onmouseout="out('-8007871147257868362');" style="">  79        if (mOutHandler != null) {                                                                                  </span>
<span class="-5910825033043981009" onmouseenter="enter('-5910825033043981009');" onmouseout="out('-5910825033043981009');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  80 -        mOutHandler.obtainMessage(DownloadSchedulers.CANCEL, this).sendToTarget();                                </span>
<span class="5217107786360241037" onmouseenter="enter('5217107786360241037');" onmouseout="out('5217107786360241037');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  81 +        mOutHandler.obtainMessage(ISchedulers.CANCEL, this).sendToTarget();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  82        }                                                                                                           </span>
<span class="3712106415016621126" onmouseenter="enter('3712106415016621126');" onmouseout="out('3712106415016621126');" style="">  83        //发送取消下载的广播                                                                                                 </span>
<span class="-197303031829978311" onmouseenter="enter('-197303031829978311');" onmouseout="out('-197303031829978311');" style="">  84        Intent intent = CommonUtil.createIntent(AriaManager.APP.getPackageName(), Aria.ACTION_CANCEL);              </span>
<span class="-6059183530587923532" onmouseenter="enter('-6059183530587923532');" onmouseout="out('-6059183530587923532');" style="">  85        intent.putExtra(Aria.UPLOAD_ENTITY, mEntity);                                                               </span>
<span class="-955703503063368195" onmouseenter="enter('-955703503063368195');" onmouseout="out('-955703503063368195');" style="">  86        AriaManager.APP.sendBroadcast(intent);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88    }                                                                                                               </span>
<span  style="">  89                                                                                                                    </span>
<span class="2946122989880113363" onmouseenter="enter('2946122989880113363');" onmouseout="out('2946122989880113363');" style="">  90    private static class UListener extends UploadListener {                                                         </span>





<span class="7333848870212734816" onmouseenter="enter('7333848870212734816');" onmouseout="out('7333848870212734816');" style="">  91      WeakReference&lt;Handler&gt; outHandler;                                                                            </span>
<span class="-1395916022342845790" onmouseenter="enter('-1395916022342845790');" onmouseout="out('-1395916022342845790');" style="">  92      WeakReference&lt;UploadTask&gt; task;                                                                               </span>
<span class="4165186735941775423" onmouseenter="enter('4165186735941775423');" onmouseout="out('4165186735941775423');" style="">  93      long lastLen = 0;   //上一次发送长度                                                                                 </span>
<span class="-1785130162350666471" onmouseenter="enter('-1785130162350666471');" onmouseout="out('-1785130162350666471');" style="">  94      long lastTime = 0;                                                                                            </span>
<span class="-3251880946967376943" onmouseenter="enter('-3251880946967376943');" onmouseout="out('-3251880946967376943');" style="">  95      long INTERVAL_TIME = 1000;   //1m更新周期                                                                         </span>
<span class="-995623574026977490" onmouseenter="enter('-995623574026977490');" onmouseout="out('-995623574026977490');" style="">  96      boolean isFirst = true;                                                                                       </span>
<span class="4347092985641496216" onmouseenter="enter('4347092985641496216');" onmouseout="out('4347092985641496216');" style="">  97      UploadEntity uploadEntity;                                                                                    </span>
<span class="-8238287885403470328" onmouseenter="enter('-8238287885403470328');" onmouseout="out('-8238287885403470328');" style="">  98      Intent sendIntent;                                                                                            </span>
<span class="2853512183611321850" onmouseenter="enter('2853512183611321850');" onmouseout="out('2853512183611321850');" style="">  99      boolean isOpenBroadCast = false;                                                                              </span>

<span class="4103820747141125151" onmouseenter="enter('4103820747141125151');" onmouseout="out('4103820747141125151');" style=""> 100      boolean isConvertSpeed = false;                                                                               </span>
<span class="8963053501568911626" onmouseenter="enter('8963053501568911626');" onmouseout="out('8963053501568911626');" style=""> 101      Context context;                                                                                              </span>
<span  style=""> 102                                                                                                                    </span>
<span class="-3725981275533116928" onmouseenter="enter('-3725981275533116928');" onmouseout="out('-3725981275533116928');" style=""> 103      UListener(Handler outHandle, UploadTask task) {                                                               </span>
<span class="7973565467859160609" onmouseenter="enter('7973565467859160609');" onmouseout="out('7973565467859160609');" style=""> 104        this.outHandler = new WeakReference&lt;&gt;(outHandle);                                                           </span>
<span class="1814841524841575643" onmouseenter="enter('1814841524841575643');" onmouseout="out('1814841524841575643');" style=""> 105        this.task = new WeakReference&lt;&gt;(task);                                                                      </span>
<span class="-8901158873730462675" onmouseenter="enter('-8901158873730462675');" onmouseout="out('-8901158873730462675');" style=""> 106        uploadEntity = this.task.get().getEntity();                                                                 </span>
<span class="876222532716810629" onmouseenter="enter('876222532716810629');" onmouseout="out('876222532716810629');" style=""> 107        sendIntent = CommonUtil.createIntent(AriaManager.APP.getPackageName(), Aria.ACTION_RUNNING);                </span>
<span class="7472001461664334218" onmouseenter="enter('7472001461664334218');" onmouseout="out('7472001461664334218');" style=""> 108        sendIntent.putExtra(Aria.UPLOAD_ENTITY, uploadEntity);                                                      </span>

<span class="-3292822099803666113" onmouseenter="enter('-3292822099803666113');" onmouseout="out('-3292822099803666113');" style=""> 109        context = AriaManager.APP;                                                                                  </span>
<span class="2480991993121624779" onmouseenter="enter('2480991993121624779');" onmouseout="out('2480991993121624779');" style=""> 110        final AriaManager manager = AriaManager.getInstance(context);                                               </span>
<span class="-7060727341040316439" onmouseenter="enter('-7060727341040316439');" onmouseout="out('-7060727341040316439');" style=""> 111        isOpenBroadCast = manager.getUploadConfig().isOpenBreadCast();                                              </span>
<span class="-1006399936797699118" onmouseenter="enter('-1006399936797699118');" onmouseout="out('-1006399936797699118');" style=""> 112        isConvertSpeed = manager.getUploadConfig().isConvertSpeed();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113      }                                                                                                             </span>
<span  style=""> 114                                                                                                                    </span>
<span class="1941248740392522719" onmouseenter="enter('1941248740392522719');" onmouseout="out('1941248740392522719');" style=""> 115      @Override public void onPre() {                                                                               </span>
<span class="-868784302856896446" onmouseenter="enter('-868784302856896446');" onmouseout="out('-868784302856896446');" style=""> 116        uploadEntity.setState(IEntity.STATE_PRE);                                                                   </span>
<span class="4089835499325321992" onmouseenter="enter('4089835499325321992');" onmouseout="out('4089835499325321992');" style=""> 117        sendIntent(Aria.ACTION_PRE, -1);                                                                            </span>
<span class="6769389119254873713" onmouseenter="enter('6769389119254873713');" onmouseout="out('6769389119254873713');" style=""> 118        sendInState2Target(ISchedulers.PRE);                                                                        </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119      }                                                                                                             </span>
<span  style=""> 120                                                                                                                    </span>
<span class="-6235441032293659444" onmouseenter="enter('-6235441032293659444');" onmouseout="out('-6235441032293659444');" style=""> 121      @Override public void onPostPre(long fileSize) {                                                              </span>
<span class="-404964478618383017" onmouseenter="enter('-404964478618383017');" onmouseout="out('-404964478618383017');" style=""> 122        super.onPostPre(fileSize);                                                                                  </span>
<span class="8202102582283430979" onmouseenter="enter('8202102582283430979');" onmouseout="out('8202102582283430979');" style=""> 123        uploadEntity.setFileSize(fileSize);                                                                         </span>
<span class="5394749751465679999" onmouseenter="enter('5394749751465679999');" onmouseout="out('5394749751465679999');" style=""> 124        uploadEntity.setState(IEntity.STATE_POST_PRE);                                                              </span>
<span class="-3826473697353831013" onmouseenter="enter('-3826473697353831013');" onmouseout="out('-3826473697353831013');" style=""> 125        sendIntent(Aria.ACTION_POST_PRE, 0);                                                                        </span>

<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style=""> 126        sendInState2Target(ISchedulers.POST_PRE);                                                                   </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127      }                                                                                                             </span>
<span  style=""> 128                                                                                                                    </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style=""> 129      @Override public void onStart() {                                                                             </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style=""> 130        uploadEntity.setState(IEntity.STATE_RUNNING);                                                               </span>
<span class="1453973828620924818" onmouseenter="enter('1453973828620924818');" onmouseout="out('1453973828620924818');" style=""> 131        sendIntent(Aria.ACTION_START, 0);                                                                           </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style=""> 132        sendInState2Target(ISchedulers.START);                                                                      </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133      }                                                                                                             </span>
<span  style=""> 134                                                                                                                    </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style=""> 135      @Override public void onResume(long resumeLocation) {                                                         </span>
<span class="2904464502949824974" onmouseenter="enter('2904464502949824974');" onmouseout="out('2904464502949824974');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 136 -      uploadEntity.setState(DownloadEntity.STATE_RUNNING);                                                        </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 137 -      sendInState2Target(DownloadSchedulers.RESUME);                                                              </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +      uploadEntity.setState(IEntity.STATE_RUNNING);                                                               </span>
<span class="-2450372929597487074" onmouseenter="enter('-2450372929597487074');" onmouseout="out('-2450372929597487074');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +      sendInState2Target(ISchedulers.RESUME);                                                                     </span>
<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style=""> 140        sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                             </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141      }                                                                                                             </span>
<span  style=""> 142                                                                                                                    </span>
<span class="3409726051444324452" onmouseenter="enter('3409726051444324452');" onmouseout="out('3409726051444324452');" style=""> 143      @Override public void onStop(long stopLocation) {                                                             </span>
<span class="-7955475604668464285" onmouseenter="enter('-7955475604668464285');" onmouseout="out('-7955475604668464285');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 144 -      uploadEntity.setState(DownloadEntity.STATE_STOP);                                                           </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 145 -      handleSpeed(0);                                                                                             </span>
<span class="4355850862977331006" onmouseenter="enter('4355850862977331006');" onmouseout="out('4355850862977331006');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 146 -      sendInState2Target(DownloadSchedulers.STOP);                                                                </span>
<span class="-4306861482015046346" onmouseenter="enter('-4306861482015046346');" onmouseout="out('-4306861482015046346');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +      uploadEntity.setState(IEntity.STATE_STOP);                                                                  </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +      handleSpeed(0);                                                                                             </span>
<span class="6750804523428569640" onmouseenter="enter('6750804523428569640');" onmouseout="out('6750804523428569640');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +      sendInState2Target(ISchedulers.STOP);                                                                       </span>
<span class="1906645490253172748" onmouseenter="enter('1906645490253172748');" onmouseout="out('1906645490253172748');" style=""> 150        sendIntent(Aria.ACTION_STOP, stopLocation);                                                                 </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151      }                                                                                                             </span>
<span  style=""> 152                                                                                                                    </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style=""> 153      @Override public void onProgress(long currentLocation) {                                                      </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style=""> 154        if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                                </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style=""> 155          long speed = currentLocation - lastLen;                                                                   </span>
<span class="4057178467869940680" onmouseenter="enter('4057178467869940680');" onmouseout="out('4057178467869940680');" style=""> 156          sendIntent.putExtra(Aria.CURRENT_LOCATION, currentLocation);                                              </span>
<span class="9056633131567108545" onmouseenter="enter('9056633131567108545');" onmouseout="out('9056633131567108545');" style=""> 157          sendIntent.putExtra(Aria.CURRENT_SPEED, speed);                                                           </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style=""> 158          lastTime = System.currentTimeMillis();                                                                    </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style=""> 159          if (isFirst) {                                                                                            </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style=""> 160            speed = 0;                                                                                              </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style=""> 161            isFirst = false;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162          }                                                                                                         </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style=""> 163          handleSpeed(speed);                                                                                       </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style=""> 164          uploadEntity.setCurrentProgress(currentLocation);                                                         </span>

<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style=""> 165          lastLen = currentLocation;                                                                                </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 166 -        sendInState2Target(DownloadSchedulers.RUNNING);                                                           </span>
<span class="-8933350839933081633" onmouseenter="enter('-8933350839933081633');" onmouseout="out('-8933350839933081633');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +        sendInState2Target(ISchedulers.RUNNING);                                                                  </span>
<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style=""> 168          AriaManager.APP.sendBroadcast(sendIntent);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 170      }                                                                                                             </span>
<span  style=""> 171                                                                                                                    </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style=""> 172      @Override public void onCancel() {                                                                            </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 173 -      uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                         </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 174 -      handleSpeed(0);                                                                                             </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 175 -      sendInState2Target(DownloadSchedulers.CANCEL);                                                              </span>
<span class="4589949575651396085" onmouseenter="enter('4589949575651396085');" onmouseout="out('4589949575651396085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +      uploadEntity.setState(IEntity.STATE_CANCEL);                                                                </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +      handleSpeed(0);                                                                                             </span>
<span class="-8974049740864780035" onmouseenter="enter('-8974049740864780035');" onmouseout="out('-8974049740864780035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +      sendInState2Target(ISchedulers.CANCEL);                                                                     </span>
<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style=""> 179        sendIntent(Aria.ACTION_CANCEL, -1);                                                                         </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style=""> 180        uploadEntity.deleteData();                                                                                  </span>


<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181      }                                                                                                             </span>
<span  style=""> 182                                                                                                                    </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style=""> 183      @Override public void onComplete() {                                                                          </span>
<span class="-7026235990786915660" onmouseenter="enter('-7026235990786915660');" onmouseout="out('-7026235990786915660');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 184 -      uploadEntity.setState(DownloadEntity.STATE_COMPLETE);                                                       </span>
<span class="1494665695645556959" onmouseenter="enter('1494665695645556959');" onmouseout="out('1494665695645556959');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +      uploadEntity.setState(IEntity.STATE_COMPLETE);                                                              </span>
<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style=""> 186        uploadEntity.setComplete(true);                                                                             </span>

<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 187        handleSpeed(0);                                                                                             </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 188 -      sendInState2Target(DownloadSchedulers.COMPLETE);                                                            </span>
<span class="-1833390057912781983" onmouseenter="enter('-1833390057912781983');" onmouseout="out('-1833390057912781983');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +      sendInState2Target(ISchedulers.COMPLETE);                                                                   </span>
<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style=""> 190        sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                               </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191      }                                                                                                             </span>
<span  style=""> 192                                                                                                                    </span>
<span class="-8845666459040584461" onmouseenter="enter('-8845666459040584461');" onmouseout="out('-8845666459040584461');" style=""> 193      @Override public void onFail() {                                                                              </span>
<span class="-2424267164941877802" onmouseenter="enter('-2424267164941877802');" onmouseout="out('-2424267164941877802');" style=""> 194        uploadEntity.setFailNum(uploadEntity.getFailNum() + 1);                                                     </span>
<span class="2017604368611205733" onmouseenter="enter('2017604368611205733');" onmouseout="out('2017604368611205733');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 195 -      uploadEntity.setState(DownloadEntity.STATE_FAIL);                                                           </span>

<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 196 -      handleSpeed(0);                                                                                             </span>
<span class="10069564286438765" onmouseenter="enter('10069564286438765');" onmouseout="out('10069564286438765');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 197 -      sendInState2Target(DownloadSchedulers.FAIL);                                                                </span>
<span class="6069268799509013390" onmouseenter="enter('6069268799509013390');" onmouseout="out('6069268799509013390');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 198 +      uploadEntity.setState(IEntity.STATE_FAIL);                                                                  </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 199 +      handleSpeed(0);                                                                                             </span>
<span class="-6455920480656012873" onmouseenter="enter('-6455920480656012873');" onmouseout="out('-6455920480656012873');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 200 +      sendInState2Target(ISchedulers.FAIL);                                                                       </span>
<span class="-5033899741291131460" onmouseenter="enter('-5033899741291131460');" onmouseout="out('-5033899741291131460');" style=""> 201        sendIntent(Aria.ACTION_FAIL, -1);                                                                           </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202      }                                                                                                             </span>
<span  style=""> 203                                                                                                                    </span>
<span class="7889271447688685611" onmouseenter="enter('7889271447688685611');" onmouseout="out('7889271447688685611');" style=""> 204      private void handleSpeed(long speed) {                                                                        </span>
<span class="1151844561754699994" onmouseenter="enter('1151844561754699994');" onmouseout="out('1151844561754699994');" style=""> 205        if (isConvertSpeed) {                                                                                       </span>
<span class="-5945113083417661661" onmouseenter="enter('-5945113083417661661');" onmouseout="out('-5945113083417661661');" style=""> 206          uploadEntity.setConvertSpeed(CommonUtil.formatFileSize(speed) + &quot;/s&quot;);                                    </span>

<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 207        } else {                                                                                                    </span>
<span class="6188357916906219523" onmouseenter="enter('6188357916906219523');" onmouseout="out('6188357916906219523');" style=""> 208          uploadEntity.setSpeed(speed);                                                                             </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210      }                                                                                                             </span>
<span  style=""> 211                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 212      /**                                                                                                           </span>
<span class="5309333678065732533" onmouseenter="enter('5309333678065732533');" onmouseout="out('5309333678065732533');" style=""> 213       * 将任务状态发送给下载器                                                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 214       *                                                                                                            </span>
<span class="-5915729695604424458" onmouseenter="enter('-5915729695604424458');" onmouseout="out('-5915729695604424458');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 215 -     * @param state {@link DownloadSchedulers#START}                                                              </span>
<span class="4745042362407675676" onmouseenter="enter('4745042362407675676');" onmouseout="out('4745042362407675676');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +     * @param state {@link ISchedulers#START}                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 217       */                                                                                                           </span>
<span class="3842237707578177232" onmouseenter="enter('3842237707578177232');" onmouseout="out('3842237707578177232');" style=""> 218      private void sendInState2Target(int state) {                                                                  </span>
<span class="14240507737599715" onmouseenter="enter('14240507737599715');" onmouseout="out('14240507737599715');" style=""> 219        if (outHandler.get() != null) {                                                                             </span>
<span class="747666252236551572" onmouseenter="enter('747666252236551572');" onmouseout="out('747666252236551572');" style=""> 220          outHandler.get().obtainMessage(state, task.get()).sendToTarget();                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222      }                                                                                                             </span>
<span  style=""> 223                                                                                                                    </span>
<span class="5890305163070916433" onmouseenter="enter('5890305163070916433');" onmouseout="out('5890305163070916433');" style=""> 224      private void sendIntent(String action, long location) {                                                       </span>
<span class="-3195550105288086061" onmouseenter="enter('-3195550105288086061');" onmouseout="out('-3195550105288086061');" style=""> 225        uploadEntity.setComplete(action.equals(Aria.ACTION_COMPLETE));                                              </span>
<span class="-3482383325073941511" onmouseenter="enter('-3482383325073941511');" onmouseout="out('-3482383325073941511');" style=""> 226        uploadEntity.setCurrentProgress(location);                                                                  </span>
<span class="3840957147601077538" onmouseenter="enter('3840957147601077538');" onmouseout="out('3840957147601077538');" style=""> 227        uploadEntity.update();                                                                                      </span>
<span class="-2269986430100795496" onmouseenter="enter('-2269986430100795496');" onmouseout="out('-2269986430100795496');" style=""> 228        if (!isOpenBroadCast) return;                                                                               </span>
<span class="8723597706838177322" onmouseenter="enter('8723597706838177322');" onmouseout="out('8723597706838177322');" style=""> 229        Intent intent = CommonUtil.createIntent(context.getPackageName(), action);                                  </span>
<span class="7098269197041809391" onmouseenter="enter('7098269197041809391');" onmouseout="out('7098269197041809391');" style=""> 230        intent.putExtra(Aria.UPLOAD_ENTITY, uploadEntity);                                                          </span>
<span class="-1896674516131928769" onmouseenter="enter('-1896674516131928769');" onmouseout="out('-1896674516131928769');" style=""> 231        if (location != -1) {                                                                                       </span>
<span class="5814686869516323305" onmouseenter="enter('5814686869516323305');" onmouseout="out('5814686869516323305');" style=""> 232          intent.putExtra(Aria.CURRENT_LOCATION, location);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233        }                                                                                                           </span>
<span class="2681624199862388289" onmouseenter="enter('2681624199862388289');" onmouseout="out('2681624199862388289');" style=""> 234        context.sendBroadcast(intent);                                                                              </span>





<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 235      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236    }                                                                                                               </span>
<span  style=""> 237                                                                                                                    </span>
<span class="2010609695383714647" onmouseenter="enter('2010609695383714647');" onmouseout="out('2010609695383714647');" style=""> 238    public static class Builder {                                                                                   </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style=""> 239      private Handler mOutHandler;                                                                                  </span>
<span class="-7667731813459538063" onmouseenter="enter('-7667731813459538063');" onmouseout="out('-7667731813459538063');" style=""> 240      private UploadTaskEntity mTaskEntity;                                                                         </span>
<span class="-3189317552395849100" onmouseenter="enter('-3189317552395849100');" onmouseout="out('-3189317552395849100');" style=""> 241      private String mTargetName;                                                                                   </span>
<span  style=""> 242                                                                                                                    </span>
<span class="-5398579486846956133" onmouseenter="enter('-5398579486846956133');" onmouseout="out('-5398579486846956133');" style=""> 243      public void setOutHandler(ISchedulers outHandler) {                                                           </span>
<span class="1621577143461664665" onmouseenter="enter('1621577143461664665');" onmouseout="out('1621577143461664665');" style=""> 244        mOutHandler = new Handler(outHandler);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245      }                                                                                                             </span>
<span  style=""> 246                                                                                                                    </span>
<span class="4605908466670558074" onmouseenter="enter('4605908466670558074');" onmouseout="out('4605908466670558074');" style=""> 247      public void setUploadTaskEntity(UploadTaskEntity taskEntity) {                                                </span>
<span class="8662994215762856538" onmouseenter="enter('8662994215762856538');" onmouseout="out('8662994215762856538');" style=""> 248        mTaskEntity = taskEntity;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249      }                                                                                                             </span>
<span  style=""> 250                                                                                                                    </span>
<span class="5139368500185827813" onmouseenter="enter('5139368500185827813');" onmouseout="out('5139368500185827813');" style=""> 251      public void setTargetName(String targetName) {                                                                </span>
<span class="7065259443227126232" onmouseenter="enter('7065259443227126232');" onmouseout="out('7065259443227126232');" style=""> 252        mTargetName = targetName;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253      }                                                                                                             </span>
<span  style=""> 254                                                                                                                    </span>
<span class="-5965884622997208966" onmouseenter="enter('-5965884622997208966');" onmouseout="out('-5965884622997208966');" style=""> 255      public Builder() {                                                                                            </span>
<span  style=""> 256                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257      }                                                                                                             </span>
<span  style=""> 258                                                                                                                    </span>
<span class="-3884470360854325651" onmouseenter="enter('-3884470360854325651');" onmouseout="out('-3884470360854325651');" style=""> 259      public UploadTask build() {                                                                                   </span>
<span class="5566441679723565284" onmouseenter="enter('5566441679723565284');" onmouseout="out('5566441679723565284');" style=""> 260        UploadTask task = new UploadTask(mTaskEntity, mOutHandler);                                                 </span>
<span class="8488479071402332460" onmouseenter="enter('8488479071402332460');" onmouseout="out('8488479071402332460');" style=""> 261        task.setTargetName(mTargetName);                                                                            </span>
<span class="8824306751398948689" onmouseenter="enter('8824306751398948689');" onmouseout="out('8824306751398948689');" style=""> 262        return task;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264    }                                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="-4176855950178531235" onmouseenter="enter('-4176855950178531235');" onmouseout="out('-4176855950178531235');" style="">   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span class="2296433254624375089" onmouseenter="enter('2296433254624375089');" onmouseout="out('2296433254624375089');" style="">  16  package com.arialyy.aria.core.upload;                                                                             </span>
<span  style="">  17                                                                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  18  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  19 -import android.content.Intent;                                                                                    </span>
<span class="-1086316590722027623" onmouseenter="enter('-1086316590722027623');" onmouseout="out('-1086316590722027623');" style="">  20  import android.os.Handler;                                                                                        </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  21  import android.util.Log;                                                                                          </span>
<span class="-3972257947549510103" onmouseenter="enter('-3972257947549510103');" onmouseout="out('-3972257947549510103');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  22 -import com.arialyy.aria.core.Aria;                                                                                </span>
<span class="3973751924708272716" onmouseenter="enter('3973751924708272716');" onmouseout="out('3973751924708272716');" style="">  23  import com.arialyy.aria.core.AriaManager;                                                                         </span>
<span class="1932658903610588883" onmouseenter="enter('1932658903610588883');" onmouseout="out('1932658903610588883');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -import com.arialyy.aria.core.download.DownloadEntity;                                                             </span>
<span class="-4417152733335289341" onmouseenter="enter('-4417152733335289341');" onmouseout="out('-4417152733335289341');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  25 -import com.arialyy.aria.core.inf.AbsTask;                                                                         </span>
<span class="1292836758351739604" onmouseenter="enter('1292836758351739604');" onmouseout="out('1292836758351739604');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  26 +import com.arialyy.aria.core.inf.AbsNormalTask;                                                                   </span>
<span class="-5016163043314935005" onmouseenter="enter('-5016163043314935005');" onmouseout="out('-5016163043314935005');" style="">  27  import com.arialyy.aria.core.inf.IEntity;                                                                         </span>
<span class="7326175858930165690" onmouseenter="enter('7326175858930165690');" onmouseout="out('7326175858930165690');" style="">  28  import com.arialyy.aria.core.scheduler.DownloadSchedulers;                                                        </span>
<span class="-1011357815313335831" onmouseenter="enter('-1011357815313335831');" onmouseout="out('-1011357815313335831');" style="">  29  import com.arialyy.aria.core.scheduler.ISchedulers;                                                               </span>
<span class="-3106139894727218967" onmouseenter="enter('-3106139894727218967');" onmouseout="out('-3106139894727218967');" style="">  30  import com.arialyy.aria.util.CommonUtil;                                                                          </span>
<span class="-8692343821508153377" onmouseenter="enter('-8692343821508153377');" onmouseout="out('-8692343821508153377');" style="">  31  import java.lang.ref.WeakReference;                                                                               </span>
<span  style="">  32                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  33  /**                                                                                                               </span>
<span class="403953507969790183" onmouseenter="enter('403953507969790183');" onmouseout="out('403953507969790183');" style="">  34   * Created by lyy on 2017/2/23.                                                                                   </span>
<span class="-2449944654770999762" onmouseenter="enter('-2449944654770999762');" onmouseout="out('-2449944654770999762');" style="">  35   * 上传任务                                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  36   */                                                                                                               </span>
<span class="4252754931042712456" onmouseenter="enter('4252754931042712456');" onmouseout="out('4252754931042712456');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  37 -public class UploadTask extends AbsTask&lt;UploadTaskEntity, UploadEntity&gt; {                                         </span>
<span class="7951812777603599569" onmouseenter="enter('7951812777603599569');" onmouseout="out('7951812777603599569');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +public class UploadTask extends AbsNormalTask&lt;UploadEntity&gt; {                                                     </span>
<span class="-48564423259191708" onmouseenter="enter('-48564423259191708');" onmouseout="out('-48564423259191708');" style="">  39    private static final String TAG = &quot;UploadTask&quot;;                                                                 </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  40 -  private Handler mOutHandler;                                                                                    </span>
<span  style="">  41                                                                                                                    </span>
<span class="-9212286462003963920" onmouseenter="enter('-9212286462003963920');" onmouseout="out('-9212286462003963920');" style="">  42    private UploadUtil mUtil;                                                                                       </span>
<span class="-6466441420798853096" onmouseenter="enter('-6466441420798853096');" onmouseout="out('-6466441420798853096');" style="">  43    private UListener mListener;                                                                                    </span>
<span  style="">  44                                                                                                                    </span>
<span class="8143216272030926937" onmouseenter="enter('8143216272030926937');" onmouseout="out('8143216272030926937');" style="">  45    private UploadTask(UploadTaskEntity taskEntity, Handler outHandler) {                                           </span>
<span class="-516864359291379858" onmouseenter="enter('-516864359291379858');" onmouseout="out('-516864359291379858');" style="">  46      mOutHandler = outHandler;                                                                                     </span>
<span class="5967304955972623463" onmouseenter="enter('5967304955972623463');" onmouseout="out('5967304955972623463');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  47 -    mEntity = taskEntity.uploadEntity;                                                                            </span>
<span class="9019271186603223430" onmouseenter="enter('9019271186603223430');" onmouseout="out('9019271186603223430');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  48 +    mEntity = taskEntity.getEntity();                                                                             </span>
<span class="-6425870561160000081" onmouseenter="enter('-6425870561160000081');" onmouseout="out('-6425870561160000081');" style="">  49      mListener = new UListener(mOutHandler, this);                                                                 </span>
<span class="-9181689321782889595" onmouseenter="enter('-9181689321782889595');" onmouseout="out('-9181689321782889595');" style="">  50      mUtil = new UploadUtil(taskEntity, mListener);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  51    }                                                                                                               </span>
<span  style="">  52                                                                                                                    </span>
<span class="-9027224204840754436" onmouseenter="enter('-9027224204840754436');" onmouseout="out('-9027224204840754436');" style="">  53    @Override public String getKey() {                                                                              </span>
<span class="2844108258582614869" onmouseenter="enter('2844108258582614869');" onmouseout="out('2844108258582614869');" style="">  54      return mEntity.getFilePath();                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55    }                                                                                                               </span>
<span  style="">  56                                                                                                                    </span>
<span class="-2237798856776801835" onmouseenter="enter('-2237798856776801835');" onmouseout="out('-2237798856776801835');" style="">  57    @Override public boolean isRunning() {                                                                          </span>
<span class="-7030310259877225970" onmouseenter="enter('-7030310259877225970');" onmouseout="out('-7030310259877225970');" style="">  58      return mUtil.isRunning();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  59    }                                                                                                               </span>
<span  style="">  60                                                                                                                    </span>
<span class="2908281040877937362" onmouseenter="enter('2908281040877937362');" onmouseout="out('2908281040877937362');" style="">  61    @Override public void start() {                                                                                 </span>
<span class="1824095819662453088" onmouseenter="enter('1824095819662453088');" onmouseout="out('1824095819662453088');" style="">  62      if (mUtil.isRunning()) {                                                                                      </span>
<span class="10798559816801575" onmouseenter="enter('10798559816801575');" onmouseout="out('10798559816801575');" style="">  63        Log.d(TAG, &quot;任务正在下载&quot;);                                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  64      } else {                                                                                                      </span>
<span class="7551408284313429024" onmouseenter="enter('7551408284313429024');" onmouseout="out('7551408284313429024');" style="">  65        if (mListener == null) {                                                                                    </span>
<span class="6491904422728072551" onmouseenter="enter('6491904422728072551');" onmouseout="out('6491904422728072551');" style="">  66          mListener = new UploadTask.UListener(mOutHandler, this);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  67        }                                                                                                           </span>
<span class="-1185009500705100744" onmouseenter="enter('-1185009500705100744');" onmouseout="out('-1185009500705100744');" style="">  68        mUtil.start();                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  70    }                                                                                                               </span>
<span  style="">  71                                                                                                                    </span>
<span class="6276273225669041403" onmouseenter="enter('6276273225669041403');" onmouseout="out('6276273225669041403');" style="">  72    @Override public void stop() {                                                                                  </span>
<span  style="">  73                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  74    }                                                                                                               </span>
<span  style="">  75                                                                                                                    </span>
<span class="305234216015554819" onmouseenter="enter('305234216015554819');" onmouseout="out('305234216015554819');" style="">  76    @Override public void cancel() {                                                                                </span>
<span  style="">  77                                                                                                                    </span>
<span class="-3455980629398546786" onmouseenter="enter('-3455980629398546786');" onmouseout="out('-3455980629398546786');" style="">  78      if (!mEntity.isComplete()) {                                                                                  </span>
<span class="-878689237819636353" onmouseenter="enter('-878689237819636353');" onmouseout="out('-878689237819636353');" style="">  79        // 如果任务不是下载状态                                                                                               </span>
<span class="8398473292785284365" onmouseenter="enter('8398473292785284365');" onmouseout="out('8398473292785284365');" style="">  80        mUtil.cancel();                                                                                             </span>
<span class="4724878165560282777" onmouseenter="enter('4724878165560282777');" onmouseout="out('4724878165560282777');" style="">  81        mEntity.deleteData();                                                                                       </span>
<span class="-8007871147257868362" onmouseenter="enter('-8007871147257868362');" onmouseout="out('-8007871147257868362');" style="">  82        if (mOutHandler != null) {                                                                                  </span>
<span class="-5910825033043981009" onmouseenter="enter('-5910825033043981009');" onmouseout="out('-5910825033043981009');" style="">  83          mOutHandler.obtainMessage(DownloadSchedulers.CANCEL, this).sendToTarget();                                </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84        }                                                                                                           </span>
<span class="3712106415016621126" onmouseenter="enter('3712106415016621126');" onmouseout="out('3712106415016621126');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  85 -      //发送取消下载的广播                                                                                                 </span>
<span class="-197303031829978311" onmouseenter="enter('-197303031829978311');" onmouseout="out('-197303031829978311');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  86 -      Intent intent = CommonUtil.createIntent(AriaManager.APP.getPackageName(), Aria.ACTION_CANCEL);              </span>
<span class="-6059183530587923532" onmouseenter="enter('-6059183530587923532');" onmouseout="out('-6059183530587923532');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  87 -      intent.putExtra(Aria.UPLOAD_ENTITY, mEntity);                                                               </span>
<span class="-955703503063368195" onmouseenter="enter('-955703503063368195');" onmouseout="out('-955703503063368195');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  88 -      AriaManager.APP.sendBroadcast(intent);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  89 -    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  90 -  }                                                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  91 -                                                                                                                  </span>
<span class="2946122989880113363" onmouseenter="enter('2946122989880113363');" onmouseout="out('2946122989880113363');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  92 -  private static class UListener extends UploadListener {                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  93 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  94 +  }                                                                                                               </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  95 +                                                                                                                  </span>
<span class="-1313325381653401769" onmouseenter="enter('-1313325381653401769');" onmouseout="out('-1313325381653401769');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  96 +  private static class                                                                                            </span>
<span class="-867748330141471958" onmouseenter="enter('-867748330141471958');" onmouseout="out('-867748330141471958');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  97 +  UListener extends UploadListener {                                                                              </span>
<span class="7333848870212734816" onmouseenter="enter('7333848870212734816');" onmouseout="out('7333848870212734816');" style="">  98      WeakReference&lt;Handler&gt; outHandler;                                                                            </span>
<span class="-1395916022342845790" onmouseenter="enter('-1395916022342845790');" onmouseout="out('-1395916022342845790');" style="">  99      WeakReference&lt;UploadTask&gt; task;                                                                               </span>
<span class="4165186735941775423" onmouseenter="enter('4165186735941775423');" onmouseout="out('4165186735941775423');" style=""> 100      long lastLen = 0;   //上一次发送长度                                                                                 </span>
<span class="-1785130162350666471" onmouseenter="enter('-1785130162350666471');" onmouseout="out('-1785130162350666471');" style=""> 101      long lastTime = 0;                                                                                            </span>
<span class="-3251880946967376943" onmouseenter="enter('-3251880946967376943');" onmouseout="out('-3251880946967376943');" style=""> 102      long INTERVAL_TIME = 1000;   //1m更新周期                                                                         </span>
<span class="-995623574026977490" onmouseenter="enter('-995623574026977490');" onmouseout="out('-995623574026977490');" style=""> 103      boolean isFirst = true;                                                                                       </span>
<span class="4347092985641496216" onmouseenter="enter('4347092985641496216');" onmouseout="out('4347092985641496216');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 104 -    UploadEntity uploadEntity;                                                                                    </span>
<span class="-8238287885403470328" onmouseenter="enter('-8238287885403470328');" onmouseout="out('-8238287885403470328');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -    Intent sendIntent;                                                                                            </span>
<span class="2853512183611321850" onmouseenter="enter('2853512183611321850');" onmouseout="out('2853512183611321850');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 106 -    boolean isOpenBroadCast = false;                                                                              </span>
<span class="145085728347001964" onmouseenter="enter('145085728347001964');" onmouseout="out('145085728347001964');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 107 +    UploadEntity entity;                                                                                          </span>
<span class="4103820747141125151" onmouseenter="enter('4103820747141125151');" onmouseout="out('4103820747141125151');" style=""> 108      boolean isConvertSpeed = false;                                                                               </span>
<span class="8963053501568911626" onmouseenter="enter('8963053501568911626');" onmouseout="out('8963053501568911626');" style=""> 109      Context context;                                                                                              </span>
<span  style=""> 110                                                                                                                    </span>
<span class="-3725981275533116928" onmouseenter="enter('-3725981275533116928');" onmouseout="out('-3725981275533116928');" style=""> 111      UListener(Handler outHandle, UploadTask task) {                                                               </span>
<span class="7973565467859160609" onmouseenter="enter('7973565467859160609');" onmouseout="out('7973565467859160609');" style=""> 112        this.outHandler = new WeakReference&lt;&gt;(outHandle);                                                           </span>
<span class="1814841524841575643" onmouseenter="enter('1814841524841575643');" onmouseout="out('1814841524841575643');" style=""> 113        this.task = new WeakReference&lt;&gt;(task);                                                                      </span>
<span class="-8901158873730462675" onmouseenter="enter('-8901158873730462675');" onmouseout="out('-8901158873730462675');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 114 -      uploadEntity = this.task.get().getEntity();                                                                 </span>
<span class="876222532716810629" onmouseenter="enter('876222532716810629');" onmouseout="out('876222532716810629');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -      sendIntent = CommonUtil.createIntent(AriaManager.APP.getPackageName(), Aria.ACTION_RUNNING);                </span>
<span class="7472001461664334218" onmouseenter="enter('7472001461664334218');" onmouseout="out('7472001461664334218');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 116 -      sendIntent.putExtra(Aria.UPLOAD_ENTITY, uploadEntity);                                                      </span>
<span class="6639542599046196708" onmouseenter="enter('6639542599046196708');" onmouseout="out('6639542599046196708');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +      entity = this.task.get().getEntity();                                                                       </span>
<span class="-3292822099803666113" onmouseenter="enter('-3292822099803666113');" onmouseout="out('-3292822099803666113');" style=""> 118        context = AriaManager.APP;                                                                                  </span>
<span class="2480991993121624779" onmouseenter="enter('2480991993121624779');" onmouseout="out('2480991993121624779');" style=""> 119        final AriaManager manager = AriaManager.getInstance(context);                                               </span>
<span class="-7060727341040316439" onmouseenter="enter('-7060727341040316439');" onmouseout="out('-7060727341040316439');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 120 -      isOpenBroadCast = manager.getUploadConfig().isOpenBreadCast();                                              </span>
<span class="-1006399936797699118" onmouseenter="enter('-1006399936797699118');" onmouseout="out('-1006399936797699118');" style=""> 121        isConvertSpeed = manager.getUploadConfig().isConvertSpeed();                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122      }                                                                                                             </span>
<span  style=""> 123                                                                                                                    </span>
<span class="1941248740392522719" onmouseenter="enter('1941248740392522719');" onmouseout="out('1941248740392522719');" style=""> 124      @Override public void onPre() {                                                                               </span>
<span class="-868784302856896446" onmouseenter="enter('-868784302856896446');" onmouseout="out('-868784302856896446');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 125 -      uploadEntity.setState(IEntity.STATE_PRE);                                                                   </span>
<span class="4089835499325321992" onmouseenter="enter('4089835499325321992');" onmouseout="out('4089835499325321992');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 126 -      sendIntent(Aria.ACTION_PRE, -1);                                                                            </span>
<span class="6769389119254873713" onmouseenter="enter('6769389119254873713');" onmouseout="out('6769389119254873713');" style=""> 127        sendInState2Target(ISchedulers.PRE);                                                                        </span>
<span class="1272045713932667636" onmouseenter="enter('1272045713932667636');" onmouseout="out('1272045713932667636');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +      saveData(IEntity.STATE_PRE, -1);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129      }                                                                                                             </span>
<span  style=""> 130                                                                                                                    </span>
<span class="-6235441032293659444" onmouseenter="enter('-6235441032293659444');" onmouseout="out('-6235441032293659444');" style=""> 131      @Override public void onPostPre(long fileSize) {                                                              </span>
<span class="-404964478618383017" onmouseenter="enter('-404964478618383017');" onmouseout="out('-404964478618383017');" style=""> 132        super.onPostPre(fileSize);                                                                                  </span>
<span class="8202102582283430979" onmouseenter="enter('8202102582283430979');" onmouseout="out('8202102582283430979');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 133 -      uploadEntity.setFileSize(fileSize);                                                                         </span>
<span class="5394749751465679999" onmouseenter="enter('5394749751465679999');" onmouseout="out('5394749751465679999');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 134 -      uploadEntity.setState(IEntity.STATE_POST_PRE);                                                              </span>
<span class="-3826473697353831013" onmouseenter="enter('-3826473697353831013');" onmouseout="out('-3826473697353831013');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 135 -      sendIntent(Aria.ACTION_POST_PRE, 0);                                                                        </span>
<span class="-8919115203469377593" onmouseenter="enter('-8919115203469377593');" onmouseout="out('-8919115203469377593');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +      entity.setFileSize(fileSize);                                                                               </span>
<span class="-8012545194775944111" onmouseenter="enter('-8012545194775944111');" onmouseout="out('-8012545194775944111');" style=""> 137        sendInState2Target(ISchedulers.POST_PRE);                                                                   </span>
<span class="-5812366890446436095" onmouseenter="enter('-5812366890446436095');" onmouseout="out('-5812366890446436095');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +      saveData(IEntity.STATE_POST_PRE, 0);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139      }                                                                                                             </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-350078422918441586" onmouseenter="enter('-350078422918441586');" onmouseout="out('-350078422918441586');" style=""> 141      @Override public void onStart() {                                                                             </span>
<span class="818827511199318452" onmouseenter="enter('818827511199318452');" onmouseout="out('818827511199318452');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 142 -      uploadEntity.setState(IEntity.STATE_RUNNING);                                                               </span>
<span class="1453973828620924818" onmouseenter="enter('1453973828620924818');" onmouseout="out('1453973828620924818');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 143 -      sendIntent(Aria.ACTION_START, 0);                                                                           </span>
<span class="2366079220913410868" onmouseenter="enter('2366079220913410868');" onmouseout="out('2366079220913410868');" style=""> 144        sendInState2Target(ISchedulers.START);                                                                      </span>
<span class="-4647267931158758171" onmouseenter="enter('-4647267931158758171');" onmouseout="out('-4647267931158758171');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 145 +      saveData(IEntity.STATE_RUNNING, 0);                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146      }                                                                                                             </span>
<span  style=""> 147                                                                                                                    </span>
<span class="8211923352965833527" onmouseenter="enter('8211923352965833527');" onmouseout="out('8211923352965833527');" style=""> 148      @Override public void onResume(long resumeLocation) {                                                         </span>
<span class="2904464502949824974" onmouseenter="enter('2904464502949824974');" onmouseout="out('2904464502949824974');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 149 -      uploadEntity.setState(DownloadEntity.STATE_RUNNING);                                                        </span>
<span class="3767688091095512671" onmouseenter="enter('3767688091095512671');" onmouseout="out('3767688091095512671');" style=""> 150        sendInState2Target(DownloadSchedulers.RESUME);                                                              </span>


<span class="-3430921351523215377" onmouseenter="enter('-3430921351523215377');" onmouseout="out('-3430921351523215377');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -      sendIntent(Aria.ACTION_RESUME, resumeLocation);                                                             </span>
<span class="8518386853479101383" onmouseenter="enter('8518386853479101383');" onmouseout="out('8518386853479101383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +      saveData(IEntity.STATE_RUNNING, resumeLocation);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153      }                                                                                                             </span>
<span  style=""> 154                                                                                                                    </span>
<span class="3409726051444324452" onmouseenter="enter('3409726051444324452');" onmouseout="out('3409726051444324452');" style=""> 155      @Override public void onStop(long stopLocation) {                                                             </span>
<span class="-7955475604668464285" onmouseenter="enter('-7955475604668464285');" onmouseout="out('-7955475604668464285');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 156 -      uploadEntity.setState(DownloadEntity.STATE_STOP);                                                           </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 157        handleSpeed(0);                                                                                             </span>
<span class="4355850862977331006" onmouseenter="enter('4355850862977331006');" onmouseout="out('4355850862977331006');" style=""> 158        sendInState2Target(DownloadSchedulers.STOP);                                                                </span>



<span class="1906645490253172748" onmouseenter="enter('1906645490253172748');" onmouseout="out('1906645490253172748');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 159 -      sendIntent(Aria.ACTION_STOP, stopLocation);                                                                 </span>
<span class="-1696356608019189548" onmouseenter="enter('-1696356608019189548');" onmouseout="out('-1696356608019189548');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +      saveData(IEntity.STATE_STOP, stopLocation);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161      }                                                                                                             </span>
<span  style=""> 162                                                                                                                    </span>
<span class="-7946972766620409893" onmouseenter="enter('-7946972766620409893');" onmouseout="out('-7946972766620409893');" style=""> 163      @Override public void onProgress(long currentLocation) {                                                      </span>
<span class="5794729848199985634" onmouseenter="enter('5794729848199985634');" onmouseout="out('5794729848199985634');" style=""> 164        if (System.currentTimeMillis() - lastTime &gt; INTERVAL_TIME) {                                                </span>
<span class="-6788340243894418006" onmouseenter="enter('-6788340243894418006');" onmouseout="out('-6788340243894418006');" style=""> 165          long speed = currentLocation - lastLen;                                                                   </span>
<span class="4057178467869940680" onmouseenter="enter('4057178467869940680');" onmouseout="out('4057178467869940680');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 166 -        sendIntent.putExtra(Aria.CURRENT_LOCATION, currentLocation);                                              </span>
<span class="9056633131567108545" onmouseenter="enter('9056633131567108545');" onmouseout="out('9056633131567108545');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 167 -        sendIntent.putExtra(Aria.CURRENT_SPEED, speed);                                                           </span>
<span class="-7570589106444749782" onmouseenter="enter('-7570589106444749782');" onmouseout="out('-7570589106444749782');" style=""> 168          lastTime = System.currentTimeMillis();                                                                    </span>
<span class="1056122900819769088" onmouseenter="enter('1056122900819769088');" onmouseout="out('1056122900819769088');" style=""> 169          if (isFirst) {                                                                                            </span>
<span class="6444337346196179028" onmouseenter="enter('6444337346196179028');" onmouseout="out('6444337346196179028');" style=""> 170            speed = 0;                                                                                              </span>
<span class="6098100566481728756" onmouseenter="enter('6098100566481728756');" onmouseout="out('6098100566481728756');" style=""> 171            isFirst = false;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172          }                                                                                                         </span>
<span class="3220981239855838635" onmouseenter="enter('3220981239855838635');" onmouseout="out('3220981239855838635');" style=""> 173          handleSpeed(speed);                                                                                       </span>
<span class="8446423574643724985" onmouseenter="enter('8446423574643724985');" onmouseout="out('8446423574643724985');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 174 -        uploadEntity.setCurrentProgress(currentLocation);                                                         </span>
<span class="-4238976656134225029" onmouseenter="enter('-4238976656134225029');" onmouseout="out('-4238976656134225029');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +        entity.setCurrentProgress(currentLocation);                                                               </span>
<span class="-2754998682014897103" onmouseenter="enter('-2754998682014897103');" onmouseout="out('-2754998682014897103');" style=""> 176          lastLen = currentLocation;                                                                                </span>
<span class="2380197680705468363" onmouseenter="enter('2380197680705468363');" onmouseout="out('2380197680705468363');" style=""> 177          sendInState2Target(DownloadSchedulers.RUNNING);                                                           </span>

<span class="-4481111999678396408" onmouseenter="enter('-4481111999678396408');" onmouseout="out('-4481111999678396408');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 178 -        AriaManager.APP.sendBroadcast(sendIntent);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180      }                                                                                                             </span>
<span  style=""> 181                                                                                                                    </span>
<span class="2093106455269248536" onmouseenter="enter('2093106455269248536');" onmouseout="out('2093106455269248536');" style=""> 182      @Override public void onCancel() {                                                                            </span>
<span class="-7008879787374038097" onmouseenter="enter('-7008879787374038097');" onmouseout="out('-7008879787374038097');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 183 -      uploadEntity.setState(DownloadEntity.STATE_CANCEL);                                                         </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 184        handleSpeed(0);                                                                                             </span>
<span class="-429841809561978157" onmouseenter="enter('-429841809561978157');" onmouseout="out('-429841809561978157');" style=""> 185        sendInState2Target(DownloadSchedulers.CANCEL);                                                              </span>



<span class="3590974145169004176" onmouseenter="enter('3590974145169004176');" onmouseout="out('3590974145169004176');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 186 -      sendIntent(Aria.ACTION_CANCEL, -1);                                                                         </span>
<span class="-6418884136699144002" onmouseenter="enter('-6418884136699144002');" onmouseout="out('-6418884136699144002');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 187 -      uploadEntity.deleteData();                                                                                  </span>
<span class="-8209498279616463234" onmouseenter="enter('-8209498279616463234');" onmouseout="out('-8209498279616463234');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 188 +      saveData(IEntity.STATE_CANCEL, -1);                                                                         </span>
<span class="8489197424479237881" onmouseenter="enter('8489197424479237881');" onmouseout="out('8489197424479237881');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +      entity.deleteData();                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190      }                                                                                                             </span>
<span  style=""> 191                                                                                                                    </span>
<span class="7400813110786944810" onmouseenter="enter('7400813110786944810');" onmouseout="out('7400813110786944810');" style=""> 192      @Override public void onComplete() {                                                                          </span>
<span class="-7026235990786915660" onmouseenter="enter('-7026235990786915660');" onmouseout="out('-7026235990786915660');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 193 -      uploadEntity.setState(DownloadEntity.STATE_COMPLETE);                                                       </span>

<span class="8508951009876716305" onmouseenter="enter('8508951009876716305');" onmouseout="out('8508951009876716305');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 194 -      uploadEntity.setComplete(true);                                                                             </span>
<span class="-3659910208889661414" onmouseenter="enter('-3659910208889661414');" onmouseout="out('-3659910208889661414');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 195 +      entity.setComplete(true);                                                                                   </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 196        handleSpeed(0);                                                                                             </span>
<span class="6069346803721575809" onmouseenter="enter('6069346803721575809');" onmouseout="out('6069346803721575809');" style=""> 197        sendInState2Target(DownloadSchedulers.COMPLETE);                                                            </span>

<span class="-8501485242481720994" onmouseenter="enter('-8501485242481720994');" onmouseout="out('-8501485242481720994');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 198 -      sendIntent(Aria.ACTION_COMPLETE, uploadEntity.getFileSize());                                               </span>
<span class="-4243478454233770036" onmouseenter="enter('-4243478454233770036');" onmouseout="out('-4243478454233770036');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 199 +      saveData(IEntity.STATE_COMPLETE, entity.getFileSize());                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200      }                                                                                                             </span>
<span  style=""> 201                                                                                                                    </span>
<span class="-8845666459040584461" onmouseenter="enter('-8845666459040584461');" onmouseout="out('-8845666459040584461');" style=""> 202      @Override public void onFail() {                                                                              </span>
<span class="-2424267164941877802" onmouseenter="enter('-2424267164941877802');" onmouseout="out('-2424267164941877802');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 203 -      uploadEntity.setFailNum(uploadEntity.getFailNum() + 1);                                                     </span>
<span class="2017604368611205733" onmouseenter="enter('2017604368611205733');" onmouseout="out('2017604368611205733');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 204 -      uploadEntity.setState(DownloadEntity.STATE_FAIL);                                                           </span>
<span class="-1614602823543137763" onmouseenter="enter('-1614602823543137763');" onmouseout="out('-1614602823543137763');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 205 +      entity.setFailNum(entity.getFailNum() + 1);                                                                 </span>
<span class="-8387007605453828562" onmouseenter="enter('-8387007605453828562');" onmouseout="out('-8387007605453828562');" style=""> 206        handleSpeed(0);                                                                                             </span>
<span class="10069564286438765" onmouseenter="enter('10069564286438765');" onmouseout="out('10069564286438765');" style=""> 207        sendInState2Target(DownloadSchedulers.FAIL);                                                                </span>



<span class="-5033899741291131460" onmouseenter="enter('-5033899741291131460');" onmouseout="out('-5033899741291131460');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 208 -      sendIntent(Aria.ACTION_FAIL, -1);                                                                           </span>
<span class="825111020644911099" onmouseenter="enter('825111020644911099');" onmouseout="out('825111020644911099');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 209 +      saveData(IEntity.STATE_FAIL, -1);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210      }                                                                                                             </span>
<span  style=""> 211                                                                                                                    </span>
<span class="7889271447688685611" onmouseenter="enter('7889271447688685611');" onmouseout="out('7889271447688685611');" style=""> 212      private void handleSpeed(long speed) {                                                                        </span>
<span class="1151844561754699994" onmouseenter="enter('1151844561754699994');" onmouseout="out('1151844561754699994');" style=""> 213        if (isConvertSpeed) {                                                                                       </span>
<span class="-5945113083417661661" onmouseenter="enter('-5945113083417661661');" onmouseout="out('-5945113083417661661');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 214 -        uploadEntity.setConvertSpeed(CommonUtil.formatFileSize(speed) + &quot;/s&quot;);                                    </span>
<span class="-1064122449029006503" onmouseenter="enter('-1064122449029006503');" onmouseout="out('-1064122449029006503');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 215 +        entity.setConvertSpeed(CommonUtil.formatFileSize(speed) + &quot;/s&quot;);                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 216        } else {                                                                                                    </span>
<span class="6188357916906219523" onmouseenter="enter('6188357916906219523');" onmouseout="out('6188357916906219523');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 217 -        uploadEntity.setSpeed(speed);                                                                             </span>
<span class="-8903176931212217262" onmouseenter="enter('-8903176931212217262');" onmouseout="out('-8903176931212217262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +        entity.setSpeed(speed);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220      }                                                                                                             </span>
<span  style=""> 221                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 222      /**                                                                                                           </span>
<span class="5309333678065732533" onmouseenter="enter('5309333678065732533');" onmouseout="out('5309333678065732533');" style=""> 223       * 将任务状态发送给下载器                                                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 224       *                                                                                                            </span>
<span class="-5915729695604424458" onmouseenter="enter('-5915729695604424458');" onmouseout="out('-5915729695604424458');" style=""> 225       * @param state {@link DownloadSchedulers#START}                                                              </span>

<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 226       */                                                                                                           </span>
<span class="3842237707578177232" onmouseenter="enter('3842237707578177232');" onmouseout="out('3842237707578177232');" style=""> 227      private void sendInState2Target(int state) {                                                                  </span>
<span class="14240507737599715" onmouseenter="enter('14240507737599715');" onmouseout="out('14240507737599715');" style=""> 228        if (outHandler.get() != null) {                                                                             </span>
<span class="747666252236551572" onmouseenter="enter('747666252236551572');" onmouseout="out('747666252236551572');" style=""> 229          outHandler.get().obtainMessage(state, task.get()).sendToTarget();                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230        }                                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231      }                                                                                                             </span>
<span  style=""> 232                                                                                                                    </span>
<span class="5890305163070916433" onmouseenter="enter('5890305163070916433');" onmouseout="out('5890305163070916433');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 233 -    private void sendIntent(String action, long location) {                                                       </span>
<span class="-3195550105288086061" onmouseenter="enter('-3195550105288086061');" onmouseout="out('-3195550105288086061');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 234 -      uploadEntity.setComplete(action.equals(Aria.ACTION_COMPLETE));                                              </span>
<span class="-3482383325073941511" onmouseenter="enter('-3482383325073941511');" onmouseout="out('-3482383325073941511');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 235 -      uploadEntity.setCurrentProgress(location);                                                                  </span>
<span class="3840957147601077538" onmouseenter="enter('3840957147601077538');" onmouseout="out('3840957147601077538');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 236 -      uploadEntity.update();                                                                                      </span>
<span class="-2269986430100795496" onmouseenter="enter('-2269986430100795496');" onmouseout="out('-2269986430100795496');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 237 -      if (!isOpenBroadCast) return;                                                                               </span>
<span class="8723597706838177322" onmouseenter="enter('8723597706838177322');" onmouseout="out('8723597706838177322');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 238 -      Intent intent = CommonUtil.createIntent(context.getPackageName(), action);                                  </span>
<span class="7098269197041809391" onmouseenter="enter('7098269197041809391');" onmouseout="out('7098269197041809391');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 239 -      intent.putExtra(Aria.UPLOAD_ENTITY, uploadEntity);                                                          </span>
<span class="-1896674516131928769" onmouseenter="enter('-1896674516131928769');" onmouseout="out('-1896674516131928769');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 240 -      if (location != -1) {                                                                                       </span>
<span class="5814686869516323305" onmouseenter="enter('5814686869516323305');" onmouseout="out('5814686869516323305');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 241 -        intent.putExtra(Aria.CURRENT_LOCATION, location);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 242 -      }                                                                                                           </span>
<span class="2681624199862388289" onmouseenter="enter('2681624199862388289');" onmouseout="out('2681624199862388289');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 243 -      context.sendBroadcast(intent);                                                                              </span>
<span class="-8417795030437306969" onmouseenter="enter('-8417795030437306969');" onmouseout="out('-8417795030437306969');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 244 +    private void saveData(int state, long location) {                                                             </span>
<span class="1870432086074469274" onmouseenter="enter('1870432086074469274');" onmouseout="out('1870432086074469274');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 245 +      entity.setState(state);                                                                                     </span>
<span class="5476417475415693432" onmouseenter="enter('5476417475415693432');" onmouseout="out('5476417475415693432');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 246 +      entity.setComplete(state == IEntity.STATE_COMPLETE);                                                        </span>
<span class="8919645422588846117" onmouseenter="enter('8919645422588846117');" onmouseout="out('8919645422588846117');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +      entity.setCurrentProgress(location);                                                                        </span>
<span class="-733466174510760140" onmouseenter="enter('-733466174510760140');" onmouseout="out('-733466174510760140');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +      entity.update();                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250    }                                                                                                               </span>
<span  style=""> 251                                                                                                                    </span>
<span class="2010609695383714647" onmouseenter="enter('2010609695383714647');" onmouseout="out('2010609695383714647');" style=""> 252    public static class Builder {                                                                                   </span>
<span class="-2594100382464667299" onmouseenter="enter('-2594100382464667299');" onmouseout="out('-2594100382464667299');" style=""> 253      private Handler mOutHandler;                                                                                  </span>
<span class="-7667731813459538063" onmouseenter="enter('-7667731813459538063');" onmouseout="out('-7667731813459538063');" style=""> 254      private UploadTaskEntity mTaskEntity;                                                                         </span>
<span class="-3189317552395849100" onmouseenter="enter('-3189317552395849100');" onmouseout="out('-3189317552395849100');" style=""> 255      private String mTargetName;                                                                                   </span>
<span  style=""> 256                                                                                                                    </span>
<span class="-5398579486846956133" onmouseenter="enter('-5398579486846956133');" onmouseout="out('-5398579486846956133');" style=""> 257      public void setOutHandler(ISchedulers outHandler) {                                                           </span>
<span class="1621577143461664665" onmouseenter="enter('1621577143461664665');" onmouseout="out('1621577143461664665');" style=""> 258        mOutHandler = new Handler(outHandler);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259      }                                                                                                             </span>
<span  style=""> 260                                                                                                                    </span>
<span class="4605908466670558074" onmouseenter="enter('4605908466670558074');" onmouseout="out('4605908466670558074');" style=""> 261      public void setUploadTaskEntity(UploadTaskEntity taskEntity) {                                                </span>
<span class="8662994215762856538" onmouseenter="enter('8662994215762856538');" onmouseout="out('8662994215762856538');" style=""> 262        mTaskEntity = taskEntity;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263      }                                                                                                             </span>
<span  style=""> 264                                                                                                                    </span>
<span class="5139368500185827813" onmouseenter="enter('5139368500185827813');" onmouseout="out('5139368500185827813');" style=""> 265      public void setTargetName(String targetName) {                                                                </span>
<span class="7065259443227126232" onmouseenter="enter('7065259443227126232');" onmouseout="out('7065259443227126232');" style=""> 266        mTargetName = targetName;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267      }                                                                                                             </span>
<span  style=""> 268                                                                                                                    </span>
<span class="-5965884622997208966" onmouseenter="enter('-5965884622997208966');" onmouseout="out('-5965884622997208966');" style=""> 269      public Builder() {                                                                                            </span>
<span  style=""> 270                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271      }                                                                                                             </span>
<span  style=""> 272                                                                                                                    </span>
<span class="-3884470360854325651" onmouseenter="enter('-3884470360854325651');" onmouseout="out('-3884470360854325651');" style=""> 273      public UploadTask build() {                                                                                   </span>
<span class="5566441679723565284" onmouseenter="enter('5566441679723565284');" onmouseout="out('5566441679723565284');" style=""> 274        UploadTask task = new UploadTask(mTaskEntity, mOutHandler);                                                 </span>
<span class="8488479071402332460" onmouseenter="enter('8488479071402332460');" onmouseout="out('8488479071402332460');" style=""> 275        task.setTargetName(mTargetName);                                                                            </span>
<span class="8824306751398948689" onmouseenter="enter('8824306751398948689');" onmouseout="out('8824306751398948689');" style=""> 276        return task;                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278    }                                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            