<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>59</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    59
                    <a href="58.html">prev</a>
                    <a href="60.html">next</a>
                    <a href="59_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_99d857f3383c60ae4ae008f74e7d2b32afe9c26a_Aria/src/main/java/com/arialyy/aria/core/Aria.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;99d857f3383c60ae4ae008f74e7d2b32afe9c26a:Aria/src/main/java/com/arialyy/aria/core/Aria.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;99d857f3383c60ae4ae008f74e7d2b32afe9c26a^1:Aria/src/main/java/com/arialyy/aria/core/Aria.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;99d857f3383c60ae4ae008f74e7d2b32afe9c26a^2:Aria/src/main/java/com/arialyy/aria/core/Aria.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;41154d47fb8664ddca206122d28b50a6a3b8e9a6:Aria/src/main/java/com/arialyy/aria/core/Aria.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [b], [b], [b], [b], [j], [j], [j], [j], [j], [j], [j], [j], [j], [j]], subset: [[b], [b], [bj], [b], [bj], [bj], [j], [j], [j]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 
  17 package com.arialyy.aria.core;
  18 
  19 import android.annotation.TargetApi;
  20 import android.app.Activity;
  21 import android.app.Application;
  22 import android.app.Dialog;
  23 import android.app.DialogFragment;
  24 import android.app.Fragment;
  25 import android.app.Service;
  26 import android.content.Context;
  27 import android.os.Build;
  28 import android.widget.PopupWindow;
  29 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  30 import com.arialyy.aria.core.scheduler.OnSchedulerListener;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  31 import com.arialyy.aria.core.task.Task;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  32 import com.arialyy.aria.util.CheckUtil;</span>
  33 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  34 import com.arialyy.aria.core.scheduler.OnSchedulerListener;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  35 import com.arialyy.aria.core.task.Task;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  36 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  37 /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  38  * Created by lyy on 2016/12/1.</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  39  * https://github.com/AriaLyy/Aria</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  40  * Aria启动，管理全局任务</span>
  41 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  42 import com.arialyy.aria.core.download.DownloadReceiver;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  43 import com.arialyy.aria.core.scheduler.DownloadSchedulers;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  44 import com.arialyy.aria.core.scheduler.IDownloadSchedulerListener;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  45 import com.arialyy.aria.core.scheduler.ISchedulerListener;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  46 import com.arialyy.aria.core.download.DownloadTask;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  47 import com.arialyy.aria.core.upload.UploadReceiver;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  48 import com.arialyy.aria.core.upload.UploadTask;</span>
  49 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  50 
  51 /**
  52  * Created by lyy on 2016/12/1.
  53  * https://github.com/AriaLyy/Aria
  54  * Aria启动，管理全局任务
  55  * &lt;pre&gt;
  56  *   &lt;code&gt;
  57  *   //下载
  58  *   Aria.download(this)
  59  *       .load(DOWNLOAD_URL)     //下载地址，必填
  60  *       //文件保存路径，必填
  61  *       .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/test.apk&quot;)
  62  *       .start();
  63  *   &lt;/code&gt;
  64  *   &lt;code&gt;
  65  *    //上传
  66  *    Aria.upload(this)
  67  *        .load(filePath)     //文件路径，必填
  68  *        .setUploadUrl(uploadUrl)  //上传路径，必填
  69  *        .setAttachment(fileKey)   //服务器读取文件的key，必填
  70  *        .start();
  71  *   &lt;/code&gt;
  72  * &lt;/pre&gt;
  73  */
  74 @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) public class Aria {
  75   /**
  76    * 不支持断点
  77    */
  78   public static final String ACTION_SUPPORT_BREAK_POINT = &quot;ACTION_SUPPORT_BREAK_POINT&quot;;
  79   /**
  80    * 预处理完成
  81    */
  82   public static final String ACTION_PRE = &quot;ACTION_PRE&quot;;
  83   /**
  84    * 下载开始前事件
  85    */
  86   public static final String ACTION_POST_PRE = &quot;ACTION_POST_PRE&quot;;
  87   /**
  88    * 开始下载事件
  89    */
  90   public static final String ACTION_START = &quot;ACTION_START&quot;;
  91   /**
  92    * 恢复下载事件
  93    */
  94   public static final String ACTION_RESUME = &quot;ACTION_RESUME&quot;;
  95   /**
  96    * 正在下载事件
  97    */
  98   public static final String ACTION_RUNNING = &quot;ACTION_RUNNING&quot;;
  99   /**
 100    * 停止下载事件
 101    */
 102   public static final String ACTION_STOP = &quot;ACTION_STOP&quot;;
 103   /**
 104    * 取消下载事件
 105    */
 106   public static final String ACTION_CANCEL = &quot;ACTION_CANCEL&quot;;
 107   /**
 108    * 下载完成事件
 109    */
 110   public static final String ACTION_COMPLETE = &quot;ACTION_COMPLETE&quot;;
 111   /**
 112    * 下载失败事件
 113    */
 114   public static final String ACTION_FAIL = &quot;ACTION_FAIL&quot;;
 115   /**
 116    * 下载实体
 117    */
 118   public static final String ENTITY = &quot;DOWNLOAD_ENTITY&quot;;
 119   /**
 120    * 位置
 121    */
 122   public static final String CURRENT_LOCATION = &quot;CURRENT_LOCATION&quot;;
 123   /**
 124    * 速度
 125    */
 126   public static final String CURRENT_SPEED = &quot;CURRENT_SPEED&quot;;
 127 
 128   private Aria() {
 129   }
 130 
 131 
 132   /**
 133    * 初始化下载
 134    *
 135    * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 136    */
 137 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 138   public static AMReceiver whit(Context context) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 139     CheckUtil.checkNull(context);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 140     if (context instanceof Activity</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 141         || context instanceof Service</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 142         || context instanceof Application) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 143       return AriaManager.getInstance(context).get(context);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 144     } else {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 145       throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 146     }</span>
 147 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148     checkNull(context);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149     if (context instanceof Activity</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150         || context instanceof Service</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151         || context instanceof Application) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152       return AriaManager.getInstance(context).get(context);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153     } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154       throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159    * 处理Fragment</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 161   public static AMReceiver whit(Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 162     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165             : fragment.getActivity()).get(fragment);</span>
 166 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 167   public static DownloadReceiver download(Object obj) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 168     return get(obj).download(obj);</span>
 169 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 170   }
 171 
 172   /**
 173    * 初始化上传
 174    *
 175    * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 176    */
 177 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 178   public static AMReceiver whit(Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 179     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 180     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 181         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 182             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 183   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 184 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 185   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 186    * 处理Fragment</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 187    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 188   public static AMReceiver whit(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 189     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 190     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 191         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 192             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 193   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 194 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 195   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 196    * 处理Fragment、或者DialogFragment</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 197    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 198   public static AMReceiver whit(DialogFragment dialog) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 199     CheckUtil.checkNull(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 200     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 201         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity())</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 202         .get(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 203   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 204 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 205   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 206    * 处理popupwindow</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 207    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 208   public static AMReceiver whit(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 209     CheckUtil.checkNull(popupWindow);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 210     return AriaManager.getInstance(popupWindow.getContentView().getContext()).get(popupWindow);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 211   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 212 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 213   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 214    * 处理Dialog</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 216   public static AMReceiver whit(Dialog dialog) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 217     CheckUtil.checkNull(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 218     return AriaManager.getInstance(dialog.getContext()).get(dialog);</span>
 219 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 221     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 222         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 223             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 224   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 225 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 226   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 227    * 处理Fragment</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 228    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 229   public static AMReceiver whit(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 230     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 231     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 232         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 233             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 234   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 235 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 236   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 237    * 处理Fragment、或者DialogFragment</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 238    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 239   public static AMReceiver whit(DialogFragment dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 240     checkNull(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 241     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 242         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity())</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 243         .get(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 244   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 245 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 246   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 247    * 处理popupwindow</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 248    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 249   public static AMReceiver whit(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 250     checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 251     return AriaManager.getInstance(popupWindow.getContentView().getContext()).get(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 252   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 253 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 254   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 255    * 处理Dialog</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 256    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 257   public static AMReceiver whit(Dialog dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 258     checkNull(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 259     return AriaManager.getInstance(dialog.getContext()).get(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 260   }</span>
 261 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 262   public static UploadReceiver upload(Object obj) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 263     return get(obj).upload(obj);</span>
 264 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 265   }
 266 
 267   /**
 268    * 处理通用事件
 269    *
 270    * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 271    */
 272   public static AriaManager get(Object obj) {
 273     if (obj instanceof Activity || obj instanceof Service || obj instanceof Application) {
 274       return AriaManager.getInstance((Context) obj);
 275     } else if (obj instanceof DialogFragment) {
 276       DialogFragment dialog = (DialogFragment) obj;
 277       return AriaManager.getInstance(
 278           Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext()
 279               : dialog.getActivity());
 280     } else if (obj instanceof android.support.v4.app.Fragment) {
 281       android.support.v4.app.Fragment fragment = (android.support.v4.app.Fragment) obj;
 282       return AriaManager.getInstance(
 283           Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 284               : fragment.getActivity());
 285     } else if (obj instanceof Fragment) {
 286       Fragment fragment = (Fragment) obj;
 287       return AriaManager.getInstance(
 288           Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 289               : fragment.getActivity());
 290     } else if (obj instanceof PopupWindow) {
 291       PopupWindow popupWindow = (PopupWindow) obj;
 292       return AriaManager.getInstance(popupWindow.getContentView().getContext());
 293     } else if (obj instanceof Dialog) {
 294       Dialog dialog = (Dialog) obj;
 295       return AriaManager.getInstance(dialog.getContext());
 296     } else {
 297       throw new IllegalArgumentException(&quot;不支持的类型&quot;);
 298     }
 299   }
 300 
 301   /**
 302    * 上传任务状态监听
 303    */
 304 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 305   public static AriaManager get(Dialog dialog) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 306     CheckUtil.checkNull(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 307     return AriaManager.getInstance(dialog.getContext());</span>
 308 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 309       throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 310     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 311   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 312 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 313   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 314    * 处理Dialog的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 315    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 316   public static AriaManager get(Dialog dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 317     checkNull(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 318     return AriaManager.getInstance(dialog.getContext());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 319   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 320 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 321   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 322    * 处理Dialog的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 323    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 324   public static AriaManager get(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 325     checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326     return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 328 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 329   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 330    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 331    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332   public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 336             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 337   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 338 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 339   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 340    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 341    */</span>
 342 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 343   public static class UploadSchedulerListener implements ISchedulerListener&lt;UploadTask&gt; {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 344 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 345     @Override public void onTaskPre(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 346 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 347     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 348 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 349     @Override public void onTaskResume(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 350 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 351     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 352 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 353     @Override public void onTaskStart(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 354 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 355     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 356 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 357     @Override public void onTaskStop(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 358 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 359     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 360 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 361     @Override public void onTaskCancel(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 362 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 363     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 364 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 365     @Override public void onTaskFail(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 366 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 367     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 368 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 369     @Override public void onTaskComplete(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 370 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 371     }</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 372 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 373     @Override public void onTaskRunning(UploadTask task) {</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 374 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 375     }</span>
 376 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 377   }
 378 
 379   /**
 380    * 下载任务状态监听
 381    */
 382 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 383   public static AriaManager get(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 384     CheckUtil.checkNull(popupWindow);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 385     return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 386   }</span>
 387 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 388     checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 389     return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 390   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 391 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 392   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 393    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 394    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 395   public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 396     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 397     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 398         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 399             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 400   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 401 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 402   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 403    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 404    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 405   public static AriaManager get(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 406     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 407     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 408         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 409             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 410   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 411 </span>
 412 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 413   public static class DownloadSchedulerListener implements</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 414       IDownloadSchedulerListener&lt;DownloadTask&gt; {</span>
 415 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 416 
 417 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 418   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 419    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 420    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 421   public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 422     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 423     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 424         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 425             : fragment.getActivity());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 426   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 427 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 428   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 429    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 430    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 431   public static AriaManager get(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 432     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 433     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 434         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 435             : fragment.getActivity());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 436   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 437 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 438   public static class SimpleSchedulerListener implements OnSchedulerListener {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 439 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 440     @Override public void onTaskPre(Task task) {</span>
 441 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 442    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 443    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 444   public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 445     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 446     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 447         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 448             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 449   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 450 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 451   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 452    * 处理Fragment的通用任务</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 453    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 454   public static AriaManager get(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 455     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 456     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 457         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 458             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 459   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 460 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 461   private static void checkNull(Object obj) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 462     if (obj == null) throw new IllegalArgumentException(&quot;不能传入空对象&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 463   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 464 </span>
 465 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 466     @Override public void onTaskPre(DownloadTask task) {</span>
 467 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 468 
 469     }
 470 
 471     @Override public void onTaskResume(DownloadTask task) {
 472 
 473     }
 474 
 475     @Override public void onTaskStart(DownloadTask task) {
 476 
 477     }
 478 
 479     @Override public void onTaskStop(DownloadTask task) {
 480 
 481     }
 482 
 483     @Override public void onTaskCancel(DownloadTask task) {
 484 
 485     }
 486 
 487     @Override public void onTaskFail(DownloadTask task) {
 488 
 489     }
 490 
 491     @Override public void onTaskComplete(DownloadTask task) {
 492 
 493     }
 494 
 495     @Override public void onTaskRunning(DownloadTask task) {
 496 
 497     }
 498 
 499     @Override public void onNoSupportBreakPoint(DownloadTask task) {
 500 
 501     }
 502   }
 503 }</pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 
  17 package com.arialyy.aria.core;
  18 
  19 import android.annotation.TargetApi;
  20 import android.app.Activity;
  21 import android.app.Application;
  22 import android.app.Dialog;
  23 import android.app.DialogFragment;
  24 import android.app.Fragment;
  25 import android.app.Service;
  26 import android.content.Context;
  27 import android.os.Build;
  28 import android.widget.PopupWindow;
  29 import com.arialyy.aria.util.CheckUtil;
  30 import com.arialyy.aria.core.download.DownloadReceiver;
  31 import com.arialyy.aria.core.scheduler.DownloadSchedulers;
  32 import com.arialyy.aria.core.scheduler.IDownloadSchedulerListener;
  33 import com.arialyy.aria.core.scheduler.ISchedulerListener;
  34 import com.arialyy.aria.core.download.DownloadTask;
  35 import com.arialyy.aria.core.upload.UploadReceiver;
  36 import com.arialyy.aria.core.upload.UploadTask;
  37 
  38 /**
  39  * Created by lyy on 2016/12/1.
  40  * https://github.com/AriaLyy/Aria
  41  * Aria启动，管理全局任务
  42  * &lt;pre&gt;
  43  *   &lt;code&gt;
  44  *   //下载
  45  *   Aria.download(this)
  46  *       .load(DOWNLOAD_URL)     //下载地址，必填
  47  *       //文件保存路径，必填
  48  *       .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/test.apk&quot;)
  49  *       .start();
  50  *   &lt;/code&gt;
  51  *   &lt;code&gt;
  52  *    //上传
  53  *    Aria.upload(this)
  54  *        .load(filePath)     //文件路径，必填
  55  *        .setUploadUrl(uploadUrl)  //上传路径，必填
  56  *        .setAttachment(fileKey)   //服务器读取文件的key，必填
  57  *        .start();
  58  *   &lt;/code&gt;
  59  * &lt;/pre&gt;
  60  */
  61 @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) public class Aria {
  62   /**
  63    * 不支持断点
  64    */
  65   public static final String ACTION_SUPPORT_BREAK_POINT = &quot;ACTION_SUPPORT_BREAK_POINT&quot;;
  66   /**
  67    * 预处理完成
  68    */
  69   public static final String ACTION_PRE = &quot;ACTION_PRE&quot;;
  70   /**
  71    * 下载开始前事件
  72    */
  73   public static final String ACTION_POST_PRE = &quot;ACTION_POST_PRE&quot;;
  74   /**
  75    * 开始下载事件
  76    */
  77   public static final String ACTION_START = &quot;ACTION_START&quot;;
  78   /**
  79    * 恢复下载事件
  80    */
  81   public static final String ACTION_RESUME = &quot;ACTION_RESUME&quot;;
  82   /**
  83    * 正在下载事件
  84    */
  85   public static final String ACTION_RUNNING = &quot;ACTION_RUNNING&quot;;
  86   /**
  87    * 停止下载事件
  88    */
  89   public static final String ACTION_STOP = &quot;ACTION_STOP&quot;;
  90   /**
  91    * 取消下载事件
  92    */
  93   public static final String ACTION_CANCEL = &quot;ACTION_CANCEL&quot;;
  94   /**
  95    * 下载完成事件
  96    */
  97   public static final String ACTION_COMPLETE = &quot;ACTION_COMPLETE&quot;;
  98   /**
  99    * 下载失败事件
 100    */
 101   public static final String ACTION_FAIL = &quot;ACTION_FAIL&quot;;
 102   /**
 103    * 下载实体
 104    */
 105   public static final String ENTITY = &quot;DOWNLOAD_ENTITY&quot;;
 106   /**
 107    * 位置
 108    */
 109   public static final String CURRENT_LOCATION = &quot;CURRENT_LOCATION&quot;;
 110   /**
 111    * 速度
 112    */
 113   public static final String CURRENT_SPEED = &quot;CURRENT_SPEED&quot;;
 114 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 115 public static AMReceiver whit(Context context) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 116     CheckUtil.checkNull(context);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 117     if (context instanceof Activity</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 118         || context instanceof Service</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 119         || context instanceof Application) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 120       return AriaManager.getInstance(context).get(context);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 121     } else {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 122       throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 123     }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 124   }</span>
 125 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126 public static AMReceiver whit(Context context) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127     //if (context == null) throw new IllegalArgumentException(&quot;context 不能为 null&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128     checkNull(context);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129     if (context instanceof Activity</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130         || context instanceof Service</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131         || context instanceof Application) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132       return AriaManager.getInstance(context).get(context);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133     } else {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134       throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135     }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136   }</span>
 137 =======
 138 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 139 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 140 public static AMReceiver whit(Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 141     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 142     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 143         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 144             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 145   }</span>
 146 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147 public static AMReceiver whit(Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152   }</span>
 153 =======
 154 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 155 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 156 public static AMReceiver whit(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 157     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 158     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 159         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 160             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 161   }</span>
 162 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 163 public static AMReceiver whit(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 164     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 165     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 166         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 167             : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 168   }</span>
 169 =======
 170 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 171 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 172 public static AMReceiver whit(DialogFragment dialog) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 173     CheckUtil.checkNull(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 174     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 175         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity())</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 176         .get(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 177   }</span>
 178 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 179 public static AMReceiver whit(DialogFragment dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 180     checkNull(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 181     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 182         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity())</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 183         .get(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 184   }</span>
 185 =======
 186 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 187 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 188 public static AMReceiver whit(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 189     CheckUtil.checkNull(popupWindow);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 190     return AriaManager.getInstance(popupWindow.getContentView().getContext()).get(popupWindow);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 191   }</span>
 192 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 193 public static AMReceiver whit(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 194     checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 195     return AriaManager.getInstance(popupWindow.getContentView().getContext()).get(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 196   }</span>
 197 =======
 198 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 199 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 200 public static AMReceiver whit(Dialog dialog) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 201     CheckUtil.checkNull(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 202     return AriaManager.getInstance(dialog.getContext()).get(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 203   }</span>
 204 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 205 public static AMReceiver whit(Dialog dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 206     checkNull(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 207     return AriaManager.getInstance(dialog.getContext()).get(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 208   }</span>
 209 =======
 210 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 211 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 212 public static AriaManager get(Dialog dialog) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 213     CheckUtil.checkNull(dialog);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 214     return AriaManager.getInstance(dialog.getContext());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215   }</span>
 216 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 217 public static AriaManager get(Dialog dialog) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 218     checkNull(dialog);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 219     return AriaManager.getInstance(dialog.getContext());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 220   }</span>
 221 =======
 222 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 223 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 224 public static AriaManager get(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 225     CheckUtil.checkNull(popupWindow);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 226     return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 227   }</span>
 228 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 229 public static AriaManager get(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 230     checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 231     return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 232   }</span>
 233 =======
 234 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 235 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 236 public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 237     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 238     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 239         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 240             : fragment.getActivity());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 241   }</span>
 242 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 243 public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 244     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 245     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 246         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 247             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 248   }</span>
 249 =======
 250 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 251 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 252 public static AriaManager get(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 253     CheckUtil.checkNull(fragment);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 254     return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 255         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 256             : fragment.getActivity());</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 257   }</span>
 258 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 259 public static AriaManager get(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 260     checkNull(fragment);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 261     return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 262         Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 263             : fragment.getActivity());</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 264   }</span>
 265 =======
 266 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
 267 
 268 
 269   /**
 270    * 初始化下载
 271    *
 272    * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 273    */
 274   public static DownloadReceiver download(Object obj) {
 275     return get(obj).download(obj);
 276   }
 277 
 278   /**
 279    * 初始化上传
 280    *
 281    * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 282    */
 283   public static UploadReceiver upload(Object obj) {
 284     return get(obj).upload(obj);
 285   }
 286 
 287   /**
 288    * 处理通用事件
 289    *
 290    * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 291    */
 292   public static AriaManager get(Object obj) {
 293     if (obj instanceof Activity || obj instanceof Service || obj instanceof Application) {
 294       return AriaManager.getInstance((Context) obj);
 295     } else if (obj instanceof DialogFragment) {
 296       DialogFragment dialog = (DialogFragment) obj;
 297       return AriaManager.getInstance(
 298           Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext()
 299               : dialog.getActivity());
 300     } else if (obj instanceof android.support.v4.app.Fragment) {
 301       android.support.v4.app.Fragment fragment = (android.support.v4.app.Fragment) obj;
 302       return AriaManager.getInstance(
 303           Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 304               : fragment.getActivity());
 305     } else if (obj instanceof Fragment) {
 306       Fragment fragment = (Fragment) obj;
 307       return AriaManager.getInstance(
 308           Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 309               : fragment.getActivity());
 310     } else if (obj instanceof PopupWindow) {
 311       PopupWindow popupWindow = (PopupWindow) obj;
 312       return AriaManager.getInstance(popupWindow.getContentView().getContext());
 313     } else if (obj instanceof Dialog) {
 314       Dialog dialog = (Dialog) obj;
 315       return AriaManager.getInstance(dialog.getContext());
 316     } else {
 317       throw new IllegalArgumentException(&quot;不支持的类型&quot;);
 318     }
 319   }
 320 
 321   /**
 322    * 上传任务状态监听
 323    */
 324   public static class UploadSchedulerListener implements ISchedulerListener&lt;UploadTask&gt; {
 325 
 326     @Override public void onTaskPre(UploadTask task) {
 327 
 328     }
 329 
 330     @Override public void onTaskResume(UploadTask task) {
 331 
 332     }
 333 
 334     @Override public void onTaskStart(UploadTask task) {
 335 
 336     }
 337 
 338     @Override public void onTaskStop(UploadTask task) {
 339 
 340     }
 341 
 342     @Override public void onTaskCancel(UploadTask task) {
 343 
 344     }
 345 
 346     @Override public void onTaskFail(UploadTask task) {
 347 
 348     }
 349 
 350     @Override public void onTaskComplete(UploadTask task) {
 351 
 352     }
 353 
 354     @Override public void onTaskRunning(UploadTask task) {
 355 
 356     }
 357   }
 358 
 359   /**
 360    * 下载任务状态监听
 361    */
 362   public static class DownloadSchedulerListener implements
 363       IDownloadSchedulerListener&lt;DownloadTask&gt; {
 364 
 365     @Override public void onTaskPre(DownloadTask task) {
 366 
 367     }
 368 
 369     @Override public void onTaskResume(DownloadTask task) {
 370 
 371     }
 372 
 373     @Override public void onTaskStart(DownloadTask task) {
 374 
 375     }
 376 
 377     @Override public void onTaskStop(DownloadTask task) {
 378 
 379     }
 380 
 381     @Override public void onTaskCancel(DownloadTask task) {
 382 
 383     }
 384 
 385     @Override public void onTaskFail(DownloadTask task) {
 386 
 387     }
 388 
 389     @Override public void onTaskComplete(DownloadTask task) {
 390 
 391     }
 392 
 393     @Override public void onTaskRunning(DownloadTask task) {
 394 
 395     }
 396 
 397     @Override public void onNoSupportBreakPoint(DownloadTask task) {
 398 
 399     }
 400   }
 401 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core;
  17 
  18 import android.annotation.TargetApi;
  19 import android.app.Activity;
  20 import android.app.Application;
  21 import android.app.Dialog;
  22 import android.app.DialogFragment;
  23 import android.app.Fragment;
  24 import android.app.Service;
  25 import android.content.Context;
  26 import android.os.Build;
  27 import android.widget.PopupWindow;
  28 import com.arialyy.aria.core.download.DownloadReceiver;
  29 import com.arialyy.aria.core.download.DownloadTask;
  30 import com.arialyy.aria.core.scheduler.DownloadSchedulers;
  31 import com.arialyy.aria.core.scheduler.IDownloadSchedulerListener;
  32 import com.arialyy.aria.core.scheduler.ISchedulerListener;
  33 import com.arialyy.aria.core.upload.UploadReceiver;
  34 import com.arialyy.aria.core.upload.UploadTask;
  35 import com.arialyy.aria.util.CheckUtil;
  36 
  37 
  38 /**
  39  * Created by lyy on 2016/12/1.
  40  * https://github.com/AriaLyy/Aria
  41  * Aria启动，管理全局任务
  42  * &lt;pre&gt;
  43  * &lt;code&gt;
  44  * //下载
  45  * Aria.download(this)
  46  * .load(DOWNLOAD_URL)     //下载地址，必填
  47  * //文件保存路径，必填
  48  * .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/test.apk&quot;)
  49  * .start();
  50  * &lt;/code&gt;
  51  * &lt;code&gt;
  52  * //上传
  53  * Aria.upload(this)
  54  * .load(filePath)     //文件路径，必填
  55  * .setUploadUrl(uploadUrl)  //上传路径，必填
  56  * .setAttachment(fileKey)   //服务器读取文件的key，必填
  57  * .start();
  58  * &lt;/code&gt;
  59  * &lt;/pre&gt;
  60  */
  61 @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1)
  62 public class Aria {
  63   /**
  64    * 不支持断点
  65    */
  66   public static final String ACTION_SUPPORT_BREAK_POINT = &quot;ACTION_SUPPORT_BREAK_POINT&quot;;
  67 
  68   /**
  69    * 预处理完成
  70    */
  71   public static final String ACTION_PRE = &quot;ACTION_PRE&quot;;
  72 
  73   /**
  74    * 下载开始前事件
  75    */
  76   public static final String ACTION_POST_PRE = &quot;ACTION_POST_PRE&quot;;
  77 
  78   /**
  79    * 开始下载事件
  80    */
  81   public static final String ACTION_START = &quot;ACTION_START&quot;;
  82 
  83   /**
  84    * 恢复下载事件
  85    */
  86   public static final String ACTION_RESUME = &quot;ACTION_RESUME&quot;;
  87 
  88   /**
  89    * 正在下载事件
  90    */
  91   public static final String ACTION_RUNNING = &quot;ACTION_RUNNING&quot;;
  92 
  93   /**
  94    * 停止下载事件
  95    */
  96   public static final String ACTION_STOP = &quot;ACTION_STOP&quot;;
  97 
  98   /**
  99    * 取消下载事件
 100    */
 101   public static final String ACTION_CANCEL = &quot;ACTION_CANCEL&quot;;
 102 
 103   /**
 104    * 下载完成事件
 105    */
 106   public static final String ACTION_COMPLETE = &quot;ACTION_COMPLETE&quot;;
 107 
 108   /**
 109    * 下载失败事件
 110    */
 111   public static final String ACTION_FAIL = &quot;ACTION_FAIL&quot;;
 112 
 113   /**
 114    * 下载实体
 115    */
 116   public static final String ENTITY = &quot;DOWNLOAD_ENTITY&quot;;
 117 
 118   /**
 119    * 位置
 120    */
 121   public static final String CURRENT_LOCATION = &quot;CURRENT_LOCATION&quot;;
 122 
 123   /**
 124    * 速度
 125    */
 126   public static final String CURRENT_SPEED = &quot;CURRENT_SPEED&quot;;
 127 
 128   private Aria() {
 129   }
 130 
 131   /**
 132    * 初始化下载
 133    *
 134    * @param obj
 135    * 		支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 136    */
 137   public static DownloadReceiver download(Object obj) {
 138     return get(obj).download(obj);
 139   }
 140 
 141   /**
 142    * 初始化上传
 143    *
 144    * @param obj
 145    * 		支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 146    */
 147   public static UploadReceiver upload(Object obj) {
 148     return get(obj).upload(obj);
 149   }
 150 
 151   /**
 152    * 处理通用事件
 153    *
 154    * @param obj
 155    * 		支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】
 156    */
 157   public static AriaManager get(Object obj) {
 158     if (((obj instanceof Activity) || (obj instanceof Service)) || (obj instanceof Application)) {
 159       return AriaManager.getInstance(((Context) (obj)));
 160     } else if (obj instanceof DialogFragment) {
 161       DialogFragment dialog = ((DialogFragment) (obj));
<abbr title=" 162       return AriaManager.getInstance(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity());"> 162       return AriaManager.getInstance(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext()🔵</abbr>
 163     } else if (obj instanceof android.support.v4.app.Fragment) {
 164       android.support.v4.app.Fragment fragment = ((android.support.v4.app.Fragment) (obj));
<abbr title=" 165       return AriaManager.getInstance(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext() : fragment.getActivity());"> 165       return AriaManager.getInstance(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext🔵</abbr>
 166     } else if (obj instanceof Fragment) {
 167       Fragment fragment = ((Fragment) (obj));
<abbr title=" 168       return AriaManager.getInstance(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext() : fragment.getActivity());"> 168       return AriaManager.getInstance(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext🔵</abbr>
 169     } else if (obj instanceof PopupWindow) {
 170       PopupWindow popupWindow = ((PopupWindow) (obj));
 171       return AriaManager.getInstance(popupWindow.getContentView().getContext());
 172     } else if (obj instanceof Dialog) {
 173       Dialog dialog = ((Dialog) (obj));
 174       return AriaManager.getInstance(dialog.getContext());
 175     } else {
 176       throw new IllegalArgumentException(&quot;不支持的类型&quot;);
 177     }
 178   }
 179 
 180   /**
 181    * 上传任务状态监听
 182    */
 183   public static class UploadSchedulerListener implements ISchedulerListener&lt;UploadTask&gt; {
 184     @Override
 185     public void onTaskPre(UploadTask task) {
 186     }
 187 
 188     @Override
 189     public void onTaskResume(UploadTask task) {
 190     }
 191 
 192     @Override
 193     public void onTaskStart(UploadTask task) {
 194     }
 195 
 196     @Override public void onTaskStop(UploadTask task) {
 197 
 198     }
 199 
 200     @Override public void onTaskCancel(UploadTask task) {
 201 
 202     }
 203 
 204     @Override
 205     public void onTaskFail(UploadTask task) {
 206     }
 207 
 208     @Override public void onTaskComplete(UploadTask task) {
 209 
 210     }
 211 
 212     @Override public void onTaskRunning(UploadTask task) {
 213 
 214     }
 215   }
 216 
 217   /**
 218    * 下载任务状态监听
 219    */
 220   public static class DownloadSchedulerListener implements IDownloadSchedulerListener&lt;DownloadTask&gt; {
 221     @Override
 222     public void onTaskPre(DownloadTask task) {
 223     }
 224 
 225     @Override
 226     public void onTaskResume(DownloadTask task) {
 227     }
 228 
 229     @Override
 230     public void onTaskStart(DownloadTask task) {
 231     }
 232 
 233     @Override
 234     public void onTaskStop(DownloadTask task) {
 235     }
 236 
 237     @Override
 238     public void onTaskCancel(DownloadTask task) {
 239     }
 240 
 241     @Override
 242     public void onTaskFail(DownloadTask task) {
 243     }
 244 
 245     @Override
 246     public void onTaskComplete(DownloadTask task) {
 247     }
 248 
 249     @Override
 250     public void onTaskRunning(DownloadTask task) {
 251     }
 252 
 253     @Override public void onNoSupportBreakPoint(DownloadTask task) {
 254 
 255     }
 256   }
 257 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  
  17  package com.arialyy.aria.core;
  18  
  19  import android.annotation.TargetApi;
  20  import android.app.Activity;
  21  import android.app.Application;
  22  import android.app.Dialog;
  23  import android.app.DialogFragment;
  24  import android.app.Fragment;
  25  import android.app.Service;
  26  import android.content.Context;
  27  import android.os.Build;
  28  import android.widget.PopupWindow;
  29  import com.arialyy.aria.core.scheduler.OnSchedulerListener;
  30  import com.arialyy.aria.core.task.Task;
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +import com.arialyy.aria.util.CheckUtil;</span>






  32  
  33  /**
  34   * Created by lyy on 2016/12/1.
  35   * https://github.com/AriaLyy/Aria
  36   * Aria启动，管理全局任务
  37   * &lt;pre&gt;
  38   *   &lt;code&gt;
  39   *   //启动下载
  40   *   Aria.whit(this)


  41   *       .load(DOWNLOAD_URL)     //下载地址，必填
  42   *       //文件保存路径，必填
  43   *       .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/test.apk&quot;)
  44   *       .setDownloadName(&quot;test.apk&quot;)    //文件名，必填
  45   *       .start();








  46   *   &lt;/code&gt;
  47   * &lt;/pre&gt;
  48   */
  49  @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) public class Aria {
  50    /**




  51     * 预处理完成
  52     */
  53    public static final String ACTION_PRE = &quot;ACTION_PRE&quot;;
  54    /**
  55     * 下载开始前事件
  56     */
  57    public static final String ACTION_POST_PRE = &quot;ACTION_POST_PRE&quot;;
  58    /**
  59     * 开始下载事件
  60     */
  61    public static final String ACTION_START = &quot;ACTION_START&quot;;
  62    /**
  63     * 恢复下载事件
  64     */
  65    public static final String ACTION_RESUME = &quot;ACTION_RESUME&quot;;
  66    /**
  67     * 正在下载事件
  68     */
  69    public static final String ACTION_RUNNING = &quot;ACTION_RUNNING&quot;;
  70    /**
  71     * 停止下载事件
  72     */
  73    public static final String ACTION_STOP = &quot;ACTION_STOP&quot;;
  74    /**
  75     * 取消下载事件
  76     */
  77    public static final String ACTION_CANCEL = &quot;ACTION_CANCEL&quot;;
  78    /**
  79     * 下载完成事件
  80     */
  81    public static final String ACTION_COMPLETE = &quot;ACTION_COMPLETE&quot;;
  82    /**
  83     * 下载失败事件
  84     */
  85    public static final String ACTION_FAIL = &quot;ACTION_FAIL&quot;;
  86    /**
  87     * 下载实体
  88     */
  89    public static final String ENTITY = &quot;DOWNLOAD_ENTITY&quot;;
  90    /**
  91     * 位置
  92     */
  93    public static final String CURRENT_LOCATION = &quot;CURRENT_LOCATION&quot;;
  94    /**
  95     * 速度
  96     */
  97    public static final String CURRENT_SPEED = &quot;CURRENT_SPEED&quot;;
  98  
  99    private Aria() {
 100    }
 101  
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 102 +</span>
 103    /**
 104     * 接受Activity、Service、Application
 105     */
 106    public static AMReceiver whit(Context context) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 107 -    //if (context == null) throw new IllegalArgumentException(&quot;context 不能为 null&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 108 -    checkNull(context);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 109 +    CheckUtil.checkNull(context);</span>
 110      if (context instanceof Activity
 111          || context instanceof Service
 112          || context instanceof Application) {
 113        return AriaManager.getInstance(context).get(context);














































 114      } else {
 115        throw new IllegalArgumentException(&quot;这是不支持的context&quot;);
 116      }
 117    }
 118  
 119    /**
 120     * 处理Fragment
 121     */
 122    public static AMReceiver whit(Fragment fragment) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 123 -    checkNull(fragment);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 124 +    CheckUtil.checkNull(fragment);</span>
 125      return AriaManager.getInstance(
 126          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 127              : fragment.getActivity()).get(fragment);
 128    }
 129  
 130    /**
 131     * 处理Fragment
 132     */
 133    public static AMReceiver whit(android.support.v4.app.Fragment fragment) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 134 -    checkNull(fragment);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +    CheckUtil.checkNull(fragment);</span>
 136      return AriaManager.getInstance(
 137          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 138              : fragment.getActivity()).get(fragment);
 139    }
 140  
 141    /**
 142     * 处理Fragment、或者DialogFragment
 143     */
 144    public static AMReceiver whit(DialogFragment dialog) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 145 -    checkNull(dialog);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +    CheckUtil.checkNull(dialog);</span>
 147      return AriaManager.getInstance(
 148          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity())
 149          .get(dialog);
 150    }
 151  
 152    /**
 153     * 处理popupwindow
 154     */
 155    public static AMReceiver whit(PopupWindow popupWindow) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 156 -    checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +    CheckUtil.checkNull(popupWindow);</span>
 158      return AriaManager.getInstance(popupWindow.getContentView().getContext()).get(popupWindow);
 159    }
 160  
 161    /**
 162     * 处理Dialog
 163     */
 164    public static AMReceiver whit(Dialog dialog) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 165 -    checkNull(dialog);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +    CheckUtil.checkNull(dialog);</span>
 167      return AriaManager.getInstance(dialog.getContext()).get(dialog);
 168    }
 169  
 170    /**
 171     * 处理通用事件
 172     */
 173    public static AriaManager get(Context context) {
 174      if (context == null) throw new IllegalArgumentException(&quot;context 不能为 null&quot;);
 175      if (context instanceof Activity
 176          || context instanceof Service
 177          || context instanceof Application) {
 178        return AriaManager.getInstance(context);
 179      } else {
 180        throw new IllegalArgumentException(&quot;这是不支持的context&quot;);
 181      }
 182    }
 183  
 184    /**
 185     * 处理Dialog的通用任务
 186     */
 187    public static AriaManager get(Dialog dialog) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 188 -    checkNull(dialog);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 189 +    CheckUtil.checkNull(dialog);</span>
 190      return AriaManager.getInstance(dialog.getContext());
 191    }
 192  
 193    /**
 194     * 处理Dialog的通用任务
 195     */
 196    public static AriaManager get(PopupWindow popupWindow) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 197 -    checkNull(popupWindow);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 198 +    CheckUtil.checkNull(popupWindow);</span>
 199      return AriaManager.getInstance(popupWindow.getContentView().getContext());
 200    }
 201  
 202    /**
 203     * 处理Fragment的通用任务
 204     */
 205    public static AriaManager get(Fragment fragment) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 206 -    checkNull(fragment);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 207 +    CheckUtil.checkNull(fragment);</span>
 208      return AriaManager.getInstance(
 209          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 210              : fragment.getActivity());
 211    }
 212  
 213    /**
 214     * 处理Fragment的通用任务
 215     */
 216    public static AriaManager get(android.support.v4.app.Fragment fragment) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 217 -    checkNull(fragment);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +    CheckUtil.checkNull(fragment);</span>
 219      return AriaManager.getInstance(
 220          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()
 221              : fragment.getActivity());
 222    }
 223  
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 224 -  private static void checkNull(Object obj) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 225 -    if (obj == null) throw new IllegalArgumentException(&quot;不能传入空对象&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 226 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 227 -</span>
 228    public static class SimpleSchedulerListener implements OnSchedulerListener {
 229  
 230      @Override public void onTaskPre(Task task) {
 231  
 232      }
 233  
 234      @Override public void onTaskResume(Task task) {
 235  
 236      }
 237  
 238      @Override public void onTaskStart(Task task) {
 239  
 240      }
 241  
 242      @Override public void onTaskStop(Task task) {
 243  
 244      }
 245  
 246      @Override public void onTaskCancel(Task task) {
 247  
 248      }
 249  
 250      @Override public void onTaskFail(Task task) {
 251  
 252      }
 253  
 254      @Override public void onTaskComplete(Task task) {
 255  
 256      }
 257  
 258      @Override public void onTaskRunning(Task task) {

















































































 259  
 260      }
 261    }
 262  }</pre></td>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  
  17  package com.arialyy.aria.core;
  18  
  19  import android.annotation.TargetApi;
  20  import android.app.Activity;
  21  import android.app.Application;
  22  import android.app.Dialog;
  23  import android.app.DialogFragment;
  24  import android.app.Fragment;
  25  import android.app.Service;
  26  import android.content.Context;
  27  import android.os.Build;
  28  import android.widget.PopupWindow;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  29 -import com.arialyy.aria.core.scheduler.OnSchedulerListener;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  30 -import com.arialyy.aria.core.task.Task;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +import com.arialyy.aria.core.download.DownloadReceiver;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import com.arialyy.aria.core.scheduler.DownloadSchedulers;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import com.arialyy.aria.core.scheduler.IDownloadSchedulerListener;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import com.arialyy.aria.core.scheduler.ISchedulerListener;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  35 +import com.arialyy.aria.core.download.DownloadTask;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +import com.arialyy.aria.core.upload.UploadReceiver;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +import com.arialyy.aria.core.upload.UploadTask;</span>
  38  
  39  /**
  40   * Created by lyy on 2016/12/1.
  41   * https://github.com/AriaLyy/Aria
  42   * Aria启动，管理全局任务
  43   * &lt;pre&gt;
  44   *   &lt;code&gt;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  45 - *   //启动下载</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  46 - *   Aria.whit(this)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  47 + *   //下载</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  48 + *   Aria.download(this)</span>
  49   *       .load(DOWNLOAD_URL)     //下载地址，必填
  50   *       //文件保存路径，必填
  51   *       .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/test.apk&quot;)
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  52 - *       .setDownloadName(&quot;test.apk&quot;)    //文件名，必填</span>
  53   *       .start();
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  54 + *   &lt;/code&gt;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 + *   &lt;code&gt;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 + *    //上传</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 + *    Aria.upload(this)</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 + *        .load(filePath)     //文件路径，必填</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 + *        .setUploadUrl(uploadUrl)  //上传路径，必填</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 + *        .setAttachment(fileKey)   //服务器读取文件的key，必填</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  61 + *        .start();</span>
  62   *   &lt;/code&gt;
  63   * &lt;/pre&gt;
  64   */
  65  @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1) public class Aria {
  66    /**
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  67 +   * 不支持断点</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  68 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +  public static final String ACTION_SUPPORT_BREAK_POINT = &quot;ACTION_SUPPORT_BREAK_POINT&quot;;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  70 +  /**</span>
  71     * 预处理完成
  72     */
  73    public static final String ACTION_PRE = &quot;ACTION_PRE&quot;;
  74    /**
  75     * 下载开始前事件
  76     */
  77    public static final String ACTION_POST_PRE = &quot;ACTION_POST_PRE&quot;;
  78    /**
  79     * 开始下载事件
  80     */
  81    public static final String ACTION_START = &quot;ACTION_START&quot;;
  82    /**
  83     * 恢复下载事件
  84     */
  85    public static final String ACTION_RESUME = &quot;ACTION_RESUME&quot;;
  86    /**
  87     * 正在下载事件
  88     */
  89    public static final String ACTION_RUNNING = &quot;ACTION_RUNNING&quot;;
  90    /**
  91     * 停止下载事件
  92     */
  93    public static final String ACTION_STOP = &quot;ACTION_STOP&quot;;
  94    /**
  95     * 取消下载事件
  96     */
  97    public static final String ACTION_CANCEL = &quot;ACTION_CANCEL&quot;;
  98    /**
  99     * 下载完成事件
 100     */
 101    public static final String ACTION_COMPLETE = &quot;ACTION_COMPLETE&quot;;
 102    /**
 103     * 下载失败事件
 104     */
 105    public static final String ACTION_FAIL = &quot;ACTION_FAIL&quot;;
 106    /**
 107     * 下载实体
 108     */
 109    public static final String ENTITY = &quot;DOWNLOAD_ENTITY&quot;;
 110    /**
 111     * 位置
 112     */
 113    public static final String CURRENT_LOCATION = &quot;CURRENT_LOCATION&quot;;
 114    /**
 115     * 速度
 116     */
 117    public static final String CURRENT_SPEED = &quot;CURRENT_SPEED&quot;;
 118  
 119    private Aria() {
 120    }
 121  

 122    /**
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 123 -   * 接受Activity、Service、Application</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 124 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 125 -  public static AMReceiver whit(Context context) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 126 -    //if (context == null) throw new IllegalArgumentException(&quot;context 不能为 null&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 127 -    checkNull(context);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 128 -    if (context instanceof Activity</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 129 -        || context instanceof Service</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 130 -        || context instanceof Application) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 131 -      return AriaManager.getInstance(context).get(context);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +   * 初始化下载</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +   *</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +   * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +  public static DownloadReceiver download(Object obj) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 137 +    return get(obj).download(obj);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 138 +  }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 139 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 140 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +   * 初始化上传</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 142 +   *</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 143 +   * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 145 +  public static UploadReceiver upload(Object obj) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 146 +    return get(obj).upload(obj);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 147 +  }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 148 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 150 +   * 处理通用事件</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +   *</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +   * @param obj 支持类型有【Activity、Service、Application、DialogFragment、Fragment、PopupWindow、Dialog】</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 153 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 154 +  public static AriaManager get(Object obj) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 155 +    if (obj instanceof Activity || obj instanceof Service || obj instanceof Application) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 156 +      return AriaManager.getInstance((Context) obj);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 157 +    } else if (obj instanceof DialogFragment) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 158 +      DialogFragment dialog = (DialogFragment) obj;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 159 +      return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext()</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 161 +              : dialog.getActivity());</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 162 +    } else if (obj instanceof android.support.v4.app.Fragment) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 163 +      android.support.v4.app.Fragment fragment = (android.support.v4.app.Fragment) obj;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 164 +      return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 165 +          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 166 +              : fragment.getActivity());</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 167 +    } else if (obj instanceof Fragment) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 168 +      Fragment fragment = (Fragment) obj;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +      return AriaManager.getInstance(</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 170 +          Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +              : fragment.getActivity());</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +    } else if (obj instanceof PopupWindow) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +      PopupWindow popupWindow = (PopupWindow) obj;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 174 +      return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +    } else if (obj instanceof Dialog) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +      Dialog dialog = (Dialog) obj;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +      return AriaManager.getInstance(dialog.getContext());</span>
 178      } else {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 179 -      throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 180 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 181 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 182 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 183 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 184 -   * 处理Fragment</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 185 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 186 -  public static AMReceiver whit(Fragment fragment) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 187 -    checkNull(fragment);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 188 -    return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 189 -        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 190 -            : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 191 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 192 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 193 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 194 -   * 处理Fragment</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 195 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 196 -  public static AMReceiver whit(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 197 -    checkNull(fragment);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 198 -    return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 199 -        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 200 -            : fragment.getActivity()).get(fragment);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 201 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 202 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 203 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 204 -   * 处理Fragment、或者DialogFragment</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 205 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 206 -  public static AMReceiver whit(DialogFragment dialog) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 207 -    checkNull(dialog);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 208 -    return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 209 -        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? dialog.getContext() : dialog.getActivity())</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 210 -        .get(dialog);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 211 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 212 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 213 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 214 -   * 处理popupwindow</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 215 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 216 -  public static AMReceiver whit(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 217 -    checkNull(popupWindow);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 218 -    return AriaManager.getInstance(popupWindow.getContentView().getContext()).get(popupWindow);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 219 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 220 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 221 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 222 -   * 处理Dialog</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 223 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 224 -  public static AMReceiver whit(Dialog dialog) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 225 -    checkNull(dialog);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 226 -    return AriaManager.getInstance(dialog.getContext()).get(dialog);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 227 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 228 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 229 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 230 -   * 处理通用事件</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 231 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 232 -  public static AriaManager get(Context context) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 233 -    if (context == null) throw new IllegalArgumentException(&quot;context 不能为 null&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 234 -    if (context instanceof Activity</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 235 -        || context instanceof Service</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 236 -        || context instanceof Application) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 237 -      return AriaManager.getInstance(context);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 238 -    } else {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 239 -      throw new IllegalArgumentException(&quot;这是不支持的context&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 240 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 241 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 242 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 243 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 244 -   * 处理Dialog的通用任务</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 245 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 246 -  public static AriaManager get(Dialog dialog) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 247 -    checkNull(dialog);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 248 -    return AriaManager.getInstance(dialog.getContext());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 249 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 250 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 251 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 252 -   * 处理Dialog的通用任务</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 253 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 254 -  public static AriaManager get(PopupWindow popupWindow) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 255 -    checkNull(popupWindow);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 256 -    return AriaManager.getInstance(popupWindow.getContentView().getContext());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 257 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 258 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 259 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 260 -   * 处理Fragment的通用任务</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 261 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 262 -  public static AriaManager get(Fragment fragment) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 263 -    checkNull(fragment);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 264 -    return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 265 -        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 266 -            : fragment.getActivity());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 267 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 268 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 269 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 270 -   * 处理Fragment的通用任务</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 271 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 272 -  public static AriaManager get(android.support.v4.app.Fragment fragment) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 273 -    checkNull(fragment);</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 274 -    return AriaManager.getInstance(</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 275 -        Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M ? fragment.getContext()</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 276 -            : fragment.getActivity());</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 277 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 278 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 279 -  private static void checkNull(Object obj) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 280 -    if (obj == null) throw new IllegalArgumentException(&quot;不能传入空对象&quot;);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 281 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 282 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 283 -  public static class SimpleSchedulerListener implements OnSchedulerListener {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 284 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 285 -    @Override public void onTaskPre(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 286 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 287 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 288 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 289 -    @Override public void onTaskResume(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 290 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 291 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 292 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 293 -    @Override public void onTaskStart(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 294 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 295 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 296 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 297 -    @Override public void onTaskStop(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 298 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 299 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 300 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 301 -    @Override public void onTaskCancel(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 302 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 303 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 304 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 305 -    @Override public void onTaskFail(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 306 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 307 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 308 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 309 -    @Override public void onTaskComplete(Task task) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 310 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 311 -    }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 312 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 313 -    @Override public void onTaskRunning(Task task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 314 +      throw new IllegalArgumentException(&quot;不支持的类型&quot;);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 315 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 316 +  }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 317 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 318 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 319 +   * 上传任务状态监听</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 320 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 321 +  public static class UploadSchedulerListener implements ISchedulerListener&lt;UploadTask&gt; {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 322 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 323 +    @Override public void onTaskPre(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 324 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 325 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 326 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 327 +    @Override public void onTaskResume(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 328 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 329 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 330 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 331 +    @Override public void onTaskStart(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 332 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 333 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 334 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 335 +    @Override public void onTaskStop(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 336 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 337 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 338 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 339 +    @Override public void onTaskCancel(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 340 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 341 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 342 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 343 +    @Override public void onTaskFail(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 344 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 345 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 346 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 347 +    @Override public void onTaskComplete(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 348 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 349 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 350 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 351 +    @Override public void onTaskRunning(UploadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 352 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 353 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 354 +  }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 355 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 356 +  /**</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 357 +   * 下载任务状态监听</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 358 +   */</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 359 +  public static class DownloadSchedulerListener implements</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 360 +      IDownloadSchedulerListener&lt;DownloadTask&gt; {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 361 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 362 +    @Override public void onTaskPre(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 363 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 364 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 365 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 366 +    @Override public void onTaskResume(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 367 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 368 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 369 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 370 +    @Override public void onTaskStart(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 371 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 373 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 374 +    @Override public void onTaskStop(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 375 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 376 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 377 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 378 +    @Override public void onTaskCancel(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 379 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 380 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 381 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 382 +    @Override public void onTaskFail(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 383 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 384 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 385 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 386 +    @Override public void onTaskComplete(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 387 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 388 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 389 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 390 +    @Override public void onTaskRunning(DownloadTask task) {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 391 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 392 +    }</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 393 +</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 394 +    @Override public void onNoSupportBreakPoint(DownloadTask task) {</span>
 395  
 396      }
 397    }
 398  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            