<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>185</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    185
                    <a href="184.html">prev</a>
                    <a href="186.html">next</a>
                    <a href="185_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_7a3235c598fa46fbc540746648f129f6ef8dc647_WallpaperPicker/src/com/android/gallery3d/glrenderer/UploadedTexture.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7a3235c598fa46fbc540746648f129f6ef8dc647:WallpaperPicker/src/com/android/gallery3d/glrenderer/UploadedTexture.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7a3235c598fa46fbc540746648f129f6ef8dc647^1:WallpaperPicker/src/com/android/gallery3d/glrenderer/UploadedTexture.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;7a3235c598fa46fbc540746648f129f6ef8dc647^2:WallpaperPicker/src/com/android/gallery3d/glrenderer/UploadedTexture.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;42ea0db8892020cc07046979892460bad55d2b45:WallpaperPicker/src/com/android/gallery3d/glrenderer/UploadedTexture.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [bj]], subset: [[b], [bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="304880958838077089" onmouseenter="enter('304880958838077089');" onmouseout="out('304880958838077089');" style="">   2  * Copyright (C) 2010 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="-2294380047098899909" onmouseenter="enter('-2294380047098899909');" onmouseout="out('-2294380047098899909');" style="">  17 package com.android.gallery3d.glrenderer;                                                                </span>
<span  style="">  18                                                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  19 import android.graphics.Bitmap;                                                                          </span>
<span class="-5221619029963095423" onmouseenter="enter('-5221619029963095423');" onmouseout="out('-5221619029963095423');" style="">  20 import android.graphics.Bitmap.Config;                                                                   </span>
<span class="-1593998669479977209" onmouseenter="enter('-1593998669479977209');" onmouseout="out('-1593998669479977209');" style="">  21 import android.opengl.GLUtils;                                                                           </span>
<span  style="">  22                                                                                                          </span>
<span class="1950664032789890920" onmouseenter="enter('1950664032789890920');" onmouseout="out('1950664032789890920');" style="">  23 import com.android.gallery3d.common.Utils;                                                               </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  24 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  25 import com.android.launcher3.util.Thunk;                                                                 </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  26 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  27                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  28 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  29 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style="">  30                                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  31 import java.util.HashMap;                                                                                </span>
<span  style="">  32                                                                                                          </span>
<span class="-3046904593900803504" onmouseenter="enter('-3046904593900803504');" onmouseout="out('-3046904593900803504');" style="">  33 import javax.microedition.khronos.opengles.GL11;                                                         </span>
<span  style="">  34                                                                                                          </span>
<span class="179605427515979735" onmouseenter="enter('179605427515979735');" onmouseout="out('179605427515979735');" style="">  35 // UploadedTextures use a Bitmap for the content of the texture.                                         </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  36 //                                                                                                       </span>
<span class="-1339728597306956876" onmouseenter="enter('-1339728597306956876');" onmouseout="out('-1339728597306956876');" style="">  37 // Subclasses should implement onGetBitmap() to provide the Bitmap and                                   </span>
<span class="-7806758351897273383" onmouseenter="enter('-7806758351897273383');" onmouseout="out('-7806758351897273383');" style="">  38 // implement onFreeBitmap(mBitmap) which will be called when the Bitmap                                  </span>
<span class="225820100654862410" onmouseenter="enter('225820100654862410');" onmouseout="out('225820100654862410');" style="">  39 // is not needed anymore.                                                                                </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  40 //                                                                                                       </span>
<span class="-2525750445176209241" onmouseenter="enter('-2525750445176209241');" onmouseout="out('-2525750445176209241');" style="">  41 // isContentValid() is meaningful only when the isLoaded() returns true.                                 </span>
<span class="-3404045266596529542" onmouseenter="enter('-3404045266596529542');" onmouseout="out('-3404045266596529542');" style="">  42 // It means whether the content needs to be updated.                                                     </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  43 //                                                                                                       </span>
<span class="-5978788969149141858" onmouseenter="enter('-5978788969149141858');" onmouseout="out('-5978788969149141858');" style="">  44 // The user of this class should call recycle() when the texture is not                                  </span>
<span class="-2011833987557592726" onmouseenter="enter('-2011833987557592726');" onmouseout="out('-2011833987557592726');" style="">  45 // needed anymore.                                                                                       </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  46 //                                                                                                       </span>
<span class="-9012555777352942558" onmouseenter="enter('-9012555777352942558');" onmouseout="out('-9012555777352942558');" style="">  47 // By default an UploadedTexture is opaque (so it can be drawn faster without                            </span>
<span class="5513648399927943367" onmouseenter="enter('5513648399927943367');" onmouseout="out('5513648399927943367');" style="">  48 // blending). The user or subclass can override it using setOpaque().                                    </span>
<span class="-2562753946651237024" onmouseenter="enter('-2562753946651237024');" onmouseout="out('-2562753946651237024');" style="">  49 public abstract class UploadedTexture extends BasicTexture {                                             </span>
<span  style="">  50                                                                                                          </span>
<span class="7551988693298335394" onmouseenter="enter('7551988693298335394');" onmouseout="out('7551988693298335394');" style="">  51     // To prevent keeping allocation the borders, we store those used borders here.                      </span>
<span class="7137147725401059478" onmouseenter="enter('7137147725401059478');" onmouseout="out('7137147725401059478');" style="">  52     // Since the length will be power of two, it won&#x27;t use too much memory.                              </span>
<span class="-8271664251977113798" onmouseenter="enter('-8271664251977113798');" onmouseout="out('-8271664251977113798');" style="">  53     private static HashMap&lt;BorderKey, Bitmap&gt; sBorderLines =                                             </span>
<span class="-7687922754503084777" onmouseenter="enter('-7687922754503084777');" onmouseout="out('-7687922754503084777');" style="">  54             new HashMap&lt;BorderKey, Bitmap&gt;();                                                            </span>
<span class="-7116951483637301632" onmouseenter="enter('-7116951483637301632');" onmouseout="out('-7116951483637301632');" style="">  55     private static BorderKey sBorderKey = new BorderKey();                                               </span>
<span  style="">  56                                                                                                          </span>
<span class="-5517811679430868458" onmouseenter="enter('-5517811679430868458');" onmouseout="out('-5517811679430868458');" style="">  57     @SuppressWarnings(&quot;unused&quot;)                                                                          </span>
<span class="3595608324323658446" onmouseenter="enter('3595608324323658446');" onmouseout="out('3595608324323658446');" style="">  58     private static final String TAG = &quot;Texture&quot;;                                                         </span>
<span class="-8205267457037861440" onmouseenter="enter('-8205267457037861440');" onmouseout="out('-8205267457037861440');" style="">  59     private boolean mContentValid = true;                                                                </span>
<span  style="">  60                                                                                                          </span>
<span class="3117207874458064610" onmouseenter="enter('3117207874458064610');" onmouseout="out('3117207874458064610');" style="">  61     // indicate this textures is being uploaded in background                                            </span>
<span class="2115469074027012466" onmouseenter="enter('2115469074027012466');" onmouseout="out('2115469074027012466');" style="">  62     private boolean mIsUploading = false;                                                                </span>
<span class="-4012426016973653400" onmouseenter="enter('-4012426016973653400');" onmouseout="out('-4012426016973653400');" style="">  63     private boolean mOpaque = true;                                                                      </span>
<span class="-6194178623973458805" onmouseenter="enter('-6194178623973458805');" onmouseout="out('-6194178623973458805');" style="">  64     private boolean mThrottled = false;                                                                  </span>
<span class="-3729191520250436571" onmouseenter="enter('-3729191520250436571');" onmouseout="out('-3729191520250436571');" style="">  65     private static int sUploadedCount;                                                                   </span>
<span class="8538038388368690204" onmouseenter="enter('8538038388368690204');" onmouseout="out('8538038388368690204');" style="">  66     private static final int UPLOAD_LIMIT = 100;                                                         </span>
<span  style="">  67                                                                                                          </span>
<span class="7521066649824278149" onmouseenter="enter('7521066649824278149');" onmouseout="out('7521066649824278149');" style="">  68     protected Bitmap mBitmap;                                                                            </span>
<span class="-3790896434465611355" onmouseenter="enter('-3790896434465611355');" onmouseout="out('-3790896434465611355');" style="">  69     private int mBorder;                                                                                 </span>
<span  style="">  70                                                                                                          </span>
<span class="4763603038096129508" onmouseenter="enter('4763603038096129508');" onmouseout="out('4763603038096129508');" style="">  71     protected UploadedTexture() {                                                                        </span>
<span class="932803248646922221" onmouseenter="enter('932803248646922221');" onmouseout="out('932803248646922221');" style="">  72         this(false);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  73     }                                                                                                    </span>
<span  style="">  74                                                                                                          </span>
<span class="-3351248394452008679" onmouseenter="enter('-3351248394452008679');" onmouseout="out('-3351248394452008679');" style="">  75     protected UploadedTexture(boolean hasBorder) {                                                       </span>
<span class="3542920714145454971" onmouseenter="enter('3542920714145454971');" onmouseout="out('3542920714145454971');" style="">  76         super(null, 0, STATE_UNLOADED);                                                                  </span>
<span class="-1655014058222521597" onmouseenter="enter('-1655014058222521597');" onmouseout="out('-1655014058222521597');" style="">  77         if (hasBorder) {                                                                                 </span>
<span class="-4652124406467449963" onmouseenter="enter('-4652124406467449963');" onmouseout="out('-4652124406467449963');" style="">  78             setBorder(true);                                                                             </span>
<span class="2380954290781814167" onmouseenter="enter('2380954290781814167');" onmouseout="out('2380954290781814167');" style="">  79             mBorder = 1;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81     }                                                                                                    </span>
<span  style="">  82                                                                                                          </span>
<span class="4480998087656531772" onmouseenter="enter('4480998087656531772');" onmouseout="out('4480998087656531772');" style="">  83     protected void setIsUploading(boolean uploading) {                                                   </span>
<span class="6642969742561576780" onmouseenter="enter('6642969742561576780');" onmouseout="out('6642969742561576780');" style="">  84         mIsUploading = uploading;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85     }                                                                                                    </span>
<span  style="">  86                                                                                                          </span>
<span class="5863119202211681518" onmouseenter="enter('5863119202211681518');" onmouseout="out('5863119202211681518');" style="">  87     public boolean isUploading() {                                                                       </span>
<span class="2339527736268051895" onmouseenter="enter('2339527736268051895');" onmouseout="out('2339527736268051895');" style="">  88         return mIsUploading;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89     }                                                                                                    </span>
<span  style="">  90                                                                                                          </span>
<span class="7865940690358442417" onmouseenter="enter('7865940690358442417');" onmouseout="out('7865940690358442417');" style="">  91     @Thunk static class BorderKey implements Cloneable {                                                 </span>
<span class="-4594330548127637013" onmouseenter="enter('-4594330548127637013');" onmouseout="out('-4594330548127637013');" style="">  92         public boolean vertical;                                                                         </span>
<span class="-5526467619964627073" onmouseenter="enter('-5526467619964627073');" onmouseout="out('-5526467619964627073');" style="">  93         public Config config;                                                                            </span>
<span class="453026790913587128" onmouseenter="enter('453026790913587128');" onmouseout="out('453026790913587128');" style="">  94         public int length;                                                                               </span>
<span  style="">  95                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  96         @Override                                                                                        </span>
<span class="5226885376728374571" onmouseenter="enter('5226885376728374571');" onmouseout="out('5226885376728374571');" style="">  97         public int hashCode() {                                                                          </span>
<span class="-780094223215271991" onmouseenter="enter('-780094223215271991');" onmouseout="out('-780094223215271991');" style="">  98             int x = config.hashCode() ^ length;                                                          </span>
<span class="-899207486813796319" onmouseenter="enter('-899207486813796319');" onmouseout="out('-899207486813796319');" style="">  99             return vertical ? x : -x;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100         }                                                                                                </span>
<span  style=""> 101                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 102         @Override                                                                                        </span>
<span class="7673385308065274101" onmouseenter="enter('7673385308065274101');" onmouseout="out('7673385308065274101');" style=""> 103         public boolean equals(Object object) {                                                           </span>
<span class="-8927768855362490926" onmouseenter="enter('-8927768855362490926');" onmouseout="out('-8927768855362490926');" style=""> 104             if (!(object instanceof BorderKey)) return false;                                            </span>
<span class="-2936104822619283166" onmouseenter="enter('-2936104822619283166');" onmouseout="out('-2936104822619283166');" style=""> 105             BorderKey o = (BorderKey) object;                                                            </span>
<span class="-2976035776567085941" onmouseenter="enter('-2976035776567085941');" onmouseout="out('-2976035776567085941');" style=""> 106             return vertical == o.vertical                                                                </span>
<span class="-2294165725008002003" onmouseenter="enter('-2294165725008002003');" onmouseout="out('-2294165725008002003');" style=""> 107                     &amp;&amp; config == o.config &amp;&amp; length == o.length;                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108         }                                                                                                </span>
<span  style=""> 109                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 110         @Override                                                                                        </span>
<span class="4734347466243487953" onmouseenter="enter('4734347466243487953');" onmouseout="out('4734347466243487953');" style=""> 111         public BorderKey clone() {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 112             try {                                                                                        </span>
<span class="8454735050532327622" onmouseenter="enter('8454735050532327622');" onmouseout="out('8454735050532327622');" style=""> 113                 return (BorderKey) super.clone();                                                        </span>
<span class="-4442852992463448790" onmouseenter="enter('-4442852992463448790');" onmouseout="out('-4442852992463448790');" style=""> 114             } catch (CloneNotSupportedException e) {                                                     </span>
<span class="-6252834204302840787" onmouseenter="enter('-6252834204302840787');" onmouseout="out('-6252834204302840787');" style=""> 115                 throw new AssertionError(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118     }                                                                                                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="5796233267395141548" onmouseenter="enter('5796233267395141548');" onmouseout="out('5796233267395141548');" style=""> 120     protected void setThrottled(boolean throttled) {                                                     </span>
<span class="2728067841155066146" onmouseenter="enter('2728067841155066146');" onmouseout="out('2728067841155066146');" style=""> 121         mThrottled = throttled;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122     }                                                                                                    </span>
<span  style=""> 123                                                                                                          </span>
<span class="4580001023476062931" onmouseenter="enter('4580001023476062931');" onmouseout="out('4580001023476062931');" style=""> 124     private static Bitmap getBorderLine(                                                                 </span>
<span class="4237305713302887664" onmouseenter="enter('4237305713302887664');" onmouseout="out('4237305713302887664');" style=""> 125             boolean vertical, Config config, int length) {                                               </span>
<span class="5196741965171081542" onmouseenter="enter('5196741965171081542');" onmouseout="out('5196741965171081542');" style=""> 126         BorderKey key = sBorderKey;                                                                      </span>
<span class="-1796270064541479983" onmouseenter="enter('-1796270064541479983');" onmouseout="out('-1796270064541479983');" style=""> 127         key.vertical = vertical;                                                                         </span>
<span class="-173090402769638904" onmouseenter="enter('-173090402769638904');" onmouseout="out('-173090402769638904');" style=""> 128         key.config = config;                                                                             </span>
<span class="-2958410444098009294" onmouseenter="enter('-2958410444098009294');" onmouseout="out('-2958410444098009294');" style=""> 129         key.length = length;                                                                             </span>
<span class="-7771012412001259062" onmouseenter="enter('-7771012412001259062');" onmouseout="out('-7771012412001259062');" style=""> 130         Bitmap bitmap = sBorderLines.get(key);                                                           </span>
<span class="-1735832408094822956" onmouseenter="enter('-1735832408094822956');" onmouseout="out('-1735832408094822956');" style=""> 131         if (bitmap == null) {                                                                            </span>
<span class="1646679160344185704" onmouseenter="enter('1646679160344185704');" onmouseout="out('1646679160344185704');" style=""> 132             bitmap = vertical                                                                            </span>
<span class="-8767545810202353379" onmouseenter="enter('-8767545810202353379');" onmouseout="out('-8767545810202353379');" style=""> 133                     ? Bitmap.createBitmap(1, length, config)                                             </span>
<span class="-252712256386533466" onmouseenter="enter('-252712256386533466');" onmouseout="out('-252712256386533466');" style=""> 134                     : Bitmap.createBitmap(length, 1, config);                                            </span>
<span class="200036293659876844" onmouseenter="enter('200036293659876844');" onmouseout="out('200036293659876844');" style=""> 135             sBorderLines.put(key.clone(), bitmap);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136         }                                                                                                </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 137         return bitmap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span  style=""> 139                                                                                                          </span>
<span class="-2692570778449524647" onmouseenter="enter('-2692570778449524647');" onmouseout="out('-2692570778449524647');" style=""> 140     private Bitmap getBitmap() {                                                                         </span>
<span class="-5405905934796296849" onmouseenter="enter('-5405905934796296849');" onmouseout="out('-5405905934796296849');" style=""> 141         if (mBitmap == null) {                                                                           </span>
<span class="-5459018773845559989" onmouseenter="enter('-5459018773845559989');" onmouseout="out('-5459018773845559989');" style=""> 142             mBitmap = onGetBitmap();                                                                     </span>
<span class="-6589303999855443970" onmouseenter="enter('-6589303999855443970');" onmouseout="out('-6589303999855443970');" style=""> 143             int w = mBitmap.getWidth() + mBorder * 2;                                                    </span>
<span class="-7165598877762476360" onmouseenter="enter('-7165598877762476360');" onmouseout="out('-7165598877762476360');" style=""> 144             int h = mBitmap.getHeight() + mBorder * 2;                                                   </span>
<span class="-7602504072990906487" onmouseenter="enter('-7602504072990906487');" onmouseout="out('-7602504072990906487');" style=""> 145             if (mWidth == UNSPECIFIED) {                                                                 </span>
<span class="-1544377464552857573" onmouseenter="enter('-1544377464552857573');" onmouseout="out('-1544377464552857573');" style=""> 146                 setSize(w, h);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148         }                                                                                                </span>
<span class="5567434894431635697" onmouseenter="enter('5567434894431635697');" onmouseout="out('5567434894431635697');" style=""> 149         return mBitmap;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150     }                                                                                                    </span>
<span  style=""> 151                                                                                                          </span>
<span class="8465803167111788298" onmouseenter="enter('8465803167111788298');" onmouseout="out('8465803167111788298');" style=""> 152     private void freeBitmap() {                                                                          </span>
<span class="-9151544019057413325" onmouseenter="enter('-9151544019057413325');" onmouseout="out('-9151544019057413325');" style=""> 153         Utils.assertTrue(mBitmap != null);                                                               </span>
<span class="-2358947884683296262" onmouseenter="enter('-2358947884683296262');" onmouseout="out('-2358947884683296262');" style=""> 154         onFreeBitmap(mBitmap);                                                                           </span>
<span class="932825469958765165" onmouseenter="enter('932825469958765165');" onmouseout="out('932825469958765165');" style=""> 155         mBitmap = null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156     }                                                                                                    </span>
<span  style=""> 157                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 158     @Override                                                                                            </span>
<span class="3799141745189836170" onmouseenter="enter('3799141745189836170');" onmouseout="out('3799141745189836170');" style=""> 159     public int getWidth() {                                                                              </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 160         if (mWidth == UNSPECIFIED) getBitmap();                                                          </span>
<span class="2966597995474396527" onmouseenter="enter('2966597995474396527');" onmouseout="out('2966597995474396527');" style=""> 161         return mWidth;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164     @Override                                                                                            </span>
<span class="2634124408072868895" onmouseenter="enter('2634124408072868895');" onmouseout="out('2634124408072868895');" style=""> 165     public int getHeight() {                                                                             </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 166         if (mWidth == UNSPECIFIED) getBitmap();                                                          </span>
<span class="-4444538114742899873" onmouseenter="enter('-4444538114742899873');" onmouseout="out('-4444538114742899873');" style=""> 167         return mHeight;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168     }                                                                                                    </span>
<span  style=""> 169                                                                                                          </span>
<span class="-3215853744966742335" onmouseenter="enter('-3215853744966742335');" onmouseout="out('-3215853744966742335');" style=""> 170     protected abstract Bitmap onGetBitmap();                                                             </span>
<span  style=""> 171                                                                                                          </span>
<span class="-7203975694752350186" onmouseenter="enter('-7203975694752350186');" onmouseout="out('-7203975694752350186');" style=""> 172     protected abstract void onFreeBitmap(Bitmap bitmap);                                                 </span>
<span  style=""> 173                                                                                                          </span>
<span class="-6398722967840097469" onmouseenter="enter('-6398722967840097469');" onmouseout="out('-6398722967840097469');" style=""> 174     protected void invalidateContent() {                                                                 </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 175         if (mBitmap != null) freeBitmap();                                                               </span>
<span class="-1573566249444417035" onmouseenter="enter('-1573566249444417035');" onmouseout="out('-1573566249444417035');" style=""> 176         mContentValid = false;                                                                           </span>
<span class="-3589557447567740047" onmouseenter="enter('-3589557447567740047');" onmouseout="out('-3589557447567740047');" style=""> 177         mWidth = UNSPECIFIED;                                                                            </span>
<span class="-7337549455385624533" onmouseenter="enter('-7337549455385624533');" onmouseout="out('-7337549455385624533');" style=""> 178         mHeight = UNSPECIFIED;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 181     /**                                                                                                  </span>
<span class="2557873334003452441" onmouseenter="enter('2557873334003452441');" onmouseout="out('2557873334003452441');" style=""> 182      * Whether the content on GPU is valid.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 183      */                                                                                                  </span>
<span class="6328438622391273086" onmouseenter="enter('6328438622391273086');" onmouseout="out('6328438622391273086');" style=""> 184     public boolean isContentValid() {                                                                    </span>
<span class="-3769505508222807408" onmouseenter="enter('-3769505508222807408');" onmouseout="out('-3769505508222807408');" style=""> 185         return isLoaded() &amp;&amp; mContentValid;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 188     /**                                                                                                  </span>
<span class="-6290967802937726177" onmouseenter="enter('-6290967802937726177');" onmouseout="out('-6290967802937726177');" style=""> 189      * Updates the content on GPU&#x27;s memory.                                                              </span>
<span class="-4034470964912199066" onmouseenter="enter('-4034470964912199066');" onmouseout="out('-4034470964912199066');" style=""> 190      * @param canvas                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 191      */                                                                                                  </span>
<span class="108942350733869123" onmouseenter="enter('108942350733869123');" onmouseout="out('108942350733869123');" style=""> 192     public void updateContent(GLCanvas canvas) {                                                         </span>
<span class="-3396881632730774927" onmouseenter="enter('-3396881632730774927');" onmouseout="out('-3396881632730774927');" style=""> 193         if (!isLoaded()) {                                                                               </span>
<span class="-5184899736735963926" onmouseenter="enter('-5184899736735963926');" onmouseout="out('-5184899736735963926');" style=""> 194             if (mThrottled &amp;&amp; ++sUploadedCount &gt; UPLOAD_LIMIT) {                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 195                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196             }                                                                                            </span>
<span class="8391051841668735947" onmouseenter="enter('8391051841668735947');" onmouseout="out('8391051841668735947');" style=""> 197             uploadToCanvas(canvas);                                                                      </span>
<span class="-567867839770461213" onmouseenter="enter('-567867839770461213');" onmouseout="out('-567867839770461213');" style=""> 198         } else if (!mContentValid) {                                                                     </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 199             Bitmap bitmap = getBitmap();                                                                 </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 200             int format = GLUtils.getInternalFormat(bitmap);                                              </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 201             int type = GLUtils.getType(bitmap);                                                          </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 202             canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                          </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 203             freeBitmap();                                                                                </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 204             mContentValid = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206     }                                                                                                    </span>
<span  style=""> 207                                                                                                          </span>
<span class="-28900684726018511" onmouseenter="enter('-28900684726018511');" onmouseout="out('-28900684726018511');" style=""> 208     public static void resetUploadLimit() {                                                              </span>
<span class="-7401770097083608137" onmouseenter="enter('-7401770097083608137');" onmouseout="out('-7401770097083608137');" style=""> 209         sUploadedCount = 0;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210     }                                                                                                    </span>
<span  style=""> 211                                                                                                          </span>
<span class="7293249883154619275" onmouseenter="enter('7293249883154619275');" onmouseout="out('7293249883154619275');" style=""> 212     public static boolean uploadLimitReached() {                                                         </span>
<span class="5635858946898836387" onmouseenter="enter('5635858946898836387');" onmouseout="out('5635858946898836387');" style=""> 213         return sUploadedCount &gt; UPLOAD_LIMIT;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214     }                                                                                                    </span>
<span  style=""> 215                                                                                                          </span>
<span class="5149211547862807755" onmouseenter="enter('5149211547862807755');" onmouseout="out('5149211547862807755');" style=""> 216     private void uploadToCanvas(GLCanvas canvas) {                                                       </span>
<span  style=""> 217                                                                                                          </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 218         Bitmap bitmap = getBitmap();                                                                     </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style=""> 219         if (bitmap != null) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 220             try {                                                                                        </span>
<span class="3425854155123203990" onmouseenter="enter('3425854155123203990');" onmouseout="out('3425854155123203990');" style=""> 221                 int bWidth = bitmap.getWidth();                                                          </span>
<span class="3370303073595965579" onmouseenter="enter('3370303073595965579');" onmouseout="out('3370303073595965579');" style=""> 222                 int bHeight = bitmap.getHeight();                                                        </span>
<span class="-4265828418919251504" onmouseenter="enter('-4265828418919251504');" onmouseout="out('-4265828418919251504');" style=""> 223                 int width = bWidth + mBorder * 2;                                                        </span>
<span class="5317611973642769478" onmouseenter="enter('5317611973642769478');" onmouseout="out('5317611973642769478');" style=""> 224                 int height = bHeight + mBorder * 2;                                                      </span>
<span class="-5063308770512493674" onmouseenter="enter('-5063308770512493674');" onmouseout="out('-5063308770512493674');" style=""> 225                 int texWidth = getTextureWidth();                                                        </span>
<span class="8899121547547580578" onmouseenter="enter('8899121547547580578');" onmouseout="out('8899121547547580578');" style=""> 226                 int texHeight = getTextureHeight();                                                      </span>
<span  style=""> 227                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 228 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="83345577605198992" onmouseenter="enter('83345577605198992');" onmouseout="out('83345577605198992');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 229                 Utils.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                            </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 230 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="-1563057097152409297" onmouseenter="enter('-1563057097152409297');" onmouseout="out('-1563057097152409297');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 231                 Assert.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                           </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 232                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 233 =======                                                                                                  </span>
<span class="6475196055478599892" onmouseenter="enter('6475196055478599892');" onmouseout="out('6475196055478599892');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 234                 assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 235 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span  style=""> 236                                                                                                          </span>
<span class="3646381769102905860" onmouseenter="enter('3646381769102905860');" onmouseout="out('3646381769102905860');" style=""> 237                 // Upload the bitmap to a new texture.                                                   </span>
<span class="-8657089773357603351" onmouseenter="enter('-8657089773357603351');" onmouseout="out('-8657089773357603351');" style=""> 238                 mId = canvas.getGLId().generateTexture();                                                </span>
<span class="2565938783087565331" onmouseenter="enter('2565938783087565331');" onmouseout="out('2565938783087565331');" style=""> 239                 canvas.setTextureParameters(this);                                                       </span>
<span  style=""> 240                                                                                                          </span>
<span class="3040185108073699348" onmouseenter="enter('3040185108073699348');" onmouseout="out('3040185108073699348');" style=""> 241                 if (bWidth == texWidth &amp;&amp; bHeight == texHeight) {                                        </span>
<span class="1202596534630055245" onmouseenter="enter('1202596534630055245');" onmouseout="out('1202596534630055245');" style=""> 242                     canvas.initializeTexture(this, bitmap);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 243                 } else {                                                                                 </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 244                     int format = GLUtils.getInternalFormat(bitmap);                                      </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 245                     int type = GLUtils.getType(bitmap);                                                  </span>
<span class="5256426249253321078" onmouseenter="enter('5256426249253321078');" onmouseout="out('5256426249253321078');" style=""> 246                     Config config = bitmap.getConfig();                                                  </span>
<span  style=""> 247                                                                                                          </span>
<span class="1282008816208298685" onmouseenter="enter('1282008816208298685');" onmouseout="out('1282008816208298685');" style=""> 248                     canvas.initializeTextureSize(this, format, type);                                    </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 249                     canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                  </span>
<span  style=""> 250                                                                                                          </span>
<span class="1888191076733751615" onmouseenter="enter('1888191076733751615');" onmouseout="out('1888191076733751615');" style=""> 251                     if (mBorder &gt; 0) {                                                                   </span>
<span class="-4226267341685301491" onmouseenter="enter('-4226267341685301491');" onmouseout="out('-4226267341685301491');" style=""> 252                         // Left border                                                                   </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 253                         Bitmap line = getBorderLine(true, config, texHeight);                            </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 254                         canvas.texSubImage2D(this, 0, 0, line, format, type);                            </span>
<span  style=""> 255                                                                                                          </span>
<span class="7501484245398067844" onmouseenter="enter('7501484245398067844');" onmouseout="out('7501484245398067844');" style=""> 256                         // Top border                                                                    </span>
<span class="5027190896321362831" onmouseenter="enter('5027190896321362831');" onmouseout="out('5027190896321362831');" style=""> 257                         line = getBorderLine(false, config, texWidth);                                   </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 258                         canvas.texSubImage2D(this, 0, 0, line, format, type);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259                     }                                                                                    </span>
<span  style=""> 260                                                                                                          </span>
<span class="-52038472791900899" onmouseenter="enter('-52038472791900899');" onmouseout="out('-52038472791900899');" style=""> 261                     // Right border                                                                      </span>
<span class="-3434651130222162078" onmouseenter="enter('-3434651130222162078');" onmouseout="out('-3434651130222162078');" style=""> 262                     if (mBorder + bWidth &lt; texWidth) {                                                   </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 263                         Bitmap line = getBorderLine(true, config, texHeight);                            </span>
<span class="6981660014420851544" onmouseenter="enter('6981660014420851544');" onmouseout="out('6981660014420851544');" style=""> 264                         canvas.texSubImage2D(this, mBorder + bWidth, 0, line, format, type);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265                     }                                                                                    </span>
<span  style=""> 266                                                                                                          </span>
<span class="2714766977077527601" onmouseenter="enter('2714766977077527601');" onmouseout="out('2714766977077527601');" style=""> 267                     // Bottom border                                                                     </span>
<span class="2333404839235139340" onmouseenter="enter('2333404839235139340');" onmouseout="out('2333404839235139340');" style=""> 268                     if (mBorder + bHeight &lt; texHeight) {                                                 </span>
<span class="257259032112812569" onmouseenter="enter('257259032112812569');" onmouseout="out('257259032112812569');" style=""> 269                         Bitmap line = getBorderLine(false, config, texWidth);                            </span>
<span class="9199030807067665260" onmouseenter="enter('9199030807067665260');" onmouseout="out('9199030807067665260');" style=""> 270                         canvas.texSubImage2D(this, 0, mBorder + bHeight, line, format, type);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272                 }                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 273             } finally {                                                                                  </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 274                 freeBitmap();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275             }                                                                                            </span>
<span class="5889338600343599383" onmouseenter="enter('5889338600343599383');" onmouseout="out('5889338600343599383');" style=""> 276             // Update texture state.                                                                     </span>
<span class="2185893898758781528" onmouseenter="enter('2185893898758781528');" onmouseout="out('2185893898758781528');" style=""> 277             setAssociatedCanvas(canvas);                                                                 </span>
<span class="5478128493396674048" onmouseenter="enter('5478128493396674048');" onmouseout="out('5478128493396674048');" style=""> 278             mState = STATE_LOADED;                                                                       </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 279             mContentValid = true;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 280         } else {                                                                                         </span>
<span class="2786766474863998839" onmouseenter="enter('2786766474863998839');" onmouseout="out('2786766474863998839');" style=""> 281             mState = STATE_ERROR;                                                                        </span>
<span class="-2688280550612568095" onmouseenter="enter('-2688280550612568095');" onmouseout="out('-2688280550612568095');" style=""> 282             throw new RuntimeException(&quot;Texture load fail, no bitmap&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286     @Override                                                                                            </span>
<span class="-4954620433901163110" onmouseenter="enter('-4954620433901163110');" onmouseout="out('-4954620433901163110');" style=""> 287     protected boolean onBind(GLCanvas canvas) {                                                          </span>
<span class="-4891675032704098609" onmouseenter="enter('-4891675032704098609');" onmouseout="out('-4891675032704098609');" style=""> 288         updateContent(canvas);                                                                           </span>
<span class="3219878712675061157" onmouseenter="enter('3219878712675061157');" onmouseout="out('3219878712675061157');" style=""> 289         return isContentValid();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290     }                                                                                                    </span>
<span  style=""> 291                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 292     @Override                                                                                            </span>
<span class="6946518658455796177" onmouseenter="enter('6946518658455796177');" onmouseout="out('6946518658455796177');" style=""> 293     protected int getTarget() {                                                                          </span>
<span class="62156321300267489" onmouseenter="enter('62156321300267489');" onmouseout="out('62156321300267489');" style=""> 294         return GL11.GL_TEXTURE_2D;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295     }                                                                                                    </span>
<span  style=""> 296                                                                                                          </span>
<span class="2841696712734050288" onmouseenter="enter('2841696712734050288');" onmouseout="out('2841696712734050288');" style=""> 297     public void setOpaque(boolean isOpaque) {                                                            </span>
<span class="4102597972225673156" onmouseenter="enter('4102597972225673156');" onmouseout="out('4102597972225673156');" style=""> 298         mOpaque = isOpaque;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299     }                                                                                                    </span>
<span  style=""> 300                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 301     @Override                                                                                            </span>
<span class="8858632504335809401" onmouseenter="enter('8858632504335809401');" onmouseout="out('8858632504335809401');" style=""> 302     public boolean isOpaque() {                                                                          </span>
<span class="2284580524710389337" onmouseenter="enter('2284580524710389337');" onmouseout="out('2284580524710389337');" style=""> 303         return mOpaque;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304     }                                                                                                    </span>
<span  style=""> 305                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 306     @Override                                                                                            </span>
<span class="-3023643959588162463" onmouseenter="enter('-3023643959588162463');" onmouseout="out('-3023643959588162463');" style=""> 307     public void recycle() {                                                                              </span>
<span class="5945087735450719148" onmouseenter="enter('5945087735450719148');" onmouseout="out('5945087735450719148');" style=""> 308         super.recycle();                                                                                 </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 309         if (mBitmap != null) freeBitmap();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 311 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="304880958838077089" onmouseenter="enter('304880958838077089');" onmouseout="out('304880958838077089');" style="">   2  * Copyright (C) 2010 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="-2294380047098899909" onmouseenter="enter('-2294380047098899909');" onmouseout="out('-2294380047098899909');" style="">  17 package com.android.gallery3d.glrenderer;                                                                </span>
<span  style="">  18                                                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  19 import android.graphics.Bitmap;                                                                          </span>
<span class="-5221619029963095423" onmouseenter="enter('-5221619029963095423');" onmouseout="out('-5221619029963095423');" style="">  20 import android.graphics.Bitmap.Config;                                                                   </span>
<span class="-1593998669479977209" onmouseenter="enter('-1593998669479977209');" onmouseout="out('-1593998669479977209');" style="">  21 import android.opengl.GLUtils;                                                                           </span>
<span  style="">  22                                                                                                          </span>
<span class="1950664032789890920" onmouseenter="enter('1950664032789890920');" onmouseout="out('1950664032789890920');" style="">  23 import com.android.gallery3d.common.Utils;                                                               </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  24 import com.android.launcher3.util.Thunk;                                                                 </span>
<span  style="">  25                                                                                                          </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  26 import java.util.HashMap;                                                                                </span>
<span  style="">  27                                                                                                          </span>
<span class="-3046904593900803504" onmouseenter="enter('-3046904593900803504');" onmouseout="out('-3046904593900803504');" style="">  28 import javax.microedition.khronos.opengles.GL11;                                                         </span>
<span  style="">  29                                                                                                          </span>
<span class="179605427515979735" onmouseenter="enter('179605427515979735');" onmouseout="out('179605427515979735');" style="">  30 // UploadedTextures use a Bitmap for the content of the texture.                                         </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  31 //                                                                                                       </span>
<span class="-1339728597306956876" onmouseenter="enter('-1339728597306956876');" onmouseout="out('-1339728597306956876');" style="">  32 // Subclasses should implement onGetBitmap() to provide the Bitmap and                                   </span>
<span class="-7806758351897273383" onmouseenter="enter('-7806758351897273383');" onmouseout="out('-7806758351897273383');" style="">  33 // implement onFreeBitmap(mBitmap) which will be called when the Bitmap                                  </span>
<span class="225820100654862410" onmouseenter="enter('225820100654862410');" onmouseout="out('225820100654862410');" style="">  34 // is not needed anymore.                                                                                </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  35 //                                                                                                       </span>
<span class="-2525750445176209241" onmouseenter="enter('-2525750445176209241');" onmouseout="out('-2525750445176209241');" style="">  36 // isContentValid() is meaningful only when the isLoaded() returns true.                                 </span>
<span class="-3404045266596529542" onmouseenter="enter('-3404045266596529542');" onmouseout="out('-3404045266596529542');" style="">  37 // It means whether the content needs to be updated.                                                     </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  38 //                                                                                                       </span>
<span class="-5978788969149141858" onmouseenter="enter('-5978788969149141858');" onmouseout="out('-5978788969149141858');" style="">  39 // The user of this class should call recycle() when the texture is not                                  </span>
<span class="-2011833987557592726" onmouseenter="enter('-2011833987557592726');" onmouseout="out('-2011833987557592726');" style="">  40 // needed anymore.                                                                                       </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  41 //                                                                                                       </span>
<span class="-9012555777352942558" onmouseenter="enter('-9012555777352942558');" onmouseout="out('-9012555777352942558');" style="">  42 // By default an UploadedTexture is opaque (so it can be drawn faster without                            </span>
<span class="5513648399927943367" onmouseenter="enter('5513648399927943367');" onmouseout="out('5513648399927943367');" style="">  43 // blending). The user or subclass can override it using setOpaque().                                    </span>
<span class="-2562753946651237024" onmouseenter="enter('-2562753946651237024');" onmouseout="out('-2562753946651237024');" style="">  44 public abstract class UploadedTexture extends BasicTexture {                                             </span>
<span  style="">  45                                                                                                          </span>
<span class="7551988693298335394" onmouseenter="enter('7551988693298335394');" onmouseout="out('7551988693298335394');" style="">  46     // To prevent keeping allocation the borders, we store those used borders here.                      </span>
<span class="7137147725401059478" onmouseenter="enter('7137147725401059478');" onmouseout="out('7137147725401059478');" style="">  47     // Since the length will be power of two, it won&#x27;t use too much memory.                              </span>
<span class="-8271664251977113798" onmouseenter="enter('-8271664251977113798');" onmouseout="out('-8271664251977113798');" style="">  48     private static HashMap&lt;BorderKey, Bitmap&gt; sBorderLines =                                             </span>
<span class="-7687922754503084777" onmouseenter="enter('-7687922754503084777');" onmouseout="out('-7687922754503084777');" style="">  49             new HashMap&lt;BorderKey, Bitmap&gt;();                                                            </span>
<span class="-7116951483637301632" onmouseenter="enter('-7116951483637301632');" onmouseout="out('-7116951483637301632');" style="">  50     private static BorderKey sBorderKey = new BorderKey();                                               </span>
<span  style="">  51                                                                                                          </span>
<span class="-5517811679430868458" onmouseenter="enter('-5517811679430868458');" onmouseout="out('-5517811679430868458');" style="">  52     @SuppressWarnings(&quot;unused&quot;)                                                                          </span>
<span class="3595608324323658446" onmouseenter="enter('3595608324323658446');" onmouseout="out('3595608324323658446');" style="">  53     private static final String TAG = &quot;Texture&quot;;                                                         </span>
<span class="-8205267457037861440" onmouseenter="enter('-8205267457037861440');" onmouseout="out('-8205267457037861440');" style="">  54     private boolean mContentValid = true;                                                                </span>
<span  style="">  55                                                                                                          </span>
<span class="3117207874458064610" onmouseenter="enter('3117207874458064610');" onmouseout="out('3117207874458064610');" style="">  56     // indicate this textures is being uploaded in background                                            </span>
<span class="2115469074027012466" onmouseenter="enter('2115469074027012466');" onmouseout="out('2115469074027012466');" style="">  57     private boolean mIsUploading = false;                                                                </span>
<span class="-4012426016973653400" onmouseenter="enter('-4012426016973653400');" onmouseout="out('-4012426016973653400');" style="">  58     private boolean mOpaque = true;                                                                      </span>
<span class="-6194178623973458805" onmouseenter="enter('-6194178623973458805');" onmouseout="out('-6194178623973458805');" style="">  59     private boolean mThrottled = false;                                                                  </span>
<span class="-3729191520250436571" onmouseenter="enter('-3729191520250436571');" onmouseout="out('-3729191520250436571');" style="">  60     private static int sUploadedCount;                                                                   </span>
<span class="8538038388368690204" onmouseenter="enter('8538038388368690204');" onmouseout="out('8538038388368690204');" style="">  61     private static final int UPLOAD_LIMIT = 100;                                                         </span>
<span  style="">  62                                                                                                          </span>
<span class="7521066649824278149" onmouseenter="enter('7521066649824278149');" onmouseout="out('7521066649824278149');" style="">  63     protected Bitmap mBitmap;                                                                            </span>
<span class="-3790896434465611355" onmouseenter="enter('-3790896434465611355');" onmouseout="out('-3790896434465611355');" style="">  64     private int mBorder;                                                                                 </span>
<span  style="">  65                                                                                                          </span>
<span class="4763603038096129508" onmouseenter="enter('4763603038096129508');" onmouseout="out('4763603038096129508');" style="">  66     protected UploadedTexture() {                                                                        </span>
<span class="932803248646922221" onmouseenter="enter('932803248646922221');" onmouseout="out('932803248646922221');" style="">  67         this(false);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68     }                                                                                                    </span>
<span  style="">  69                                                                                                          </span>
<span class="-3351248394452008679" onmouseenter="enter('-3351248394452008679');" onmouseout="out('-3351248394452008679');" style="">  70     protected UploadedTexture(boolean hasBorder) {                                                       </span>
<span class="3542920714145454971" onmouseenter="enter('3542920714145454971');" onmouseout="out('3542920714145454971');" style="">  71         super(null, 0, STATE_UNLOADED);                                                                  </span>
<span class="-1655014058222521597" onmouseenter="enter('-1655014058222521597');" onmouseout="out('-1655014058222521597');" style="">  72         if (hasBorder) {                                                                                 </span>
<span class="-4652124406467449963" onmouseenter="enter('-4652124406467449963');" onmouseout="out('-4652124406467449963');" style="">  73             setBorder(true);                                                                             </span>
<span class="2380954290781814167" onmouseenter="enter('2380954290781814167');" onmouseout="out('2380954290781814167');" style="">  74             mBorder = 1;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76     }                                                                                                    </span>
<span  style="">  77                                                                                                          </span>
<span class="4480998087656531772" onmouseenter="enter('4480998087656531772');" onmouseout="out('4480998087656531772');" style="">  78     protected void setIsUploading(boolean uploading) {                                                   </span>
<span class="6642969742561576780" onmouseenter="enter('6642969742561576780');" onmouseout="out('6642969742561576780');" style="">  79         mIsUploading = uploading;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80     }                                                                                                    </span>
<span  style="">  81                                                                                                          </span>
<span class="5863119202211681518" onmouseenter="enter('5863119202211681518');" onmouseout="out('5863119202211681518');" style="">  82     public boolean isUploading() {                                                                       </span>
<span class="2339527736268051895" onmouseenter="enter('2339527736268051895');" onmouseout="out('2339527736268051895');" style="">  83         return mIsUploading;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84     }                                                                                                    </span>
<span  style="">  85                                                                                                          </span>
<span class="7865940690358442417" onmouseenter="enter('7865940690358442417');" onmouseout="out('7865940690358442417');" style="">  86     @Thunk static class BorderKey implements Cloneable {                                                 </span>
<span class="-4594330548127637013" onmouseenter="enter('-4594330548127637013');" onmouseout="out('-4594330548127637013');" style="">  87         public boolean vertical;                                                                         </span>
<span class="-5526467619964627073" onmouseenter="enter('-5526467619964627073');" onmouseout="out('-5526467619964627073');" style="">  88         public Config config;                                                                            </span>
<span class="453026790913587128" onmouseenter="enter('453026790913587128');" onmouseout="out('453026790913587128');" style="">  89         public int length;                                                                               </span>
<span  style="">  90                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  91         @Override                                                                                        </span>
<span class="5226885376728374571" onmouseenter="enter('5226885376728374571');" onmouseout="out('5226885376728374571');" style="">  92         public int hashCode() {                                                                          </span>
<span class="-780094223215271991" onmouseenter="enter('-780094223215271991');" onmouseout="out('-780094223215271991');" style="">  93             int x = config.hashCode() ^ length;                                                          </span>
<span class="-899207486813796319" onmouseenter="enter('-899207486813796319');" onmouseout="out('-899207486813796319');" style="">  94             return vertical ? x : -x;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95         }                                                                                                </span>
<span  style="">  96                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97         @Override                                                                                        </span>
<span class="7673385308065274101" onmouseenter="enter('7673385308065274101');" onmouseout="out('7673385308065274101');" style="">  98         public boolean equals(Object object) {                                                           </span>
<span class="-8927768855362490926" onmouseenter="enter('-8927768855362490926');" onmouseout="out('-8927768855362490926');" style="">  99             if (!(object instanceof BorderKey)) return false;                                            </span>
<span class="-2936104822619283166" onmouseenter="enter('-2936104822619283166');" onmouseout="out('-2936104822619283166');" style=""> 100             BorderKey o = (BorderKey) object;                                                            </span>
<span class="-2976035776567085941" onmouseenter="enter('-2976035776567085941');" onmouseout="out('-2976035776567085941');" style=""> 101             return vertical == o.vertical                                                                </span>
<span class="-2294165725008002003" onmouseenter="enter('-2294165725008002003');" onmouseout="out('-2294165725008002003');" style=""> 102                     &amp;&amp; config == o.config &amp;&amp; length == o.length;                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103         }                                                                                                </span>
<span  style=""> 104                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105         @Override                                                                                        </span>
<span class="4734347466243487953" onmouseenter="enter('4734347466243487953');" onmouseout="out('4734347466243487953');" style=""> 106         public BorderKey clone() {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 107             try {                                                                                        </span>
<span class="8454735050532327622" onmouseenter="enter('8454735050532327622');" onmouseout="out('8454735050532327622');" style=""> 108                 return (BorderKey) super.clone();                                                        </span>
<span class="-4442852992463448790" onmouseenter="enter('-4442852992463448790');" onmouseout="out('-4442852992463448790');" style=""> 109             } catch (CloneNotSupportedException e) {                                                     </span>
<span class="-6252834204302840787" onmouseenter="enter('-6252834204302840787');" onmouseout="out('-6252834204302840787');" style=""> 110                 throw new AssertionError(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113     }                                                                                                    </span>
<span  style=""> 114                                                                                                          </span>
<span class="5796233267395141548" onmouseenter="enter('5796233267395141548');" onmouseout="out('5796233267395141548');" style=""> 115     protected void setThrottled(boolean throttled) {                                                     </span>
<span class="2728067841155066146" onmouseenter="enter('2728067841155066146');" onmouseout="out('2728067841155066146');" style=""> 116         mThrottled = throttled;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117     }                                                                                                    </span>
<span  style=""> 118                                                                                                          </span>
<span class="4580001023476062931" onmouseenter="enter('4580001023476062931');" onmouseout="out('4580001023476062931');" style=""> 119     private static Bitmap getBorderLine(                                                                 </span>
<span class="4237305713302887664" onmouseenter="enter('4237305713302887664');" onmouseout="out('4237305713302887664');" style=""> 120             boolean vertical, Config config, int length) {                                               </span>
<span class="5196741965171081542" onmouseenter="enter('5196741965171081542');" onmouseout="out('5196741965171081542');" style=""> 121         BorderKey key = sBorderKey;                                                                      </span>
<span class="-1796270064541479983" onmouseenter="enter('-1796270064541479983');" onmouseout="out('-1796270064541479983');" style=""> 122         key.vertical = vertical;                                                                         </span>
<span class="-173090402769638904" onmouseenter="enter('-173090402769638904');" onmouseout="out('-173090402769638904');" style=""> 123         key.config = config;                                                                             </span>
<span class="-2958410444098009294" onmouseenter="enter('-2958410444098009294');" onmouseout="out('-2958410444098009294');" style=""> 124         key.length = length;                                                                             </span>
<span class="-7771012412001259062" onmouseenter="enter('-7771012412001259062');" onmouseout="out('-7771012412001259062');" style=""> 125         Bitmap bitmap = sBorderLines.get(key);                                                           </span>
<span class="-1735832408094822956" onmouseenter="enter('-1735832408094822956');" onmouseout="out('-1735832408094822956');" style=""> 126         if (bitmap == null) {                                                                            </span>
<span class="1646679160344185704" onmouseenter="enter('1646679160344185704');" onmouseout="out('1646679160344185704');" style=""> 127             bitmap = vertical                                                                            </span>
<span class="-8767545810202353379" onmouseenter="enter('-8767545810202353379');" onmouseout="out('-8767545810202353379');" style=""> 128                     ? Bitmap.createBitmap(1, length, config)                                             </span>
<span class="-252712256386533466" onmouseenter="enter('-252712256386533466');" onmouseout="out('-252712256386533466');" style=""> 129                     : Bitmap.createBitmap(length, 1, config);                                            </span>
<span class="200036293659876844" onmouseenter="enter('200036293659876844');" onmouseout="out('200036293659876844');" style=""> 130             sBorderLines.put(key.clone(), bitmap);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131         }                                                                                                </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 132         return bitmap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133     }                                                                                                    </span>
<span  style=""> 134                                                                                                          </span>
<span class="-2692570778449524647" onmouseenter="enter('-2692570778449524647');" onmouseout="out('-2692570778449524647');" style=""> 135     private Bitmap getBitmap() {                                                                         </span>
<span class="-5405905934796296849" onmouseenter="enter('-5405905934796296849');" onmouseout="out('-5405905934796296849');" style=""> 136         if (mBitmap == null) {                                                                           </span>
<span class="-5459018773845559989" onmouseenter="enter('-5459018773845559989');" onmouseout="out('-5459018773845559989');" style=""> 137             mBitmap = onGetBitmap();                                                                     </span>
<span class="-6589303999855443970" onmouseenter="enter('-6589303999855443970');" onmouseout="out('-6589303999855443970');" style=""> 138             int w = mBitmap.getWidth() + mBorder * 2;                                                    </span>
<span class="-7165598877762476360" onmouseenter="enter('-7165598877762476360');" onmouseout="out('-7165598877762476360');" style=""> 139             int h = mBitmap.getHeight() + mBorder * 2;                                                   </span>
<span class="-7602504072990906487" onmouseenter="enter('-7602504072990906487');" onmouseout="out('-7602504072990906487');" style=""> 140             if (mWidth == UNSPECIFIED) {                                                                 </span>
<span class="-1544377464552857573" onmouseenter="enter('-1544377464552857573');" onmouseout="out('-1544377464552857573');" style=""> 141                 setSize(w, h);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143         }                                                                                                </span>
<span class="5567434894431635697" onmouseenter="enter('5567434894431635697');" onmouseout="out('5567434894431635697');" style=""> 144         return mBitmap;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="8465803167111788298" onmouseenter="enter('8465803167111788298');" onmouseout="out('8465803167111788298');" style=""> 147     private void freeBitmap() {                                                                          </span>
<span class="-9151544019057413325" onmouseenter="enter('-9151544019057413325');" onmouseout="out('-9151544019057413325');" style=""> 148         Utils.assertTrue(mBitmap != null);                                                               </span>
<span class="-2358947884683296262" onmouseenter="enter('-2358947884683296262');" onmouseout="out('-2358947884683296262');" style=""> 149         onFreeBitmap(mBitmap);                                                                           </span>
<span class="932825469958765165" onmouseenter="enter('932825469958765165');" onmouseout="out('932825469958765165');" style=""> 150         mBitmap = null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 153     @Override                                                                                            </span>
<span class="3799141745189836170" onmouseenter="enter('3799141745189836170');" onmouseout="out('3799141745189836170');" style=""> 154     public int getWidth() {                                                                              </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 155         if (mWidth == UNSPECIFIED) getBitmap();                                                          </span>
<span class="2966597995474396527" onmouseenter="enter('2966597995474396527');" onmouseout="out('2966597995474396527');" style=""> 156         return mWidth;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159     @Override                                                                                            </span>
<span class="2634124408072868895" onmouseenter="enter('2634124408072868895');" onmouseout="out('2634124408072868895');" style=""> 160     public int getHeight() {                                                                             </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 161         if (mWidth == UNSPECIFIED) getBitmap();                                                          </span>
<span class="-4444538114742899873" onmouseenter="enter('-4444538114742899873');" onmouseout="out('-4444538114742899873');" style=""> 162         return mHeight;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="-3215853744966742335" onmouseenter="enter('-3215853744966742335');" onmouseout="out('-3215853744966742335');" style=""> 165     protected abstract Bitmap onGetBitmap();                                                             </span>
<span  style=""> 166                                                                                                          </span>
<span class="-7203975694752350186" onmouseenter="enter('-7203975694752350186');" onmouseout="out('-7203975694752350186');" style=""> 167     protected abstract void onFreeBitmap(Bitmap bitmap);                                                 </span>
<span  style=""> 168                                                                                                          </span>
<span class="-6398722967840097469" onmouseenter="enter('-6398722967840097469');" onmouseout="out('-6398722967840097469');" style=""> 169     protected void invalidateContent() {                                                                 </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 170         if (mBitmap != null) freeBitmap();                                                               </span>
<span class="-1573566249444417035" onmouseenter="enter('-1573566249444417035');" onmouseout="out('-1573566249444417035');" style=""> 171         mContentValid = false;                                                                           </span>
<span class="-3589557447567740047" onmouseenter="enter('-3589557447567740047');" onmouseout="out('-3589557447567740047');" style=""> 172         mWidth = UNSPECIFIED;                                                                            </span>
<span class="-7337549455385624533" onmouseenter="enter('-7337549455385624533');" onmouseout="out('-7337549455385624533');" style=""> 173         mHeight = UNSPECIFIED;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174     }                                                                                                    </span>
<span  style=""> 175                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 176     /**                                                                                                  </span>
<span class="2557873334003452441" onmouseenter="enter('2557873334003452441');" onmouseout="out('2557873334003452441');" style=""> 177      * Whether the content on GPU is valid.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 178      */                                                                                                  </span>
<span class="6328438622391273086" onmouseenter="enter('6328438622391273086');" onmouseout="out('6328438622391273086');" style=""> 179     public boolean isContentValid() {                                                                    </span>
<span class="-3769505508222807408" onmouseenter="enter('-3769505508222807408');" onmouseout="out('-3769505508222807408');" style=""> 180         return isLoaded() &amp;&amp; mContentValid;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181     }                                                                                                    </span>
<span  style=""> 182                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 183     /**                                                                                                  </span>
<span class="-6290967802937726177" onmouseenter="enter('-6290967802937726177');" onmouseout="out('-6290967802937726177');" style=""> 184      * Updates the content on GPU&#x27;s memory.                                                              </span>
<span class="-4034470964912199066" onmouseenter="enter('-4034470964912199066');" onmouseout="out('-4034470964912199066');" style=""> 185      * @param canvas                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 186      */                                                                                                  </span>
<span class="108942350733869123" onmouseenter="enter('108942350733869123');" onmouseout="out('108942350733869123');" style=""> 187     public void updateContent(GLCanvas canvas) {                                                         </span>
<span class="-3396881632730774927" onmouseenter="enter('-3396881632730774927');" onmouseout="out('-3396881632730774927');" style=""> 188         if (!isLoaded()) {                                                                               </span>
<span class="-5184899736735963926" onmouseenter="enter('-5184899736735963926');" onmouseout="out('-5184899736735963926');" style=""> 189             if (mThrottled &amp;&amp; ++sUploadedCount &gt; UPLOAD_LIMIT) {                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 190                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191             }                                                                                            </span>
<span class="8391051841668735947" onmouseenter="enter('8391051841668735947');" onmouseout="out('8391051841668735947');" style=""> 192             uploadToCanvas(canvas);                                                                      </span>
<span class="-567867839770461213" onmouseenter="enter('-567867839770461213');" onmouseout="out('-567867839770461213');" style=""> 193         } else if (!mContentValid) {                                                                     </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 194             Bitmap bitmap = getBitmap();                                                                 </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 195             int format = GLUtils.getInternalFormat(bitmap);                                              </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 196             int type = GLUtils.getType(bitmap);                                                          </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 197             canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                          </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 198             freeBitmap();                                                                                </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 199             mContentValid = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="-28900684726018511" onmouseenter="enter('-28900684726018511');" onmouseout="out('-28900684726018511');" style=""> 203     public static void resetUploadLimit() {                                                              </span>
<span class="-7401770097083608137" onmouseenter="enter('-7401770097083608137');" onmouseout="out('-7401770097083608137');" style=""> 204         sUploadedCount = 0;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205     }                                                                                                    </span>
<span  style=""> 206                                                                                                          </span>
<span class="7293249883154619275" onmouseenter="enter('7293249883154619275');" onmouseout="out('7293249883154619275');" style=""> 207     public static boolean uploadLimitReached() {                                                         </span>
<span class="5635858946898836387" onmouseenter="enter('5635858946898836387');" onmouseout="out('5635858946898836387');" style=""> 208         return sUploadedCount &gt; UPLOAD_LIMIT;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209     }                                                                                                    </span>
<span  style=""> 210                                                                                                          </span>
<span class="5149211547862807755" onmouseenter="enter('5149211547862807755');" onmouseout="out('5149211547862807755');" style=""> 211     private void uploadToCanvas(GLCanvas canvas) {                                                       </span>
<span  style=""> 212                                                                                                          </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 213         Bitmap bitmap = getBitmap();                                                                     </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style=""> 214         if (bitmap != null) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 215             try {                                                                                        </span>
<span class="3425854155123203990" onmouseenter="enter('3425854155123203990');" onmouseout="out('3425854155123203990');" style=""> 216                 int bWidth = bitmap.getWidth();                                                          </span>
<span class="3370303073595965579" onmouseenter="enter('3370303073595965579');" onmouseout="out('3370303073595965579');" style=""> 217                 int bHeight = bitmap.getHeight();                                                        </span>
<span class="-4265828418919251504" onmouseenter="enter('-4265828418919251504');" onmouseout="out('-4265828418919251504');" style=""> 218                 int width = bWidth + mBorder * 2;                                                        </span>
<span class="5317611973642769478" onmouseenter="enter('5317611973642769478');" onmouseout="out('5317611973642769478');" style=""> 219                 int height = bHeight + mBorder * 2;                                                      </span>
<span class="-5063308770512493674" onmouseenter="enter('-5063308770512493674');" onmouseout="out('-5063308770512493674');" style=""> 220                 int texWidth = getTextureWidth();                                                        </span>
<span class="8899121547547580578" onmouseenter="enter('8899121547547580578');" onmouseout="out('8899121547547580578');" style=""> 221                 int texHeight = getTextureHeight();                                                      </span>
<span  style=""> 222                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 223 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="83345577605198992" onmouseenter="enter('83345577605198992');" onmouseout="out('83345577605198992');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 224                 Utils.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                            </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 225 ||||||| BASE                                                                                             </span>
<span class="-1563057097152409297" onmouseenter="enter('-1563057097152409297');" onmouseout="out('-1563057097152409297');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 226                 Assert.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                           </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 227 =======                                                                                                  </span>
<span class="6475196055478599892" onmouseenter="enter('6475196055478599892');" onmouseout="out('6475196055478599892');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 228                 assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                                  </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 229 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span  style=""> 230                                                                                                          </span>
<span class="3646381769102905860" onmouseenter="enter('3646381769102905860');" onmouseout="out('3646381769102905860');" style=""> 231                 // Upload the bitmap to a new texture.                                                   </span>
<span class="-8657089773357603351" onmouseenter="enter('-8657089773357603351');" onmouseout="out('-8657089773357603351');" style=""> 232                 mId = canvas.getGLId().generateTexture();                                                </span>
<span class="2565938783087565331" onmouseenter="enter('2565938783087565331');" onmouseout="out('2565938783087565331');" style=""> 233                 canvas.setTextureParameters(this);                                                       </span>
<span  style=""> 234                                                                                                          </span>
<span class="3040185108073699348" onmouseenter="enter('3040185108073699348');" onmouseout="out('3040185108073699348');" style=""> 235                 if (bWidth == texWidth &amp;&amp; bHeight == texHeight) {                                        </span>
<span class="1202596534630055245" onmouseenter="enter('1202596534630055245');" onmouseout="out('1202596534630055245');" style=""> 236                     canvas.initializeTexture(this, bitmap);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 237                 } else {                                                                                 </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 238                     int format = GLUtils.getInternalFormat(bitmap);                                      </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 239                     int type = GLUtils.getType(bitmap);                                                  </span>
<span class="5256426249253321078" onmouseenter="enter('5256426249253321078');" onmouseout="out('5256426249253321078');" style=""> 240                     Config config = bitmap.getConfig();                                                  </span>
<span  style=""> 241                                                                                                          </span>
<span class="1282008816208298685" onmouseenter="enter('1282008816208298685');" onmouseout="out('1282008816208298685');" style=""> 242                     canvas.initializeTextureSize(this, format, type);                                    </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 243                     canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                  </span>
<span  style=""> 244                                                                                                          </span>
<span class="1888191076733751615" onmouseenter="enter('1888191076733751615');" onmouseout="out('1888191076733751615');" style=""> 245                     if (mBorder &gt; 0) {                                                                   </span>
<span class="-4226267341685301491" onmouseenter="enter('-4226267341685301491');" onmouseout="out('-4226267341685301491');" style=""> 246                         // Left border                                                                   </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 247                         Bitmap line = getBorderLine(true, config, texHeight);                            </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 248                         canvas.texSubImage2D(this, 0, 0, line, format, type);                            </span>
<span  style=""> 249                                                                                                          </span>
<span class="7501484245398067844" onmouseenter="enter('7501484245398067844');" onmouseout="out('7501484245398067844');" style=""> 250                         // Top border                                                                    </span>
<span class="5027190896321362831" onmouseenter="enter('5027190896321362831');" onmouseout="out('5027190896321362831');" style=""> 251                         line = getBorderLine(false, config, texWidth);                                   </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 252                         canvas.texSubImage2D(this, 0, 0, line, format, type);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253                     }                                                                                    </span>
<span  style=""> 254                                                                                                          </span>
<span class="-52038472791900899" onmouseenter="enter('-52038472791900899');" onmouseout="out('-52038472791900899');" style=""> 255                     // Right border                                                                      </span>
<span class="-3434651130222162078" onmouseenter="enter('-3434651130222162078');" onmouseout="out('-3434651130222162078');" style=""> 256                     if (mBorder + bWidth &lt; texWidth) {                                                   </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 257                         Bitmap line = getBorderLine(true, config, texHeight);                            </span>
<span class="6981660014420851544" onmouseenter="enter('6981660014420851544');" onmouseout="out('6981660014420851544');" style=""> 258                         canvas.texSubImage2D(this, mBorder + bWidth, 0, line, format, type);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259                     }                                                                                    </span>
<span  style=""> 260                                                                                                          </span>
<span class="2714766977077527601" onmouseenter="enter('2714766977077527601');" onmouseout="out('2714766977077527601');" style=""> 261                     // Bottom border                                                                     </span>
<span class="2333404839235139340" onmouseenter="enter('2333404839235139340');" onmouseout="out('2333404839235139340');" style=""> 262                     if (mBorder + bHeight &lt; texHeight) {                                                 </span>
<span class="257259032112812569" onmouseenter="enter('257259032112812569');" onmouseout="out('257259032112812569');" style=""> 263                         Bitmap line = getBorderLine(false, config, texWidth);                            </span>
<span class="9199030807067665260" onmouseenter="enter('9199030807067665260');" onmouseout="out('9199030807067665260');" style=""> 264                         canvas.texSubImage2D(this, 0, mBorder + bHeight, line, format, type);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                 }                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 267             } finally {                                                                                  </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 268                 freeBitmap();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269             }                                                                                            </span>
<span class="5889338600343599383" onmouseenter="enter('5889338600343599383');" onmouseout="out('5889338600343599383');" style=""> 270             // Update texture state.                                                                     </span>
<span class="2185893898758781528" onmouseenter="enter('2185893898758781528');" onmouseout="out('2185893898758781528');" style=""> 271             setAssociatedCanvas(canvas);                                                                 </span>
<span class="5478128493396674048" onmouseenter="enter('5478128493396674048');" onmouseout="out('5478128493396674048');" style=""> 272             mState = STATE_LOADED;                                                                       </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 273             mContentValid = true;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 274         } else {                                                                                         </span>
<span class="2786766474863998839" onmouseenter="enter('2786766474863998839');" onmouseout="out('2786766474863998839');" style=""> 275             mState = STATE_ERROR;                                                                        </span>
<span class="-2688280550612568095" onmouseenter="enter('-2688280550612568095');" onmouseout="out('-2688280550612568095');" style=""> 276             throw new RuntimeException(&quot;Texture load fail, no bitmap&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278     }                                                                                                    </span>
<span  style=""> 279                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 280     @Override                                                                                            </span>
<span class="-4954620433901163110" onmouseenter="enter('-4954620433901163110');" onmouseout="out('-4954620433901163110');" style=""> 281     protected boolean onBind(GLCanvas canvas) {                                                          </span>
<span class="-4891675032704098609" onmouseenter="enter('-4891675032704098609');" onmouseout="out('-4891675032704098609');" style=""> 282         updateContent(canvas);                                                                           </span>
<span class="3219878712675061157" onmouseenter="enter('3219878712675061157');" onmouseout="out('3219878712675061157');" style=""> 283         return isContentValid();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286     @Override                                                                                            </span>
<span class="6946518658455796177" onmouseenter="enter('6946518658455796177');" onmouseout="out('6946518658455796177');" style=""> 287     protected int getTarget() {                                                                          </span>
<span class="62156321300267489" onmouseenter="enter('62156321300267489');" onmouseout="out('62156321300267489');" style=""> 288         return GL11.GL_TEXTURE_2D;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="2841696712734050288" onmouseenter="enter('2841696712734050288');" onmouseout="out('2841696712734050288');" style=""> 291     public void setOpaque(boolean isOpaque) {                                                            </span>
<span class="4102597972225673156" onmouseenter="enter('4102597972225673156');" onmouseout="out('4102597972225673156');" style=""> 292         mOpaque = isOpaque;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293     }                                                                                                    </span>
<span  style=""> 294                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 295     @Override                                                                                            </span>
<span class="8858632504335809401" onmouseenter="enter('8858632504335809401');" onmouseout="out('8858632504335809401');" style=""> 296     public boolean isOpaque() {                                                                          </span>
<span class="2284580524710389337" onmouseenter="enter('2284580524710389337');" onmouseout="out('2284580524710389337');" style=""> 297         return mOpaque;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298     }                                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 300     @Override                                                                                            </span>
<span class="-3023643959588162463" onmouseenter="enter('-3023643959588162463');" onmouseout="out('-3023643959588162463');" style=""> 301     public void recycle() {                                                                              </span>
<span class="5945087735450719148" onmouseenter="enter('5945087735450719148');" onmouseout="out('5945087735450719148');" style=""> 302         super.recycle();                                                                                 </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 303         if (mBitmap != null) freeBitmap();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305 }                                                                                                        </span>




</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="304880958838077089" onmouseenter="enter('304880958838077089');" onmouseout="out('304880958838077089');" style="">   2  * Copyright (C) 2010 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="-2294380047098899909" onmouseenter="enter('-2294380047098899909');" onmouseout="out('-2294380047098899909');" style="">  16 package com.android.gallery3d.glrenderer;                                                                </span>
<span  style="">  17                                                                                                          </span>
<span class="-5221619029963095423" onmouseenter="enter('-5221619029963095423');" onmouseout="out('-5221619029963095423');" style="">  18 import android.graphics.Bitmap.Config;                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  19 import android.graphics.Bitmap;                                                                          </span>
<span class="-1593998669479977209" onmouseenter="enter('-1593998669479977209');" onmouseout="out('-1593998669479977209');" style="">  20 import android.opengl.GLUtils;                                                                           </span>
<span class="1950664032789890920" onmouseenter="enter('1950664032789890920');" onmouseout="out('1950664032789890920');" style="">  21 import com.android.gallery3d.common.Utils;                                                               </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="">  22 import com.android.launcher3.util.Thunk;                                                                 </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  23 import java.util.HashMap;                                                                                </span>
<span class="-3046904593900803504" onmouseenter="enter('-3046904593900803504');" onmouseout="out('-3046904593900803504');" style="">  24 import javax.microedition.khronos.opengles.GL11;                                                         </span>
<span  style="">  25                                                                                                          </span>
<span  style="">  26                                                                                                          </span>
<span class="179605427515979735" onmouseenter="enter('179605427515979735');" onmouseout="out('179605427515979735');" style="">  27 // UploadedTextures use a Bitmap for the content of the texture.                                         </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  28 //                                                                                                       </span>
<span class="-1339728597306956876" onmouseenter="enter('-1339728597306956876');" onmouseout="out('-1339728597306956876');" style="">  29 // Subclasses should implement onGetBitmap() to provide the Bitmap and                                   </span>
<span class="-7806758351897273383" onmouseenter="enter('-7806758351897273383');" onmouseout="out('-7806758351897273383');" style="">  30 // implement onFreeBitmap(mBitmap) which will be called when the Bitmap                                  </span>
<span class="225820100654862410" onmouseenter="enter('225820100654862410');" onmouseout="out('225820100654862410');" style="">  31 // is not needed anymore.                                                                                </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  32 //                                                                                                       </span>
<span class="-2525750445176209241" onmouseenter="enter('-2525750445176209241');" onmouseout="out('-2525750445176209241');" style="">  33 // isContentValid() is meaningful only when the isLoaded() returns true.                                 </span>
<span class="-3404045266596529542" onmouseenter="enter('-3404045266596529542');" onmouseout="out('-3404045266596529542');" style="">  34 // It means whether the content needs to be updated.                                                     </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  35 //                                                                                                       </span>
<span class="-5978788969149141858" onmouseenter="enter('-5978788969149141858');" onmouseout="out('-5978788969149141858');" style="">  36 // The user of this class should call recycle() when the texture is not                                  </span>
<span class="-2011833987557592726" onmouseenter="enter('-2011833987557592726');" onmouseout="out('-2011833987557592726');" style="">  37 // needed anymore.                                                                                       </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  38 //                                                                                                       </span>
<span class="-9012555777352942558" onmouseenter="enter('-9012555777352942558');" onmouseout="out('-9012555777352942558');" style="">  39 // By default an UploadedTexture is opaque (so it can be drawn faster without                            </span>
<span class="5513648399927943367" onmouseenter="enter('5513648399927943367');" onmouseout="out('5513648399927943367');" style="">  40 // blending). The user or subclass can override it using setOpaque().                                    </span>
<span class="-2562753946651237024" onmouseenter="enter('-2562753946651237024');" onmouseout="out('-2562753946651237024');" style="">  41 public abstract class UploadedTexture extends BasicTexture {                                             </span>
<span class="7551988693298335394" onmouseenter="enter('7551988693298335394');" onmouseout="out('7551988693298335394');" style="">  42     // To prevent keeping allocation the borders, we store those used borders here.                      </span>
<span class="7137147725401059478" onmouseenter="enter('7137147725401059478');" onmouseout="out('7137147725401059478');" style="">  43     // Since the length will be power of two, it won&#x27;t use too much memory.                              </span>
<span class="7822234406088589724" onmouseenter="enter('7822234406088589724');" onmouseout="out('7822234406088589724');" style="">  44     private static HashMap&lt;BorderKey, Bitmap&gt; sBorderLines = new HashMap&lt;BorderKey, Bitmap&gt;();           </span>
<span  style="">  45                                                                                                          </span>
<span class="-7116951483637301632" onmouseenter="enter('-7116951483637301632');" onmouseout="out('-7116951483637301632');" style="">  46     private static BorderKey sBorderKey = new BorderKey();                                               </span>
<span  style="">  47                                                                                                          </span>
<span class="-5517811679430868458" onmouseenter="enter('-5517811679430868458');" onmouseout="out('-5517811679430868458');" style="">  48     @SuppressWarnings(&quot;unused&quot;)                                                                          </span>
<span class="3595608324323658446" onmouseenter="enter('3595608324323658446');" onmouseout="out('3595608324323658446');" style="">  49     private static final String TAG = &quot;Texture&quot;;                                                         </span>
<span  style="">  50                                                                                                          </span>
<span class="-8205267457037861440" onmouseenter="enter('-8205267457037861440');" onmouseout="out('-8205267457037861440');" style="">  51     private boolean mContentValid = true;                                                                </span>
<span  style="">  52                                                                                                          </span>
<span class="3117207874458064610" onmouseenter="enter('3117207874458064610');" onmouseout="out('3117207874458064610');" style="">  53     // indicate this textures is being uploaded in background                                            </span>
<span class="3117207874458064610" onmouseenter="enter('3117207874458064610');" onmouseout="out('3117207874458064610');" style="">  54     // indicate this textures is being uploaded in background                                            </span>
<span class="2115469074027012466" onmouseenter="enter('2115469074027012466');" onmouseout="out('2115469074027012466');" style="">  55     private boolean mIsUploading = false;                                                                </span>
<span  style="">  56                                                                                                          </span>
<span class="-4012426016973653400" onmouseenter="enter('-4012426016973653400');" onmouseout="out('-4012426016973653400');" style="">  57     private boolean mOpaque = true;                                                                      </span>
<span  style="">  58                                                                                                          </span>
<span class="-6194178623973458805" onmouseenter="enter('-6194178623973458805');" onmouseout="out('-6194178623973458805');" style="">  59     private boolean mThrottled = false;                                                                  </span>
<span  style="">  60                                                                                                          </span>
<span class="-3729191520250436571" onmouseenter="enter('-3729191520250436571');" onmouseout="out('-3729191520250436571');" style="">  61     private static int sUploadedCount;                                                                   </span>
<span  style="">  62                                                                                                          </span>
<span class="8538038388368690204" onmouseenter="enter('8538038388368690204');" onmouseout="out('8538038388368690204');" style="">  63     private static final int UPLOAD_LIMIT = 100;                                                         </span>
<span  style="">  64                                                                                                          </span>
<span class="7521066649824278149" onmouseenter="enter('7521066649824278149');" onmouseout="out('7521066649824278149');" style="">  65     protected Bitmap mBitmap;                                                                            </span>
<span  style="">  66                                                                                                          </span>
<span class="-3790896434465611355" onmouseenter="enter('-3790896434465611355');" onmouseout="out('-3790896434465611355');" style="">  67     private int mBorder;                                                                                 </span>
<span  style="">  68                                                                                                          </span>
<span class="4763603038096129508" onmouseenter="enter('4763603038096129508');" onmouseout="out('4763603038096129508');" style="">  69     protected UploadedTexture() {                                                                        </span>
<span class="932803248646922221" onmouseenter="enter('932803248646922221');" onmouseout="out('932803248646922221');" style="">  70         this(false);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  71     }                                                                                                    </span>
<span  style="">  72                                                                                                          </span>
<span class="-3351248394452008679" onmouseenter="enter('-3351248394452008679');" onmouseout="out('-3351248394452008679');" style="">  73     protected UploadedTexture(boolean hasBorder) {                                                       </span>
<span class="3542920714145454971" onmouseenter="enter('3542920714145454971');" onmouseout="out('3542920714145454971');" style="">  74         super(null, 0, STATE_UNLOADED);                                                                  </span>
<span class="-1655014058222521597" onmouseenter="enter('-1655014058222521597');" onmouseout="out('-1655014058222521597');" style="">  75         if (hasBorder) {                                                                                 </span>
<span class="-4652124406467449963" onmouseenter="enter('-4652124406467449963');" onmouseout="out('-4652124406467449963');" style="">  76             setBorder(true);                                                                             </span>
<span class="2380954290781814167" onmouseenter="enter('2380954290781814167');" onmouseout="out('2380954290781814167');" style="">  77             mBorder = 1;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="4480998087656531772" onmouseenter="enter('4480998087656531772');" onmouseout="out('4480998087656531772');" style="">  81     protected void setIsUploading(boolean uploading) {                                                   </span>
<span class="6642969742561576780" onmouseenter="enter('6642969742561576780');" onmouseout="out('6642969742561576780');" style="">  82         mIsUploading = uploading;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83     }                                                                                                    </span>
<span  style="">  84                                                                                                          </span>
<span class="5863119202211681518" onmouseenter="enter('5863119202211681518');" onmouseout="out('5863119202211681518');" style="">  85     public boolean isUploading() {                                                                       </span>
<span class="2339527736268051895" onmouseenter="enter('2339527736268051895');" onmouseout="out('2339527736268051895');" style="">  86         return mIsUploading;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  87     }                                                                                                    </span>
<span  style="">  88                                                                                                          </span>
<span class="-2238806055197440738" onmouseenter="enter('-2238806055197440738');" onmouseout="out('-2238806055197440738');" style="">  89     @Thunk                                                                                               </span>
<span class="7315105505004016435" onmouseenter="enter('7315105505004016435');" onmouseout="out('7315105505004016435');" style="">  90     static class BorderKey implements Cloneable {                                                        </span>
<span class="-4594330548127637013" onmouseenter="enter('-4594330548127637013');" onmouseout="out('-4594330548127637013');" style="">  91         public boolean vertical;                                                                         </span>
<span  style="">  92                                                                                                          </span>
<span class="-5526467619964627073" onmouseenter="enter('-5526467619964627073');" onmouseout="out('-5526467619964627073');" style="">  93         public Config config;                                                                            </span>
<span  style="">  94                                                                                                          </span>
<span class="453026790913587128" onmouseenter="enter('453026790913587128');" onmouseout="out('453026790913587128');" style="">  95         public int length;                                                                               </span>
<span  style="">  96                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97         @Override                                                                                        </span>
<span class="5226885376728374571" onmouseenter="enter('5226885376728374571');" onmouseout="out('5226885376728374571');" style="">  98         public int hashCode() {                                                                          </span>
<span class="-780094223215271991" onmouseenter="enter('-780094223215271991');" onmouseout="out('-780094223215271991');" style="">  99             int x = config.hashCode() ^ length;                                                          </span>
<span class="-899207486813796319" onmouseenter="enter('-899207486813796319');" onmouseout="out('-899207486813796319');" style=""> 100             return vertical ? x : -x;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101         }                                                                                                </span>
<span  style=""> 102                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 103         @Override                                                                                        </span>
<span class="7673385308065274101" onmouseenter="enter('7673385308065274101');" onmouseout="out('7673385308065274101');" style=""> 104         public boolean equals(Object object) {                                                           </span>
<span class="-8927768855362490926" onmouseenter="enter('-8927768855362490926');" onmouseout="out('-8927768855362490926');" style=""> 105             if (!(object instanceof BorderKey)) return false;                                            </span>
<span class="-2936104822619283166" onmouseenter="enter('-2936104822619283166');" onmouseout="out('-2936104822619283166');" style=""> 106             BorderKey o = (BorderKey) object;                                                            </span>
<span class="-2976035776567085941" onmouseenter="enter('-2976035776567085941');" onmouseout="out('-2976035776567085941');" style=""> 107             return vertical == o.vertical                                                                </span>
<span class="-2294165725008002003" onmouseenter="enter('-2294165725008002003');" onmouseout="out('-2294165725008002003');" style=""> 108                     &amp;&amp; config == o.config &amp;&amp; length == o.length;                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109         }                                                                                                </span>
<span  style=""> 110                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 111         @Override                                                                                        </span>
<span class="4734347466243487953" onmouseenter="enter('4734347466243487953');" onmouseout="out('4734347466243487953');" style=""> 112         public BorderKey clone() {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 113             try {                                                                                        </span>
<span class="8454735050532327622" onmouseenter="enter('8454735050532327622');" onmouseout="out('8454735050532327622');" style=""> 114                 return (BorderKey) super.clone();                                                        </span>
<span class="-4442852992463448790" onmouseenter="enter('-4442852992463448790');" onmouseout="out('-4442852992463448790');" style=""> 115             } catch (CloneNotSupportedException e) {                                                     </span>
<span class="-6252834204302840787" onmouseenter="enter('-6252834204302840787');" onmouseout="out('-6252834204302840787');" style=""> 116                 throw new AssertionError(e);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119     }                                                                                                    </span>
<span  style=""> 120                                                                                                          </span>
<span class="5796233267395141548" onmouseenter="enter('5796233267395141548');" onmouseout="out('5796233267395141548');" style=""> 121     protected void setThrottled(boolean throttled) {                                                     </span>
<span class="2728067841155066146" onmouseenter="enter('2728067841155066146');" onmouseout="out('2728067841155066146');" style=""> 122         mThrottled = throttled;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123     }                                                                                                    </span>
<span  style=""> 124                                                                                                          </span>
<span class="4580001023476062931" onmouseenter="enter('4580001023476062931');" onmouseout="out('4580001023476062931');" style=""> 125     private static Bitmap getBorderLine(                                                                 </span>
<span class="4237305713302887664" onmouseenter="enter('4237305713302887664');" onmouseout="out('4237305713302887664');" style=""> 126             boolean vertical, Config config, int length) {                                               </span>
<span class="5196741965171081542" onmouseenter="enter('5196741965171081542');" onmouseout="out('5196741965171081542');" style=""> 127         BorderKey key = sBorderKey;                                                                      </span>
<span class="-1796270064541479983" onmouseenter="enter('-1796270064541479983');" onmouseout="out('-1796270064541479983');" style=""> 128         key.vertical = vertical;                                                                         </span>
<span class="-173090402769638904" onmouseenter="enter('-173090402769638904');" onmouseout="out('-173090402769638904');" style=""> 129         key.config = config;                                                                             </span>
<span class="-2958410444098009294" onmouseenter="enter('-2958410444098009294');" onmouseout="out('-2958410444098009294');" style=""> 130         key.length = length;                                                                             </span>
<span class="-7771012412001259062" onmouseenter="enter('-7771012412001259062');" onmouseout="out('-7771012412001259062');" style=""> 131         Bitmap bitmap = sBorderLines.get(key);                                                           </span>
<span class="-1735832408094822956" onmouseenter="enter('-1735832408094822956');" onmouseout="out('-1735832408094822956');" style=""> 132         if (bitmap == null) {                                                                            </span>
<span class="1646679160344185704" onmouseenter="enter('1646679160344185704');" onmouseout="out('1646679160344185704');" style=""> 133             bitmap = vertical                                                                            </span>
<span class="-8767545810202353379" onmouseenter="enter('-8767545810202353379');" onmouseout="out('-8767545810202353379');" style=""> 134                     ? Bitmap.createBitmap(1, length, config)                                             </span>
<span class="-252712256386533466" onmouseenter="enter('-252712256386533466');" onmouseout="out('-252712256386533466');" style=""> 135                     : Bitmap.createBitmap(length, 1, config);                                            </span>
<span class="200036293659876844" onmouseenter="enter('200036293659876844');" onmouseout="out('200036293659876844');" style=""> 136             sBorderLines.put(key.clone(), bitmap);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137         }                                                                                                </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 138         return bitmap;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139     }                                                                                                    </span>
<span  style=""> 140                                                                                                          </span>
<span class="-2692570778449524647" onmouseenter="enter('-2692570778449524647');" onmouseout="out('-2692570778449524647');" style=""> 141     private Bitmap getBitmap() {                                                                         </span>
<span class="-5405905934796296849" onmouseenter="enter('-5405905934796296849');" onmouseout="out('-5405905934796296849');" style=""> 142         if (mBitmap == null) {                                                                           </span>
<span class="-5459018773845559989" onmouseenter="enter('-5459018773845559989');" onmouseout="out('-5459018773845559989');" style=""> 143             mBitmap = onGetBitmap();                                                                     </span>
<span class="-6589303999855443970" onmouseenter="enter('-6589303999855443970');" onmouseout="out('-6589303999855443970');" style=""> 144             int w = mBitmap.getWidth() + mBorder * 2;                                                    </span>
<span class="-7165598877762476360" onmouseenter="enter('-7165598877762476360');" onmouseout="out('-7165598877762476360');" style=""> 145             int h = mBitmap.getHeight() + mBorder * 2;                                                   </span>
<span class="-7602504072990906487" onmouseenter="enter('-7602504072990906487');" onmouseout="out('-7602504072990906487');" style=""> 146             if (mWidth == UNSPECIFIED) {                                                                 </span>
<span class="-1544377464552857573" onmouseenter="enter('-1544377464552857573');" onmouseout="out('-1544377464552857573');" style=""> 147                 setSize(w, h);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149         }                                                                                                </span>
<span class="5567434894431635697" onmouseenter="enter('5567434894431635697');" onmouseout="out('5567434894431635697');" style=""> 150         return mBitmap;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151     }                                                                                                    </span>
<span  style=""> 152                                                                                                          </span>
<span class="8465803167111788298" onmouseenter="enter('8465803167111788298');" onmouseout="out('8465803167111788298');" style=""> 153     private void freeBitmap() {                                                                          </span>
<span class="-9151544019057413325" onmouseenter="enter('-9151544019057413325');" onmouseout="out('-9151544019057413325');" style=""> 154         Utils.assertTrue(mBitmap != null);                                                               </span>
<span class="-2358947884683296262" onmouseenter="enter('-2358947884683296262');" onmouseout="out('-2358947884683296262');" style=""> 155         onFreeBitmap(mBitmap);                                                                           </span>
<span class="932825469958765165" onmouseenter="enter('932825469958765165');" onmouseout="out('932825469958765165');" style=""> 156         mBitmap = null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159     @Override                                                                                            </span>
<span class="3799141745189836170" onmouseenter="enter('3799141745189836170');" onmouseout="out('3799141745189836170');" style=""> 160     public int getWidth() {                                                                              </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 161         if (mWidth == UNSPECIFIED) getBitmap();                                                          </span>
<span class="2966597995474396527" onmouseenter="enter('2966597995474396527');" onmouseout="out('2966597995474396527');" style=""> 162         return mWidth;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165     @Override                                                                                            </span>
<span class="2634124408072868895" onmouseenter="enter('2634124408072868895');" onmouseout="out('2634124408072868895');" style=""> 166     public int getHeight() {                                                                             </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 167         if (mWidth == UNSPECIFIED) getBitmap();                                                          </span>
<span class="-4444538114742899873" onmouseenter="enter('-4444538114742899873');" onmouseout="out('-4444538114742899873');" style=""> 168         return mHeight;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 169     }                                                                                                    </span>
<span  style=""> 170                                                                                                          </span>
<span class="-3215853744966742335" onmouseenter="enter('-3215853744966742335');" onmouseout="out('-3215853744966742335');" style=""> 171     protected abstract Bitmap onGetBitmap();                                                             </span>
<span  style=""> 172                                                                                                          </span>
<span class="-7203975694752350186" onmouseenter="enter('-7203975694752350186');" onmouseout="out('-7203975694752350186');" style=""> 173     protected abstract void onFreeBitmap(Bitmap bitmap);                                                 </span>
<span  style=""> 174                                                                                                          </span>
<span class="-6398722967840097469" onmouseenter="enter('-6398722967840097469');" onmouseout="out('-6398722967840097469');" style=""> 175     protected void invalidateContent() {                                                                 </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 176         if (mBitmap != null) freeBitmap();                                                               </span>
<span class="-1573566249444417035" onmouseenter="enter('-1573566249444417035');" onmouseout="out('-1573566249444417035');" style=""> 177         mContentValid = false;                                                                           </span>
<span class="-3589557447567740047" onmouseenter="enter('-3589557447567740047');" onmouseout="out('-3589557447567740047');" style=""> 178         mWidth = UNSPECIFIED;                                                                            </span>
<span class="-7337549455385624533" onmouseenter="enter('-7337549455385624533');" onmouseout="out('-7337549455385624533');" style=""> 179         mHeight = UNSPECIFIED;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180     }                                                                                                    </span>
<span  style=""> 181                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 182     /**                                                                                                  </span>
<span class="2557873334003452441" onmouseenter="enter('2557873334003452441');" onmouseout="out('2557873334003452441');" style=""> 183      * Whether the content on GPU is valid.                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 184      */                                                                                                  </span>
<span class="6328438622391273086" onmouseenter="enter('6328438622391273086');" onmouseout="out('6328438622391273086');" style=""> 185     public boolean isContentValid() {                                                                    </span>
<span class="-3769505508222807408" onmouseenter="enter('-3769505508222807408');" onmouseout="out('-3769505508222807408');" style=""> 186         return isLoaded() &amp;&amp; mContentValid;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187     }                                                                                                    </span>
<span  style=""> 188                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 189     /**                                                                                                  </span>
<span class="-6290967802937726177" onmouseenter="enter('-6290967802937726177');" onmouseout="out('-6290967802937726177');" style=""> 190      * Updates the content on GPU&#x27;s memory.                                                              </span>
<span class="-4034470964912199066" onmouseenter="enter('-4034470964912199066');" onmouseout="out('-4034470964912199066');" style=""> 191      * @param canvas                                                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 192      */                                                                                                  </span>
<span class="108942350733869123" onmouseenter="enter('108942350733869123');" onmouseout="out('108942350733869123');" style=""> 193     public void updateContent(GLCanvas canvas) {                                                         </span>
<span class="-3396881632730774927" onmouseenter="enter('-3396881632730774927');" onmouseout="out('-3396881632730774927');" style=""> 194         if (!isLoaded()) {                                                                               </span>
<span class="-5184899736735963926" onmouseenter="enter('-5184899736735963926');" onmouseout="out('-5184899736735963926');" style=""> 195             if (mThrottled &amp;&amp; ++sUploadedCount &gt; UPLOAD_LIMIT) {                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 196                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197             }                                                                                            </span>
<span class="8391051841668735947" onmouseenter="enter('8391051841668735947');" onmouseout="out('8391051841668735947');" style=""> 198             uploadToCanvas(canvas);                                                                      </span>
<span class="-567867839770461213" onmouseenter="enter('-567867839770461213');" onmouseout="out('-567867839770461213');" style=""> 199         } else if (!mContentValid) {                                                                     </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 200             Bitmap bitmap = getBitmap();                                                                 </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 201             int format = GLUtils.getInternalFormat(bitmap);                                              </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 202             int type = GLUtils.getType(bitmap);                                                          </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 203             canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                          </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 204             freeBitmap();                                                                                </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 205             mContentValid = true;                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207     }                                                                                                    </span>
<span  style=""> 208                                                                                                          </span>
<span class="-28900684726018511" onmouseenter="enter('-28900684726018511');" onmouseout="out('-28900684726018511');" style=""> 209     public static void resetUploadLimit() {                                                              </span>
<span class="-7401770097083608137" onmouseenter="enter('-7401770097083608137');" onmouseout="out('-7401770097083608137');" style=""> 210         sUploadedCount = 0;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211     }                                                                                                    </span>
<span  style=""> 212                                                                                                          </span>
<span class="7293249883154619275" onmouseenter="enter('7293249883154619275');" onmouseout="out('7293249883154619275');" style=""> 213     public static boolean uploadLimitReached() {                                                         </span>
<span class="5635858946898836387" onmouseenter="enter('5635858946898836387');" onmouseout="out('5635858946898836387');" style=""> 214         return sUploadedCount &gt; UPLOAD_LIMIT;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215     }                                                                                                    </span>
<span  style=""> 216                                                                                                          </span>
<span class="5149211547862807755" onmouseenter="enter('5149211547862807755');" onmouseout="out('5149211547862807755');" style=""> 217     private void uploadToCanvas(GLCanvas canvas) {                                                       </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 218         Bitmap bitmap = getBitmap();                                                                     </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style=""> 219         if (bitmap != null) {                                                                            </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 220             try {                                                                                        </span>
<span class="3425854155123203990" onmouseenter="enter('3425854155123203990');" onmouseout="out('3425854155123203990');" style=""> 221                 int bWidth = bitmap.getWidth();                                                          </span>
<span class="3370303073595965579" onmouseenter="enter('3370303073595965579');" onmouseout="out('3370303073595965579');" style=""> 222                 int bHeight = bitmap.getHeight();                                                        </span>
<span class="-452591697594520843" onmouseenter="enter('-452591697594520843');" onmouseout="out('-452591697594520843');" style=""> 223                 int width = bWidth + (mBorder * 2);                                                      </span>
<span class="3177511382930428875" onmouseenter="enter('3177511382930428875');" onmouseout="out('3177511382930428875');" style=""> 224                 int height = bHeight + (mBorder * 2);                                                    </span>
<span class="-5063308770512493674" onmouseenter="enter('-5063308770512493674');" onmouseout="out('-5063308770512493674');" style=""> 225                 int texWidth = getTextureWidth();                                                        </span>
<span class="8899121547547580578" onmouseenter="enter('8899121547547580578');" onmouseout="out('8899121547547580578');" style=""> 226                 int texHeight = getTextureHeight();                                                      </span>
<span class="-1103831219906036559" onmouseenter="enter('-1103831219906036559');" onmouseout="out('-1103831219906036559');" style=""> 227                 assertTrue((bWidth &lt;= texWidth) &amp;&amp; (bHeight &lt;= texHeight));                              </span>
<span class="3646381769102905860" onmouseenter="enter('3646381769102905860');" onmouseout="out('3646381769102905860');" style=""> 228                 // Upload the bitmap to a new texture.                                                   </span>
<span class="-8657089773357603351" onmouseenter="enter('-8657089773357603351');" onmouseout="out('-8657089773357603351');" style=""> 229                 mId = canvas.getGLId().generateTexture();                                                </span>
<span class="2565938783087565331" onmouseenter="enter('2565938783087565331');" onmouseout="out('2565938783087565331');" style=""> 230                 canvas.setTextureParameters(this);                                                       </span>
<span class="2550244555945849837" onmouseenter="enter('2550244555945849837');" onmouseout="out('2550244555945849837');" style=""> 231                 if ((bWidth == texWidth) &amp;&amp; (bHeight == texHeight)) {                                    </span>
<span class="1202596534630055245" onmouseenter="enter('1202596534630055245');" onmouseout="out('1202596534630055245');" style=""> 232                     canvas.initializeTexture(this, bitmap);                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 233                 } else {                                                                                 </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 234                     int format = GLUtils.getInternalFormat(bitmap);                                      </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 235                     int type = GLUtils.getType(bitmap);                                                  </span>
<span class="5256426249253321078" onmouseenter="enter('5256426249253321078');" onmouseout="out('5256426249253321078');" style=""> 236                     Config config = bitmap.getConfig();                                                  </span>
<span class="1282008816208298685" onmouseenter="enter('1282008816208298685');" onmouseout="out('1282008816208298685');" style=""> 237                     canvas.initializeTextureSize(this, format, type);                                    </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 238                     canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                  </span>
<span class="1888191076733751615" onmouseenter="enter('1888191076733751615');" onmouseout="out('1888191076733751615');" style=""> 239                     if (mBorder &gt; 0) {                                                                   </span>
<span class="-4226267341685301491" onmouseenter="enter('-4226267341685301491');" onmouseout="out('-4226267341685301491');" style=""> 240                         // Left border                                                                   </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 241                         Bitmap line = getBorderLine(true, config, texHeight);                            </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 242                         canvas.texSubImage2D(this, 0, 0, line, format, type);                            </span>
<span class="7501484245398067844" onmouseenter="enter('7501484245398067844');" onmouseout="out('7501484245398067844');" style=""> 243                         // Top border                                                                    </span>
<span class="5027190896321362831" onmouseenter="enter('5027190896321362831');" onmouseout="out('5027190896321362831');" style=""> 244                         line = getBorderLine(false, config, texWidth);                                   </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 245                         canvas.texSubImage2D(this, 0, 0, line, format, type);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246                     }                                                                                    </span>
<span class="-52038472791900899" onmouseenter="enter('-52038472791900899');" onmouseout="out('-52038472791900899');" style=""> 247                     // Right border                                                                      </span>
<span class="-6602973859442407620" onmouseenter="enter('-6602973859442407620');" onmouseout="out('-6602973859442407620');" style=""> 248                     if ((mBorder + bWidth) &lt; texWidth) {                                                 </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 249                         Bitmap line = getBorderLine(true, config, texHeight);                            </span>
<span class="6981660014420851544" onmouseenter="enter('6981660014420851544');" onmouseout="out('6981660014420851544');" style=""> 250                         canvas.texSubImage2D(this, mBorder + bWidth, 0, line, format, type);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251                     }                                                                                    </span>
<span class="2714766977077527601" onmouseenter="enter('2714766977077527601');" onmouseout="out('2714766977077527601');" style=""> 252                     // Bottom border                                                                     </span>
<span class="-4204711229801019822" onmouseenter="enter('-4204711229801019822');" onmouseout="out('-4204711229801019822');" style=""> 253                     if ((mBorder + bHeight) &lt; texHeight) {                                               </span>
<span class="257259032112812569" onmouseenter="enter('257259032112812569');" onmouseout="out('257259032112812569');" style=""> 254                         Bitmap line = getBorderLine(false, config, texWidth);                            </span>
<span class="9199030807067665260" onmouseenter="enter('9199030807067665260');" onmouseout="out('9199030807067665260');" style=""> 255                         canvas.texSubImage2D(this, 0, mBorder + bHeight, line, format, type);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257                 }                                                                                        </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 258             } finally {                                                                                  </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 259                 freeBitmap();                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260             }                                                                                            </span>
<span class="5889338600343599383" onmouseenter="enter('5889338600343599383');" onmouseout="out('5889338600343599383');" style=""> 261             // Update texture state.                                                                     </span>
<span class="2185893898758781528" onmouseenter="enter('2185893898758781528');" onmouseout="out('2185893898758781528');" style=""> 262             setAssociatedCanvas(canvas);                                                                 </span>
<span class="5478128493396674048" onmouseenter="enter('5478128493396674048');" onmouseout="out('5478128493396674048');" style=""> 263             mState = STATE_LOADED;                                                                       </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 264             mContentValid = true;                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 265         } else {                                                                                         </span>
<span class="2786766474863998839" onmouseenter="enter('2786766474863998839');" onmouseout="out('2786766474863998839');" style=""> 266             mState = STATE_ERROR;                                                                        </span>
<span class="-2688280550612568095" onmouseenter="enter('-2688280550612568095');" onmouseout="out('-2688280550612568095');" style=""> 267             throw new RuntimeException(&quot;Texture load fail, no bitmap&quot;);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269     }                                                                                                    </span>
<span  style=""> 270                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 271     @Override                                                                                            </span>
<span class="-4954620433901163110" onmouseenter="enter('-4954620433901163110');" onmouseout="out('-4954620433901163110');" style=""> 272     protected boolean onBind(GLCanvas canvas) {                                                          </span>
<span class="-4891675032704098609" onmouseenter="enter('-4891675032704098609');" onmouseout="out('-4891675032704098609');" style=""> 273         updateContent(canvas);                                                                           </span>
<span class="3219878712675061157" onmouseenter="enter('3219878712675061157');" onmouseout="out('3219878712675061157');" style=""> 274         return isContentValid();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275     }                                                                                                    </span>
<span  style=""> 276                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 277     @Override                                                                                            </span>
<span class="6946518658455796177" onmouseenter="enter('6946518658455796177');" onmouseout="out('6946518658455796177');" style=""> 278     protected int getTarget() {                                                                          </span>
<span class="62156321300267489" onmouseenter="enter('62156321300267489');" onmouseout="out('62156321300267489');" style=""> 279         return GL11.GL_TEXTURE_2D;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280     }                                                                                                    </span>
<span  style=""> 281                                                                                                          </span>
<span class="2841696712734050288" onmouseenter="enter('2841696712734050288');" onmouseout="out('2841696712734050288');" style=""> 282     public void setOpaque(boolean isOpaque) {                                                            </span>
<span class="4102597972225673156" onmouseenter="enter('4102597972225673156');" onmouseout="out('4102597972225673156');" style=""> 283         mOpaque = isOpaque;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284     }                                                                                                    </span>
<span  style=""> 285                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 286     @Override                                                                                            </span>
<span class="8858632504335809401" onmouseenter="enter('8858632504335809401');" onmouseout="out('8858632504335809401');" style=""> 287     public boolean isOpaque() {                                                                          </span>
<span class="2284580524710389337" onmouseenter="enter('2284580524710389337');" onmouseout="out('2284580524710389337');" style=""> 288         return mOpaque;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289     }                                                                                                    </span>
<span  style=""> 290                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291     @Override                                                                                            </span>
<span class="-3023643959588162463" onmouseenter="enter('-3023643959588162463');" onmouseout="out('-3023643959588162463');" style=""> 292     public void recycle() {                                                                              </span>
<span class="5945087735450719148" onmouseenter="enter('5945087735450719148');" onmouseout="out('5945087735450719148');" style=""> 293         super.recycle();                                                                                 </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 294         if (mBitmap != null) freeBitmap();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296 }                                                                                                        </span>













</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="304880958838077089" onmouseenter="enter('304880958838077089');" onmouseout="out('304880958838077089');" style="">   2   * Copyright (C) 2010 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="-2294380047098899909" onmouseenter="enter('-2294380047098899909');" onmouseout="out('-2294380047098899909');" style="">  17  package com.android.gallery3d.glrenderer;                                                                         </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  19  import android.graphics.Bitmap;                                                                                   </span>
<span class="-5221619029963095423" onmouseenter="enter('-5221619029963095423');" onmouseout="out('-5221619029963095423');" style="">  20  import android.graphics.Bitmap.Config;                                                                            </span>
<span class="-1593998669479977209" onmouseenter="enter('-1593998669479977209');" onmouseout="out('-1593998669479977209');" style="">  21  import android.opengl.GLUtils;                                                                                    </span>
<span  style="">  22                                                                                                                    </span>
<span class="5153960293286862196" onmouseenter="enter('5153960293286862196');" onmouseout="out('5153960293286862196');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  23 -import junit.framework.Assert;                                                                                    </span>
<span class="1950664032789890920" onmouseenter="enter('1950664032789890920');" onmouseout="out('1950664032789890920');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +import com.android.gallery3d.common.Utils;                                                                        </span>
<span class="-1058861693464722738" onmouseenter="enter('-1058861693464722738');" onmouseout="out('-1058861693464722738');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  25 +import com.android.launcher3.util.Thunk;                                                                          </span>
<span  style="">  26                                                                                                                    </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  27  import java.util.HashMap;                                                                                         </span>
<span  style="">  28                                                                                                                    </span>
<span class="-3046904593900803504" onmouseenter="enter('-3046904593900803504');" onmouseout="out('-3046904593900803504');" style="">  29  import javax.microedition.khronos.opengles.GL11;                                                                  </span>
<span  style="">  30                                                                                                                    </span>
<span class="179605427515979735" onmouseenter="enter('179605427515979735');" onmouseout="out('179605427515979735');" style="">  31  // UploadedTextures use a Bitmap for the content of the texture.                                                  </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  32  //                                                                                                                </span>
<span class="-1339728597306956876" onmouseenter="enter('-1339728597306956876');" onmouseout="out('-1339728597306956876');" style="">  33  // Subclasses should implement onGetBitmap() to provide the Bitmap and                                            </span>
<span class="-7806758351897273383" onmouseenter="enter('-7806758351897273383');" onmouseout="out('-7806758351897273383');" style="">  34  // implement onFreeBitmap(mBitmap) which will be called when the Bitmap                                           </span>
<span class="225820100654862410" onmouseenter="enter('225820100654862410');" onmouseout="out('225820100654862410');" style="">  35  // is not needed anymore.                                                                                         </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  36  //                                                                                                                </span>
<span class="-2525750445176209241" onmouseenter="enter('-2525750445176209241');" onmouseout="out('-2525750445176209241');" style="">  37  // isContentValid() is meaningful only when the isLoaded() returns true.                                          </span>
<span class="-3404045266596529542" onmouseenter="enter('-3404045266596529542');" onmouseout="out('-3404045266596529542');" style="">  38  // It means whether the content needs to be updated.                                                              </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  39  //                                                                                                                </span>
<span class="-5978788969149141858" onmouseenter="enter('-5978788969149141858');" onmouseout="out('-5978788969149141858');" style="">  40  // The user of this class should call recycle() when the texture is not                                           </span>
<span class="-2011833987557592726" onmouseenter="enter('-2011833987557592726');" onmouseout="out('-2011833987557592726');" style="">  41  // needed anymore.                                                                                                </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  42  //                                                                                                                </span>
<span class="-9012555777352942558" onmouseenter="enter('-9012555777352942558');" onmouseout="out('-9012555777352942558');" style="">  43  // By default an UploadedTexture is opaque (so it can be drawn faster without                                     </span>
<span class="5513648399927943367" onmouseenter="enter('5513648399927943367');" onmouseout="out('5513648399927943367');" style="">  44  // blending). The user or subclass can override it using setOpaque().                                             </span>
<span class="-2562753946651237024" onmouseenter="enter('-2562753946651237024');" onmouseout="out('-2562753946651237024');" style="">  45  public abstract class UploadedTexture extends BasicTexture {                                                      </span>
<span  style="">  46                                                                                                                    </span>
<span class="7551988693298335394" onmouseenter="enter('7551988693298335394');" onmouseout="out('7551988693298335394');" style="">  47      // To prevent keeping allocation the borders, we store those used borders here.                               </span>
<span class="7137147725401059478" onmouseenter="enter('7137147725401059478');" onmouseout="out('7137147725401059478');" style="">  48      // Since the length will be power of two, it won&#x27;t use too much memory.                                       </span>
<span class="-8271664251977113798" onmouseenter="enter('-8271664251977113798');" onmouseout="out('-8271664251977113798');" style="">  49      private static HashMap&lt;BorderKey, Bitmap&gt; sBorderLines =                                                      </span>
<span class="-7687922754503084777" onmouseenter="enter('-7687922754503084777');" onmouseout="out('-7687922754503084777');" style="">  50              new HashMap&lt;BorderKey, Bitmap&gt;();                                                                     </span>
<span class="-7116951483637301632" onmouseenter="enter('-7116951483637301632');" onmouseout="out('-7116951483637301632');" style="">  51      private static BorderKey sBorderKey = new BorderKey();                                                        </span>
<span  style="">  52                                                                                                                    </span>
<span class="-5517811679430868458" onmouseenter="enter('-5517811679430868458');" onmouseout="out('-5517811679430868458');" style="">  53      @SuppressWarnings(&quot;unused&quot;)                                                                                   </span>
<span class="3595608324323658446" onmouseenter="enter('3595608324323658446');" onmouseout="out('3595608324323658446');" style="">  54      private static final String TAG = &quot;Texture&quot;;                                                                  </span>
<span class="-8205267457037861440" onmouseenter="enter('-8205267457037861440');" onmouseout="out('-8205267457037861440');" style="">  55      private boolean mContentValid = true;                                                                         </span>
<span  style="">  56                                                                                                                    </span>
<span class="3117207874458064610" onmouseenter="enter('3117207874458064610');" onmouseout="out('3117207874458064610');" style="">  57      // indicate this textures is being uploaded in background                                                     </span>
<span class="2115469074027012466" onmouseenter="enter('2115469074027012466');" onmouseout="out('2115469074027012466');" style="">  58      private boolean mIsUploading = false;                                                                         </span>
<span class="-4012426016973653400" onmouseenter="enter('-4012426016973653400');" onmouseout="out('-4012426016973653400');" style="">  59      private boolean mOpaque = true;                                                                               </span>
<span class="-6194178623973458805" onmouseenter="enter('-6194178623973458805');" onmouseout="out('-6194178623973458805');" style="">  60      private boolean mThrottled = false;                                                                           </span>
<span class="-3729191520250436571" onmouseenter="enter('-3729191520250436571');" onmouseout="out('-3729191520250436571');" style="">  61      private static int sUploadedCount;                                                                            </span>
<span class="8538038388368690204" onmouseenter="enter('8538038388368690204');" onmouseout="out('8538038388368690204');" style="">  62      private static final int UPLOAD_LIMIT = 100;                                                                  </span>
<span  style="">  63                                                                                                                    </span>
<span class="7521066649824278149" onmouseenter="enter('7521066649824278149');" onmouseout="out('7521066649824278149');" style="">  64      protected Bitmap mBitmap;                                                                                     </span>
<span class="-3790896434465611355" onmouseenter="enter('-3790896434465611355');" onmouseout="out('-3790896434465611355');" style="">  65      private int mBorder;                                                                                          </span>
<span  style="">  66                                                                                                                    </span>
<span class="4763603038096129508" onmouseenter="enter('4763603038096129508');" onmouseout="out('4763603038096129508');" style="">  67      protected UploadedTexture() {                                                                                 </span>
<span class="932803248646922221" onmouseenter="enter('932803248646922221');" onmouseout="out('932803248646922221');" style="">  68          this(false);                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69      }                                                                                                             </span>
<span  style="">  70                                                                                                                    </span>
<span class="-3351248394452008679" onmouseenter="enter('-3351248394452008679');" onmouseout="out('-3351248394452008679');" style="">  71      protected UploadedTexture(boolean hasBorder) {                                                                </span>
<span class="3542920714145454971" onmouseenter="enter('3542920714145454971');" onmouseout="out('3542920714145454971');" style="">  72          super(null, 0, STATE_UNLOADED);                                                                           </span>
<span class="-1655014058222521597" onmouseenter="enter('-1655014058222521597');" onmouseout="out('-1655014058222521597');" style="">  73          if (hasBorder) {                                                                                          </span>
<span class="-4652124406467449963" onmouseenter="enter('-4652124406467449963');" onmouseout="out('-4652124406467449963');" style="">  74              setBorder(true);                                                                                      </span>
<span class="2380954290781814167" onmouseenter="enter('2380954290781814167');" onmouseout="out('2380954290781814167');" style="">  75              mBorder = 1;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  77      }                                                                                                             </span>
<span  style="">  78                                                                                                                    </span>
<span class="4480998087656531772" onmouseenter="enter('4480998087656531772');" onmouseout="out('4480998087656531772');" style="">  79      protected void setIsUploading(boolean uploading) {                                                            </span>
<span class="6642969742561576780" onmouseenter="enter('6642969742561576780');" onmouseout="out('6642969742561576780');" style="">  80          mIsUploading = uploading;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81      }                                                                                                             </span>
<span  style="">  82                                                                                                                    </span>
<span class="5863119202211681518" onmouseenter="enter('5863119202211681518');" onmouseout="out('5863119202211681518');" style="">  83      public boolean isUploading() {                                                                                </span>
<span class="2339527736268051895" onmouseenter="enter('2339527736268051895');" onmouseout="out('2339527736268051895');" style="">  84          return mIsUploading;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  85      }                                                                                                             </span>
<span  style="">  86                                                                                                                    </span>
<span class="-5968434442579203348" onmouseenter="enter('-5968434442579203348');" onmouseout="out('-5968434442579203348');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  87 -    private static class BorderKey implements Cloneable {                                                         </span>
<span class="7865940690358442417" onmouseenter="enter('7865940690358442417');" onmouseout="out('7865940690358442417');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  88 +    @Thunk static class BorderKey implements Cloneable {                                                          </span>
<span class="-4594330548127637013" onmouseenter="enter('-4594330548127637013');" onmouseout="out('-4594330548127637013');" style="">  89          public boolean vertical;                                                                                  </span>
<span class="-5526467619964627073" onmouseenter="enter('-5526467619964627073');" onmouseout="out('-5526467619964627073');" style="">  90          public Config config;                                                                                     </span>
<span class="453026790913587128" onmouseenter="enter('453026790913587128');" onmouseout="out('453026790913587128');" style="">  91          public int length;                                                                                        </span>
<span  style="">  92                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  93          @Override                                                                                                 </span>
<span class="5226885376728374571" onmouseenter="enter('5226885376728374571');" onmouseout="out('5226885376728374571');" style="">  94          public int hashCode() {                                                                                   </span>
<span class="-780094223215271991" onmouseenter="enter('-780094223215271991');" onmouseout="out('-780094223215271991');" style="">  95              int x = config.hashCode() ^ length;                                                                   </span>
<span class="-899207486813796319" onmouseenter="enter('-899207486813796319');" onmouseout="out('-899207486813796319');" style="">  96              return vertical ? x : -x;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  97          }                                                                                                         </span>
<span  style="">  98                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  99          @Override                                                                                                 </span>
<span class="7673385308065274101" onmouseenter="enter('7673385308065274101');" onmouseout="out('7673385308065274101');" style=""> 100          public boolean equals(Object object) {                                                                    </span>
<span class="-8927768855362490926" onmouseenter="enter('-8927768855362490926');" onmouseout="out('-8927768855362490926');" style=""> 101              if (!(object instanceof BorderKey)) return false;                                                     </span>
<span class="-2936104822619283166" onmouseenter="enter('-2936104822619283166');" onmouseout="out('-2936104822619283166');" style=""> 102              BorderKey o = (BorderKey) object;                                                                     </span>
<span class="-2976035776567085941" onmouseenter="enter('-2976035776567085941');" onmouseout="out('-2976035776567085941');" style=""> 103              return vertical == o.vertical                                                                         </span>
<span class="-2294165725008002003" onmouseenter="enter('-2294165725008002003');" onmouseout="out('-2294165725008002003');" style=""> 104                      &amp;&amp; config == o.config &amp;&amp; length == o.length;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 105          }                                                                                                         </span>
<span  style=""> 106                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 107          @Override                                                                                                 </span>
<span class="4734347466243487953" onmouseenter="enter('4734347466243487953');" onmouseout="out('4734347466243487953');" style=""> 108          public BorderKey clone() {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 109              try {                                                                                                 </span>
<span class="8454735050532327622" onmouseenter="enter('8454735050532327622');" onmouseout="out('8454735050532327622');" style=""> 110                  return (BorderKey) super.clone();                                                                 </span>
<span class="-4442852992463448790" onmouseenter="enter('-4442852992463448790');" onmouseout="out('-4442852992463448790');" style=""> 111              } catch (CloneNotSupportedException e) {                                                              </span>
<span class="-6252834204302840787" onmouseenter="enter('-6252834204302840787');" onmouseout="out('-6252834204302840787');" style=""> 112                  throw new AssertionError(e);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115      }                                                                                                             </span>
<span  style=""> 116                                                                                                                    </span>
<span class="5796233267395141548" onmouseenter="enter('5796233267395141548');" onmouseout="out('5796233267395141548');" style=""> 117      protected void setThrottled(boolean throttled) {                                                              </span>
<span class="2728067841155066146" onmouseenter="enter('2728067841155066146');" onmouseout="out('2728067841155066146');" style=""> 118          mThrottled = throttled;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119      }                                                                                                             </span>
<span  style=""> 120                                                                                                                    </span>
<span class="4580001023476062931" onmouseenter="enter('4580001023476062931');" onmouseout="out('4580001023476062931');" style=""> 121      private static Bitmap getBorderLine(                                                                          </span>
<span class="4237305713302887664" onmouseenter="enter('4237305713302887664');" onmouseout="out('4237305713302887664');" style=""> 122              boolean vertical, Config config, int length) {                                                        </span>
<span class="5196741965171081542" onmouseenter="enter('5196741965171081542');" onmouseout="out('5196741965171081542');" style=""> 123          BorderKey key = sBorderKey;                                                                               </span>
<span class="-1796270064541479983" onmouseenter="enter('-1796270064541479983');" onmouseout="out('-1796270064541479983');" style=""> 124          key.vertical = vertical;                                                                                  </span>
<span class="-173090402769638904" onmouseenter="enter('-173090402769638904');" onmouseout="out('-173090402769638904');" style=""> 125          key.config = config;                                                                                      </span>
<span class="-2958410444098009294" onmouseenter="enter('-2958410444098009294');" onmouseout="out('-2958410444098009294');" style=""> 126          key.length = length;                                                                                      </span>
<span class="-7771012412001259062" onmouseenter="enter('-7771012412001259062');" onmouseout="out('-7771012412001259062');" style=""> 127          Bitmap bitmap = sBorderLines.get(key);                                                                    </span>
<span class="-1735832408094822956" onmouseenter="enter('-1735832408094822956');" onmouseout="out('-1735832408094822956');" style=""> 128          if (bitmap == null) {                                                                                     </span>
<span class="1646679160344185704" onmouseenter="enter('1646679160344185704');" onmouseout="out('1646679160344185704');" style=""> 129              bitmap = vertical                                                                                     </span>
<span class="-8767545810202353379" onmouseenter="enter('-8767545810202353379');" onmouseout="out('-8767545810202353379');" style=""> 130                      ? Bitmap.createBitmap(1, length, config)                                                      </span>
<span class="-252712256386533466" onmouseenter="enter('-252712256386533466');" onmouseout="out('-252712256386533466');" style=""> 131                      : Bitmap.createBitmap(length, 1, config);                                                     </span>
<span class="200036293659876844" onmouseenter="enter('200036293659876844');" onmouseout="out('200036293659876844');" style=""> 132              sBorderLines.put(key.clone(), bitmap);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133          }                                                                                                         </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 134          return bitmap;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 135      }                                                                                                             </span>
<span  style=""> 136                                                                                                                    </span>
<span class="-2692570778449524647" onmouseenter="enter('-2692570778449524647');" onmouseout="out('-2692570778449524647');" style=""> 137      private Bitmap getBitmap() {                                                                                  </span>
<span class="-5405905934796296849" onmouseenter="enter('-5405905934796296849');" onmouseout="out('-5405905934796296849');" style=""> 138          if (mBitmap == null) {                                                                                    </span>
<span class="-5459018773845559989" onmouseenter="enter('-5459018773845559989');" onmouseout="out('-5459018773845559989');" style=""> 139              mBitmap = onGetBitmap();                                                                              </span>
<span class="-6589303999855443970" onmouseenter="enter('-6589303999855443970');" onmouseout="out('-6589303999855443970');" style=""> 140              int w = mBitmap.getWidth() + mBorder * 2;                                                             </span>
<span class="-7165598877762476360" onmouseenter="enter('-7165598877762476360');" onmouseout="out('-7165598877762476360');" style=""> 141              int h = mBitmap.getHeight() + mBorder * 2;                                                            </span>
<span class="-7602504072990906487" onmouseenter="enter('-7602504072990906487');" onmouseout="out('-7602504072990906487');" style=""> 142              if (mWidth == UNSPECIFIED) {                                                                          </span>
<span class="-1544377464552857573" onmouseenter="enter('-1544377464552857573');" onmouseout="out('-1544377464552857573');" style=""> 143                  setSize(w, h);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145          }                                                                                                         </span>
<span class="5567434894431635697" onmouseenter="enter('5567434894431635697');" onmouseout="out('5567434894431635697');" style=""> 146          return mBitmap;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147      }                                                                                                             </span>
<span  style=""> 148                                                                                                                    </span>
<span class="8465803167111788298" onmouseenter="enter('8465803167111788298');" onmouseout="out('8465803167111788298');" style=""> 149      private void freeBitmap() {                                                                                   </span>
<span class="-5062796063093214141" onmouseenter="enter('-5062796063093214141');" onmouseout="out('-5062796063093214141');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 150 -        Assert.assertTrue(mBitmap != null);                                                                       </span>
<span class="-9151544019057413325" onmouseenter="enter('-9151544019057413325');" onmouseout="out('-9151544019057413325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 151 +        Utils.assertTrue(mBitmap != null);                                                                        </span>
<span class="-2358947884683296262" onmouseenter="enter('-2358947884683296262');" onmouseout="out('-2358947884683296262');" style=""> 152          onFreeBitmap(mBitmap);                                                                                    </span>
<span class="932825469958765165" onmouseenter="enter('932825469958765165');" onmouseout="out('932825469958765165');" style=""> 153          mBitmap = null;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154      }                                                                                                             </span>
<span  style=""> 155                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 156      @Override                                                                                                     </span>
<span class="3799141745189836170" onmouseenter="enter('3799141745189836170');" onmouseout="out('3799141745189836170');" style=""> 157      public int getWidth() {                                                                                       </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 158          if (mWidth == UNSPECIFIED) getBitmap();                                                                   </span>
<span class="2966597995474396527" onmouseenter="enter('2966597995474396527');" onmouseout="out('2966597995474396527');" style=""> 159          return mWidth;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160      }                                                                                                             </span>
<span  style=""> 161                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162      @Override                                                                                                     </span>
<span class="2634124408072868895" onmouseenter="enter('2634124408072868895');" onmouseout="out('2634124408072868895');" style=""> 163      public int getHeight() {                                                                                      </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 164          if (mWidth == UNSPECIFIED) getBitmap();                                                                   </span>
<span class="-4444538114742899873" onmouseenter="enter('-4444538114742899873');" onmouseout="out('-4444538114742899873');" style=""> 165          return mHeight;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166      }                                                                                                             </span>
<span  style=""> 167                                                                                                                    </span>
<span class="-3215853744966742335" onmouseenter="enter('-3215853744966742335');" onmouseout="out('-3215853744966742335');" style=""> 168      protected abstract Bitmap onGetBitmap();                                                                      </span>
<span  style=""> 169                                                                                                                    </span>
<span class="-7203975694752350186" onmouseenter="enter('-7203975694752350186');" onmouseout="out('-7203975694752350186');" style=""> 170      protected abstract void onFreeBitmap(Bitmap bitmap);                                                          </span>
<span  style=""> 171                                                                                                                    </span>
<span class="-6398722967840097469" onmouseenter="enter('-6398722967840097469');" onmouseout="out('-6398722967840097469');" style=""> 172      protected void invalidateContent() {                                                                          </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 173          if (mBitmap != null) freeBitmap();                                                                        </span>
<span class="-1573566249444417035" onmouseenter="enter('-1573566249444417035');" onmouseout="out('-1573566249444417035');" style=""> 174          mContentValid = false;                                                                                    </span>
<span class="-3589557447567740047" onmouseenter="enter('-3589557447567740047');" onmouseout="out('-3589557447567740047');" style=""> 175          mWidth = UNSPECIFIED;                                                                                     </span>
<span class="-7337549455385624533" onmouseenter="enter('-7337549455385624533');" onmouseout="out('-7337549455385624533');" style=""> 176          mHeight = UNSPECIFIED;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177      }                                                                                                             </span>
<span  style=""> 178                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 179      /**                                                                                                           </span>
<span class="2557873334003452441" onmouseenter="enter('2557873334003452441');" onmouseout="out('2557873334003452441');" style=""> 180       * Whether the content on GPU is valid.                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 181       */                                                                                                           </span>
<span class="6328438622391273086" onmouseenter="enter('6328438622391273086');" onmouseout="out('6328438622391273086');" style=""> 182      public boolean isContentValid() {                                                                             </span>
<span class="-3769505508222807408" onmouseenter="enter('-3769505508222807408');" onmouseout="out('-3769505508222807408');" style=""> 183          return isLoaded() &amp;&amp; mContentValid;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184      }                                                                                                             </span>
<span  style=""> 185                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 186      /**                                                                                                           </span>
<span class="-6290967802937726177" onmouseenter="enter('-6290967802937726177');" onmouseout="out('-6290967802937726177');" style=""> 187       * Updates the content on GPU&#x27;s memory.                                                                       </span>
<span class="-4034470964912199066" onmouseenter="enter('-4034470964912199066');" onmouseout="out('-4034470964912199066');" style=""> 188       * @param canvas                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 189       */                                                                                                           </span>
<span class="108942350733869123" onmouseenter="enter('108942350733869123');" onmouseout="out('108942350733869123');" style=""> 190      public void updateContent(GLCanvas canvas) {                                                                  </span>
<span class="-3396881632730774927" onmouseenter="enter('-3396881632730774927');" onmouseout="out('-3396881632730774927');" style=""> 191          if (!isLoaded()) {                                                                                        </span>
<span class="-5184899736735963926" onmouseenter="enter('-5184899736735963926');" onmouseout="out('-5184899736735963926');" style=""> 192              if (mThrottled &amp;&amp; ++sUploadedCount &gt; UPLOAD_LIMIT) {                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 193                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 194              }                                                                                                     </span>
<span class="8391051841668735947" onmouseenter="enter('8391051841668735947');" onmouseout="out('8391051841668735947');" style=""> 195              uploadToCanvas(canvas);                                                                               </span>
<span class="-567867839770461213" onmouseenter="enter('-567867839770461213');" onmouseout="out('-567867839770461213');" style=""> 196          } else if (!mContentValid) {                                                                              </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 197              Bitmap bitmap = getBitmap();                                                                          </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 198              int format = GLUtils.getInternalFormat(bitmap);                                                       </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 199              int type = GLUtils.getType(bitmap);                                                                   </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 200              canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                                   </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 201              freeBitmap();                                                                                         </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 202              mContentValid = true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204      }                                                                                                             </span>
<span  style=""> 205                                                                                                                    </span>
<span class="-28900684726018511" onmouseenter="enter('-28900684726018511');" onmouseout="out('-28900684726018511');" style=""> 206      public static void resetUploadLimit() {                                                                       </span>
<span class="-7401770097083608137" onmouseenter="enter('-7401770097083608137');" onmouseout="out('-7401770097083608137');" style=""> 207          sUploadedCount = 0;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208      }                                                                                                             </span>
<span  style=""> 209                                                                                                                    </span>
<span class="7293249883154619275" onmouseenter="enter('7293249883154619275');" onmouseout="out('7293249883154619275');" style=""> 210      public static boolean uploadLimitReached() {                                                                  </span>
<span class="5635858946898836387" onmouseenter="enter('5635858946898836387');" onmouseout="out('5635858946898836387');" style=""> 211          return sUploadedCount &gt; UPLOAD_LIMIT;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212      }                                                                                                             </span>
<span  style=""> 213                                                                                                                    </span>
<span class="5149211547862807755" onmouseenter="enter('5149211547862807755');" onmouseout="out('5149211547862807755');" style=""> 214      private void uploadToCanvas(GLCanvas canvas) {                                                                </span>
<span  style=""> 215                                                                                                                    </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 216          Bitmap bitmap = getBitmap();                                                                              </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style=""> 217          if (bitmap != null) {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 218              try {                                                                                                 </span>
<span class="3425854155123203990" onmouseenter="enter('3425854155123203990');" onmouseout="out('3425854155123203990');" style=""> 219                  int bWidth = bitmap.getWidth();                                                                   </span>
<span class="3370303073595965579" onmouseenter="enter('3370303073595965579');" onmouseout="out('3370303073595965579');" style=""> 220                  int bHeight = bitmap.getHeight();                                                                 </span>
<span class="-4265828418919251504" onmouseenter="enter('-4265828418919251504');" onmouseout="out('-4265828418919251504');" style=""> 221                  int width = bWidth + mBorder * 2;                                                                 </span>
<span class="5317611973642769478" onmouseenter="enter('5317611973642769478');" onmouseout="out('5317611973642769478');" style=""> 222                  int height = bHeight + mBorder * 2;                                                               </span>
<span class="-5063308770512493674" onmouseenter="enter('-5063308770512493674');" onmouseout="out('-5063308770512493674');" style=""> 223                  int texWidth = getTextureWidth();                                                                 </span>
<span class="8899121547547580578" onmouseenter="enter('8899121547547580578');" onmouseout="out('8899121547547580578');" style=""> 224                  int texHeight = getTextureHeight();                                                               </span>
<span  style=""> 225                                                                                                                    </span>
<span class="-1563057097152409297" onmouseenter="enter('-1563057097152409297');" onmouseout="out('-1563057097152409297');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 226 -                Assert.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                                    </span>
<span class="83345577605198992" onmouseenter="enter('83345577605198992');" onmouseout="out('83345577605198992');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +                Utils.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                                     </span>
<span  style=""> 228                                                                                                                    </span>
<span class="3646381769102905860" onmouseenter="enter('3646381769102905860');" onmouseout="out('3646381769102905860');" style=""> 229                  // Upload the bitmap to a new texture.                                                            </span>
<span class="-8657089773357603351" onmouseenter="enter('-8657089773357603351');" onmouseout="out('-8657089773357603351');" style=""> 230                  mId = canvas.getGLId().generateTexture();                                                         </span>
<span class="2565938783087565331" onmouseenter="enter('2565938783087565331');" onmouseout="out('2565938783087565331');" style=""> 231                  canvas.setTextureParameters(this);                                                                </span>
<span  style=""> 232                                                                                                                    </span>
<span class="3040185108073699348" onmouseenter="enter('3040185108073699348');" onmouseout="out('3040185108073699348');" style=""> 233                  if (bWidth == texWidth &amp;&amp; bHeight == texHeight) {                                                 </span>
<span class="1202596534630055245" onmouseenter="enter('1202596534630055245');" onmouseout="out('1202596534630055245');" style=""> 234                      canvas.initializeTexture(this, bitmap);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 235                  } else {                                                                                          </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 236                      int format = GLUtils.getInternalFormat(bitmap);                                               </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 237                      int type = GLUtils.getType(bitmap);                                                           </span>
<span class="5256426249253321078" onmouseenter="enter('5256426249253321078');" onmouseout="out('5256426249253321078');" style=""> 238                      Config config = bitmap.getConfig();                                                           </span>
<span  style=""> 239                                                                                                                    </span>
<span class="1282008816208298685" onmouseenter="enter('1282008816208298685');" onmouseout="out('1282008816208298685');" style=""> 240                      canvas.initializeTextureSize(this, format, type);                                             </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 241                      canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                           </span>
<span  style=""> 242                                                                                                                    </span>
<span class="1888191076733751615" onmouseenter="enter('1888191076733751615');" onmouseout="out('1888191076733751615');" style=""> 243                      if (mBorder &gt; 0) {                                                                            </span>
<span class="-4226267341685301491" onmouseenter="enter('-4226267341685301491');" onmouseout="out('-4226267341685301491');" style=""> 244                          // Left border                                                                            </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 245                          Bitmap line = getBorderLine(true, config, texHeight);                                     </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 246                          canvas.texSubImage2D(this, 0, 0, line, format, type);                                     </span>
<span  style=""> 247                                                                                                                    </span>
<span class="7501484245398067844" onmouseenter="enter('7501484245398067844');" onmouseout="out('7501484245398067844');" style=""> 248                          // Top border                                                                             </span>
<span class="5027190896321362831" onmouseenter="enter('5027190896321362831');" onmouseout="out('5027190896321362831');" style=""> 249                          line = getBorderLine(false, config, texWidth);                                            </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 250                          canvas.texSubImage2D(this, 0, 0, line, format, type);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251                      }                                                                                             </span>
<span  style=""> 252                                                                                                                    </span>
<span class="-52038472791900899" onmouseenter="enter('-52038472791900899');" onmouseout="out('-52038472791900899');" style=""> 253                      // Right border                                                                               </span>
<span class="-3434651130222162078" onmouseenter="enter('-3434651130222162078');" onmouseout="out('-3434651130222162078');" style=""> 254                      if (mBorder + bWidth &lt; texWidth) {                                                            </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 255                          Bitmap line = getBorderLine(true, config, texHeight);                                     </span>
<span class="6981660014420851544" onmouseenter="enter('6981660014420851544');" onmouseout="out('6981660014420851544');" style=""> 256                          canvas.texSubImage2D(this, mBorder + bWidth, 0, line, format, type);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257                      }                                                                                             </span>
<span  style=""> 258                                                                                                                    </span>
<span class="2714766977077527601" onmouseenter="enter('2714766977077527601');" onmouseout="out('2714766977077527601');" style=""> 259                      // Bottom border                                                                              </span>
<span class="2333404839235139340" onmouseenter="enter('2333404839235139340');" onmouseout="out('2333404839235139340');" style=""> 260                      if (mBorder + bHeight &lt; texHeight) {                                                          </span>
<span class="257259032112812569" onmouseenter="enter('257259032112812569');" onmouseout="out('257259032112812569');" style=""> 261                          Bitmap line = getBorderLine(false, config, texWidth);                                     </span>
<span class="9199030807067665260" onmouseenter="enter('9199030807067665260');" onmouseout="out('9199030807067665260');" style=""> 262                          canvas.texSubImage2D(this, 0, mBorder + bHeight, line, format, type);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264                  }                                                                                                 </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 265              } finally {                                                                                           </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 266                  freeBitmap();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267              }                                                                                                     </span>
<span class="5889338600343599383" onmouseenter="enter('5889338600343599383');" onmouseout="out('5889338600343599383');" style=""> 268              // Update texture state.                                                                              </span>
<span class="2185893898758781528" onmouseenter="enter('2185893898758781528');" onmouseout="out('2185893898758781528');" style=""> 269              setAssociatedCanvas(canvas);                                                                          </span>
<span class="5478128493396674048" onmouseenter="enter('5478128493396674048');" onmouseout="out('5478128493396674048');" style=""> 270              mState = STATE_LOADED;                                                                                </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 271              mContentValid = true;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 272          } else {                                                                                                  </span>
<span class="2786766474863998839" onmouseenter="enter('2786766474863998839');" onmouseout="out('2786766474863998839');" style=""> 273              mState = STATE_ERROR;                                                                                 </span>
<span class="-2688280550612568095" onmouseenter="enter('-2688280550612568095');" onmouseout="out('-2688280550612568095');" style=""> 274              throw new RuntimeException(&quot;Texture load fail, no bitmap&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276      }                                                                                                             </span>
<span  style=""> 277                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 278      @Override                                                                                                     </span>
<span class="-4954620433901163110" onmouseenter="enter('-4954620433901163110');" onmouseout="out('-4954620433901163110');" style=""> 279      protected boolean onBind(GLCanvas canvas) {                                                                   </span>
<span class="-4891675032704098609" onmouseenter="enter('-4891675032704098609');" onmouseout="out('-4891675032704098609');" style=""> 280          updateContent(canvas);                                                                                    </span>
<span class="3219878712675061157" onmouseenter="enter('3219878712675061157');" onmouseout="out('3219878712675061157');" style=""> 281          return isContentValid();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282      }                                                                                                             </span>
<span  style=""> 283                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 284      @Override                                                                                                     </span>
<span class="6946518658455796177" onmouseenter="enter('6946518658455796177');" onmouseout="out('6946518658455796177');" style=""> 285      protected int getTarget() {                                                                                   </span>
<span class="62156321300267489" onmouseenter="enter('62156321300267489');" onmouseout="out('62156321300267489');" style=""> 286          return GL11.GL_TEXTURE_2D;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287      }                                                                                                             </span>
<span  style=""> 288                                                                                                                    </span>
<span class="2841696712734050288" onmouseenter="enter('2841696712734050288');" onmouseout="out('2841696712734050288');" style=""> 289      public void setOpaque(boolean isOpaque) {                                                                     </span>
<span class="4102597972225673156" onmouseenter="enter('4102597972225673156');" onmouseout="out('4102597972225673156');" style=""> 290          mOpaque = isOpaque;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291      }                                                                                                             </span>
<span  style=""> 292                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 293      @Override                                                                                                     </span>
<span class="8858632504335809401" onmouseenter="enter('8858632504335809401');" onmouseout="out('8858632504335809401');" style=""> 294      public boolean isOpaque() {                                                                                   </span>
<span class="2284580524710389337" onmouseenter="enter('2284580524710389337');" onmouseout="out('2284580524710389337');" style=""> 295          return mOpaque;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 296      }                                                                                                             </span>
<span  style=""> 297                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 298      @Override                                                                                                     </span>
<span class="-3023643959588162463" onmouseenter="enter('-3023643959588162463');" onmouseout="out('-3023643959588162463');" style=""> 299      public void recycle() {                                                                                       </span>
<span class="5945087735450719148" onmouseenter="enter('5945087735450719148');" onmouseout="out('5945087735450719148');" style=""> 300          super.recycle();                                                                                          </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 301          if (mBitmap != null) freeBitmap();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="304880958838077089" onmouseenter="enter('304880958838077089');" onmouseout="out('304880958838077089');" style="">   2   * Copyright (C) 2010 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="-2294380047098899909" onmouseenter="enter('-2294380047098899909');" onmouseout="out('-2294380047098899909');" style="">  17  package com.android.gallery3d.glrenderer;                                                                         </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  19  import android.graphics.Bitmap;                                                                                   </span>
<span class="-5221619029963095423" onmouseenter="enter('-5221619029963095423');" onmouseout="out('-5221619029963095423');" style="">  20  import android.graphics.Bitmap.Config;                                                                            </span>
<span class="-1593998669479977209" onmouseenter="enter('-1593998669479977209');" onmouseout="out('-1593998669479977209');" style="">  21  import android.opengl.GLUtils;                                                                                    </span>
<span  style="">  22                                                                                                                    </span>
<span class="5153960293286862196" onmouseenter="enter('5153960293286862196');" onmouseout="out('5153960293286862196');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  23 -import junit.framework.Assert;                                                                                    </span>
<span class="1950664032789890920" onmouseenter="enter('1950664032789890920');" onmouseout="out('1950664032789890920');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  24 +import com.android.gallery3d.common.Utils;                                                                        </span>

<span  style="">  25                                                                                                                    </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  26  import java.util.HashMap;                                                                                         </span>
<span  style="">  27                                                                                                                    </span>
<span class="-3046904593900803504" onmouseenter="enter('-3046904593900803504');" onmouseout="out('-3046904593900803504');" style="">  28  import javax.microedition.khronos.opengles.GL11;                                                                  </span>
<span  style="">  29                                                                                                                    </span>
<span class="179605427515979735" onmouseenter="enter('179605427515979735');" onmouseout="out('179605427515979735');" style="">  30  // UploadedTextures use a Bitmap for the content of the texture.                                                  </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  31  //                                                                                                                </span>
<span class="-1339728597306956876" onmouseenter="enter('-1339728597306956876');" onmouseout="out('-1339728597306956876');" style="">  32  // Subclasses should implement onGetBitmap() to provide the Bitmap and                                            </span>
<span class="-7806758351897273383" onmouseenter="enter('-7806758351897273383');" onmouseout="out('-7806758351897273383');" style="">  33  // implement onFreeBitmap(mBitmap) which will be called when the Bitmap                                           </span>
<span class="225820100654862410" onmouseenter="enter('225820100654862410');" onmouseout="out('225820100654862410');" style="">  34  // is not needed anymore.                                                                                         </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  35  //                                                                                                                </span>
<span class="-2525750445176209241" onmouseenter="enter('-2525750445176209241');" onmouseout="out('-2525750445176209241');" style="">  36  // isContentValid() is meaningful only when the isLoaded() returns true.                                          </span>
<span class="-3404045266596529542" onmouseenter="enter('-3404045266596529542');" onmouseout="out('-3404045266596529542');" style="">  37  // It means whether the content needs to be updated.                                                              </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  38  //                                                                                                                </span>
<span class="-5978788969149141858" onmouseenter="enter('-5978788969149141858');" onmouseout="out('-5978788969149141858');" style="">  39  // The user of this class should call recycle() when the texture is not                                           </span>
<span class="-2011833987557592726" onmouseenter="enter('-2011833987557592726');" onmouseout="out('-2011833987557592726');" style="">  40  // needed anymore.                                                                                                </span>
<span class="-8064130612454474190" onmouseenter="enter('-8064130612454474190');" onmouseout="out('-8064130612454474190');" style="">  41  //                                                                                                                </span>
<span class="-9012555777352942558" onmouseenter="enter('-9012555777352942558');" onmouseout="out('-9012555777352942558');" style="">  42  // By default an UploadedTexture is opaque (so it can be drawn faster without                                     </span>
<span class="5513648399927943367" onmouseenter="enter('5513648399927943367');" onmouseout="out('5513648399927943367');" style="">  43  // blending). The user or subclass can override it using setOpaque().                                             </span>
<span class="-2562753946651237024" onmouseenter="enter('-2562753946651237024');" onmouseout="out('-2562753946651237024');" style="">  44  public abstract class UploadedTexture extends BasicTexture {                                                      </span>
<span  style="">  45                                                                                                                    </span>
<span class="7551988693298335394" onmouseenter="enter('7551988693298335394');" onmouseout="out('7551988693298335394');" style="">  46      // To prevent keeping allocation the borders, we store those used borders here.                               </span>
<span class="7137147725401059478" onmouseenter="enter('7137147725401059478');" onmouseout="out('7137147725401059478');" style="">  47      // Since the length will be power of two, it won&#x27;t use too much memory.                                       </span>
<span class="-8271664251977113798" onmouseenter="enter('-8271664251977113798');" onmouseout="out('-8271664251977113798');" style="">  48      private static HashMap&lt;BorderKey, Bitmap&gt; sBorderLines =                                                      </span>
<span class="-7687922754503084777" onmouseenter="enter('-7687922754503084777');" onmouseout="out('-7687922754503084777');" style="">  49              new HashMap&lt;BorderKey, Bitmap&gt;();                                                                     </span>
<span class="-7116951483637301632" onmouseenter="enter('-7116951483637301632');" onmouseout="out('-7116951483637301632');" style="">  50      private static BorderKey sBorderKey = new BorderKey();                                                        </span>
<span  style="">  51                                                                                                                    </span>
<span class="-5517811679430868458" onmouseenter="enter('-5517811679430868458');" onmouseout="out('-5517811679430868458');" style="">  52      @SuppressWarnings(&quot;unused&quot;)                                                                                   </span>
<span class="3595608324323658446" onmouseenter="enter('3595608324323658446');" onmouseout="out('3595608324323658446');" style="">  53      private static final String TAG = &quot;Texture&quot;;                                                                  </span>
<span class="-8205267457037861440" onmouseenter="enter('-8205267457037861440');" onmouseout="out('-8205267457037861440');" style="">  54      private boolean mContentValid = true;                                                                         </span>
<span  style="">  55                                                                                                                    </span>
<span class="3117207874458064610" onmouseenter="enter('3117207874458064610');" onmouseout="out('3117207874458064610');" style="">  56      // indicate this textures is being uploaded in background                                                     </span>
<span class="2115469074027012466" onmouseenter="enter('2115469074027012466');" onmouseout="out('2115469074027012466');" style="">  57      private boolean mIsUploading = false;                                                                         </span>
<span class="-4012426016973653400" onmouseenter="enter('-4012426016973653400');" onmouseout="out('-4012426016973653400');" style="">  58      private boolean mOpaque = true;                                                                               </span>
<span class="-6194178623973458805" onmouseenter="enter('-6194178623973458805');" onmouseout="out('-6194178623973458805');" style="">  59      private boolean mThrottled = false;                                                                           </span>
<span class="-3729191520250436571" onmouseenter="enter('-3729191520250436571');" onmouseout="out('-3729191520250436571');" style="">  60      private static int sUploadedCount;                                                                            </span>
<span class="8538038388368690204" onmouseenter="enter('8538038388368690204');" onmouseout="out('8538038388368690204');" style="">  61      private static final int UPLOAD_LIMIT = 100;                                                                  </span>
<span  style="">  62                                                                                                                    </span>
<span class="7521066649824278149" onmouseenter="enter('7521066649824278149');" onmouseout="out('7521066649824278149');" style="">  63      protected Bitmap mBitmap;                                                                                     </span>
<span class="-3790896434465611355" onmouseenter="enter('-3790896434465611355');" onmouseout="out('-3790896434465611355');" style="">  64      private int mBorder;                                                                                          </span>
<span  style="">  65                                                                                                                    </span>
<span class="4763603038096129508" onmouseenter="enter('4763603038096129508');" onmouseout="out('4763603038096129508');" style="">  66      protected UploadedTexture() {                                                                                 </span>
<span class="932803248646922221" onmouseenter="enter('932803248646922221');" onmouseout="out('932803248646922221');" style="">  67          this(false);                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  68      }                                                                                                             </span>
<span  style="">  69                                                                                                                    </span>
<span class="-3351248394452008679" onmouseenter="enter('-3351248394452008679');" onmouseout="out('-3351248394452008679');" style="">  70      protected UploadedTexture(boolean hasBorder) {                                                                </span>
<span class="3542920714145454971" onmouseenter="enter('3542920714145454971');" onmouseout="out('3542920714145454971');" style="">  71          super(null, 0, STATE_UNLOADED);                                                                           </span>
<span class="-1655014058222521597" onmouseenter="enter('-1655014058222521597');" onmouseout="out('-1655014058222521597');" style="">  72          if (hasBorder) {                                                                                          </span>
<span class="-4652124406467449963" onmouseenter="enter('-4652124406467449963');" onmouseout="out('-4652124406467449963');" style="">  73              setBorder(true);                                                                                      </span>
<span class="2380954290781814167" onmouseenter="enter('2380954290781814167');" onmouseout="out('2380954290781814167');" style="">  74              mBorder = 1;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  76      }                                                                                                             </span>
<span  style="">  77                                                                                                                    </span>
<span class="4480998087656531772" onmouseenter="enter('4480998087656531772');" onmouseout="out('4480998087656531772');" style="">  78      protected void setIsUploading(boolean uploading) {                                                            </span>
<span class="6642969742561576780" onmouseenter="enter('6642969742561576780');" onmouseout="out('6642969742561576780');" style="">  79          mIsUploading = uploading;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  80      }                                                                                                             </span>
<span  style="">  81                                                                                                                    </span>
<span class="5863119202211681518" onmouseenter="enter('5863119202211681518');" onmouseout="out('5863119202211681518');" style="">  82      public boolean isUploading() {                                                                                </span>
<span class="2339527736268051895" onmouseenter="enter('2339527736268051895');" onmouseout="out('2339527736268051895');" style="">  83          return mIsUploading;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84      }                                                                                                             </span>
<span  style="">  85                                                                                                                    </span>
<span class="-5968434442579203348" onmouseenter="enter('-5968434442579203348');" onmouseout="out('-5968434442579203348');" style="">  86      private static class BorderKey implements Cloneable {                                                         </span>

<span class="-4594330548127637013" onmouseenter="enter('-4594330548127637013');" onmouseout="out('-4594330548127637013');" style="">  87          public boolean vertical;                                                                                  </span>
<span class="-5526467619964627073" onmouseenter="enter('-5526467619964627073');" onmouseout="out('-5526467619964627073');" style="">  88          public Config config;                                                                                     </span>
<span class="453026790913587128" onmouseenter="enter('453026790913587128');" onmouseout="out('453026790913587128');" style="">  89          public int length;                                                                                        </span>
<span  style="">  90                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  91          @Override                                                                                                 </span>
<span class="5226885376728374571" onmouseenter="enter('5226885376728374571');" onmouseout="out('5226885376728374571');" style="">  92          public int hashCode() {                                                                                   </span>
<span class="-780094223215271991" onmouseenter="enter('-780094223215271991');" onmouseout="out('-780094223215271991');" style="">  93              int x = config.hashCode() ^ length;                                                                   </span>
<span class="-899207486813796319" onmouseenter="enter('-899207486813796319');" onmouseout="out('-899207486813796319');" style="">  94              return vertical ? x : -x;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95          }                                                                                                         </span>
<span  style="">  96                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97          @Override                                                                                                 </span>
<span class="7673385308065274101" onmouseenter="enter('7673385308065274101');" onmouseout="out('7673385308065274101');" style="">  98          public boolean equals(Object object) {                                                                    </span>
<span class="-8927768855362490926" onmouseenter="enter('-8927768855362490926');" onmouseout="out('-8927768855362490926');" style="">  99              if (!(object instanceof BorderKey)) return false;                                                     </span>
<span class="-2936104822619283166" onmouseenter="enter('-2936104822619283166');" onmouseout="out('-2936104822619283166');" style=""> 100              BorderKey o = (BorderKey) object;                                                                     </span>
<span class="-2976035776567085941" onmouseenter="enter('-2976035776567085941');" onmouseout="out('-2976035776567085941');" style=""> 101              return vertical == o.vertical                                                                         </span>
<span class="-2294165725008002003" onmouseenter="enter('-2294165725008002003');" onmouseout="out('-2294165725008002003');" style=""> 102                      &amp;&amp; config == o.config &amp;&amp; length == o.length;                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 103          }                                                                                                         </span>
<span  style=""> 104                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105          @Override                                                                                                 </span>
<span class="4734347466243487953" onmouseenter="enter('4734347466243487953');" onmouseout="out('4734347466243487953');" style=""> 106          public BorderKey clone() {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 107              try {                                                                                                 </span>
<span class="8454735050532327622" onmouseenter="enter('8454735050532327622');" onmouseout="out('8454735050532327622');" style=""> 108                  return (BorderKey) super.clone();                                                                 </span>
<span class="-4442852992463448790" onmouseenter="enter('-4442852992463448790');" onmouseout="out('-4442852992463448790');" style=""> 109              } catch (CloneNotSupportedException e) {                                                              </span>
<span class="-6252834204302840787" onmouseenter="enter('-6252834204302840787');" onmouseout="out('-6252834204302840787');" style=""> 110                  throw new AssertionError(e);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113      }                                                                                                             </span>
<span  style=""> 114                                                                                                                    </span>
<span class="5796233267395141548" onmouseenter="enter('5796233267395141548');" onmouseout="out('5796233267395141548');" style=""> 115      protected void setThrottled(boolean throttled) {                                                              </span>
<span class="2728067841155066146" onmouseenter="enter('2728067841155066146');" onmouseout="out('2728067841155066146');" style=""> 116          mThrottled = throttled;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117      }                                                                                                             </span>
<span  style=""> 118                                                                                                                    </span>
<span class="4580001023476062931" onmouseenter="enter('4580001023476062931');" onmouseout="out('4580001023476062931');" style=""> 119      private static Bitmap getBorderLine(                                                                          </span>
<span class="4237305713302887664" onmouseenter="enter('4237305713302887664');" onmouseout="out('4237305713302887664');" style=""> 120              boolean vertical, Config config, int length) {                                                        </span>
<span class="5196741965171081542" onmouseenter="enter('5196741965171081542');" onmouseout="out('5196741965171081542');" style=""> 121          BorderKey key = sBorderKey;                                                                               </span>
<span class="-1796270064541479983" onmouseenter="enter('-1796270064541479983');" onmouseout="out('-1796270064541479983');" style=""> 122          key.vertical = vertical;                                                                                  </span>
<span class="-173090402769638904" onmouseenter="enter('-173090402769638904');" onmouseout="out('-173090402769638904');" style=""> 123          key.config = config;                                                                                      </span>
<span class="-2958410444098009294" onmouseenter="enter('-2958410444098009294');" onmouseout="out('-2958410444098009294');" style=""> 124          key.length = length;                                                                                      </span>
<span class="-7771012412001259062" onmouseenter="enter('-7771012412001259062');" onmouseout="out('-7771012412001259062');" style=""> 125          Bitmap bitmap = sBorderLines.get(key);                                                                    </span>
<span class="-1735832408094822956" onmouseenter="enter('-1735832408094822956');" onmouseout="out('-1735832408094822956');" style=""> 126          if (bitmap == null) {                                                                                     </span>
<span class="1646679160344185704" onmouseenter="enter('1646679160344185704');" onmouseout="out('1646679160344185704');" style=""> 127              bitmap = vertical                                                                                     </span>
<span class="-8767545810202353379" onmouseenter="enter('-8767545810202353379');" onmouseout="out('-8767545810202353379');" style=""> 128                      ? Bitmap.createBitmap(1, length, config)                                                      </span>
<span class="-252712256386533466" onmouseenter="enter('-252712256386533466');" onmouseout="out('-252712256386533466');" style=""> 129                      : Bitmap.createBitmap(length, 1, config);                                                     </span>
<span class="200036293659876844" onmouseenter="enter('200036293659876844');" onmouseout="out('200036293659876844');" style=""> 130              sBorderLines.put(key.clone(), bitmap);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131          }                                                                                                         </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 132          return bitmap;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133      }                                                                                                             </span>
<span  style=""> 134                                                                                                                    </span>
<span class="-2692570778449524647" onmouseenter="enter('-2692570778449524647');" onmouseout="out('-2692570778449524647');" style=""> 135      private Bitmap getBitmap() {                                                                                  </span>
<span class="-5405905934796296849" onmouseenter="enter('-5405905934796296849');" onmouseout="out('-5405905934796296849');" style=""> 136          if (mBitmap == null) {                                                                                    </span>
<span class="-5459018773845559989" onmouseenter="enter('-5459018773845559989');" onmouseout="out('-5459018773845559989');" style=""> 137              mBitmap = onGetBitmap();                                                                              </span>
<span class="-6589303999855443970" onmouseenter="enter('-6589303999855443970');" onmouseout="out('-6589303999855443970');" style=""> 138              int w = mBitmap.getWidth() + mBorder * 2;                                                             </span>
<span class="-7165598877762476360" onmouseenter="enter('-7165598877762476360');" onmouseout="out('-7165598877762476360');" style=""> 139              int h = mBitmap.getHeight() + mBorder * 2;                                                            </span>
<span class="-7602504072990906487" onmouseenter="enter('-7602504072990906487');" onmouseout="out('-7602504072990906487');" style=""> 140              if (mWidth == UNSPECIFIED) {                                                                          </span>
<span class="-1544377464552857573" onmouseenter="enter('-1544377464552857573');" onmouseout="out('-1544377464552857573');" style=""> 141                  setSize(w, h);                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 143          }                                                                                                         </span>
<span class="5567434894431635697" onmouseenter="enter('5567434894431635697');" onmouseout="out('5567434894431635697');" style=""> 144          return mBitmap;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145      }                                                                                                             </span>
<span  style=""> 146                                                                                                                    </span>
<span class="8465803167111788298" onmouseenter="enter('8465803167111788298');" onmouseout="out('8465803167111788298');" style=""> 147      private void freeBitmap() {                                                                                   </span>
<span class="-5062796063093214141" onmouseenter="enter('-5062796063093214141');" onmouseout="out('-5062796063093214141');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 148 -        Assert.assertTrue(mBitmap != null);                                                                       </span>
<span class="-9151544019057413325" onmouseenter="enter('-9151544019057413325');" onmouseout="out('-9151544019057413325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 149 +        Utils.assertTrue(mBitmap != null);                                                                        </span>
<span class="-2358947884683296262" onmouseenter="enter('-2358947884683296262');" onmouseout="out('-2358947884683296262');" style=""> 150          onFreeBitmap(mBitmap);                                                                                    </span>
<span class="932825469958765165" onmouseenter="enter('932825469958765165');" onmouseout="out('932825469958765165');" style=""> 151          mBitmap = null;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152      }                                                                                                             </span>
<span  style=""> 153                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154      @Override                                                                                                     </span>
<span class="3799141745189836170" onmouseenter="enter('3799141745189836170');" onmouseout="out('3799141745189836170');" style=""> 155      public int getWidth() {                                                                                       </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 156          if (mWidth == UNSPECIFIED) getBitmap();                                                                   </span>
<span class="2966597995474396527" onmouseenter="enter('2966597995474396527');" onmouseout="out('2966597995474396527');" style=""> 157          return mWidth;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158      }                                                                                                             </span>
<span  style=""> 159                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 160      @Override                                                                                                     </span>
<span class="2634124408072868895" onmouseenter="enter('2634124408072868895');" onmouseout="out('2634124408072868895');" style=""> 161      public int getHeight() {                                                                                      </span>
<span class="6667926962122453635" onmouseenter="enter('6667926962122453635');" onmouseout="out('6667926962122453635');" style=""> 162          if (mWidth == UNSPECIFIED) getBitmap();                                                                   </span>
<span class="-4444538114742899873" onmouseenter="enter('-4444538114742899873');" onmouseout="out('-4444538114742899873');" style=""> 163          return mHeight;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164      }                                                                                                             </span>
<span  style=""> 165                                                                                                                    </span>
<span class="-3215853744966742335" onmouseenter="enter('-3215853744966742335');" onmouseout="out('-3215853744966742335');" style=""> 166      protected abstract Bitmap onGetBitmap();                                                                      </span>
<span  style=""> 167                                                                                                                    </span>
<span class="-7203975694752350186" onmouseenter="enter('-7203975694752350186');" onmouseout="out('-7203975694752350186');" style=""> 168      protected abstract void onFreeBitmap(Bitmap bitmap);                                                          </span>
<span  style=""> 169                                                                                                                    </span>
<span class="-6398722967840097469" onmouseenter="enter('-6398722967840097469');" onmouseout="out('-6398722967840097469');" style=""> 170      protected void invalidateContent() {                                                                          </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 171          if (mBitmap != null) freeBitmap();                                                                        </span>
<span class="-1573566249444417035" onmouseenter="enter('-1573566249444417035');" onmouseout="out('-1573566249444417035');" style=""> 172          mContentValid = false;                                                                                    </span>
<span class="-3589557447567740047" onmouseenter="enter('-3589557447567740047');" onmouseout="out('-3589557447567740047');" style=""> 173          mWidth = UNSPECIFIED;                                                                                     </span>
<span class="-7337549455385624533" onmouseenter="enter('-7337549455385624533');" onmouseout="out('-7337549455385624533');" style=""> 174          mHeight = UNSPECIFIED;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175      }                                                                                                             </span>
<span  style=""> 176                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 177      /**                                                                                                           </span>
<span class="2557873334003452441" onmouseenter="enter('2557873334003452441');" onmouseout="out('2557873334003452441');" style=""> 178       * Whether the content on GPU is valid.                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 179       */                                                                                                           </span>
<span class="6328438622391273086" onmouseenter="enter('6328438622391273086');" onmouseout="out('6328438622391273086');" style=""> 180      public boolean isContentValid() {                                                                             </span>
<span class="-3769505508222807408" onmouseenter="enter('-3769505508222807408');" onmouseout="out('-3769505508222807408');" style=""> 181          return isLoaded() &amp;&amp; mContentValid;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182      }                                                                                                             </span>
<span  style=""> 183                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 184      /**                                                                                                           </span>
<span class="-6290967802937726177" onmouseenter="enter('-6290967802937726177');" onmouseout="out('-6290967802937726177');" style=""> 185       * Updates the content on GPU&#x27;s memory.                                                                       </span>
<span class="-4034470964912199066" onmouseenter="enter('-4034470964912199066');" onmouseout="out('-4034470964912199066');" style=""> 186       * @param canvas                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 187       */                                                                                                           </span>
<span class="108942350733869123" onmouseenter="enter('108942350733869123');" onmouseout="out('108942350733869123');" style=""> 188      public void updateContent(GLCanvas canvas) {                                                                  </span>
<span class="-3396881632730774927" onmouseenter="enter('-3396881632730774927');" onmouseout="out('-3396881632730774927');" style=""> 189          if (!isLoaded()) {                                                                                        </span>
<span class="-5184899736735963926" onmouseenter="enter('-5184899736735963926');" onmouseout="out('-5184899736735963926');" style=""> 190              if (mThrottled &amp;&amp; ++sUploadedCount &gt; UPLOAD_LIMIT) {                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 191                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192              }                                                                                                     </span>
<span class="8391051841668735947" onmouseenter="enter('8391051841668735947');" onmouseout="out('8391051841668735947');" style=""> 193              uploadToCanvas(canvas);                                                                               </span>
<span class="-567867839770461213" onmouseenter="enter('-567867839770461213');" onmouseout="out('-567867839770461213');" style=""> 194          } else if (!mContentValid) {                                                                              </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 195              Bitmap bitmap = getBitmap();                                                                          </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 196              int format = GLUtils.getInternalFormat(bitmap);                                                       </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 197              int type = GLUtils.getType(bitmap);                                                                   </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 198              canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                                   </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 199              freeBitmap();                                                                                         </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 200              mContentValid = true;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202      }                                                                                                             </span>
<span  style=""> 203                                                                                                                    </span>
<span class="-28900684726018511" onmouseenter="enter('-28900684726018511');" onmouseout="out('-28900684726018511');" style=""> 204      public static void resetUploadLimit() {                                                                       </span>
<span class="-7401770097083608137" onmouseenter="enter('-7401770097083608137');" onmouseout="out('-7401770097083608137');" style=""> 205          sUploadedCount = 0;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 206      }                                                                                                             </span>
<span  style=""> 207                                                                                                                    </span>
<span class="7293249883154619275" onmouseenter="enter('7293249883154619275');" onmouseout="out('7293249883154619275');" style=""> 208      public static boolean uploadLimitReached() {                                                                  </span>
<span class="5635858946898836387" onmouseenter="enter('5635858946898836387');" onmouseout="out('5635858946898836387');" style=""> 209          return sUploadedCount &gt; UPLOAD_LIMIT;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210      }                                                                                                             </span>
<span  style=""> 211                                                                                                                    </span>
<span class="5149211547862807755" onmouseenter="enter('5149211547862807755');" onmouseout="out('5149211547862807755');" style=""> 212      private void uploadToCanvas(GLCanvas canvas) {                                                                </span>
<span  style=""> 213                                                                                                                    </span>
<span class="8338233402694052368" onmouseenter="enter('8338233402694052368');" onmouseout="out('8338233402694052368');" style=""> 214          Bitmap bitmap = getBitmap();                                                                              </span>
<span class="8226127527421310456" onmouseenter="enter('8226127527421310456');" onmouseout="out('8226127527421310456');" style=""> 215          if (bitmap != null) {                                                                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 216              try {                                                                                                 </span>
<span class="3425854155123203990" onmouseenter="enter('3425854155123203990');" onmouseout="out('3425854155123203990');" style=""> 217                  int bWidth = bitmap.getWidth();                                                                   </span>
<span class="3370303073595965579" onmouseenter="enter('3370303073595965579');" onmouseout="out('3370303073595965579');" style=""> 218                  int bHeight = bitmap.getHeight();                                                                 </span>
<span class="-4265828418919251504" onmouseenter="enter('-4265828418919251504');" onmouseout="out('-4265828418919251504');" style=""> 219                  int width = bWidth + mBorder * 2;                                                                 </span>
<span class="5317611973642769478" onmouseenter="enter('5317611973642769478');" onmouseout="out('5317611973642769478');" style=""> 220                  int height = bHeight + mBorder * 2;                                                               </span>
<span class="-5063308770512493674" onmouseenter="enter('-5063308770512493674');" onmouseout="out('-5063308770512493674');" style=""> 221                  int texWidth = getTextureWidth();                                                                 </span>
<span class="8899121547547580578" onmouseenter="enter('8899121547547580578');" onmouseout="out('8899121547547580578');" style=""> 222                  int texHeight = getTextureHeight();                                                               </span>
<span  style=""> 223                                                                                                                    </span>
<span class="-1563057097152409297" onmouseenter="enter('-1563057097152409297');" onmouseout="out('-1563057097152409297');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 224 -                Assert.assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                                    </span>
<span class="6475196055478599892" onmouseenter="enter('6475196055478599892');" onmouseout="out('6475196055478599892');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +                assertTrue(bWidth &lt;= texWidth &amp;&amp; bHeight &lt;= texHeight);                                           </span>
<span  style=""> 226                                                                                                                    </span>
<span class="3646381769102905860" onmouseenter="enter('3646381769102905860');" onmouseout="out('3646381769102905860');" style=""> 227                  // Upload the bitmap to a new texture.                                                            </span>
<span class="-8657089773357603351" onmouseenter="enter('-8657089773357603351');" onmouseout="out('-8657089773357603351');" style=""> 228                  mId = canvas.getGLId().generateTexture();                                                         </span>
<span class="2565938783087565331" onmouseenter="enter('2565938783087565331');" onmouseout="out('2565938783087565331');" style=""> 229                  canvas.setTextureParameters(this);                                                                </span>
<span  style=""> 230                                                                                                                    </span>
<span class="3040185108073699348" onmouseenter="enter('3040185108073699348');" onmouseout="out('3040185108073699348');" style=""> 231                  if (bWidth == texWidth &amp;&amp; bHeight == texHeight) {                                                 </span>
<span class="1202596534630055245" onmouseenter="enter('1202596534630055245');" onmouseout="out('1202596534630055245');" style=""> 232                      canvas.initializeTexture(this, bitmap);                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 233                  } else {                                                                                          </span>
<span class="-8295263632184841362" onmouseenter="enter('-8295263632184841362');" onmouseout="out('-8295263632184841362');" style=""> 234                      int format = GLUtils.getInternalFormat(bitmap);                                               </span>
<span class="-6870816060970930034" onmouseenter="enter('-6870816060970930034');" onmouseout="out('-6870816060970930034');" style=""> 235                      int type = GLUtils.getType(bitmap);                                                           </span>
<span class="5256426249253321078" onmouseenter="enter('5256426249253321078');" onmouseout="out('5256426249253321078');" style=""> 236                      Config config = bitmap.getConfig();                                                           </span>
<span  style=""> 237                                                                                                                    </span>
<span class="1282008816208298685" onmouseenter="enter('1282008816208298685');" onmouseout="out('1282008816208298685');" style=""> 238                      canvas.initializeTextureSize(this, format, type);                                             </span>
<span class="-3016312004415767599" onmouseenter="enter('-3016312004415767599');" onmouseout="out('-3016312004415767599');" style=""> 239                      canvas.texSubImage2D(this, mBorder, mBorder, bitmap, format, type);                           </span>
<span  style=""> 240                                                                                                                    </span>
<span class="1888191076733751615" onmouseenter="enter('1888191076733751615');" onmouseout="out('1888191076733751615');" style=""> 241                      if (mBorder &gt; 0) {                                                                            </span>
<span class="-4226267341685301491" onmouseenter="enter('-4226267341685301491');" onmouseout="out('-4226267341685301491');" style=""> 242                          // Left border                                                                            </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 243                          Bitmap line = getBorderLine(true, config, texHeight);                                     </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 244                          canvas.texSubImage2D(this, 0, 0, line, format, type);                                     </span>
<span  style=""> 245                                                                                                                    </span>
<span class="7501484245398067844" onmouseenter="enter('7501484245398067844');" onmouseout="out('7501484245398067844');" style=""> 246                          // Top border                                                                             </span>
<span class="5027190896321362831" onmouseenter="enter('5027190896321362831');" onmouseout="out('5027190896321362831');" style=""> 247                          line = getBorderLine(false, config, texWidth);                                            </span>
<span class="3576542305014674088" onmouseenter="enter('3576542305014674088');" onmouseout="out('3576542305014674088');" style=""> 248                          canvas.texSubImage2D(this, 0, 0, line, format, type);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249                      }                                                                                             </span>
<span  style=""> 250                                                                                                                    </span>
<span class="-52038472791900899" onmouseenter="enter('-52038472791900899');" onmouseout="out('-52038472791900899');" style=""> 251                      // Right border                                                                               </span>
<span class="-3434651130222162078" onmouseenter="enter('-3434651130222162078');" onmouseout="out('-3434651130222162078');" style=""> 252                      if (mBorder + bWidth &lt; texWidth) {                                                            </span>
<span class="8620416339560404130" onmouseenter="enter('8620416339560404130');" onmouseout="out('8620416339560404130');" style=""> 253                          Bitmap line = getBorderLine(true, config, texHeight);                                     </span>
<span class="6981660014420851544" onmouseenter="enter('6981660014420851544');" onmouseout="out('6981660014420851544');" style=""> 254                          canvas.texSubImage2D(this, mBorder + bWidth, 0, line, format, type);                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255                      }                                                                                             </span>
<span  style=""> 256                                                                                                                    </span>
<span class="2714766977077527601" onmouseenter="enter('2714766977077527601');" onmouseout="out('2714766977077527601');" style=""> 257                      // Bottom border                                                                              </span>
<span class="2333404839235139340" onmouseenter="enter('2333404839235139340');" onmouseout="out('2333404839235139340');" style=""> 258                      if (mBorder + bHeight &lt; texHeight) {                                                          </span>
<span class="257259032112812569" onmouseenter="enter('257259032112812569');" onmouseout="out('257259032112812569');" style=""> 259                          Bitmap line = getBorderLine(false, config, texWidth);                                     </span>
<span class="9199030807067665260" onmouseenter="enter('9199030807067665260');" onmouseout="out('9199030807067665260');" style=""> 260                          canvas.texSubImage2D(this, 0, mBorder + bHeight, line, format, type);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 262                  }                                                                                                 </span>
<span class="9062373144943479618" onmouseenter="enter('9062373144943479618');" onmouseout="out('9062373144943479618');" style=""> 263              } finally {                                                                                           </span>
<span class="4912253706759124552" onmouseenter="enter('4912253706759124552');" onmouseout="out('4912253706759124552');" style=""> 264                  freeBitmap();                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265              }                                                                                                     </span>
<span class="5889338600343599383" onmouseenter="enter('5889338600343599383');" onmouseout="out('5889338600343599383');" style=""> 266              // Update texture state.                                                                              </span>
<span class="2185893898758781528" onmouseenter="enter('2185893898758781528');" onmouseout="out('2185893898758781528');" style=""> 267              setAssociatedCanvas(canvas);                                                                          </span>
<span class="5478128493396674048" onmouseenter="enter('5478128493396674048');" onmouseout="out('5478128493396674048');" style=""> 268              mState = STATE_LOADED;                                                                                </span>
<span class="-1760750376837727519" onmouseenter="enter('-1760750376837727519');" onmouseout="out('-1760750376837727519');" style=""> 269              mContentValid = true;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 270          } else {                                                                                                  </span>
<span class="2786766474863998839" onmouseenter="enter('2786766474863998839');" onmouseout="out('2786766474863998839');" style=""> 271              mState = STATE_ERROR;                                                                                 </span>
<span class="-2688280550612568095" onmouseenter="enter('-2688280550612568095');" onmouseout="out('-2688280550612568095');" style=""> 272              throw new RuntimeException(&quot;Texture load fail, no bitmap&quot;);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 276      @Override                                                                                                     </span>
<span class="-4954620433901163110" onmouseenter="enter('-4954620433901163110');" onmouseout="out('-4954620433901163110');" style=""> 277      protected boolean onBind(GLCanvas canvas) {                                                                   </span>
<span class="-4891675032704098609" onmouseenter="enter('-4891675032704098609');" onmouseout="out('-4891675032704098609');" style=""> 278          updateContent(canvas);                                                                                    </span>
<span class="3219878712675061157" onmouseenter="enter('3219878712675061157');" onmouseout="out('3219878712675061157');" style=""> 279          return isContentValid();                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280      }                                                                                                             </span>
<span  style=""> 281                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 282      @Override                                                                                                     </span>
<span class="6946518658455796177" onmouseenter="enter('6946518658455796177');" onmouseout="out('6946518658455796177');" style=""> 283      protected int getTarget() {                                                                                   </span>
<span class="62156321300267489" onmouseenter="enter('62156321300267489');" onmouseout="out('62156321300267489');" style=""> 284          return GL11.GL_TEXTURE_2D;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285      }                                                                                                             </span>
<span  style=""> 286                                                                                                                    </span>
<span class="2841696712734050288" onmouseenter="enter('2841696712734050288');" onmouseout="out('2841696712734050288');" style=""> 287      public void setOpaque(boolean isOpaque) {                                                                     </span>
<span class="4102597972225673156" onmouseenter="enter('4102597972225673156');" onmouseout="out('4102597972225673156');" style=""> 288          mOpaque = isOpaque;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289      }                                                                                                             </span>
<span  style=""> 290                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 291      @Override                                                                                                     </span>
<span class="8858632504335809401" onmouseenter="enter('8858632504335809401');" onmouseout="out('8858632504335809401');" style=""> 292      public boolean isOpaque() {                                                                                   </span>
<span class="2284580524710389337" onmouseenter="enter('2284580524710389337');" onmouseout="out('2284580524710389337');" style=""> 293          return mOpaque;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294      }                                                                                                             </span>
<span  style=""> 295                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 296      @Override                                                                                                     </span>
<span class="-3023643959588162463" onmouseenter="enter('-3023643959588162463');" onmouseout="out('-3023643959588162463');" style=""> 297      public void recycle() {                                                                                       </span>
<span class="5945087735450719148" onmouseenter="enter('5945087735450719148');" onmouseout="out('5945087735450719148');" style=""> 298          super.recycle();                                                                                          </span>
<span class="8364050789145269573" onmouseenter="enter('8364050789145269573');" onmouseout="out('8364050789145269573');" style=""> 299          if (mBitmap != null) freeBitmap();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            