<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>21</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    21
                    <a href="20.html">prev</a>
                    <a href="22.html">next</a>
                    <a href="21_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_8b322176d173963e95d6a7c9ebd71ad61de5b0d9_app/src/main/java/com/arialyy/simple/download/SingleTaskActivity.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;8b322176d173963e95d6a7c9ebd71ad61de5b0d9:app/src/main/java/com/arialyy/simple/download/SingleTaskActivity.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;8b322176d173963e95d6a7c9ebd71ad61de5b0d9^1:app/src/main/java/com/arialyy/simple/download/SingleTaskActivity.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;8b322176d173963e95d6a7c9ebd71ad61de5b0d9^2:app/src/main/java/com/arialyy/simple/download/SingleTaskActivity.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ed4c2c4b6f60c354806b8a6f8f1c0665dc4c4e6c:app/src/main/java/com/arialyy/simple/download/SingleTaskActivity.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[sbj]], subset: [[sbj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 
  17 package com.arialyy.simple.download;
  18 
  19 import android.os.Bundle;
  20 import android.os.Environment;
  21 import android.util.Log;
  22 import android.view.Menu;
  23 import android.view.MenuItem;
  24 import android.view.View;
  25 import android.widget.Button;
  26 import android.widget.RadioGroup;
  27 import android.widget.Toast;
  28 import butterknife.Bind;
  29 import com.arialyy.annotations.Download;
  30 import com.arialyy.annotations.DownloadGroup;
  31 import com.arialyy.aria.core.Aria;
  32 import com.arialyy.aria.core.common.RequestEnum;
  33 import com.arialyy.aria.core.download.DownloadEntity;
  34 import com.arialyy.aria.core.download.DownloadGroupTask;
  35 import com.arialyy.aria.core.download.DownloadTarget;
  36 import com.arialyy.aria.core.download.DownloadTask;
  37 import com.arialyy.aria.core.inf.IEntity;
  38 import com.arialyy.aria.util.ALog;
  39 import com.arialyy.aria.util.CommonUtil;
  40 import com.arialyy.frame.util.show.L;
  41 import com.arialyy.frame.util.show.T;
  42 import com.arialyy.simple.R;
  43 import com.arialyy.simple.base.BaseActivity;
  44 import com.arialyy.simple.databinding.ActivitySingleBinding;
  45 import java.io.File;
  46 
  47 public class SingleTaskActivity extends BaseActivity&lt;ActivitySingleBinding&gt; {
  48 
  49   private static final String DOWNLOAD_URL =
  50       //&quot;http://kotlinlang.org/docs/kotlin-docs.pdf&quot;;
  51       //&quot;https://atom-installer.github.com/v1.13.0/AtomSetup.exe?s=1484074138&amp;ext=.exe&quot;;
  52       //&quot;http://static.gaoshouyou.com/d/22/94/822260b849944492caadd2983f9bb624.apk&quot;;
  53       //&quot;http://sitcac.daxincf.cn/wp-content/uploads/swift_vido/01/element.mp4_1&quot;;
<abbr title="  54   //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=20170819185541.avi&quot;;">  54   //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=2017081918554ğŸ”µ</abbr>
  55   //&quot;http://down2.xiaoshuofuwuqi.com/d/file/filetxt/20170608/14/%BA%DA%CE%D7%CA%A6%E1%C8%C6%F0.txt&quot;;
  56   //&quot;http://tinghuaapp.oss-cn-shanghai.aliyuncs.com/20170612201739607815&quot;;
  57   //&quot;http://static.gaoshouyou.com/d/36/69/2d3699acfa69e9632262442c46516ad8.apk&quot;;
  58   //&quot;http://oqcpqqvuf.bkt.clouddn.com/ceshi.txt&quot;;
<abbr title="  59   //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neuralprisma-2.5.2.174-2000174_1494784835.apk?f=web_1&quot;;">  59   //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/ğŸ”µ</abbr>
  60   //ä¸æ”¯æŒæ–­ç‚¹çš„é“¾æ¥
  61   //&quot;http://ox.konsung.net:5555/ksdc-web/download/downloadFile/?fileName=ksdc_1.0.2.apk&amp;rRange=0-&quot;;
  62 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  63   &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
  64 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65   //&quot;http://172.18.104.50:8080/download/_302turn&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66   &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67   //&quot;http://172.21.1.99:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68   @Bind(R.id.start) Button mStart;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  69   @Bind(R.id.stop) Button mStop;</span>
  70 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71   //&quot;http://172.18.104.50:8080/download/_302turn&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72   //&quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73   //&quot;http://shouji.360tpcdn.com/160824/2c0407dbab4a86c7a84fa7340b9969e7/block.app.wars_30.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  74   &quot;http://172.21.1.72:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>
  75 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  76   @Bind(R.id.start) Button mStart;
  77   @Bind(R.id.stop) Button mStop;
  78   @Bind(R.id.cancel) Button mCancel;
  79   @Bind(R.id.speeds) RadioGroup mRg;
  80 
  81   @Override protected void onCreate(Bundle savedInstanceState) {
  82     super.onCreate(savedInstanceState);
  83     Aria.download(this).register();
  84   }
  85 
  86   /**
  87    * è®¾ç½®start å’Œ stop æŒ‰é’®çŠ¶æ€
  88    */
  89   private void setBtState(boolean state) {
  90     mStart.setEnabled(state);
  91     mStop.setEnabled(!state);
  92   }
  93 
  94   @Override public boolean onCreateOptionsMenu(Menu menu) {
  95     getMenuInflater().inflate(R.menu.menu_single_task_activity, menu);
  96     return super.onCreateOptionsMenu(menu);
  97   }
  98 
  99   @Override public boolean onMenuItemClick(MenuItem item) {
 100     double speed = -1;
 101     String msg = &quot;&quot;;
 102     switch (item.getItemId()) {
 103       case R.id.help:
 104         msg = &quot;ä¸€äº›å°çŸ¥è¯†ç‚¹ï¼š\n&quot;
 105             + &quot;1ã€ä½ å¯ä»¥åœ¨æ³¨è§£ä¸­å¢åŠ é“¾æ¥ï¼Œç”¨äºæŒ‡å®šè¢«æ³¨è§£çš„æ–¹æ³•åªèƒ½è¢«ç‰¹å®šçš„ä¸‹è½½ä»»åŠ¡å›è°ƒï¼Œä»¥é˜²æ­¢progressä¹±è·³\n&quot;
 106             + &quot;2ã€å½“é‡åˆ°ç½‘ç»œæ…¢çš„æƒ…å†µæ—¶ï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨onPre()æ›´æ–°UIç•Œé¢ï¼Œå¾…è¿æ¥æˆåŠŸæ—¶ï¼Œå†åœ¨onTaskPre()è·å–å®Œæ•´çš„taskæ•°æ®ï¼Œç„¶åç»™UIç•Œé¢è®¾ç½®æ­£ç¡®çš„æ•°æ®\n&quot;
 107             + &quot;3ã€ä½ å¯ä»¥åœ¨ç•Œé¢åˆå§‹åŒ–æ—¶é€šè¿‡Aria.download(this).load(URL).getPercent()ç­‰æ–¹æ³•å¿«é€Ÿè·å–ç›¸å…³ä»»åŠ¡çš„ä¸€äº›æ•°æ®&quot;;
 108         showMsgDialog(&quot;tip&quot;, msg);
 109         break;
 110       case R.id.speed_0:
 111         speed = 0.0;
 112         break;
 113       case R.id.speed_128:
 114         speed = 128.0;
 115         break;
 116       case R.id.speed_256:
 117         speed = 256.0;
 118         break;
 119       case R.id.speed_512:
 120         speed = 512.0;
 121         break;
 122       case R.id.speed_1m:
 123         speed = 1024.0;
 124         break;
 125     }
 126     if (speed &gt; -1) {
 127       msg = item.getTitle().toString();
 128       Aria.download(this).setMaxSpeed(speed);
 129       T.showShort(this, msg);
 130     }
 131     return true;
 132   }
 133 
 134   @Download.onPre protected void onPre(DownloadTask task) {
 135     setBtState(false);
 136   }
 137 
 138   @Download.onTaskStart void taskStart(DownloadTask task) {
 139     getBinding().setFileSize(task.getConvertFileSize());
 140   }
 141 
 142   @Download.onTaskRunning protected void running(DownloadTask task) {
 143 
 144     long len = task.getFileSize();
 145     if (len == 0) {
 146       getBinding().setProgress(0);
 147     } else {
 148       getBinding().setProgress(task.getPercent());
 149     }
 150     getBinding().setSpeed(task.getConvertSpeed());
 151   }
 152 
 153   @Download.onTaskResume void taskResume(DownloadTask task) {
 154     mStart.setText(&quot;æš‚åœ&quot;);
 155     setBtState(false);
 156   }
 157 
 158   @Download.onTaskStop void taskStop(DownloadTask task) {
 159     mStart.setText(&quot;æ¢å¤&quot;);
 160     setBtState(true);
 161     getBinding().setSpeed(&quot;&quot;);
 162   }
 163 
 164   @Download.onTaskCancel void taskCancel(DownloadTask task) {
 165     getBinding().setProgress(0);
 166     Toast.makeText(SingleTaskActivity.this, &quot;å–æ¶ˆä¸‹è½½&quot;, Toast.LENGTH_SHORT).show();
 167     mStart.setText(&quot;å¼€å§‹&quot;);
 168     setBtState(true);
 169     getBinding().setSpeed(&quot;&quot;);
 170   }
 171 
 172   @Download.onTaskFail void taskFail(DownloadTask task) {
 173     Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å¤±è´¥&quot;, Toast.LENGTH_SHORT).show();
 174     setBtState(true);
 175   }
 176 
 177   @Download.onTaskComplete void taskComplete(DownloadTask task) {
 178     getBinding().setProgress(100);
 179     Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å®Œæˆ&quot;, Toast.LENGTH_SHORT).show();
 180     mStart.setText(&quot;é‡æ–°å¼€å§‹ï¼Ÿ&quot;);
 181     mCancel.setEnabled(false);
 182     setBtState(true);
 183     getBinding().setSpeed(&quot;&quot;);
 184     L.d(TAG, &quot;md5Code ==&gt; &quot; + CommonUtil.getFileMD5(new File(task.getDownloadPath())));
 185     L.d(TAG, &quot;data ==&gt; &quot; + Aria.download(this).getDownloadEntity(DOWNLOAD_URL));
 186   }
 187 
 188   @Download.onNoSupportBreakPoint
 189   public void onNoSupportBreakPoint(DownloadTask task) {
 190     T.showShort(SingleTaskActivity.this, &quot;è¯¥ä¸‹è½½é“¾æ¥ä¸æ”¯æŒæ–­ç‚¹&quot;);
 191   }
 192 
 193   @Override protected int setLayoutId() {
 194     return R.layout.activity_single;
 195   }
 196 
 197   @Override protected void init(Bundle savedInstanceState) {
 198     super.init(savedInstanceState);
 199     setTitle(&quot;å•ä»»åŠ¡ä¸‹è½½&quot;);
 200     DownloadTarget target = Aria.download(this).load(DOWNLOAD_URL);
 201     getBinding().setProgress(target.getPercent());
 202     if (target.getTaskState() == IEntity.STATE_STOP) {
 203       mStart.setText(&quot;æ¢å¤&quot;);
 204       mStart.setTextColor(getResources().getColor(android.R.color.holo_blue_light));
 205       setBtState(true);
 206     } else if (target.isDownloading()) {
 207       setBtState(false);
 208     }
 209     getBinding().setFileSize(target.getConvertFileSize());
 210   }
 211 
 212   public void onClick(View view) {
 213     switch (view.getId()) {
 214       case R.id.start:
 215         startD();
 216         break;
 217       case R.id.stop:
 218         Aria.download(this).load(DOWNLOAD_URL).stop();
 219         //Aria.download(this).load(DOWNLOAD_URL).removeRecord();
 220         break;
 221       case R.id.cancel:
 222         Aria.download(this).load(DOWNLOAD_URL).cancel();
 223         break;
 224     }
 225   }
 226 
 227   private void startD(){
 228     //Aria.get(this).setLogLevel(ALog.LOG_CLOSE);
 229     //Aria.download(this).load(&quot;aaaa.apk&quot;);
 230     Aria.download(SingleTaskActivity.this)
 231         .load(DOWNLOAD_URL)
 232         .addHeader(&quot;groupName&quot;, &quot;value&quot;)
 233         .setRequestMode(RequestEnum.POST)
 234         .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/hhhhhhhh.apk&quot;)
 235         .start();
 236   }
 237 
 238   @Override protected void onDestroy() {
 239     super.onDestroy();
 240     Aria.download(this).unRegister();
 241   }
 242 }</pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 
  17 package com.arialyy.simple.download;
  18 
  19 import android.os.Bundle;
  20 import android.os.Environment;
  21 import android.util.Log;
  22 import android.view.Menu;
  23 import android.view.MenuItem;
  24 import android.view.View;
  25 import android.widget.Button;
  26 import android.widget.RadioGroup;
  27 import android.widget.Toast;
  28 import butterknife.Bind;
  29 import com.arialyy.annotations.Download;
  30 import com.arialyy.annotations.DownloadGroup;
  31 import com.arialyy.aria.core.Aria;
  32 import com.arialyy.aria.core.common.RequestEnum;
  33 import com.arialyy.aria.core.download.DownloadEntity;
  34 import com.arialyy.aria.core.download.DownloadGroupTask;
  35 import com.arialyy.aria.core.download.DownloadTarget;
  36 import com.arialyy.aria.core.download.DownloadTask;
  37 import com.arialyy.aria.core.inf.IEntity;
  38 import com.arialyy.aria.util.ALog;
  39 import com.arialyy.aria.util.CommonUtil;
  40 import com.arialyy.frame.util.show.L;
  41 import com.arialyy.frame.util.show.T;
  42 import com.arialyy.simple.R;
  43 import com.arialyy.simple.base.BaseActivity;
  44 import com.arialyy.simple.databinding.ActivitySingleBinding;
  45 import java.io.File;
  46 
  47 public class SingleTaskActivity extends BaseActivity&lt;ActivitySingleBinding&gt; {
  48 
  49   private static final String DOWNLOAD_URL =
  50       //&quot;http://kotlinlang.org/docs/kotlin-docs.pdf&quot;;
  51       //&quot;https://atom-installer.github.com/v1.13.0/AtomSetup.exe?s=1484074138&amp;ext=.exe&quot;;
  52       //&quot;http://static.gaoshouyou.com/d/22/94/822260b849944492caadd2983f9bb624.apk&quot;;
  53       //&quot;http://sitcac.daxincf.cn/wp-content/uploads/swift_vido/01/element.mp4_1&quot;;
<abbr title="  54   //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=20170819185541.avi&quot;;">  54   //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=2017081918554ğŸ”µ</abbr>
  55   //&quot;http://down2.xiaoshuofuwuqi.com/d/file/filetxt/20170608/14/%BA%DA%CE%D7%CA%A6%E1%C8%C6%F0.txt&quot;;
  56   //&quot;http://tinghuaapp.oss-cn-shanghai.aliyuncs.com/20170612201739607815&quot;;
  57   //&quot;http://static.gaoshouyou.com/d/36/69/2d3699acfa69e9632262442c46516ad8.apk&quot;;
  58   //&quot;http://oqcpqqvuf.bkt.clouddn.com/ceshi.txt&quot;;
<abbr title="  59   //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neuralprisma-2.5.2.174-2000174_1494784835.apk?f=web_1&quot;;">  59   //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/ğŸ”µ</abbr>
  60   //ä¸æ”¯æŒæ–­ç‚¹çš„é“¾æ¥
  61   //&quot;http://ox.konsung.net:5555/ksdc-web/download/downloadFile/?fileName=ksdc_1.0.2.apk&amp;rRange=0-&quot;;
  62 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  63   &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
  64 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  65   //&quot;http://172.18.104.50:8080/download/_302turn&quot;;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  66   &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
  67 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68   //&quot;http://172.18.104.50:8080/download/_302turn&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  69   //&quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70   //&quot;http://shouji.360tpcdn.com/160824/2c0407dbab4a86c7a84fa7340b9969e7/block.app.wars_30.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71   &quot;http://172.21.1.72:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>
  72 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
  73 
  74   @Bind(R.id.start) Button mStart;
  75   @Bind(R.id.stop) Button mStop;
  76   @Bind(R.id.cancel) Button mCancel;
  77   @Bind(R.id.speeds) RadioGroup mRg;
  78 
  79   @Override protected void onCreate(Bundle savedInstanceState) {
  80     super.onCreate(savedInstanceState);
  81     Aria.download(this).register();
  82   }
  83 
  84   /**
  85    * è®¾ç½®start å’Œ stop æŒ‰é’®çŠ¶æ€
  86    */
  87   private void setBtState(boolean state) {
  88     mStart.setEnabled(state);
  89     mStop.setEnabled(!state);
  90   }
  91 
  92   @Override public boolean onCreateOptionsMenu(Menu menu) {
  93     getMenuInflater().inflate(R.menu.menu_single_task_activity, menu);
  94     return super.onCreateOptionsMenu(menu);
  95   }
  96 
  97   @Override public boolean onMenuItemClick(MenuItem item) {
  98     double speed = -1;
  99     String msg = &quot;&quot;;
 100     switch (item.getItemId()) {
 101       case R.id.help:
 102         msg = &quot;ä¸€äº›å°çŸ¥è¯†ç‚¹ï¼š\n&quot;
 103             + &quot;1ã€ä½ å¯ä»¥åœ¨æ³¨è§£ä¸­å¢åŠ é“¾æ¥ï¼Œç”¨äºæŒ‡å®šè¢«æ³¨è§£çš„æ–¹æ³•åªèƒ½è¢«ç‰¹å®šçš„ä¸‹è½½ä»»åŠ¡å›è°ƒï¼Œä»¥é˜²æ­¢progressä¹±è·³\n&quot;
 104             + &quot;2ã€å½“é‡åˆ°ç½‘ç»œæ…¢çš„æƒ…å†µæ—¶ï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨onPre()æ›´æ–°UIç•Œé¢ï¼Œå¾…è¿æ¥æˆåŠŸæ—¶ï¼Œå†åœ¨onTaskPre()è·å–å®Œæ•´çš„taskæ•°æ®ï¼Œç„¶åç»™UIç•Œé¢è®¾ç½®æ­£ç¡®çš„æ•°æ®\n&quot;
 105             + &quot;3ã€ä½ å¯ä»¥åœ¨ç•Œé¢åˆå§‹åŒ–æ—¶é€šè¿‡Aria.download(this).load(URL).getPercent()ç­‰æ–¹æ³•å¿«é€Ÿè·å–ç›¸å…³ä»»åŠ¡çš„ä¸€äº›æ•°æ®&quot;;
 106         showMsgDialog(&quot;tip&quot;, msg);
 107         break;
 108       case R.id.speed_0:
 109         speed = 0.0;
 110         break;
 111       case R.id.speed_128:
 112         speed = 128.0;
 113         break;
 114       case R.id.speed_256:
 115         speed = 256.0;
 116         break;
 117       case R.id.speed_512:
 118         speed = 512.0;
 119         break;
 120       case R.id.speed_1m:
 121         speed = 1024.0;
 122         break;
 123     }
 124     if (speed &gt; -1) {
 125       msg = item.getTitle().toString();
 126       Aria.download(this).setMaxSpeed(speed);
 127       T.showShort(this, msg);
 128     }
 129     return true;
 130   }
 131 
 132   @Download.onPre protected void onPre(DownloadTask task) {
 133     setBtState(false);
 134   }
 135 
 136   @Download.onTaskStart void taskStart(DownloadTask task) {
 137     getBinding().setFileSize(task.getConvertFileSize());
 138   }
 139 
 140   @Download.onTaskRunning protected void running(DownloadTask task) {
 141 
 142     long len = task.getFileSize();
 143     if (len == 0) {
 144       getBinding().setProgress(0);
 145     } else {
 146       getBinding().setProgress(task.getPercent());
 147     }
 148     getBinding().setSpeed(task.getConvertSpeed());
 149   }
 150 
 151   @Download.onTaskResume void taskResume(DownloadTask task) {
 152     mStart.setText(&quot;æš‚åœ&quot;);
 153     setBtState(false);
 154   }
 155 
 156   @Download.onTaskStop void taskStop(DownloadTask task) {
 157     mStart.setText(&quot;æ¢å¤&quot;);
 158     setBtState(true);
 159     getBinding().setSpeed(&quot;&quot;);
 160   }
 161 
 162   @Download.onTaskCancel void taskCancel(DownloadTask task) {
 163     getBinding().setProgress(0);
 164     Toast.makeText(SingleTaskActivity.this, &quot;å–æ¶ˆä¸‹è½½&quot;, Toast.LENGTH_SHORT).show();
 165     mStart.setText(&quot;å¼€å§‹&quot;);
 166     setBtState(true);
 167     getBinding().setSpeed(&quot;&quot;);
 168   }
 169 
 170   @Download.onTaskFail void taskFail(DownloadTask task) {
 171     Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å¤±è´¥&quot;, Toast.LENGTH_SHORT).show();
 172     setBtState(true);
 173   }
 174 
 175   @Download.onTaskComplete void taskComplete(DownloadTask task) {
 176     getBinding().setProgress(100);
 177     Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å®Œæˆ&quot;, Toast.LENGTH_SHORT).show();
 178     mStart.setText(&quot;é‡æ–°å¼€å§‹ï¼Ÿ&quot;);
 179     mCancel.setEnabled(false);
 180     setBtState(true);
 181     getBinding().setSpeed(&quot;&quot;);
 182     L.d(TAG, &quot;md5Code ==&gt; &quot; + CommonUtil.getFileMD5(new File(task.getDownloadPath())));
 183     L.d(TAG, &quot;data ==&gt; &quot; + Aria.download(this).getDownloadEntity(DOWNLOAD_URL));
 184   }
 185 
 186   @Download.onNoSupportBreakPoint
 187   public void onNoSupportBreakPoint(DownloadTask task) {
 188     T.showShort(SingleTaskActivity.this, &quot;è¯¥ä¸‹è½½é“¾æ¥ä¸æ”¯æŒæ–­ç‚¹&quot;);
 189   }
 190 
 191   @Override protected int setLayoutId() {
 192     return R.layout.activity_single;
 193   }
 194 
 195   @Override protected void init(Bundle savedInstanceState) {
 196     super.init(savedInstanceState);
 197     setTitle(&quot;å•ä»»åŠ¡ä¸‹è½½&quot;);
 198     DownloadTarget target = Aria.download(this).load(DOWNLOAD_URL);
 199     getBinding().setProgress(target.getPercent());
 200     if (target.getTaskState() == IEntity.STATE_STOP) {
 201       mStart.setText(&quot;æ¢å¤&quot;);
 202       mStart.setTextColor(getResources().getColor(android.R.color.holo_blue_light));
 203       setBtState(true);
 204     } else if (target.isDownloading()) {
 205       setBtState(false);
 206     }
 207     getBinding().setFileSize(target.getConvertFileSize());
 208   }
 209 
 210   public void onClick(View view) {
 211     switch (view.getId()) {
 212       case R.id.start:
 213         startD();
 214         break;
 215       case R.id.stop:
 216         Aria.download(this).load(DOWNLOAD_URL).stop();
 217         //Aria.download(this).load(DOWNLOAD_URL).removeRecord();
 218         break;
 219       case R.id.cancel:
 220         Aria.download(this).load(DOWNLOAD_URL).cancel();
 221         break;
 222     }
 223   }
 224 
 225   private void startD(){
 226     //Aria.get(this).setLogLevel(ALog.LOG_CLOSE);
 227     //Aria.download(this).load(&quot;aaaa.apk&quot;);
 228     Aria.download(SingleTaskActivity.this)
 229         .load(DOWNLOAD_URL)
 230         .addHeader(&quot;groupName&quot;, &quot;value&quot;)
 231         .setRequestMode(RequestEnum.POST)
 232         .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/hhhhhhhh.apk&quot;)
 233         .start();
 234   }
 235 
 236   @Override protected void onDestroy() {
 237     super.onDestroy();
 238     Aria.download(this).unRegister();
 239   }
 240 }
 </pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.simple.download;
  17 
  18 import android.os.Bundle;
  19 import android.os.Environment;
  20 import android.util.Log;
  21 import android.view.Menu;
  22 import android.view.MenuItem;
  23 import android.view.View;
  24 import android.widget.Button;
  25 import android.widget.RadioGroup;
  26 import android.widget.Toast;
  27 import butterknife.Bind;
  28 import com.arialyy.annotations.Download;
  29 import com.arialyy.annotations.DownloadGroup;
  30 import com.arialyy.aria.core.Aria;
  31 import com.arialyy.aria.core.common.RequestEnum;
  32 import com.arialyy.aria.core.download.DownloadEntity;
  33 import com.arialyy.aria.core.download.DownloadGroupTask;
  34 import com.arialyy.aria.core.download.DownloadTarget;
  35 import com.arialyy.aria.core.download.DownloadTask;
  36 import com.arialyy.aria.core.inf.IEntity;
  37 import com.arialyy.aria.util.ALog;
  38 import com.arialyy.aria.util.CommonUtil;
  39 import com.arialyy.frame.util.show.L;
  40 import com.arialyy.frame.util.show.T;
  41 import com.arialyy.simple.R;
  42 import com.arialyy.simple.base.BaseActivity;
  43 import com.arialyy.simple.databinding.ActivitySingleBinding;
  44 import java.io.File;
  45 
  46 
  47 public class SingleTaskActivity extends BaseActivity&lt;ActivitySingleBinding&gt; {
  48   private static final String DOWNLOAD_URL =
  49       //&quot;http://kotlinlang.org/docs/kotlin-docs.pdf&quot;;
  50       //&quot;https://atom-installer.github.com/v1.13.0/AtomSetup.exe?s=1484074138&amp;ext=.exe&quot;;
  51       //&quot;http://static.gaoshouyou.com/d/22/94/822260b849944492caadd2983f9bb624.apk&quot;;
  52       //&quot;http://sitcac.daxincf.cn/wp-content/uploads/swift_vido/01/element.mp4_1&quot;;
<abbr title="  53   //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=20170819185541.avi&quot;;">  53   //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=2017081918554ğŸ”µ</abbr>
  54   //&quot;http://down2.xiaoshuofuwuqi.com/d/file/filetxt/20170608/14/%BA%DA%CE%D7%CA%A6%E1%C8%C6%F0.txt&quot;;
  55   //&quot;http://tinghuaapp.oss-cn-shanghai.aliyuncs.com/20170612201739607815&quot;;
  56   //&quot;http://static.gaoshouyou.com/d/36/69/2d3699acfa69e9632262442c46516ad8.apk&quot;;
  57   //&quot;http://oqcpqqvuf.bkt.clouddn.com/ceshi.txt&quot;;
<abbr title="  58   //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neuralprisma-2.5.2.174-2000174_1494784835.apk?f=web_1&quot;;">  58   //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/ğŸ”µ</abbr>
  59   //ä¸æ”¯æŒæ–­ç‚¹çš„é“¾æ¥
  60   //&quot;http://ox.konsung.net:5555/ksdc-web/download/downloadFile/?fileName=ksdc_1.0.2.apk&amp;rRange=0-&quot;;
  61 
  62 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  63   &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  64 </span>
  65 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  66 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  66 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwğŸ”µ</abbr></span>
  67 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  68 </span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  69   //&quot;http://172.18.104.50:8080/download/_302turn&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70   //&quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71   //&quot;http://shouji.360tpcdn.com/160824/2c0407dbab4a86c7a84fa7340b9969e7/block.app.wars_30.apk&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72   &quot;http://172.21.1.72:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73 </span>
  74 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT
  75 
  76   @Bind(R.id.start)
  77   Button mStart;
  78 
  79   @Bind(R.id.stop) Button mStop;
  80 
  81   @Bind(R.id.cancel) Button mCancel;
  82 
  83   @Bind(R.id.speeds) RadioGroup mRg;
  84 
  85   @Override protected void onCreate(Bundle savedInstanceState) {
  86     super.onCreate(savedInstanceState);
  87     Aria.download(this).register();
  88   }
  89 
  90   /**
  91    * è®¾ç½®start å’Œ stop æŒ‰é’®çŠ¶æ€
  92    */
  93   private void setBtState(boolean state) {
  94     mStart.setEnabled(state);
  95     mStop.setEnabled(!state);
  96   }
  97 
  98   @Override public boolean onCreateOptionsMenu(Menu menu) {
  99     getMenuInflater().inflate(R.menu.menu_single_task_activity, menu);
 100     return super.onCreateOptionsMenu(menu);
 101   }
 102 
 103   @Override public boolean onMenuItemClick(MenuItem item) {
 104     double speed = -1;
 105     String msg = &quot;&quot;;
 106     switch (item.getItemId()) {
 107       case R.id.help:
 108         msg = &quot;ä¸€äº›å°çŸ¥è¯†ç‚¹ï¼š\n&quot;
 109             + &quot;1ã€ä½ å¯ä»¥åœ¨æ³¨è§£ä¸­å¢åŠ é“¾æ¥ï¼Œç”¨äºæŒ‡å®šè¢«æ³¨è§£çš„æ–¹æ³•åªèƒ½è¢«ç‰¹å®šçš„ä¸‹è½½ä»»åŠ¡å›è°ƒï¼Œä»¥é˜²æ­¢progressä¹±è·³\n&quot;
 110             + &quot;2ã€å½“é‡åˆ°ç½‘ç»œæ…¢çš„æƒ…å†µæ—¶ï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨onPre()æ›´æ–°UIç•Œé¢ï¼Œå¾…è¿æ¥æˆåŠŸæ—¶ï¼Œå†åœ¨onTaskPre()è·å–å®Œæ•´çš„taskæ•°æ®ï¼Œç„¶åç»™UIç•Œé¢è®¾ç½®æ­£ç¡®çš„æ•°æ®\n&quot;
 111             + &quot;3ã€ä½ å¯ä»¥åœ¨ç•Œé¢åˆå§‹åŒ–æ—¶é€šè¿‡Aria.download(this).load(URL).getPercent()ç­‰æ–¹æ³•å¿«é€Ÿè·å–ç›¸å…³ä»»åŠ¡çš„ä¸€äº›æ•°æ®&quot;;
 112         showMsgDialog(&quot;tip&quot;, msg);
 113         break;
 114       case R.id.speed_0:
 115         speed = 0.0;
 116         break;
 117       case R.id.speed_128:
 118         speed = 128.0;
 119         break;
 120       case R.id.speed_256:
 121         speed = 256.0;
 122         break;
 123       case R.id.speed_512:
 124         speed = 512.0;
 125         break;
 126       case R.id.speed_1m:
 127         speed = 1024.0;
 128         break;
 129     }
 130     if (speed &gt; -1) {
 131       msg = item.getTitle().toString();
 132       Aria.download(this).setMaxSpeed(speed);
 133       T.showShort(this, msg);
 134     }
 135     return true;
 136   }
 137 
 138   @Download.onPre protected void onPre(DownloadTask task) {
 139     setBtState(false);
 140   }
 141 
 142   @Download.onTaskStart void taskStart(DownloadTask task) {
 143     getBinding().setFileSize(task.getConvertFileSize());
 144   }
 145 
 146   @Download.onTaskRunning protected void running(DownloadTask task) {
 147 
 148     long len = task.getFileSize();
 149     if (len == 0) {
 150       getBinding().setProgress(0);
 151     } else {
 152       getBinding().setProgress(task.getPercent());
 153     }
 154     getBinding().setSpeed(task.getConvertSpeed());
 155   }
 156 
 157   @Download.onTaskResume void taskResume(DownloadTask task) {
 158     mStart.setText(&quot;æš‚åœ&quot;);
 159     setBtState(false);
 160   }
 161 
 162   @Download.onTaskStop void taskStop(DownloadTask task) {
 163     mStart.setText(&quot;æ¢å¤&quot;);
 164     setBtState(true);
 165     getBinding().setSpeed(&quot;&quot;);
 166   }
 167 
 168   @Download.onTaskCancel void taskCancel(DownloadTask task) {
 169     getBinding().setProgress(0);
 170     Toast.makeText(SingleTaskActivity.this, &quot;å–æ¶ˆä¸‹è½½&quot;, Toast.LENGTH_SHORT).show();
 171     mStart.setText(&quot;å¼€å§‹&quot;);
 172     setBtState(true);
 173     getBinding().setSpeed(&quot;&quot;);
 174   }
 175 
 176   @Download.onTaskFail void taskFail(DownloadTask task) {
 177     Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å¤±è´¥&quot;, Toast.LENGTH_SHORT).show();
 178     setBtState(true);
 179   }
 180 
 181   @Download.onTaskComplete
 182   void taskComplete(DownloadTask task) {
 183     getBinding().setProgress(100);
 184     Toast.makeText(this, &quot;ä¸‹è½½å®Œæˆ&quot;, Toast.LENGTH_SHORT).show();
 185     mStart.setText(&quot;é‡æ–°å¼€å§‹ï¼Ÿ&quot;);
 186     mCancel.setEnabled(false);
 187     setBtState(true);
 188     getBinding().setSpeed(&quot;&quot;);
 189     L.d(TAG, &quot;md5Code ==&gt; &quot; + CommonUtil.getFileMD5(new File(task.getDownloadPath())));
 190     L.d(TAG, &quot;data ==&gt; &quot; + Aria.download(this).getDownloadEntity(DOWNLOAD_URL));
 191   }
 192 
 193   @Download.onNoSupportBreakPoint
 194   public void onNoSupportBreakPoint(DownloadTask task) {
 195     T.showShort(SingleTaskActivity.this, &quot;è¯¥ä¸‹è½½é“¾æ¥ä¸æ”¯æŒæ–­ç‚¹&quot;);
 196   }
 197 
 198   @Override protected int setLayoutId() {
 199     return R.layout.activity_single;
 200   }
 201 
 202   @Override protected void init(Bundle savedInstanceState) {
 203     super.init(savedInstanceState);
 204     setTitle(&quot;å•ä»»åŠ¡ä¸‹è½½&quot;);
 205     DownloadTarget target = Aria.download(this).load(DOWNLOAD_URL);
 206     getBinding().setProgress(target.getPercent());
 207     if (target.getTaskState() == IEntity.STATE_STOP) {
 208       mStart.setText(&quot;æ¢å¤&quot;);
 209       mStart.setTextColor(getResources().getColor(android.R.color.holo_blue_light));
 210       setBtState(true);
 211     } else if (target.isDownloading()) {
 212       setBtState(false);
 213     }
 214     getBinding().setFileSize(target.getConvertFileSize());
 215   }
 216 
 217   public void onClick(View view) {
 218     switch (view.getId()) {
 219       case R.id.start :
 220         startD();
 221         break;
 222       case R.id.stop :
 223         Aria.download(this).load(DOWNLOAD_URL).stop();
 224         //Aria.download(this).load(DOWNLOAD_URL).removeRecord();
 225         break;
 226       case R.id.cancel :
 227         Aria.download(this).load(DOWNLOAD_URL).cancel();
 228         break;
 229     }
 230   }
 231 
 232   private void startD() {
 233     //Aria.get(this).setLogLevel(ALog.LOG_CLOSE);
 234     //Aria.download(this).load(&quot;aaaa.apk&quot;);
<abbr title=" 235     Aria.download(this).load(DOWNLOAD_URL).addHeader(&quot;groupName&quot;, &quot;value&quot;).setRequestMode(RequestEnum.POST).setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/hhhhhhhh.apk&quot;).start();"> 235     Aria.download(this).load(DOWNLOAD_URL).addHeader(&quot;groupName&quot;, &quot;value&quot;).setRequestMode(RequestEnum.POSğŸ”µ</abbr>
 236   }
 237 
 238   @Override protected void onDestroy() {
 239     super.onDestroy();
 240     Aria.download(this).unRegister();
 241   }
 242 }</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  
  17  package com.arialyy.simple.download;
  18  
  19  import android.os.Bundle;
  20  import android.os.Environment;
  21  import android.util.Log;
  22  import android.view.Menu;
  23  import android.view.MenuItem;
  24  import android.view.View;
  25  import android.widget.Button;
  26  import android.widget.RadioGroup;
  27  import android.widget.Toast;
  28  import butterknife.Bind;
  29  import com.arialyy.annotations.Download;
  30  import com.arialyy.annotations.DownloadGroup;
  31  import com.arialyy.aria.core.Aria;

  32  import com.arialyy.aria.core.download.DownloadEntity;
  33  import com.arialyy.aria.core.download.DownloadGroupTask;
  34  import com.arialyy.aria.core.download.DownloadTarget;
  35  import com.arialyy.aria.core.download.DownloadTask;
  36  import com.arialyy.aria.core.inf.IEntity;
  37  import com.arialyy.aria.util.ALog;
  38  import com.arialyy.aria.util.CommonUtil;
  39  import com.arialyy.frame.util.show.L;
  40  import com.arialyy.frame.util.show.T;
  41  import com.arialyy.simple.R;
  42  import com.arialyy.simple.base.BaseActivity;
  43  import com.arialyy.simple.databinding.ActivitySingleBinding;
  44  import java.io.File;
  45  
  46  public class SingleTaskActivity extends BaseActivity&lt;ActivitySingleBinding&gt; {
  47  
  48    private static final String DOWNLOAD_URL =
  49        //&quot;http://kotlinlang.org/docs/kotlin-docs.pdf&quot;;
  50        //&quot;https://atom-installer.github.com/v1.13.0/AtomSetup.exe?s=1484074138&amp;ext=.exe&quot;;
  51        //&quot;http://static.gaoshouyou.com/d/22/94/822260b849944492caadd2983f9bb624.apk&quot;;
  52        //&quot;http://sitcac.daxincf.cn/wp-content/uploads/swift_vido/01/element.mp4_1&quot;;
  53    //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=20170819185541.avi&quot;;
  54    //&quot;http://down2.xiaoshuofuwuqi.com/d/file/filetxt/20170608/14/%BA%DA%CE%D7%CA%A6%E1%C8%C6%F0.txt&quot;;
  55    //&quot;http://tinghuaapp.oss-cn-shanghai.aliyuncs.com/20170612201739607815&quot;;
  56    //&quot;http://static.gaoshouyou.com/d/36/69/2d3699acfa69e9632262442c46516ad8.apk&quot;;
  57    //&quot;http://oqcpqqvuf.bkt.clouddn.com/ceshi.txt&quot;;
<abbr title="  58    //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neuralprisma-2.5.2.174-2000174_1494784835.apk?f=web_1&quot;;">  58    //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neurağŸ”µ</abbr>
  59    //ä¸æ”¯æŒæ–­ç‚¹çš„é“¾æ¥
  60    //&quot;http://ox.konsung.net:5555/ksdc-web/download/downloadFile/?fileName=ksdc_1.0.2.apk&amp;rRange=0-&quot;;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  61 -  //&quot;http://172.18.104.50:8080/download/_302turn&quot;;</span>
  62    &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  63 -  //&quot;http://172.21.1.99:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>



  64    @Bind(R.id.start) Button mStart;
  65    @Bind(R.id.stop) Button mStop;
  66    @Bind(R.id.cancel) Button mCancel;
  67    @Bind(R.id.speeds) RadioGroup mRg;
  68  
  69    @Override protected void onCreate(Bundle savedInstanceState) {
  70      super.onCreate(savedInstanceState);
  71      Aria.download(this).register();
  72    }
  73  
  74    /**
  75     * è®¾ç½®start å’Œ stop æŒ‰é’®çŠ¶æ€
  76     */
  77    private void setBtState(boolean state) {
  78      mStart.setEnabled(state);
  79      mStop.setEnabled(!state);
  80    }
  81  
  82    @Override public boolean onCreateOptionsMenu(Menu menu) {
  83      getMenuInflater().inflate(R.menu.menu_single_task_activity, menu);
  84      return super.onCreateOptionsMenu(menu);
  85    }
  86  
  87    @Override public boolean onMenuItemClick(MenuItem item) {
  88      double speed = -1;
  89      String msg = &quot;&quot;;
  90      switch (item.getItemId()) {
  91        case R.id.help:
  92          msg = &quot;ä¸€äº›å°çŸ¥è¯†ç‚¹ï¼š\n&quot;
  93              + &quot;1ã€ä½ å¯ä»¥åœ¨æ³¨è§£ä¸­å¢åŠ é“¾æ¥ï¼Œç”¨äºæŒ‡å®šè¢«æ³¨è§£çš„æ–¹æ³•åªèƒ½è¢«ç‰¹å®šçš„ä¸‹è½½ä»»åŠ¡å›è°ƒï¼Œä»¥é˜²æ­¢progressä¹±è·³\n&quot;
  94              + &quot;2ã€å½“é‡åˆ°ç½‘ç»œæ…¢çš„æƒ…å†µæ—¶ï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨onPre()æ›´æ–°UIç•Œé¢ï¼Œå¾…è¿æ¥æˆåŠŸæ—¶ï¼Œå†åœ¨onTaskPre()è·å–å®Œæ•´çš„taskæ•°æ®ï¼Œç„¶åç»™UIç•Œé¢è®¾ç½®æ­£ç¡®çš„æ•°æ®\n&quot;
  95              + &quot;3ã€ä½ å¯ä»¥åœ¨ç•Œé¢åˆå§‹åŒ–æ—¶é€šè¿‡Aria.download(this).load(URL).getPercent()ç­‰æ–¹æ³•å¿«é€Ÿè·å–ç›¸å…³ä»»åŠ¡çš„ä¸€äº›æ•°æ®&quot;;
  96          showMsgDialog(&quot;tip&quot;, msg);
  97          break;
  98        case R.id.speed_0:
  99          speed = 0.0;
 100          break;
 101        case R.id.speed_128:
 102          speed = 128.0;
 103          break;
 104        case R.id.speed_256:
 105          speed = 256.0;
 106          break;
 107        case R.id.speed_512:
 108          speed = 512.0;
 109          break;
 110        case R.id.speed_1m:
 111          speed = 1024.0;
 112          break;
 113      }
 114      if (speed &gt; -1) {
 115        msg = item.getTitle().toString();
 116        Aria.download(this).setMaxSpeed(speed);
 117        T.showShort(this, msg);
 118      }
 119      return true;
 120    }
 121  
 122    @Download.onPre protected void onPre(DownloadTask task) {
 123      setBtState(false);
 124    }
 125  
 126    @Download.onTaskStart void taskStart(DownloadTask task) {
 127      getBinding().setFileSize(task.getConvertFileSize());
 128    }
 129  
 130    @Download.onTaskRunning protected void running(DownloadTask task) {
 131  
 132      long len = task.getFileSize();
 133      if (len == 0) {
 134        getBinding().setProgress(0);
 135      } else {
 136        getBinding().setProgress(task.getPercent());
 137      }
 138      getBinding().setSpeed(task.getConvertSpeed());
 139    }
 140  
 141    @Download.onTaskResume void taskResume(DownloadTask task) {
 142      mStart.setText(&quot;æš‚åœ&quot;);
 143      setBtState(false);
 144    }
 145  
 146    @Download.onTaskStop void taskStop(DownloadTask task) {
 147      mStart.setText(&quot;æ¢å¤&quot;);
 148      setBtState(true);
 149      getBinding().setSpeed(&quot;&quot;);
 150    }
 151  
 152    @Download.onTaskCancel void taskCancel(DownloadTask task) {
 153      getBinding().setProgress(0);
 154      Toast.makeText(SingleTaskActivity.this, &quot;å–æ¶ˆä¸‹è½½&quot;, Toast.LENGTH_SHORT).show();
 155      mStart.setText(&quot;å¼€å§‹&quot;);
 156      setBtState(true);
 157      getBinding().setSpeed(&quot;&quot;);
 158    }
 159  
 160    @Download.onTaskFail void taskFail(DownloadTask task) {
 161      Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å¤±è´¥&quot;, Toast.LENGTH_SHORT).show();
 162      setBtState(true);
 163    }
 164  
 165    @Download.onTaskComplete void taskComplete(DownloadTask task) {
 166      getBinding().setProgress(100);
 167      Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å®Œæˆ&quot;, Toast.LENGTH_SHORT).show();
 168      mStart.setText(&quot;é‡æ–°å¼€å§‹ï¼Ÿ&quot;);
 169      mCancel.setEnabled(false);
 170      setBtState(true);
 171      getBinding().setSpeed(&quot;&quot;);
 172      L.d(TAG, &quot;md5Code ==&gt; &quot; + CommonUtil.getFileMD5(new File(task.getDownloadPath())));
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 173 +    L.d(TAG, &quot;data ==&gt; &quot; + Aria.download(this).getDownloadEntity(DOWNLOAD_URL));</span>
 174    }
 175  
 176    @Download.onNoSupportBreakPoint
 177    public void onNoSupportBreakPoint(DownloadTask task) {
 178      T.showShort(SingleTaskActivity.this, &quot;è¯¥ä¸‹è½½é“¾æ¥ä¸æ”¯æŒæ–­ç‚¹&quot;);
 179    }
 180  
 181    @Override protected int setLayoutId() {
 182      return R.layout.activity_single;
 183    }
 184  
 185    @Override protected void init(Bundle savedInstanceState) {
 186      super.init(savedInstanceState);
 187      setTitle(&quot;å•ä»»åŠ¡ä¸‹è½½&quot;);
 188      DownloadTarget target = Aria.download(this).load(DOWNLOAD_URL);
 189      getBinding().setProgress(target.getPercent());
 190      if (target.getTaskState() == IEntity.STATE_STOP) {
 191        mStart.setText(&quot;æ¢å¤&quot;);
 192        mStart.setTextColor(getResources().getColor(android.R.color.holo_blue_light));
 193        setBtState(true);
 194      } else if (target.isDownloading()) {
 195        setBtState(false);
 196      }
 197      getBinding().setFileSize(target.getConvertFileSize());
 198    }
 199  
 200    public void onClick(View view) {
 201      switch (view.getId()) {
 202        case R.id.start:
 203          startD();
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 204 -        //new Thread(new Runnable() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 205 -        //  @Override public void run() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 206 -        //    startD();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 207 -        //  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 208 -        //}).start();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 209 -        //</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 210 -        //new Thread(new Runnable() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 211 -        //  @Override public void run() {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 212 -        //    startD();</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 213 -        //  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 214 -        //}).start();</span>
 215          break;
 216        case R.id.stop:
 217          Aria.download(this).load(DOWNLOAD_URL).stop();
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +        //Aria.download(this).load(DOWNLOAD_URL).removeRecord();</span>
 219          break;
 220        case R.id.cancel:
 221          Aria.download(this).load(DOWNLOAD_URL).cancel();
 222          break;
 223      }
 224    }
 225  
 226    private void startD(){
 227      //Aria.get(this).setLogLevel(ALog.LOG_CLOSE);
 228      //Aria.download(this).load(&quot;aaaa.apk&quot;);
 229      Aria.download(SingleTaskActivity.this)
 230          .load(DOWNLOAD_URL)
 231          .addHeader(&quot;groupName&quot;, &quot;value&quot;)

 232          .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/hhhhhhhh.apk&quot;)
 233          .start();
 234    }
 235  
 236    @Override protected void onDestroy() {
 237      super.onDestroy();
 238      Aria.download(this).unRegister();
 239    }
 240  }</pre></td>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  
  17  package com.arialyy.simple.download;
  18  
  19  import android.os.Bundle;
  20  import android.os.Environment;
  21  import android.util.Log;
  22  import android.view.Menu;
  23  import android.view.MenuItem;
  24  import android.view.View;
  25  import android.widget.Button;
  26  import android.widget.RadioGroup;
  27  import android.widget.Toast;
  28  import butterknife.Bind;
  29  import com.arialyy.annotations.Download;
  30  import com.arialyy.annotations.DownloadGroup;
  31  import com.arialyy.aria.core.Aria;
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import com.arialyy.aria.core.common.RequestEnum;</span>
  33  import com.arialyy.aria.core.download.DownloadEntity;
  34  import com.arialyy.aria.core.download.DownloadGroupTask;
  35  import com.arialyy.aria.core.download.DownloadTarget;
  36  import com.arialyy.aria.core.download.DownloadTask;
  37  import com.arialyy.aria.core.inf.IEntity;
  38  import com.arialyy.aria.util.ALog;
  39  import com.arialyy.aria.util.CommonUtil;
  40  import com.arialyy.frame.util.show.L;
  41  import com.arialyy.frame.util.show.T;
  42  import com.arialyy.simple.R;
  43  import com.arialyy.simple.base.BaseActivity;
  44  import com.arialyy.simple.databinding.ActivitySingleBinding;
  45  import java.io.File;
  46  
  47  public class SingleTaskActivity extends BaseActivity&lt;ActivitySingleBinding&gt; {
  48  
  49    private static final String DOWNLOAD_URL =
  50        //&quot;http://kotlinlang.org/docs/kotlin-docs.pdf&quot;;
  51        //&quot;https://atom-installer.github.com/v1.13.0/AtomSetup.exe?s=1484074138&amp;ext=.exe&quot;;
  52        //&quot;http://static.gaoshouyou.com/d/22/94/822260b849944492caadd2983f9bb624.apk&quot;;
  53        //&quot;http://sitcac.daxincf.cn/wp-content/uploads/swift_vido/01/element.mp4_1&quot;;
  54    //&quot;http://120.25.196.56:8000/filereq?id=15692406294&amp;ipncid=105635&amp;client=android&amp;filename=20170819185541.avi&quot;;
  55    //&quot;http://down2.xiaoshuofuwuqi.com/d/file/filetxt/20170608/14/%BA%DA%CE%D7%CA%A6%E1%C8%C6%F0.txt&quot;;
  56    //&quot;http://tinghuaapp.oss-cn-shanghai.aliyuncs.com/20170612201739607815&quot;;
  57    //&quot;http://static.gaoshouyou.com/d/36/69/2d3699acfa69e9632262442c46516ad8.apk&quot;;
  58    //&quot;http://oqcpqqvuf.bkt.clouddn.com/ceshi.txt&quot;;
<abbr title="  59    //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neuralprisma-2.5.2.174-2000174_1494784835.apk?f=web_1&quot;;">  59    //&quot;http://down8.androidgame-store.com/201706122321/97967927DD4E53D9905ECAA7874C8128/new/game1/19/45319/com.neurağŸ”µ</abbr>
  60    //ä¸æ”¯æŒæ–­ç‚¹çš„é“¾æ¥
  61    //&quot;http://ox.konsung.net:5555/ksdc-web/download/downloadFile/?fileName=ksdc_1.0.2.apk&amp;rRange=0-&quot;;
  62    //&quot;http://172.18.104.50:8080/download/_302turn&quot;;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  63 -  &quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  64 -  //&quot;http://172.21.1.99:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  65 +  //&quot;http://gdown.baidu.com/data/wisegame/0904344dee4a2d92/QQ_718.apk&quot;;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  66 +  //&quot;http://shouji.360tpcdn.com/160824/2c0407dbab4a86c7a84fa7340b9969e7/block.app.wars_30.apk&quot;;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  67 +  &quot;http://172.21.1.72:8080/download/test+ ä¸­æ–‡123.zip&quot;;</span>
  68    @Bind(R.id.start) Button mStart;
  69    @Bind(R.id.stop) Button mStop;
  70    @Bind(R.id.cancel) Button mCancel;
  71    @Bind(R.id.speeds) RadioGroup mRg;
  72  
  73    @Override protected void onCreate(Bundle savedInstanceState) {
  74      super.onCreate(savedInstanceState);
  75      Aria.download(this).register();
  76    }
  77  
  78    /**
  79     * è®¾ç½®start å’Œ stop æŒ‰é’®çŠ¶æ€
  80     */
  81    private void setBtState(boolean state) {
  82      mStart.setEnabled(state);
  83      mStop.setEnabled(!state);
  84    }
  85  
  86    @Override public boolean onCreateOptionsMenu(Menu menu) {
  87      getMenuInflater().inflate(R.menu.menu_single_task_activity, menu);
  88      return super.onCreateOptionsMenu(menu);
  89    }
  90  
  91    @Override public boolean onMenuItemClick(MenuItem item) {
  92      double speed = -1;
  93      String msg = &quot;&quot;;
  94      switch (item.getItemId()) {
  95        case R.id.help:
  96          msg = &quot;ä¸€äº›å°çŸ¥è¯†ç‚¹ï¼š\n&quot;
  97              + &quot;1ã€ä½ å¯ä»¥åœ¨æ³¨è§£ä¸­å¢åŠ é“¾æ¥ï¼Œç”¨äºæŒ‡å®šè¢«æ³¨è§£çš„æ–¹æ³•åªèƒ½è¢«ç‰¹å®šçš„ä¸‹è½½ä»»åŠ¡å›è°ƒï¼Œä»¥é˜²æ­¢progressä¹±è·³\n&quot;
  98              + &quot;2ã€å½“é‡åˆ°ç½‘ç»œæ…¢çš„æƒ…å†µæ—¶ï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨onPre()æ›´æ–°UIç•Œé¢ï¼Œå¾…è¿æ¥æˆåŠŸæ—¶ï¼Œå†åœ¨onTaskPre()è·å–å®Œæ•´çš„taskæ•°æ®ï¼Œç„¶åç»™UIç•Œé¢è®¾ç½®æ­£ç¡®çš„æ•°æ®\n&quot;
  99              + &quot;3ã€ä½ å¯ä»¥åœ¨ç•Œé¢åˆå§‹åŒ–æ—¶é€šè¿‡Aria.download(this).load(URL).getPercent()ç­‰æ–¹æ³•å¿«é€Ÿè·å–ç›¸å…³ä»»åŠ¡çš„ä¸€äº›æ•°æ®&quot;;
 100          showMsgDialog(&quot;tip&quot;, msg);
 101          break;
 102        case R.id.speed_0:
 103          speed = 0.0;
 104          break;
 105        case R.id.speed_128:
 106          speed = 128.0;
 107          break;
 108        case R.id.speed_256:
 109          speed = 256.0;
 110          break;
 111        case R.id.speed_512:
 112          speed = 512.0;
 113          break;
 114        case R.id.speed_1m:
 115          speed = 1024.0;
 116          break;
 117      }
 118      if (speed &gt; -1) {
 119        msg = item.getTitle().toString();
 120        Aria.download(this).setMaxSpeed(speed);
 121        T.showShort(this, msg);
 122      }
 123      return true;
 124    }
 125  
 126    @Download.onPre protected void onPre(DownloadTask task) {
 127      setBtState(false);
 128    }
 129  
 130    @Download.onTaskStart void taskStart(DownloadTask task) {
 131      getBinding().setFileSize(task.getConvertFileSize());
 132    }
 133  
 134    @Download.onTaskRunning protected void running(DownloadTask task) {
 135  
 136      long len = task.getFileSize();
 137      if (len == 0) {
 138        getBinding().setProgress(0);
 139      } else {
 140        getBinding().setProgress(task.getPercent());
 141      }
 142      getBinding().setSpeed(task.getConvertSpeed());
 143    }
 144  
 145    @Download.onTaskResume void taskResume(DownloadTask task) {
 146      mStart.setText(&quot;æš‚åœ&quot;);
 147      setBtState(false);
 148    }
 149  
 150    @Download.onTaskStop void taskStop(DownloadTask task) {
 151      mStart.setText(&quot;æ¢å¤&quot;);
 152      setBtState(true);
 153      getBinding().setSpeed(&quot;&quot;);
 154    }
 155  
 156    @Download.onTaskCancel void taskCancel(DownloadTask task) {
 157      getBinding().setProgress(0);
 158      Toast.makeText(SingleTaskActivity.this, &quot;å–æ¶ˆä¸‹è½½&quot;, Toast.LENGTH_SHORT).show();
 159      mStart.setText(&quot;å¼€å§‹&quot;);
 160      setBtState(true);
 161      getBinding().setSpeed(&quot;&quot;);
 162    }
 163  
 164    @Download.onTaskFail void taskFail(DownloadTask task) {
 165      Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å¤±è´¥&quot;, Toast.LENGTH_SHORT).show();
 166      setBtState(true);
 167    }
 168  
 169    @Download.onTaskComplete void taskComplete(DownloadTask task) {
 170      getBinding().setProgress(100);
 171      Toast.makeText(SingleTaskActivity.this, &quot;ä¸‹è½½å®Œæˆ&quot;, Toast.LENGTH_SHORT).show();
 172      mStart.setText(&quot;é‡æ–°å¼€å§‹ï¼Ÿ&quot;);
 173      mCancel.setEnabled(false);
 174      setBtState(true);
 175      getBinding().setSpeed(&quot;&quot;);
 176      L.d(TAG, &quot;md5Code ==&gt; &quot; + CommonUtil.getFileMD5(new File(task.getDownloadPath())));

 177    }
 178  
 179    @Download.onNoSupportBreakPoint
 180    public void onNoSupportBreakPoint(DownloadTask task) {
 181      T.showShort(SingleTaskActivity.this, &quot;è¯¥ä¸‹è½½é“¾æ¥ä¸æ”¯æŒæ–­ç‚¹&quot;);
 182    }
 183  
 184    @Override protected int setLayoutId() {
 185      return R.layout.activity_single;
 186    }
 187  
 188    @Override protected void init(Bundle savedInstanceState) {
 189      super.init(savedInstanceState);
 190      setTitle(&quot;å•ä»»åŠ¡ä¸‹è½½&quot;);
 191      DownloadTarget target = Aria.download(this).load(DOWNLOAD_URL);
 192      getBinding().setProgress(target.getPercent());
 193      if (target.getTaskState() == IEntity.STATE_STOP) {
 194        mStart.setText(&quot;æ¢å¤&quot;);
 195        mStart.setTextColor(getResources().getColor(android.R.color.holo_blue_light));
 196        setBtState(true);
 197      } else if (target.isDownloading()) {
 198        setBtState(false);
 199      }
 200      getBinding().setFileSize(target.getConvertFileSize());
 201    }
 202  
 203    public void onClick(View view) {
 204      switch (view.getId()) {
 205        case R.id.start:
 206          startD();
 207          //new Thread(new Runnable() {
 208          //  @Override public void run() {
 209          //    startD();
 210          //  }
 211          //}).start();
 212          //
 213          //new Thread(new Runnable() {
 214          //  @Override public void run() {
 215          //    startD();
 216          //  }
 217          //}).start();
 218          break;
 219        case R.id.stop:
 220          Aria.download(this).load(DOWNLOAD_URL).stop();

 221          break;
 222        case R.id.cancel:
 223          Aria.download(this).load(DOWNLOAD_URL).cancel();
 224          break;
 225      }
 226    }
 227  
 228    private void startD(){
 229      //Aria.get(this).setLogLevel(ALog.LOG_CLOSE);
 230      //Aria.download(this).load(&quot;aaaa.apk&quot;);
 231      Aria.download(SingleTaskActivity.this)
 232          .load(DOWNLOAD_URL)
 233          .addHeader(&quot;groupName&quot;, &quot;value&quot;)
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +        .setRequestMode(RequestEnum.POST)</span>
 235          .setDownloadPath(Environment.getExternalStorageDirectory().getPath() + &quot;/hhhhhhhh.apk&quot;)
 236          .start();
 237    }
 238  
 239    @Override protected void onDestroy() {
 240      super.onDestroy();
 241      Aria.download(this).unRegister();
 242    }
 243  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            