<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>489</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    489
                    <a href="488.html">prev</a>
                    <a href="490.html">next</a>
                    <a href="489_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    FormidableLabs/react-native-app-auth_676f7d50860a770b99fe4d895c4568a151d28db0_android/src/main/java/com/rnappauth/RNAppAuthModule.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\FormidableLabs\react-native-app-auth show &quot;676f7d50860a770b99fe4d895c4568a151d28db0:android/src/main/java/com/rnappauth/RNAppAuthModule.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\FormidableLabs\react-native-app-auth show &quot;676f7d50860a770b99fe4d895c4568a151d28db0^1:android/src/main/java/com/rnappauth/RNAppAuthModule.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\FormidableLabs\react-native-app-auth show &quot;676f7d50860a770b99fe4d895c4568a151d28db0^2:android/src/main/java/com/rnappauth/RNAppAuthModule.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\FormidableLabs\react-native-app-auth show &quot;9000c289a1e19954ca54c3b7c263b5f4eb47c35c:android/src/main/java/com/rnappauth/RNAppAuthModule.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [j]], subset: [[b], [j]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-6280296900167357794" onmouseenter="enter('-6280296900167357794');" onmouseout="out('-6280296900167357794');" style="">   1 package com.rnappauth;                                                                                   </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="2265467446931963889" onmouseenter="enter('2265467446931963889');" onmouseout="out('2265467446931963889');" style="">   4 import android.app.PendingIntent;                                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">   5 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8 import android.net.Uri;                                                                                  </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   9 import android.os.Bundle;                                                                                </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  10 import android.content.ActivityNotFoundException;                                                        </span>
<span class="-6436154409168942626" onmouseenter="enter('-6436154409168942626');" onmouseout="out('-6436154409168942626');" style="">  11 import androidx.annotation.Nullable;                                                                     </span>
<span class="-4621922491292668474" onmouseenter="enter('-4621922491292668474');" onmouseout="out('-4621922491292668474');" style="">  12 import androidx.browser.customtabs.CustomTabsCallback;                                                   </span>
<span class="5786009149739133921" onmouseenter="enter('5786009149739133921');" onmouseout="out('5786009149739133921');" style="">  13 import androidx.browser.customtabs.CustomTabsClient;                                                     </span>
<span class="6730446154443378273" onmouseenter="enter('6730446154443378273');" onmouseout="out('6730446154443378273');" style="">  14 import androidx.browser.customtabs.CustomTabsServiceConnection;                                          </span>
<span class="-3044346478057358458" onmouseenter="enter('-3044346478057358458');" onmouseout="out('-3044346478057358458');" style="">  15 import androidx.browser.customtabs.CustomTabsSession;                                                    </span>
<span  style="">  16                                                                                                          </span>
<span class="7327608205307094785" onmouseenter="enter('7327608205307094785');" onmouseout="out('7327608205307094785');" style="">  17 import com.facebook.react.bridge.ActivityEventListener;                                                  </span>
<span class="1744055796152404290" onmouseenter="enter('1744055796152404290');" onmouseout="out('1744055796152404290');" style="">  18 import com.facebook.react.bridge.ReactApplicationContext;                                                </span>
<span class="7756046764634890677" onmouseenter="enter('7756046764634890677');" onmouseout="out('7756046764634890677');" style="">  19 import com.facebook.react.bridge.ReactContextBaseJavaModule;                                             </span>
<span class="-7062843866366665780" onmouseenter="enter('-7062843866366665780');" onmouseout="out('-7062843866366665780');" style="">  20 import com.facebook.react.bridge.ReactMethod;                                                            </span>
<span class="-9114944870765420144" onmouseenter="enter('-9114944870765420144');" onmouseout="out('-9114944870765420144');" style="">  21 import com.facebook.react.bridge.Promise;                                                                </span>
<span class="3666939786570277423" onmouseenter="enter('3666939786570277423');" onmouseout="out('3666939786570277423');" style="">  22 import com.facebook.react.bridge.ReadableArray;                                                          </span>
<span class="5552486474970006352" onmouseenter="enter('5552486474970006352');" onmouseout="out('5552486474970006352');" style="">  23 import com.facebook.react.bridge.ReadableMap;                                                            </span>
<span class="-2689054124168074705" onmouseenter="enter('-2689054124168074705');" onmouseout="out('-2689054124168074705');" style="">  24 import com.facebook.react.bridge.WritableMap;                                                            </span>
<span class="7507448895670758430" onmouseenter="enter('7507448895670758430');" onmouseout="out('7507448895670758430');" style="">  25 import com.facebook.react.bridge.ReadableType;                                                           </span>
<span  style="">  26                                                                                                          </span>
<span class="2824452556317040091" onmouseenter="enter('2824452556317040091');" onmouseout="out('2824452556317040091');" style="">  27 import com.rnappauth.utils.MapUtil;                                                                      </span>
<span class="2320112657500195094" onmouseenter="enter('2320112657500195094');" onmouseout="out('2320112657500195094');" style="">  28 import com.rnappauth.utils.UnsafeConnectionBuilder;                                                      </span>
<span class="6146867944265222634" onmouseenter="enter('6146867944265222634');" onmouseout="out('6146867944265222634');" style="">  29 import com.rnappauth.utils.RegistrationResponseFactory;                                                  </span>
<span class="5385195114029684108" onmouseenter="enter('5385195114029684108');" onmouseout="out('5385195114029684108');" style="">  30 import com.rnappauth.utils.TokenResponseFactory;                                                         </span>
<span class="-7309342380344421476" onmouseenter="enter('-7309342380344421476');" onmouseout="out('-7309342380344421476');" style="">  31 import com.rnappauth.utils.CustomConnectionBuilder;                                                      </span>
<span  style="">  32                                                                                                          </span>
<span class="2084880808431135122" onmouseenter="enter('2084880808431135122');" onmouseout="out('2084880808431135122');" style="">  33 import net.openid.appauth.AppAuthConfiguration;                                                          </span>
<span class="-6153791587225110013" onmouseenter="enter('-6153791587225110013');" onmouseout="out('-6153791587225110013');" style="">  34 import net.openid.appauth.AuthorizationException;                                                        </span>
<span class="220855730882953420" onmouseenter="enter('220855730882953420');" onmouseout="out('220855730882953420');" style="">  35 import net.openid.appauth.AuthorizationRequest;                                                          </span>
<span class="3507212550601358175" onmouseenter="enter('3507212550601358175');" onmouseout="out('3507212550601358175');" style="">  36 import net.openid.appauth.AuthorizationResponse;                                                         </span>
<span class="6486087234581123017" onmouseenter="enter('6486087234581123017');" onmouseout="out('6486087234581123017');" style="">  37 import net.openid.appauth.AuthorizationService;                                                          </span>
<span class="-1918380963859750931" onmouseenter="enter('-1918380963859750931');" onmouseout="out('-1918380963859750931');" style="">  38 import net.openid.appauth.AuthorizationServiceConfiguration;                                             </span>
<span class="-1745886087889911862" onmouseenter="enter('-1745886087889911862');" onmouseout="out('-1745886087889911862');" style="">  39 import net.openid.appauth.ClientAuthentication;                                                          </span>
<span class="5802881313983385714" onmouseenter="enter('5802881313983385714');" onmouseout="out('5802881313983385714');" style="">  40 import net.openid.appauth.ClientSecretBasic;                                                             </span>
<span class="6044047429679939107" onmouseenter="enter('6044047429679939107');" onmouseout="out('6044047429679939107');" style="">  41 import net.openid.appauth.ClientSecretPost;                                                              </span>
<span class="2300124290120821674" onmouseenter="enter('2300124290120821674');" onmouseout="out('2300124290120821674');" style="">  42 import net.openid.appauth.RegistrationRequest;                                                           </span>
<span class="8892208418569385403" onmouseenter="enter('8892208418569385403');" onmouseout="out('8892208418569385403');" style="">  43 import net.openid.appauth.RegistrationResponse;                                                          </span>
<span class="-7057741429751790751" onmouseenter="enter('-7057741429751790751');" onmouseout="out('-7057741429751790751');" style="">  44 import net.openid.appauth.ResponseTypeValues;                                                            </span>
<span class="7041795251639894294" onmouseenter="enter('7041795251639894294');" onmouseout="out('7041795251639894294');" style="">  45 import net.openid.appauth.TokenResponse;                                                                 </span>
<span class="4423191746780431402" onmouseenter="enter('4423191746780431402');" onmouseout="out('4423191746780431402');" style="">  46 import net.openid.appauth.TokenRequest;                                                                  </span>
<span class="-5344047661436712974" onmouseenter="enter('-5344047661436712974');" onmouseout="out('-5344047661436712974');" style="">  47 import net.openid.appauth.connectivity.ConnectionBuilder;                                                </span>
<span class="2682978576506672064" onmouseenter="enter('2682978576506672064');" onmouseout="out('2682978576506672064');" style="">  48 import net.openid.appauth.connectivity.DefaultConnectionBuilder;                                         </span>
<span  style="">  49                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  50 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  51 import java.util.Collections;                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  52 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  53 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  54 import java.util.Map;                                                                                    </span>
<span class="8600016768069240092" onmouseenter="enter('8600016768069240092');" onmouseout="out('8600016768069240092');" style="">  55 import java.util.concurrent.ConcurrentHashMap;                                                           </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  56 import java.util.concurrent.CountDownLatch;                                                              </span>
<span  style="">  57                                                                                                          </span>
<span class="6575769426762835403" onmouseenter="enter('6575769426762835403');" onmouseout="out('6575769426762835403');" style="">  58 public class RNAppAuthModule extends ReactContextBaseJavaModule implements ActivityEventListener {       </span>
<span  style="">  59                                                                                                          </span>
<span class="8401162781518473365" onmouseenter="enter('8401162781518473365');" onmouseout="out('8401162781518473365');" style="">  60     public static final String CUSTOM_TAB_PACKAGE_NAME = &quot;com.android.chrome&quot;;                           </span>
<span  style="">  61                                                                                                          </span>
<span class="6180419538961108965" onmouseenter="enter('6180419538961108965');" onmouseout="out('6180419538961108965');" style="">  62     private final ReactApplicationContext reactContext;                                                  </span>
<span class="1869321332520936904" onmouseenter="enter('1869321332520936904');" onmouseout="out('1869321332520936904');" style="">  63     private Promise promise;                                                                             </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  64 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="1815072443305468649" onmouseenter="enter('1815072443305468649');" onmouseout="out('1815072443305468649');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  65     private boolean dangerouslyAllowInsecureHttpRequests;                                                </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  66 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="504355591559206068" onmouseenter="enter('504355591559206068');" onmouseout="out('504355591559206068');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  67     private Boolean dangerouslyAllowInsecureHttpRequests;                                                </span>
<span class="6877933566748299598" onmouseenter="enter('6877933566748299598');" onmouseout="out('6877933566748299598');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  68     private String clientAuthMethod = &quot;basic&quot;;                                                           </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  69 =======                                                                                                  </span>
<span class="504355591559206068" onmouseenter="enter('504355591559206068');" onmouseout="out('504355591559206068');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  70     private Boolean dangerouslyAllowInsecureHttpRequests;                                                </span>
<span class="3709939774236496336" onmouseenter="enter('3709939774236496336');" onmouseout="out('3709939774236496336');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  71     private Boolean skipCodeExchange;                                                                    </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  72 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="6877933566748299598" onmouseenter="enter('6877933566748299598');" onmouseout="out('6877933566748299598');" style="">  73     private String clientAuthMethod = &quot;basic&quot;;                                                           </span>
<span class="-9158722382120219449" onmouseenter="enter('-9158722382120219449');" onmouseout="out('-9158722382120219449');" style="">  74     private Map&lt;String, String&gt; registrationRequestHeaders = null;                                       </span>
<span class="5073960437150900627" onmouseenter="enter('5073960437150900627');" onmouseout="out('5073960437150900627');" style="">  75     private Map&lt;String, String&gt; authorizationRequestHeaders = null;                                      </span>
<span class="493655431939084947" onmouseenter="enter('493655431939084947');" onmouseout="out('493655431939084947');" style="">  76     private Map&lt;String, String&gt; tokenRequestHeaders = null;                                              </span>
<span class="4071237130655105462" onmouseenter="enter('4071237130655105462');" onmouseout="out('4071237130655105462');" style="">  77     private Map&lt;String, String&gt; additionalParametersMap;                                                 </span>
<span class="266383520389269247" onmouseenter="enter('266383520389269247');" onmouseout="out('266383520389269247');" style="">  78     private String clientSecret;                                                                         </span>
<span class="3601618847927794657" onmouseenter="enter('3601618847927794657');" onmouseout="out('3601618847927794657');" style=""><abbr title="  79     private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = new ConcurrentHashMap&lt;&gt;();">  79     private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = nðŸ”µ</abbr></span>
<span class="-7004558742358285463" onmouseenter="enter('-7004558742358285463');" onmouseout="out('-7004558742358285463');" style="">  80     private boolean isPrefetched = false;                                                                </span>
<span  style="">  81                                                                                                          </span>
<span class="-978447563967948693" onmouseenter="enter('-978447563967948693');" onmouseout="out('-978447563967948693');" style="">  82     public RNAppAuthModule(ReactApplicationContext reactContext) {                                       </span>
<span class="-1443603959286428543" onmouseenter="enter('-1443603959286428543');" onmouseout="out('-1443603959286428543');" style="">  83         super(reactContext);                                                                             </span>
<span class="3003228313870805798" onmouseenter="enter('3003228313870805798');" onmouseout="out('3003228313870805798');" style="">  84         this.reactContext = reactContext;                                                                </span>
<span class="6669990586656871028" onmouseenter="enter('6669990586656871028');" onmouseout="out('6669990586656871028');" style="">  85         reactContext.addActivityEventListener(this);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="">  88     @ReactMethod                                                                                         </span>
<span class="-5002037316527958427" onmouseenter="enter('-5002037316527958427');" onmouseout="out('-5002037316527958427');" style="">  89     public void prefetchConfiguration(                                                                   </span>
<span class="-8094929847941500576" onmouseenter="enter('-8094929847941500576');" onmouseout="out('-8094929847941500576');" style="">  90         final Boolean warmAndPrefetchChrome,                                                             </span>
<span class="-1461695631126767390" onmouseenter="enter('-1461695631126767390');" onmouseout="out('-1461695631126767390');" style="">  91         final String issuer,                                                                             </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="">  92         final String redirectUrl,                                                                        </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="">  93         final String clientId,                                                                           </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="">  94         final ReadableArray scopes,                                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="">  95         final ReadableMap serviceConfiguration,                                                          </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="">  96         final boolean dangerouslyAllowInsecureHttpRequests,                                              </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="">  97         final ReadableMap headers,                                                                       </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="">  98         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="">  99     ) {                                                                                                  </span>
<span class="-7526945842846133690" onmouseenter="enter('-7526945842846133690');" onmouseout="out('-7526945842846133690');" style=""> 100         if (warmAndPrefetchChrome) {                                                                     </span>
<span class="8703515971997686923" onmouseenter="enter('8703515971997686923');" onmouseout="out('8703515971997686923');" style=""> 101             warmChromeCustomTab(reactContext, issuer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 102         }                                                                                                </span>
<span  style=""> 103                                                                                                          </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 104         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title=" 105         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 105         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="8517032726698162354" onmouseenter="enter('8517032726698162354');" onmouseout="out('8517032726698162354');" style=""> 106         final CountDownLatch fetchConfigurationLatch = new CountDownLatch(1);                            </span>
<span  style=""> 107                                                                                                          </span>
<span class="-7471939844701867604" onmouseenter="enter('-7471939844701867604');" onmouseout="out('-7471939844701867604');" style=""> 108         if(!isPrefetched) {                                                                              </span>
<span class="-4482036984339699707" onmouseenter="enter('-4482036984339699707');" onmouseout="out('-4482036984339699707');" style=""> 109             if (serviceConfiguration != null &amp;&amp; !this.hasServiceConfiguration(issuer)) {                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 110                 try {                                                                                    </span>
<span class="7730737146098200581" onmouseenter="enter('7730737146098200581');" onmouseout="out('7730737146098200581');" style=""><abbr title=" 111                     setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfiguration));"> 111                     setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfigðŸ”µ</abbr></span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 112                     isPrefetched = true;                                                                 </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 113                     fetchConfigurationLatch.countDown();                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 114                 } catch (Exception e) {                                                                  </span>
<span class="6809300863683709814" onmouseenter="enter('6809300863683709814');" onmouseout="out('6809300863683709814');" style=""> 115                     promise.reject(&quot;configuration_error&quot;, &quot;Failed to convert serviceConfiguration&quot;, e);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116                 }                                                                                        </span>
<span class="386976522086802497" onmouseenter="enter('386976522086802497');" onmouseout="out('386976522086802497');" style=""> 117             } else if (!hasServiceConfiguration(issuer)) {                                               </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 118                 final Uri issuerUri = Uri.parse(issuer);                                                 </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 119                 AuthorizationServiceConfiguration.fetchFromUrl(                                          </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 120                         buildConfigurationUriFromIssuer(issuerUri),                                      </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 121                         new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {          </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 122                             public void onFetchConfigurationCompleted(                                   </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 123                                     @Nullable AuthorizationServiceConfiguration fetchedConfiguration,    </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 124                                     @Nullable AuthorizationException ex) {                               </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 125                                 if (ex != null) {                                                        </span>
<span class="6863513032854295921" onmouseenter="enter('6863513032854295921');" onmouseout="out('6863513032854295921');" style=""><abbr title=" 126                                     promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuration&quot;, ex);"> 126                                     promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 127                                     return;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128                                 }                                                                        </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 129                                 setServiceConfiguration(issuer, fetchedConfiguration);                   </span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 130                                 isPrefetched = true;                                                     </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 131                                 fetchConfigurationLatch.countDown();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132                             }                                                                            </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 133                         },                                                                               </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 134                         builder                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 135                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 137         } else {                                                                                         </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 138             fetchConfigurationLatch.countDown();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139         }                                                                                                </span>
<span  style=""> 140                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 141         try {                                                                                            </span>
<span class="-1907621811022997860" onmouseenter="enter('-1907621811022997860');" onmouseout="out('-1907621811022997860');" style=""> 142             fetchConfigurationLatch.await();                                                             </span>
<span class="1954864242125272611" onmouseenter="enter('1954864242125272611');" onmouseout="out('1954864242125272611');" style=""> 143             promise.resolve(isPrefetched);                                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 144         } catch (Exception e) {                                                                          </span>
<span class="1768900707370095440" onmouseenter="enter('1768900707370095440');" onmouseout="out('1768900707370095440');" style=""><abbr title=" 145             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e);"> 145             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147     }                                                                                                    </span>
<span  style=""> 148                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 149     @ReactMethod                                                                                         </span>
<span class="6906647419500618265" onmouseenter="enter('6906647419500618265');" onmouseout="out('6906647419500618265');" style=""> 150     public void register(                                                                                </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 151         String issuer,                                                                                   </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 152         final ReadableArray redirectUris,                                                                </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 153         final ReadableArray responseTypes,                                                               </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 154         final ReadableArray grantTypes,                                                                  </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 155         final String subjectType,                                                                        </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 156         final String tokenEndpointAuthMethod,                                                            </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 157         final ReadableMap additionalParameters,                                                          </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 158         final ReadableMap serviceConfiguration,                                                          </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style=""> 159         final boolean dangerouslyAllowInsecureHttpRequests,                                              </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 160         final ReadableMap headers,                                                                       </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 161         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 162     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 163         this.parseHeaderMap(headers);                                                                    </span>
<span class="263301671464505834" onmouseenter="enter('263301671464505834');" onmouseout="out('263301671464505834');" style=""><abbr title=" 164         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.registrationRequestHeaders);"> 164         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 165         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 166         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 166         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style=""> 167                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 168         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 168         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style=""> 169         if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 170             try {                                                                                        </span>
<span class="-539624180603456705" onmouseenter="enter('-539624180603456705');" onmouseout="out('-539624180603456705');" style=""><abbr title=" 171                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer)? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 171                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer)? ðŸ”µ</abbr></span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 172                 registerWithConfiguration(                                                               </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 173                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 174                         appAuthConfiguration,                                                            </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 175                         redirectUris,                                                                    </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 176                         responseTypes,                                                                   </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 177                         grantTypes,                                                                      </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 178                         subjectType,                                                                     </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 179                         tokenEndpointAuthMethod,                                                         </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 180                         additionalParametersMap,                                                         </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 181                         promise                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 182                 );                                                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 183             } catch (Exception e) {                                                                      </span>
<span class="-4765268916451052755" onmouseenter="enter('-4765268916451052755');" onmouseout="out('-4765268916451052755');" style=""> 184                 promise.reject(&quot;registration_failed&quot;, e.getMessage());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 186         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 187             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 188             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 189                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 190                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 191                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 192                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 193                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 194                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 195                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 196                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197                             }                                                                            </span>
<span  style=""> 198                                                                                                          </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 199                             setServiceConfiguration(issuer, fetchedConfiguration);                       </span>
<span  style=""> 200                                                                                                          </span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 201                             registerWithConfiguration(                                                   </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 202                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 203                                     appAuthConfiguration,                                                </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 204                                     redirectUris,                                                        </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 205                                     responseTypes,                                                       </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 206                                     grantTypes,                                                          </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 207                                     subjectType,                                                         </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 208                                     tokenEndpointAuthMethod,                                             </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 209                                     additionalParametersMap,                                             </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 210                                     promise                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 211                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 213                     },                                                                                   </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 214                     builder);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216     }                                                                                                    </span>
<span  style=""> 217                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 218     @ReactMethod                                                                                         </span>
<span class="7303195633629033586" onmouseenter="enter('7303195633629033586');" onmouseout="out('7303195633629033586');" style=""> 219     public void authorize(                                                                               </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 220             String issuer,                                                                               </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 221             final String redirectUrl,                                                                    </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 222             final String clientId,                                                                       </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 223             final String clientSecret,                                                                   </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 224             final ReadableArray scopes,                                                                  </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 225             final ReadableMap additionalParameters,                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 226             final ReadableMap serviceConfiguration,                                                      </span>
<span class="7042841519757427836" onmouseenter="enter('7042841519757427836');" onmouseout="out('7042841519757427836');" style=""> 227             final Boolean skipCodeExchange,                                                              </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 228             final Boolean usePKCE,                                                                       </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 229             final String clientAuthMethod,                                                               </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style=""> 230             final boolean dangerouslyAllowInsecureHttpRequests,                                          </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 231             final ReadableMap headers,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 232             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 233     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 234         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title=" 235         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 235         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 236         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 237         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 237         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style=""> 238                                                                                                          </span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style=""> 239         // store args in private fields for later use in onActivityResult handler                        </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style=""> 240         this.promise = promise;                                                                          </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 241         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 242         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style=""> 243         this.clientSecret = clientSecret;                                                                </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style=""> 244         this.clientAuthMethod = clientAuthMethod;                                                        </span>
<span class="2527862308639794492" onmouseenter="enter('2527862308639794492');" onmouseout="out('2527862308639794492');" style=""> 245         this.skipCodeExchange = skipCodeExchange;                                                        </span>
<span  style=""> 246                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 247         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 247         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style=""> 248         if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 249             try {                                                                                        </span>
<span class="-7259429764570797401" onmouseenter="enter('-7259429764570797401');" onmouseout="out('-7259429764570797401');" style=""><abbr title=" 250                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 250                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ?ðŸ”µ</abbr></span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style=""> 251                 authorizeWithConfiguration(                                                              </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 252                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 253                         appAuthConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 254                         clientId,                                                                        </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 255                         scopes,                                                                          </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 256                         redirectUrl,                                                                     </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style=""> 257                         usePKCE,                                                                         </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style=""> 258                         additionalParametersMap                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 259                 );                                                                                       </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 260             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 261                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 262             } catch (Exception e) {                                                                      </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style=""> 263                 promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 265         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 266             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 267             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 268                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 269                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 270                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 271                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 272                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 273                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 274                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 275                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276                             }                                                                            </span>
<span  style=""> 277                                                                                                          </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 278                             setServiceConfiguration(issuer, fetchedConfiguration);                       </span>
<span  style=""> 279                                                                                                          </span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style=""> 280                             authorizeWithConfiguration(                                                  </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 281                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 282                                     appAuthConfiguration,                                                </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 283                                     clientId,                                                            </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 284                                     scopes,                                                              </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 285                                     redirectUrl,                                                         </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style=""> 286                                     usePKCE,                                                             </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style=""> 287                                     additionalParametersMap                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 288                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 290                     },                                                                                   </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 291                     builder                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 292             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span  style=""> 294                                                                                                          </span>
<span  style=""> 295                                                                                                          </span>
<span  style=""> 296                                                                                                          </span>
<span  style=""> 297                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 298     }                                                                                                    </span>
<span  style=""> 299                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 300     @ReactMethod                                                                                         </span>
<span class="-5238780499530126703" onmouseenter="enter('-5238780499530126703');" onmouseout="out('-5238780499530126703');" style=""> 301     public void refresh(                                                                                 </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 302             String issuer,                                                                               </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 303             final String redirectUrl,                                                                    </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 304             final String clientId,                                                                       </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 305             final String clientSecret,                                                                   </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 306             final String refreshToken,                                                                   </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 307             final ReadableArray scopes,                                                                  </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 308             final ReadableMap additionalParameters,                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 309             final ReadableMap serviceConfiguration,                                                      </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 310             final String clientAuthMethod,                                                               </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style=""> 311             final boolean dangerouslyAllowInsecureHttpRequests,                                          </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 312             final ReadableMap headers,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 313             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 314     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 315         this.parseHeaderMap(headers);                                                                    </span>
<span class="5750510513523473374" onmouseenter="enter('5750510513523473374');" onmouseout="out('5750510513523473374');" style=""><abbr title=" 316         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders);"> 316         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="-7964591588332866161" onmouseenter="enter('-7964591588332866161');" onmouseout="out('-7964591588332866161');" style=""> 317         final AppAuthConfiguration appAuthConfiguration = createAppAuthConfiguration(builder);           </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 318         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 318         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style=""> 319                                                                                                          </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 320         if (clientSecret != null) {                                                                      </span>
<span class="-5682406089270036260" onmouseenter="enter('-5682406089270036260');" onmouseout="out('-5682406089270036260');" style=""> 321             additionalParametersMap.put(&quot;client_secret&quot;, clientSecret);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 322         }                                                                                                </span>
<span  style=""> 323                                                                                                          </span>
<span class="1495748746185505707" onmouseenter="enter('1495748746185505707');" onmouseout="out('1495748746185505707');" style=""> 324         // store setting in private field for later use in onActivityResult handler                      </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 325         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 326         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span  style=""> 327                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 328         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 328         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style=""> 329         if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 330             try {                                                                                        </span>
<span class="-7259429764570797401" onmouseenter="enter('-7259429764570797401');" onmouseout="out('-7259429764570797401');" style=""><abbr title=" 331                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 331                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ?ðŸ”µ</abbr></span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 332                 refreshWithConfiguration(                                                                </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 333                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 334                         appAuthConfiguration,                                                            </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 335                         refreshToken,                                                                    </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 336                         clientId,                                                                        </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 337                         scopes,                                                                          </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 338                         redirectUrl,                                                                     </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 339                         additionalParametersMap,                                                         </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 340                         clientAuthMethod,                                                                </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 341                         clientSecret,                                                                    </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 342                         promise                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 343                 );                                                                                       </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 344             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 345                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 346             } catch (Exception e) {                                                                      </span>
<span class="7513248397060081198" onmouseenter="enter('7513248397060081198');" onmouseout="out('7513248397060081198');" style=""> 347                 promise.reject(&quot;token_refresh_failed&quot;, e.getMessage());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 349         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 350             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 351             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 352                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 353                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 354                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 355                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 356                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 357                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 358                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 359                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360                             }                                                                            </span>
<span  style=""> 361                                                                                                          </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 362                             setServiceConfiguration(issuer, fetchedConfiguration);                       </span>
<span  style=""> 363                                                                                                          </span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 364                             refreshWithConfiguration(                                                    </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 365                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 366                                     appAuthConfiguration,                                                </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 367                                     refreshToken,                                                        </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 368                                     clientId,                                                            </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 369                                     scopes,                                                              </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 370                                     redirectUrl,                                                         </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 371                                     additionalParametersMap,                                             </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 372                                     clientAuthMethod,                                                    </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 373                                     clientSecret,                                                        </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 374                                     promise                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 375                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 377                     },                                                                                   </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 378                     builder);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span  style=""> 380                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381     }                                                                                                    </span>
<span  style=""> 382                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 383     /*                                                                                                   </span>
<span class="7578951324193379805" onmouseenter="enter('7578951324193379805');" onmouseout="out('7578951324193379805');" style=""> 384      * Called when the OAuth browser activity completes                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 385      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 386     @Override                                                                                            </span>
<span class="2027722410160164989" onmouseenter="enter('2027722410160164989');" onmouseout="out('2027722410160164989');" style=""> 387     public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {      </span>
<span class="-4639597857217913430" onmouseenter="enter('-4639597857217913430');" onmouseout="out('-4639597857217913430');" style=""> 388         if (requestCode == 0) {                                                                          </span>
<span class="-5203356024335682166" onmouseenter="enter('-5203356024335682166');" onmouseout="out('-5203356024335682166');" style=""> 389             if (data == null) {                                                                          </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 390                 if (promise != null) {                                                                   </span>
<span class="2268968836554739893" onmouseenter="enter('2268968836554739893');" onmouseout="out('2268968836554739893');" style=""> 391                     promise.reject(&quot;authentication_error&quot;, &quot;Data intent is null&quot; );                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 392                 }                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 393                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 394             }                                                                                            </span>
<span  style=""> 395                                                                                                          </span>
<span class="1683167759369238332" onmouseenter="enter('1683167759369238332');" onmouseout="out('1683167759369238332');" style=""> 396             final AuthorizationResponse response = AuthorizationResponse.fromIntent(data);               </span>
<span class="-2661429536108932642" onmouseenter="enter('-2661429536108932642');" onmouseout="out('-2661429536108932642');" style=""> 397             AuthorizationException exception = AuthorizationException.fromIntent(data);                  </span>
<span class="812069196179346176" onmouseenter="enter('812069196179346176');" onmouseout="out('812069196179346176');" style=""> 398             if (exception != null) {                                                                     </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 399                 if (promise != null) {                                                                   </span>
<span class="8302975562867231827" onmouseenter="enter('8302975562867231827');" onmouseout="out('8302975562867231827');" style=""> 400                     promise.reject(&quot;authentication_error&quot;, getErrorMessage(exception));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401                 }                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 402                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403             }                                                                                            </span>
<span  style=""> 404                                                                                                          </span>
<span class="5367484813216736809" onmouseenter="enter('5367484813216736809');" onmouseout="out('5367484813216736809');" style=""> 405             if (this.skipCodeExchange) {                                                                 </span>
<span class="-4333686298001507703" onmouseenter="enter('-4333686298001507703');" onmouseout="out('-4333686298001507703');" style=""> 406                 WritableMap map = TokenResponseFactory.authorizationResponseToMap(response);             </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 407                 promise.resolve(map);                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 408                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409             }                                                                                            </span>
<span  style=""> 410                                                                                                          </span>
<span  style=""> 411                                                                                                          </span>
<span class="7265001672864433355" onmouseenter="enter('7265001672864433355');" onmouseout="out('7265001672864433355');" style=""> 412             final Promise authorizePromise = this.promise;                                               </span>
<span class="5853075131485496752" onmouseenter="enter('5853075131485496752');" onmouseout="out('5853075131485496752');" style=""> 413             final AppAuthConfiguration configuration = createAppAuthConfiguration(                       </span>
<span class="-3586276280695435831" onmouseenter="enter('-3586276280695435831');" onmouseout="out('-3586276280695435831');" style=""><abbr title=" 414                     createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders)"> 414                     createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHðŸ”µ</abbr></span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 415             );                                                                                           </span>
<span  style=""> 416                                                                                                          </span>
<span class="-598339291394324639" onmouseenter="enter('-598339291394324639');" onmouseout="out('-598339291394324639');" style=""><abbr title=" 417             AuthorizationService authService = new AuthorizationService(this.reactContext, configuration);"> 417             AuthorizationService authService = new AuthorizationService(this.reactContext, configuration)ðŸ”µ</abbr></span>
<span  style=""> 418                                                                                                          </span>
<span class="6152215567678252770" onmouseenter="enter('6152215567678252770');" onmouseout="out('6152215567678252770');" style=""><abbr title=" 419             TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap);"> 419             TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap)ðŸ”µ</abbr></span>
<span  style=""> 420                                                                                                          </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 421             AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 421             AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TðŸ”µ</abbr></span>
<span  style=""> 422                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 423                 @Override                                                                                </span>
<span class="-8262795349130604582" onmouseenter="enter('-8262795349130604582');" onmouseout="out('-8262795349130604582');" style=""> 424                 public void onTokenRequestCompleted(                                                     </span>
<span class="5619805881636115456" onmouseenter="enter('5619805881636115456');" onmouseout="out('5619805881636115456');" style=""> 425                         TokenResponse resp, AuthorizationException ex) {                                 </span>
<span class="7476284757153148856" onmouseenter="enter('7476284757153148856');" onmouseout="out('7476284757153148856');" style=""> 426                     if (resp != null) {                                                                  </span>
<span class="7607526798956663360" onmouseenter="enter('7607526798956663360');" onmouseout="out('7607526798956663360');" style=""> 427                         WritableMap map = TokenResponseFactory.tokenResponseToMap(resp, response);       </span>
<span class="-6045783056504489326" onmouseenter="enter('-6045783056504489326');" onmouseout="out('-6045783056504489326');" style=""> 428                         if (authorizePromise != null) {                                                  </span>
<span class="-4073221780338751137" onmouseenter="enter('-4073221780338751137');" onmouseout="out('-4073221780338751137');" style=""> 429                             authorizePromise.resolve(map);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 430                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 431                     } else {                                                                             </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 432                         if (promise != null) {                                                           </span>
<span class="-1873248496991044419" onmouseenter="enter('-1873248496991044419');" onmouseout="out('-1873248496991044419');" style=""> 433                             promise.reject(&quot;token_exchange_failed&quot;, getErrorMessage(ex));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 434                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 435                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 437             };                                                                                           </span>
<span  style=""> 438                                                                                                          </span>
<span class="-7911542703683536912" onmouseenter="enter('-7911542703683536912');" onmouseout="out('-7911542703683536912');" style=""> 439             if (this.clientSecret != null) {                                                             </span>
<span class="-3188745194840831156" onmouseenter="enter('-3188745194840831156');" onmouseout="out('-3188745194840831156');" style=""><abbr title=" 440                 ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMethod);"> 440                 ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 441                 authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);        </span>
<span  style=""> 442                                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 443             } else {                                                                                     </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 444                 authService.performTokenRequest(tokenRequest, tokenResponseCallback);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445             }                                                                                            </span>
<span  style=""> 446                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 447         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448     }                                                                                                    </span>
<span  style=""> 449                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 450     /*                                                                                                   </span>
<span class="3813849031296026505" onmouseenter="enter('3813849031296026505');" onmouseout="out('3813849031296026505');" style=""> 451      * Perform dynamic client registration with the provided configuration                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 452      */                                                                                                  </span>
<span class="340189295193181696" onmouseenter="enter('340189295193181696');" onmouseout="out('340189295193181696');" style=""> 453     private void registerWithConfiguration(                                                              </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 454         final AuthorizationServiceConfiguration serviceConfiguration,                                    </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 455         final AppAuthConfiguration appAuthConfiguration,                                                 </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 456         final ReadableArray redirectUris,                                                                </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 457         final ReadableArray responseTypes,                                                               </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 458         final ReadableArray grantTypes,                                                                  </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 459         final String subjectType,                                                                        </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 460         final String tokenEndpointAuthMethod,                                                            </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 461         final Map&lt;String, String&gt; additionalParametersMap,                                               </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 462         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 463     ) {                                                                                                  </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 464         final Context context = this.reactContext;                                                       </span>
<span  style=""> 465                                                                                                          </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 466         AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);      </span>
<span  style=""> 467                                                                                                          </span>
<span class="-8453810682683042065" onmouseenter="enter('-8453810682683042065');" onmouseout="out('-8453810682683042065');" style=""> 468         RegistrationRequest.Builder registrationRequestBuilder =                                         </span>
<span class="-7581367313981499795" onmouseenter="enter('-7581367313981499795');" onmouseout="out('-7581367313981499795');" style=""> 469                 new RegistrationRequest.Builder(                                                         </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 470                     serviceConfiguration,                                                                </span>
<span class="4262694259998445935" onmouseenter="enter('4262694259998445935');" onmouseout="out('4262694259998445935');" style=""> 471                     arrayToUriList(redirectUris)                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 472                 )                                                                                        </span>
<span class="4677539456481393469" onmouseenter="enter('4677539456481393469');" onmouseout="out('4677539456481393469');" style=""> 473                     .setAdditionalParameters(additionalParametersMap);                                   </span>
<span  style=""> 474                                                                                                          </span>
<span class="382071555491173350" onmouseenter="enter('382071555491173350');" onmouseout="out('382071555491173350');" style=""> 475         if (responseTypes != null) {                                                                     </span>
<span class="2691057769499642705" onmouseenter="enter('2691057769499642705');" onmouseout="out('2691057769499642705');" style=""> 476             registrationRequestBuilder.setResponseTypeValues(arrayToList(responseTypes));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="461598363295361308" onmouseenter="enter('461598363295361308');" onmouseout="out('461598363295361308');" style=""> 479         if (grantTypes != null) {                                                                        </span>
<span class="1681210474388500870" onmouseenter="enter('1681210474388500870');" onmouseout="out('1681210474388500870');" style=""> 480             registrationRequestBuilder.setGrantTypeValues(arrayToList(grantTypes));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481         }                                                                                                </span>
<span  style=""> 482                                                                                                          </span>
<span class="-2982605970687904529" onmouseenter="enter('-2982605970687904529');" onmouseout="out('-2982605970687904529');" style=""> 483         if (subjectType != null) {                                                                       </span>
<span class="3235050174363133383" onmouseenter="enter('3235050174363133383');" onmouseout="out('3235050174363133383');" style=""> 484             registrationRequestBuilder.setSubjectType(subjectType);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485         }                                                                                                </span>
<span  style=""> 486                                                                                                          </span>
<span class="-3523548169086540196" onmouseenter="enter('-3523548169086540196');" onmouseout="out('-3523548169086540196');" style=""> 487         if (tokenEndpointAuthMethod != null) {                                                           </span>
<span class="8002810479156997291" onmouseenter="enter('8002810479156997291');" onmouseout="out('8002810479156997291');" style=""> 488             registrationRequestBuilder.setTokenEndpointAuthenticationMethod(tokenEndpointAuthMethod);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 489         }                                                                                                </span>
<span  style=""> 490                                                                                                          </span>
<span class="-8152299436158074794" onmouseenter="enter('-8152299436158074794');" onmouseout="out('-8152299436158074794');" style=""> 491         RegistrationRequest registrationRequest = registrationRequestBuilder.build();                    </span>
<span  style=""> 492                                                                                                          </span>
<span class="2043221784460883972" onmouseenter="enter('2043221784460883972');" onmouseout="out('2043221784460883972');" style=""><abbr title=" 493         AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.RegistrationResponseCallback() {"> 493         AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizatioðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 494             @Override                                                                                    </span>
<span class="89148758474091775" onmouseenter="enter('89148758474091775');" onmouseout="out('89148758474091775');" style=""><abbr title=" 495             public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizationException ex) {"> 495             public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @NullableðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 496                 if (response != null) {                                                                  </span>
<span class="3678270738704120650" onmouseenter="enter('3678270738704120650');" onmouseout="out('3678270738704120650');" style=""> 497                     WritableMap map = RegistrationResponseFactory.registrationResponseToMap(response);   </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 498                     promise.resolve(map);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 499                 } else {                                                                                 </span>
<span class="-5586663357435466975" onmouseenter="enter('-5586663357435466975');" onmouseout="out('-5586663357435466975');" style=""> 500                     promise.reject(&quot;registration_failed&quot;, getErrorMessage(ex));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 503         };                                                                                               </span>
<span  style=""> 504                                                                                                          </span>
<span class="2922372767993768868" onmouseenter="enter('2922372767993768868');" onmouseout="out('2922372767993768868');" style=""> 505         authService.performRegistrationRequest(registrationRequest, registrationResponseCallback);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506     }                                                                                                    </span>
<span  style=""> 507                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 508     /*                                                                                                   </span>
<span class="-3037424821439688076" onmouseenter="enter('-3037424821439688076');" onmouseout="out('-3037424821439688076');" style=""> 509      * Authorize user with the provided configuration                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 510      */                                                                                                  </span>
<span class="-1686698148972257501" onmouseenter="enter('-1686698148972257501');" onmouseout="out('-1686698148972257501');" style=""> 511     private void authorizeWithConfiguration(                                                             </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 512             final AuthorizationServiceConfiguration serviceConfiguration,                                </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 513             final AppAuthConfiguration appAuthConfiguration,                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 514             final String clientId,                                                                       </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 515             final ReadableArray scopes,                                                                  </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 516             final String redirectUrl,                                                                    </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 517             final Boolean usePKCE,                                                                       </span>
<span class="4591131233701235058" onmouseenter="enter('4591131233701235058');" onmouseout="out('4591131233701235058');" style=""> 518             final Map&lt;String, String&gt; additionalParametersMap                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 519     ) {                                                                                                  </span>
<span  style=""> 520                                                                                                          </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 521         String scopesString = null;                                                                      </span>
<span  style=""> 522                                                                                                          </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 523         if (scopes != null) {                                                                            </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 524             scopesString = this.arrayToString(scopes);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525         }                                                                                                </span>
<span  style=""> 526                                                                                                          </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 527         final Context context = this.reactContext;                                                       </span>
<span class="-4913832152651687292" onmouseenter="enter('-4913832152651687292');" onmouseout="out('-4913832152651687292');" style=""> 528         final Activity currentActivity = getCurrentActivity();                                           </span>
<span  style=""> 529                                                                                                          </span>
<span class="1615045173536817183" onmouseenter="enter('1615045173536817183');" onmouseout="out('1615045173536817183');" style=""> 530         AuthorizationRequest.Builder authRequestBuilder =                                                </span>
<span class="8630572254279098967" onmouseenter="enter('8630572254279098967');" onmouseout="out('8630572254279098967');" style=""> 531                 new AuthorizationRequest.Builder(                                                        </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 532                         serviceConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 533                         clientId,                                                                        </span>
<span class="4849618716626806999" onmouseenter="enter('4849618716626806999');" onmouseout="out('4849618716626806999');" style=""> 534                         ResponseTypeValues.CODE,                                                         </span>
<span class="-1639145692422133689" onmouseenter="enter('-1639145692422133689');" onmouseout="out('-1639145692422133689');" style=""> 535                         Uri.parse(redirectUrl)                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 536                 );                                                                                       </span>
<span  style=""> 537                                                                                                          </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 538         if (scopesString != null) {                                                                      </span>
<span class="-8218576309450527961" onmouseenter="enter('-8218576309450527961');" onmouseout="out('-8218576309450527961');" style=""> 539             authRequestBuilder.setScope(scopesString);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540         }                                                                                                </span>
<span  style=""> 541                                                                                                          </span>
<span  style=""> 542                                                                                                          </span>
<span class="7149068665077353053" onmouseenter="enter('7149068665077353053');" onmouseout="out('7149068665077353053');" style=""> 543         if (additionalParametersMap != null) {                                                           </span>
<span class="-6137327941719445172" onmouseenter="enter('-6137327941719445172');" onmouseout="out('-6137327941719445172');" style=""> 544             // handle additional parameters separately to avoid exceptions from AppAuth                  </span>
<span class="-4729676460784236302" onmouseenter="enter('-4729676460784236302');" onmouseout="out('-4729676460784236302');" style=""> 545             if (additionalParametersMap.containsKey(&quot;display&quot;)) {                                        </span>
<span class="6740086842281271815" onmouseenter="enter('6740086842281271815');" onmouseout="out('6740086842281271815');" style=""> 546                 authRequestBuilder.setDisplay(additionalParametersMap.get(&quot;display&quot;));                   </span>
<span class="5478676394718524231" onmouseenter="enter('5478676394718524231');" onmouseout="out('5478676394718524231');" style=""> 547                 additionalParametersMap.remove(&quot;display&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548             }                                                                                            </span>
<span class="-5162308638975991351" onmouseenter="enter('-5162308638975991351');" onmouseout="out('-5162308638975991351');" style=""> 549             if (additionalParametersMap.containsKey(&quot;login_hint&quot;)) {                                     </span>
<span class="7478322337196261432" onmouseenter="enter('7478322337196261432');" onmouseout="out('7478322337196261432');" style=""> 550                 authRequestBuilder.setLoginHint(additionalParametersMap.get(&quot;login_hint&quot;));              </span>
<span class="-3825577662921277200" onmouseenter="enter('-3825577662921277200');" onmouseout="out('-3825577662921277200');" style=""> 551                 additionalParametersMap.remove(&quot;login_hint&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552             }                                                                                            </span>
<span class="-8254180626457365202" onmouseenter="enter('-8254180626457365202');" onmouseout="out('-8254180626457365202');" style=""> 553             if (additionalParametersMap.containsKey(&quot;prompt&quot;)) {                                         </span>
<span class="2585369211918110761" onmouseenter="enter('2585369211918110761');" onmouseout="out('2585369211918110761');" style=""> 554                 authRequestBuilder.setPrompt(additionalParametersMap.get(&quot;prompt&quot;));                     </span>
<span class="290019989822766287" onmouseenter="enter('290019989822766287');" onmouseout="out('290019989822766287');" style=""> 555                 additionalParametersMap.remove(&quot;prompt&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556             }                                                                                            </span>
<span  style=""> 557                                                                                                          </span>
<span class="-1433627721318603910" onmouseenter="enter('-1433627721318603910');" onmouseout="out('-1433627721318603910');" style=""> 558             authRequestBuilder.setAdditionalParameters(additionalParametersMap);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559         }                                                                                                </span>
<span  style=""> 560                                                                                                          </span>
<span class="6295746505532947076" onmouseenter="enter('6295746505532947076');" onmouseout="out('6295746505532947076');" style=""> 561         if (!usePKCE) {                                                                                  </span>
<span class="211047115781987373" onmouseenter="enter('211047115781987373');" onmouseout="out('211047115781987373');" style=""> 562             authRequestBuilder.setCodeVerifier(null);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563         }                                                                                                </span>
<span  style=""> 564                                                                                                          </span>
<span class="2874496759892237047" onmouseenter="enter('2874496759892237047');" onmouseout="out('2874496759892237047');" style=""> 565         AuthorizationRequest authRequest = authRequestBuilder.build();                                   </span>
<span  style=""> 566                                                                                                          </span>
<span class="4248167488592758879" onmouseenter="enter('4248167488592758879');" onmouseout="out('4248167488592758879');" style=""> 567         if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) {               </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 568             AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);  </span>
<span class="-8712988972948484879" onmouseenter="enter('-8712988972948484879');" onmouseout="out('-8712988972948484879');" style=""> 569             Intent authIntent = authService.getAuthorizationRequestIntent(authRequest);                  </span>
<span  style=""> 570                                                                                                          </span>
<span class="-1768672139093830544" onmouseenter="enter('-1768672139093830544');" onmouseout="out('-1768672139093830544');" style=""> 571             currentActivity.startActivityForResult(authIntent, 0);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 572         } else {                                                                                         </span>
<span class="-5574677103641269793" onmouseenter="enter('-5574677103641269793');" onmouseout="out('-5574677103641269793');" style=""><abbr title=" 573             AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguration);"> 573             AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguraðŸ”µ</abbr></span>
<span class="-921350943484849229" onmouseenter="enter('-921350943484849229');" onmouseout="out('-921350943484849229');" style=""> 574             PendingIntent pendingIntent = currentActivity.createPendingResult(0, new Intent(), 0);       </span>
<span  style=""> 575                                                                                                          </span>
<span class="5462088869311657545" onmouseenter="enter('5462088869311657545');" onmouseout="out('5462088869311657545');" style=""> 576             authService.performAuthorizationRequest(authRequest, pendingIntent);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 578     }                                                                                                    </span>
<span  style=""> 579                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 580     /*                                                                                                   </span>
<span class="8814346366745541198" onmouseenter="enter('8814346366745541198');" onmouseout="out('8814346366745541198');" style=""> 581      * Refresh authentication token with the provided configuration                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 582      */                                                                                                  </span>
<span class="-7235916799046070057" onmouseenter="enter('-7235916799046070057');" onmouseout="out('-7235916799046070057');" style=""> 583     private void refreshWithConfiguration(                                                               </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 584             final AuthorizationServiceConfiguration serviceConfiguration,                                </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 585             final AppAuthConfiguration appAuthConfiguration,                                             </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 586             final String refreshToken,                                                                   </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 587             final String clientId,                                                                       </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 588             final ReadableArray scopes,                                                                  </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 589             final String redirectUrl,                                                                    </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 590             final Map&lt;String, String&gt; additionalParametersMap,                                           </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 591             final String clientAuthMethod,                                                               </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 592             final String clientSecret,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 593             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 594     ) {                                                                                                  </span>
<span  style=""> 595                                                                                                          </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 596         String scopesString = null;                                                                      </span>
<span  style=""> 597                                                                                                          </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 598         if (scopes != null) {                                                                            </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 599             scopesString = this.arrayToString(scopes);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600         }                                                                                                </span>
<span  style=""> 601                                                                                                          </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 602         final Context context = this.reactContext;                                                       </span>
<span  style=""> 603                                                                                                          </span>
<span class="-1882592220700818910" onmouseenter="enter('-1882592220700818910');" onmouseout="out('-1882592220700818910');" style=""> 604         TokenRequest.Builder tokenRequestBuilder =                                                       </span>
<span class="-7570030938974274508" onmouseenter="enter('-7570030938974274508');" onmouseout="out('-7570030938974274508');" style=""> 605                 new TokenRequest.Builder(                                                                </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 606                         serviceConfiguration,                                                            </span>
<span class="-3028793166139754818" onmouseenter="enter('-3028793166139754818');" onmouseout="out('-3028793166139754818');" style=""> 607                         clientId                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 608                 )                                                                                        </span>
<span class="5149869235939087614" onmouseenter="enter('5149869235939087614');" onmouseout="out('5149869235939087614');" style=""> 609                         .setRefreshToken(refreshToken)                                                   </span>
<span class="-4168308848344323961" onmouseenter="enter('-4168308848344323961');" onmouseout="out('-4168308848344323961');" style=""> 610                         .setRedirectUri(Uri.parse(redirectUrl));                                         </span>
<span  style=""> 611                                                                                                          </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 612         if (scopesString != null) {                                                                      </span>
<span class="-4940100242303343354" onmouseenter="enter('-4940100242303343354');" onmouseout="out('-4940100242303343354');" style=""> 613             tokenRequestBuilder.setScope(scopesString);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 614         }                                                                                                </span>
<span  style=""> 615                                                                                                          </span>
<span class="1982926752875631058" onmouseenter="enter('1982926752875631058');" onmouseout="out('1982926752875631058');" style=""> 616         if (!additionalParametersMap.isEmpty()) {                                                        </span>
<span class="6791703352530289305" onmouseenter="enter('6791703352530289305');" onmouseout="out('6791703352530289305');" style=""> 617             tokenRequestBuilder.setAdditionalParameters(additionalParametersMap);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 618         }                                                                                                </span>
<span  style=""> 619                                                                                                          </span>
<span class="6300215370198990899" onmouseenter="enter('6300215370198990899');" onmouseout="out('6300215370198990899');" style=""> 620         TokenRequest tokenRequest = tokenRequestBuilder.build();                                         </span>
<span  style=""> 621                                                                                                          </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 622         AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);      </span>
<span  style=""> 623                                                                                                          </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 624         AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 624         AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 625             @Override                                                                                    </span>
<span class="-9019017716153453132" onmouseenter="enter('-9019017716153453132');" onmouseout="out('-9019017716153453132');" style=""><abbr title=" 626             public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationException ex) {"> 626             public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 627                 if (response != null) {                                                                  </span>
<span class="-4071880271889138129" onmouseenter="enter('-4071880271889138129');" onmouseout="out('-4071880271889138129');" style=""> 628                     WritableMap map = TokenResponseFactory.tokenResponseToMap(response);                 </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 629                     promise.resolve(map);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 630                 } else {                                                                                 </span>
<span class="-8974399670180994057" onmouseenter="enter('-8974399670180994057');" onmouseout="out('-8974399670180994057');" style=""> 631                     promise.reject(&quot;token_refresh_failed&quot;, getErrorMessage(ex));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 634         };                                                                                               </span>
<span  style=""> 635                                                                                                          </span>
<span  style=""> 636                                                                                                          </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 637         if (clientSecret != null) {                                                                      </span>
<span class="-3955443834186652225" onmouseenter="enter('-3955443834186652225');" onmouseout="out('-3955443834186652225');" style=""><abbr title=" 638             ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethod);"> 638             ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethodðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 639             authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);            </span>
<span  style=""> 640                                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 641         } else {                                                                                         </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 642             authService.performTokenRequest(tokenRequest, tokenResponseCallback);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 643         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644     }                                                                                                    </span>
<span  style=""> 645                                                                                                          </span>
<span class="2930218534777413873" onmouseenter="enter('2930218534777413873');" onmouseout="out('2930218534777413873');" style=""> 646     private void parseHeaderMap (ReadableMap headerMap) {                                                </span>
<span class="-6316489241675673035" onmouseenter="enter('-6316489241675673035');" onmouseout="out('-6316489241675673035');" style=""> 647         if (headerMap == null) {                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 648             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649         }                                                                                                </span>
<span class="5010343160007659678" onmouseenter="enter('5010343160007659678');" onmouseout="out('5010343160007659678');" style=""> 650         if (headerMap.hasKey(&quot;register&quot;) &amp;&amp; headerMap.getType(&quot;register&quot;) == ReadableType.Map) {         </span>
<span class="-7734955563477546094" onmouseenter="enter('-7734955563477546094');" onmouseout="out('-7734955563477546094');" style=""> 651             this.registrationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;register&quot;));</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652         }                                                                                                </span>
<span class="-8530407112624237580" onmouseenter="enter('-8530407112624237580');" onmouseout="out('-8530407112624237580');" style=""> 653         if (headerMap.hasKey(&quot;authorize&quot;) &amp;&amp; headerMap.getType(&quot;authorize&quot;) == ReadableType.Map) {       </span>
<span class="762039099095363738" onmouseenter="enter('762039099095363738');" onmouseout="out('762039099095363738');" style=""><abbr title=" 654             this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;));"> 654             this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655         }                                                                                                </span>
<span class="5768179141818569002" onmouseenter="enter('5768179141818569002');" onmouseout="out('5768179141818569002');" style=""> 656         if (headerMap.hasKey(&quot;token&quot;) &amp;&amp; headerMap.getType(&quot;token&quot;) == ReadableType.Map) {               </span>
<span class="-4870803436115877491" onmouseenter="enter('-4870803436115877491');" onmouseout="out('-4870803436115877491');" style=""> 657             this.tokenRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;token&quot;));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span  style=""> 659                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660     }                                                                                                    </span>
<span  style=""> 661                                                                                                          </span>
<span class="-2276636657842571599" onmouseenter="enter('-2276636657842571599');" onmouseout="out('-2276636657842571599');" style=""> 662     private ClientAuthentication getClientAuthentication(String clientSecret, String clientAuthMethod) { </span>
<span class="4736948393768361142" onmouseenter="enter('4736948393768361142');" onmouseout="out('4736948393768361142');" style=""> 663         if (clientAuthMethod.equals(&quot;post&quot;)) {                                                           </span>
<span class="4033722210949459980" onmouseenter="enter('4033722210949459980');" onmouseout="out('4033722210949459980');" style=""> 664             return new ClientSecretPost(clientSecret);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665         }                                                                                                </span>
<span  style=""> 666                                                                                                          </span>
<span class="-1107687855860572488" onmouseenter="enter('-1107687855860572488');" onmouseout="out('-1107687855860572488');" style=""> 667         return new ClientSecretBasic(clientSecret);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668     }                                                                                                    </span>
<span  style=""> 669                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 670     /*                                                                                                   </span>
<span class="5090378039448834807" onmouseenter="enter('5090378039448834807');" onmouseout="out('5090378039448834807');" style=""> 671      * Return error information if it is available                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 672      */                                                                                                  </span>
<span class="7325111704754615468" onmouseenter="enter('7325111704754615468');" onmouseout="out('7325111704754615468');" style=""> 673     private String getErrorMessage(AuthorizationException ex){                                           </span>
<span class="6233744395473659458" onmouseenter="enter('6233744395473659458');" onmouseout="out('6233744395473659458');" style=""> 674         if(ex.errorDescription == null &amp;&amp; ex.error != null)                                              </span>
<span class="8212520076730053042" onmouseenter="enter('8212520076730053042');" onmouseout="out('8212520076730053042');" style=""> 675             return ex.error;                                                                             </span>
<span class="-944119096152079377" onmouseenter="enter('-944119096152079377');" onmouseout="out('-944119096152079377');" style=""> 676         return ex.errorDescription;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677     }                                                                                                    </span>
<span  style=""> 678                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 679     /*                                                                                                   </span>
<span class="6638112631744326921" onmouseenter="enter('6638112631744326921');" onmouseout="out('6638112631744326921');" style=""> 680      * Create a space-delimited string from an array                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 681      */                                                                                                  </span>
<span class="2843730177292313139" onmouseenter="enter('2843730177292313139');" onmouseout="out('2843730177292313139');" style=""> 682     private String arrayToString(ReadableArray array) {                                                  </span>
<span class="-8236782342056480869" onmouseenter="enter('-8236782342056480869');" onmouseout="out('-8236782342056480869');" style=""> 683         StringBuilder strBuilder = new StringBuilder();                                                  </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 684         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="-7800557187785605413" onmouseenter="enter('-7800557187785605413');" onmouseout="out('-7800557187785605413');" style=""> 685             if (i != 0) {                                                                                </span>
<span class="-4449242394605741248" onmouseenter="enter('-4449242394605741248');" onmouseout="out('-4449242394605741248');" style=""> 686                 strBuilder.append(&#x27; &#x27;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687             }                                                                                            </span>
<span class="-8205116312766504963" onmouseenter="enter('-8205116312766504963');" onmouseout="out('-8205116312766504963');" style=""> 688             strBuilder.append(array.getString(i));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689         }                                                                                                </span>
<span class="-7597052729024482685" onmouseenter="enter('-7597052729024482685');" onmouseout="out('-7597052729024482685');" style=""> 690         return strBuilder.toString();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691     }                                                                                                    </span>
<span  style=""> 692                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 693     /*                                                                                                   </span>
<span class="-7672611238824893788" onmouseenter="enter('-7672611238824893788');" onmouseout="out('-7672611238824893788');" style=""> 694      * Create a string list from an array of strings                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 695      */                                                                                                  </span>
<span class="8933886143748191998" onmouseenter="enter('8933886143748191998');" onmouseout="out('8933886143748191998');" style=""> 696     private List&lt;String&gt; arrayToList(ReadableArray array) {                                              </span>
<span class="3701551209507079484" onmouseenter="enter('3701551209507079484');" onmouseout="out('3701551209507079484');" style=""> 697         ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();                                                      </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 698         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="3110930347141835410" onmouseenter="enter('3110930347141835410');" onmouseout="out('3110930347141835410');" style=""> 699             list.add(array.getString(i));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 700         }                                                                                                </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 701         return list;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 702     }                                                                                                    </span>
<span  style=""> 703                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 704     /*                                                                                                   </span>
<span class="4411172121007664287" onmouseenter="enter('4411172121007664287');" onmouseout="out('4411172121007664287');" style=""> 705      * Create a Uri list from an array of strings                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 706      */                                                                                                  </span>
<span class="502202896426029305" onmouseenter="enter('502202896426029305');" onmouseout="out('502202896426029305');" style=""> 707     private List&lt;Uri&gt; arrayToUriList(ReadableArray array) {                                              </span>
<span class="-8321772486199533839" onmouseenter="enter('-8321772486199533839');" onmouseout="out('-8321772486199533839');" style=""> 708         ArrayList&lt;Uri&gt; list = new ArrayList&lt;&gt;();                                                         </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 709         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="3593345693160557831" onmouseenter="enter('3593345693160557831');" onmouseout="out('3593345693160557831');" style=""> 710             list.add(Uri.parse(array.getString(i)));                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711         }                                                                                                </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 712         return list;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 713     }                                                                                                    </span>
<span  style=""> 714                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 715     /*                                                                                                   </span>
<span class="5214794569700518887" onmouseenter="enter('5214794569700518887');" onmouseout="out('5214794569700518887');" style=""> 716      * Create an App Auth configuration using the provided connection builder                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 717      */                                                                                                  </span>
<span class="-5342361748775304563" onmouseenter="enter('-5342361748775304563');" onmouseout="out('-5342361748775304563');" style=""> 718     private AppAuthConfiguration createAppAuthConfiguration(ConnectionBuilder connectionBuilder) {       </span>
<span class="-6961363017801118708" onmouseenter="enter('-6961363017801118708');" onmouseout="out('-6961363017801118708');" style=""> 719         return new AppAuthConfiguration                                                                  </span>
<span class="370567544488026574" onmouseenter="enter('370567544488026574');" onmouseout="out('370567544488026574');" style=""> 720                 .Builder()                                                                               </span>
<span class="6932817517014214209" onmouseenter="enter('6932817517014214209');" onmouseout="out('6932817517014214209');" style=""> 721                 .setConnectionBuilder(connectionBuilder)                                                 </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 722                 .build();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 723     }                                                                                                    </span>
<span  style=""> 724                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 725     /*                                                                                                   </span>
<span class="2307564597312892215" onmouseenter="enter('2307564597312892215');" onmouseout="out('2307564597312892215');" style=""> 726      *  Create appropriate connection builder based on provided settings                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 727      */                                                                                                  </span>
<span class="-5286170720144338680" onmouseenter="enter('-5286170720144338680');" onmouseout="out('-5286170720144338680');" style=""><abbr title=" 728     private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, String&gt; headers) {"> 728     private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, StrinðŸ”µ</abbr></span>
<span class="7318015076305824949" onmouseenter="enter('7318015076305824949');" onmouseout="out('7318015076305824949');" style=""> 729         ConnectionBuilder proxiedBuilder;                                                                </span>
<span  style=""> 730                                                                                                          </span>
<span class="6155061091636674075" onmouseenter="enter('6155061091636674075');" onmouseout="out('6155061091636674075');" style=""> 731         if (allowInsecureConnections) {                                                                  </span>
<span class="-8652069864919613967" onmouseenter="enter('-8652069864919613967');" onmouseout="out('-8652069864919613967');" style=""> 732             proxiedBuilder =UnsafeConnectionBuilder.INSTANCE;                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 733         } else {                                                                                         </span>
<span class="-3823294731313489124" onmouseenter="enter('-3823294731313489124');" onmouseout="out('-3823294731313489124');" style=""> 734             proxiedBuilder = DefaultConnectionBuilder.INSTANCE;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735         }                                                                                                </span>
<span  style=""> 736                                                                                                          </span>
<span class="-321326358809916252" onmouseenter="enter('-321326358809916252');" onmouseout="out('-321326358809916252');" style=""> 737         CustomConnectionBuilder customConnection = new CustomConnectionBuilder(proxiedBuilder);          </span>
<span class="-5872856843685271172" onmouseenter="enter('-5872856843685271172');" onmouseout="out('-5872856843685271172');" style=""> 738         if (headers != null) {                                                                           </span>
<span class="-4120878389218127223" onmouseenter="enter('-4120878389218127223');" onmouseout="out('-4120878389218127223');" style=""> 739             customConnection.setHeaders(headers);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740         }                                                                                                </span>
<span  style=""> 741                                                                                                          </span>
<span class="5629827582834827587" onmouseenter="enter('5629827582834827587');" onmouseout="out('5629827582834827587');" style=""> 742         return customConnection;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 743     }                                                                                                    </span>
<span  style=""> 744                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 745     /*                                                                                                   </span>
<span class="9187662928809351886" onmouseenter="enter('9187662928809351886');" onmouseout="out('9187662928809351886');" style=""> 746      *  Replicated private method from AuthorizationServiceConfiguration                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 747      */                                                                                                  </span>
<span class="2622836649973257205" onmouseenter="enter('2622836649973257205');" onmouseout="out('2622836649973257205');" style=""> 748     private Uri buildConfigurationUriFromIssuer(Uri openIdConnectIssuerUri) {                            </span>
<span class="-830811466431368071" onmouseenter="enter('-830811466431368071');" onmouseout="out('-830811466431368071');" style=""> 749         return openIdConnectIssuerUri.buildUpon()                                                        </span>
<span class="7258170423676519924" onmouseenter="enter('7258170423676519924');" onmouseout="out('7258170423676519924');" style=""> 750                 .appendPath(AuthorizationServiceConfiguration.WELL_KNOWN_PATH)                           </span>
<span class="-3903955623180377764" onmouseenter="enter('-3903955623180377764');" onmouseout="out('-3903955623180377764');" style=""> 751                 .appendPath(AuthorizationServiceConfiguration.OPENID_CONFIGURATION_RESOURCE)             </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 752                 .build();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 753     }                                                                                                    </span>
<span  style=""> 754                                                                                                          </span>
<span class="3122274151060887299" onmouseenter="enter('3122274151060887299');" onmouseout="out('3122274151060887299');" style=""><abbr title=" 755     private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguration) throws Exception {"> 755     private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceðŸ”µ</abbr></span>
<span class="4275545280692735139" onmouseenter="enter('4275545280692735139');" onmouseout="out('4275545280692735139');" style=""> 756         if (!serviceConfiguration.hasKey(&quot;authorizationEndpoint&quot;)) {                                     </span>
<span class="3986521017730318395" onmouseenter="enter('3986521017730318395');" onmouseout="out('3986521017730318395');" style=""> 757             throw new Exception(&quot;serviceConfiguration passed without an authorizationEndpoint&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758         }                                                                                                </span>
<span  style=""> 759                                                                                                          </span>
<span class="5638598812511759739" onmouseenter="enter('5638598812511759739');" onmouseout="out('5638598812511759739');" style=""> 760         if (!serviceConfiguration.hasKey(&quot;tokenEndpoint&quot;)) {                                             </span>
<span class="7444064849592215652" onmouseenter="enter('7444064849592215652');" onmouseout="out('7444064849592215652');" style=""> 761             throw new Exception(&quot;serviceConfiguration passed without a tokenEndpoint&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 762         }                                                                                                </span>
<span  style=""> 763                                                                                                          </span>
<span class="-3941749567598770425" onmouseenter="enter('-3941749567598770425');" onmouseout="out('-3941749567598770425');" style=""> 764         Uri authorizationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;authorizationEndpoint&quot;));  </span>
<span class="4054930865548070446" onmouseenter="enter('4054930865548070446');" onmouseout="out('4054930865548070446');" style=""> 765         Uri tokenEndpoint = Uri.parse(serviceConfiguration.getString(&quot;tokenEndpoint&quot;));                  </span>
<span class="2264343622444418519" onmouseenter="enter('2264343622444418519');" onmouseout="out('2264343622444418519');" style=""> 766         Uri registrationEndpoint = null;                                                                 </span>
<span class="-4970643399788664483" onmouseenter="enter('-4970643399788664483');" onmouseout="out('-4970643399788664483');" style=""> 767         if (serviceConfiguration.hasKey(&quot;registrationEndpoint&quot;)) {                                       </span>
<span class="1609034589288005797" onmouseenter="enter('1609034589288005797');" onmouseout="out('1609034589288005797');" style=""> 768             registrationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;registrationEndpoint&quot;));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769         }                                                                                                </span>
<span  style=""> 770                                                                                                          </span>
<span class="-8455698330779530293" onmouseenter="enter('-8455698330779530293');" onmouseout="out('-8455698330779530293');" style=""> 771         return new AuthorizationServiceConfiguration(                                                    </span>
<span class="-9206356706352718453" onmouseenter="enter('-9206356706352718453');" onmouseout="out('-9206356706352718453');" style=""> 772                 authorizationEndpoint,                                                                   </span>
<span class="-6119344076232034280" onmouseenter="enter('-6119344076232034280');" onmouseout="out('-6119344076232034280');" style=""> 773                 tokenEndpoint,                                                                           </span>
<span class="-4224958759407269631" onmouseenter="enter('-4224958759407269631');" onmouseout="out('-4224958759407269631');" style=""> 774                 registrationEndpoint                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 775         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776     }                                                                                                    </span>
<span  style=""> 777                                                                                                          </span>
<span class="-4130257184876230563" onmouseenter="enter('-4130257184876230563');" onmouseout="out('-4130257184876230563');" style=""> 778     private void warmChromeCustomTab(Context context, final String issuer) {                             </span>
<span class="-4012796735492941375" onmouseenter="enter('-4012796735492941375');" onmouseout="out('-4012796735492941375');" style=""> 779         CustomTabsServiceConnection connection = new CustomTabsServiceConnection() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 780             @Override                                                                                    </span>
<span class="4306327880536035079" onmouseenter="enter('4306327880536035079');" onmouseout="out('4306327880536035079');" style=""> 781             public void onCustomTabsServiceConnected(ComponentName name, CustomTabsClient client) {      </span>
<span class="-5035114608817725139" onmouseenter="enter('-5035114608817725139');" onmouseout="out('-5035114608817725139');" style=""> 782                 client.warmup(0);                                                                        </span>
<span class="-5613023257304239322" onmouseenter="enter('-5613023257304239322');" onmouseout="out('-5613023257304239322');" style=""> 783                 CustomTabsSession session = client.newSession(new CustomTabsCallback());                 </span>
<span class="417819926325380348" onmouseenter="enter('417819926325380348');" onmouseout="out('417819926325380348');" style=""> 784                 if (session == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 785                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 786                 }                                                                                        </span>
<span class="-5956768039281383269" onmouseenter="enter('-5956768039281383269');" onmouseout="out('-5956768039281383269');" style=""> 787                 session.mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;Bundle&gt;emptyList());          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788             }                                                                                            </span>
<span  style=""> 789                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 790             @Override                                                                                    </span>
<span class="6231636659664649995" onmouseenter="enter('6231636659664649995');" onmouseout="out('6231636659664649995');" style=""> 791             public void onServiceDisconnected(ComponentName name) {                                      </span>
<span  style=""> 792                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 793             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 794         };                                                                                               </span>
<span class="5767142201781268255" onmouseenter="enter('5767142201781268255');" onmouseout="out('5767142201781268255');" style=""> 795         CustomTabsClient.bindCustomTabsService(context, CUSTOM_TAB_PACKAGE_NAME, connection);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 796     }                                                                                                    </span>
<span  style=""> 797                                                                                                          </span>
<span class="-1658212530082885279" onmouseenter="enter('-1658212530082885279');" onmouseout="out('-1658212530082885279');" style=""> 798     private boolean hasServiceConfiguration(@Nullable String issuer) {                                   </span>
<span class="3142036358572061785" onmouseenter="enter('3142036358572061785');" onmouseout="out('3142036358572061785');" style=""> 799         return issuer != null &amp;&amp; mServiceConfigurations.containsKey(issuer);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 800     }                                                                                                    </span>
<span  style=""> 801                                                                                                          </span>
<span class="4451430102422208639" onmouseenter="enter('4451430102422208639');" onmouseout="out('4451430102422208639');" style=""> 802     private AuthorizationServiceConfiguration getServiceConfiguration(@Nullable String issuer) {         </span>
<span class="5076090829869343760" onmouseenter="enter('5076090829869343760');" onmouseout="out('5076090829869343760');" style=""> 803         if (issuer == null) {                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 804             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 805         } else {                                                                                         </span>
<span class="-3187761823116610672" onmouseenter="enter('-3187761823116610672');" onmouseout="out('-3187761823116610672');" style=""> 806             return mServiceConfigurations.get(issuer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 808     }                                                                                                    </span>
<span  style=""> 809                                                                                                          </span>
<span class="1347888294933903664" onmouseenter="enter('1347888294933903664');" onmouseout="out('1347888294933903664');" style=""><abbr title=" 810     private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviceConfiguration) {"> 810     private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviðŸ”µ</abbr></span>
<span class="-2487039014584680663" onmouseenter="enter('-2487039014584680663');" onmouseout="out('-2487039014584680663');" style=""> 811         if (issuer != null) {                                                                            </span>
<span class="-69747729719258596" onmouseenter="enter('-69747729719258596');" onmouseout="out('-69747729719258596');" style=""> 812             mServiceConfigurations.put(issuer, serviceConfiguration);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 814     }                                                                                                    </span>
<span  style=""> 815                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 816     @Override                                                                                            </span>
<span class="-4337880705383881802" onmouseenter="enter('-4337880705383881802');" onmouseout="out('-4337880705383881802');" style=""> 817     public void onNewIntent(Intent intent) {                                                             </span>
<span  style=""> 818                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 819     }                                                                                                    </span>
<span  style=""> 820                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 821     @Override                                                                                            </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style=""> 822     public String getName() {                                                                            </span>
<span class="4315075324919368681" onmouseenter="enter('4315075324919368681');" onmouseout="out('4315075324919368681');" style=""> 823         return &quot;RNAppAuth&quot;;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 824     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825 }                                                                                                        </span>

























































































































































</pre></td>
                            <td><pre><span class="-6280296900167357794" onmouseenter="enter('-6280296900167357794');" onmouseout="out('-6280296900167357794');" style="">   1 package com.rnappauth;                                                                                   </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="2265467446931963889" onmouseenter="enter('2265467446931963889');" onmouseout="out('2265467446931963889');" style="">   4 import android.app.PendingIntent;                                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">   5 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7 import android.content.Intent;                                                                           </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8 import android.net.Uri;                                                                                  </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   9 import android.os.Bundle;                                                                                </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  10 import android.content.ActivityNotFoundException;                                                        </span>
<span class="-6436154409168942626" onmouseenter="enter('-6436154409168942626');" onmouseout="out('-6436154409168942626');" style="">  11 import androidx.annotation.Nullable;                                                                     </span>
<span class="-4621922491292668474" onmouseenter="enter('-4621922491292668474');" onmouseout="out('-4621922491292668474');" style="">  12 import androidx.browser.customtabs.CustomTabsCallback;                                                   </span>
<span class="5786009149739133921" onmouseenter="enter('5786009149739133921');" onmouseout="out('5786009149739133921');" style="">  13 import androidx.browser.customtabs.CustomTabsClient;                                                     </span>
<span class="6730446154443378273" onmouseenter="enter('6730446154443378273');" onmouseout="out('6730446154443378273');" style="">  14 import androidx.browser.customtabs.CustomTabsServiceConnection;                                          </span>
<span class="-3044346478057358458" onmouseenter="enter('-3044346478057358458');" onmouseout="out('-3044346478057358458');" style="">  15 import androidx.browser.customtabs.CustomTabsSession;                                                    </span>
<span  style="">  16                                                                                                          </span>
<span class="7327608205307094785" onmouseenter="enter('7327608205307094785');" onmouseout="out('7327608205307094785');" style="">  17 import com.facebook.react.bridge.ActivityEventListener;                                                  </span>
<span class="1744055796152404290" onmouseenter="enter('1744055796152404290');" onmouseout="out('1744055796152404290');" style="">  18 import com.facebook.react.bridge.ReactApplicationContext;                                                </span>
<span class="7756046764634890677" onmouseenter="enter('7756046764634890677');" onmouseout="out('7756046764634890677');" style="">  19 import com.facebook.react.bridge.ReactContextBaseJavaModule;                                             </span>
<span class="-7062843866366665780" onmouseenter="enter('-7062843866366665780');" onmouseout="out('-7062843866366665780');" style="">  20 import com.facebook.react.bridge.ReactMethod;                                                            </span>
<span class="-9114944870765420144" onmouseenter="enter('-9114944870765420144');" onmouseout="out('-9114944870765420144');" style="">  21 import com.facebook.react.bridge.Promise;                                                                </span>
<span class="3666939786570277423" onmouseenter="enter('3666939786570277423');" onmouseout="out('3666939786570277423');" style="">  22 import com.facebook.react.bridge.ReadableArray;                                                          </span>
<span class="5552486474970006352" onmouseenter="enter('5552486474970006352');" onmouseout="out('5552486474970006352');" style="">  23 import com.facebook.react.bridge.ReadableMap;                                                            </span>
<span class="-2689054124168074705" onmouseenter="enter('-2689054124168074705');" onmouseout="out('-2689054124168074705');" style="">  24 import com.facebook.react.bridge.WritableMap;                                                            </span>
<span class="7507448895670758430" onmouseenter="enter('7507448895670758430');" onmouseout="out('7507448895670758430');" style="">  25 import com.facebook.react.bridge.ReadableType;                                                           </span>
<span  style="">  26                                                                                                          </span>
<span class="2824452556317040091" onmouseenter="enter('2824452556317040091');" onmouseout="out('2824452556317040091');" style="">  27 import com.rnappauth.utils.MapUtil;                                                                      </span>
<span class="2320112657500195094" onmouseenter="enter('2320112657500195094');" onmouseout="out('2320112657500195094');" style="">  28 import com.rnappauth.utils.UnsafeConnectionBuilder;                                                      </span>
<span class="6146867944265222634" onmouseenter="enter('6146867944265222634');" onmouseout="out('6146867944265222634');" style="">  29 import com.rnappauth.utils.RegistrationResponseFactory;                                                  </span>
<span class="5385195114029684108" onmouseenter="enter('5385195114029684108');" onmouseout="out('5385195114029684108');" style="">  30 import com.rnappauth.utils.TokenResponseFactory;                                                         </span>
<span class="-7309342380344421476" onmouseenter="enter('-7309342380344421476');" onmouseout="out('-7309342380344421476');" style="">  31 import com.rnappauth.utils.CustomConnectionBuilder;                                                      </span>
<span  style="">  32                                                                                                          </span>
<span class="2084880808431135122" onmouseenter="enter('2084880808431135122');" onmouseout="out('2084880808431135122');" style="">  33 import net.openid.appauth.AppAuthConfiguration;                                                          </span>
<span class="-6153791587225110013" onmouseenter="enter('-6153791587225110013');" onmouseout="out('-6153791587225110013');" style="">  34 import net.openid.appauth.AuthorizationException;                                                        </span>
<span class="220855730882953420" onmouseenter="enter('220855730882953420');" onmouseout="out('220855730882953420');" style="">  35 import net.openid.appauth.AuthorizationRequest;                                                          </span>
<span class="3507212550601358175" onmouseenter="enter('3507212550601358175');" onmouseout="out('3507212550601358175');" style="">  36 import net.openid.appauth.AuthorizationResponse;                                                         </span>
<span class="6486087234581123017" onmouseenter="enter('6486087234581123017');" onmouseout="out('6486087234581123017');" style="">  37 import net.openid.appauth.AuthorizationService;                                                          </span>
<span class="-1918380963859750931" onmouseenter="enter('-1918380963859750931');" onmouseout="out('-1918380963859750931');" style="">  38 import net.openid.appauth.AuthorizationServiceConfiguration;                                             </span>
<span class="-1745886087889911862" onmouseenter="enter('-1745886087889911862');" onmouseout="out('-1745886087889911862');" style="">  39 import net.openid.appauth.ClientAuthentication;                                                          </span>
<span class="5802881313983385714" onmouseenter="enter('5802881313983385714');" onmouseout="out('5802881313983385714');" style="">  40 import net.openid.appauth.ClientSecretBasic;                                                             </span>
<span class="6044047429679939107" onmouseenter="enter('6044047429679939107');" onmouseout="out('6044047429679939107');" style="">  41 import net.openid.appauth.ClientSecretPost;                                                              </span>
<span class="2300124290120821674" onmouseenter="enter('2300124290120821674');" onmouseout="out('2300124290120821674');" style="">  42 import net.openid.appauth.RegistrationRequest;                                                           </span>
<span class="8892208418569385403" onmouseenter="enter('8892208418569385403');" onmouseout="out('8892208418569385403');" style="">  43 import net.openid.appauth.RegistrationResponse;                                                          </span>
<span class="-7057741429751790751" onmouseenter="enter('-7057741429751790751');" onmouseout="out('-7057741429751790751');" style="">  44 import net.openid.appauth.ResponseTypeValues;                                                            </span>
<span class="7041795251639894294" onmouseenter="enter('7041795251639894294');" onmouseout="out('7041795251639894294');" style="">  45 import net.openid.appauth.TokenResponse;                                                                 </span>
<span class="4423191746780431402" onmouseenter="enter('4423191746780431402');" onmouseout="out('4423191746780431402');" style="">  46 import net.openid.appauth.TokenRequest;                                                                  </span>
<span class="-5344047661436712974" onmouseenter="enter('-5344047661436712974');" onmouseout="out('-5344047661436712974');" style="">  47 import net.openid.appauth.connectivity.ConnectionBuilder;                                                </span>
<span class="2682978576506672064" onmouseenter="enter('2682978576506672064');" onmouseout="out('2682978576506672064');" style="">  48 import net.openid.appauth.connectivity.DefaultConnectionBuilder;                                         </span>
<span  style="">  49                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  50 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  51 import java.util.Collections;                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  52 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  53 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  54 import java.util.Map;                                                                                    </span>
<span class="8600016768069240092" onmouseenter="enter('8600016768069240092');" onmouseout="out('8600016768069240092');" style="">  55 import java.util.concurrent.ConcurrentHashMap;                                                           </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  56 import java.util.concurrent.CountDownLatch;                                                              </span>
<span  style="">  57                                                                                                          </span>
<span class="6575769426762835403" onmouseenter="enter('6575769426762835403');" onmouseout="out('6575769426762835403');" style="">  58 public class RNAppAuthModule extends ReactContextBaseJavaModule implements ActivityEventListener {       </span>
<span  style="">  59                                                                                                          </span>
<span class="8401162781518473365" onmouseenter="enter('8401162781518473365');" onmouseout="out('8401162781518473365');" style="">  60     public static final String CUSTOM_TAB_PACKAGE_NAME = &quot;com.android.chrome&quot;;                           </span>
<span  style="">  61                                                                                                          </span>
<span class="6180419538961108965" onmouseenter="enter('6180419538961108965');" onmouseout="out('6180419538961108965');" style="">  62     private final ReactApplicationContext reactContext;                                                  </span>
<span class="1869321332520936904" onmouseenter="enter('1869321332520936904');" onmouseout="out('1869321332520936904');" style="">  63     private Promise promise;                                                                             </span>
<span class="1815072443305468649" onmouseenter="enter('1815072443305468649');" onmouseout="out('1815072443305468649');" style="">  64     private boolean dangerouslyAllowInsecureHttpRequests;                                                </span>
<span class="3709939774236496336" onmouseenter="enter('3709939774236496336');" onmouseout="out('3709939774236496336');" style="">  65     private Boolean skipCodeExchange;                                                                    </span>
<span class="6877933566748299598" onmouseenter="enter('6877933566748299598');" onmouseout="out('6877933566748299598');" style="">  66     private String clientAuthMethod = &quot;basic&quot;;                                                           </span>
<span class="-9158722382120219449" onmouseenter="enter('-9158722382120219449');" onmouseout="out('-9158722382120219449');" style="">  67     private Map&lt;String, String&gt; registrationRequestHeaders = null;                                       </span>
<span class="5073960437150900627" onmouseenter="enter('5073960437150900627');" onmouseout="out('5073960437150900627');" style="">  68     private Map&lt;String, String&gt; authorizationRequestHeaders = null;                                      </span>
<span class="493655431939084947" onmouseenter="enter('493655431939084947');" onmouseout="out('493655431939084947');" style="">  69     private Map&lt;String, String&gt; tokenRequestHeaders = null;                                              </span>
<span class="4071237130655105462" onmouseenter="enter('4071237130655105462');" onmouseout="out('4071237130655105462');" style="">  70     private Map&lt;String, String&gt; additionalParametersMap;                                                 </span>
<span class="266383520389269247" onmouseenter="enter('266383520389269247');" onmouseout="out('266383520389269247');" style="">  71     private String clientSecret;                                                                         </span>
<span class="3601618847927794657" onmouseenter="enter('3601618847927794657');" onmouseout="out('3601618847927794657');" style=""><abbr title="  72     private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = new ConcurrentHashMap&lt;&gt;();">  72     private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = nðŸ”µ</abbr></span>
<span class="-7004558742358285463" onmouseenter="enter('-7004558742358285463');" onmouseout="out('-7004558742358285463');" style="">  73     private boolean isPrefetched = false;                                                                </span>
<span  style="">  74                                                                                                          </span>
<span class="-978447563967948693" onmouseenter="enter('-978447563967948693');" onmouseout="out('-978447563967948693');" style="">  75     public RNAppAuthModule(ReactApplicationContext reactContext) {                                       </span>
<span class="-1443603959286428543" onmouseenter="enter('-1443603959286428543');" onmouseout="out('-1443603959286428543');" style="">  76         super(reactContext);                                                                             </span>
<span class="3003228313870805798" onmouseenter="enter('3003228313870805798');" onmouseout="out('3003228313870805798');" style="">  77         this.reactContext = reactContext;                                                                </span>
<span class="6669990586656871028" onmouseenter="enter('6669990586656871028');" onmouseout="out('6669990586656871028');" style="">  78         reactContext.addActivityEventListener(this);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="">  81     @ReactMethod                                                                                         </span>
<span class="-5002037316527958427" onmouseenter="enter('-5002037316527958427');" onmouseout="out('-5002037316527958427');" style="">  82     public void prefetchConfiguration(                                                                   </span>
<span class="-8094929847941500576" onmouseenter="enter('-8094929847941500576');" onmouseout="out('-8094929847941500576');" style="">  83         final Boolean warmAndPrefetchChrome,                                                             </span>
<span class="-1461695631126767390" onmouseenter="enter('-1461695631126767390');" onmouseout="out('-1461695631126767390');" style="">  84         final String issuer,                                                                             </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="">  85         final String redirectUrl,                                                                        </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="">  86         final String clientId,                                                                           </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="">  87         final ReadableArray scopes,                                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="">  88         final ReadableMap serviceConfiguration,                                                          </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="">  89         final boolean dangerouslyAllowInsecureHttpRequests,                                              </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="">  90         final ReadableMap headers,                                                                       </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="">  91         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="">  92     ) {                                                                                                  </span>
<span class="-7526945842846133690" onmouseenter="enter('-7526945842846133690');" onmouseout="out('-7526945842846133690');" style="">  93         if (warmAndPrefetchChrome) {                                                                     </span>
<span class="8703515971997686923" onmouseenter="enter('8703515971997686923');" onmouseout="out('8703515971997686923');" style="">  94             warmChromeCustomTab(reactContext, issuer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  95         }                                                                                                </span>
<span  style="">  96                                                                                                          </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style="">  97         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title="  98         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);">  98         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="8517032726698162354" onmouseenter="enter('8517032726698162354');" onmouseout="out('8517032726698162354');" style="">  99         final CountDownLatch fetchConfigurationLatch = new CountDownLatch(1);                            </span>
<span  style=""> 100                                                                                                          </span>
<span class="-7471939844701867604" onmouseenter="enter('-7471939844701867604');" onmouseout="out('-7471939844701867604');" style=""> 101         if(!isPrefetched) {                                                                              </span>
<span class="-4482036984339699707" onmouseenter="enter('-4482036984339699707');" onmouseout="out('-4482036984339699707');" style=""> 102             if (serviceConfiguration != null &amp;&amp; !this.hasServiceConfiguration(issuer)) {                 </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 103                 try {                                                                                    </span>
<span class="7730737146098200581" onmouseenter="enter('7730737146098200581');" onmouseout="out('7730737146098200581');" style=""><abbr title=" 104                     setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfiguration));"> 104                     setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfigðŸ”µ</abbr></span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 105                     isPrefetched = true;                                                                 </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 106                     fetchConfigurationLatch.countDown();                                                 </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 107                 } catch (Exception e) {                                                                  </span>
<span class="6809300863683709814" onmouseenter="enter('6809300863683709814');" onmouseout="out('6809300863683709814');" style=""> 108                     promise.reject(&quot;configuration_error&quot;, &quot;Failed to convert serviceConfiguration&quot;, e);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109                 }                                                                                        </span>
<span class="386976522086802497" onmouseenter="enter('386976522086802497');" onmouseout="out('386976522086802497');" style=""> 110             } else if (!hasServiceConfiguration(issuer)) {                                               </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 111                 final Uri issuerUri = Uri.parse(issuer);                                                 </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 112                 AuthorizationServiceConfiguration.fetchFromUrl(                                          </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 113                         buildConfigurationUriFromIssuer(issuerUri),                                      </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 114                         new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {          </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 115                             public void onFetchConfigurationCompleted(                                   </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 116                                     @Nullable AuthorizationServiceConfiguration fetchedConfiguration,    </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 117                                     @Nullable AuthorizationException ex) {                               </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 118                                 if (ex != null) {                                                        </span>
<span class="6863513032854295921" onmouseenter="enter('6863513032854295921');" onmouseout="out('6863513032854295921');" style=""><abbr title=" 119                                     promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuration&quot;, ex);"> 119                                     promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch ðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 120                                     return;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121                                 }                                                                        </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 122                                 setServiceConfiguration(issuer, fetchedConfiguration);                   </span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 123                                 isPrefetched = true;                                                     </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 124                                 fetchConfigurationLatch.countDown();                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125                             }                                                                            </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 126                         },                                                                               </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 127                         builder                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 128                 );                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 130         } else {                                                                                         </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 131             fetchConfigurationLatch.countDown();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132         }                                                                                                </span>
<span  style=""> 133                                                                                                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 134         try {                                                                                            </span>
<span class="-1907621811022997860" onmouseenter="enter('-1907621811022997860');" onmouseout="out('-1907621811022997860');" style=""> 135             fetchConfigurationLatch.await();                                                             </span>
<span class="1954864242125272611" onmouseenter="enter('1954864242125272611');" onmouseout="out('1954864242125272611');" style=""> 136             promise.resolve(isPrefetched);                                                               </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 137         } catch (Exception e) {                                                                          </span>
<span class="1768900707370095440" onmouseenter="enter('1768900707370095440');" onmouseout="out('1768900707370095440');" style=""><abbr title=" 138             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e);"> 138             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span  style=""> 141                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 142     @ReactMethod                                                                                         </span>
<span class="6906647419500618265" onmouseenter="enter('6906647419500618265');" onmouseout="out('6906647419500618265');" style=""> 143     public void register(                                                                                </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 144         String issuer,                                                                                   </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 145         final ReadableArray redirectUris,                                                                </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 146         final ReadableArray responseTypes,                                                               </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 147         final ReadableArray grantTypes,                                                                  </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 148         final String subjectType,                                                                        </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 149         final String tokenEndpointAuthMethod,                                                            </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 150         final ReadableMap additionalParameters,                                                          </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 151         final ReadableMap serviceConfiguration,                                                          </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style=""> 152         final boolean dangerouslyAllowInsecureHttpRequests,                                              </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 153         final ReadableMap headers,                                                                       </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 154         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 155     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 156         this.parseHeaderMap(headers);                                                                    </span>
<span class="263301671464505834" onmouseenter="enter('263301671464505834');" onmouseout="out('263301671464505834');" style=""><abbr title=" 157         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.registrationRequestHeaders);"> 157         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 158         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 159         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 159         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style=""> 160                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 161         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 161         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style=""> 162         if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 163             try {                                                                                        </span>
<span class="-539624180603456705" onmouseenter="enter('-539624180603456705');" onmouseout="out('-539624180603456705');" style=""><abbr title=" 164                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer)? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 164                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer)? ðŸ”µ</abbr></span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 165                 registerWithConfiguration(                                                               </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 166                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 167                         appAuthConfiguration,                                                            </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 168                         redirectUris,                                                                    </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 169                         responseTypes,                                                                   </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 170                         grantTypes,                                                                      </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 171                         subjectType,                                                                     </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 172                         tokenEndpointAuthMethod,                                                         </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 173                         additionalParametersMap,                                                         </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 174                         promise                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 175                 );                                                                                       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 176             } catch (Exception e) {                                                                      </span>
<span class="-4765268916451052755" onmouseenter="enter('-4765268916451052755');" onmouseout="out('-4765268916451052755');" style=""> 177                 promise.reject(&quot;registration_failed&quot;, e.getMessage());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 179         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 180             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 181             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 182                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 183                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 184                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 185                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 186                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 187                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 188                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 189                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190                             }                                                                            </span>
<span  style=""> 191                                                                                                          </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 192                             setServiceConfiguration(issuer, fetchedConfiguration);                       </span>
<span  style=""> 193                                                                                                          </span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 194                             registerWithConfiguration(                                                   </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 195                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 196                                     appAuthConfiguration,                                                </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 197                                     redirectUris,                                                        </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 198                                     responseTypes,                                                       </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 199                                     grantTypes,                                                          </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 200                                     subjectType,                                                         </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 201                                     tokenEndpointAuthMethod,                                             </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 202                                     additionalParametersMap,                                             </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 203                                     promise                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 204                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 206                     },                                                                                   </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 207                     builder);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209     }                                                                                                    </span>
<span  style=""> 210                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 211 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 212     @ReactMethod                                                                                         </span>
<span class="7303195633629033586" onmouseenter="enter('7303195633629033586');" onmouseout="out('7303195633629033586');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 213     public void authorize(                                                                               </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 214             String issuer,                                                                               </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 215             final String redirectUrl,                                                                    </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 216             final String clientId,                                                                       </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 217             final String clientSecret,                                                                   </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 218             final ReadableArray scopes,                                                                  </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 219             final ReadableMap additionalParameters,                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 220             final ReadableMap serviceConfiguration,                                                      </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 221             final Boolean usePKCE,                                                                       </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 222             final String clientAuthMethod,                                                               </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 223             final boolean dangerouslyAllowInsecureHttpRequests,                                          </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 224             final ReadableMap headers,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 225             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 226     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 227         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 228         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 228         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 229         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 230         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 230         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 231                                                                                                          </span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 232         // store args in private fields for later use in onActivityResult handler                        </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 233         this.promise = promise;                                                                          </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 234         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 235         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 236         this.clientSecret = clientSecret;                                                                </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 237         this.clientAuthMethod = clientAuthMethod;                                                        </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 238                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 239         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 239         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 240         if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 241             try {                                                                                        </span>
<span class="-7259429764570797401" onmouseenter="enter('-7259429764570797401');" onmouseout="out('-7259429764570797401');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 242                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 242                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ?ðŸ”µ</abbr></span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 243                 authorizeWithConfiguration(                                                              </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 244                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 245                         appAuthConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 246                         clientId,                                                                        </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 247                         scopes,                                                                          </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 248                         redirectUrl,                                                                     </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 249                         usePKCE,                                                                         </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 250                         additionalParametersMap                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 251                 );                                                                                       </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 252             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 253                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 254             } catch (Exception e) {                                                                      </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 255                 promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 256             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 257         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 258             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 259             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 260                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 261                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 262                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 263                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 264                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 265                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 266                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 267                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 268                             }                                                                            </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 269                                                                                                          </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 270                             setServiceConfiguration(issuer, fetchedConfiguration);                       </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 271                                                                                                          </span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 272                             authorizeWithConfiguration(                                                  </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 273                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 274                                     appAuthConfiguration,                                                </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 275                                     clientId,                                                            </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 276                                     scopes,                                                              </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 277                                     redirectUrl,                                                         </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 278                                     usePKCE,                                                             </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 279                                     additionalParametersMap                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 280                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 281                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 282                     },                                                                                   </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 283                     builder                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 284             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 285         }                                                                                                </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 286                                                                                                          </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 287                                                                                                          </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 288                                                                                                          </span>
<span  style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 289                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 290     }                                                                                                    </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 291 ||||||| BASE                                                                                             </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 292     @ReactMethod                                                                                         </span>
<span class="7303195633629033586" onmouseenter="enter('7303195633629033586');" onmouseout="out('7303195633629033586');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 293     public void authorize(                                                                               </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 294             String issuer,                                                                               </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 295             final String redirectUrl,                                                                    </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 296             final String clientId,                                                                       </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 297             final String clientSecret,                                                                   </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 298             final ReadableArray scopes,                                                                  </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 299             final ReadableMap additionalParameters,                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 300             final ReadableMap serviceConfiguration,                                                      </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 301             final Boolean usePKCE,                                                                       </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 302             final String clientAuthMethod,                                                               </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 303             final Boolean dangerouslyAllowInsecureHttpRequests,                                          </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 304             final ReadableMap headers,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 305             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 306     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 307         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 308         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 308         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 309         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 310         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 310         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 311                                                                                                          </span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 312         // store args in private fields for later use in onActivityResult handler                        </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 313         this.promise = promise;                                                                          </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 314         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 315         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 316         this.clientSecret = clientSecret;                                                                </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 317         this.clientAuthMethod = clientAuthMethod;                                                        </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 318                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 319         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 319         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 320         if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 321             try {                                                                                        </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 322                 final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 322                 final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != nuðŸ”µ</abbr></span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 323                 authorizeWithConfiguration(                                                              </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 324                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 325                         appAuthConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 326                         clientId,                                                                        </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 327                         scopes,                                                                          </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 328                         redirectUrl,                                                                     </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 329                         usePKCE,                                                                         </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 330                         additionalParametersMap                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 331                 );                                                                                       </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 332             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 333                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 334             } catch (Exception e) {                                                                      </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 335                 promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 336             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 337         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 338             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 339             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 340                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 341                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 342                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 343                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 344                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 345                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 346                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 347                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 348                             }                                                                            </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 349                                                                                                          </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 350                             mServiceConfiguration.set(fetchedConfiguration);                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 351                                                                                                          </span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 352                             authorizeWithConfiguration(                                                  </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 353                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 354                                     appAuthConfiguration,                                                </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 355                                     clientId,                                                            </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 356                                     scopes,                                                              </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 357                                     redirectUrl,                                                         </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 358                                     usePKCE,                                                             </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 359                                     additionalParametersMap                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 360                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 361                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 362                     },                                                                                   </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 363                     builder                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 364             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 365         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 366                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 367                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 368                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 369                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 370     }                                                                                                    </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 371 =======                                                                                                  </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 372     @ReactMethod                                                                                         </span>
<span class="7303195633629033586" onmouseenter="enter('7303195633629033586');" onmouseout="out('7303195633629033586');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 373     public void authorize(                                                                               </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 374             String issuer,                                                                               </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 375             final String redirectUrl,                                                                    </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 376             final String clientId,                                                                       </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 377             final String clientSecret,                                                                   </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 378             final ReadableArray scopes,                                                                  </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 379             final ReadableMap additionalParameters,                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 380             final ReadableMap serviceConfiguration,                                                      </span>
<span class="7042841519757427836" onmouseenter="enter('7042841519757427836');" onmouseout="out('7042841519757427836');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 381             final Boolean skipCodeExchange,                                                              </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 382             final Boolean usePKCE,                                                                       </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 383             final String clientAuthMethod,                                                               </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 384             final Boolean dangerouslyAllowInsecureHttpRequests,                                          </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 385             final ReadableMap headers,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 386             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 387     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 388         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 389         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 389         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 390         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 391         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 391         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 392                                                                                                          </span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 393         // store args in private fields for later use in onActivityResult handler                        </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 394         this.promise = promise;                                                                          </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 395         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 396         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 397         this.clientSecret = clientSecret;                                                                </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 398         this.clientAuthMethod = clientAuthMethod;                                                        </span>
<span class="2527862308639794492" onmouseenter="enter('2527862308639794492');" onmouseout="out('2527862308639794492');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 399         this.skipCodeExchange = skipCodeExchange;                                                        </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 400                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 401         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 401         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 402         if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 403             try {                                                                                        </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 404                 final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 404                 final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != nuðŸ”µ</abbr></span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 405                 authorizeWithConfiguration(                                                              </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 406                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 407                         appAuthConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 408                         clientId,                                                                        </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 409                         scopes,                                                                          </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 410                         redirectUrl,                                                                     </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 411                         usePKCE,                                                                         </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 412                         additionalParametersMap                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 413                 );                                                                                       </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 414             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 415                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 416             } catch (Exception e) {                                                                      </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 417                 promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 418             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 419         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 420             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 421             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 422                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 423                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 424                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 425                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 426                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 427                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 428                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 429                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 430                             }                                                                            </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 431                                                                                                          </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 432                             mServiceConfiguration.set(fetchedConfiguration);                             </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 433                                                                                                          </span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 434                             authorizeWithConfiguration(                                                  </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 435                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 436                                     appAuthConfiguration,                                                </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 437                                     clientId,                                                            </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 438                                     scopes,                                                              </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 439                                     redirectUrl,                                                         </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 440                                     usePKCE,                                                             </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 441                                     additionalParametersMap                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 442                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 443                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 444                     },                                                                                   </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 445                     builder                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 446             );                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 447         }                                                                                                </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 448                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 449                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 450                                                                                                          </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 451                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 452     }                                                                                                    </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 453 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span  style=""> 454                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 455     @ReactMethod                                                                                         </span>
<span class="-5238780499530126703" onmouseenter="enter('-5238780499530126703');" onmouseout="out('-5238780499530126703');" style=""> 456     public void refresh(                                                                                 </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 457             String issuer,                                                                               </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 458             final String redirectUrl,                                                                    </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 459             final String clientId,                                                                       </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 460             final String clientSecret,                                                                   </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 461             final String refreshToken,                                                                   </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 462             final ReadableArray scopes,                                                                  </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 463             final ReadableMap additionalParameters,                                                      </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 464             final ReadableMap serviceConfiguration,                                                      </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 465             final String clientAuthMethod,                                                               </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style=""> 466             final boolean dangerouslyAllowInsecureHttpRequests,                                          </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 467             final ReadableMap headers,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 468             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 469     ) {                                                                                                  </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 470         this.parseHeaderMap(headers);                                                                    </span>
<span class="5750510513523473374" onmouseenter="enter('5750510513523473374');" onmouseout="out('5750510513523473374');" style=""><abbr title=" 471         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders);"> 471         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="-7964591588332866161" onmouseenter="enter('-7964591588332866161');" onmouseout="out('-7964591588332866161');" style=""> 472         final AppAuthConfiguration appAuthConfiguration = createAppAuthConfiguration(builder);           </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 473         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 473         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span  style=""> 474                                                                                                          </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 475         if (clientSecret != null) {                                                                      </span>
<span class="-5682406089270036260" onmouseenter="enter('-5682406089270036260');" onmouseout="out('-5682406089270036260');" style=""> 476             additionalParametersMap.put(&quot;client_secret&quot;, clientSecret);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="1495748746185505707" onmouseenter="enter('1495748746185505707');" onmouseout="out('1495748746185505707');" style=""> 479         // store setting in private field for later use in onActivityResult handler                      </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 480         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 481         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span  style=""> 482                                                                                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 483         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 483         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style=""> 484         if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 485             try {                                                                                        </span>
<span class="-7259429764570797401" onmouseenter="enter('-7259429764570797401');" onmouseout="out('-7259429764570797401');" style=""><abbr title=" 486                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 486                 final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ?ðŸ”µ</abbr></span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 487                 refreshWithConfiguration(                                                                </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 488                         serviceConfig,                                                                   </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 489                         appAuthConfiguration,                                                            </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 490                         refreshToken,                                                                    </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 491                         clientId,                                                                        </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 492                         scopes,                                                                          </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 493                         redirectUrl,                                                                     </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 494                         additionalParametersMap,                                                         </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 495                         clientAuthMethod,                                                                </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 496                         clientSecret,                                                                    </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 497                         promise                                                                          </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 498                 );                                                                                       </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 499             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 500                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 501             } catch (Exception e) {                                                                      </span>
<span class="7513248397060081198" onmouseenter="enter('7513248397060081198');" onmouseout="out('7513248397060081198');" style=""> 502                 promise.reject(&quot;token_refresh_failed&quot;, e.getMessage());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 504         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 505             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 506             AuthorizationServiceConfiguration.fetchFromUrl(                                              </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 507                     buildConfigurationUriFromIssuer(issuerUri),                                          </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 508                     new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {              </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 509                         public void onFetchConfigurationCompleted(                                       </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 510                                 @Nullable AuthorizationServiceConfiguration fetchedConfiguration,        </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 511                                 @Nullable AuthorizationException ex) {                                   </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 512                             if (ex != null) {                                                            </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 513                                 promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));</span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 514                                 return;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515                             }                                                                            </span>
<span  style=""> 516                                                                                                          </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 517                             setServiceConfiguration(issuer, fetchedConfiguration);                       </span>
<span  style=""> 518                                                                                                          </span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 519                             refreshWithConfiguration(                                                    </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 520                                     fetchedConfiguration,                                                </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 521                                     appAuthConfiguration,                                                </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 522                                     refreshToken,                                                        </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 523                                     clientId,                                                            </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 524                                     scopes,                                                              </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 525                                     redirectUrl,                                                         </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 526                                     additionalParametersMap,                                             </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 527                                     clientAuthMethod,                                                    </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 528                                     clientSecret,                                                        </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 529                                     promise                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 530                             );                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531                         }                                                                                </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 532                     },                                                                                   </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 533                     builder);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534         }                                                                                                </span>
<span  style=""> 535                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536     }                                                                                                    </span>
<span  style=""> 537                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 538     /*                                                                                                   </span>
<span class="7578951324193379805" onmouseenter="enter('7578951324193379805');" onmouseout="out('7578951324193379805');" style=""> 539      * Called when the OAuth browser activity completes                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 540      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 541     @Override                                                                                            </span>
<span class="2027722410160164989" onmouseenter="enter('2027722410160164989');" onmouseout="out('2027722410160164989');" style=""> 542     public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {      </span>
<span class="-4639597857217913430" onmouseenter="enter('-4639597857217913430');" onmouseout="out('-4639597857217913430');" style=""> 543         if (requestCode == 0) {                                                                          </span>
<span class="-5203356024335682166" onmouseenter="enter('-5203356024335682166');" onmouseout="out('-5203356024335682166');" style=""> 544             if (data == null) {                                                                          </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 545                 if (promise != null) {                                                                   </span>
<span class="2268968836554739893" onmouseenter="enter('2268968836554739893');" onmouseout="out('2268968836554739893');" style=""> 546                     promise.reject(&quot;authentication_error&quot;, &quot;Data intent is null&quot; );                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547                 }                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 548                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549             }                                                                                            </span>
<span  style=""> 550                                                                                                          </span>
<span class="1683167759369238332" onmouseenter="enter('1683167759369238332');" onmouseout="out('1683167759369238332');" style=""> 551             final AuthorizationResponse response = AuthorizationResponse.fromIntent(data);               </span>
<span class="-2661429536108932642" onmouseenter="enter('-2661429536108932642');" onmouseout="out('-2661429536108932642');" style=""> 552             AuthorizationException exception = AuthorizationException.fromIntent(data);                  </span>
<span class="812069196179346176" onmouseenter="enter('812069196179346176');" onmouseout="out('812069196179346176');" style=""> 553             if (exception != null) {                                                                     </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 554                 if (promise != null) {                                                                   </span>
<span class="8302975562867231827" onmouseenter="enter('8302975562867231827');" onmouseout="out('8302975562867231827');" style=""> 555                     promise.reject(&quot;authentication_error&quot;, getErrorMessage(exception));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556                 }                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 557                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558             }                                                                                            </span>
<span  style=""> 559                                                                                                          </span>
<span class="5367484813216736809" onmouseenter="enter('5367484813216736809');" onmouseout="out('5367484813216736809');" style=""> 560             if (this.skipCodeExchange) {                                                                 </span>
<span class="-4333686298001507703" onmouseenter="enter('-4333686298001507703');" onmouseout="out('-4333686298001507703');" style=""> 561                 WritableMap map = TokenResponseFactory.authorizationResponseToMap(response);             </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 562                 promise.resolve(map);                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 563                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564             }                                                                                            </span>
<span  style=""> 565                                                                                                          </span>
<span  style=""> 566                                                                                                          </span>
<span class="7265001672864433355" onmouseenter="enter('7265001672864433355');" onmouseout="out('7265001672864433355');" style=""> 567             final Promise authorizePromise = this.promise;                                               </span>
<span class="5853075131485496752" onmouseenter="enter('5853075131485496752');" onmouseout="out('5853075131485496752');" style=""> 568             final AppAuthConfiguration configuration = createAppAuthConfiguration(                       </span>
<span class="-3586276280695435831" onmouseenter="enter('-3586276280695435831');" onmouseout="out('-3586276280695435831');" style=""><abbr title=" 569                     createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders)"> 569                     createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHðŸ”µ</abbr></span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 570             );                                                                                           </span>
<span  style=""> 571                                                                                                          </span>
<span class="-598339291394324639" onmouseenter="enter('-598339291394324639');" onmouseout="out('-598339291394324639');" style=""><abbr title=" 572             AuthorizationService authService = new AuthorizationService(this.reactContext, configuration);"> 572             AuthorizationService authService = new AuthorizationService(this.reactContext, configuration)ðŸ”µ</abbr></span>
<span  style=""> 573                                                                                                          </span>
<span class="6152215567678252770" onmouseenter="enter('6152215567678252770');" onmouseout="out('6152215567678252770');" style=""><abbr title=" 574             TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap);"> 574             TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap)ðŸ”µ</abbr></span>
<span  style=""> 575                                                                                                          </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 576             AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 576             AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TðŸ”µ</abbr></span>
<span  style=""> 577                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 578                 @Override                                                                                </span>
<span class="-8262795349130604582" onmouseenter="enter('-8262795349130604582');" onmouseout="out('-8262795349130604582');" style=""> 579                 public void onTokenRequestCompleted(                                                     </span>
<span class="5619805881636115456" onmouseenter="enter('5619805881636115456');" onmouseout="out('5619805881636115456');" style=""> 580                         TokenResponse resp, AuthorizationException ex) {                                 </span>
<span class="7476284757153148856" onmouseenter="enter('7476284757153148856');" onmouseout="out('7476284757153148856');" style=""> 581                     if (resp != null) {                                                                  </span>
<span class="7607526798956663360" onmouseenter="enter('7607526798956663360');" onmouseout="out('7607526798956663360');" style=""> 582                         WritableMap map = TokenResponseFactory.tokenResponseToMap(resp, response);       </span>
<span class="-6045783056504489326" onmouseenter="enter('-6045783056504489326');" onmouseout="out('-6045783056504489326');" style=""> 583                         if (authorizePromise != null) {                                                  </span>
<span class="-4073221780338751137" onmouseenter="enter('-4073221780338751137');" onmouseout="out('-4073221780338751137');" style=""> 584                             authorizePromise.resolve(map);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 585                         }                                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 586                     } else {                                                                             </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 587                         if (promise != null) {                                                           </span>
<span class="-1873248496991044419" onmouseenter="enter('-1873248496991044419');" onmouseout="out('-1873248496991044419');" style=""> 588                             promise.reject(&quot;token_exchange_failed&quot;, getErrorMessage(ex));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 589                         }                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 592             };                                                                                           </span>
<span  style=""> 593                                                                                                          </span>
<span class="-7911542703683536912" onmouseenter="enter('-7911542703683536912');" onmouseout="out('-7911542703683536912');" style=""> 594             if (this.clientSecret != null) {                                                             </span>
<span class="-3188745194840831156" onmouseenter="enter('-3188745194840831156');" onmouseout="out('-3188745194840831156');" style=""><abbr title=" 595                 ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMethod);"> 595                 ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 596                 authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);        </span>
<span  style=""> 597                                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 598             } else {                                                                                     </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 599                 authService.performTokenRequest(tokenRequest, tokenResponseCallback);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 600             }                                                                                            </span>
<span  style=""> 601                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603     }                                                                                                    </span>
<span  style=""> 604                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 605     /*                                                                                                   </span>
<span class="3813849031296026505" onmouseenter="enter('3813849031296026505');" onmouseout="out('3813849031296026505');" style=""> 606      * Perform dynamic client registration with the provided configuration                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 607      */                                                                                                  </span>
<span class="340189295193181696" onmouseenter="enter('340189295193181696');" onmouseout="out('340189295193181696');" style=""> 608     private void registerWithConfiguration(                                                              </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 609         final AuthorizationServiceConfiguration serviceConfiguration,                                    </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 610         final AppAuthConfiguration appAuthConfiguration,                                                 </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 611         final ReadableArray redirectUris,                                                                </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 612         final ReadableArray responseTypes,                                                               </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 613         final ReadableArray grantTypes,                                                                  </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 614         final String subjectType,                                                                        </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 615         final String tokenEndpointAuthMethod,                                                            </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 616         final Map&lt;String, String&gt; additionalParametersMap,                                               </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 617         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 618     ) {                                                                                                  </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 619         final Context context = this.reactContext;                                                       </span>
<span  style=""> 620                                                                                                          </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 621         AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);      </span>
<span  style=""> 622                                                                                                          </span>
<span class="-8453810682683042065" onmouseenter="enter('-8453810682683042065');" onmouseout="out('-8453810682683042065');" style=""> 623         RegistrationRequest.Builder registrationRequestBuilder =                                         </span>
<span class="-7581367313981499795" onmouseenter="enter('-7581367313981499795');" onmouseout="out('-7581367313981499795');" style=""> 624                 new RegistrationRequest.Builder(                                                         </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 625                     serviceConfiguration,                                                                </span>
<span class="4262694259998445935" onmouseenter="enter('4262694259998445935');" onmouseout="out('4262694259998445935');" style=""> 626                     arrayToUriList(redirectUris)                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 627                 )                                                                                        </span>
<span class="4677539456481393469" onmouseenter="enter('4677539456481393469');" onmouseout="out('4677539456481393469');" style=""> 628                     .setAdditionalParameters(additionalParametersMap);                                   </span>
<span  style=""> 629                                                                                                          </span>
<span class="382071555491173350" onmouseenter="enter('382071555491173350');" onmouseout="out('382071555491173350');" style=""> 630         if (responseTypes != null) {                                                                     </span>
<span class="2691057769499642705" onmouseenter="enter('2691057769499642705');" onmouseout="out('2691057769499642705');" style=""> 631             registrationRequestBuilder.setResponseTypeValues(arrayToList(responseTypes));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632         }                                                                                                </span>
<span  style=""> 633                                                                                                          </span>
<span class="461598363295361308" onmouseenter="enter('461598363295361308');" onmouseout="out('461598363295361308');" style=""> 634         if (grantTypes != null) {                                                                        </span>
<span class="1681210474388500870" onmouseenter="enter('1681210474388500870');" onmouseout="out('1681210474388500870');" style=""> 635             registrationRequestBuilder.setGrantTypeValues(arrayToList(grantTypes));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636         }                                                                                                </span>
<span  style=""> 637                                                                                                          </span>
<span class="-2982605970687904529" onmouseenter="enter('-2982605970687904529');" onmouseout="out('-2982605970687904529');" style=""> 638         if (subjectType != null) {                                                                       </span>
<span class="3235050174363133383" onmouseenter="enter('3235050174363133383');" onmouseout="out('3235050174363133383');" style=""> 639             registrationRequestBuilder.setSubjectType(subjectType);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640         }                                                                                                </span>
<span  style=""> 641                                                                                                          </span>
<span class="-3523548169086540196" onmouseenter="enter('-3523548169086540196');" onmouseout="out('-3523548169086540196');" style=""> 642         if (tokenEndpointAuthMethod != null) {                                                           </span>
<span class="8002810479156997291" onmouseenter="enter('8002810479156997291');" onmouseout="out('8002810479156997291');" style=""> 643             registrationRequestBuilder.setTokenEndpointAuthenticationMethod(tokenEndpointAuthMethod);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644         }                                                                                                </span>
<span  style=""> 645                                                                                                          </span>
<span class="-8152299436158074794" onmouseenter="enter('-8152299436158074794');" onmouseout="out('-8152299436158074794');" style=""> 646         RegistrationRequest registrationRequest = registrationRequestBuilder.build();                    </span>
<span  style=""> 647                                                                                                          </span>
<span class="2043221784460883972" onmouseenter="enter('2043221784460883972');" onmouseout="out('2043221784460883972');" style=""><abbr title=" 648         AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.RegistrationResponseCallback() {"> 648         AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizatioðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 649             @Override                                                                                    </span>
<span class="89148758474091775" onmouseenter="enter('89148758474091775');" onmouseout="out('89148758474091775');" style=""><abbr title=" 650             public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizationException ex) {"> 650             public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @NullableðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 651                 if (response != null) {                                                                  </span>
<span class="3678270738704120650" onmouseenter="enter('3678270738704120650');" onmouseout="out('3678270738704120650');" style=""> 652                     WritableMap map = RegistrationResponseFactory.registrationResponseToMap(response);   </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 653                     promise.resolve(map);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 654                 } else {                                                                                 </span>
<span class="-5586663357435466975" onmouseenter="enter('-5586663357435466975');" onmouseout="out('-5586663357435466975');" style=""> 655                     promise.reject(&quot;registration_failed&quot;, getErrorMessage(ex));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 656                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 658         };                                                                                               </span>
<span  style=""> 659                                                                                                          </span>
<span class="2922372767993768868" onmouseenter="enter('2922372767993768868');" onmouseout="out('2922372767993768868');" style=""> 660         authService.performRegistrationRequest(registrationRequest, registrationResponseCallback);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661     }                                                                                                    </span>
<span  style=""> 662                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 663     /*                                                                                                   </span>
<span class="-3037424821439688076" onmouseenter="enter('-3037424821439688076');" onmouseout="out('-3037424821439688076');" style=""> 664      * Authorize user with the provided configuration                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 665      */                                                                                                  </span>
<span class="-1686698148972257501" onmouseenter="enter('-1686698148972257501');" onmouseout="out('-1686698148972257501');" style=""> 666     private void authorizeWithConfiguration(                                                             </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 667             final AuthorizationServiceConfiguration serviceConfiguration,                                </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 668             final AppAuthConfiguration appAuthConfiguration,                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 669             final String clientId,                                                                       </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 670             final ReadableArray scopes,                                                                  </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 671             final String redirectUrl,                                                                    </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 672             final Boolean usePKCE,                                                                       </span>
<span class="4591131233701235058" onmouseenter="enter('4591131233701235058');" onmouseout="out('4591131233701235058');" style=""> 673             final Map&lt;String, String&gt; additionalParametersMap                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 674     ) {                                                                                                  </span>
<span  style=""> 675                                                                                                          </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 676         String scopesString = null;                                                                      </span>
<span  style=""> 677                                                                                                          </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 678         if (scopes != null) {                                                                            </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 679             scopesString = this.arrayToString(scopes);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680         }                                                                                                </span>
<span  style=""> 681                                                                                                          </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 682         final Context context = this.reactContext;                                                       </span>
<span class="-4913832152651687292" onmouseenter="enter('-4913832152651687292');" onmouseout="out('-4913832152651687292');" style=""> 683         final Activity currentActivity = getCurrentActivity();                                           </span>
<span  style=""> 684                                                                                                          </span>
<span class="1615045173536817183" onmouseenter="enter('1615045173536817183');" onmouseout="out('1615045173536817183');" style=""> 685         AuthorizationRequest.Builder authRequestBuilder =                                                </span>
<span class="8630572254279098967" onmouseenter="enter('8630572254279098967');" onmouseout="out('8630572254279098967');" style=""> 686                 new AuthorizationRequest.Builder(                                                        </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 687                         serviceConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 688                         clientId,                                                                        </span>
<span class="4849618716626806999" onmouseenter="enter('4849618716626806999');" onmouseout="out('4849618716626806999');" style=""> 689                         ResponseTypeValues.CODE,                                                         </span>
<span class="-1639145692422133689" onmouseenter="enter('-1639145692422133689');" onmouseout="out('-1639145692422133689');" style=""> 690                         Uri.parse(redirectUrl)                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 691                 );                                                                                       </span>
<span  style=""> 692                                                                                                          </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 693         if (scopesString != null) {                                                                      </span>
<span class="-8218576309450527961" onmouseenter="enter('-8218576309450527961');" onmouseout="out('-8218576309450527961');" style=""> 694             authRequestBuilder.setScope(scopesString);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695         }                                                                                                </span>
<span  style=""> 696                                                                                                          </span>
<span  style=""> 697                                                                                                          </span>
<span class="7149068665077353053" onmouseenter="enter('7149068665077353053');" onmouseout="out('7149068665077353053');" style=""> 698         if (additionalParametersMap != null) {                                                           </span>
<span class="-6137327941719445172" onmouseenter="enter('-6137327941719445172');" onmouseout="out('-6137327941719445172');" style=""> 699             // handle additional parameters separately to avoid exceptions from AppAuth                  </span>
<span class="-4729676460784236302" onmouseenter="enter('-4729676460784236302');" onmouseout="out('-4729676460784236302');" style=""> 700             if (additionalParametersMap.containsKey(&quot;display&quot;)) {                                        </span>
<span class="6740086842281271815" onmouseenter="enter('6740086842281271815');" onmouseout="out('6740086842281271815');" style=""> 701                 authRequestBuilder.setDisplay(additionalParametersMap.get(&quot;display&quot;));                   </span>
<span class="5478676394718524231" onmouseenter="enter('5478676394718524231');" onmouseout="out('5478676394718524231');" style=""> 702                 additionalParametersMap.remove(&quot;display&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703             }                                                                                            </span>
<span class="-5162308638975991351" onmouseenter="enter('-5162308638975991351');" onmouseout="out('-5162308638975991351');" style=""> 704             if (additionalParametersMap.containsKey(&quot;login_hint&quot;)) {                                     </span>
<span class="7478322337196261432" onmouseenter="enter('7478322337196261432');" onmouseout="out('7478322337196261432');" style=""> 705                 authRequestBuilder.setLoginHint(additionalParametersMap.get(&quot;login_hint&quot;));              </span>
<span class="-3825577662921277200" onmouseenter="enter('-3825577662921277200');" onmouseout="out('-3825577662921277200');" style=""> 706                 additionalParametersMap.remove(&quot;login_hint&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 707             }                                                                                            </span>
<span class="-8254180626457365202" onmouseenter="enter('-8254180626457365202');" onmouseout="out('-8254180626457365202');" style=""> 708             if (additionalParametersMap.containsKey(&quot;prompt&quot;)) {                                         </span>
<span class="2585369211918110761" onmouseenter="enter('2585369211918110761');" onmouseout="out('2585369211918110761');" style=""> 709                 authRequestBuilder.setPrompt(additionalParametersMap.get(&quot;prompt&quot;));                     </span>
<span class="290019989822766287" onmouseenter="enter('290019989822766287');" onmouseout="out('290019989822766287');" style=""> 710                 additionalParametersMap.remove(&quot;prompt&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 711             }                                                                                            </span>
<span  style=""> 712                                                                                                          </span>
<span class="-1433627721318603910" onmouseenter="enter('-1433627721318603910');" onmouseout="out('-1433627721318603910');" style=""> 713             authRequestBuilder.setAdditionalParameters(additionalParametersMap);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714         }                                                                                                </span>
<span  style=""> 715                                                                                                          </span>
<span class="6295746505532947076" onmouseenter="enter('6295746505532947076');" onmouseout="out('6295746505532947076');" style=""> 716         if (!usePKCE) {                                                                                  </span>
<span class="211047115781987373" onmouseenter="enter('211047115781987373');" onmouseout="out('211047115781987373');" style=""> 717             authRequestBuilder.setCodeVerifier(null);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 718         }                                                                                                </span>
<span  style=""> 719                                                                                                          </span>
<span class="2874496759892237047" onmouseenter="enter('2874496759892237047');" onmouseout="out('2874496759892237047');" style=""> 720         AuthorizationRequest authRequest = authRequestBuilder.build();                                   </span>
<span  style=""> 721                                                                                                          </span>
<span class="4248167488592758879" onmouseenter="enter('4248167488592758879');" onmouseout="out('4248167488592758879');" style=""> 722         if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) {               </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 723             AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);  </span>
<span class="-8712988972948484879" onmouseenter="enter('-8712988972948484879');" onmouseout="out('-8712988972948484879');" style=""> 724             Intent authIntent = authService.getAuthorizationRequestIntent(authRequest);                  </span>
<span  style=""> 725                                                                                                          </span>
<span class="-1768672139093830544" onmouseenter="enter('-1768672139093830544');" onmouseout="out('-1768672139093830544');" style=""> 726             currentActivity.startActivityForResult(authIntent, 0);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 727         } else {                                                                                         </span>
<span class="-5574677103641269793" onmouseenter="enter('-5574677103641269793');" onmouseout="out('-5574677103641269793');" style=""><abbr title=" 728             AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguration);"> 728             AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguraðŸ”µ</abbr></span>
<span class="-921350943484849229" onmouseenter="enter('-921350943484849229');" onmouseout="out('-921350943484849229');" style=""> 729             PendingIntent pendingIntent = currentActivity.createPendingResult(0, new Intent(), 0);       </span>
<span  style=""> 730                                                                                                          </span>
<span class="5462088869311657545" onmouseenter="enter('5462088869311657545');" onmouseout="out('5462088869311657545');" style=""> 731             authService.performAuthorizationRequest(authRequest, pendingIntent);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 733     }                                                                                                    </span>
<span  style=""> 734                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 735     /*                                                                                                   </span>
<span class="8814346366745541198" onmouseenter="enter('8814346366745541198');" onmouseout="out('8814346366745541198');" style=""> 736      * Refresh authentication token with the provided configuration                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 737      */                                                                                                  </span>
<span class="-7235916799046070057" onmouseenter="enter('-7235916799046070057');" onmouseout="out('-7235916799046070057');" style=""> 738     private void refreshWithConfiguration(                                                               </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 739             final AuthorizationServiceConfiguration serviceConfiguration,                                </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 740             final AppAuthConfiguration appAuthConfiguration,                                             </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 741             final String refreshToken,                                                                   </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 742             final String clientId,                                                                       </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 743             final ReadableArray scopes,                                                                  </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 744             final String redirectUrl,                                                                    </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 745             final Map&lt;String, String&gt; additionalParametersMap,                                           </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 746             final String clientAuthMethod,                                                               </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 747             final String clientSecret,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 748             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 749     ) {                                                                                                  </span>
<span  style=""> 750                                                                                                          </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 751         String scopesString = null;                                                                      </span>
<span  style=""> 752                                                                                                          </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 753         if (scopes != null) {                                                                            </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 754             scopesString = this.arrayToString(scopes);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 755         }                                                                                                </span>
<span  style=""> 756                                                                                                          </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 757         final Context context = this.reactContext;                                                       </span>
<span  style=""> 758                                                                                                          </span>
<span class="-1882592220700818910" onmouseenter="enter('-1882592220700818910');" onmouseout="out('-1882592220700818910');" style=""> 759         TokenRequest.Builder tokenRequestBuilder =                                                       </span>
<span class="-7570030938974274508" onmouseenter="enter('-7570030938974274508');" onmouseout="out('-7570030938974274508');" style=""> 760                 new TokenRequest.Builder(                                                                </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 761                         serviceConfiguration,                                                            </span>
<span class="-3028793166139754818" onmouseenter="enter('-3028793166139754818');" onmouseout="out('-3028793166139754818');" style=""> 762                         clientId                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 763                 )                                                                                        </span>
<span class="5149869235939087614" onmouseenter="enter('5149869235939087614');" onmouseout="out('5149869235939087614');" style=""> 764                         .setRefreshToken(refreshToken)                                                   </span>
<span class="-4168308848344323961" onmouseenter="enter('-4168308848344323961');" onmouseout="out('-4168308848344323961');" style=""> 765                         .setRedirectUri(Uri.parse(redirectUrl));                                         </span>
<span  style=""> 766                                                                                                          </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 767         if (scopesString != null) {                                                                      </span>
<span class="-4940100242303343354" onmouseenter="enter('-4940100242303343354');" onmouseout="out('-4940100242303343354');" style=""> 768             tokenRequestBuilder.setScope(scopesString);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 769         }                                                                                                </span>
<span  style=""> 770                                                                                                          </span>
<span class="1982926752875631058" onmouseenter="enter('1982926752875631058');" onmouseout="out('1982926752875631058');" style=""> 771         if (!additionalParametersMap.isEmpty()) {                                                        </span>
<span class="6791703352530289305" onmouseenter="enter('6791703352530289305');" onmouseout="out('6791703352530289305');" style=""> 772             tokenRequestBuilder.setAdditionalParameters(additionalParametersMap);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 773         }                                                                                                </span>
<span  style=""> 774                                                                                                          </span>
<span class="6300215370198990899" onmouseenter="enter('6300215370198990899');" onmouseout="out('6300215370198990899');" style=""> 775         TokenRequest tokenRequest = tokenRequestBuilder.build();                                         </span>
<span  style=""> 776                                                                                                          </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 777         AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);      </span>
<span  style=""> 778                                                                                                          </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 779         AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 779         AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 780             @Override                                                                                    </span>
<span class="-9019017716153453132" onmouseenter="enter('-9019017716153453132');" onmouseout="out('-9019017716153453132');" style=""><abbr title=" 781             public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationException ex) {"> 781             public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 782                 if (response != null) {                                                                  </span>
<span class="-4071880271889138129" onmouseenter="enter('-4071880271889138129');" onmouseout="out('-4071880271889138129');" style=""> 783                     WritableMap map = TokenResponseFactory.tokenResponseToMap(response);                 </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 784                     promise.resolve(map);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 785                 } else {                                                                                 </span>
<span class="-8974399670180994057" onmouseenter="enter('-8974399670180994057');" onmouseout="out('-8974399670180994057');" style=""> 786                     promise.reject(&quot;token_refresh_failed&quot;, getErrorMessage(ex));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 787                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 788             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 789         };                                                                                               </span>
<span  style=""> 790                                                                                                          </span>
<span  style=""> 791                                                                                                          </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 792         if (clientSecret != null) {                                                                      </span>
<span class="-3955443834186652225" onmouseenter="enter('-3955443834186652225');" onmouseout="out('-3955443834186652225');" style=""><abbr title=" 793             ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethod);"> 793             ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethodðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 794             authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);            </span>
<span  style=""> 795                                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 796         } else {                                                                                         </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 797             authService.performTokenRequest(tokenRequest, tokenResponseCallback);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 798         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799     }                                                                                                    </span>
<span  style=""> 800                                                                                                          </span>
<span class="2930218534777413873" onmouseenter="enter('2930218534777413873');" onmouseout="out('2930218534777413873');" style=""> 801     private void parseHeaderMap (ReadableMap headerMap) {                                                </span>
<span class="-6316489241675673035" onmouseenter="enter('-6316489241675673035');" onmouseout="out('-6316489241675673035');" style=""> 802         if (headerMap == null) {                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 803             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 804         }                                                                                                </span>
<span class="5010343160007659678" onmouseenter="enter('5010343160007659678');" onmouseout="out('5010343160007659678');" style=""> 805         if (headerMap.hasKey(&quot;register&quot;) &amp;&amp; headerMap.getType(&quot;register&quot;) == ReadableType.Map) {         </span>
<span class="-7734955563477546094" onmouseenter="enter('-7734955563477546094');" onmouseout="out('-7734955563477546094');" style=""> 806             this.registrationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;register&quot;));</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 807         }                                                                                                </span>
<span class="-8530407112624237580" onmouseenter="enter('-8530407112624237580');" onmouseout="out('-8530407112624237580');" style=""> 808         if (headerMap.hasKey(&quot;authorize&quot;) &amp;&amp; headerMap.getType(&quot;authorize&quot;) == ReadableType.Map) {       </span>
<span class="762039099095363738" onmouseenter="enter('762039099095363738');" onmouseout="out('762039099095363738');" style=""><abbr title=" 809             this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;));"> 809             this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 810         }                                                                                                </span>
<span class="5768179141818569002" onmouseenter="enter('5768179141818569002');" onmouseout="out('5768179141818569002');" style=""> 811         if (headerMap.hasKey(&quot;token&quot;) &amp;&amp; headerMap.getType(&quot;token&quot;) == ReadableType.Map) {               </span>
<span class="-4870803436115877491" onmouseenter="enter('-4870803436115877491');" onmouseout="out('-4870803436115877491');" style=""> 812             this.tokenRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;token&quot;));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 813         }                                                                                                </span>
<span  style=""> 814                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 815     }                                                                                                    </span>
<span  style=""> 816                                                                                                          </span>
<span class="-2276636657842571599" onmouseenter="enter('-2276636657842571599');" onmouseout="out('-2276636657842571599');" style=""> 817     private ClientAuthentication getClientAuthentication(String clientSecret, String clientAuthMethod) { </span>
<span class="4736948393768361142" onmouseenter="enter('4736948393768361142');" onmouseout="out('4736948393768361142');" style=""> 818         if (clientAuthMethod.equals(&quot;post&quot;)) {                                                           </span>
<span class="4033722210949459980" onmouseenter="enter('4033722210949459980');" onmouseout="out('4033722210949459980');" style=""> 819             return new ClientSecretPost(clientSecret);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820         }                                                                                                </span>
<span  style=""> 821                                                                                                          </span>
<span class="-1107687855860572488" onmouseenter="enter('-1107687855860572488');" onmouseout="out('-1107687855860572488');" style=""> 822         return new ClientSecretBasic(clientSecret);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 823     }                                                                                                    </span>
<span  style=""> 824                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 825     /*                                                                                                   </span>
<span class="5090378039448834807" onmouseenter="enter('5090378039448834807');" onmouseout="out('5090378039448834807');" style=""> 826      * Return error information if it is available                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 827      */                                                                                                  </span>
<span class="7325111704754615468" onmouseenter="enter('7325111704754615468');" onmouseout="out('7325111704754615468');" style=""> 828     private String getErrorMessage(AuthorizationException ex){                                           </span>
<span class="6233744395473659458" onmouseenter="enter('6233744395473659458');" onmouseout="out('6233744395473659458');" style=""> 829         if(ex.errorDescription == null &amp;&amp; ex.error != null)                                              </span>
<span class="8212520076730053042" onmouseenter="enter('8212520076730053042');" onmouseout="out('8212520076730053042');" style=""> 830             return ex.error;                                                                             </span>
<span class="-944119096152079377" onmouseenter="enter('-944119096152079377');" onmouseout="out('-944119096152079377');" style=""> 831         return ex.errorDescription;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 832     }                                                                                                    </span>
<span  style=""> 833                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 834     /*                                                                                                   </span>
<span class="6638112631744326921" onmouseenter="enter('6638112631744326921');" onmouseout="out('6638112631744326921');" style=""> 835      * Create a space-delimited string from an array                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 836      */                                                                                                  </span>
<span class="2843730177292313139" onmouseenter="enter('2843730177292313139');" onmouseout="out('2843730177292313139');" style=""> 837     private String arrayToString(ReadableArray array) {                                                  </span>
<span class="-8236782342056480869" onmouseenter="enter('-8236782342056480869');" onmouseout="out('-8236782342056480869');" style=""> 838         StringBuilder strBuilder = new StringBuilder();                                                  </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 839         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="-7800557187785605413" onmouseenter="enter('-7800557187785605413');" onmouseout="out('-7800557187785605413');" style=""> 840             if (i != 0) {                                                                                </span>
<span class="-4449242394605741248" onmouseenter="enter('-4449242394605741248');" onmouseout="out('-4449242394605741248');" style=""> 841                 strBuilder.append(&#x27; &#x27;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 842             }                                                                                            </span>
<span class="-8205116312766504963" onmouseenter="enter('-8205116312766504963');" onmouseout="out('-8205116312766504963');" style=""> 843             strBuilder.append(array.getString(i));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 844         }                                                                                                </span>
<span class="-7597052729024482685" onmouseenter="enter('-7597052729024482685');" onmouseout="out('-7597052729024482685');" style=""> 845         return strBuilder.toString();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 846     }                                                                                                    </span>
<span  style=""> 847                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 848     /*                                                                                                   </span>
<span class="-7672611238824893788" onmouseenter="enter('-7672611238824893788');" onmouseout="out('-7672611238824893788');" style=""> 849      * Create a string list from an array of strings                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 850      */                                                                                                  </span>
<span class="8933886143748191998" onmouseenter="enter('8933886143748191998');" onmouseout="out('8933886143748191998');" style=""> 851     private List&lt;String&gt; arrayToList(ReadableArray array) {                                              </span>
<span class="3701551209507079484" onmouseenter="enter('3701551209507079484');" onmouseout="out('3701551209507079484');" style=""> 852         ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();                                                      </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 853         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="3110930347141835410" onmouseenter="enter('3110930347141835410');" onmouseout="out('3110930347141835410');" style=""> 854             list.add(array.getString(i));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 855         }                                                                                                </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 856         return list;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 857     }                                                                                                    </span>
<span  style=""> 858                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 859     /*                                                                                                   </span>
<span class="4411172121007664287" onmouseenter="enter('4411172121007664287');" onmouseout="out('4411172121007664287');" style=""> 860      * Create a Uri list from an array of strings                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 861      */                                                                                                  </span>
<span class="502202896426029305" onmouseenter="enter('502202896426029305');" onmouseout="out('502202896426029305');" style=""> 862     private List&lt;Uri&gt; arrayToUriList(ReadableArray array) {                                              </span>
<span class="-8321772486199533839" onmouseenter="enter('-8321772486199533839');" onmouseout="out('-8321772486199533839');" style=""> 863         ArrayList&lt;Uri&gt; list = new ArrayList&lt;&gt;();                                                         </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 864         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="3593345693160557831" onmouseenter="enter('3593345693160557831');" onmouseout="out('3593345693160557831');" style=""> 865             list.add(Uri.parse(array.getString(i)));                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 866         }                                                                                                </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 867         return list;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 868     }                                                                                                    </span>
<span  style=""> 869                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 870     /*                                                                                                   </span>
<span class="5214794569700518887" onmouseenter="enter('5214794569700518887');" onmouseout="out('5214794569700518887');" style=""> 871      * Create an App Auth configuration using the provided connection builder                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 872      */                                                                                                  </span>
<span class="-5342361748775304563" onmouseenter="enter('-5342361748775304563');" onmouseout="out('-5342361748775304563');" style=""> 873     private AppAuthConfiguration createAppAuthConfiguration(ConnectionBuilder connectionBuilder) {       </span>
<span class="-6961363017801118708" onmouseenter="enter('-6961363017801118708');" onmouseout="out('-6961363017801118708');" style=""> 874         return new AppAuthConfiguration                                                                  </span>
<span class="370567544488026574" onmouseenter="enter('370567544488026574');" onmouseout="out('370567544488026574');" style=""> 875                 .Builder()                                                                               </span>
<span class="6932817517014214209" onmouseenter="enter('6932817517014214209');" onmouseout="out('6932817517014214209');" style=""> 876                 .setConnectionBuilder(connectionBuilder)                                                 </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 877                 .build();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 878     }                                                                                                    </span>
<span  style=""> 879                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 880     /*                                                                                                   </span>
<span class="2307564597312892215" onmouseenter="enter('2307564597312892215');" onmouseout="out('2307564597312892215');" style=""> 881      *  Create appropriate connection builder based on provided settings                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 882      */                                                                                                  </span>
<span class="-5286170720144338680" onmouseenter="enter('-5286170720144338680');" onmouseout="out('-5286170720144338680');" style=""><abbr title=" 883     private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, String&gt; headers) {"> 883     private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, StrinðŸ”µ</abbr></span>
<span class="7318015076305824949" onmouseenter="enter('7318015076305824949');" onmouseout="out('7318015076305824949');" style=""> 884         ConnectionBuilder proxiedBuilder;                                                                </span>
<span  style=""> 885                                                                                                          </span>
<span class="6155061091636674075" onmouseenter="enter('6155061091636674075');" onmouseout="out('6155061091636674075');" style=""> 886         if (allowInsecureConnections) {                                                                  </span>
<span class="-8652069864919613967" onmouseenter="enter('-8652069864919613967');" onmouseout="out('-8652069864919613967');" style=""> 887             proxiedBuilder =UnsafeConnectionBuilder.INSTANCE;                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 888         } else {                                                                                         </span>
<span class="-3823294731313489124" onmouseenter="enter('-3823294731313489124');" onmouseout="out('-3823294731313489124');" style=""> 889             proxiedBuilder = DefaultConnectionBuilder.INSTANCE;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 890         }                                                                                                </span>
<span  style=""> 891                                                                                                          </span>
<span class="-321326358809916252" onmouseenter="enter('-321326358809916252');" onmouseout="out('-321326358809916252');" style=""> 892         CustomConnectionBuilder customConnection = new CustomConnectionBuilder(proxiedBuilder);          </span>
<span class="-5872856843685271172" onmouseenter="enter('-5872856843685271172');" onmouseout="out('-5872856843685271172');" style=""> 893         if (headers != null) {                                                                           </span>
<span class="-4120878389218127223" onmouseenter="enter('-4120878389218127223');" onmouseout="out('-4120878389218127223');" style=""> 894             customConnection.setHeaders(headers);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 895         }                                                                                                </span>
<span  style=""> 896                                                                                                          </span>
<span class="5629827582834827587" onmouseenter="enter('5629827582834827587');" onmouseout="out('5629827582834827587');" style=""> 897         return customConnection;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 898     }                                                                                                    </span>
<span  style=""> 899                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 900     /*                                                                                                   </span>
<span class="9187662928809351886" onmouseenter="enter('9187662928809351886');" onmouseout="out('9187662928809351886');" style=""> 901      *  Replicated private method from AuthorizationServiceConfiguration                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 902      */                                                                                                  </span>
<span class="2622836649973257205" onmouseenter="enter('2622836649973257205');" onmouseout="out('2622836649973257205');" style=""> 903     private Uri buildConfigurationUriFromIssuer(Uri openIdConnectIssuerUri) {                            </span>
<span class="-830811466431368071" onmouseenter="enter('-830811466431368071');" onmouseout="out('-830811466431368071');" style=""> 904         return openIdConnectIssuerUri.buildUpon()                                                        </span>
<span class="7258170423676519924" onmouseenter="enter('7258170423676519924');" onmouseout="out('7258170423676519924');" style=""> 905                 .appendPath(AuthorizationServiceConfiguration.WELL_KNOWN_PATH)                           </span>
<span class="-3903955623180377764" onmouseenter="enter('-3903955623180377764');" onmouseout="out('-3903955623180377764');" style=""> 906                 .appendPath(AuthorizationServiceConfiguration.OPENID_CONFIGURATION_RESOURCE)             </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 907                 .build();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 908     }                                                                                                    </span>
<span  style=""> 909                                                                                                          </span>
<span class="3122274151060887299" onmouseenter="enter('3122274151060887299');" onmouseout="out('3122274151060887299');" style=""><abbr title=" 910     private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguration) throws Exception {"> 910     private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceðŸ”µ</abbr></span>
<span class="4275545280692735139" onmouseenter="enter('4275545280692735139');" onmouseout="out('4275545280692735139');" style=""> 911         if (!serviceConfiguration.hasKey(&quot;authorizationEndpoint&quot;)) {                                     </span>
<span class="3986521017730318395" onmouseenter="enter('3986521017730318395');" onmouseout="out('3986521017730318395');" style=""> 912             throw new Exception(&quot;serviceConfiguration passed without an authorizationEndpoint&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 913         }                                                                                                </span>
<span  style=""> 914                                                                                                          </span>
<span class="5638598812511759739" onmouseenter="enter('5638598812511759739');" onmouseout="out('5638598812511759739');" style=""> 915         if (!serviceConfiguration.hasKey(&quot;tokenEndpoint&quot;)) {                                             </span>
<span class="7444064849592215652" onmouseenter="enter('7444064849592215652');" onmouseout="out('7444064849592215652');" style=""> 916             throw new Exception(&quot;serviceConfiguration passed without a tokenEndpoint&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 917         }                                                                                                </span>
<span  style=""> 918                                                                                                          </span>
<span class="-3941749567598770425" onmouseenter="enter('-3941749567598770425');" onmouseout="out('-3941749567598770425');" style=""> 919         Uri authorizationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;authorizationEndpoint&quot;));  </span>
<span class="4054930865548070446" onmouseenter="enter('4054930865548070446');" onmouseout="out('4054930865548070446');" style=""> 920         Uri tokenEndpoint = Uri.parse(serviceConfiguration.getString(&quot;tokenEndpoint&quot;));                  </span>
<span class="2264343622444418519" onmouseenter="enter('2264343622444418519');" onmouseout="out('2264343622444418519');" style=""> 921         Uri registrationEndpoint = null;                                                                 </span>
<span class="-4970643399788664483" onmouseenter="enter('-4970643399788664483');" onmouseout="out('-4970643399788664483');" style=""> 922         if (serviceConfiguration.hasKey(&quot;registrationEndpoint&quot;)) {                                       </span>
<span class="1609034589288005797" onmouseenter="enter('1609034589288005797');" onmouseout="out('1609034589288005797');" style=""> 923             registrationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;registrationEndpoint&quot;));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 924         }                                                                                                </span>
<span  style=""> 925                                                                                                          </span>
<span class="-8455698330779530293" onmouseenter="enter('-8455698330779530293');" onmouseout="out('-8455698330779530293');" style=""> 926         return new AuthorizationServiceConfiguration(                                                    </span>
<span class="-9206356706352718453" onmouseenter="enter('-9206356706352718453');" onmouseout="out('-9206356706352718453');" style=""> 927                 authorizationEndpoint,                                                                   </span>
<span class="-6119344076232034280" onmouseenter="enter('-6119344076232034280');" onmouseout="out('-6119344076232034280');" style=""> 928                 tokenEndpoint,                                                                           </span>
<span class="-4224958759407269631" onmouseenter="enter('-4224958759407269631');" onmouseout="out('-4224958759407269631');" style=""> 929                 registrationEndpoint                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 930         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 931     }                                                                                                    </span>
<span  style=""> 932                                                                                                          </span>
<span class="-4130257184876230563" onmouseenter="enter('-4130257184876230563');" onmouseout="out('-4130257184876230563');" style=""> 933     private void warmChromeCustomTab(Context context, final String issuer) {                             </span>
<span class="-4012796735492941375" onmouseenter="enter('-4012796735492941375');" onmouseout="out('-4012796735492941375');" style=""> 934         CustomTabsServiceConnection connection = new CustomTabsServiceConnection() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 935             @Override                                                                                    </span>
<span class="4306327880536035079" onmouseenter="enter('4306327880536035079');" onmouseout="out('4306327880536035079');" style=""> 936             public void onCustomTabsServiceConnected(ComponentName name, CustomTabsClient client) {      </span>
<span class="-5035114608817725139" onmouseenter="enter('-5035114608817725139');" onmouseout="out('-5035114608817725139');" style=""> 937                 client.warmup(0);                                                                        </span>
<span class="-5613023257304239322" onmouseenter="enter('-5613023257304239322');" onmouseout="out('-5613023257304239322');" style=""> 938                 CustomTabsSession session = client.newSession(new CustomTabsCallback());                 </span>
<span class="417819926325380348" onmouseenter="enter('417819926325380348');" onmouseout="out('417819926325380348');" style=""> 939                 if (session == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 940                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 941                 }                                                                                        </span>
<span class="-5956768039281383269" onmouseenter="enter('-5956768039281383269');" onmouseout="out('-5956768039281383269');" style=""> 942                 session.mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;Bundle&gt;emptyList());          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 943             }                                                                                            </span>
<span  style=""> 944                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 945             @Override                                                                                    </span>
<span class="6231636659664649995" onmouseenter="enter('6231636659664649995');" onmouseout="out('6231636659664649995');" style=""> 946             public void onServiceDisconnected(ComponentName name) {                                      </span>
<span  style=""> 947                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 948             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 949         };                                                                                               </span>
<span class="5767142201781268255" onmouseenter="enter('5767142201781268255');" onmouseout="out('5767142201781268255');" style=""> 950         CustomTabsClient.bindCustomTabsService(context, CUSTOM_TAB_PACKAGE_NAME, connection);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 951     }                                                                                                    </span>
<span  style=""> 952                                                                                                          </span>
<span class="-1658212530082885279" onmouseenter="enter('-1658212530082885279');" onmouseout="out('-1658212530082885279');" style=""> 953     private boolean hasServiceConfiguration(@Nullable String issuer) {                                   </span>
<span class="3142036358572061785" onmouseenter="enter('3142036358572061785');" onmouseout="out('3142036358572061785');" style=""> 954         return issuer != null &amp;&amp; mServiceConfigurations.containsKey(issuer);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 955     }                                                                                                    </span>
<span  style=""> 956                                                                                                          </span>
<span class="4451430102422208639" onmouseenter="enter('4451430102422208639');" onmouseout="out('4451430102422208639');" style=""> 957     private AuthorizationServiceConfiguration getServiceConfiguration(@Nullable String issuer) {         </span>
<span class="5076090829869343760" onmouseenter="enter('5076090829869343760');" onmouseout="out('5076090829869343760');" style=""> 958         if (issuer == null) {                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 959             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 960         } else {                                                                                         </span>
<span class="-3187761823116610672" onmouseenter="enter('-3187761823116610672');" onmouseout="out('-3187761823116610672');" style=""> 961             return mServiceConfigurations.get(issuer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 962         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 963     }                                                                                                    </span>
<span  style=""> 964                                                                                                          </span>
<span class="1347888294933903664" onmouseenter="enter('1347888294933903664');" onmouseout="out('1347888294933903664');" style=""><abbr title=" 965     private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviceConfiguration) {"> 965     private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviðŸ”µ</abbr></span>
<span class="-2487039014584680663" onmouseenter="enter('-2487039014584680663');" onmouseout="out('-2487039014584680663');" style=""> 966         if (issuer != null) {                                                                            </span>
<span class="-69747729719258596" onmouseenter="enter('-69747729719258596');" onmouseout="out('-69747729719258596');" style=""> 967             mServiceConfigurations.put(issuer, serviceConfiguration);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 968         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 969     }                                                                                                    </span>
<span  style=""> 970                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 971     @Override                                                                                            </span>
<span class="-4337880705383881802" onmouseenter="enter('-4337880705383881802');" onmouseout="out('-4337880705383881802');" style=""> 972     public void onNewIntent(Intent intent) {                                                             </span>
<span  style=""> 973                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 974     }                                                                                                    </span>
<span  style=""> 975                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 976     @Override                                                                                            </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style=""> 977     public String getName() {                                                                            </span>
<span class="4315075324919368681" onmouseenter="enter('4315075324919368681');" onmouseout="out('4315075324919368681');" style=""> 978         return &quot;RNAppAuth&quot;;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 979     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 980 }                                                                                                        </span></pre></td>
                            <td><pre><span class="-6280296900167357794" onmouseenter="enter('-6280296900167357794');" onmouseout="out('-6280296900167357794');" style="">   1 package com.rnappauth;                                                                                   </span>
<span  style="">   2                                                                                                          </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3 import android.app.Activity;                                                                             </span>
<span class="2265467446931963889" onmouseenter="enter('2265467446931963889');" onmouseout="out('2265467446931963889');" style="">   4 import android.app.PendingIntent;                                                                        </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">   5 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">   6 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   7 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   8 import android.content.Intent;                                                                           </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   9 import android.net.Uri;                                                                                  </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">  10 import android.os.Bundle;                                                                                </span>
<span class="-6436154409168942626" onmouseenter="enter('-6436154409168942626');" onmouseout="out('-6436154409168942626');" style="">  11 import androidx.annotation.Nullable;                                                                     </span>
<span class="-4621922491292668474" onmouseenter="enter('-4621922491292668474');" onmouseout="out('-4621922491292668474');" style="">  12 import androidx.browser.customtabs.CustomTabsCallback;                                                   </span>
<span class="5786009149739133921" onmouseenter="enter('5786009149739133921');" onmouseout="out('5786009149739133921');" style="">  13 import androidx.browser.customtabs.CustomTabsClient;                                                     </span>
<span class="6730446154443378273" onmouseenter="enter('6730446154443378273');" onmouseout="out('6730446154443378273');" style="">  14 import androidx.browser.customtabs.CustomTabsServiceConnection;                                          </span>
<span class="-3044346478057358458" onmouseenter="enter('-3044346478057358458');" onmouseout="out('-3044346478057358458');" style="">  15 import androidx.browser.customtabs.CustomTabsSession;                                                    </span>
<span class="7327608205307094785" onmouseenter="enter('7327608205307094785');" onmouseout="out('7327608205307094785');" style="">  16 import com.facebook.react.bridge.ActivityEventListener;                                                  </span>
<span class="-9114944870765420144" onmouseenter="enter('-9114944870765420144');" onmouseout="out('-9114944870765420144');" style="">  17 import com.facebook.react.bridge.Promise;                                                                </span>
<span class="1744055796152404290" onmouseenter="enter('1744055796152404290');" onmouseout="out('1744055796152404290');" style="">  18 import com.facebook.react.bridge.ReactApplicationContext;                                                </span>
<span class="7756046764634890677" onmouseenter="enter('7756046764634890677');" onmouseout="out('7756046764634890677');" style="">  19 import com.facebook.react.bridge.ReactContextBaseJavaModule;                                             </span>
<span class="-7062843866366665780" onmouseenter="enter('-7062843866366665780');" onmouseout="out('-7062843866366665780');" style="">  20 import com.facebook.react.bridge.ReactMethod;                                                            </span>
<span class="3666939786570277423" onmouseenter="enter('3666939786570277423');" onmouseout="out('3666939786570277423');" style="">  21 import com.facebook.react.bridge.ReadableArray;                                                          </span>
<span class="5552486474970006352" onmouseenter="enter('5552486474970006352');" onmouseout="out('5552486474970006352');" style="">  22 import com.facebook.react.bridge.ReadableMap;                                                            </span>
<span class="7507448895670758430" onmouseenter="enter('7507448895670758430');" onmouseout="out('7507448895670758430');" style="">  23 import com.facebook.react.bridge.ReadableType;                                                           </span>
<span class="-2689054124168074705" onmouseenter="enter('-2689054124168074705');" onmouseout="out('-2689054124168074705');" style="">  24 import com.facebook.react.bridge.WritableMap;                                                            </span>
<span class="-7309342380344421476" onmouseenter="enter('-7309342380344421476');" onmouseout="out('-7309342380344421476');" style="">  25 import com.rnappauth.utils.CustomConnectionBuilder;                                                      </span>
<span class="2824452556317040091" onmouseenter="enter('2824452556317040091');" onmouseout="out('2824452556317040091');" style="">  26 import com.rnappauth.utils.MapUtil;                                                                      </span>
<span class="6146867944265222634" onmouseenter="enter('6146867944265222634');" onmouseout="out('6146867944265222634');" style="">  27 import com.rnappauth.utils.RegistrationResponseFactory;                                                  </span>
<span class="5385195114029684108" onmouseenter="enter('5385195114029684108');" onmouseout="out('5385195114029684108');" style="">  28 import com.rnappauth.utils.TokenResponseFactory;                                                         </span>
<span class="2320112657500195094" onmouseenter="enter('2320112657500195094');" onmouseout="out('2320112657500195094');" style="">  29 import com.rnappauth.utils.UnsafeConnectionBuilder;                                                      </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  30 import java.util.ArrayList;                                                                              </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  31 import java.util.Collections;                                                                            </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  32 import java.util.HashMap;                                                                                </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  33 import java.util.List;                                                                                   </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  34 import java.util.Map;                                                                                    </span>
<span class="8600016768069240092" onmouseenter="enter('8600016768069240092');" onmouseout="out('8600016768069240092');" style="">  35 import java.util.concurrent.ConcurrentHashMap;                                                           </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  36 import java.util.concurrent.CountDownLatch;                                                              </span>
<span class="2084880808431135122" onmouseenter="enter('2084880808431135122');" onmouseout="out('2084880808431135122');" style="">  37 import net.openid.appauth.AppAuthConfiguration;                                                          </span>
<span class="-6153791587225110013" onmouseenter="enter('-6153791587225110013');" onmouseout="out('-6153791587225110013');" style="">  38 import net.openid.appauth.AuthorizationException;                                                        </span>
<span class="220855730882953420" onmouseenter="enter('220855730882953420');" onmouseout="out('220855730882953420');" style="">  39 import net.openid.appauth.AuthorizationRequest;                                                          </span>
<span class="3507212550601358175" onmouseenter="enter('3507212550601358175');" onmouseout="out('3507212550601358175');" style="">  40 import net.openid.appauth.AuthorizationResponse;                                                         </span>
<span class="6486087234581123017" onmouseenter="enter('6486087234581123017');" onmouseout="out('6486087234581123017');" style="">  41 import net.openid.appauth.AuthorizationService;                                                          </span>
<span class="-1918380963859750931" onmouseenter="enter('-1918380963859750931');" onmouseout="out('-1918380963859750931');" style="">  42 import net.openid.appauth.AuthorizationServiceConfiguration;                                             </span>
<span class="-1745886087889911862" onmouseenter="enter('-1745886087889911862');" onmouseout="out('-1745886087889911862');" style="">  43 import net.openid.appauth.ClientAuthentication;                                                          </span>
<span class="5802881313983385714" onmouseenter="enter('5802881313983385714');" onmouseout="out('5802881313983385714');" style="">  44 import net.openid.appauth.ClientSecretBasic;                                                             </span>
<span class="6044047429679939107" onmouseenter="enter('6044047429679939107');" onmouseout="out('6044047429679939107');" style="">  45 import net.openid.appauth.ClientSecretPost;                                                              </span>
<span class="2300124290120821674" onmouseenter="enter('2300124290120821674');" onmouseout="out('2300124290120821674');" style="">  46 import net.openid.appauth.RegistrationRequest;                                                           </span>
<span class="8892208418569385403" onmouseenter="enter('8892208418569385403');" onmouseout="out('8892208418569385403');" style="">  47 import net.openid.appauth.RegistrationResponse;                                                          </span>
<span class="-7057741429751790751" onmouseenter="enter('-7057741429751790751');" onmouseout="out('-7057741429751790751');" style="">  48 import net.openid.appauth.ResponseTypeValues;                                                            </span>
<span class="4423191746780431402" onmouseenter="enter('4423191746780431402');" onmouseout="out('4423191746780431402');" style="">  49 import net.openid.appauth.TokenRequest;                                                                  </span>
<span class="7041795251639894294" onmouseenter="enter('7041795251639894294');" onmouseout="out('7041795251639894294');" style="">  50 import net.openid.appauth.TokenResponse;                                                                 </span>
<span class="-5344047661436712974" onmouseenter="enter('-5344047661436712974');" onmouseout="out('-5344047661436712974');" style="">  51 import net.openid.appauth.connectivity.ConnectionBuilder;                                                </span>
<span class="2682978576506672064" onmouseenter="enter('2682978576506672064');" onmouseout="out('2682978576506672064');" style="">  52 import net.openid.appauth.connectivity.DefaultConnectionBuilder;                                         </span>
<span  style="">  53                                                                                                          </span>
<span  style="">  54                                                                                                          </span>
<span class="6575769426762835403" onmouseenter="enter('6575769426762835403');" onmouseout="out('6575769426762835403');" style="">  55 public class RNAppAuthModule extends ReactContextBaseJavaModule implements ActivityEventListener {       </span>
<span class="8401162781518473365" onmouseenter="enter('8401162781518473365');" onmouseout="out('8401162781518473365');" style="">  56     public static final String CUSTOM_TAB_PACKAGE_NAME = &quot;com.android.chrome&quot;;                           </span>
<span  style="">  57                                                                                                          </span>
<span class="6180419538961108965" onmouseenter="enter('6180419538961108965');" onmouseout="out('6180419538961108965');" style="">  58     private final ReactApplicationContext reactContext;                                                  </span>
<span  style="">  59                                                                                                          </span>
<span class="1869321332520936904" onmouseenter="enter('1869321332520936904');" onmouseout="out('1869321332520936904');" style="">  60     private Promise promise;                                                                             </span>
<span  style="">  61                                                                                                          </span>
<span class="1815072443305468649" onmouseenter="enter('1815072443305468649');" onmouseout="out('1815072443305468649');" style="">  62     private boolean dangerouslyAllowInsecureHttpRequests;                                                </span>
<span  style="">  63                                                                                                          </span>
<span class="3709939774236496336" onmouseenter="enter('3709939774236496336');" onmouseout="out('3709939774236496336');" style="">  64     private Boolean skipCodeExchange;                                                                    </span>
<span  style="">  65                                                                                                          </span>
<span class="6877933566748299598" onmouseenter="enter('6877933566748299598');" onmouseout="out('6877933566748299598');" style="">  66     private String clientAuthMethod = &quot;basic&quot;;                                                           </span>
<span  style="">  67                                                                                                          </span>
<span class="-9158722382120219449" onmouseenter="enter('-9158722382120219449');" onmouseout="out('-9158722382120219449');" style="">  68     private Map&lt;String, String&gt; registrationRequestHeaders = null;                                       </span>
<span  style="">  69                                                                                                          </span>
<span class="5073960437150900627" onmouseenter="enter('5073960437150900627');" onmouseout="out('5073960437150900627');" style="">  70     private Map&lt;String, String&gt; authorizationRequestHeaders = null;                                      </span>
<span  style="">  71                                                                                                          </span>
<span class="493655431939084947" onmouseenter="enter('493655431939084947');" onmouseout="out('493655431939084947');" style="">  72     private Map&lt;String, String&gt; tokenRequestHeaders = null;                                              </span>
<span  style="">  73                                                                                                          </span>
<span class="4071237130655105462" onmouseenter="enter('4071237130655105462');" onmouseout="out('4071237130655105462');" style="">  74     private Map&lt;String, String&gt; additionalParametersMap;                                                 </span>
<span  style="">  75                                                                                                          </span>
<span class="266383520389269247" onmouseenter="enter('266383520389269247');" onmouseout="out('266383520389269247');" style="">  76     private String clientSecret;                                                                         </span>
<span  style="">  77                                                                                                          </span>
<span class="3601618847927794657" onmouseenter="enter('3601618847927794657');" onmouseout="out('3601618847927794657');" style=""><abbr title="  78     private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = new ConcurrentHashMap&lt;&gt;();">  78     private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = nðŸ”µ</abbr></span>
<span  style="">  79                                                                                                          </span>
<span class="-7004558742358285463" onmouseenter="enter('-7004558742358285463');" onmouseout="out('-7004558742358285463');" style="">  80     private boolean isPrefetched = false;                                                                </span>
<span  style="">  81                                                                                                          </span>
<span class="-978447563967948693" onmouseenter="enter('-978447563967948693');" onmouseout="out('-978447563967948693');" style="">  82     public RNAppAuthModule(ReactApplicationContext reactContext) {                                       </span>
<span class="-1443603959286428543" onmouseenter="enter('-1443603959286428543');" onmouseout="out('-1443603959286428543');" style="">  83         super(reactContext);                                                                             </span>
<span class="3003228313870805798" onmouseenter="enter('3003228313870805798');" onmouseout="out('3003228313870805798');" style="">  84         this.reactContext = reactContext;                                                                </span>
<span class="6669990586656871028" onmouseenter="enter('6669990586656871028');" onmouseout="out('6669990586656871028');" style="">  85         reactContext.addActivityEventListener(this);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86     }                                                                                                    </span>
<span  style="">  87                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="">  88     @ReactMethod                                                                                         </span>
<span class="1179318430900919673" onmouseenter="enter('1179318430900919673');" onmouseout="out('1179318430900919673');" style=""><abbr title="  89     public void prefetchConfiguration(final Boolean warmAndPrefetchChrome, final String issuer, final String redirectUrl, final String clientId, final ReadableArray scopes, final ReadableMap serviceConfiguration, final boolean dangerouslyAllowInsecureHttpRequests, final ReadableMap headers, final Promise promise) {">  89     public void prefetchConfiguration(final Boolean warmAndPrefetchChrome, final String issuer, final StrðŸ”µ</abbr></span>
<span class="-7526945842846133690" onmouseenter="enter('-7526945842846133690');" onmouseout="out('-7526945842846133690');" style="">  90         if (warmAndPrefetchChrome) {                                                                     </span>
<span class="8703515971997686923" onmouseenter="enter('8703515971997686923');" onmouseout="out('8703515971997686923');" style="">  91             warmChromeCustomTab(reactContext, issuer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  92         }                                                                                                </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style="">  93         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title="  94         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);">  94         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="8517032726698162354" onmouseenter="enter('8517032726698162354');" onmouseout="out('8517032726698162354');" style="">  95         final CountDownLatch fetchConfigurationLatch = new CountDownLatch(1);                            </span>
<span class="-8709359352183164935" onmouseenter="enter('-8709359352183164935');" onmouseout="out('-8709359352183164935');" style="">  96         if (!isPrefetched) {                                                                             </span>
<span class="-7359562755020758315" onmouseenter="enter('-7359562755020758315');" onmouseout="out('-7359562755020758315');" style="">  97             if ((serviceConfiguration != null) &amp;&amp; (!this.hasServiceConfiguration(issuer))) {             </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="">  98                 try {                                                                                    </span>
<span class="7730737146098200581" onmouseenter="enter('7730737146098200581');" onmouseout="out('7730737146098200581');" style=""><abbr title="  99                     setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfiguration));">  99                     setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfigðŸ”µ</abbr></span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 100                     isPrefetched = true;                                                                 </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 101                     fetchConfigurationLatch.countDown();                                                 </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 102                 } catch (java.lang.Exception e) {                                                        </span>
<span class="6809300863683709814" onmouseenter="enter('6809300863683709814');" onmouseout="out('6809300863683709814');" style=""> 103                     promise.reject(&quot;configuration_error&quot;, &quot;Failed to convert serviceConfiguration&quot;, e);  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104                 }                                                                                        </span>
<span class="386976522086802497" onmouseenter="enter('386976522086802497');" onmouseout="out('386976522086802497');" style=""> 105             } else if (!hasServiceConfiguration(issuer)) {                                               </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 106                 final Uri issuerUri = Uri.parse(issuer);                                                 </span>
<span class="-8547048573593997638" onmouseenter="enter('-8547048573593997638');" onmouseout="out('-8547048573593997638');" style=""><abbr title=" 107                 AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {"> 107                 AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri)ðŸ”µ</abbr></span>
<span class="-2257150778706080239" onmouseenter="enter('-2257150778706080239');" onmouseout="out('-2257150778706080239');" style=""> 108                     public void onFetchConfigurationCompleted(@Nullable                                  </span>
<span class="3222389656683390874" onmouseenter="enter('3222389656683390874');" onmouseout="out('3222389656683390874');" style=""> 109                     AuthorizationServiceConfiguration fetchedConfiguration, @Nullable                    </span>
<span class="-6575744672153550235" onmouseenter="enter('-6575744672153550235');" onmouseout="out('-6575744672153550235');" style=""> 110                     AuthorizationException ex) {                                                         </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 111                         if (ex != null) {                                                                </span>
<span class="6863513032854295921" onmouseenter="enter('6863513032854295921');" onmouseout="out('6863513032854295921');" style=""><abbr title=" 112                             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuration&quot;, ex);"> 112                             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configurðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 113                             return;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114                         }                                                                                </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 115                         setServiceConfiguration(issuer, fetchedConfiguration);                           </span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 116                         isPrefetched = true;                                                             </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 117                         fetchConfigurationLatch.countDown();                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118                     }                                                                                    </span>
<span class="430947961988862402" onmouseenter="enter('430947961988862402');" onmouseout="out('430947961988862402');" style=""> 119                 }, builder);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 121         } else {                                                                                         </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 122             fetchConfigurationLatch.countDown();                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123         }                                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 124         try {                                                                                            </span>
<span class="-1907621811022997860" onmouseenter="enter('-1907621811022997860');" onmouseout="out('-1907621811022997860');" style=""> 125             fetchConfigurationLatch.await();                                                             </span>
<span class="1954864242125272611" onmouseenter="enter('1954864242125272611');" onmouseout="out('1954864242125272611');" style=""> 126             promise.resolve(isPrefetched);                                                               </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 127         } catch (java.lang.Exception e) {                                                                </span>
<span class="1768900707370095440" onmouseenter="enter('1768900707370095440');" onmouseout="out('1768900707370095440');" style=""><abbr title=" 128             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e);"> 128             promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 132     @ReactMethod                                                                                         </span>
<span class="54030183759310909" onmouseenter="enter('54030183759310909');" onmouseout="out('54030183759310909');" style=""><abbr title=" 133     public void register(String issuer, final ReadableArray redirectUris, final ReadableArray responseTypes, final ReadableArray grantTypes, final String subjectType, final String tokenEndpointAuthMethod, final ReadableMap additionalParameters, final ReadableMap serviceConfiguration, final boolean dangerouslyAllowInsecureHttpRequests, final ReadableMap headers, final Promise promise) {"> 133     public void register(String issuer, final ReadableArray redirectUris, final ReadableArray responseTypðŸ”µ</abbr></span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 134         this.parseHeaderMap(headers);                                                                    </span>
<span class="263301671464505834" onmouseenter="enter('263301671464505834');" onmouseout="out('263301671464505834');" style=""><abbr title=" 135         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.registrationRequestHeaders);"> 135         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 136         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 137         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 137         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 138         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 138         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="-4157406245238419521" onmouseenter="enter('-4157406245238419521');" onmouseout="out('-4157406245238419521');" style=""> 139         if ((serviceConfiguration != null) || hasServiceConfiguration(issuer)) {                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 140             try {                                                                                        </span>
<span class="-7211049569860892878" onmouseenter="enter('-7211049569860892878');" onmouseout="out('-7211049569860892878');" style=""><abbr title=" 141                 final AuthorizationServiceConfiguration serviceConfig = (hasServiceConfiguration(issuer)) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 141                 final AuthorizationServiceConfiguration serviceConfig = (hasServiceConfiguration(issuer))ðŸ”µ</abbr></span>
<span class="-4254988027616816226" onmouseenter="enter('-4254988027616816226');" onmouseout="out('-4254988027616816226');" style=""><abbr title=" 142                 registerWithConfiguration(serviceConfig, appAuthConfiguration, redirectUris, responseTypes, grantTypes, subjectType, tokenEndpointAuthMethod, additionalParametersMap, promise);"> 142                 registerWithConfiguration(serviceConfig, appAuthConfiguration, redirectUris, responseTypeðŸ”µ</abbr></span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 143             } catch (java.lang.Exception e) {                                                            </span>
<span class="-4765268916451052755" onmouseenter="enter('-4765268916451052755');" onmouseout="out('-4765268916451052755');" style=""> 144                 promise.reject(&quot;registration_failed&quot;, e.getMessage());                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 146         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 147             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="-8547048573593997638" onmouseenter="enter('-8547048573593997638');" onmouseout="out('-8547048573593997638');" style=""><abbr title=" 148             AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {"> 148             AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), neðŸ”µ</abbr></span>
<span class="-2257150778706080239" onmouseenter="enter('-2257150778706080239');" onmouseout="out('-2257150778706080239');" style=""> 149                 public void onFetchConfigurationCompleted(@Nullable                                      </span>
<span class="3222389656683390874" onmouseenter="enter('3222389656683390874');" onmouseout="out('3222389656683390874');" style=""> 150                 AuthorizationServiceConfiguration fetchedConfiguration, @Nullable                        </span>
<span class="-6575744672153550235" onmouseenter="enter('-6575744672153550235');" onmouseout="out('-6575744672153550235');" style=""> 151                 AuthorizationException ex) {                                                             </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 152                     if (ex != null) {                                                                    </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 153                         promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 154                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155                     }                                                                                    </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 156                     setServiceConfiguration(issuer, fetchedConfiguration);                               </span>
<span class="-1970520109239671364" onmouseenter="enter('-1970520109239671364');" onmouseout="out('-1970520109239671364');" style=""><abbr title=" 157                     registerWithConfiguration(fetchedConfiguration, appAuthConfiguration, redirectUris, responseTypes, grantTypes, subjectType, tokenEndpointAuthMethod, additionalParametersMap, promise);"> 157                     registerWithConfiguration(fetchedConfiguration, appAuthConfiguration, redirectUris, rðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158                 }                                                                                        </span>
<span class="430947961988862402" onmouseenter="enter('430947961988862402');" onmouseout="out('430947961988862402');" style=""> 159             }, builder);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161     }                                                                                                    </span>
<span  style=""> 162                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 163     @ReactMethod                                                                                         </span>
<span class="4730672732589593558" onmouseenter="enter('4730672732589593558');" onmouseout="out('4730672732589593558');" style=""><abbr title=" 164     public void authorize(String issuer, final String redirectUrl, final String clientId, final String clientSecret, final ReadableArray scopes, final ReadableMap additionalParameters, final ReadableMap serviceConfiguration, final Boolean skipCodeExchange, final Boolean usePKCE, final String clientAuthMethod, final boolean dangerouslyAllowInsecureHttpRequests, final ReadableMap headers, final Promise promise) {"> 164     public void authorize(String issuer, final String redirectUrl, final String clientId, final String clðŸ”µ</abbr></span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 165         this.parseHeaderMap(headers);                                                                    </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title=" 166         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 166         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 167         final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);      </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 168         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 168         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style=""> 169         // store args in private fields for later use in onActivityResult handler                        </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style=""> 170         this.promise = promise;                                                                          </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 171         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 172         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style=""> 173         this.clientSecret = clientSecret;                                                                </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style=""> 174         this.clientAuthMethod = clientAuthMethod;                                                        </span>
<span class="2527862308639794492" onmouseenter="enter('2527862308639794492');" onmouseout="out('2527862308639794492');" style=""> 175         this.skipCodeExchange = skipCodeExchange;                                                        </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 176         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 176         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="-4157406245238419521" onmouseenter="enter('-4157406245238419521');" onmouseout="out('-4157406245238419521');" style=""> 177         if ((serviceConfiguration != null) || hasServiceConfiguration(issuer)) {                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 178             try {                                                                                        </span>
<span class="-7211049569860892878" onmouseenter="enter('-7211049569860892878');" onmouseout="out('-7211049569860892878');" style=""><abbr title=" 179                 final AuthorizationServiceConfiguration serviceConfig = (hasServiceConfiguration(issuer)) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 179                 final AuthorizationServiceConfiguration serviceConfig = (hasServiceConfiguration(issuer))ðŸ”µ</abbr></span>
<span class="4365749174608131524" onmouseenter="enter('4365749174608131524');" onmouseout="out('4365749174608131524');" style=""><abbr title=" 180                 authorizeWithConfiguration(serviceConfig, appAuthConfiguration, clientId, scopes, redirectUrl, usePKCE, additionalParametersMap);"> 180                 authorizeWithConfiguration(serviceConfig, appAuthConfiguration, clientId, scopes, redirecðŸ”µ</abbr></span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 181             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 182                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 183             } catch (java.lang.Exception e) {                                                            </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style=""> 184                 promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 185             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 186         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 187             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="-8547048573593997638" onmouseenter="enter('-8547048573593997638');" onmouseout="out('-8547048573593997638');" style=""><abbr title=" 188             AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {"> 188             AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), neðŸ”µ</abbr></span>
<span class="-2257150778706080239" onmouseenter="enter('-2257150778706080239');" onmouseout="out('-2257150778706080239');" style=""> 189                 public void onFetchConfigurationCompleted(@Nullable                                      </span>
<span class="3222389656683390874" onmouseenter="enter('3222389656683390874');" onmouseout="out('3222389656683390874');" style=""> 190                 AuthorizationServiceConfiguration fetchedConfiguration, @Nullable                        </span>
<span class="-6575744672153550235" onmouseenter="enter('-6575744672153550235');" onmouseout="out('-6575744672153550235');" style=""> 191                 AuthorizationException ex) {                                                             </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 192                     if (ex != null) {                                                                    </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 193                         promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 194                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195                     }                                                                                    </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 196                     setServiceConfiguration(issuer, fetchedConfiguration);                               </span>
<span class="-9066176821851810209" onmouseenter="enter('-9066176821851810209');" onmouseout="out('-9066176821851810209');" style=""><abbr title=" 197                     authorizeWithConfiguration(fetchedConfiguration, appAuthConfiguration, clientId, scopes, redirectUrl, usePKCE, additionalParametersMap);"> 197                     authorizeWithConfiguration(fetchedConfiguration, appAuthConfiguration, clientId, scopðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198                 }                                                                                        </span>
<span class="430947961988862402" onmouseenter="enter('430947961988862402');" onmouseout="out('430947961988862402');" style=""> 199             }, builder);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 203     @ReactMethod                                                                                         </span>
<span class="4661828097760531233" onmouseenter="enter('4661828097760531233');" onmouseout="out('4661828097760531233');" style=""><abbr title=" 204     public void refresh(String issuer, final String redirectUrl, final String clientId, final String clientSecret, final String refreshToken, final ReadableArray scopes, final ReadableMap additionalParameters, final ReadableMap serviceConfiguration, final String clientAuthMethod, final boolean dangerouslyAllowInsecureHttpRequests, final ReadableMap headers, final Promise promise) {"> 204     public void refresh(String issuer, final String redirectUrl, final String clientId, final String clieðŸ”µ</abbr></span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 205         this.parseHeaderMap(headers);                                                                    </span>
<span class="5750510513523473374" onmouseenter="enter('5750510513523473374');" onmouseout="out('5750510513523473374');" style=""><abbr title=" 206         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders);"> 206         final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, tðŸ”µ</abbr></span>
<span class="-7964591588332866161" onmouseenter="enter('-7964591588332866161');" onmouseout="out('-7964591588332866161');" style=""> 207         final AppAuthConfiguration appAuthConfiguration = createAppAuthConfiguration(builder);           </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 208         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 208         final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalPaðŸ”µ</abbr></span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 209         if (clientSecret != null) {                                                                      </span>
<span class="-5682406089270036260" onmouseenter="enter('-5682406089270036260');" onmouseout="out('-5682406089270036260');" style=""> 210             additionalParametersMap.put(&quot;client_secret&quot;, clientSecret);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211         }                                                                                                </span>
<span class="1495748746185505707" onmouseenter="enter('1495748746185505707');" onmouseout="out('1495748746185505707');" style=""> 212         // store setting in private field for later use in onActivityResult handler                      </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 213         this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 214         this.additionalParametersMap = additionalParametersMap;                                          </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""><abbr title=" 215         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint"> 215         // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoiðŸ”µ</abbr></span>
<span class="-4157406245238419521" onmouseenter="enter('-4157406245238419521');" onmouseout="out('-4157406245238419521');" style=""> 216         if ((serviceConfiguration != null) || hasServiceConfiguration(issuer)) {                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 217             try {                                                                                        </span>
<span class="-7211049569860892878" onmouseenter="enter('-7211049569860892878');" onmouseout="out('-7211049569860892878');" style=""><abbr title=" 218                 final AuthorizationServiceConfiguration serviceConfig = (hasServiceConfiguration(issuer)) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 218                 final AuthorizationServiceConfiguration serviceConfig = (hasServiceConfiguration(issuer))ðŸ”µ</abbr></span>
<span class="-6761808542727858534" onmouseenter="enter('-6761808542727858534');" onmouseout="out('-6761808542727858534');" style=""><abbr title=" 219                 refreshWithConfiguration(serviceConfig, appAuthConfiguration, refreshToken, clientId, scopes, redirectUrl, additionalParametersMap, clientAuthMethod, clientSecret, promise);"> 219                 refreshWithConfiguration(serviceConfig, appAuthConfiguration, refreshToken, clientId, scoðŸ”µ</abbr></span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 220             } catch (ActivityNotFoundException e) {                                                      </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 221                 promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                     </span>
<span class="-3589222456918676513" onmouseenter="enter('-3589222456918676513');" onmouseout="out('-3589222456918676513');" style=""> 222             } catch (java.lang.Exception e) {                                                            </span>
<span class="7513248397060081198" onmouseenter="enter('7513248397060081198');" onmouseout="out('7513248397060081198');" style=""> 223                 promise.reject(&quot;token_refresh_failed&quot;, e.getMessage());                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 225         } else {                                                                                         </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 226             final Uri issuerUri = Uri.parse(issuer);                                                     </span>
<span class="-8547048573593997638" onmouseenter="enter('-8547048573593997638');" onmouseout="out('-8547048573593997638');" style=""><abbr title=" 227             AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {"> 227             AuthorizationServiceConfiguration.fetchFromUrl(buildConfigurationUriFromIssuer(issuerUri), neðŸ”µ</abbr></span>
<span class="-2257150778706080239" onmouseenter="enter('-2257150778706080239');" onmouseout="out('-2257150778706080239');" style=""> 228                 public void onFetchConfigurationCompleted(@Nullable                                      </span>
<span class="3222389656683390874" onmouseenter="enter('3222389656683390874');" onmouseout="out('3222389656683390874');" style=""> 229                 AuthorizationServiceConfiguration fetchedConfiguration, @Nullable                        </span>
<span class="-6575744672153550235" onmouseenter="enter('-6575744672153550235');" onmouseout="out('-6575744672153550235');" style=""> 230                 AuthorizationException ex) {                                                             </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 231                     if (ex != null) {                                                                    </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 232                         promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 233                         return;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234                     }                                                                                    </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style=""> 235                     setServiceConfiguration(issuer, fetchedConfiguration);                               </span>
<span class="1554359056512755150" onmouseenter="enter('1554359056512755150');" onmouseout="out('1554359056512755150');" style=""><abbr title=" 236                     refreshWithConfiguration(fetchedConfiguration, appAuthConfiguration, refreshToken, clientId, scopes, redirectUrl, additionalParametersMap, clientAuthMethod, clientSecret, promise);"> 236                     refreshWithConfiguration(fetchedConfiguration, appAuthConfiguration, refreshToken, clðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237                 }                                                                                        </span>
<span class="430947961988862402" onmouseenter="enter('430947961988862402');" onmouseout="out('430947961988862402');" style=""> 238             }, builder);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240     }                                                                                                    </span>
<span  style=""> 241                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 242     /*                                                                                                   </span>
<span class="7578951324193379805" onmouseenter="enter('7578951324193379805');" onmouseout="out('7578951324193379805');" style=""> 243      * Called when the OAuth browser activity completes                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 244      */                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 245     @Override                                                                                            </span>
<span class="2027722410160164989" onmouseenter="enter('2027722410160164989');" onmouseout="out('2027722410160164989');" style=""> 246     public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {      </span>
<span class="-4639597857217913430" onmouseenter="enter('-4639597857217913430');" onmouseout="out('-4639597857217913430');" style=""> 247         if (requestCode == 0) {                                                                          </span>
<span class="-5203356024335682166" onmouseenter="enter('-5203356024335682166');" onmouseout="out('-5203356024335682166');" style=""> 248             if (data == null) {                                                                          </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 249                 if (promise != null) {                                                                   </span>
<span class="-7426400094937746923" onmouseenter="enter('-7426400094937746923');" onmouseout="out('-7426400094937746923');" style=""> 250                     promise.reject(&quot;authentication_error&quot;, &quot;Data intent is null&quot;);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251                 }                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 252                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253             }                                                                                            </span>
<span class="1683167759369238332" onmouseenter="enter('1683167759369238332');" onmouseout="out('1683167759369238332');" style=""> 254             final AuthorizationResponse response = AuthorizationResponse.fromIntent(data);               </span>
<span class="-2661429536108932642" onmouseenter="enter('-2661429536108932642');" onmouseout="out('-2661429536108932642');" style=""> 255             AuthorizationException exception = AuthorizationException.fromIntent(data);                  </span>
<span class="812069196179346176" onmouseenter="enter('812069196179346176');" onmouseout="out('812069196179346176');" style=""> 256             if (exception != null) {                                                                     </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 257                 if (promise != null) {                                                                   </span>
<span class="8302975562867231827" onmouseenter="enter('8302975562867231827');" onmouseout="out('8302975562867231827');" style=""> 258                     promise.reject(&quot;authentication_error&quot;, getErrorMessage(exception));                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259                 }                                                                                        </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 260                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261             }                                                                                            </span>
<span class="5367484813216736809" onmouseenter="enter('5367484813216736809');" onmouseout="out('5367484813216736809');" style=""> 262             if (this.skipCodeExchange) {                                                                 </span>
<span class="-4333686298001507703" onmouseenter="enter('-4333686298001507703');" onmouseout="out('-4333686298001507703');" style=""> 263                 WritableMap map = TokenResponseFactory.authorizationResponseToMap(response);             </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 264                 promise.resolve(map);                                                                    </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 265                 return;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266             }                                                                                            </span>
<span class="7265001672864433355" onmouseenter="enter('7265001672864433355');" onmouseout="out('7265001672864433355');" style=""> 267             final Promise authorizePromise = this.promise;                                               </span>
<span class="-2180038079718264036" onmouseenter="enter('-2180038079718264036');" onmouseout="out('-2180038079718264036');" style=""><abbr title=" 268             final AppAuthConfiguration configuration = createAppAuthConfiguration(createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders));"> 268             final AppAuthConfiguration configuration = createAppAuthConfiguration(createConnectionBuilderðŸ”µ</abbr></span>
<span class="-598339291394324639" onmouseenter="enter('-598339291394324639');" onmouseout="out('-598339291394324639');" style=""><abbr title=" 269             AuthorizationService authService = new AuthorizationService(this.reactContext, configuration);"> 269             AuthorizationService authService = new AuthorizationService(this.reactContext, configuration)ðŸ”µ</abbr></span>
<span class="6152215567678252770" onmouseenter="enter('6152215567678252770');" onmouseout="out('6152215567678252770');" style=""><abbr title=" 270             TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap);"> 270             TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap)ðŸ”µ</abbr></span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 271             AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 271             AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 272                 @Override                                                                                </span>
<span class="-7947697347358044811" onmouseenter="enter('-7947697347358044811');" onmouseout="out('-7947697347358044811');" style=""> 273                 public void onTokenRequestCompleted(TokenResponse resp, AuthorizationException ex) {     </span>
<span class="7476284757153148856" onmouseenter="enter('7476284757153148856');" onmouseout="out('7476284757153148856');" style=""> 274                     if (resp != null) {                                                                  </span>
<span class="7607526798956663360" onmouseenter="enter('7607526798956663360');" onmouseout="out('7607526798956663360');" style=""> 275                         WritableMap map = TokenResponseFactory.tokenResponseToMap(resp, response);       </span>
<span class="-6045783056504489326" onmouseenter="enter('-6045783056504489326');" onmouseout="out('-6045783056504489326');" style=""> 276                         if (authorizePromise != null) {                                                  </span>
<span class="-4073221780338751137" onmouseenter="enter('-4073221780338751137');" onmouseout="out('-4073221780338751137');" style=""> 277                             authorizePromise.resolve(map);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278                         }                                                                                </span>
<span class="5033272853631726450" onmouseenter="enter('5033272853631726450');" onmouseout="out('5033272853631726450');" style=""> 279                     } else if (promise != null) {                                                        </span>
<span class="-1873248496991044419" onmouseenter="enter('-1873248496991044419');" onmouseout="out('-1873248496991044419');" style=""> 280                         promise.reject(&quot;token_exchange_failed&quot;, getErrorMessage(ex));                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282                 }                                                                                        </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 283             };                                                                                           </span>
<span class="-7911542703683536912" onmouseenter="enter('-7911542703683536912');" onmouseout="out('-7911542703683536912');" style=""> 284             if (this.clientSecret != null) {                                                             </span>
<span class="-3188745194840831156" onmouseenter="enter('-3188745194840831156');" onmouseout="out('-3188745194840831156');" style=""><abbr title=" 285                 ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMethod);"> 285                 ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 286                 authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 287             } else {                                                                                     </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 288                 authService.performTokenRequest(tokenRequest, tokenResponseCallback);                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 291     }                                                                                                    </span>
<span  style=""> 292                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 293     /*                                                                                                   </span>
<span class="3813849031296026505" onmouseenter="enter('3813849031296026505');" onmouseout="out('3813849031296026505');" style=""> 294      * Perform dynamic client registration with the provided configuration                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 295      */                                                                                                  </span>
<span class="340189295193181696" onmouseenter="enter('340189295193181696');" onmouseout="out('340189295193181696');" style=""> 296     private void registerWithConfiguration(                                                              </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 297         final AuthorizationServiceConfiguration serviceConfiguration,                                    </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 298         final AppAuthConfiguration appAuthConfiguration,                                                 </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 299         final ReadableArray redirectUris,                                                                </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 300         final ReadableArray responseTypes,                                                               </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 301         final ReadableArray grantTypes,                                                                  </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 302         final String subjectType,                                                                        </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 303         final String tokenEndpointAuthMethod,                                                            </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 304         final Map&lt;String, String&gt; additionalParametersMap,                                               </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 305         final Promise promise                                                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 306     ) {                                                                                                  </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 307         final Context context = this.reactContext;                                                       </span>
<span  style=""> 308                                                                                                          </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 309         AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);      </span>
<span  style=""> 310                                                                                                          </span>
<span class="-8453810682683042065" onmouseenter="enter('-8453810682683042065');" onmouseout="out('-8453810682683042065');" style=""> 311         RegistrationRequest.Builder registrationRequestBuilder =                                         </span>
<span class="-7581367313981499795" onmouseenter="enter('-7581367313981499795');" onmouseout="out('-7581367313981499795');" style=""> 312                 new RegistrationRequest.Builder(                                                         </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 313                     serviceConfiguration,                                                                </span>
<span class="4262694259998445935" onmouseenter="enter('4262694259998445935');" onmouseout="out('4262694259998445935');" style=""> 314                     arrayToUriList(redirectUris)                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 315                 )                                                                                        </span>
<span class="4677539456481393469" onmouseenter="enter('4677539456481393469');" onmouseout="out('4677539456481393469');" style=""> 316                     .setAdditionalParameters(additionalParametersMap);                                   </span>
<span  style=""> 317                                                                                                          </span>
<span class="382071555491173350" onmouseenter="enter('382071555491173350');" onmouseout="out('382071555491173350');" style=""> 318         if (responseTypes != null) {                                                                     </span>
<span class="2691057769499642705" onmouseenter="enter('2691057769499642705');" onmouseout="out('2691057769499642705');" style=""> 319             registrationRequestBuilder.setResponseTypeValues(arrayToList(responseTypes));                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 320         }                                                                                                </span>
<span  style=""> 321                                                                                                          </span>
<span class="461598363295361308" onmouseenter="enter('461598363295361308');" onmouseout="out('461598363295361308');" style=""> 322         if (grantTypes != null) {                                                                        </span>
<span class="1681210474388500870" onmouseenter="enter('1681210474388500870');" onmouseout="out('1681210474388500870');" style=""> 323             registrationRequestBuilder.setGrantTypeValues(arrayToList(grantTypes));                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324         }                                                                                                </span>
<span  style=""> 325                                                                                                          </span>
<span class="-2982605970687904529" onmouseenter="enter('-2982605970687904529');" onmouseout="out('-2982605970687904529');" style=""> 326         if (subjectType != null) {                                                                       </span>
<span class="3235050174363133383" onmouseenter="enter('3235050174363133383');" onmouseout="out('3235050174363133383');" style=""> 327             registrationRequestBuilder.setSubjectType(subjectType);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328         }                                                                                                </span>
<span  style=""> 329                                                                                                          </span>
<span class="-3523548169086540196" onmouseenter="enter('-3523548169086540196');" onmouseout="out('-3523548169086540196');" style=""> 330         if (tokenEndpointAuthMethod != null) {                                                           </span>
<span class="8002810479156997291" onmouseenter="enter('8002810479156997291');" onmouseout="out('8002810479156997291');" style=""> 331             registrationRequestBuilder.setTokenEndpointAuthenticationMethod(tokenEndpointAuthMethod);    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332         }                                                                                                </span>
<span  style=""> 333                                                                                                          </span>
<span class="-8152299436158074794" onmouseenter="enter('-8152299436158074794');" onmouseout="out('-8152299436158074794');" style=""> 334         RegistrationRequest registrationRequest = registrationRequestBuilder.build();                    </span>
<span  style=""> 335                                                                                                          </span>
<span class="2043221784460883972" onmouseenter="enter('2043221784460883972');" onmouseout="out('2043221784460883972');" style=""><abbr title=" 336         AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.RegistrationResponseCallback() {"> 336         AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizatioðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 337             @Override                                                                                    </span>
<span class="89148758474091775" onmouseenter="enter('89148758474091775');" onmouseout="out('89148758474091775');" style=""><abbr title=" 338             public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizationException ex) {"> 338             public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @NullableðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 339                 if (response != null) {                                                                  </span>
<span class="3678270738704120650" onmouseenter="enter('3678270738704120650');" onmouseout="out('3678270738704120650');" style=""> 340                     WritableMap map = RegistrationResponseFactory.registrationResponseToMap(response);   </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 341                     promise.resolve(map);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 342                 } else {                                                                                 </span>
<span class="-5586663357435466975" onmouseenter="enter('-5586663357435466975');" onmouseout="out('-5586663357435466975');" style=""> 343                     promise.reject(&quot;registration_failed&quot;, getErrorMessage(ex));                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 346         };                                                                                               </span>
<span  style=""> 347                                                                                                          </span>
<span class="2922372767993768868" onmouseenter="enter('2922372767993768868');" onmouseout="out('2922372767993768868');" style=""> 348         authService.performRegistrationRequest(registrationRequest, registrationResponseCallback);       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349     }                                                                                                    </span>
<span  style=""> 350                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 351     /*                                                                                                   </span>
<span class="-3037424821439688076" onmouseenter="enter('-3037424821439688076');" onmouseout="out('-3037424821439688076');" style=""> 352      * Authorize user with the provided configuration                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 353      */                                                                                                  </span>
<span class="-1686698148972257501" onmouseenter="enter('-1686698148972257501');" onmouseout="out('-1686698148972257501');" style=""> 354     private void authorizeWithConfiguration(                                                             </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 355             final AuthorizationServiceConfiguration serviceConfiguration,                                </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 356             final AppAuthConfiguration appAuthConfiguration,                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 357             final String clientId,                                                                       </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 358             final ReadableArray scopes,                                                                  </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 359             final String redirectUrl,                                                                    </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 360             final Boolean usePKCE,                                                                       </span>
<span class="4591131233701235058" onmouseenter="enter('4591131233701235058');" onmouseout="out('4591131233701235058');" style=""> 361             final Map&lt;String, String&gt; additionalParametersMap                                            </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 362     ) {                                                                                                  </span>
<span  style=""> 363                                                                                                          </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 364         String scopesString = null;                                                                      </span>
<span  style=""> 365                                                                                                          </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 366         if (scopes != null) {                                                                            </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 367             scopesString = this.arrayToString(scopes);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368         }                                                                                                </span>
<span  style=""> 369                                                                                                          </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 370         final Context context = this.reactContext;                                                       </span>
<span class="-4913832152651687292" onmouseenter="enter('-4913832152651687292');" onmouseout="out('-4913832152651687292');" style=""> 371         final Activity currentActivity = getCurrentActivity();                                           </span>
<span  style=""> 372                                                                                                          </span>
<span class="1615045173536817183" onmouseenter="enter('1615045173536817183');" onmouseout="out('1615045173536817183');" style=""> 373         AuthorizationRequest.Builder authRequestBuilder =                                                </span>
<span class="8630572254279098967" onmouseenter="enter('8630572254279098967');" onmouseout="out('8630572254279098967');" style=""> 374                 new AuthorizationRequest.Builder(                                                        </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 375                         serviceConfiguration,                                                            </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 376                         clientId,                                                                        </span>
<span class="4849618716626806999" onmouseenter="enter('4849618716626806999');" onmouseout="out('4849618716626806999');" style=""> 377                         ResponseTypeValues.CODE,                                                         </span>
<span class="-1639145692422133689" onmouseenter="enter('-1639145692422133689');" onmouseout="out('-1639145692422133689');" style=""> 378                         Uri.parse(redirectUrl)                                                           </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 379                 );                                                                                       </span>
<span  style=""> 380                                                                                                          </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 381         if (scopesString != null) {                                                                      </span>
<span class="-8218576309450527961" onmouseenter="enter('-8218576309450527961');" onmouseout="out('-8218576309450527961');" style=""> 382             authRequestBuilder.setScope(scopesString);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383         }                                                                                                </span>
<span  style=""> 384                                                                                                          </span>
<span  style=""> 385                                                                                                          </span>
<span class="7149068665077353053" onmouseenter="enter('7149068665077353053');" onmouseout="out('7149068665077353053');" style=""> 386         if (additionalParametersMap != null) {                                                           </span>
<span class="-6137327941719445172" onmouseenter="enter('-6137327941719445172');" onmouseout="out('-6137327941719445172');" style=""> 387             // handle additional parameters separately to avoid exceptions from AppAuth                  </span>
<span class="-4729676460784236302" onmouseenter="enter('-4729676460784236302');" onmouseout="out('-4729676460784236302');" style=""> 388             if (additionalParametersMap.containsKey(&quot;display&quot;)) {                                        </span>
<span class="6740086842281271815" onmouseenter="enter('6740086842281271815');" onmouseout="out('6740086842281271815');" style=""> 389                 authRequestBuilder.setDisplay(additionalParametersMap.get(&quot;display&quot;));                   </span>
<span class="5478676394718524231" onmouseenter="enter('5478676394718524231');" onmouseout="out('5478676394718524231');" style=""> 390                 additionalParametersMap.remove(&quot;display&quot;);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391             }                                                                                            </span>
<span class="-5162308638975991351" onmouseenter="enter('-5162308638975991351');" onmouseout="out('-5162308638975991351');" style=""> 392             if (additionalParametersMap.containsKey(&quot;login_hint&quot;)) {                                     </span>
<span class="7478322337196261432" onmouseenter="enter('7478322337196261432');" onmouseout="out('7478322337196261432');" style=""> 393                 authRequestBuilder.setLoginHint(additionalParametersMap.get(&quot;login_hint&quot;));              </span>
<span class="-3825577662921277200" onmouseenter="enter('-3825577662921277200');" onmouseout="out('-3825577662921277200');" style=""> 394                 additionalParametersMap.remove(&quot;login_hint&quot;);                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395             }                                                                                            </span>
<span class="-8254180626457365202" onmouseenter="enter('-8254180626457365202');" onmouseout="out('-8254180626457365202');" style=""> 396             if (additionalParametersMap.containsKey(&quot;prompt&quot;)) {                                         </span>
<span class="2585369211918110761" onmouseenter="enter('2585369211918110761');" onmouseout="out('2585369211918110761');" style=""> 397                 authRequestBuilder.setPrompt(additionalParametersMap.get(&quot;prompt&quot;));                     </span>
<span class="290019989822766287" onmouseenter="enter('290019989822766287');" onmouseout="out('290019989822766287');" style=""> 398                 additionalParametersMap.remove(&quot;prompt&quot;);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399             }                                                                                            </span>
<span  style=""> 400                                                                                                          </span>
<span class="-1433627721318603910" onmouseenter="enter('-1433627721318603910');" onmouseout="out('-1433627721318603910');" style=""> 401             authRequestBuilder.setAdditionalParameters(additionalParametersMap);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402         }                                                                                                </span>
<span  style=""> 403                                                                                                          </span>
<span class="6295746505532947076" onmouseenter="enter('6295746505532947076');" onmouseout="out('6295746505532947076');" style=""> 404         if (!usePKCE) {                                                                                  </span>
<span class="211047115781987373" onmouseenter="enter('211047115781987373');" onmouseout="out('211047115781987373');" style=""> 405             authRequestBuilder.setCodeVerifier(null);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406         }                                                                                                </span>
<span  style=""> 407                                                                                                          </span>
<span class="2874496759892237047" onmouseenter="enter('2874496759892237047');" onmouseout="out('2874496759892237047');" style=""> 408         AuthorizationRequest authRequest = authRequestBuilder.build();                                   </span>
<span  style=""> 409                                                                                                          </span>
<span class="4248167488592758879" onmouseenter="enter('4248167488592758879');" onmouseout="out('4248167488592758879');" style=""> 410         if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) {               </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 411             AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);  </span>
<span class="-8712988972948484879" onmouseenter="enter('-8712988972948484879');" onmouseout="out('-8712988972948484879');" style=""> 412             Intent authIntent = authService.getAuthorizationRequestIntent(authRequest);                  </span>
<span  style=""> 413                                                                                                          </span>
<span class="-1768672139093830544" onmouseenter="enter('-1768672139093830544');" onmouseout="out('-1768672139093830544');" style=""> 414             currentActivity.startActivityForResult(authIntent, 0);                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 415         } else {                                                                                         </span>
<span class="-5574677103641269793" onmouseenter="enter('-5574677103641269793');" onmouseout="out('-5574677103641269793');" style=""><abbr title=" 416             AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguration);"> 416             AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguraðŸ”µ</abbr></span>
<span class="-921350943484849229" onmouseenter="enter('-921350943484849229');" onmouseout="out('-921350943484849229');" style=""> 417             PendingIntent pendingIntent = currentActivity.createPendingResult(0, new Intent(), 0);       </span>
<span  style=""> 418                                                                                                          </span>
<span class="5462088869311657545" onmouseenter="enter('5462088869311657545');" onmouseout="out('5462088869311657545');" style=""> 419             authService.performAuthorizationRequest(authRequest, pendingIntent);                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421     }                                                                                                    </span>
<span  style=""> 422                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 423     /*                                                                                                   </span>
<span class="8814346366745541198" onmouseenter="enter('8814346366745541198');" onmouseout="out('8814346366745541198');" style=""> 424      * Refresh authentication token with the provided configuration                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 425      */                                                                                                  </span>
<span class="-7235916799046070057" onmouseenter="enter('-7235916799046070057');" onmouseout="out('-7235916799046070057');" style=""> 426     private void refreshWithConfiguration(                                                               </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 427             final AuthorizationServiceConfiguration serviceConfiguration,                                </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 428             final AppAuthConfiguration appAuthConfiguration,                                             </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 429             final String refreshToken,                                                                   </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 430             final String clientId,                                                                       </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 431             final ReadableArray scopes,                                                                  </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 432             final String redirectUrl,                                                                    </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 433             final Map&lt;String, String&gt; additionalParametersMap,                                           </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 434             final String clientAuthMethod,                                                               </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 435             final String clientSecret,                                                                   </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 436             final Promise promise                                                                        </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 437     ) {                                                                                                  </span>
<span  style=""> 438                                                                                                          </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 439         String scopesString = null;                                                                      </span>
<span  style=""> 440                                                                                                          </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 441         if (scopes != null) {                                                                            </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 442             scopesString = this.arrayToString(scopes);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443         }                                                                                                </span>
<span  style=""> 444                                                                                                          </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 445         final Context context = this.reactContext;                                                       </span>
<span  style=""> 446                                                                                                          </span>
<span class="-1882592220700818910" onmouseenter="enter('-1882592220700818910');" onmouseout="out('-1882592220700818910');" style=""> 447         TokenRequest.Builder tokenRequestBuilder =                                                       </span>
<span class="-7570030938974274508" onmouseenter="enter('-7570030938974274508');" onmouseout="out('-7570030938974274508');" style=""> 448                 new TokenRequest.Builder(                                                                </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 449                         serviceConfiguration,                                                            </span>
<span class="-3028793166139754818" onmouseenter="enter('-3028793166139754818');" onmouseout="out('-3028793166139754818');" style=""> 450                         clientId                                                                         </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 451                 )                                                                                        </span>
<span class="5149869235939087614" onmouseenter="enter('5149869235939087614');" onmouseout="out('5149869235939087614');" style=""> 452                         .setRefreshToken(refreshToken)                                                   </span>
<span class="-4168308848344323961" onmouseenter="enter('-4168308848344323961');" onmouseout="out('-4168308848344323961');" style=""> 453                         .setRedirectUri(Uri.parse(redirectUrl));                                         </span>
<span  style=""> 454                                                                                                          </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 455         if (scopesString != null) {                                                                      </span>
<span class="-4940100242303343354" onmouseenter="enter('-4940100242303343354');" onmouseout="out('-4940100242303343354');" style=""> 456             tokenRequestBuilder.setScope(scopesString);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457         }                                                                                                </span>
<span  style=""> 458                                                                                                          </span>
<span class="1982926752875631058" onmouseenter="enter('1982926752875631058');" onmouseout="out('1982926752875631058');" style=""> 459         if (!additionalParametersMap.isEmpty()) {                                                        </span>
<span class="6791703352530289305" onmouseenter="enter('6791703352530289305');" onmouseout="out('6791703352530289305');" style=""> 460             tokenRequestBuilder.setAdditionalParameters(additionalParametersMap);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 461         }                                                                                                </span>
<span  style=""> 462                                                                                                          </span>
<span class="6300215370198990899" onmouseenter="enter('6300215370198990899');" onmouseout="out('6300215370198990899');" style=""> 463         TokenRequest tokenRequest = tokenRequestBuilder.build();                                         </span>
<span  style=""> 464                                                                                                          </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 465         AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);      </span>
<span  style=""> 466                                                                                                          </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 467         AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 467         AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 468             @Override                                                                                    </span>
<span class="-9019017716153453132" onmouseenter="enter('-9019017716153453132');" onmouseout="out('-9019017716153453132');" style=""><abbr title=" 469             public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationException ex) {"> 469             public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 470                 if (response != null) {                                                                  </span>
<span class="-4071880271889138129" onmouseenter="enter('-4071880271889138129');" onmouseout="out('-4071880271889138129');" style=""> 471                     WritableMap map = TokenResponseFactory.tokenResponseToMap(response);                 </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 472                     promise.resolve(map);                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 473                 } else {                                                                                 </span>
<span class="-8974399670180994057" onmouseenter="enter('-8974399670180994057');" onmouseout="out('-8974399670180994057');" style=""> 474                     promise.reject(&quot;token_refresh_failed&quot;, getErrorMessage(ex));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 477         };                                                                                               </span>
<span  style=""> 478                                                                                                          </span>
<span  style=""> 479                                                                                                          </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 480         if (clientSecret != null) {                                                                      </span>
<span class="-3955443834186652225" onmouseenter="enter('-3955443834186652225');" onmouseout="out('-3955443834186652225');" style=""><abbr title=" 481             ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethod);"> 481             ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethodðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 482             authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);            </span>
<span  style=""> 483                                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 484         } else {                                                                                         </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 485             authService.performTokenRequest(tokenRequest, tokenResponseCallback);                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 487     }                                                                                                    </span>
<span  style=""> 488                                                                                                          </span>
<span class="2930218534777413873" onmouseenter="enter('2930218534777413873');" onmouseout="out('2930218534777413873');" style=""> 489     private void parseHeaderMap (ReadableMap headerMap) {                                                </span>
<span class="-6316489241675673035" onmouseenter="enter('-6316489241675673035');" onmouseout="out('-6316489241675673035');" style=""> 490         if (headerMap == null) {                                                                         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 491             return;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492         }                                                                                                </span>
<span class="5010343160007659678" onmouseenter="enter('5010343160007659678');" onmouseout="out('5010343160007659678');" style=""> 493         if (headerMap.hasKey(&quot;register&quot;) &amp;&amp; headerMap.getType(&quot;register&quot;) == ReadableType.Map) {         </span>
<span class="-7734955563477546094" onmouseenter="enter('-7734955563477546094');" onmouseout="out('-7734955563477546094');" style=""> 494             this.registrationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;register&quot;));</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495         }                                                                                                </span>
<span class="-8530407112624237580" onmouseenter="enter('-8530407112624237580');" onmouseout="out('-8530407112624237580');" style=""> 496         if (headerMap.hasKey(&quot;authorize&quot;) &amp;&amp; headerMap.getType(&quot;authorize&quot;) == ReadableType.Map) {       </span>
<span class="762039099095363738" onmouseenter="enter('762039099095363738');" onmouseout="out('762039099095363738');" style=""><abbr title=" 497             this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;));"> 497             this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;)ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498         }                                                                                                </span>
<span class="5768179141818569002" onmouseenter="enter('5768179141818569002');" onmouseout="out('5768179141818569002');" style=""> 499         if (headerMap.hasKey(&quot;token&quot;) &amp;&amp; headerMap.getType(&quot;token&quot;) == ReadableType.Map) {               </span>
<span class="-4870803436115877491" onmouseenter="enter('-4870803436115877491');" onmouseout="out('-4870803436115877491');" style=""> 500             this.tokenRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;token&quot;));          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501         }                                                                                                </span>
<span  style=""> 502                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503     }                                                                                                    </span>
<span  style=""> 504                                                                                                          </span>
<span class="-2276636657842571599" onmouseenter="enter('-2276636657842571599');" onmouseout="out('-2276636657842571599');" style=""> 505     private ClientAuthentication getClientAuthentication(String clientSecret, String clientAuthMethod) { </span>
<span class="4736948393768361142" onmouseenter="enter('4736948393768361142');" onmouseout="out('4736948393768361142');" style=""> 506         if (clientAuthMethod.equals(&quot;post&quot;)) {                                                           </span>
<span class="4033722210949459980" onmouseenter="enter('4033722210949459980');" onmouseout="out('4033722210949459980');" style=""> 507             return new ClientSecretPost(clientSecret);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508         }                                                                                                </span>
<span  style=""> 509                                                                                                          </span>
<span class="-1107687855860572488" onmouseenter="enter('-1107687855860572488');" onmouseout="out('-1107687855860572488');" style=""> 510         return new ClientSecretBasic(clientSecret);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511     }                                                                                                    </span>
<span  style=""> 512                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 513     /*                                                                                                   </span>
<span class="5090378039448834807" onmouseenter="enter('5090378039448834807');" onmouseout="out('5090378039448834807');" style=""> 514      * Return error information if it is available                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 515      */                                                                                                  </span>
<span class="7325111704754615468" onmouseenter="enter('7325111704754615468');" onmouseout="out('7325111704754615468');" style=""> 516     private String getErrorMessage(AuthorizationException ex){                                           </span>
<span class="6233744395473659458" onmouseenter="enter('6233744395473659458');" onmouseout="out('6233744395473659458');" style=""> 517         if(ex.errorDescription == null &amp;&amp; ex.error != null)                                              </span>
<span class="8212520076730053042" onmouseenter="enter('8212520076730053042');" onmouseout="out('8212520076730053042');" style=""> 518             return ex.error;                                                                             </span>
<span class="-944119096152079377" onmouseenter="enter('-944119096152079377');" onmouseout="out('-944119096152079377');" style=""> 519         return ex.errorDescription;                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 520     }                                                                                                    </span>
<span  style=""> 521                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 522     /*                                                                                                   </span>
<span class="6638112631744326921" onmouseenter="enter('6638112631744326921');" onmouseout="out('6638112631744326921');" style=""> 523      * Create a space-delimited string from an array                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 524      */                                                                                                  </span>
<span class="2843730177292313139" onmouseenter="enter('2843730177292313139');" onmouseout="out('2843730177292313139');" style=""> 525     private String arrayToString(ReadableArray array) {                                                  </span>
<span class="-8236782342056480869" onmouseenter="enter('-8236782342056480869');" onmouseout="out('-8236782342056480869');" style=""> 526         StringBuilder strBuilder = new StringBuilder();                                                  </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 527         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="-7800557187785605413" onmouseenter="enter('-7800557187785605413');" onmouseout="out('-7800557187785605413');" style=""> 528             if (i != 0) {                                                                                </span>
<span class="-4449242394605741248" onmouseenter="enter('-4449242394605741248');" onmouseout="out('-4449242394605741248');" style=""> 529                 strBuilder.append(&#x27; &#x27;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span class="-8205116312766504963" onmouseenter="enter('-8205116312766504963');" onmouseout="out('-8205116312766504963');" style=""> 531             strBuilder.append(array.getString(i));                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532         }                                                                                                </span>
<span class="-7597052729024482685" onmouseenter="enter('-7597052729024482685');" onmouseout="out('-7597052729024482685');" style=""> 533         return strBuilder.toString();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534     }                                                                                                    </span>
<span  style=""> 535                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 536     /*                                                                                                   </span>
<span class="-7672611238824893788" onmouseenter="enter('-7672611238824893788');" onmouseout="out('-7672611238824893788');" style=""> 537      * Create a string list from an array of strings                                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 538      */                                                                                                  </span>
<span class="8933886143748191998" onmouseenter="enter('8933886143748191998');" onmouseout="out('8933886143748191998');" style=""> 539     private List&lt;String&gt; arrayToList(ReadableArray array) {                                              </span>
<span class="3701551209507079484" onmouseenter="enter('3701551209507079484');" onmouseout="out('3701551209507079484');" style=""> 540         ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();                                                      </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 541         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="3110930347141835410" onmouseenter="enter('3110930347141835410');" onmouseout="out('3110930347141835410');" style=""> 542             list.add(array.getString(i));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543         }                                                                                                </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 544         return list;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545     }                                                                                                    </span>
<span  style=""> 546                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 547     /*                                                                                                   </span>
<span class="4411172121007664287" onmouseenter="enter('4411172121007664287');" onmouseout="out('4411172121007664287');" style=""> 548      * Create a Uri list from an array of strings                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 549      */                                                                                                  </span>
<span class="502202896426029305" onmouseenter="enter('502202896426029305');" onmouseout="out('502202896426029305');" style=""> 550     private List&lt;Uri&gt; arrayToUriList(ReadableArray array) {                                              </span>
<span class="-8321772486199533839" onmouseenter="enter('-8321772486199533839');" onmouseout="out('-8321772486199533839');" style=""> 551         ArrayList&lt;Uri&gt; list = new ArrayList&lt;&gt;();                                                         </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 552         for (int i = 0; i &lt; array.size(); i++) {                                                         </span>
<span class="3593345693160557831" onmouseenter="enter('3593345693160557831');" onmouseout="out('3593345693160557831');" style=""> 553             list.add(Uri.parse(array.getString(i)));                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554         }                                                                                                </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 555         return list;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556     }                                                                                                    </span>
<span  style=""> 557                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 558     /*                                                                                                   </span>
<span class="5214794569700518887" onmouseenter="enter('5214794569700518887');" onmouseout="out('5214794569700518887');" style=""> 559      * Create an App Auth configuration using the provided connection builder                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 560      */                                                                                                  </span>
<span class="-5342361748775304563" onmouseenter="enter('-5342361748775304563');" onmouseout="out('-5342361748775304563');" style=""> 561     private AppAuthConfiguration createAppAuthConfiguration(ConnectionBuilder connectionBuilder) {       </span>
<span class="-6961363017801118708" onmouseenter="enter('-6961363017801118708');" onmouseout="out('-6961363017801118708');" style=""> 562         return new AppAuthConfiguration                                                                  </span>
<span class="370567544488026574" onmouseenter="enter('370567544488026574');" onmouseout="out('370567544488026574');" style=""> 563                 .Builder()                                                                               </span>
<span class="6932817517014214209" onmouseenter="enter('6932817517014214209');" onmouseout="out('6932817517014214209');" style=""> 564                 .setConnectionBuilder(connectionBuilder)                                                 </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 565                 .build();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566     }                                                                                                    </span>
<span  style=""> 567                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 568     /*                                                                                                   </span>
<span class="2307564597312892215" onmouseenter="enter('2307564597312892215');" onmouseout="out('2307564597312892215');" style=""> 569      *  Create appropriate connection builder based on provided settings                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 570      */                                                                                                  </span>
<span class="-5286170720144338680" onmouseenter="enter('-5286170720144338680');" onmouseout="out('-5286170720144338680');" style=""><abbr title=" 571     private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, String&gt; headers) {"> 571     private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, StrinðŸ”µ</abbr></span>
<span class="7318015076305824949" onmouseenter="enter('7318015076305824949');" onmouseout="out('7318015076305824949');" style=""> 572         ConnectionBuilder proxiedBuilder;                                                                </span>
<span class="6155061091636674075" onmouseenter="enter('6155061091636674075');" onmouseout="out('6155061091636674075');" style=""> 573         if (allowInsecureConnections) {                                                                  </span>
<span class="-4011111445357502268" onmouseenter="enter('-4011111445357502268');" onmouseout="out('-4011111445357502268');" style=""> 574             proxiedBuilder = UnsafeConnectionBuilder.INSTANCE;                                           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 575         } else {                                                                                         </span>
<span class="-3823294731313489124" onmouseenter="enter('-3823294731313489124');" onmouseout="out('-3823294731313489124');" style=""> 576             proxiedBuilder = DefaultConnectionBuilder.INSTANCE;                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 577         }                                                                                                </span>
<span class="-321326358809916252" onmouseenter="enter('-321326358809916252');" onmouseout="out('-321326358809916252');" style=""> 578         CustomConnectionBuilder customConnection = new CustomConnectionBuilder(proxiedBuilder);          </span>
<span class="-5872856843685271172" onmouseenter="enter('-5872856843685271172');" onmouseout="out('-5872856843685271172');" style=""> 579         if (headers != null) {                                                                           </span>
<span class="-4120878389218127223" onmouseenter="enter('-4120878389218127223');" onmouseout="out('-4120878389218127223');" style=""> 580             customConnection.setHeaders(headers);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581         }                                                                                                </span>
<span class="5629827582834827587" onmouseenter="enter('5629827582834827587');" onmouseout="out('5629827582834827587');" style=""> 582         return customConnection;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 583     }                                                                                                    </span>
<span  style=""> 584                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 585     /*                                                                                                   </span>
<span class="9187662928809351886" onmouseenter="enter('9187662928809351886');" onmouseout="out('9187662928809351886');" style=""> 586      *  Replicated private method from AuthorizationServiceConfiguration                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 587      */                                                                                                  </span>
<span class="2622836649973257205" onmouseenter="enter('2622836649973257205');" onmouseout="out('2622836649973257205');" style=""> 588     private Uri buildConfigurationUriFromIssuer(Uri openIdConnectIssuerUri) {                            </span>
<span class="-830811466431368071" onmouseenter="enter('-830811466431368071');" onmouseout="out('-830811466431368071');" style=""> 589         return openIdConnectIssuerUri.buildUpon()                                                        </span>
<span class="7258170423676519924" onmouseenter="enter('7258170423676519924');" onmouseout="out('7258170423676519924');" style=""> 590                 .appendPath(AuthorizationServiceConfiguration.WELL_KNOWN_PATH)                           </span>
<span class="-3903955623180377764" onmouseenter="enter('-3903955623180377764');" onmouseout="out('-3903955623180377764');" style=""> 591                 .appendPath(AuthorizationServiceConfiguration.OPENID_CONFIGURATION_RESOURCE)             </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 592                 .build();                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593     }                                                                                                    </span>
<span  style=""> 594                                                                                                          </span>
<span class="3122274151060887299" onmouseenter="enter('3122274151060887299');" onmouseout="out('3122274151060887299');" style=""><abbr title=" 595     private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguration) throws Exception {"> 595     private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceðŸ”µ</abbr></span>
<span class="4275545280692735139" onmouseenter="enter('4275545280692735139');" onmouseout="out('4275545280692735139');" style=""> 596         if (!serviceConfiguration.hasKey(&quot;authorizationEndpoint&quot;)) {                                     </span>
<span class="3986521017730318395" onmouseenter="enter('3986521017730318395');" onmouseout="out('3986521017730318395');" style=""> 597             throw new Exception(&quot;serviceConfiguration passed without an authorizationEndpoint&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 598         }                                                                                                </span>
<span  style=""> 599                                                                                                          </span>
<span class="5638598812511759739" onmouseenter="enter('5638598812511759739');" onmouseout="out('5638598812511759739');" style=""> 600         if (!serviceConfiguration.hasKey(&quot;tokenEndpoint&quot;)) {                                             </span>
<span class="7444064849592215652" onmouseenter="enter('7444064849592215652');" onmouseout="out('7444064849592215652');" style=""> 601             throw new Exception(&quot;serviceConfiguration passed without a tokenEndpoint&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 602         }                                                                                                </span>
<span  style=""> 603                                                                                                          </span>
<span class="-3941749567598770425" onmouseenter="enter('-3941749567598770425');" onmouseout="out('-3941749567598770425');" style=""> 604         Uri authorizationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;authorizationEndpoint&quot;));  </span>
<span class="4054930865548070446" onmouseenter="enter('4054930865548070446');" onmouseout="out('4054930865548070446');" style=""> 605         Uri tokenEndpoint = Uri.parse(serviceConfiguration.getString(&quot;tokenEndpoint&quot;));                  </span>
<span class="2264343622444418519" onmouseenter="enter('2264343622444418519');" onmouseout="out('2264343622444418519');" style=""> 606         Uri registrationEndpoint = null;                                                                 </span>
<span class="-4970643399788664483" onmouseenter="enter('-4970643399788664483');" onmouseout="out('-4970643399788664483');" style=""> 607         if (serviceConfiguration.hasKey(&quot;registrationEndpoint&quot;)) {                                       </span>
<span class="1609034589288005797" onmouseenter="enter('1609034589288005797');" onmouseout="out('1609034589288005797');" style=""> 608             registrationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;registrationEndpoint&quot;));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 609         }                                                                                                </span>
<span  style=""> 610                                                                                                          </span>
<span class="-8455698330779530293" onmouseenter="enter('-8455698330779530293');" onmouseout="out('-8455698330779530293');" style=""> 611         return new AuthorizationServiceConfiguration(                                                    </span>
<span class="-9206356706352718453" onmouseenter="enter('-9206356706352718453');" onmouseout="out('-9206356706352718453');" style=""> 612                 authorizationEndpoint,                                                                   </span>
<span class="-6119344076232034280" onmouseenter="enter('-6119344076232034280');" onmouseout="out('-6119344076232034280');" style=""> 613                 tokenEndpoint,                                                                           </span>
<span class="-4224958759407269631" onmouseenter="enter('-4224958759407269631');" onmouseout="out('-4224958759407269631');" style=""> 614                 registrationEndpoint                                                                     </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 615         );                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616     }                                                                                                    </span>
<span  style=""> 617                                                                                                          </span>
<span class="-4130257184876230563" onmouseenter="enter('-4130257184876230563');" onmouseout="out('-4130257184876230563');" style=""> 618     private void warmChromeCustomTab(Context context, final String issuer) {                             </span>
<span class="-4012796735492941375" onmouseenter="enter('-4012796735492941375');" onmouseout="out('-4012796735492941375');" style=""> 619         CustomTabsServiceConnection connection = new CustomTabsServiceConnection() {                     </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 620             @Override                                                                                    </span>
<span class="4306327880536035079" onmouseenter="enter('4306327880536035079');" onmouseout="out('4306327880536035079');" style=""> 621             public void onCustomTabsServiceConnected(ComponentName name, CustomTabsClient client) {      </span>
<span class="-5035114608817725139" onmouseenter="enter('-5035114608817725139');" onmouseout="out('-5035114608817725139');" style=""> 622                 client.warmup(0);                                                                        </span>
<span class="-5613023257304239322" onmouseenter="enter('-5613023257304239322');" onmouseout="out('-5613023257304239322');" style=""> 623                 CustomTabsSession session = client.newSession(new CustomTabsCallback());                 </span>
<span class="417819926325380348" onmouseenter="enter('417819926325380348');" onmouseout="out('417819926325380348');" style=""> 624                 if (session == null) {                                                                   </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 625                     return;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 626                 }                                                                                        </span>
<span class="-5956768039281383269" onmouseenter="enter('-5956768039281383269');" onmouseout="out('-5956768039281383269');" style=""> 627                 session.mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;Bundle&gt;emptyList());          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628             }                                                                                            </span>
<span  style=""> 629                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 630             @Override                                                                                    </span>
<span class="6231636659664649995" onmouseenter="enter('6231636659664649995');" onmouseout="out('6231636659664649995');" style=""> 631             public void onServiceDisconnected(ComponentName name) {                                      </span>
<span  style=""> 632                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633             }                                                                                            </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 634         };                                                                                               </span>
<span class="5767142201781268255" onmouseenter="enter('5767142201781268255');" onmouseout="out('5767142201781268255');" style=""> 635         CustomTabsClient.bindCustomTabsService(context, CUSTOM_TAB_PACKAGE_NAME, connection);            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636     }                                                                                                    </span>
<span  style=""> 637                                                                                                          </span>
<span class="-1658212530082885279" onmouseenter="enter('-1658212530082885279');" onmouseout="out('-1658212530082885279');" style=""> 638     private boolean hasServiceConfiguration(@Nullable String issuer) {                                   </span>
<span class="3142036358572061785" onmouseenter="enter('3142036358572061785');" onmouseout="out('3142036358572061785');" style=""> 639         return issuer != null &amp;&amp; mServiceConfigurations.containsKey(issuer);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 640     }                                                                                                    </span>
<span  style=""> 641                                                                                                          </span>
<span class="4451430102422208639" onmouseenter="enter('4451430102422208639');" onmouseout="out('4451430102422208639');" style=""> 642     private AuthorizationServiceConfiguration getServiceConfiguration(@Nullable String issuer) {         </span>
<span class="5076090829869343760" onmouseenter="enter('5076090829869343760');" onmouseout="out('5076090829869343760');" style=""> 643         if (issuer == null) {                                                                            </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 644             return null;                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 645         } else {                                                                                         </span>
<span class="-3187761823116610672" onmouseenter="enter('-3187761823116610672');" onmouseout="out('-3187761823116610672');" style=""> 646             return mServiceConfigurations.get(issuer);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 648     }                                                                                                    </span>
<span  style=""> 649                                                                                                          </span>
<span class="1347888294933903664" onmouseenter="enter('1347888294933903664');" onmouseout="out('1347888294933903664');" style=""><abbr title=" 650     private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviceConfiguration) {"> 650     private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviðŸ”µ</abbr></span>
<span class="-2487039014584680663" onmouseenter="enter('-2487039014584680663');" onmouseout="out('-2487039014584680663');" style=""> 651         if (issuer != null) {                                                                            </span>
<span class="-69747729719258596" onmouseenter="enter('-69747729719258596');" onmouseout="out('-69747729719258596');" style=""> 652             mServiceConfigurations.put(issuer, serviceConfiguration);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654     }                                                                                                    </span>
<span  style=""> 655                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 656     @Override                                                                                            </span>
<span class="-4337880705383881802" onmouseenter="enter('-4337880705383881802');" onmouseout="out('-4337880705383881802');" style=""> 657     public void onNewIntent(Intent intent) {                                                             </span>
<span  style=""> 658                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659     }                                                                                                    </span>
<span  style=""> 660                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 661     @Override                                                                                            </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style=""> 662     public String getName() {                                                                            </span>
<span class="4315075324919368681" onmouseenter="enter('4315075324919368681');" onmouseout="out('4315075324919368681');" style=""> 663         return &quot;RNAppAuth&quot;;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 664     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 665 }                                                                                                        </span>

























































































































































































































































































































</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="-6280296900167357794" onmouseenter="enter('-6280296900167357794');" onmouseout="out('-6280296900167357794');" style="">   1  package com.rnappauth;                                                                                            </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="2265467446931963889" onmouseenter="enter('2265467446931963889');" onmouseout="out('2265467446931963889');" style="">   4  import android.app.PendingIntent;                                                                                 </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">   5  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8  import android.net.Uri;                                                                                           </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   9  import android.os.Bundle;                                                                                         </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  10  import android.content.ActivityNotFoundException;                                                                 </span>
<span class="-6436154409168942626" onmouseenter="enter('-6436154409168942626');" onmouseout="out('-6436154409168942626');" style="">  11  import androidx.annotation.Nullable;                                                                              </span>
<span class="-4621922491292668474" onmouseenter="enter('-4621922491292668474');" onmouseout="out('-4621922491292668474');" style="">  12  import androidx.browser.customtabs.CustomTabsCallback;                                                            </span>
<span class="5786009149739133921" onmouseenter="enter('5786009149739133921');" onmouseout="out('5786009149739133921');" style="">  13  import androidx.browser.customtabs.CustomTabsClient;                                                              </span>
<span class="6730446154443378273" onmouseenter="enter('6730446154443378273');" onmouseout="out('6730446154443378273');" style="">  14  import androidx.browser.customtabs.CustomTabsServiceConnection;                                                   </span>
<span class="-3044346478057358458" onmouseenter="enter('-3044346478057358458');" onmouseout="out('-3044346478057358458');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  15 +import androidx.browser.customtabs.CustomTabsSession;                                                             </span>
<span  style="">  16                                                                                                                    </span>
<span class="7327608205307094785" onmouseenter="enter('7327608205307094785');" onmouseout="out('7327608205307094785');" style="">  17  import com.facebook.react.bridge.ActivityEventListener;                                                           </span>
<span class="1744055796152404290" onmouseenter="enter('1744055796152404290');" onmouseout="out('1744055796152404290');" style="">  18  import com.facebook.react.bridge.ReactApplicationContext;                                                         </span>
<span class="7756046764634890677" onmouseenter="enter('7756046764634890677');" onmouseout="out('7756046764634890677');" style="">  19  import com.facebook.react.bridge.ReactContextBaseJavaModule;                                                      </span>
<span class="-7062843866366665780" onmouseenter="enter('-7062843866366665780');" onmouseout="out('-7062843866366665780');" style="">  20  import com.facebook.react.bridge.ReactMethod;                                                                     </span>
<span class="-9114944870765420144" onmouseenter="enter('-9114944870765420144');" onmouseout="out('-9114944870765420144');" style="">  21  import com.facebook.react.bridge.Promise;                                                                         </span>
<span class="3666939786570277423" onmouseenter="enter('3666939786570277423');" onmouseout="out('3666939786570277423');" style="">  22  import com.facebook.react.bridge.ReadableArray;                                                                   </span>
<span class="5552486474970006352" onmouseenter="enter('5552486474970006352');" onmouseout="out('5552486474970006352');" style="">  23  import com.facebook.react.bridge.ReadableMap;                                                                     </span>
<span class="-2689054124168074705" onmouseenter="enter('-2689054124168074705');" onmouseout="out('-2689054124168074705');" style="">  24  import com.facebook.react.bridge.WritableMap;                                                                     </span>
<span class="7507448895670758430" onmouseenter="enter('7507448895670758430');" onmouseout="out('7507448895670758430');" style="">  25  import com.facebook.react.bridge.ReadableType;                                                                    </span>
<span  style="">  26                                                                                                                    </span>
<span class="2824452556317040091" onmouseenter="enter('2824452556317040091');" onmouseout="out('2824452556317040091');" style="">  27  import com.rnappauth.utils.MapUtil;                                                                               </span>
<span class="2320112657500195094" onmouseenter="enter('2320112657500195094');" onmouseout="out('2320112657500195094');" style="">  28  import com.rnappauth.utils.UnsafeConnectionBuilder;                                                               </span>
<span class="6146867944265222634" onmouseenter="enter('6146867944265222634');" onmouseout="out('6146867944265222634');" style="">  29  import com.rnappauth.utils.RegistrationResponseFactory;                                                           </span>
<span class="5385195114029684108" onmouseenter="enter('5385195114029684108');" onmouseout="out('5385195114029684108');" style="">  30  import com.rnappauth.utils.TokenResponseFactory;                                                                  </span>
<span class="-7309342380344421476" onmouseenter="enter('-7309342380344421476');" onmouseout="out('-7309342380344421476');" style="">  31  import com.rnappauth.utils.CustomConnectionBuilder;                                                               </span>
<span  style="">  32                                                                                                                    </span>
<span class="2084880808431135122" onmouseenter="enter('2084880808431135122');" onmouseout="out('2084880808431135122');" style="">  33  import net.openid.appauth.AppAuthConfiguration;                                                                   </span>
<span class="-6153791587225110013" onmouseenter="enter('-6153791587225110013');" onmouseout="out('-6153791587225110013');" style="">  34  import net.openid.appauth.AuthorizationException;                                                                 </span>
<span class="220855730882953420" onmouseenter="enter('220855730882953420');" onmouseout="out('220855730882953420');" style="">  35  import net.openid.appauth.AuthorizationRequest;                                                                   </span>
<span class="3507212550601358175" onmouseenter="enter('3507212550601358175');" onmouseout="out('3507212550601358175');" style="">  36  import net.openid.appauth.AuthorizationResponse;                                                                  </span>
<span class="6486087234581123017" onmouseenter="enter('6486087234581123017');" onmouseout="out('6486087234581123017');" style="">  37  import net.openid.appauth.AuthorizationService;                                                                   </span>
<span class="-1918380963859750931" onmouseenter="enter('-1918380963859750931');" onmouseout="out('-1918380963859750931');" style="">  38  import net.openid.appauth.AuthorizationServiceConfiguration;                                                      </span>
<span class="-1745886087889911862" onmouseenter="enter('-1745886087889911862');" onmouseout="out('-1745886087889911862');" style="">  39  import net.openid.appauth.ClientAuthentication;                                                                   </span>
<span class="5802881313983385714" onmouseenter="enter('5802881313983385714');" onmouseout="out('5802881313983385714');" style="">  40  import net.openid.appauth.ClientSecretBasic;                                                                      </span>
<span class="6044047429679939107" onmouseenter="enter('6044047429679939107');" onmouseout="out('6044047429679939107');" style="">  41  import net.openid.appauth.ClientSecretPost;                                                                       </span>
<span class="2300124290120821674" onmouseenter="enter('2300124290120821674');" onmouseout="out('2300124290120821674');" style="">  42  import net.openid.appauth.RegistrationRequest;                                                                    </span>
<span class="8892208418569385403" onmouseenter="enter('8892208418569385403');" onmouseout="out('8892208418569385403');" style="">  43  import net.openid.appauth.RegistrationResponse;                                                                   </span>
<span class="-7057741429751790751" onmouseenter="enter('-7057741429751790751');" onmouseout="out('-7057741429751790751');" style="">  44  import net.openid.appauth.ResponseTypeValues;                                                                     </span>
<span class="7041795251639894294" onmouseenter="enter('7041795251639894294');" onmouseout="out('7041795251639894294');" style="">  45  import net.openid.appauth.TokenResponse;                                                                          </span>
<span class="4423191746780431402" onmouseenter="enter('4423191746780431402');" onmouseout="out('4423191746780431402');" style="">  46  import net.openid.appauth.TokenRequest;                                                                           </span>
<span class="-5344047661436712974" onmouseenter="enter('-5344047661436712974');" onmouseout="out('-5344047661436712974');" style="">  47  import net.openid.appauth.connectivity.ConnectionBuilder;                                                         </span>
<span class="2682978576506672064" onmouseenter="enter('2682978576506672064');" onmouseout="out('2682978576506672064');" style="">  48  import net.openid.appauth.connectivity.DefaultConnectionBuilder;                                                  </span>
<span  style="">  49                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  50  import java.util.ArrayList;                                                                                       </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  51  import java.util.Collections;                                                                                     </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  52  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  53  import java.util.List;                                                                                            </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  54  import java.util.Map;                                                                                             </span>
<span class="1679953027169218497" onmouseenter="enter('1679953027169218497');" onmouseout="out('1679953027169218497');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  55 -import java.util.concurrent.atomic.AtomicReference;                                                               </span>
<span class="8600016768069240092" onmouseenter="enter('8600016768069240092');" onmouseout="out('8600016768069240092');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  56 +import java.util.concurrent.ConcurrentHashMap;                                                                    </span>
<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  57  import java.util.concurrent.CountDownLatch;                                                                       </span>
<span  style="">  58                                                                                                                    </span>
<span class="6575769426762835403" onmouseenter="enter('6575769426762835403');" onmouseout="out('6575769426762835403');" style="">  59  public class RNAppAuthModule extends ReactContextBaseJavaModule implements ActivityEventListener {                </span>
<span  style="">  60                                                                                                                    </span>
<span class="8401162781518473365" onmouseenter="enter('8401162781518473365');" onmouseout="out('8401162781518473365');" style="">  61      public static final String CUSTOM_TAB_PACKAGE_NAME = &quot;com.android.chrome&quot;;                                    </span>
<span  style="">  62                                                                                                                    </span>
<span class="6180419538961108965" onmouseenter="enter('6180419538961108965');" onmouseout="out('6180419538961108965');" style="">  63      private final ReactApplicationContext reactContext;                                                           </span>
<span class="1869321332520936904" onmouseenter="enter('1869321332520936904');" onmouseout="out('1869321332520936904');" style="">  64      private Promise promise;                                                                                      </span>
<span class="504355591559206068" onmouseenter="enter('504355591559206068');" onmouseout="out('504355591559206068');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  65 -    private Boolean dangerouslyAllowInsecureHttpRequests;                                                         </span>
<span class="1815072443305468649" onmouseenter="enter('1815072443305468649');" onmouseout="out('1815072443305468649');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  66 +    private boolean dangerouslyAllowInsecureHttpRequests;                                                         </span>
<span class="6877933566748299598" onmouseenter="enter('6877933566748299598');" onmouseout="out('6877933566748299598');" style="">  67      private String clientAuthMethod = &quot;basic&quot;;                                                                    </span>
<span class="-9158722382120219449" onmouseenter="enter('-9158722382120219449');" onmouseout="out('-9158722382120219449');" style="">  68      private Map&lt;String, String&gt; registrationRequestHeaders = null;                                                </span>
<span class="5073960437150900627" onmouseenter="enter('5073960437150900627');" onmouseout="out('5073960437150900627');" style="">  69      private Map&lt;String, String&gt; authorizationRequestHeaders = null;                                               </span>
<span class="493655431939084947" onmouseenter="enter('493655431939084947');" onmouseout="out('493655431939084947');" style="">  70      private Map&lt;String, String&gt; tokenRequestHeaders = null;                                                       </span>
<span class="4071237130655105462" onmouseenter="enter('4071237130655105462');" onmouseout="out('4071237130655105462');" style="">  71      private Map&lt;String, String&gt; additionalParametersMap;                                                          </span>
<span class="266383520389269247" onmouseenter="enter('266383520389269247');" onmouseout="out('266383520389269247');" style="">  72      private String clientSecret;                                                                                  </span>
<span class="-2587280928065129913" onmouseenter="enter('-2587280928065129913');" onmouseout="out('-2587280928065129913');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="  73 -    private final AtomicReference&lt;AuthorizationServiceConfiguration&gt; mServiceConfiguration = new AtomicReference&lt;&gt;();">  73 -    private final AtomicReference&lt;AuthorizationServiceConfiguration&gt; mServiceConfiguration = new AtomicReference&lt;&gt;ðŸ”µ</abbr></span>
<span class="3601618847927794657" onmouseenter="enter('3601618847927794657');" onmouseout="out('3601618847927794657');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  74 +    private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = new ConcurrentHashMap&lt;&gt;();">  74 +    private final ConcurrentHashMap&lt;String, AuthorizationServiceConfiguration&gt; mServiceConfigurations = new ConcurðŸ”µ</abbr></span>
<span class="-7004558742358285463" onmouseenter="enter('-7004558742358285463');" onmouseout="out('-7004558742358285463');" style="">  75      private boolean isPrefetched = false;                                                                         </span>
<span  style="">  76                                                                                                                    </span>
<span class="-978447563967948693" onmouseenter="enter('-978447563967948693');" onmouseout="out('-978447563967948693');" style="">  77      public RNAppAuthModule(ReactApplicationContext reactContext) {                                                </span>
<span class="-1443603959286428543" onmouseenter="enter('-1443603959286428543');" onmouseout="out('-1443603959286428543');" style="">  78          super(reactContext);                                                                                      </span>
<span class="3003228313870805798" onmouseenter="enter('3003228313870805798');" onmouseout="out('3003228313870805798');" style="">  79          this.reactContext = reactContext;                                                                         </span>
<span class="6669990586656871028" onmouseenter="enter('6669990586656871028');" onmouseout="out('6669990586656871028');" style="">  80          reactContext.addActivityEventListener(this);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81      }                                                                                                             </span>
<span  style="">  82                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="">  83      @ReactMethod                                                                                                  </span>
<span class="-5002037316527958427" onmouseenter="enter('-5002037316527958427');" onmouseout="out('-5002037316527958427');" style="">  84      public void prefetchConfiguration(                                                                            </span>
<span class="-8094929847941500576" onmouseenter="enter('-8094929847941500576');" onmouseout="out('-8094929847941500576');" style="">  85          final Boolean warmAndPrefetchChrome,                                                                      </span>
<span class="-1461695631126767390" onmouseenter="enter('-1461695631126767390');" onmouseout="out('-1461695631126767390');" style="">  86          final String issuer,                                                                                      </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="">  87          final String redirectUrl,                                                                                 </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="">  88          final String clientId,                                                                                    </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="">  89          final ReadableArray scopes,                                                                               </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="">  90          final ReadableMap serviceConfiguration,                                                                   </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  91 -        final Boolean dangerouslyAllowInsecureHttpRequests,                                                       </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +        final boolean dangerouslyAllowInsecureHttpRequests,                                                       </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="">  93          final ReadableMap headers,                                                                                </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="">  94          final Promise promise                                                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="">  95      ) {                                                                                                           </span>
<span class="-7526945842846133690" onmouseenter="enter('-7526945842846133690');" onmouseout="out('-7526945842846133690');" style="">  96          if (warmAndPrefetchChrome) {                                                                              </span>
<span class="8703515971997686923" onmouseenter="enter('8703515971997686923');" onmouseout="out('8703515971997686923');" style="">  97              warmChromeCustomTab(reactContext, issuer);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  98          }                                                                                                         </span>
<span  style="">  99                                                                                                                    </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 100          this.parseHeaderMap(headers);                                                                             </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title=" 101          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 101          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authoðŸ”µ</abbr></span>
<span class="8517032726698162354" onmouseenter="enter('8517032726698162354');" onmouseout="out('8517032726698162354');" style=""> 102          final CountDownLatch fetchConfigurationLatch = new CountDownLatch(1);                                     </span>
<span  style=""> 103                                                                                                                    </span>
<span class="-7471939844701867604" onmouseenter="enter('-7471939844701867604');" onmouseout="out('-7471939844701867604');" style=""> 104          if(!isPrefetched) {                                                                                       </span>
<span class="-8580903789630998000" onmouseenter="enter('-8580903789630998000');" onmouseout="out('-8580903789630998000');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 105 -            if (serviceConfiguration != null &amp;&amp; mServiceConfiguration.get() == null) {                            </span>
<span class="-4482036984339699707" onmouseenter="enter('-4482036984339699707');" onmouseout="out('-4482036984339699707');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 106 +            if (serviceConfiguration != null &amp;&amp; !this.hasServiceConfiguration(issuer)) {                          </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 107                  try {                                                                                             </span>
<span class="-5277191699256196698" onmouseenter="enter('-5277191699256196698');" onmouseout="out('-5277191699256196698');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 108 -                    mServiceConfiguration.set(createAuthorizationServiceConfiguration(serviceConfiguration));     </span>
<span class="7730737146098200581" onmouseenter="enter('7730737146098200581');" onmouseout="out('7730737146098200581');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 109 +                    setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfiguration));"> 109 +                    setServiceConfiguration(issuer, createAuthorizationServiceConfiguration(serviceConfiguration))ðŸ”µ</abbr></span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 110                      isPrefetched = true;                                                                          </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 111                      fetchConfigurationLatch.countDown();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 112                  } catch (Exception e) {                                                                           </span>
<span class="6809300863683709814" onmouseenter="enter('6809300863683709814');" onmouseout="out('6809300863683709814');" style=""> 113                      promise.reject(&quot;configuration_error&quot;, &quot;Failed to convert serviceConfiguration&quot;, e);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114                  }                                                                                                 </span>
<span class="7986155546390017313" onmouseenter="enter('7986155546390017313');" onmouseout="out('7986155546390017313');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 115 -            } else if (mServiceConfiguration.get() == null) {                                                     </span>
<span class="386976522086802497" onmouseenter="enter('386976522086802497');" onmouseout="out('386976522086802497');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +            } else if (!hasServiceConfiguration(issuer)) {                                                        </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 117                  final Uri issuerUri = Uri.parse(issuer);                                                          </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 118                  AuthorizationServiceConfiguration.fetchFromUrl(                                                   </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 119                          buildConfigurationUriFromIssuer(issuerUri),                                               </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 120                          new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                   </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 121                              public void onFetchConfigurationCompleted(                                            </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 122                                      @Nullable AuthorizationServiceConfiguration fetchedConfiguration,             </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 123                                      @Nullable AuthorizationException ex) {                                        </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 124                                  if (ex != null) {                                                                 </span>
<span class="6863513032854295921" onmouseenter="enter('6863513032854295921');" onmouseout="out('6863513032854295921');" style=""><abbr title=" 125                                      promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuration&quot;, ex);"> 125                                      promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuraðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 126                                      return;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127                                  }                                                                                 </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 128 -                                mServiceConfiguration.set(fetchedConfiguration);                                  </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +                                setServiceConfiguration(issuer, fetchedConfiguration);                            </span>
<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 130                                  isPrefetched = true;                                                              </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 131                                  fetchConfigurationLatch.countDown();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 132                              }                                                                                     </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 133                          },                                                                                        </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 134                          builder                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 135                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 137          } else {                                                                                                  </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 138              fetchConfigurationLatch.countDown();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139          }                                                                                                         </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 141          try {                                                                                                     </span>
<span class="-1907621811022997860" onmouseenter="enter('-1907621811022997860');" onmouseout="out('-1907621811022997860');" style=""> 142              fetchConfigurationLatch.await();                                                                      </span>
<span class="1954864242125272611" onmouseenter="enter('1954864242125272611');" onmouseout="out('1954864242125272611');" style=""> 143              promise.resolve(isPrefetched);                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 144          } catch (Exception e) {                                                                                   </span>
<span class="1768900707370095440" onmouseenter="enter('1768900707370095440');" onmouseout="out('1768900707370095440');" style=""> 145              promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147      }                                                                                                             </span>
<span  style=""> 148                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 149      @ReactMethod                                                                                                  </span>
<span class="6906647419500618265" onmouseenter="enter('6906647419500618265');" onmouseout="out('6906647419500618265');" style=""> 150      public void register(                                                                                         </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 151          String issuer,                                                                                            </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 152          final ReadableArray redirectUris,                                                                         </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 153          final ReadableArray responseTypes,                                                                        </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 154          final ReadableArray grantTypes,                                                                           </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 155          final String subjectType,                                                                                 </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 156          final String tokenEndpointAuthMethod,                                                                     </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 157          final ReadableMap additionalParameters,                                                                   </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 158          final ReadableMap serviceConfiguration,                                                                   </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 159 -        final Boolean dangerouslyAllowInsecureHttpRequests,                                                       </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 160 +        final boolean dangerouslyAllowInsecureHttpRequests,                                                       </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 161          final ReadableMap headers,                                                                                </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 162          final Promise promise                                                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 163      ) {                                                                                                           </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 164          this.parseHeaderMap(headers);                                                                             </span>
<span class="263301671464505834" onmouseenter="enter('263301671464505834');" onmouseout="out('263301671464505834');" style=""><abbr title=" 165          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.registrationRequestHeaders);"> 165          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.regisðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 166          final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);               </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 167          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 167          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters)ðŸ”µ</abbr></span>
<span  style=""> 168                                                                                                                    </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""> 169          // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint       </span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 170 -        if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                                </span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 171 +        if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 172              try {                                                                                                 </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 173 -                final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 173 -                final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mSerðŸ”µ</abbr></span>
<span class="-539624180603456705" onmouseenter="enter('-539624180603456705');" onmouseout="out('-539624180603456705');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 174 +                final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer)? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 174 +                final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer)? getServicðŸ”µ</abbr></span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 175                  registerWithConfiguration(                                                                        </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 176                          serviceConfig,                                                                            </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 177                          appAuthConfiguration,                                                                     </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 178                          redirectUris,                                                                             </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 179                          responseTypes,                                                                            </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 180                          grantTypes,                                                                               </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 181                          subjectType,                                                                              </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 182                          tokenEndpointAuthMethod,                                                                  </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 183                          additionalParametersMap,                                                                  </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 184                          promise                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 185                  );                                                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 186              } catch (Exception e) {                                                                               </span>
<span class="-4765268916451052755" onmouseenter="enter('-4765268916451052755');" onmouseout="out('-4765268916451052755');" style=""> 187                  promise.reject(&quot;registration_failed&quot;, e.getMessage());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 189          } else {                                                                                                  </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 190              final Uri issuerUri = Uri.parse(issuer);                                                              </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 191              AuthorizationServiceConfiguration.fetchFromUrl(                                                       </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 192                      buildConfigurationUriFromIssuer(issuerUri),                                                   </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 193                      new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                       </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 194                          public void onFetchConfigurationCompleted(                                                </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 195                                  @Nullable AuthorizationServiceConfiguration fetchedConfiguration,                 </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 196                                  @Nullable AuthorizationException ex) {                                            </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 197                              if (ex != null) {                                                                     </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 198                                  promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 199                                  return;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200                              }                                                                                     </span>
<span  style=""> 201                                                                                                                    </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 202 -                            mServiceConfiguration.set(fetchedConfiguration);                                      </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 203 +                            setServiceConfiguration(issuer, fetchedConfiguration);                                </span>
<span  style=""> 204                                                                                                                    </span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 205                              registerWithConfiguration(                                                            </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 206                                      fetchedConfiguration,                                                         </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 207                                      appAuthConfiguration,                                                         </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 208                                      redirectUris,                                                                 </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 209                                      responseTypes,                                                                </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 210                                      grantTypes,                                                                   </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 211                                      subjectType,                                                                  </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 212                                      tokenEndpointAuthMethod,                                                      </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 213                                      additionalParametersMap,                                                      </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 214                                      promise                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 215                              );                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216                          }                                                                                         </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 217                      },                                                                                            </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 218                      builder);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 219          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220      }                                                                                                             </span>
<span  style=""> 221                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 222      @ReactMethod                                                                                                  </span>
<span class="7303195633629033586" onmouseenter="enter('7303195633629033586');" onmouseout="out('7303195633629033586');" style=""> 223      public void authorize(                                                                                        </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 224              String issuer,                                                                                        </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 225              final String redirectUrl,                                                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 226              final String clientId,                                                                                </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 227              final String clientSecret,                                                                            </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 228              final ReadableArray scopes,                                                                           </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 229              final ReadableMap additionalParameters,                                                               </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 230              final ReadableMap serviceConfiguration,                                                               </span>

<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 231              final Boolean usePKCE,                                                                                </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 232              final String clientAuthMethod,                                                                        </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 233 -            final Boolean dangerouslyAllowInsecureHttpRequests,                                                   </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +            final boolean dangerouslyAllowInsecureHttpRequests,                                                   </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 235              final ReadableMap headers,                                                                            </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 236              final Promise promise                                                                                 </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 237      ) {                                                                                                           </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 238          this.parseHeaderMap(headers);                                                                             </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title=" 239          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 239          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authoðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 240          final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);               </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 241          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 241          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters)ðŸ”µ</abbr></span>
<span  style=""> 242                                                                                                                    </span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style=""> 243          // store args in private fields for later use in onActivityResult handler                                 </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style=""> 244          this.promise = promise;                                                                                   </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 245          this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                         </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 246          this.additionalParametersMap = additionalParametersMap;                                                   </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style=""> 247          this.clientSecret = clientSecret;                                                                         </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style=""> 248          this.clientAuthMethod = clientAuthMethod;                                                                 </span>

<span  style=""> 249                                                                                                                    </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""> 250          // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint       </span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 251 -        if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                                </span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 252 +        if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 253              try {                                                                                                 </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 254 -                final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 254 -                final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mSerðŸ”µ</abbr></span>
<span class="-7259429764570797401" onmouseenter="enter('-7259429764570797401');" onmouseout="out('-7259429764570797401');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 255 +                final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 255 +                final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiðŸ”µ</abbr></span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style=""> 256                  authorizeWithConfiguration(                                                                       </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 257                          serviceConfig,                                                                            </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 258                          appAuthConfiguration,                                                                     </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 259                          clientId,                                                                                 </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 260                          scopes,                                                                                   </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 261                          redirectUrl,                                                                              </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style=""> 262                          usePKCE,                                                                                  </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style=""> 263                          additionalParametersMap                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 264                  );                                                                                                </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 265              } catch (ActivityNotFoundException e) {                                                               </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 266                  promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 267              } catch (Exception e) {                                                                               </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style=""> 268                  promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 270          } else {                                                                                                  </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 271              final Uri issuerUri = Uri.parse(issuer);                                                              </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 272              AuthorizationServiceConfiguration.fetchFromUrl(                                                       </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 273                      buildConfigurationUriFromIssuer(issuerUri),                                                   </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 274                      new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                       </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 275                          public void onFetchConfigurationCompleted(                                                </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 276                                  @Nullable AuthorizationServiceConfiguration fetchedConfiguration,                 </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 277                                  @Nullable AuthorizationException ex) {                                            </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 278                              if (ex != null) {                                                                     </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 279                                  promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 280                                  return;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                              }                                                                                     </span>
<span  style=""> 282                                                                                                                    </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 283 -                            mServiceConfiguration.set(fetchedConfiguration);                                      </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 284 +                            setServiceConfiguration(issuer, fetchedConfiguration);                                </span>
<span  style=""> 285                                                                                                                    </span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style=""> 286                              authorizeWithConfiguration(                                                           </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 287                                      fetchedConfiguration,                                                         </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 288                                      appAuthConfiguration,                                                         </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 289                                      clientId,                                                                     </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 290                                      scopes,                                                                       </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 291                                      redirectUrl,                                                                  </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style=""> 292                                      usePKCE,                                                                      </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style=""> 293                                      additionalParametersMap                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 294                              );                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295                          }                                                                                         </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 296                      },                                                                                            </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 297                      builder                                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 298              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299          }                                                                                                         </span>
<span  style=""> 300                                                                                                                    </span>
<span  style=""> 301                                                                                                                    </span>
<span  style=""> 302                                                                                                                    </span>
<span  style=""> 303                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304      }                                                                                                             </span>
<span  style=""> 305                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 306      @ReactMethod                                                                                                  </span>
<span class="-5238780499530126703" onmouseenter="enter('-5238780499530126703');" onmouseout="out('-5238780499530126703');" style=""> 307      public void refresh(                                                                                          </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 308              String issuer,                                                                                        </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 309              final String redirectUrl,                                                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 310              final String clientId,                                                                                </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 311              final String clientSecret,                                                                            </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 312              final String refreshToken,                                                                            </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 313              final ReadableArray scopes,                                                                           </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 314              final ReadableMap additionalParameters,                                                               </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 315              final ReadableMap serviceConfiguration,                                                               </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 316              final String clientAuthMethod,                                                                        </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 317 -            final Boolean dangerouslyAllowInsecureHttpRequests,                                                   </span>
<span class="7003399459085411059" onmouseenter="enter('7003399459085411059');" onmouseout="out('7003399459085411059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 318 +            final boolean dangerouslyAllowInsecureHttpRequests,                                                   </span>
<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 319              final ReadableMap headers,                                                                            </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 320              final Promise promise                                                                                 </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 321      ) {                                                                                                           </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 322          this.parseHeaderMap(headers);                                                                             </span>
<span class="5750510513523473374" onmouseenter="enter('5750510513523473374');" onmouseout="out('5750510513523473374');" style=""><abbr title=" 323          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders);"> 323          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenðŸ”µ</abbr></span>
<span class="-7964591588332866161" onmouseenter="enter('-7964591588332866161');" onmouseout="out('-7964591588332866161');" style=""> 324          final AppAuthConfiguration appAuthConfiguration = createAppAuthConfiguration(builder);                    </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 325          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 325          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters)ðŸ”µ</abbr></span>
<span  style=""> 326                                                                                                                    </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 327          if (clientSecret != null) {                                                                               </span>
<span class="-5682406089270036260" onmouseenter="enter('-5682406089270036260');" onmouseout="out('-5682406089270036260');" style=""> 328              additionalParametersMap.put(&quot;client_secret&quot;, clientSecret);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329          }                                                                                                         </span>
<span  style=""> 330                                                                                                                    </span>
<span class="1495748746185505707" onmouseenter="enter('1495748746185505707');" onmouseout="out('1495748746185505707');" style=""> 331          // store setting in private field for later use in onActivityResult handler                               </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 332          this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                         </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 333          this.additionalParametersMap = additionalParametersMap;                                                   </span>
<span  style=""> 334                                                                                                                    </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""> 335          // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint       </span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 336 -        if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                                </span>
<span class="4457595742534113602" onmouseenter="enter('4457595742534113602');" onmouseout="out('4457595742534113602');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 337 +        if (serviceConfiguration != null || hasServiceConfiguration(issuer)) {                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 338              try {                                                                                                 </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 339 -                final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 339 -                final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mSerðŸ”µ</abbr></span>
<span class="-7259429764570797401" onmouseenter="enter('-7259429764570797401');" onmouseout="out('-7259429764570797401');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 340 +                final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiceConfiguration(issuer) : createAuthorizationServiceConfiguration(serviceConfiguration);"> 340 +                final AuthorizationServiceConfiguration serviceConfig = hasServiceConfiguration(issuer) ? getServiðŸ”µ</abbr></span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 341                  refreshWithConfiguration(                                                                         </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 342                          serviceConfig,                                                                            </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 343                          appAuthConfiguration,                                                                     </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 344                          refreshToken,                                                                             </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 345                          clientId,                                                                                 </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 346                          scopes,                                                                                   </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 347                          redirectUrl,                                                                              </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 348                          additionalParametersMap,                                                                  </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 349                          clientAuthMethod,                                                                         </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 350                          clientSecret,                                                                             </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 351                          promise                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 352                  );                                                                                                </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 353              } catch (ActivityNotFoundException e) {                                                               </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 354                  promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 355              } catch (Exception e) {                                                                               </span>
<span class="7513248397060081198" onmouseenter="enter('7513248397060081198');" onmouseout="out('7513248397060081198');" style=""> 356                  promise.reject(&quot;token_refresh_failed&quot;, e.getMessage());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 358          } else {                                                                                                  </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 359              final Uri issuerUri = Uri.parse(issuer);                                                              </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 360              AuthorizationServiceConfiguration.fetchFromUrl(                                                       </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 361                      buildConfigurationUriFromIssuer(issuerUri),                                                   </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 362                      new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                       </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 363                          public void onFetchConfigurationCompleted(                                                </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 364                                  @Nullable AuthorizationServiceConfiguration fetchedConfiguration,                 </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 365                                  @Nullable AuthorizationException ex) {                                            </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 366                              if (ex != null) {                                                                     </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 367                                  promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 368                                  return;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369                              }                                                                                     </span>
<span  style=""> 370                                                                                                                    </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 371 -                            mServiceConfiguration.set(fetchedConfiguration);                                      </span>
<span class="-6660703688952306838" onmouseenter="enter('-6660703688952306838');" onmouseout="out('-6660703688952306838');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 372 +                            setServiceConfiguration(issuer, fetchedConfiguration);                                </span>
<span  style=""> 373                                                                                                                    </span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 374                              refreshWithConfiguration(                                                             </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 375                                      fetchedConfiguration,                                                         </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 376                                      appAuthConfiguration,                                                         </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 377                                      refreshToken,                                                                 </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 378                                      clientId,                                                                     </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 379                                      scopes,                                                                       </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 380                                      redirectUrl,                                                                  </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 381                                      additionalParametersMap,                                                      </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 382                                      clientAuthMethod,                                                             </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 383                                      clientSecret,                                                                 </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 384                                      promise                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 385                              );                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386                          }                                                                                         </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 387                      },                                                                                            </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 388                      builder);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389          }                                                                                                         </span>
<span  style=""> 390                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391      }                                                                                                             </span>
<span  style=""> 392                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 393      /*                                                                                                            </span>
<span class="7578951324193379805" onmouseenter="enter('7578951324193379805');" onmouseout="out('7578951324193379805');" style=""> 394       * Called when the OAuth browser activity completes                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 395       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 396      @Override                                                                                                     </span>
<span class="2027722410160164989" onmouseenter="enter('2027722410160164989');" onmouseout="out('2027722410160164989');" style=""> 397      public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {               </span>
<span class="-4639597857217913430" onmouseenter="enter('-4639597857217913430');" onmouseout="out('-4639597857217913430');" style=""> 398          if (requestCode == 0) {                                                                                   </span>
<span class="-5203356024335682166" onmouseenter="enter('-5203356024335682166');" onmouseout="out('-5203356024335682166');" style=""> 399              if (data == null) {                                                                                   </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 400                  if (promise != null) {                                                                            </span>
<span class="2268968836554739893" onmouseenter="enter('2268968836554739893');" onmouseout="out('2268968836554739893');" style=""> 401                      promise.reject(&quot;authentication_error&quot;, &quot;Data intent is null&quot; );                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402                  }                                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 403                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404              }                                                                                                     </span>
<span  style=""> 405                                                                                                                    </span>
<span class="1683167759369238332" onmouseenter="enter('1683167759369238332');" onmouseout="out('1683167759369238332');" style=""> 406              final AuthorizationResponse response = AuthorizationResponse.fromIntent(data);                        </span>
<span class="-2661429536108932642" onmouseenter="enter('-2661429536108932642');" onmouseout="out('-2661429536108932642');" style=""> 407              AuthorizationException exception = AuthorizationException.fromIntent(data);                           </span>
<span class="812069196179346176" onmouseenter="enter('812069196179346176');" onmouseout="out('812069196179346176');" style=""> 408              if (exception != null) {                                                                              </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 409                  if (promise != null) {                                                                            </span>
<span class="8302975562867231827" onmouseenter="enter('8302975562867231827');" onmouseout="out('8302975562867231827');" style=""> 410                      promise.reject(&quot;authentication_error&quot;, getErrorMessage(exception));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411                  }                                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 412                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413              }                                                                                                     </span>
<span  style=""> 414                                                                                                                    </span>







<span class="7265001672864433355" onmouseenter="enter('7265001672864433355');" onmouseout="out('7265001672864433355');" style=""> 415              final Promise authorizePromise = this.promise;                                                        </span>
<span class="5853075131485496752" onmouseenter="enter('5853075131485496752');" onmouseout="out('5853075131485496752');" style=""> 416              final AppAuthConfiguration configuration = createAppAuthConfiguration(                                </span>
<span class="-3586276280695435831" onmouseenter="enter('-3586276280695435831');" onmouseout="out('-3586276280695435831');" style=""> 417                      createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders)  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 418              );                                                                                                    </span>
<span  style=""> 419                                                                                                                    </span>
<span class="-598339291394324639" onmouseenter="enter('-598339291394324639');" onmouseout="out('-598339291394324639');" style=""> 420              AuthorizationService authService = new AuthorizationService(this.reactContext, configuration);        </span>
<span  style=""> 421                                                                                                                    </span>
<span class="6152215567678252770" onmouseenter="enter('6152215567678252770');" onmouseout="out('6152215567678252770');" style=""> 422              TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap);        </span>
<span  style=""> 423                                                                                                                    </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 424              AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 424              AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenRespoðŸ”µ</abbr></span>
<span  style=""> 425                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 426                  @Override                                                                                         </span>
<span class="-8262795349130604582" onmouseenter="enter('-8262795349130604582');" onmouseout="out('-8262795349130604582');" style=""> 427                  public void onTokenRequestCompleted(                                                              </span>
<span class="5619805881636115456" onmouseenter="enter('5619805881636115456');" onmouseout="out('5619805881636115456');" style=""> 428                          TokenResponse resp, AuthorizationException ex) {                                          </span>
<span class="7476284757153148856" onmouseenter="enter('7476284757153148856');" onmouseout="out('7476284757153148856');" style=""> 429                      if (resp != null) {                                                                           </span>
<span class="7607526798956663360" onmouseenter="enter('7607526798956663360');" onmouseout="out('7607526798956663360');" style=""> 430                          WritableMap map = TokenResponseFactory.tokenResponseToMap(resp, response);                </span>
<span class="-6045783056504489326" onmouseenter="enter('-6045783056504489326');" onmouseout="out('-6045783056504489326');" style=""> 431                          if (authorizePromise != null) {                                                           </span>
<span class="-4073221780338751137" onmouseenter="enter('-4073221780338751137');" onmouseout="out('-4073221780338751137');" style=""> 432                              authorizePromise.resolve(map);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 434                      } else {                                                                                      </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 435                          if (promise != null) {                                                                    </span>
<span class="-1873248496991044419" onmouseenter="enter('-1873248496991044419');" onmouseout="out('-1873248496991044419');" style=""> 436                              promise.reject(&quot;token_exchange_failed&quot;, getErrorMessage(ex));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 440              };                                                                                                    </span>
<span  style=""> 441                                                                                                                    </span>
<span class="-7911542703683536912" onmouseenter="enter('-7911542703683536912');" onmouseout="out('-7911542703683536912');" style=""> 442              if (this.clientSecret != null) {                                                                      </span>
<span class="-3188745194840831156" onmouseenter="enter('-3188745194840831156');" onmouseout="out('-3188745194840831156');" style=""><abbr title=" 443                  ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMethod);"> 443                  ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 444                  authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);                 </span>
<span  style=""> 445                                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 446              } else {                                                                                              </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 447                  authService.performTokenRequest(tokenRequest, tokenResponseCallback);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 448              }                                                                                                     </span>
<span  style=""> 449                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 450          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451      }                                                                                                             </span>
<span  style=""> 452                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 453      /*                                                                                                            </span>
<span class="3813849031296026505" onmouseenter="enter('3813849031296026505');" onmouseout="out('3813849031296026505');" style=""> 454       * Perform dynamic client registration with the provided configuration                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 455       */                                                                                                           </span>
<span class="340189295193181696" onmouseenter="enter('340189295193181696');" onmouseout="out('340189295193181696');" style=""> 456      private void registerWithConfiguration(                                                                       </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 457          final AuthorizationServiceConfiguration serviceConfiguration,                                             </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 458          final AppAuthConfiguration appAuthConfiguration,                                                          </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 459          final ReadableArray redirectUris,                                                                         </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 460          final ReadableArray responseTypes,                                                                        </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 461          final ReadableArray grantTypes,                                                                           </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 462          final String subjectType,                                                                                 </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 463          final String tokenEndpointAuthMethod,                                                                     </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 464          final Map&lt;String, String&gt; additionalParametersMap,                                                        </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 465          final Promise promise                                                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 466      ) {                                                                                                           </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 467          final Context context = this.reactContext;                                                                </span>
<span  style=""> 468                                                                                                                    </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 469          AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);               </span>
<span  style=""> 470                                                                                                                    </span>
<span class="-8453810682683042065" onmouseenter="enter('-8453810682683042065');" onmouseout="out('-8453810682683042065');" style=""> 471          RegistrationRequest.Builder registrationRequestBuilder =                                                  </span>
<span class="-7581367313981499795" onmouseenter="enter('-7581367313981499795');" onmouseout="out('-7581367313981499795');" style=""> 472                  new RegistrationRequest.Builder(                                                                  </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 473                      serviceConfiguration,                                                                         </span>
<span class="4262694259998445935" onmouseenter="enter('4262694259998445935');" onmouseout="out('4262694259998445935');" style=""> 474                      arrayToUriList(redirectUris)                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 475                  )                                                                                                 </span>
<span class="4677539456481393469" onmouseenter="enter('4677539456481393469');" onmouseout="out('4677539456481393469');" style=""> 476                      .setAdditionalParameters(additionalParametersMap);                                            </span>
<span  style=""> 477                                                                                                                    </span>
<span class="382071555491173350" onmouseenter="enter('382071555491173350');" onmouseout="out('382071555491173350');" style=""> 478          if (responseTypes != null) {                                                                              </span>
<span class="2691057769499642705" onmouseenter="enter('2691057769499642705');" onmouseout="out('2691057769499642705');" style=""> 479              registrationRequestBuilder.setResponseTypeValues(arrayToList(responseTypes));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480          }                                                                                                         </span>
<span  style=""> 481                                                                                                                    </span>
<span class="461598363295361308" onmouseenter="enter('461598363295361308');" onmouseout="out('461598363295361308');" style=""> 482          if (grantTypes != null) {                                                                                 </span>
<span class="1681210474388500870" onmouseenter="enter('1681210474388500870');" onmouseout="out('1681210474388500870');" style=""> 483              registrationRequestBuilder.setGrantTypeValues(arrayToList(grantTypes));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484          }                                                                                                         </span>
<span  style=""> 485                                                                                                                    </span>
<span class="-2982605970687904529" onmouseenter="enter('-2982605970687904529');" onmouseout="out('-2982605970687904529');" style=""> 486          if (subjectType != null) {                                                                                </span>
<span class="3235050174363133383" onmouseenter="enter('3235050174363133383');" onmouseout="out('3235050174363133383');" style=""> 487              registrationRequestBuilder.setSubjectType(subjectType);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 488          }                                                                                                         </span>
<span  style=""> 489                                                                                                                    </span>
<span class="-3523548169086540196" onmouseenter="enter('-3523548169086540196');" onmouseout="out('-3523548169086540196');" style=""> 490          if (tokenEndpointAuthMethod != null) {                                                                    </span>
<span class="8002810479156997291" onmouseenter="enter('8002810479156997291');" onmouseout="out('8002810479156997291');" style=""> 491              registrationRequestBuilder.setTokenEndpointAuthenticationMethod(tokenEndpointAuthMethod);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492          }                                                                                                         </span>
<span  style=""> 493                                                                                                                    </span>
<span class="-8152299436158074794" onmouseenter="enter('-8152299436158074794');" onmouseout="out('-8152299436158074794');" style=""> 494          RegistrationRequest registrationRequest = registrationRequestBuilder.build();                             </span>
<span  style=""> 495                                                                                                                    </span>
<span class="2043221784460883972" onmouseenter="enter('2043221784460883972');" onmouseout="out('2043221784460883972');" style=""><abbr title=" 496          AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.RegistrationResponseCallback() {"> 496          AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 497              @Override                                                                                             </span>
<span class="89148758474091775" onmouseenter="enter('89148758474091775');" onmouseout="out('89148758474091775');" style=""><abbr title=" 498              public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizationException ex) {"> 498              public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 499                  if (response != null) {                                                                           </span>
<span class="3678270738704120650" onmouseenter="enter('3678270738704120650');" onmouseout="out('3678270738704120650');" style=""> 500                      WritableMap map = RegistrationResponseFactory.registrationResponseToMap(response);            </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 501                      promise.resolve(map);                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 502                  } else {                                                                                          </span>
<span class="-5586663357435466975" onmouseenter="enter('-5586663357435466975');" onmouseout="out('-5586663357435466975');" style=""> 503                      promise.reject(&quot;registration_failed&quot;, getErrorMessage(ex));                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 506          };                                                                                                        </span>
<span  style=""> 507                                                                                                                    </span>
<span class="2922372767993768868" onmouseenter="enter('2922372767993768868');" onmouseout="out('2922372767993768868');" style=""> 508          authService.performRegistrationRequest(registrationRequest, registrationResponseCallback);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509      }                                                                                                             </span>
<span  style=""> 510                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 511      /*                                                                                                            </span>
<span class="-3037424821439688076" onmouseenter="enter('-3037424821439688076');" onmouseout="out('-3037424821439688076');" style=""> 512       * Authorize user with the provided configuration                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 513       */                                                                                                           </span>
<span class="-1686698148972257501" onmouseenter="enter('-1686698148972257501');" onmouseout="out('-1686698148972257501');" style=""> 514      private void authorizeWithConfiguration(                                                                      </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 515              final AuthorizationServiceConfiguration serviceConfiguration,                                         </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 516              final AppAuthConfiguration appAuthConfiguration,                                                      </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 517              final String clientId,                                                                                </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 518              final ReadableArray scopes,                                                                           </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 519              final String redirectUrl,                                                                             </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 520              final Boolean usePKCE,                                                                                </span>
<span class="4591131233701235058" onmouseenter="enter('4591131233701235058');" onmouseout="out('4591131233701235058');" style=""> 521              final Map&lt;String, String&gt; additionalParametersMap                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 522      ) {                                                                                                           </span>
<span  style=""> 523                                                                                                                    </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 524          String scopesString = null;                                                                               </span>
<span  style=""> 525                                                                                                                    </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 526          if (scopes != null) {                                                                                     </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 527              scopesString = this.arrayToString(scopes);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528          }                                                                                                         </span>
<span  style=""> 529                                                                                                                    </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 530          final Context context = this.reactContext;                                                                </span>
<span class="-4913832152651687292" onmouseenter="enter('-4913832152651687292');" onmouseout="out('-4913832152651687292');" style=""> 531          final Activity currentActivity = getCurrentActivity();                                                    </span>
<span  style=""> 532                                                                                                                    </span>
<span class="1615045173536817183" onmouseenter="enter('1615045173536817183');" onmouseout="out('1615045173536817183');" style=""> 533          AuthorizationRequest.Builder authRequestBuilder =                                                         </span>
<span class="8630572254279098967" onmouseenter="enter('8630572254279098967');" onmouseout="out('8630572254279098967');" style=""> 534                  new AuthorizationRequest.Builder(                                                                 </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 535                          serviceConfiguration,                                                                     </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 536                          clientId,                                                                                 </span>
<span class="4849618716626806999" onmouseenter="enter('4849618716626806999');" onmouseout="out('4849618716626806999');" style=""> 537                          ResponseTypeValues.CODE,                                                                  </span>
<span class="-1639145692422133689" onmouseenter="enter('-1639145692422133689');" onmouseout="out('-1639145692422133689');" style=""> 538                          Uri.parse(redirectUrl)                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 539                  );                                                                                                </span>
<span  style=""> 540                                                                                                                    </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 541          if (scopesString != null) {                                                                               </span>
<span class="-8218576309450527961" onmouseenter="enter('-8218576309450527961');" onmouseout="out('-8218576309450527961');" style=""> 542              authRequestBuilder.setScope(scopesString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543          }                                                                                                         </span>
<span  style=""> 544                                                                                                                    </span>
<span  style=""> 545                                                                                                                    </span>
<span class="7149068665077353053" onmouseenter="enter('7149068665077353053');" onmouseout="out('7149068665077353053');" style=""> 546          if (additionalParametersMap != null) {                                                                    </span>
<span class="-6137327941719445172" onmouseenter="enter('-6137327941719445172');" onmouseout="out('-6137327941719445172');" style=""> 547              // handle additional parameters separately to avoid exceptions from AppAuth                           </span>
<span class="-4729676460784236302" onmouseenter="enter('-4729676460784236302');" onmouseout="out('-4729676460784236302');" style=""> 548              if (additionalParametersMap.containsKey(&quot;display&quot;)) {                                                 </span>
<span class="6740086842281271815" onmouseenter="enter('6740086842281271815');" onmouseout="out('6740086842281271815');" style=""> 549                  authRequestBuilder.setDisplay(additionalParametersMap.get(&quot;display&quot;));                            </span>
<span class="5478676394718524231" onmouseenter="enter('5478676394718524231');" onmouseout="out('5478676394718524231');" style=""> 550                  additionalParametersMap.remove(&quot;display&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551              }                                                                                                     </span>
<span class="-5162308638975991351" onmouseenter="enter('-5162308638975991351');" onmouseout="out('-5162308638975991351');" style=""> 552              if (additionalParametersMap.containsKey(&quot;login_hint&quot;)) {                                              </span>
<span class="7478322337196261432" onmouseenter="enter('7478322337196261432');" onmouseout="out('7478322337196261432');" style=""> 553                  authRequestBuilder.setLoginHint(additionalParametersMap.get(&quot;login_hint&quot;));                       </span>
<span class="-3825577662921277200" onmouseenter="enter('-3825577662921277200');" onmouseout="out('-3825577662921277200');" style=""> 554                  additionalParametersMap.remove(&quot;login_hint&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555              }                                                                                                     </span>
<span class="-8254180626457365202" onmouseenter="enter('-8254180626457365202');" onmouseout="out('-8254180626457365202');" style=""> 556              if (additionalParametersMap.containsKey(&quot;prompt&quot;)) {                                                  </span>
<span class="2585369211918110761" onmouseenter="enter('2585369211918110761');" onmouseout="out('2585369211918110761');" style=""> 557                  authRequestBuilder.setPrompt(additionalParametersMap.get(&quot;prompt&quot;));                              </span>
<span class="290019989822766287" onmouseenter="enter('290019989822766287');" onmouseout="out('290019989822766287');" style=""> 558                  additionalParametersMap.remove(&quot;prompt&quot;);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 559              }                                                                                                     </span>
<span  style=""> 560                                                                                                                    </span>
<span class="-1433627721318603910" onmouseenter="enter('-1433627721318603910');" onmouseout="out('-1433627721318603910');" style=""> 561              authRequestBuilder.setAdditionalParameters(additionalParametersMap);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562          }                                                                                                         </span>
<span  style=""> 563                                                                                                                    </span>
<span class="6295746505532947076" onmouseenter="enter('6295746505532947076');" onmouseout="out('6295746505532947076');" style=""> 564          if (!usePKCE) {                                                                                           </span>
<span class="211047115781987373" onmouseenter="enter('211047115781987373');" onmouseout="out('211047115781987373');" style=""> 565              authRequestBuilder.setCodeVerifier(null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566          }                                                                                                         </span>
<span  style=""> 567                                                                                                                    </span>
<span class="2874496759892237047" onmouseenter="enter('2874496759892237047');" onmouseout="out('2874496759892237047');" style=""> 568          AuthorizationRequest authRequest = authRequestBuilder.build();                                            </span>
<span  style=""> 569                                                                                                                    </span>
<span class="4248167488592758879" onmouseenter="enter('4248167488592758879');" onmouseout="out('4248167488592758879');" style=""> 570          if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) {                        </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 571              AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);           </span>
<span class="-8712988972948484879" onmouseenter="enter('-8712988972948484879');" onmouseout="out('-8712988972948484879');" style=""> 572              Intent authIntent = authService.getAuthorizationRequestIntent(authRequest);                           </span>
<span  style=""> 573                                                                                                                    </span>
<span class="-1768672139093830544" onmouseenter="enter('-1768672139093830544');" onmouseout="out('-1768672139093830544');" style=""> 574              currentActivity.startActivityForResult(authIntent, 0);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 575          } else {                                                                                                  </span>
<span class="-5574677103641269793" onmouseenter="enter('-5574677103641269793');" onmouseout="out('-5574677103641269793');" style=""> 576              AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguration);   </span>
<span class="-921350943484849229" onmouseenter="enter('-921350943484849229');" onmouseout="out('-921350943484849229');" style=""> 577              PendingIntent pendingIntent = currentActivity.createPendingResult(0, new Intent(), 0);                </span>
<span  style=""> 578                                                                                                                    </span>
<span class="5462088869311657545" onmouseenter="enter('5462088869311657545');" onmouseout="out('5462088869311657545');" style=""> 579              authService.performAuthorizationRequest(authRequest, pendingIntent);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 580          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 581      }                                                                                                             </span>
<span  style=""> 582                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 583      /*                                                                                                            </span>
<span class="8814346366745541198" onmouseenter="enter('8814346366745541198');" onmouseout="out('8814346366745541198');" style=""> 584       * Refresh authentication token with the provided configuration                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 585       */                                                                                                           </span>
<span class="-7235916799046070057" onmouseenter="enter('-7235916799046070057');" onmouseout="out('-7235916799046070057');" style=""> 586      private void refreshWithConfiguration(                                                                        </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 587              final AuthorizationServiceConfiguration serviceConfiguration,                                         </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 588              final AppAuthConfiguration appAuthConfiguration,                                                      </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 589              final String refreshToken,                                                                            </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 590              final String clientId,                                                                                </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 591              final ReadableArray scopes,                                                                           </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 592              final String redirectUrl,                                                                             </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 593              final Map&lt;String, String&gt; additionalParametersMap,                                                    </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 594              final String clientAuthMethod,                                                                        </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 595              final String clientSecret,                                                                            </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 596              final Promise promise                                                                                 </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 597      ) {                                                                                                           </span>
<span  style=""> 598                                                                                                                    </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 599          String scopesString = null;                                                                               </span>
<span  style=""> 600                                                                                                                    </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 601          if (scopes != null) {                                                                                     </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 602              scopesString = this.arrayToString(scopes);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 603          }                                                                                                         </span>
<span  style=""> 604                                                                                                                    </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 605          final Context context = this.reactContext;                                                                </span>
<span  style=""> 606                                                                                                                    </span>
<span class="-1882592220700818910" onmouseenter="enter('-1882592220700818910');" onmouseout="out('-1882592220700818910');" style=""> 607          TokenRequest.Builder tokenRequestBuilder =                                                                </span>
<span class="-7570030938974274508" onmouseenter="enter('-7570030938974274508');" onmouseout="out('-7570030938974274508');" style=""> 608                  new TokenRequest.Builder(                                                                         </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 609                          serviceConfiguration,                                                                     </span>
<span class="-3028793166139754818" onmouseenter="enter('-3028793166139754818');" onmouseout="out('-3028793166139754818');" style=""> 610                          clientId                                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 611                  )                                                                                                 </span>
<span class="5149869235939087614" onmouseenter="enter('5149869235939087614');" onmouseout="out('5149869235939087614');" style=""> 612                          .setRefreshToken(refreshToken)                                                            </span>
<span class="-4168308848344323961" onmouseenter="enter('-4168308848344323961');" onmouseout="out('-4168308848344323961');" style=""> 613                          .setRedirectUri(Uri.parse(redirectUrl));                                                  </span>
<span  style=""> 614                                                                                                                    </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 615          if (scopesString != null) {                                                                               </span>
<span class="-4940100242303343354" onmouseenter="enter('-4940100242303343354');" onmouseout="out('-4940100242303343354');" style=""> 616              tokenRequestBuilder.setScope(scopesString);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 617          }                                                                                                         </span>
<span  style=""> 618                                                                                                                    </span>
<span class="1982926752875631058" onmouseenter="enter('1982926752875631058');" onmouseout="out('1982926752875631058');" style=""> 619          if (!additionalParametersMap.isEmpty()) {                                                                 </span>
<span class="6791703352530289305" onmouseenter="enter('6791703352530289305');" onmouseout="out('6791703352530289305');" style=""> 620              tokenRequestBuilder.setAdditionalParameters(additionalParametersMap);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621          }                                                                                                         </span>
<span  style=""> 622                                                                                                                    </span>
<span class="6300215370198990899" onmouseenter="enter('6300215370198990899');" onmouseout="out('6300215370198990899');" style=""> 623          TokenRequest tokenRequest = tokenRequestBuilder.build();                                                  </span>
<span  style=""> 624                                                                                                                    </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 625          AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);               </span>
<span  style=""> 626                                                                                                                    </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 627          AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 627          AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 628              @Override                                                                                             </span>
<span class="-9019017716153453132" onmouseenter="enter('-9019017716153453132');" onmouseout="out('-9019017716153453132');" style=""><abbr title=" 629              public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationException ex) {"> 629              public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationExceptionðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 630                  if (response != null) {                                                                           </span>
<span class="-4071880271889138129" onmouseenter="enter('-4071880271889138129');" onmouseout="out('-4071880271889138129');" style=""> 631                      WritableMap map = TokenResponseFactory.tokenResponseToMap(response);                          </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 632                      promise.resolve(map);                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 633                  } else {                                                                                          </span>
<span class="-8974399670180994057" onmouseenter="enter('-8974399670180994057');" onmouseout="out('-8974399670180994057');" style=""> 634                      promise.reject(&quot;token_refresh_failed&quot;, getErrorMessage(ex));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 637          };                                                                                                        </span>
<span  style=""> 638                                                                                                                    </span>
<span  style=""> 639                                                                                                                    </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 640          if (clientSecret != null) {                                                                               </span>
<span class="-3955443834186652225" onmouseenter="enter('-3955443834186652225');" onmouseout="out('-3955443834186652225');" style=""> 641              ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethod);       </span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 642              authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);                     </span>
<span  style=""> 643                                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 644          } else {                                                                                                  </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 645              authService.performTokenRequest(tokenRequest, tokenResponseCallback);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647      }                                                                                                             </span>
<span  style=""> 648                                                                                                                    </span>
<span class="2930218534777413873" onmouseenter="enter('2930218534777413873');" onmouseout="out('2930218534777413873');" style=""> 649      private void parseHeaderMap (ReadableMap headerMap) {                                                         </span>
<span class="-6316489241675673035" onmouseenter="enter('-6316489241675673035');" onmouseout="out('-6316489241675673035');" style=""> 650          if (headerMap == null) {                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 651              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652          }                                                                                                         </span>
<span class="5010343160007659678" onmouseenter="enter('5010343160007659678');" onmouseout="out('5010343160007659678');" style=""> 653          if (headerMap.hasKey(&quot;register&quot;) &amp;&amp; headerMap.getType(&quot;register&quot;) == ReadableType.Map) {                  </span>
<span class="-7734955563477546094" onmouseenter="enter('-7734955563477546094');" onmouseout="out('-7734955563477546094');" style=""> 654              this.registrationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;register&quot;));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655          }                                                                                                         </span>
<span class="-8530407112624237580" onmouseenter="enter('-8530407112624237580');" onmouseout="out('-8530407112624237580');" style=""> 656          if (headerMap.hasKey(&quot;authorize&quot;) &amp;&amp; headerMap.getType(&quot;authorize&quot;) == ReadableType.Map) {                </span>
<span class="762039099095363738" onmouseenter="enter('762039099095363738');" onmouseout="out('762039099095363738');" style=""> 657              this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658          }                                                                                                         </span>
<span class="5768179141818569002" onmouseenter="enter('5768179141818569002');" onmouseout="out('5768179141818569002');" style=""> 659          if (headerMap.hasKey(&quot;token&quot;) &amp;&amp; headerMap.getType(&quot;token&quot;) == ReadableType.Map) {                        </span>
<span class="-4870803436115877491" onmouseenter="enter('-4870803436115877491');" onmouseout="out('-4870803436115877491');" style=""> 660              this.tokenRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;token&quot;));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661          }                                                                                                         </span>
<span  style=""> 662                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 663      }                                                                                                             </span>
<span  style=""> 664                                                                                                                    </span>
<span class="-2276636657842571599" onmouseenter="enter('-2276636657842571599');" onmouseout="out('-2276636657842571599');" style=""> 665      private ClientAuthentication getClientAuthentication(String clientSecret, String clientAuthMethod) {          </span>
<span class="4736948393768361142" onmouseenter="enter('4736948393768361142');" onmouseout="out('4736948393768361142');" style=""> 666          if (clientAuthMethod.equals(&quot;post&quot;)) {                                                                    </span>
<span class="4033722210949459980" onmouseenter="enter('4033722210949459980');" onmouseout="out('4033722210949459980');" style=""> 667              return new ClientSecretPost(clientSecret);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 668          }                                                                                                         </span>
<span  style=""> 669                                                                                                                    </span>
<span class="-1107687855860572488" onmouseenter="enter('-1107687855860572488');" onmouseout="out('-1107687855860572488');" style=""> 670          return new ClientSecretBasic(clientSecret);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671      }                                                                                                             </span>
<span  style=""> 672                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 673      /*                                                                                                            </span>
<span class="5090378039448834807" onmouseenter="enter('5090378039448834807');" onmouseout="out('5090378039448834807');" style=""> 674       * Return error information if it is available                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 675       */                                                                                                           </span>
<span class="7325111704754615468" onmouseenter="enter('7325111704754615468');" onmouseout="out('7325111704754615468');" style=""> 676      private String getErrorMessage(AuthorizationException ex){                                                    </span>
<span class="6233744395473659458" onmouseenter="enter('6233744395473659458');" onmouseout="out('6233744395473659458');" style=""> 677          if(ex.errorDescription == null &amp;&amp; ex.error != null)                                                       </span>
<span class="8212520076730053042" onmouseenter="enter('8212520076730053042');" onmouseout="out('8212520076730053042');" style=""> 678              return ex.error;                                                                                      </span>
<span class="-944119096152079377" onmouseenter="enter('-944119096152079377');" onmouseout="out('-944119096152079377');" style=""> 679          return ex.errorDescription;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 680      }                                                                                                             </span>
<span  style=""> 681                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 682      /*                                                                                                            </span>
<span class="6638112631744326921" onmouseenter="enter('6638112631744326921');" onmouseout="out('6638112631744326921');" style=""> 683       * Create a space-delimited string from an array                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 684       */                                                                                                           </span>
<span class="2843730177292313139" onmouseenter="enter('2843730177292313139');" onmouseout="out('2843730177292313139');" style=""> 685      private String arrayToString(ReadableArray array) {                                                           </span>
<span class="-8236782342056480869" onmouseenter="enter('-8236782342056480869');" onmouseout="out('-8236782342056480869');" style=""> 686          StringBuilder strBuilder = new StringBuilder();                                                           </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 687          for (int i = 0; i &lt; array.size(); i++) {                                                                  </span>
<span class="-7800557187785605413" onmouseenter="enter('-7800557187785605413');" onmouseout="out('-7800557187785605413');" style=""> 688              if (i != 0) {                                                                                         </span>
<span class="-4449242394605741248" onmouseenter="enter('-4449242394605741248');" onmouseout="out('-4449242394605741248');" style=""> 689                  strBuilder.append(&#x27; &#x27;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690              }                                                                                                     </span>
<span class="-8205116312766504963" onmouseenter="enter('-8205116312766504963');" onmouseout="out('-8205116312766504963');" style=""> 691              strBuilder.append(array.getString(i));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692          }                                                                                                         </span>
<span class="-7597052729024482685" onmouseenter="enter('-7597052729024482685');" onmouseout="out('-7597052729024482685');" style=""> 693          return strBuilder.toString();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694      }                                                                                                             </span>
<span  style=""> 695                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 696      /*                                                                                                            </span>
<span class="-7672611238824893788" onmouseenter="enter('-7672611238824893788');" onmouseout="out('-7672611238824893788');" style=""> 697       * Create a string list from an array of strings                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 698       */                                                                                                           </span>
<span class="8933886143748191998" onmouseenter="enter('8933886143748191998');" onmouseout="out('8933886143748191998');" style=""> 699      private List&lt;String&gt; arrayToList(ReadableArray array) {                                                       </span>
<span class="3701551209507079484" onmouseenter="enter('3701551209507079484');" onmouseout="out('3701551209507079484');" style=""> 700          ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();                                                               </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 701          for (int i = 0; i &lt; array.size(); i++) {                                                                  </span>
<span class="3110930347141835410" onmouseenter="enter('3110930347141835410');" onmouseout="out('3110930347141835410');" style=""> 702              list.add(array.getString(i));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703          }                                                                                                         </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 704          return list;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705      }                                                                                                             </span>
<span  style=""> 706                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 707      /*                                                                                                            </span>
<span class="4411172121007664287" onmouseenter="enter('4411172121007664287');" onmouseout="out('4411172121007664287');" style=""> 708       * Create a Uri list from an array of strings                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 709       */                                                                                                           </span>
<span class="502202896426029305" onmouseenter="enter('502202896426029305');" onmouseout="out('502202896426029305');" style=""> 710      private List&lt;Uri&gt; arrayToUriList(ReadableArray array) {                                                       </span>
<span class="-8321772486199533839" onmouseenter="enter('-8321772486199533839');" onmouseout="out('-8321772486199533839');" style=""> 711          ArrayList&lt;Uri&gt; list = new ArrayList&lt;&gt;();                                                                  </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 712          for (int i = 0; i &lt; array.size(); i++) {                                                                  </span>
<span class="3593345693160557831" onmouseenter="enter('3593345693160557831');" onmouseout="out('3593345693160557831');" style=""> 713              list.add(Uri.parse(array.getString(i)));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714          }                                                                                                         </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 715          return list;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 716      }                                                                                                             </span>
<span  style=""> 717                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 718      /*                                                                                                            </span>
<span class="5214794569700518887" onmouseenter="enter('5214794569700518887');" onmouseout="out('5214794569700518887');" style=""> 719       * Create an App Auth configuration using the provided connection builder                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 720       */                                                                                                           </span>
<span class="-5342361748775304563" onmouseenter="enter('-5342361748775304563');" onmouseout="out('-5342361748775304563');" style=""> 721      private AppAuthConfiguration createAppAuthConfiguration(ConnectionBuilder connectionBuilder) {                </span>
<span class="-6961363017801118708" onmouseenter="enter('-6961363017801118708');" onmouseout="out('-6961363017801118708');" style=""> 722          return new AppAuthConfiguration                                                                           </span>
<span class="370567544488026574" onmouseenter="enter('370567544488026574');" onmouseout="out('370567544488026574');" style=""> 723                  .Builder()                                                                                        </span>
<span class="6932817517014214209" onmouseenter="enter('6932817517014214209');" onmouseout="out('6932817517014214209');" style=""> 724                  .setConnectionBuilder(connectionBuilder)                                                          </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 725                  .build();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 726      }                                                                                                             </span>
<span  style=""> 727                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 728      /*                                                                                                            </span>
<span class="2307564597312892215" onmouseenter="enter('2307564597312892215');" onmouseout="out('2307564597312892215');" style=""> 729       *  Create appropriate connection builder based on provided settings                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 730       */                                                                                                           </span>
<span class="-266307560690147004" onmouseenter="enter('-266307560690147004');" onmouseout="out('-266307560690147004');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 731 -    private ConnectionBuilder createConnectionBuilder(Boolean allowInsecureConnections, Map&lt;String, String&gt; headers) {"> 731 -    private ConnectionBuilder createConnectionBuilder(Boolean allowInsecureConnections, Map&lt;String, String&gt; headerðŸ”µ</abbr></span>
<span class="-5286170720144338680" onmouseenter="enter('-5286170720144338680');" onmouseout="out('-5286170720144338680');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 732 +    private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, String&gt; headers) {"> 732 +    private ConnectionBuilder createConnectionBuilder(boolean allowInsecureConnections, Map&lt;String, String&gt; headerðŸ”µ</abbr></span>
<span class="7318015076305824949" onmouseenter="enter('7318015076305824949');" onmouseout="out('7318015076305824949');" style=""> 733          ConnectionBuilder proxiedBuilder;                                                                         </span>
<span  style=""> 734                                                                                                                    </span>
<span class="-6214248404965356101" onmouseenter="enter('-6214248404965356101');" onmouseout="out('-6214248404965356101');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 735 -        if (allowInsecureConnections.equals(true)) {                                                              </span>
<span class="6155061091636674075" onmouseenter="enter('6155061091636674075');" onmouseout="out('6155061091636674075');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 736 +        if (allowInsecureConnections) {                                                                           </span>
<span class="-8652069864919613967" onmouseenter="enter('-8652069864919613967');" onmouseout="out('-8652069864919613967');" style=""> 737              proxiedBuilder =UnsafeConnectionBuilder.INSTANCE;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 738          } else {                                                                                                  </span>
<span class="-3823294731313489124" onmouseenter="enter('-3823294731313489124');" onmouseout="out('-3823294731313489124');" style=""> 739              proxiedBuilder = DefaultConnectionBuilder.INSTANCE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 740          }                                                                                                         </span>
<span  style=""> 741                                                                                                                    </span>
<span class="-321326358809916252" onmouseenter="enter('-321326358809916252');" onmouseout="out('-321326358809916252');" style=""> 742          CustomConnectionBuilder customConnection = new CustomConnectionBuilder(proxiedBuilder);                   </span>
<span class="-5872856843685271172" onmouseenter="enter('-5872856843685271172');" onmouseout="out('-5872856843685271172');" style=""> 743          if (headers != null) {                                                                                    </span>
<span class="-4120878389218127223" onmouseenter="enter('-4120878389218127223');" onmouseout="out('-4120878389218127223');" style=""> 744              customConnection.setHeaders(headers);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745          }                                                                                                         </span>
<span  style=""> 746                                                                                                                    </span>
<span class="5629827582834827587" onmouseenter="enter('5629827582834827587');" onmouseout="out('5629827582834827587');" style=""> 747          return customConnection;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 748      }                                                                                                             </span>
<span  style=""> 749                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 750      /*                                                                                                            </span>
<span class="9187662928809351886" onmouseenter="enter('9187662928809351886');" onmouseout="out('9187662928809351886');" style=""> 751       *  Replicated private method from AuthorizationServiceConfiguration                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 752       */                                                                                                           </span>
<span class="2622836649973257205" onmouseenter="enter('2622836649973257205');" onmouseout="out('2622836649973257205');" style=""> 753      private Uri buildConfigurationUriFromIssuer(Uri openIdConnectIssuerUri) {                                     </span>
<span class="-830811466431368071" onmouseenter="enter('-830811466431368071');" onmouseout="out('-830811466431368071');" style=""> 754          return openIdConnectIssuerUri.buildUpon()                                                                 </span>
<span class="7258170423676519924" onmouseenter="enter('7258170423676519924');" onmouseout="out('7258170423676519924');" style=""> 755                  .appendPath(AuthorizationServiceConfiguration.WELL_KNOWN_PATH)                                    </span>
<span class="-3903955623180377764" onmouseenter="enter('-3903955623180377764');" onmouseout="out('-3903955623180377764');" style=""> 756                  .appendPath(AuthorizationServiceConfiguration.OPENID_CONFIGURATION_RESOURCE)                      </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 757                  .build();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 758      }                                                                                                             </span>
<span  style=""> 759                                                                                                                    </span>
<span class="3122274151060887299" onmouseenter="enter('3122274151060887299');" onmouseout="out('3122274151060887299');" style=""><abbr title=" 760      private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguration) throws Exception {"> 760      private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguraðŸ”µ</abbr></span>
<span class="4275545280692735139" onmouseenter="enter('4275545280692735139');" onmouseout="out('4275545280692735139');" style=""> 761          if (!serviceConfiguration.hasKey(&quot;authorizationEndpoint&quot;)) {                                              </span>
<span class="3986521017730318395" onmouseenter="enter('3986521017730318395');" onmouseout="out('3986521017730318395');" style=""> 762              throw new Exception(&quot;serviceConfiguration passed without an authorizationEndpoint&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 763          }                                                                                                         </span>
<span  style=""> 764                                                                                                                    </span>
<span class="5638598812511759739" onmouseenter="enter('5638598812511759739');" onmouseout="out('5638598812511759739');" style=""> 765          if (!serviceConfiguration.hasKey(&quot;tokenEndpoint&quot;)) {                                                      </span>
<span class="7444064849592215652" onmouseenter="enter('7444064849592215652');" onmouseout="out('7444064849592215652');" style=""> 766              throw new Exception(&quot;serviceConfiguration passed without a tokenEndpoint&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 767          }                                                                                                         </span>
<span  style=""> 768                                                                                                                    </span>
<span class="-3941749567598770425" onmouseenter="enter('-3941749567598770425');" onmouseout="out('-3941749567598770425');" style=""> 769          Uri authorizationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;authorizationEndpoint&quot;));           </span>
<span class="4054930865548070446" onmouseenter="enter('4054930865548070446');" onmouseout="out('4054930865548070446');" style=""> 770          Uri tokenEndpoint = Uri.parse(serviceConfiguration.getString(&quot;tokenEndpoint&quot;));                           </span>
<span class="2264343622444418519" onmouseenter="enter('2264343622444418519');" onmouseout="out('2264343622444418519');" style=""> 771          Uri registrationEndpoint = null;                                                                          </span>
<span class="-4970643399788664483" onmouseenter="enter('-4970643399788664483');" onmouseout="out('-4970643399788664483');" style=""> 772          if (serviceConfiguration.hasKey(&quot;registrationEndpoint&quot;)) {                                                </span>
<span class="1609034589288005797" onmouseenter="enter('1609034589288005797');" onmouseout="out('1609034589288005797');" style=""> 773              registrationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;registrationEndpoint&quot;));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 774          }                                                                                                         </span>
<span  style=""> 775                                                                                                                    </span>
<span class="-8455698330779530293" onmouseenter="enter('-8455698330779530293');" onmouseout="out('-8455698330779530293');" style=""> 776          return new AuthorizationServiceConfiguration(                                                             </span>
<span class="-9206356706352718453" onmouseenter="enter('-9206356706352718453');" onmouseout="out('-9206356706352718453');" style=""> 777                  authorizationEndpoint,                                                                            </span>
<span class="-6119344076232034280" onmouseenter="enter('-6119344076232034280');" onmouseout="out('-6119344076232034280');" style=""> 778                  tokenEndpoint,                                                                                    </span>
<span class="-4224958759407269631" onmouseenter="enter('-4224958759407269631');" onmouseout="out('-4224958759407269631');" style=""> 779                  registrationEndpoint                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 780          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781      }                                                                                                             </span>
<span  style=""> 782                                                                                                                    </span>
<span class="-4130257184876230563" onmouseenter="enter('-4130257184876230563');" onmouseout="out('-4130257184876230563');" style=""> 783      private void warmChromeCustomTab(Context context, final String issuer) {                                      </span>
<span class="-4012796735492941375" onmouseenter="enter('-4012796735492941375');" onmouseout="out('-4012796735492941375');" style=""> 784          CustomTabsServiceConnection connection = new CustomTabsServiceConnection() {                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 785              @Override                                                                                             </span>
<span class="4306327880536035079" onmouseenter="enter('4306327880536035079');" onmouseout="out('4306327880536035079');" style=""> 786              public void onCustomTabsServiceConnected(ComponentName name, CustomTabsClient client) {               </span>
<span class="-5035114608817725139" onmouseenter="enter('-5035114608817725139');" onmouseout="out('-5035114608817725139');" style=""> 787                  client.warmup(0);                                                                                 </span>
<span class="5970961959698416627" onmouseenter="enter('5970961959698416627');" onmouseout="out('5970961959698416627');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 788 -                client.newSession(new CustomTabsCallback()).mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;Bundle&gt;emptyList());"> 788 -                client.newSession(new CustomTabsCallback()).mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;BunðŸ”µ</abbr></span>
<span class="-5613023257304239322" onmouseenter="enter('-5613023257304239322');" onmouseout="out('-5613023257304239322');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 789 +                CustomTabsSession session = client.newSession(new CustomTabsCallback());                          </span>
<span class="417819926325380348" onmouseenter="enter('417819926325380348');" onmouseout="out('417819926325380348');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 790 +                if (session == null) {                                                                            </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 791 +                    return;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 792 +                }                                                                                                 </span>
<span class="-5956768039281383269" onmouseenter="enter('-5956768039281383269');" onmouseout="out('-5956768039281383269');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 793 +                session.mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;Bundle&gt;emptyList());                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794              }                                                                                                     </span>
<span  style=""> 795                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 796              @Override                                                                                             </span>
<span class="6231636659664649995" onmouseenter="enter('6231636659664649995');" onmouseout="out('6231636659664649995');" style=""> 797              public void onServiceDisconnected(ComponentName name) {                                               </span>
<span  style=""> 798                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 799              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 800          };                                                                                                        </span>
<span class="5767142201781268255" onmouseenter="enter('5767142201781268255');" onmouseout="out('5767142201781268255');" style=""> 801          CustomTabsClient.bindCustomTabsService(context, CUSTOM_TAB_PACKAGE_NAME, connection);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 802 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 803 +                                                                                                                  </span>
<span class="-1658212530082885279" onmouseenter="enter('-1658212530082885279');" onmouseout="out('-1658212530082885279');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 804 +    private boolean hasServiceConfiguration(@Nullable String issuer) {                                            </span>
<span class="3142036358572061785" onmouseenter="enter('3142036358572061785');" onmouseout="out('3142036358572061785');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 805 +        return issuer != null &amp;&amp; mServiceConfigurations.containsKey(issuer);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 806 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 807 +                                                                                                                  </span>
<span class="4451430102422208639" onmouseenter="enter('4451430102422208639');" onmouseout="out('4451430102422208639');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 808 +    private AuthorizationServiceConfiguration getServiceConfiguration(@Nullable String issuer) {                  </span>
<span class="5076090829869343760" onmouseenter="enter('5076090829869343760');" onmouseout="out('5076090829869343760');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 809 +        if (issuer == null) {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 810 +            return null;                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 811 +        } else {                                                                                                  </span>
<span class="-3187761823116610672" onmouseenter="enter('-3187761823116610672');" onmouseout="out('-3187761823116610672');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 812 +            return mServiceConfigurations.get(issuer);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 813 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 814 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 815 +                                                                                                                  </span>
<span class="1347888294933903664" onmouseenter="enter('1347888294933903664');" onmouseout="out('1347888294933903664');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 816 +    private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviceConfiguration) {"> 816 +    private void setServiceConfiguration(@Nullable String issuer, AuthorizationServiceConfiguration serviceConfiguðŸ”µ</abbr></span>
<span class="-2487039014584680663" onmouseenter="enter('-2487039014584680663');" onmouseout="out('-2487039014584680663');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 817 +        if (issuer != null) {                                                                                     </span>
<span class="-69747729719258596" onmouseenter="enter('-69747729719258596');" onmouseout="out('-69747729719258596');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 818 +            mServiceConfigurations.put(issuer, serviceConfiguration);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 819 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 820      }                                                                                                             </span>
<span  style=""> 821                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 822      @Override                                                                                                     </span>
<span class="-4337880705383881802" onmouseenter="enter('-4337880705383881802');" onmouseout="out('-4337880705383881802');" style=""> 823      public void onNewIntent(Intent intent) {                                                                      </span>
<span  style=""> 824                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 825      }                                                                                                             </span>
<span  style=""> 826                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 827      @Override                                                                                                     </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style=""> 828      public String getName() {                                                                                     </span>
<span class="4315075324919368681" onmouseenter="enter('4315075324919368681');" onmouseout="out('4315075324919368681');" style=""> 829          return &quot;RNAppAuth&quot;;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 830      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 831  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="-6280296900167357794" onmouseenter="enter('-6280296900167357794');" onmouseout="out('-6280296900167357794');" style="">   1  package com.rnappauth;                                                                                            </span>
<span  style="">   2                                                                                                                    </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">   3  import android.app.Activity;                                                                                      </span>
<span class="2265467446931963889" onmouseenter="enter('2265467446931963889');" onmouseout="out('2265467446931963889');" style="">   4  import android.app.PendingIntent;                                                                                 </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">   5  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">   6  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">   7  import android.content.Intent;                                                                                    </span>
<span class="-8750621697125156872" onmouseenter="enter('-8750621697125156872');" onmouseout="out('-8750621697125156872');" style="">   8  import android.net.Uri;                                                                                           </span>
<span class="8096531590004379472" onmouseenter="enter('8096531590004379472');" onmouseout="out('8096531590004379472');" style="">   9  import android.os.Bundle;                                                                                         </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  10  import android.content.ActivityNotFoundException;                                                                 </span>
<span class="-6436154409168942626" onmouseenter="enter('-6436154409168942626');" onmouseout="out('-6436154409168942626');" style="">  11  import androidx.annotation.Nullable;                                                                              </span>
<span class="-4621922491292668474" onmouseenter="enter('-4621922491292668474');" onmouseout="out('-4621922491292668474');" style="">  12  import androidx.browser.customtabs.CustomTabsCallback;                                                            </span>
<span class="5786009149739133921" onmouseenter="enter('5786009149739133921');" onmouseout="out('5786009149739133921');" style="">  13  import androidx.browser.customtabs.CustomTabsClient;                                                              </span>
<span class="6730446154443378273" onmouseenter="enter('6730446154443378273');" onmouseout="out('6730446154443378273');" style="">  14  import androidx.browser.customtabs.CustomTabsServiceConnection;                                                   </span>

<span  style="">  15                                                                                                                    </span>
<span class="7327608205307094785" onmouseenter="enter('7327608205307094785');" onmouseout="out('7327608205307094785');" style="">  16  import com.facebook.react.bridge.ActivityEventListener;                                                           </span>
<span class="1744055796152404290" onmouseenter="enter('1744055796152404290');" onmouseout="out('1744055796152404290');" style="">  17  import com.facebook.react.bridge.ReactApplicationContext;                                                         </span>
<span class="7756046764634890677" onmouseenter="enter('7756046764634890677');" onmouseout="out('7756046764634890677');" style="">  18  import com.facebook.react.bridge.ReactContextBaseJavaModule;                                                      </span>
<span class="-7062843866366665780" onmouseenter="enter('-7062843866366665780');" onmouseout="out('-7062843866366665780');" style="">  19  import com.facebook.react.bridge.ReactMethod;                                                                     </span>
<span class="-9114944870765420144" onmouseenter="enter('-9114944870765420144');" onmouseout="out('-9114944870765420144');" style="">  20  import com.facebook.react.bridge.Promise;                                                                         </span>
<span class="3666939786570277423" onmouseenter="enter('3666939786570277423');" onmouseout="out('3666939786570277423');" style="">  21  import com.facebook.react.bridge.ReadableArray;                                                                   </span>
<span class="5552486474970006352" onmouseenter="enter('5552486474970006352');" onmouseout="out('5552486474970006352');" style="">  22  import com.facebook.react.bridge.ReadableMap;                                                                     </span>
<span class="-2689054124168074705" onmouseenter="enter('-2689054124168074705');" onmouseout="out('-2689054124168074705');" style="">  23  import com.facebook.react.bridge.WritableMap;                                                                     </span>
<span class="7507448895670758430" onmouseenter="enter('7507448895670758430');" onmouseout="out('7507448895670758430');" style="">  24  import com.facebook.react.bridge.ReadableType;                                                                    </span>
<span  style="">  25                                                                                                                    </span>
<span class="2824452556317040091" onmouseenter="enter('2824452556317040091');" onmouseout="out('2824452556317040091');" style="">  26  import com.rnappauth.utils.MapUtil;                                                                               </span>
<span class="2320112657500195094" onmouseenter="enter('2320112657500195094');" onmouseout="out('2320112657500195094');" style="">  27  import com.rnappauth.utils.UnsafeConnectionBuilder;                                                               </span>
<span class="6146867944265222634" onmouseenter="enter('6146867944265222634');" onmouseout="out('6146867944265222634');" style="">  28  import com.rnappauth.utils.RegistrationResponseFactory;                                                           </span>
<span class="5385195114029684108" onmouseenter="enter('5385195114029684108');" onmouseout="out('5385195114029684108');" style="">  29  import com.rnappauth.utils.TokenResponseFactory;                                                                  </span>
<span class="-7309342380344421476" onmouseenter="enter('-7309342380344421476');" onmouseout="out('-7309342380344421476');" style="">  30  import com.rnappauth.utils.CustomConnectionBuilder;                                                               </span>
<span  style="">  31                                                                                                                    </span>
<span class="2084880808431135122" onmouseenter="enter('2084880808431135122');" onmouseout="out('2084880808431135122');" style="">  32  import net.openid.appauth.AppAuthConfiguration;                                                                   </span>
<span class="-6153791587225110013" onmouseenter="enter('-6153791587225110013');" onmouseout="out('-6153791587225110013');" style="">  33  import net.openid.appauth.AuthorizationException;                                                                 </span>
<span class="220855730882953420" onmouseenter="enter('220855730882953420');" onmouseout="out('220855730882953420');" style="">  34  import net.openid.appauth.AuthorizationRequest;                                                                   </span>
<span class="3507212550601358175" onmouseenter="enter('3507212550601358175');" onmouseout="out('3507212550601358175');" style="">  35  import net.openid.appauth.AuthorizationResponse;                                                                  </span>
<span class="6486087234581123017" onmouseenter="enter('6486087234581123017');" onmouseout="out('6486087234581123017');" style="">  36  import net.openid.appauth.AuthorizationService;                                                                   </span>
<span class="-1918380963859750931" onmouseenter="enter('-1918380963859750931');" onmouseout="out('-1918380963859750931');" style="">  37  import net.openid.appauth.AuthorizationServiceConfiguration;                                                      </span>
<span class="-1745886087889911862" onmouseenter="enter('-1745886087889911862');" onmouseout="out('-1745886087889911862');" style="">  38  import net.openid.appauth.ClientAuthentication;                                                                   </span>
<span class="5802881313983385714" onmouseenter="enter('5802881313983385714');" onmouseout="out('5802881313983385714');" style="">  39  import net.openid.appauth.ClientSecretBasic;                                                                      </span>
<span class="6044047429679939107" onmouseenter="enter('6044047429679939107');" onmouseout="out('6044047429679939107');" style="">  40  import net.openid.appauth.ClientSecretPost;                                                                       </span>
<span class="2300124290120821674" onmouseenter="enter('2300124290120821674');" onmouseout="out('2300124290120821674');" style="">  41  import net.openid.appauth.RegistrationRequest;                                                                    </span>
<span class="8892208418569385403" onmouseenter="enter('8892208418569385403');" onmouseout="out('8892208418569385403');" style="">  42  import net.openid.appauth.RegistrationResponse;                                                                   </span>
<span class="-7057741429751790751" onmouseenter="enter('-7057741429751790751');" onmouseout="out('-7057741429751790751');" style="">  43  import net.openid.appauth.ResponseTypeValues;                                                                     </span>
<span class="7041795251639894294" onmouseenter="enter('7041795251639894294');" onmouseout="out('7041795251639894294');" style="">  44  import net.openid.appauth.TokenResponse;                                                                          </span>
<span class="4423191746780431402" onmouseenter="enter('4423191746780431402');" onmouseout="out('4423191746780431402');" style="">  45  import net.openid.appauth.TokenRequest;                                                                           </span>
<span class="-5344047661436712974" onmouseenter="enter('-5344047661436712974');" onmouseout="out('-5344047661436712974');" style="">  46  import net.openid.appauth.connectivity.ConnectionBuilder;                                                         </span>
<span class="2682978576506672064" onmouseenter="enter('2682978576506672064');" onmouseout="out('2682978576506672064');" style="">  47  import net.openid.appauth.connectivity.DefaultConnectionBuilder;                                                  </span>
<span  style="">  48                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  49  import java.util.ArrayList;                                                                                       </span>
<span class="2187055016371707860" onmouseenter="enter('2187055016371707860');" onmouseout="out('2187055016371707860');" style="">  50  import java.util.Collections;                                                                                     </span>
<span class="4169599896190320038" onmouseenter="enter('4169599896190320038');" onmouseout="out('4169599896190320038');" style="">  51  import java.util.HashMap;                                                                                         </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  52  import java.util.List;                                                                                            </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  53  import java.util.Map;                                                                                             </span>
<span class="1679953027169218497" onmouseenter="enter('1679953027169218497');" onmouseout="out('1679953027169218497');" style="">  54  import java.util.concurrent.atomic.AtomicReference;                                                               </span>

<span class="6937050046386248317" onmouseenter="enter('6937050046386248317');" onmouseout="out('6937050046386248317');" style="">  55  import java.util.concurrent.CountDownLatch;                                                                       </span>
<span  style="">  56                                                                                                                    </span>
<span class="6575769426762835403" onmouseenter="enter('6575769426762835403');" onmouseout="out('6575769426762835403');" style="">  57  public class RNAppAuthModule extends ReactContextBaseJavaModule implements ActivityEventListener {                </span>
<span  style="">  58                                                                                                                    </span>
<span class="8401162781518473365" onmouseenter="enter('8401162781518473365');" onmouseout="out('8401162781518473365');" style="">  59      public static final String CUSTOM_TAB_PACKAGE_NAME = &quot;com.android.chrome&quot;;                                    </span>
<span  style="">  60                                                                                                                    </span>
<span class="6180419538961108965" onmouseenter="enter('6180419538961108965');" onmouseout="out('6180419538961108965');" style="">  61      private final ReactApplicationContext reactContext;                                                           </span>
<span class="1869321332520936904" onmouseenter="enter('1869321332520936904');" onmouseout="out('1869321332520936904');" style="">  62      private Promise promise;                                                                                      </span>
<span class="504355591559206068" onmouseenter="enter('504355591559206068');" onmouseout="out('504355591559206068');" style="">  63      private Boolean dangerouslyAllowInsecureHttpRequests;                                                         </span>
<span class="3709939774236496336" onmouseenter="enter('3709939774236496336');" onmouseout="out('3709939774236496336');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +    private Boolean skipCodeExchange;                                                                             </span>
<span class="6877933566748299598" onmouseenter="enter('6877933566748299598');" onmouseout="out('6877933566748299598');" style="">  65      private String clientAuthMethod = &quot;basic&quot;;                                                                    </span>
<span class="-9158722382120219449" onmouseenter="enter('-9158722382120219449');" onmouseout="out('-9158722382120219449');" style="">  66      private Map&lt;String, String&gt; registrationRequestHeaders = null;                                                </span>
<span class="5073960437150900627" onmouseenter="enter('5073960437150900627');" onmouseout="out('5073960437150900627');" style="">  67      private Map&lt;String, String&gt; authorizationRequestHeaders = null;                                               </span>
<span class="493655431939084947" onmouseenter="enter('493655431939084947');" onmouseout="out('493655431939084947');" style="">  68      private Map&lt;String, String&gt; tokenRequestHeaders = null;                                                       </span>
<span class="4071237130655105462" onmouseenter="enter('4071237130655105462');" onmouseout="out('4071237130655105462');" style="">  69      private Map&lt;String, String&gt; additionalParametersMap;                                                          </span>
<span class="266383520389269247" onmouseenter="enter('266383520389269247');" onmouseout="out('266383520389269247');" style="">  70      private String clientSecret;                                                                                  </span>
<span class="-2587280928065129913" onmouseenter="enter('-2587280928065129913');" onmouseout="out('-2587280928065129913');" style=""><abbr title="  71      private final AtomicReference&lt;AuthorizationServiceConfiguration&gt; mServiceConfiguration = new AtomicReference&lt;&gt;();">  71      private final AtomicReference&lt;AuthorizationServiceConfiguration&gt; mServiceConfiguration = new AtomicReference&lt;&gt;ðŸ”µ</abbr></span>

<span class="-7004558742358285463" onmouseenter="enter('-7004558742358285463');" onmouseout="out('-7004558742358285463');" style="">  72      private boolean isPrefetched = false;                                                                         </span>
<span  style="">  73                                                                                                                    </span>
<span class="-978447563967948693" onmouseenter="enter('-978447563967948693');" onmouseout="out('-978447563967948693');" style="">  74      public RNAppAuthModule(ReactApplicationContext reactContext) {                                                </span>
<span class="-1443603959286428543" onmouseenter="enter('-1443603959286428543');" onmouseout="out('-1443603959286428543');" style="">  75          super(reactContext);                                                                                      </span>
<span class="3003228313870805798" onmouseenter="enter('3003228313870805798');" onmouseout="out('3003228313870805798');" style="">  76          this.reactContext = reactContext;                                                                         </span>
<span class="6669990586656871028" onmouseenter="enter('6669990586656871028');" onmouseout="out('6669990586656871028');" style="">  77          reactContext.addActivityEventListener(this);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  78      }                                                                                                             </span>
<span  style="">  79                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style="">  80      @ReactMethod                                                                                                  </span>
<span class="-5002037316527958427" onmouseenter="enter('-5002037316527958427');" onmouseout="out('-5002037316527958427');" style="">  81      public void prefetchConfiguration(                                                                            </span>
<span class="-8094929847941500576" onmouseenter="enter('-8094929847941500576');" onmouseout="out('-8094929847941500576');" style="">  82          final Boolean warmAndPrefetchChrome,                                                                      </span>
<span class="-1461695631126767390" onmouseenter="enter('-1461695631126767390');" onmouseout="out('-1461695631126767390');" style="">  83          final String issuer,                                                                                      </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style="">  84          final String redirectUrl,                                                                                 </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style="">  85          final String clientId,                                                                                    </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style="">  86          final ReadableArray scopes,                                                                               </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style="">  87          final ReadableMap serviceConfiguration,                                                                   </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style="">  88          final Boolean dangerouslyAllowInsecureHttpRequests,                                                       </span>

<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style="">  89          final ReadableMap headers,                                                                                </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style="">  90          final Promise promise                                                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style="">  91      ) {                                                                                                           </span>
<span class="-7526945842846133690" onmouseenter="enter('-7526945842846133690');" onmouseout="out('-7526945842846133690');" style="">  92          if (warmAndPrefetchChrome) {                                                                              </span>
<span class="8703515971997686923" onmouseenter="enter('8703515971997686923');" onmouseout="out('8703515971997686923');" style="">  93              warmChromeCustomTab(reactContext, issuer);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  94          }                                                                                                         </span>
<span  style="">  95                                                                                                                    </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style="">  96          this.parseHeaderMap(headers);                                                                             </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title="  97          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);">  97          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authoðŸ”µ</abbr></span>
<span class="8517032726698162354" onmouseenter="enter('8517032726698162354');" onmouseout="out('8517032726698162354');" style="">  98          final CountDownLatch fetchConfigurationLatch = new CountDownLatch(1);                                     </span>
<span  style="">  99                                                                                                                    </span>
<span class="-7471939844701867604" onmouseenter="enter('-7471939844701867604');" onmouseout="out('-7471939844701867604');" style=""> 100          if(!isPrefetched) {                                                                                       </span>
<span class="-8580903789630998000" onmouseenter="enter('-8580903789630998000');" onmouseout="out('-8580903789630998000');" style=""> 101              if (serviceConfiguration != null &amp;&amp; mServiceConfiguration.get() == null) {                            </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 102                  try {                                                                                             </span>
<span class="-5277191699256196698" onmouseenter="enter('-5277191699256196698');" onmouseout="out('-5277191699256196698');" style=""> 103                      mServiceConfiguration.set(createAuthorizationServiceConfiguration(serviceConfiguration));     </span>

<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 104                      isPrefetched = true;                                                                          </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 105                      fetchConfigurationLatch.countDown();                                                          </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 106                  } catch (Exception e) {                                                                           </span>
<span class="6809300863683709814" onmouseenter="enter('6809300863683709814');" onmouseout="out('6809300863683709814');" style=""> 107                      promise.reject(&quot;configuration_error&quot;, &quot;Failed to convert serviceConfiguration&quot;, e);           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108                  }                                                                                                 </span>
<span class="7986155546390017313" onmouseenter="enter('7986155546390017313');" onmouseout="out('7986155546390017313');" style=""> 109              } else if (mServiceConfiguration.get() == null) {                                                     </span>

<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 110                  final Uri issuerUri = Uri.parse(issuer);                                                          </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 111                  AuthorizationServiceConfiguration.fetchFromUrl(                                                   </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 112                          buildConfigurationUriFromIssuer(issuerUri),                                               </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 113                          new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                   </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 114                              public void onFetchConfigurationCompleted(                                            </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 115                                      @Nullable AuthorizationServiceConfiguration fetchedConfiguration,             </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 116                                      @Nullable AuthorizationException ex) {                                        </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 117                                  if (ex != null) {                                                                 </span>
<span class="6863513032854295921" onmouseenter="enter('6863513032854295921');" onmouseout="out('6863513032854295921');" style=""><abbr title=" 118                                      promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuration&quot;, ex);"> 118                                      promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to fetch configuraðŸ”µ</abbr></span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 119                                      return;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120                                  }                                                                                 </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style=""> 121                                  mServiceConfiguration.set(fetchedConfiguration);                                  </span>

<span class="-3756484855427077276" onmouseenter="enter('-3756484855427077276');" onmouseout="out('-3756484855427077276');" style=""> 122                                  isPrefetched = true;                                                              </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 123                                  fetchConfigurationLatch.countDown();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124                              }                                                                                     </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 125                          },                                                                                        </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 126                          builder                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 127                  );                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 129          } else {                                                                                                  </span>
<span class="-4438200880561083184" onmouseenter="enter('-4438200880561083184');" onmouseout="out('-4438200880561083184');" style=""> 130              fetchConfigurationLatch.countDown();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131          }                                                                                                         </span>
<span  style=""> 132                                                                                                                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 133          try {                                                                                                     </span>
<span class="-1907621811022997860" onmouseenter="enter('-1907621811022997860');" onmouseout="out('-1907621811022997860');" style=""> 134              fetchConfigurationLatch.await();                                                                      </span>
<span class="1954864242125272611" onmouseenter="enter('1954864242125272611');" onmouseout="out('1954864242125272611');" style=""> 135              promise.resolve(isPrefetched);                                                                        </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 136          } catch (Exception e) {                                                                                   </span>
<span class="1768900707370095440" onmouseenter="enter('1768900707370095440');" onmouseout="out('1768900707370095440');" style=""> 137              promise.reject(&quot;service_configuration_fetch_error&quot;, &quot;Failed to await fetch configuration&quot;, e);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139      }                                                                                                             </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 141      @ReactMethod                                                                                                  </span>
<span class="6906647419500618265" onmouseenter="enter('6906647419500618265');" onmouseout="out('6906647419500618265');" style=""> 142      public void register(                                                                                         </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 143          String issuer,                                                                                            </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 144          final ReadableArray redirectUris,                                                                         </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 145          final ReadableArray responseTypes,                                                                        </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 146          final ReadableArray grantTypes,                                                                           </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 147          final String subjectType,                                                                                 </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 148          final String tokenEndpointAuthMethod,                                                                     </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 149          final ReadableMap additionalParameters,                                                                   </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 150          final ReadableMap serviceConfiguration,                                                                   </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style=""> 151          final Boolean dangerouslyAllowInsecureHttpRequests,                                                       </span>

<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 152          final ReadableMap headers,                                                                                </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 153          final Promise promise                                                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 154      ) {                                                                                                           </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 155          this.parseHeaderMap(headers);                                                                             </span>
<span class="263301671464505834" onmouseenter="enter('263301671464505834');" onmouseout="out('263301671464505834');" style=""><abbr title=" 156          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.registrationRequestHeaders);"> 156          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.regisðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 157          final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);               </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 158          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 158          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters)ðŸ”µ</abbr></span>
<span  style=""> 159                                                                                                                    </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""> 160          // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint       </span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style=""> 161          if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                                </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 162              try {                                                                                                 </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style=""><abbr title=" 163                  final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 163                  final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mSerðŸ”µ</abbr></span>

<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 164                  registerWithConfiguration(                                                                        </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 165                          serviceConfig,                                                                            </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 166                          appAuthConfiguration,                                                                     </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 167                          redirectUris,                                                                             </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 168                          responseTypes,                                                                            </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 169                          grantTypes,                                                                               </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 170                          subjectType,                                                                              </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 171                          tokenEndpointAuthMethod,                                                                  </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 172                          additionalParametersMap,                                                                  </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 173                          promise                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 174                  );                                                                                                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 175              } catch (Exception e) {                                                                               </span>
<span class="-4765268916451052755" onmouseenter="enter('-4765268916451052755');" onmouseout="out('-4765268916451052755');" style=""> 176                  promise.reject(&quot;registration_failed&quot;, e.getMessage());                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 178          } else {                                                                                                  </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 179              final Uri issuerUri = Uri.parse(issuer);                                                              </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 180              AuthorizationServiceConfiguration.fetchFromUrl(                                                       </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 181                      buildConfigurationUriFromIssuer(issuerUri),                                                   </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 182                      new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                       </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 183                          public void onFetchConfigurationCompleted(                                                </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 184                                  @Nullable AuthorizationServiceConfiguration fetchedConfiguration,                 </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 185                                  @Nullable AuthorizationException ex) {                                            </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 186                              if (ex != null) {                                                                     </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 187                                  promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 188                                  return;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189                              }                                                                                     </span>
<span  style=""> 190                                                                                                                    </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style=""> 191                              mServiceConfiguration.set(fetchedConfiguration);                                      </span>

<span  style=""> 192                                                                                                                    </span>
<span class="607024505122841752" onmouseenter="enter('607024505122841752');" onmouseout="out('607024505122841752');" style=""> 193                              registerWithConfiguration(                                                            </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 194                                      fetchedConfiguration,                                                         </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 195                                      appAuthConfiguration,                                                         </span>
<span class="4837213713735678448" onmouseenter="enter('4837213713735678448');" onmouseout="out('4837213713735678448');" style=""> 196                                      redirectUris,                                                                 </span>
<span class="-5911503619191484595" onmouseenter="enter('-5911503619191484595');" onmouseout="out('-5911503619191484595');" style=""> 197                                      responseTypes,                                                                </span>
<span class="8927070234415827429" onmouseenter="enter('8927070234415827429');" onmouseout="out('8927070234415827429');" style=""> 198                                      grantTypes,                                                                   </span>
<span class="4417112763894614838" onmouseenter="enter('4417112763894614838');" onmouseout="out('4417112763894614838');" style=""> 199                                      subjectType,                                                                  </span>
<span class="-7546364623540802897" onmouseenter="enter('-7546364623540802897');" onmouseout="out('-7546364623540802897');" style=""> 200                                      tokenEndpointAuthMethod,                                                      </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 201                                      additionalParametersMap,                                                      </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 202                                      promise                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 203                              );                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204                          }                                                                                         </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 205                      },                                                                                            </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 206                      builder);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208      }                                                                                                             </span>
<span  style=""> 209                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 210      @ReactMethod                                                                                                  </span>
<span class="7303195633629033586" onmouseenter="enter('7303195633629033586');" onmouseout="out('7303195633629033586');" style=""> 211      public void authorize(                                                                                        </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 212              String issuer,                                                                                        </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 213              final String redirectUrl,                                                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 214              final String clientId,                                                                                </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 215              final String clientSecret,                                                                            </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 216              final ReadableArray scopes,                                                                           </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 217              final ReadableMap additionalParameters,                                                               </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 218              final ReadableMap serviceConfiguration,                                                               </span>
<span class="7042841519757427836" onmouseenter="enter('7042841519757427836');" onmouseout="out('7042841519757427836');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +            final Boolean skipCodeExchange,                                                                       </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 220              final Boolean usePKCE,                                                                                </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 221              final String clientAuthMethod,                                                                        </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style=""> 222              final Boolean dangerouslyAllowInsecureHttpRequests,                                                   </span>

<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 223              final ReadableMap headers,                                                                            </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 224              final Promise promise                                                                                 </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 225      ) {                                                                                                           </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 226          this.parseHeaderMap(headers);                                                                             </span>
<span class="7643190933574465169" onmouseenter="enter('7643190933574465169');" onmouseout="out('7643190933574465169');" style=""><abbr title=" 227          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authorizationRequestHeaders);"> 227          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.authoðŸ”µ</abbr></span>
<span class="3019383581923708916" onmouseenter="enter('3019383581923708916');" onmouseout="out('3019383581923708916');" style=""> 228          final AppAuthConfiguration appAuthConfiguration = this.createAppAuthConfiguration(builder);               </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 229          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 229          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters)ðŸ”µ</abbr></span>
<span  style=""> 230                                                                                                                    </span>
<span class="5192680332872896216" onmouseenter="enter('5192680332872896216');" onmouseout="out('5192680332872896216');" style=""> 231          // store args in private fields for later use in onActivityResult handler                                 </span>
<span class="-4922073825750036997" onmouseenter="enter('-4922073825750036997');" onmouseout="out('-4922073825750036997');" style=""> 232          this.promise = promise;                                                                                   </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 233          this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                         </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 234          this.additionalParametersMap = additionalParametersMap;                                                   </span>
<span class="-8734683050201249921" onmouseenter="enter('-8734683050201249921');" onmouseout="out('-8734683050201249921');" style=""> 235          this.clientSecret = clientSecret;                                                                         </span>
<span class="3270519662544404418" onmouseenter="enter('3270519662544404418');" onmouseout="out('3270519662544404418');" style=""> 236          this.clientAuthMethod = clientAuthMethod;                                                                 </span>
<span class="2527862308639794492" onmouseenter="enter('2527862308639794492');" onmouseout="out('2527862308639794492');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +        this.skipCodeExchange = skipCodeExchange;                                                                 </span>
<span  style=""> 238                                                                                                                    </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""> 239          // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint       </span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style=""> 240          if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                                </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 241              try {                                                                                                 </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style=""><abbr title=" 242                  final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 242                  final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mSerðŸ”µ</abbr></span>

<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style=""> 243                  authorizeWithConfiguration(                                                                       </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 244                          serviceConfig,                                                                            </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 245                          appAuthConfiguration,                                                                     </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 246                          clientId,                                                                                 </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 247                          scopes,                                                                                   </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 248                          redirectUrl,                                                                              </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style=""> 249                          usePKCE,                                                                                  </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style=""> 250                          additionalParametersMap                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 251                  );                                                                                                </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 252              } catch (ActivityNotFoundException e) {                                                               </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 253                  promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 254              } catch (Exception e) {                                                                               </span>
<span class="-3857326443207234519" onmouseenter="enter('-3857326443207234519');" onmouseout="out('-3857326443207234519');" style=""> 255                  promise.reject(&quot;authentication_failed&quot;, e.getMessage());                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 257          } else {                                                                                                  </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 258              final Uri issuerUri = Uri.parse(issuer);                                                              </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 259              AuthorizationServiceConfiguration.fetchFromUrl(                                                       </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 260                      buildConfigurationUriFromIssuer(issuerUri),                                                   </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 261                      new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                       </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 262                          public void onFetchConfigurationCompleted(                                                </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 263                                  @Nullable AuthorizationServiceConfiguration fetchedConfiguration,                 </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 264                                  @Nullable AuthorizationException ex) {                                            </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 265                              if (ex != null) {                                                                     </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 266                                  promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 267                                  return;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268                              }                                                                                     </span>
<span  style=""> 269                                                                                                                    </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style=""> 270                              mServiceConfiguration.set(fetchedConfiguration);                                      </span>

<span  style=""> 271                                                                                                                    </span>
<span class="-1486526546209877526" onmouseenter="enter('-1486526546209877526');" onmouseout="out('-1486526546209877526');" style=""> 272                              authorizeWithConfiguration(                                                           </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 273                                      fetchedConfiguration,                                                         </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 274                                      appAuthConfiguration,                                                         </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 275                                      clientId,                                                                     </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 276                                      scopes,                                                                       </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 277                                      redirectUrl,                                                                  </span>
<span class="-6035018429398733383" onmouseenter="enter('-6035018429398733383');" onmouseout="out('-6035018429398733383');" style=""> 278                                      usePKCE,                                                                      </span>
<span class="2881611988086822402" onmouseenter="enter('2881611988086822402');" onmouseout="out('2881611988086822402');" style=""> 279                                      additionalParametersMap                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 280                              );                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281                          }                                                                                         </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 282                      },                                                                                            </span>
<span class="-6127323510460163099" onmouseenter="enter('-6127323510460163099');" onmouseout="out('-6127323510460163099');" style=""> 283                      builder                                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 284              );                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285          }                                                                                                         </span>
<span  style=""> 286                                                                                                                    </span>
<span  style=""> 287                                                                                                                    </span>
<span  style=""> 288                                                                                                                    </span>
<span  style=""> 289                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290      }                                                                                                             </span>
<span  style=""> 291                                                                                                                    </span>
<span class="-141978935869821236" onmouseenter="enter('-141978935869821236');" onmouseout="out('-141978935869821236');" style=""> 292      @ReactMethod                                                                                                  </span>
<span class="-5238780499530126703" onmouseenter="enter('-5238780499530126703');" onmouseout="out('-5238780499530126703');" style=""> 293      public void refresh(                                                                                          </span>
<span class="-6582977741210267495" onmouseenter="enter('-6582977741210267495');" onmouseout="out('-6582977741210267495');" style=""> 294              String issuer,                                                                                        </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 295              final String redirectUrl,                                                                             </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 296              final String clientId,                                                                                </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 297              final String clientSecret,                                                                            </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 298              final String refreshToken,                                                                            </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 299              final ReadableArray scopes,                                                                           </span>
<span class="-3845296448405000192" onmouseenter="enter('-3845296448405000192');" onmouseout="out('-3845296448405000192');" style=""> 300              final ReadableMap additionalParameters,                                                               </span>
<span class="194155253776521026" onmouseenter="enter('194155253776521026');" onmouseout="out('194155253776521026');" style=""> 301              final ReadableMap serviceConfiguration,                                                               </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 302              final String clientAuthMethod,                                                                        </span>
<span class="1508394136448727590" onmouseenter="enter('1508394136448727590');" onmouseout="out('1508394136448727590');" style=""> 303              final Boolean dangerouslyAllowInsecureHttpRequests,                                                   </span>

<span class="7766530789087763454" onmouseenter="enter('7766530789087763454');" onmouseout="out('7766530789087763454');" style=""> 304              final ReadableMap headers,                                                                            </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 305              final Promise promise                                                                                 </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 306      ) {                                                                                                           </span>
<span class="-4919309082518309682" onmouseenter="enter('-4919309082518309682');" onmouseout="out('-4919309082518309682');" style=""> 307          this.parseHeaderMap(headers);                                                                             </span>
<span class="5750510513523473374" onmouseenter="enter('5750510513523473374');" onmouseout="out('5750510513523473374');" style=""><abbr title=" 308          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders);"> 308          final ConnectionBuilder builder = createConnectionBuilder(dangerouslyAllowInsecureHttpRequests, this.tokenðŸ”µ</abbr></span>
<span class="-7964591588332866161" onmouseenter="enter('-7964591588332866161');" onmouseout="out('-7964591588332866161');" style=""> 309          final AppAuthConfiguration appAuthConfiguration = createAppAuthConfiguration(builder);                    </span>
<span class="-7109956500539147060" onmouseenter="enter('-7109956500539147060');" onmouseout="out('-7109956500539147060');" style=""><abbr title=" 310          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters);"> 310          final HashMap&lt;String, String&gt; additionalParametersMap = MapUtil.readableMapToHashMap(additionalParameters)ðŸ”µ</abbr></span>
<span  style=""> 311                                                                                                                    </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 312          if (clientSecret != null) {                                                                               </span>
<span class="-5682406089270036260" onmouseenter="enter('-5682406089270036260');" onmouseout="out('-5682406089270036260');" style=""> 313              additionalParametersMap.put(&quot;client_secret&quot;, clientSecret);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 314          }                                                                                                         </span>
<span  style=""> 315                                                                                                                    </span>
<span class="1495748746185505707" onmouseenter="enter('1495748746185505707');" onmouseout="out('1495748746185505707');" style=""> 316          // store setting in private field for later use in onActivityResult handler                               </span>
<span class="3480277836983128979" onmouseenter="enter('3480277836983128979');" onmouseout="out('3480277836983128979');" style=""> 317          this.dangerouslyAllowInsecureHttpRequests = dangerouslyAllowInsecureHttpRequests;                         </span>
<span class="5634104765560395766" onmouseenter="enter('5634104765560395766');" onmouseout="out('5634104765560395766');" style=""> 318          this.additionalParametersMap = additionalParametersMap;                                                   </span>
<span  style=""> 319                                                                                                                    </span>
<span class="2931665236381026116" onmouseenter="enter('2931665236381026116');" onmouseout="out('2931665236381026116');" style=""> 320          // when serviceConfiguration is provided, we don&#x27;t need to hit up the OpenID well-known id endpoint       </span>
<span class="-4807753295584445622" onmouseenter="enter('-4807753295584445622');" onmouseout="out('-4807753295584445622');" style=""> 321          if (serviceConfiguration != null || mServiceConfiguration.get() != null) {                                </span>

<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 322              try {                                                                                                 </span>
<span class="-1759552719269661640" onmouseenter="enter('-1759552719269661640');" onmouseout="out('-1759552719269661640');" style=""><abbr title=" 323                  final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mServiceConfiguration.get() : createAuthorizationServiceConfiguration(serviceConfiguration);"> 323                  final AuthorizationServiceConfiguration serviceConfig = mServiceConfiguration.get() != null ? mSerðŸ”µ</abbr></span>

<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 324                  refreshWithConfiguration(                                                                         </span>
<span class="5543097407325269813" onmouseenter="enter('5543097407325269813');" onmouseout="out('5543097407325269813');" style=""> 325                          serviceConfig,                                                                            </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 326                          appAuthConfiguration,                                                                     </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 327                          refreshToken,                                                                             </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 328                          clientId,                                                                                 </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 329                          scopes,                                                                                   </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 330                          redirectUrl,                                                                              </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 331                          additionalParametersMap,                                                                  </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 332                          clientAuthMethod,                                                                         </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 333                          clientSecret,                                                                             </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 334                          promise                                                                                   </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 335                  );                                                                                                </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 336              } catch (ActivityNotFoundException e) {                                                               </span>
<span class="574500716419837585" onmouseenter="enter('574500716419837585');" onmouseout="out('574500716419837585');" style=""> 337                  promise.reject(&quot;browser_not_found&quot;, e.getMessage());                                              </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 338              } catch (Exception e) {                                                                               </span>
<span class="7513248397060081198" onmouseenter="enter('7513248397060081198');" onmouseout="out('7513248397060081198');" style=""> 339                  promise.reject(&quot;token_refresh_failed&quot;, e.getMessage());                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 341          } else {                                                                                                  </span>
<span class="5120327872108088277" onmouseenter="enter('5120327872108088277');" onmouseout="out('5120327872108088277');" style=""> 342              final Uri issuerUri = Uri.parse(issuer);                                                              </span>
<span class="3189471842200176563" onmouseenter="enter('3189471842200176563');" onmouseout="out('3189471842200176563');" style=""> 343              AuthorizationServiceConfiguration.fetchFromUrl(                                                       </span>
<span class="-917898007766008740" onmouseenter="enter('-917898007766008740');" onmouseout="out('-917898007766008740');" style=""> 344                      buildConfigurationUriFromIssuer(issuerUri),                                                   </span>
<span class="-5731501030882835631" onmouseenter="enter('-5731501030882835631');" onmouseout="out('-5731501030882835631');" style=""> 345                      new AuthorizationServiceConfiguration.RetrieveConfigurationCallback() {                       </span>
<span class="4930672542407750962" onmouseenter="enter('4930672542407750962');" onmouseout="out('4930672542407750962');" style=""> 346                          public void onFetchConfigurationCompleted(                                                </span>
<span class="6799918846290870191" onmouseenter="enter('6799918846290870191');" onmouseout="out('6799918846290870191');" style=""> 347                                  @Nullable AuthorizationServiceConfiguration fetchedConfiguration,                 </span>
<span class="-3889685016070893683" onmouseenter="enter('-3889685016070893683');" onmouseout="out('-3889685016070893683');" style=""> 348                                  @Nullable AuthorizationException ex) {                                            </span>
<span class="-3832690312485057937" onmouseenter="enter('-3832690312485057937');" onmouseout="out('-3832690312485057937');" style=""> 349                              if (ex != null) {                                                                     </span>
<span class="-1412490292993010468" onmouseenter="enter('-1412490292993010468');" onmouseout="out('-1412490292993010468');" style=""> 350                                  promise.reject(&quot;service_configuration_fetch_error&quot;, getErrorMessage(ex));         </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 351                                  return;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352                              }                                                                                     </span>
<span  style=""> 353                                                                                                                    </span>
<span class="-5412554652574185713" onmouseenter="enter('-5412554652574185713');" onmouseout="out('-5412554652574185713');" style=""> 354                              mServiceConfiguration.set(fetchedConfiguration);                                      </span>

<span  style=""> 355                                                                                                                    </span>
<span class="-458698083733976772" onmouseenter="enter('-458698083733976772');" onmouseout="out('-458698083733976772');" style=""> 356                              refreshWithConfiguration(                                                             </span>
<span class="4669533994023155203" onmouseenter="enter('4669533994023155203');" onmouseout="out('4669533994023155203');" style=""> 357                                      fetchedConfiguration,                                                         </span>
<span class="5644730204592106442" onmouseenter="enter('5644730204592106442');" onmouseout="out('5644730204592106442');" style=""> 358                                      appAuthConfiguration,                                                         </span>
<span class="-898932939000724171" onmouseenter="enter('-898932939000724171');" onmouseout="out('-898932939000724171');" style=""> 359                                      refreshToken,                                                                 </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 360                                      clientId,                                                                     </span>
<span class="-7590782321721152056" onmouseenter="enter('-7590782321721152056');" onmouseout="out('-7590782321721152056');" style=""> 361                                      scopes,                                                                       </span>
<span class="6249938355353344086" onmouseenter="enter('6249938355353344086');" onmouseout="out('6249938355353344086');" style=""> 362                                      redirectUrl,                                                                  </span>
<span class="-851959020690644515" onmouseenter="enter('-851959020690644515');" onmouseout="out('-851959020690644515');" style=""> 363                                      additionalParametersMap,                                                      </span>
<span class="3820652764230669423" onmouseenter="enter('3820652764230669423');" onmouseout="out('3820652764230669423');" style=""> 364                                      clientAuthMethod,                                                             </span>
<span class="677976280472910575" onmouseenter="enter('677976280472910575');" onmouseout="out('677976280472910575');" style=""> 365                                      clientSecret,                                                                 </span>
<span class="-1109463015887053831" onmouseenter="enter('-1109463015887053831');" onmouseout="out('-1109463015887053831');" style=""> 366                                      promise                                                                       </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 367                              );                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 368                          }                                                                                         </span>
<span class="-4102417550988568311" onmouseenter="enter('-4102417550988568311');" onmouseout="out('-4102417550988568311');" style=""> 369                      },                                                                                            </span>
<span class="2680658541157360392" onmouseenter="enter('2680658541157360392');" onmouseout="out('2680658541157360392');" style=""> 370                      builder);                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371          }                                                                                                         </span>
<span  style=""> 372                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373      }                                                                                                             </span>
<span  style=""> 374                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 375      /*                                                                                                            </span>
<span class="7578951324193379805" onmouseenter="enter('7578951324193379805');" onmouseout="out('7578951324193379805');" style=""> 376       * Called when the OAuth browser activity completes                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 377       */                                                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 378      @Override                                                                                                     </span>
<span class="2027722410160164989" onmouseenter="enter('2027722410160164989');" onmouseout="out('2027722410160164989');" style=""> 379      public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {               </span>
<span class="-4639597857217913430" onmouseenter="enter('-4639597857217913430');" onmouseout="out('-4639597857217913430');" style=""> 380          if (requestCode == 0) {                                                                                   </span>
<span class="-5203356024335682166" onmouseenter="enter('-5203356024335682166');" onmouseout="out('-5203356024335682166');" style=""> 381              if (data == null) {                                                                                   </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 382                  if (promise != null) {                                                                            </span>
<span class="2268968836554739893" onmouseenter="enter('2268968836554739893');" onmouseout="out('2268968836554739893');" style=""> 383                      promise.reject(&quot;authentication_error&quot;, &quot;Data intent is null&quot; );                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384                  }                                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 385                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386              }                                                                                                     </span>
<span  style=""> 387                                                                                                                    </span>
<span class="1683167759369238332" onmouseenter="enter('1683167759369238332');" onmouseout="out('1683167759369238332');" style=""> 388              final AuthorizationResponse response = AuthorizationResponse.fromIntent(data);                        </span>
<span class="-2661429536108932642" onmouseenter="enter('-2661429536108932642');" onmouseout="out('-2661429536108932642');" style=""> 389              AuthorizationException exception = AuthorizationException.fromIntent(data);                           </span>
<span class="812069196179346176" onmouseenter="enter('812069196179346176');" onmouseout="out('812069196179346176');" style=""> 390              if (exception != null) {                                                                              </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 391                  if (promise != null) {                                                                            </span>
<span class="8302975562867231827" onmouseenter="enter('8302975562867231827');" onmouseout="out('8302975562867231827');" style=""> 392                      promise.reject(&quot;authentication_error&quot;, getErrorMessage(exception));                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393                  }                                                                                                 </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 394                  return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395              }                                                                                                     </span>
<span  style=""> 396                                                                                                                    </span>
<span class="5367484813216736809" onmouseenter="enter('5367484813216736809');" onmouseout="out('5367484813216736809');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 397 +            if (this.skipCodeExchange) {                                                                          </span>
<span class="-4333686298001507703" onmouseenter="enter('-4333686298001507703');" onmouseout="out('-4333686298001507703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 398 +                WritableMap map = TokenResponseFactory.authorizationResponseToMap(response);                      </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 399 +                promise.resolve(map);                                                                             </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 400 +                return;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 401 +            }                                                                                                     </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 402 +                                                                                                                  </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 403 +                                                                                                                  </span>
<span class="7265001672864433355" onmouseenter="enter('7265001672864433355');" onmouseout="out('7265001672864433355');" style=""> 404              final Promise authorizePromise = this.promise;                                                        </span>
<span class="5853075131485496752" onmouseenter="enter('5853075131485496752');" onmouseout="out('5853075131485496752');" style=""> 405              final AppAuthConfiguration configuration = createAppAuthConfiguration(                                </span>
<span class="-3586276280695435831" onmouseenter="enter('-3586276280695435831');" onmouseout="out('-3586276280695435831');" style=""> 406                      createConnectionBuilder(this.dangerouslyAllowInsecureHttpRequests, this.tokenRequestHeaders)  </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 407              );                                                                                                    </span>
<span  style=""> 408                                                                                                                    </span>
<span class="-598339291394324639" onmouseenter="enter('-598339291394324639');" onmouseout="out('-598339291394324639');" style=""> 409              AuthorizationService authService = new AuthorizationService(this.reactContext, configuration);        </span>
<span  style=""> 410                                                                                                                    </span>
<span class="6152215567678252770" onmouseenter="enter('6152215567678252770');" onmouseout="out('6152215567678252770');" style=""> 411              TokenRequest tokenRequest = response.createTokenExchangeRequest(this.additionalParametersMap);        </span>
<span  style=""> 412                                                                                                                    </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 413              AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 413              AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenRespoðŸ”µ</abbr></span>
<span  style=""> 414                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 415                  @Override                                                                                         </span>
<span class="-8262795349130604582" onmouseenter="enter('-8262795349130604582');" onmouseout="out('-8262795349130604582');" style=""> 416                  public void onTokenRequestCompleted(                                                              </span>
<span class="5619805881636115456" onmouseenter="enter('5619805881636115456');" onmouseout="out('5619805881636115456');" style=""> 417                          TokenResponse resp, AuthorizationException ex) {                                          </span>
<span class="7476284757153148856" onmouseenter="enter('7476284757153148856');" onmouseout="out('7476284757153148856');" style=""> 418                      if (resp != null) {                                                                           </span>
<span class="7607526798956663360" onmouseenter="enter('7607526798956663360');" onmouseout="out('7607526798956663360');" style=""> 419                          WritableMap map = TokenResponseFactory.tokenResponseToMap(resp, response);                </span>
<span class="-6045783056504489326" onmouseenter="enter('-6045783056504489326');" onmouseout="out('-6045783056504489326');" style=""> 420                          if (authorizePromise != null) {                                                           </span>
<span class="-4073221780338751137" onmouseenter="enter('-4073221780338751137');" onmouseout="out('-4073221780338751137');" style=""> 421                              authorizePromise.resolve(map);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 422                          }                                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 423                      } else {                                                                                      </span>
<span class="-1871951378605138055" onmouseenter="enter('-1871951378605138055');" onmouseout="out('-1871951378605138055');" style=""> 424                          if (promise != null) {                                                                    </span>
<span class="-1873248496991044419" onmouseenter="enter('-1873248496991044419');" onmouseout="out('-1873248496991044419');" style=""> 425                              promise.reject(&quot;token_exchange_failed&quot;, getErrorMessage(ex));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426                          }                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428                  }                                                                                                 </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 429              };                                                                                                    </span>
<span  style=""> 430                                                                                                                    </span>
<span class="-7911542703683536912" onmouseenter="enter('-7911542703683536912');" onmouseout="out('-7911542703683536912');" style=""> 431              if (this.clientSecret != null) {                                                                      </span>
<span class="-3188745194840831156" onmouseenter="enter('-3188745194840831156');" onmouseout="out('-3188745194840831156');" style=""><abbr title=" 432                  ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMethod);"> 432                  ClientAuthentication clientAuth = this.getClientAuthentication(this.clientSecret, this.clientAuthMðŸ”µ</abbr></span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 433                  authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);                 </span>
<span  style=""> 434                                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 435              } else {                                                                                              </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 436                  authService.performTokenRequest(tokenRequest, tokenResponseCallback);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437              }                                                                                                     </span>
<span  style=""> 438                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440      }                                                                                                             </span>
<span  style=""> 441                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 442      /*                                                                                                            </span>
<span class="3813849031296026505" onmouseenter="enter('3813849031296026505');" onmouseout="out('3813849031296026505');" style=""> 443       * Perform dynamic client registration with the provided configuration                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 444       */                                                                                                           </span>
<span class="340189295193181696" onmouseenter="enter('340189295193181696');" onmouseout="out('340189295193181696');" style=""> 445      private void registerWithConfiguration(                                                                       </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 446          final AuthorizationServiceConfiguration serviceConfiguration,                                             </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 447          final AppAuthConfiguration appAuthConfiguration,                                                          </span>
<span class="-1613309298935475225" onmouseenter="enter('-1613309298935475225');" onmouseout="out('-1613309298935475225');" style=""> 448          final ReadableArray redirectUris,                                                                         </span>
<span class="-8631698721285475619" onmouseenter="enter('-8631698721285475619');" onmouseout="out('-8631698721285475619');" style=""> 449          final ReadableArray responseTypes,                                                                        </span>
<span class="4830833162639029228" onmouseenter="enter('4830833162639029228');" onmouseout="out('4830833162639029228');" style=""> 450          final ReadableArray grantTypes,                                                                           </span>
<span class="-3929261854101567447" onmouseenter="enter('-3929261854101567447');" onmouseout="out('-3929261854101567447');" style=""> 451          final String subjectType,                                                                                 </span>
<span class="-7838009048202893924" onmouseenter="enter('-7838009048202893924');" onmouseout="out('-7838009048202893924');" style=""> 452          final String tokenEndpointAuthMethod,                                                                     </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 453          final Map&lt;String, String&gt; additionalParametersMap,                                                        </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 454          final Promise promise                                                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 455      ) {                                                                                                           </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 456          final Context context = this.reactContext;                                                                </span>
<span  style=""> 457                                                                                                                    </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 458          AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);               </span>
<span  style=""> 459                                                                                                                    </span>
<span class="-8453810682683042065" onmouseenter="enter('-8453810682683042065');" onmouseout="out('-8453810682683042065');" style=""> 460          RegistrationRequest.Builder registrationRequestBuilder =                                                  </span>
<span class="-7581367313981499795" onmouseenter="enter('-7581367313981499795');" onmouseout="out('-7581367313981499795');" style=""> 461                  new RegistrationRequest.Builder(                                                                  </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 462                      serviceConfiguration,                                                                         </span>
<span class="4262694259998445935" onmouseenter="enter('4262694259998445935');" onmouseout="out('4262694259998445935');" style=""> 463                      arrayToUriList(redirectUris)                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 464                  )                                                                                                 </span>
<span class="4677539456481393469" onmouseenter="enter('4677539456481393469');" onmouseout="out('4677539456481393469');" style=""> 465                      .setAdditionalParameters(additionalParametersMap);                                            </span>
<span  style=""> 466                                                                                                                    </span>
<span class="382071555491173350" onmouseenter="enter('382071555491173350');" onmouseout="out('382071555491173350');" style=""> 467          if (responseTypes != null) {                                                                              </span>
<span class="2691057769499642705" onmouseenter="enter('2691057769499642705');" onmouseout="out('2691057769499642705');" style=""> 468              registrationRequestBuilder.setResponseTypeValues(arrayToList(responseTypes));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469          }                                                                                                         </span>
<span  style=""> 470                                                                                                                    </span>
<span class="461598363295361308" onmouseenter="enter('461598363295361308');" onmouseout="out('461598363295361308');" style=""> 471          if (grantTypes != null) {                                                                                 </span>
<span class="1681210474388500870" onmouseenter="enter('1681210474388500870');" onmouseout="out('1681210474388500870');" style=""> 472              registrationRequestBuilder.setGrantTypeValues(arrayToList(grantTypes));                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473          }                                                                                                         </span>
<span  style=""> 474                                                                                                                    </span>
<span class="-2982605970687904529" onmouseenter="enter('-2982605970687904529');" onmouseout="out('-2982605970687904529');" style=""> 475          if (subjectType != null) {                                                                                </span>
<span class="3235050174363133383" onmouseenter="enter('3235050174363133383');" onmouseout="out('3235050174363133383');" style=""> 476              registrationRequestBuilder.setSubjectType(subjectType);                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477          }                                                                                                         </span>
<span  style=""> 478                                                                                                                    </span>
<span class="-3523548169086540196" onmouseenter="enter('-3523548169086540196');" onmouseout="out('-3523548169086540196');" style=""> 479          if (tokenEndpointAuthMethod != null) {                                                                    </span>
<span class="8002810479156997291" onmouseenter="enter('8002810479156997291');" onmouseout="out('8002810479156997291');" style=""> 480              registrationRequestBuilder.setTokenEndpointAuthenticationMethod(tokenEndpointAuthMethod);             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481          }                                                                                                         </span>
<span  style=""> 482                                                                                                                    </span>
<span class="-8152299436158074794" onmouseenter="enter('-8152299436158074794');" onmouseout="out('-8152299436158074794');" style=""> 483          RegistrationRequest registrationRequest = registrationRequestBuilder.build();                             </span>
<span  style=""> 484                                                                                                                    </span>
<span class="2043221784460883972" onmouseenter="enter('2043221784460883972');" onmouseout="out('2043221784460883972');" style=""><abbr title=" 485          AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.RegistrationResponseCallback() {"> 485          AuthorizationService.RegistrationResponseCallback registrationResponseCallback = new AuthorizationService.ðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 486              @Override                                                                                             </span>
<span class="89148758474091775" onmouseenter="enter('89148758474091775');" onmouseout="out('89148758474091775');" style=""><abbr title=" 487              public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizationException ex) {"> 487              public void onRegistrationRequestCompleted(@Nullable RegistrationResponse response, @Nullable AuthorizðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 488                  if (response != null) {                                                                           </span>
<span class="3678270738704120650" onmouseenter="enter('3678270738704120650');" onmouseout="out('3678270738704120650');" style=""> 489                      WritableMap map = RegistrationResponseFactory.registrationResponseToMap(response);            </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 490                      promise.resolve(map);                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 491                  } else {                                                                                          </span>
<span class="-5586663357435466975" onmouseenter="enter('-5586663357435466975');" onmouseout="out('-5586663357435466975');" style=""> 492                      promise.reject(&quot;registration_failed&quot;, getErrorMessage(ex));                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 495          };                                                                                                        </span>
<span  style=""> 496                                                                                                                    </span>
<span class="2922372767993768868" onmouseenter="enter('2922372767993768868');" onmouseout="out('2922372767993768868');" style=""> 497          authService.performRegistrationRequest(registrationRequest, registrationResponseCallback);                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498      }                                                                                                             </span>
<span  style=""> 499                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 500      /*                                                                                                            </span>
<span class="-3037424821439688076" onmouseenter="enter('-3037424821439688076');" onmouseout="out('-3037424821439688076');" style=""> 501       * Authorize user with the provided configuration                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 502       */                                                                                                           </span>
<span class="-1686698148972257501" onmouseenter="enter('-1686698148972257501');" onmouseout="out('-1686698148972257501');" style=""> 503      private void authorizeWithConfiguration(                                                                      </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 504              final AuthorizationServiceConfiguration serviceConfiguration,                                         </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 505              final AppAuthConfiguration appAuthConfiguration,                                                      </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 506              final String clientId,                                                                                </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 507              final ReadableArray scopes,                                                                           </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 508              final String redirectUrl,                                                                             </span>
<span class="757822854767106715" onmouseenter="enter('757822854767106715');" onmouseout="out('757822854767106715');" style=""> 509              final Boolean usePKCE,                                                                                </span>
<span class="4591131233701235058" onmouseenter="enter('4591131233701235058');" onmouseout="out('4591131233701235058');" style=""> 510              final Map&lt;String, String&gt; additionalParametersMap                                                     </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 511      ) {                                                                                                           </span>
<span  style=""> 512                                                                                                                    </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 513          String scopesString = null;                                                                               </span>
<span  style=""> 514                                                                                                                    </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 515          if (scopes != null) {                                                                                     </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 516              scopesString = this.arrayToString(scopes);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 517          }                                                                                                         </span>
<span  style=""> 518                                                                                                                    </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 519          final Context context = this.reactContext;                                                                </span>
<span class="-4913832152651687292" onmouseenter="enter('-4913832152651687292');" onmouseout="out('-4913832152651687292');" style=""> 520          final Activity currentActivity = getCurrentActivity();                                                    </span>
<span  style=""> 521                                                                                                                    </span>
<span class="1615045173536817183" onmouseenter="enter('1615045173536817183');" onmouseout="out('1615045173536817183');" style=""> 522          AuthorizationRequest.Builder authRequestBuilder =                                                         </span>
<span class="8630572254279098967" onmouseenter="enter('8630572254279098967');" onmouseout="out('8630572254279098967');" style=""> 523                  new AuthorizationRequest.Builder(                                                                 </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 524                          serviceConfiguration,                                                                     </span>
<span class="-7142487624803337726" onmouseenter="enter('-7142487624803337726');" onmouseout="out('-7142487624803337726');" style=""> 525                          clientId,                                                                                 </span>
<span class="4849618716626806999" onmouseenter="enter('4849618716626806999');" onmouseout="out('4849618716626806999');" style=""> 526                          ResponseTypeValues.CODE,                                                                  </span>
<span class="-1639145692422133689" onmouseenter="enter('-1639145692422133689');" onmouseout="out('-1639145692422133689');" style=""> 527                          Uri.parse(redirectUrl)                                                                    </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 528                  );                                                                                                </span>
<span  style=""> 529                                                                                                                    </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 530          if (scopesString != null) {                                                                               </span>
<span class="-8218576309450527961" onmouseenter="enter('-8218576309450527961');" onmouseout="out('-8218576309450527961');" style=""> 531              authRequestBuilder.setScope(scopesString);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532          }                                                                                                         </span>
<span  style=""> 533                                                                                                                    </span>
<span  style=""> 534                                                                                                                    </span>
<span class="7149068665077353053" onmouseenter="enter('7149068665077353053');" onmouseout="out('7149068665077353053');" style=""> 535          if (additionalParametersMap != null) {                                                                    </span>
<span class="-6137327941719445172" onmouseenter="enter('-6137327941719445172');" onmouseout="out('-6137327941719445172');" style=""> 536              // handle additional parameters separately to avoid exceptions from AppAuth                           </span>
<span class="-4729676460784236302" onmouseenter="enter('-4729676460784236302');" onmouseout="out('-4729676460784236302');" style=""> 537              if (additionalParametersMap.containsKey(&quot;display&quot;)) {                                                 </span>
<span class="6740086842281271815" onmouseenter="enter('6740086842281271815');" onmouseout="out('6740086842281271815');" style=""> 538                  authRequestBuilder.setDisplay(additionalParametersMap.get(&quot;display&quot;));                            </span>
<span class="5478676394718524231" onmouseenter="enter('5478676394718524231');" onmouseout="out('5478676394718524231');" style=""> 539                  additionalParametersMap.remove(&quot;display&quot;);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540              }                                                                                                     </span>
<span class="-5162308638975991351" onmouseenter="enter('-5162308638975991351');" onmouseout="out('-5162308638975991351');" style=""> 541              if (additionalParametersMap.containsKey(&quot;login_hint&quot;)) {                                              </span>
<span class="7478322337196261432" onmouseenter="enter('7478322337196261432');" onmouseout="out('7478322337196261432');" style=""> 542                  authRequestBuilder.setLoginHint(additionalParametersMap.get(&quot;login_hint&quot;));                       </span>
<span class="-3825577662921277200" onmouseenter="enter('-3825577662921277200');" onmouseout="out('-3825577662921277200');" style=""> 543                  additionalParametersMap.remove(&quot;login_hint&quot;);                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544              }                                                                                                     </span>
<span class="-8254180626457365202" onmouseenter="enter('-8254180626457365202');" onmouseout="out('-8254180626457365202');" style=""> 545              if (additionalParametersMap.containsKey(&quot;prompt&quot;)) {                                                  </span>
<span class="2585369211918110761" onmouseenter="enter('2585369211918110761');" onmouseout="out('2585369211918110761');" style=""> 546                  authRequestBuilder.setPrompt(additionalParametersMap.get(&quot;prompt&quot;));                              </span>
<span class="290019989822766287" onmouseenter="enter('290019989822766287');" onmouseout="out('290019989822766287');" style=""> 547                  additionalParametersMap.remove(&quot;prompt&quot;);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 548              }                                                                                                     </span>
<span  style=""> 549                                                                                                                    </span>
<span class="-1433627721318603910" onmouseenter="enter('-1433627721318603910');" onmouseout="out('-1433627721318603910');" style=""> 550              authRequestBuilder.setAdditionalParameters(additionalParametersMap);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551          }                                                                                                         </span>
<span  style=""> 552                                                                                                                    </span>
<span class="6295746505532947076" onmouseenter="enter('6295746505532947076');" onmouseout="out('6295746505532947076');" style=""> 553          if (!usePKCE) {                                                                                           </span>
<span class="211047115781987373" onmouseenter="enter('211047115781987373');" onmouseout="out('211047115781987373');" style=""> 554              authRequestBuilder.setCodeVerifier(null);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 555          }                                                                                                         </span>
<span  style=""> 556                                                                                                                    </span>
<span class="2874496759892237047" onmouseenter="enter('2874496759892237047');" onmouseout="out('2874496759892237047');" style=""> 557          AuthorizationRequest authRequest = authRequestBuilder.build();                                            </span>
<span  style=""> 558                                                                                                                    </span>
<span class="4248167488592758879" onmouseenter="enter('4248167488592758879');" onmouseout="out('4248167488592758879');" style=""> 559          if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) {                        </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 560              AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);           </span>
<span class="-8712988972948484879" onmouseenter="enter('-8712988972948484879');" onmouseout="out('-8712988972948484879');" style=""> 561              Intent authIntent = authService.getAuthorizationRequestIntent(authRequest);                           </span>
<span  style=""> 562                                                                                                                    </span>
<span class="-1768672139093830544" onmouseenter="enter('-1768672139093830544');" onmouseout="out('-1768672139093830544');" style=""> 563              currentActivity.startActivityForResult(authIntent, 0);                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 564          } else {                                                                                                  </span>
<span class="-5574677103641269793" onmouseenter="enter('-5574677103641269793');" onmouseout="out('-5574677103641269793');" style=""> 565              AuthorizationService authService = new AuthorizationService(currentActivity, appAuthConfiguration);   </span>
<span class="-921350943484849229" onmouseenter="enter('-921350943484849229');" onmouseout="out('-921350943484849229');" style=""> 566              PendingIntent pendingIntent = currentActivity.createPendingResult(0, new Intent(), 0);                </span>
<span  style=""> 567                                                                                                                    </span>
<span class="5462088869311657545" onmouseenter="enter('5462088869311657545');" onmouseout="out('5462088869311657545');" style=""> 568              authService.performAuthorizationRequest(authRequest, pendingIntent);                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570      }                                                                                                             </span>
<span  style=""> 571                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 572      /*                                                                                                            </span>
<span class="8814346366745541198" onmouseenter="enter('8814346366745541198');" onmouseout="out('8814346366745541198');" style=""> 573       * Refresh authentication token with the provided configuration                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 574       */                                                                                                           </span>
<span class="-7235916799046070057" onmouseenter="enter('-7235916799046070057');" onmouseout="out('-7235916799046070057');" style=""> 575      private void refreshWithConfiguration(                                                                        </span>
<span class="6738372303589480670" onmouseenter="enter('6738372303589480670');" onmouseout="out('6738372303589480670');" style=""> 576              final AuthorizationServiceConfiguration serviceConfiguration,                                         </span>
<span class="-7148653639167688877" onmouseenter="enter('-7148653639167688877');" onmouseout="out('-7148653639167688877');" style=""> 577              final AppAuthConfiguration appAuthConfiguration,                                                      </span>
<span class="-379485936381134853" onmouseenter="enter('-379485936381134853');" onmouseout="out('-379485936381134853');" style=""> 578              final String refreshToken,                                                                            </span>
<span class="5687609302985114059" onmouseenter="enter('5687609302985114059');" onmouseout="out('5687609302985114059');" style=""> 579              final String clientId,                                                                                </span>
<span class="-2571432075276428063" onmouseenter="enter('-2571432075276428063');" onmouseout="out('-2571432075276428063');" style=""> 580              final ReadableArray scopes,                                                                           </span>
<span class="-2300460312367070002" onmouseenter="enter('-2300460312367070002');" onmouseout="out('-2300460312367070002');" style=""> 581              final String redirectUrl,                                                                             </span>
<span class="3078994421067824649" onmouseenter="enter('3078994421067824649');" onmouseout="out('3078994421067824649');" style=""> 582              final Map&lt;String, String&gt; additionalParametersMap,                                                    </span>
<span class="7067272401530563010" onmouseenter="enter('7067272401530563010');" onmouseout="out('7067272401530563010');" style=""> 583              final String clientAuthMethod,                                                                        </span>
<span class="-444453538460346544" onmouseenter="enter('-444453538460346544');" onmouseout="out('-444453538460346544');" style=""> 584              final String clientSecret,                                                                            </span>
<span class="-8418158227951587358" onmouseenter="enter('-8418158227951587358');" onmouseout="out('-8418158227951587358');" style=""> 585              final Promise promise                                                                                 </span>
<span class="-1344992967432647558" onmouseenter="enter('-1344992967432647558');" onmouseout="out('-1344992967432647558');" style=""> 586      ) {                                                                                                           </span>
<span  style=""> 587                                                                                                                    </span>
<span class="-1291757027033748823" onmouseenter="enter('-1291757027033748823');" onmouseout="out('-1291757027033748823');" style=""> 588          String scopesString = null;                                                                               </span>
<span  style=""> 589                                                                                                                    </span>
<span class="-4774210946826185426" onmouseenter="enter('-4774210946826185426');" onmouseout="out('-4774210946826185426');" style=""> 590          if (scopes != null) {                                                                                     </span>
<span class="-3414107120191340382" onmouseenter="enter('-3414107120191340382');" onmouseout="out('-3414107120191340382');" style=""> 591              scopesString = this.arrayToString(scopes);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592          }                                                                                                         </span>
<span  style=""> 593                                                                                                                    </span>
<span class="-6618419046875856106" onmouseenter="enter('-6618419046875856106');" onmouseout="out('-6618419046875856106');" style=""> 594          final Context context = this.reactContext;                                                                </span>
<span  style=""> 595                                                                                                                    </span>
<span class="-1882592220700818910" onmouseenter="enter('-1882592220700818910');" onmouseout="out('-1882592220700818910');" style=""> 596          TokenRequest.Builder tokenRequestBuilder =                                                                </span>
<span class="-7570030938974274508" onmouseenter="enter('-7570030938974274508');" onmouseout="out('-7570030938974274508');" style=""> 597                  new TokenRequest.Builder(                                                                         </span>
<span class="-7084153681994695608" onmouseenter="enter('-7084153681994695608');" onmouseout="out('-7084153681994695608');" style=""> 598                          serviceConfiguration,                                                                     </span>
<span class="-3028793166139754818" onmouseenter="enter('-3028793166139754818');" onmouseout="out('-3028793166139754818');" style=""> 599                          clientId                                                                                  </span>
<span class="-2015476096144723150" onmouseenter="enter('-2015476096144723150');" onmouseout="out('-2015476096144723150');" style=""> 600                  )                                                                                                 </span>
<span class="5149869235939087614" onmouseenter="enter('5149869235939087614');" onmouseout="out('5149869235939087614');" style=""> 601                          .setRefreshToken(refreshToken)                                                            </span>
<span class="-4168308848344323961" onmouseenter="enter('-4168308848344323961');" onmouseout="out('-4168308848344323961');" style=""> 602                          .setRedirectUri(Uri.parse(redirectUrl));                                                  </span>
<span  style=""> 603                                                                                                                    </span>
<span class="-7385661931052667974" onmouseenter="enter('-7385661931052667974');" onmouseout="out('-7385661931052667974');" style=""> 604          if (scopesString != null) {                                                                               </span>
<span class="-4940100242303343354" onmouseenter="enter('-4940100242303343354');" onmouseout="out('-4940100242303343354');" style=""> 605              tokenRequestBuilder.setScope(scopesString);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 606          }                                                                                                         </span>
<span  style=""> 607                                                                                                                    </span>
<span class="1982926752875631058" onmouseenter="enter('1982926752875631058');" onmouseout="out('1982926752875631058');" style=""> 608          if (!additionalParametersMap.isEmpty()) {                                                                 </span>
<span class="6791703352530289305" onmouseenter="enter('6791703352530289305');" onmouseout="out('6791703352530289305');" style=""> 609              tokenRequestBuilder.setAdditionalParameters(additionalParametersMap);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 610          }                                                                                                         </span>
<span  style=""> 611                                                                                                                    </span>
<span class="6300215370198990899" onmouseenter="enter('6300215370198990899');" onmouseout="out('6300215370198990899');" style=""> 612          TokenRequest tokenRequest = tokenRequestBuilder.build();                                                  </span>
<span  style=""> 613                                                                                                                    </span>
<span class="4816591906407044398" onmouseenter="enter('4816591906407044398');" onmouseout="out('4816591906407044398');" style=""> 614          AuthorizationService authService = new AuthorizationService(context, appAuthConfiguration);               </span>
<span  style=""> 615                                                                                                                    </span>
<span class="-5959293994775680289" onmouseenter="enter('-5959293994775680289');" onmouseout="out('-5959293994775680289');" style=""><abbr title=" 616          AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCallback() {"> 616          AuthorizationService.TokenResponseCallback tokenResponseCallback = new AuthorizationService.TokenResponseCðŸ”µ</abbr></span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 617              @Override                                                                                             </span>
<span class="-9019017716153453132" onmouseenter="enter('-9019017716153453132');" onmouseout="out('-9019017716153453132');" style=""><abbr title=" 618              public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationException ex) {"> 618              public void onTokenRequestCompleted(@Nullable TokenResponse response, @Nullable AuthorizationExceptionðŸ”µ</abbr></span>
<span class="4756227728171050519" onmouseenter="enter('4756227728171050519');" onmouseout="out('4756227728171050519');" style=""> 619                  if (response != null) {                                                                           </span>
<span class="-4071880271889138129" onmouseenter="enter('-4071880271889138129');" onmouseout="out('-4071880271889138129');" style=""> 620                      WritableMap map = TokenResponseFactory.tokenResponseToMap(response);                          </span>
<span class="9181054552595447887" onmouseenter="enter('9181054552595447887');" onmouseout="out('9181054552595447887');" style=""> 621                      promise.resolve(map);                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 622                  } else {                                                                                          </span>
<span class="-8974399670180994057" onmouseenter="enter('-8974399670180994057');" onmouseout="out('-8974399670180994057');" style=""> 623                      promise.reject(&quot;token_refresh_failed&quot;, getErrorMessage(ex));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 625              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 626          };                                                                                                        </span>
<span  style=""> 627                                                                                                                    </span>
<span  style=""> 628                                                                                                                    </span>
<span class="7421395494546180413" onmouseenter="enter('7421395494546180413');" onmouseout="out('7421395494546180413');" style=""> 629          if (clientSecret != null) {                                                                               </span>
<span class="-3955443834186652225" onmouseenter="enter('-3955443834186652225');" onmouseout="out('-3955443834186652225');" style=""> 630              ClientAuthentication clientAuth = this.getClientAuthentication(clientSecret, clientAuthMethod);       </span>
<span class="5874890706685367726" onmouseenter="enter('5874890706685367726');" onmouseout="out('5874890706685367726');" style=""> 631              authService.performTokenRequest(tokenRequest, clientAuth, tokenResponseCallback);                     </span>
<span  style=""> 632                                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 633          } else {                                                                                                  </span>
<span class="6963498436255567330" onmouseenter="enter('6963498436255567330');" onmouseout="out('6963498436255567330');" style=""> 634              authService.performTokenRequest(tokenRequest, tokenResponseCallback);                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 636      }                                                                                                             </span>
<span  style=""> 637                                                                                                                    </span>
<span class="2930218534777413873" onmouseenter="enter('2930218534777413873');" onmouseout="out('2930218534777413873');" style=""> 638      private void parseHeaderMap (ReadableMap headerMap) {                                                         </span>
<span class="-6316489241675673035" onmouseenter="enter('-6316489241675673035');" onmouseout="out('-6316489241675673035');" style=""> 639          if (headerMap == null) {                                                                                  </span>
<span class="4043029072030362567" onmouseenter="enter('4043029072030362567');" onmouseout="out('4043029072030362567');" style=""> 640              return;                                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 641          }                                                                                                         </span>
<span class="5010343160007659678" onmouseenter="enter('5010343160007659678');" onmouseout="out('5010343160007659678');" style=""> 642          if (headerMap.hasKey(&quot;register&quot;) &amp;&amp; headerMap.getType(&quot;register&quot;) == ReadableType.Map) {                  </span>
<span class="-7734955563477546094" onmouseenter="enter('-7734955563477546094');" onmouseout="out('-7734955563477546094');" style=""> 643              this.registrationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;register&quot;));         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644          }                                                                                                         </span>
<span class="-8530407112624237580" onmouseenter="enter('-8530407112624237580');" onmouseout="out('-8530407112624237580');" style=""> 645          if (headerMap.hasKey(&quot;authorize&quot;) &amp;&amp; headerMap.getType(&quot;authorize&quot;) == ReadableType.Map) {                </span>
<span class="762039099095363738" onmouseenter="enter('762039099095363738');" onmouseout="out('762039099095363738');" style=""> 646              this.authorizationRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;authorize&quot;));       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647          }                                                                                                         </span>
<span class="5768179141818569002" onmouseenter="enter('5768179141818569002');" onmouseout="out('5768179141818569002');" style=""> 648          if (headerMap.hasKey(&quot;token&quot;) &amp;&amp; headerMap.getType(&quot;token&quot;) == ReadableType.Map) {                        </span>
<span class="-4870803436115877491" onmouseenter="enter('-4870803436115877491');" onmouseout="out('-4870803436115877491');" style=""> 649              this.tokenRequestHeaders = MapUtil.readableMapToHashMap(headerMap.getMap(&quot;token&quot;));                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 650          }                                                                                                         </span>
<span  style=""> 651                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652      }                                                                                                             </span>
<span  style=""> 653                                                                                                                    </span>
<span class="-2276636657842571599" onmouseenter="enter('-2276636657842571599');" onmouseout="out('-2276636657842571599');" style=""> 654      private ClientAuthentication getClientAuthentication(String clientSecret, String clientAuthMethod) {          </span>
<span class="4736948393768361142" onmouseenter="enter('4736948393768361142');" onmouseout="out('4736948393768361142');" style=""> 655          if (clientAuthMethod.equals(&quot;post&quot;)) {                                                                    </span>
<span class="4033722210949459980" onmouseenter="enter('4033722210949459980');" onmouseout="out('4033722210949459980');" style=""> 656              return new ClientSecretPost(clientSecret);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657          }                                                                                                         </span>
<span  style=""> 658                                                                                                                    </span>
<span class="-1107687855860572488" onmouseenter="enter('-1107687855860572488');" onmouseout="out('-1107687855860572488');" style=""> 659          return new ClientSecretBasic(clientSecret);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660      }                                                                                                             </span>
<span  style=""> 661                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 662      /*                                                                                                            </span>
<span class="5090378039448834807" onmouseenter="enter('5090378039448834807');" onmouseout="out('5090378039448834807');" style=""> 663       * Return error information if it is available                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 664       */                                                                                                           </span>
<span class="7325111704754615468" onmouseenter="enter('7325111704754615468');" onmouseout="out('7325111704754615468');" style=""> 665      private String getErrorMessage(AuthorizationException ex){                                                    </span>
<span class="6233744395473659458" onmouseenter="enter('6233744395473659458');" onmouseout="out('6233744395473659458');" style=""> 666          if(ex.errorDescription == null &amp;&amp; ex.error != null)                                                       </span>
<span class="8212520076730053042" onmouseenter="enter('8212520076730053042');" onmouseout="out('8212520076730053042');" style=""> 667              return ex.error;                                                                                      </span>
<span class="-944119096152079377" onmouseenter="enter('-944119096152079377');" onmouseout="out('-944119096152079377');" style=""> 668          return ex.errorDescription;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 669      }                                                                                                             </span>
<span  style=""> 670                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 671      /*                                                                                                            </span>
<span class="6638112631744326921" onmouseenter="enter('6638112631744326921');" onmouseout="out('6638112631744326921');" style=""> 672       * Create a space-delimited string from an array                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 673       */                                                                                                           </span>
<span class="2843730177292313139" onmouseenter="enter('2843730177292313139');" onmouseout="out('2843730177292313139');" style=""> 674      private String arrayToString(ReadableArray array) {                                                           </span>
<span class="-8236782342056480869" onmouseenter="enter('-8236782342056480869');" onmouseout="out('-8236782342056480869');" style=""> 675          StringBuilder strBuilder = new StringBuilder();                                                           </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 676          for (int i = 0; i &lt; array.size(); i++) {                                                                  </span>
<span class="-7800557187785605413" onmouseenter="enter('-7800557187785605413');" onmouseout="out('-7800557187785605413');" style=""> 677              if (i != 0) {                                                                                         </span>
<span class="-4449242394605741248" onmouseenter="enter('-4449242394605741248');" onmouseout="out('-4449242394605741248');" style=""> 678                  strBuilder.append(&#x27; &#x27;);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679              }                                                                                                     </span>
<span class="-8205116312766504963" onmouseenter="enter('-8205116312766504963');" onmouseout="out('-8205116312766504963');" style=""> 680              strBuilder.append(array.getString(i));                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 681          }                                                                                                         </span>
<span class="-7597052729024482685" onmouseenter="enter('-7597052729024482685');" onmouseout="out('-7597052729024482685');" style=""> 682          return strBuilder.toString();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683      }                                                                                                             </span>
<span  style=""> 684                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 685      /*                                                                                                            </span>
<span class="-7672611238824893788" onmouseenter="enter('-7672611238824893788');" onmouseout="out('-7672611238824893788');" style=""> 686       * Create a string list from an array of strings                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 687       */                                                                                                           </span>
<span class="8933886143748191998" onmouseenter="enter('8933886143748191998');" onmouseout="out('8933886143748191998');" style=""> 688      private List&lt;String&gt; arrayToList(ReadableArray array) {                                                       </span>
<span class="3701551209507079484" onmouseenter="enter('3701551209507079484');" onmouseout="out('3701551209507079484');" style=""> 689          ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();                                                               </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 690          for (int i = 0; i &lt; array.size(); i++) {                                                                  </span>
<span class="3110930347141835410" onmouseenter="enter('3110930347141835410');" onmouseout="out('3110930347141835410');" style=""> 691              list.add(array.getString(i));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 692          }                                                                                                         </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 693          return list;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694      }                                                                                                             </span>
<span  style=""> 695                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 696      /*                                                                                                            </span>
<span class="4411172121007664287" onmouseenter="enter('4411172121007664287');" onmouseout="out('4411172121007664287');" style=""> 697       * Create a Uri list from an array of strings                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 698       */                                                                                                           </span>
<span class="502202896426029305" onmouseenter="enter('502202896426029305');" onmouseout="out('502202896426029305');" style=""> 699      private List&lt;Uri&gt; arrayToUriList(ReadableArray array) {                                                       </span>
<span class="-8321772486199533839" onmouseenter="enter('-8321772486199533839');" onmouseout="out('-8321772486199533839');" style=""> 700          ArrayList&lt;Uri&gt; list = new ArrayList&lt;&gt;();                                                                  </span>
<span class="7278311890620727475" onmouseenter="enter('7278311890620727475');" onmouseout="out('7278311890620727475');" style=""> 701          for (int i = 0; i &lt; array.size(); i++) {                                                                  </span>
<span class="3593345693160557831" onmouseenter="enter('3593345693160557831');" onmouseout="out('3593345693160557831');" style=""> 702              list.add(Uri.parse(array.getString(i)));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 703          }                                                                                                         </span>
<span class="5681729113162162054" onmouseenter="enter('5681729113162162054');" onmouseout="out('5681729113162162054');" style=""> 704          return list;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 705      }                                                                                                             </span>
<span  style=""> 706                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 707      /*                                                                                                            </span>
<span class="5214794569700518887" onmouseenter="enter('5214794569700518887');" onmouseout="out('5214794569700518887');" style=""> 708       * Create an App Auth configuration using the provided connection builder                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 709       */                                                                                                           </span>
<span class="-5342361748775304563" onmouseenter="enter('-5342361748775304563');" onmouseout="out('-5342361748775304563');" style=""> 710      private AppAuthConfiguration createAppAuthConfiguration(ConnectionBuilder connectionBuilder) {                </span>
<span class="-6961363017801118708" onmouseenter="enter('-6961363017801118708');" onmouseout="out('-6961363017801118708');" style=""> 711          return new AppAuthConfiguration                                                                           </span>
<span class="370567544488026574" onmouseenter="enter('370567544488026574');" onmouseout="out('370567544488026574');" style=""> 712                  .Builder()                                                                                        </span>
<span class="6932817517014214209" onmouseenter="enter('6932817517014214209');" onmouseout="out('6932817517014214209');" style=""> 713                  .setConnectionBuilder(connectionBuilder)                                                          </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 714                  .build();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715      }                                                                                                             </span>
<span  style=""> 716                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 717      /*                                                                                                            </span>
<span class="2307564597312892215" onmouseenter="enter('2307564597312892215');" onmouseout="out('2307564597312892215');" style=""> 718       *  Create appropriate connection builder based on provided settings                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 719       */                                                                                                           </span>
<span class="-266307560690147004" onmouseenter="enter('-266307560690147004');" onmouseout="out('-266307560690147004');" style=""><abbr title=" 720      private ConnectionBuilder createConnectionBuilder(Boolean allowInsecureConnections, Map&lt;String, String&gt; headers) {"> 720      private ConnectionBuilder createConnectionBuilder(Boolean allowInsecureConnections, Map&lt;String, String&gt; headerðŸ”µ</abbr></span>

<span class="7318015076305824949" onmouseenter="enter('7318015076305824949');" onmouseout="out('7318015076305824949');" style=""> 721          ConnectionBuilder proxiedBuilder;                                                                         </span>
<span  style=""> 722                                                                                                                    </span>
<span class="-6214248404965356101" onmouseenter="enter('-6214248404965356101');" onmouseout="out('-6214248404965356101');" style=""> 723          if (allowInsecureConnections.equals(true)) {                                                              </span>

<span class="-8652069864919613967" onmouseenter="enter('-8652069864919613967');" onmouseout="out('-8652069864919613967');" style=""> 724              proxiedBuilder =UnsafeConnectionBuilder.INSTANCE;                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 725          } else {                                                                                                  </span>
<span class="-3823294731313489124" onmouseenter="enter('-3823294731313489124');" onmouseout="out('-3823294731313489124');" style=""> 726              proxiedBuilder = DefaultConnectionBuilder.INSTANCE;                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 727          }                                                                                                         </span>
<span  style=""> 728                                                                                                                    </span>
<span class="-321326358809916252" onmouseenter="enter('-321326358809916252');" onmouseout="out('-321326358809916252');" style=""> 729          CustomConnectionBuilder customConnection = new CustomConnectionBuilder(proxiedBuilder);                   </span>
<span class="-5872856843685271172" onmouseenter="enter('-5872856843685271172');" onmouseout="out('-5872856843685271172');" style=""> 730          if (headers != null) {                                                                                    </span>
<span class="-4120878389218127223" onmouseenter="enter('-4120878389218127223');" onmouseout="out('-4120878389218127223');" style=""> 731              customConnection.setHeaders(headers);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 732          }                                                                                                         </span>
<span  style=""> 733                                                                                                                    </span>
<span class="5629827582834827587" onmouseenter="enter('5629827582834827587');" onmouseout="out('5629827582834827587');" style=""> 734          return customConnection;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 735      }                                                                                                             </span>
<span  style=""> 736                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 737      /*                                                                                                            </span>
<span class="9187662928809351886" onmouseenter="enter('9187662928809351886');" onmouseout="out('9187662928809351886');" style=""> 738       *  Replicated private method from AuthorizationServiceConfiguration                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 739       */                                                                                                           </span>
<span class="2622836649973257205" onmouseenter="enter('2622836649973257205');" onmouseout="out('2622836649973257205');" style=""> 740      private Uri buildConfigurationUriFromIssuer(Uri openIdConnectIssuerUri) {                                     </span>
<span class="-830811466431368071" onmouseenter="enter('-830811466431368071');" onmouseout="out('-830811466431368071');" style=""> 741          return openIdConnectIssuerUri.buildUpon()                                                                 </span>
<span class="7258170423676519924" onmouseenter="enter('7258170423676519924');" onmouseout="out('7258170423676519924');" style=""> 742                  .appendPath(AuthorizationServiceConfiguration.WELL_KNOWN_PATH)                                    </span>
<span class="-3903955623180377764" onmouseenter="enter('-3903955623180377764');" onmouseout="out('-3903955623180377764');" style=""> 743                  .appendPath(AuthorizationServiceConfiguration.OPENID_CONFIGURATION_RESOURCE)                      </span>
<span class="-368814941510255410" onmouseenter="enter('-368814941510255410');" onmouseout="out('-368814941510255410');" style=""> 744                  .build();                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 745      }                                                                                                             </span>
<span  style=""> 746                                                                                                                    </span>
<span class="3122274151060887299" onmouseenter="enter('3122274151060887299');" onmouseout="out('3122274151060887299');" style=""><abbr title=" 747      private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguration) throws Exception {"> 747      private AuthorizationServiceConfiguration createAuthorizationServiceConfiguration(ReadableMap serviceConfiguraðŸ”µ</abbr></span>
<span class="4275545280692735139" onmouseenter="enter('4275545280692735139');" onmouseout="out('4275545280692735139');" style=""> 748          if (!serviceConfiguration.hasKey(&quot;authorizationEndpoint&quot;)) {                                              </span>
<span class="3986521017730318395" onmouseenter="enter('3986521017730318395');" onmouseout="out('3986521017730318395');" style=""> 749              throw new Exception(&quot;serviceConfiguration passed without an authorizationEndpoint&quot;);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 750          }                                                                                                         </span>
<span  style=""> 751                                                                                                                    </span>
<span class="5638598812511759739" onmouseenter="enter('5638598812511759739');" onmouseout="out('5638598812511759739');" style=""> 752          if (!serviceConfiguration.hasKey(&quot;tokenEndpoint&quot;)) {                                                      </span>
<span class="7444064849592215652" onmouseenter="enter('7444064849592215652');" onmouseout="out('7444064849592215652');" style=""> 753              throw new Exception(&quot;serviceConfiguration passed without a tokenEndpoint&quot;);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 754          }                                                                                                         </span>
<span  style=""> 755                                                                                                                    </span>
<span class="-3941749567598770425" onmouseenter="enter('-3941749567598770425');" onmouseout="out('-3941749567598770425');" style=""> 756          Uri authorizationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;authorizationEndpoint&quot;));           </span>
<span class="4054930865548070446" onmouseenter="enter('4054930865548070446');" onmouseout="out('4054930865548070446');" style=""> 757          Uri tokenEndpoint = Uri.parse(serviceConfiguration.getString(&quot;tokenEndpoint&quot;));                           </span>
<span class="2264343622444418519" onmouseenter="enter('2264343622444418519');" onmouseout="out('2264343622444418519');" style=""> 758          Uri registrationEndpoint = null;                                                                          </span>
<span class="-4970643399788664483" onmouseenter="enter('-4970643399788664483');" onmouseout="out('-4970643399788664483');" style=""> 759          if (serviceConfiguration.hasKey(&quot;registrationEndpoint&quot;)) {                                                </span>
<span class="1609034589288005797" onmouseenter="enter('1609034589288005797');" onmouseout="out('1609034589288005797');" style=""> 760              registrationEndpoint = Uri.parse(serviceConfiguration.getString(&quot;registrationEndpoint&quot;));             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 761          }                                                                                                         </span>
<span  style=""> 762                                                                                                                    </span>
<span class="-8455698330779530293" onmouseenter="enter('-8455698330779530293');" onmouseout="out('-8455698330779530293');" style=""> 763          return new AuthorizationServiceConfiguration(                                                             </span>
<span class="-9206356706352718453" onmouseenter="enter('-9206356706352718453');" onmouseout="out('-9206356706352718453');" style=""> 764                  authorizationEndpoint,                                                                            </span>
<span class="-6119344076232034280" onmouseenter="enter('-6119344076232034280');" onmouseout="out('-6119344076232034280');" style=""> 765                  tokenEndpoint,                                                                                    </span>
<span class="-4224958759407269631" onmouseenter="enter('-4224958759407269631');" onmouseout="out('-4224958759407269631');" style=""> 766                  registrationEndpoint                                                                              </span>
<span class="-4075588097149809180" onmouseenter="enter('-4075588097149809180');" onmouseout="out('-4075588097149809180');" style=""> 767          );                                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 768      }                                                                                                             </span>
<span  style=""> 769                                                                                                                    </span>
<span class="-4130257184876230563" onmouseenter="enter('-4130257184876230563');" onmouseout="out('-4130257184876230563');" style=""> 770      private void warmChromeCustomTab(Context context, final String issuer) {                                      </span>
<span class="-4012796735492941375" onmouseenter="enter('-4012796735492941375');" onmouseout="out('-4012796735492941375');" style=""> 771          CustomTabsServiceConnection connection = new CustomTabsServiceConnection() {                              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 772              @Override                                                                                             </span>
<span class="4306327880536035079" onmouseenter="enter('4306327880536035079');" onmouseout="out('4306327880536035079');" style=""> 773              public void onCustomTabsServiceConnected(ComponentName name, CustomTabsClient client) {               </span>
<span class="-5035114608817725139" onmouseenter="enter('-5035114608817725139');" onmouseout="out('-5035114608817725139');" style=""> 774                  client.warmup(0);                                                                                 </span>
<span class="5970961959698416627" onmouseenter="enter('5970961959698416627');" onmouseout="out('5970961959698416627');" style=""><abbr title=" 775                  client.newSession(new CustomTabsCallback()).mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;Bundle&gt;emptyList());"> 775                  client.newSession(new CustomTabsCallback()).mayLaunchUrl(Uri.parse(issuer), null, Collections.&lt;BunðŸ”µ</abbr></span>





<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 776              }                                                                                                     </span>
<span  style=""> 777                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 778              @Override                                                                                             </span>
<span class="6231636659664649995" onmouseenter="enter('6231636659664649995');" onmouseout="out('6231636659664649995');" style=""> 779              public void onServiceDisconnected(ComponentName name) {                                               </span>
<span  style=""> 780                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 781              }                                                                                                     </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 782          };                                                                                                        </span>
<span class="5767142201781268255" onmouseenter="enter('5767142201781268255');" onmouseout="out('5767142201781268255');" style=""> 783          CustomTabsClient.bindCustomTabsService(context, CUSTOM_TAB_PACKAGE_NAME, connection);                     </span>


















<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 784      }                                                                                                             </span>
<span  style=""> 785                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 786      @Override                                                                                                     </span>
<span class="-4337880705383881802" onmouseenter="enter('-4337880705383881802');" onmouseout="out('-4337880705383881802');" style=""> 787      public void onNewIntent(Intent intent) {                                                                      </span>
<span  style=""> 788                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 789      }                                                                                                             </span>
<span  style=""> 790                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 791      @Override                                                                                                     </span>
<span class="190238665005496725" onmouseenter="enter('190238665005496725');" onmouseout="out('190238665005496725');" style=""> 792      public String getName() {                                                                                     </span>
<span class="4315075324919368681" onmouseenter="enter('4315075324919368681');" onmouseout="out('4315075324919368681');" style=""> 793          return &quot;RNAppAuth&quot;;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 794      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 795  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            