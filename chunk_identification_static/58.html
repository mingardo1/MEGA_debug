<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>58</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        abbr {
                          /* Here is the delay */
                          transition-delay:0s;
                        }
                    </style>
              </head>
              <body>
                <span style="height: 4vh">
                    58
                    <a href="57.html">prev</a>
                    <a href="59.html">next</a>
                    <a href="58_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    AriaLyy/Aria_ce886921a652b2ea1ded6e36a0748360e01c007f_Aria/src/main/java/com/arialyy/aria/core/upload/UploadTarget.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ce886921a652b2ea1ded6e36a0748360e01c007f:Aria/src/main/java/com/arialyy/aria/core/upload/UploadTarget.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ce886921a652b2ea1ded6e36a0748360e01c007f^1:Aria/src/main/java/com/arialyy/aria/core/upload/UploadTarget.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;ce886921a652b2ea1ded6e36a0748360e01c007f^2:Aria/src/main/java/com/arialyy/aria/core/upload/UploadTarget.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\AriaLyy\Aria show &quot;84ce7e06974326b39f68f3f23fd64570bcdb9bdc:Aria/src/main/java/com/arialyy/aria/core/upload/UploadTarget.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b], [b], [j]], subset: [[b], [bj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.upload;
  17 
  18 import android.support.annotation.NonNull;
  19 import com.arialyy.aria.core.inf.AbsNormalTarget;
  20 import com.arialyy.aria.core.queue.UploadTaskQueue;
  21 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  22 import java.util.Map;</span>
  23 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  24 import com.arialyy.aria.core.queue.UploadTaskQueue;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  25 import com.arialyy.aria.orm.DbEntity;</span>
  26 =======
  27 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
  28 
  29 /**
  30  * Created by lyy on 2017/2/28.
  31  */
  32 public class UploadTarget extends AbsNormalTarget&lt;UploadTarget, UploadEntity, UploadTaskEntity&gt; {
  33 
  34   UploadTarget(UploadEntity entity, String targetName) {
  35     this.mEntity = entity;
  36     this.mTargetName = targetName;
  37     mTaskEntity = new UploadTaskEntity();
  38     mTaskEntity.entity = entity;
  39   }
  40 
  41   /**
  42    * 设置userAgent
  43    */
  44   public UploadTarget setUserAngent(@NonNull String userAgent) {
  45     mTaskEntity.userAgent = userAgent;
  46     return this;
  47   }
  48 
  49   /**
  50    * 设置上传路径
  51    *
  52    * @param uploadUrl 上传路径
  53    */
  54   public UploadTarget setUploadUrl(@NonNull String uploadUrl) {
  55     mTaskEntity.uploadUrl = uploadUrl;
  56     return this;
  57   }
  58 
  59   /**
  60    * 设置服务器需要的附件key
  61    *
  62    * @param attachment 附件key
  63    */
  64   public UploadTarget setAttachment(@NonNull String attachment) {
  65     mTaskEntity.attachment = attachment;
  66     return this;
  67   }
  68 
  69   /**
  70    * 设置文件名
  71    */
  72   public UploadTarget setFileName(String fileName) {
  73     mEntity.setFileName(fileName);
  74     return this;
  75   }
  76 
  77   /**
  78    * 设置上传文件类型
  79    *
  80    * @param contentType tip：multipart/form-data
  81    */
  82   public UploadTarget setContentType(String contentType) {
  83     mTaskEntity.contentType = contentType;
  84     return this;
  85   }
  86 
  87   /**
  88    * 下载任务是否存在
  89    */
  90   @Override public boolean taskExists() {
  91     return UploadTaskQueue.getInstance().getTask(mEntity.getFilePath()) != null;
  92   }
  93 
  94 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  95   /**</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  96    * 设置请求类型</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  97    *</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  98    * @param requestEnum {@link RequestEnum}</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  99    */</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 100   public UploadTarget setRequestMode(RequestEnum requestEnum) {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 101     super._setRequestMode(requestEnum);</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 102     return this;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 103   }</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 104 </span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 105   private UploadEntity getUploadEntity() {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 106     return entity;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 107   }</span>
 108 ||||||| GitAnalyzerPlus_base
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 109    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 110   public UploadTarget addHeader(@NonNull String key, @NonNull String header) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 111     super._addHeader(key, header);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 112     return this;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 113   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 114 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 115   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 116    * 给url请求添加头部</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 117    *</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 118    * @param headers key为http头部的key，Value为http头对应的配置</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 119    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 120   public UploadTarget addHeaders(Map&lt;String, String&gt; headers) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 121     super._addHeaders(headers);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 122     return this;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 123   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 124 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 125   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 126    * 下载任务是否存在</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 127    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 128   @Override public boolean taskExists() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 129     return UploadTaskQueue.getInstance().getTask(entity.getFilePath()) != null;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 130   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 131 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 132   /**</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 133    * 设置请求类型</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 134    *</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 135    * @param requestEnum {@link RequestEnum}</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 136    */</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 137   public UploadTarget setRequestMode(RequestEnum requestEnum) {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 138     super._setRequestMode(requestEnum);</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139     return this;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140   }</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141 </span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142   private UploadEntity getDownloadEntity() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143     return entity;</span>
 144 =======
 145 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs
 146 
 147   /**
 148    * 是否在下载
 149    */
 150   public boolean isUploading() {
 151     UploadTask task = UploadTaskQueue.getInstance().getTask(mEntity);
 152     return task != null &amp;&amp; task.isRunning();
 153   }
 154 
 155 }</pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.upload;
  17 
  18 import android.support.annotation.NonNull;
  19 import com.arialyy.aria.core.inf.AbsNormalTarget;
  20 import com.arialyy.aria.core.queue.UploadTaskQueue;
  21 
  22 /**
  23  * Created by lyy on 2017/2/28.
  24  */
  25 public class UploadTarget extends AbsNormalTarget&lt;UploadTarget, UploadEntity, UploadTaskEntity&gt; {
  26 
  27   UploadTarget(UploadEntity entity, String targetName) {
  28     this.mEntity = entity;
  29     this.mTargetName = targetName;
  30     mTaskEntity = new UploadTaskEntity();
  31     mTaskEntity.entity = entity;
  32   }
  33 
  34   /**
  35    * 设置userAgent
  36    */
  37   public UploadTarget setUserAngent(@NonNull String userAgent) {
  38     mTaskEntity.userAgent = userAgent;
  39     return this;
  40   }
  41 
  42   /**
  43    * 设置上传路径
  44    *
  45    * @param uploadUrl 上传路径
  46    */
  47   public UploadTarget setUploadUrl(@NonNull String uploadUrl) {
  48     mTaskEntity.uploadUrl = uploadUrl;
  49     return this;
  50   }
  51 
  52   /**
  53    * 设置服务器需要的附件key
  54    *
  55    * @param attachment 附件key
  56    */
  57   public UploadTarget setAttachment(@NonNull String attachment) {
  58     mTaskEntity.attachment = attachment;
  59     return this;
  60   }
  61 
  62   /**
  63    * 设置文件名
  64    */
  65   public UploadTarget setFileName(String fileName) {
  66     mEntity.setFileName(fileName);
  67     return this;
  68   }
  69 
  70   /**
  71    * 设置上传文件类型
  72    *
  73    * @param contentType tip：multipart/form-data
  74    */
  75   public UploadTarget setContentType(String contentType) {
  76     mTaskEntity.contentType = contentType;
  77     return this;
  78   }
  79 
  80   /**
  81    * 下载任务是否存在
  82    */
  83   @Override public boolean taskExists() {
  84     return UploadTaskQueue.getInstance().getTask(mEntity.getFilePath()) != null;
  85   }
  86 
  87 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  88   private UploadEntity getUploadEntity() {</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  89     return entity;</span>
<span style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  90   }</span>
  91 ||||||| BASE
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  92   private UploadEntity getDownloadEntity() {</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  93     return entity;</span>
<span style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  94   }</span>
  95 =======
<span style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  96 </span>
  97 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS
  98 
  99 
 100   /**
 101    * 是否在下载
 102    */
 103   public boolean isUploading() {
 104     UploadTask task = UploadTaskQueue.getInstance().getTask(mEntity);
 105     return task != null &amp;&amp; task.isRunning();
 106   }
 107 
 108 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                            <td><pre>   1 /*
   2  * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3  *
   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5  * you may not use this file except in compliance with the License.
   6  * You may obtain a copy of the License at
   7  *
   8  *      http://www.apache.org/licenses/LICENSE-2.0
   9  *
  10  * Unless required by applicable law or agreed to in writing, software
  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13  * See the License for the specific language governing permissions and
  14  * limitations under the License.
  15  */
  16 package com.arialyy.aria.core.upload;
  17 
  18 import android.support.annotation.NonNull;
  19 import com.arialyy.aria.core.inf.AbsNormalTarget;
  20 import com.arialyy.aria.core.queue.UploadTaskQueue;
  21 
  22 
  23 /**
  24  * Created by lyy on 2017/2/28.
  25  */
  26 public class UploadTarget extends AbsNormalTarget&lt;UploadTarget, UploadEntity, UploadTaskEntity&gt; {
  27   UploadTarget(UploadEntity entity, String targetName) {
  28     this.mEntity = entity;
  29     this.mTargetName = targetName;
  30     mTaskEntity = new UploadTaskEntity();
  31     mTaskEntity.entity = entity;
  32   }
  33 
  34   /**
  35    * 设置userAgent
  36    */
  37   public UploadTarget setUserAngent(@NonNull
  38   String userAgent) {
  39     mTaskEntity.userAgent = userAgent;
  40     return this;
  41   }
  42 
  43   /**
  44    * 设置上传路径
  45    *
  46    * @param uploadUrl 上传路径
  47    */
  48   public UploadTarget setUploadUrl(@NonNull
  49   String uploadUrl) {
  50     mTaskEntity.uploadUrl = uploadUrl;
  51     return this;
  52   }
  53 
  54   /**
  55    * 设置服务器需要的附件key
  56    *
  57    * @param attachment 附件key
  58    */
  59   public UploadTarget setAttachment(@NonNull
  60   String attachment) {
  61     mTaskEntity.attachment = attachment;
  62     return this;
  63   }
  64 
  65   /**
  66    * 设置文件名
  67    */
  68   public UploadTarget setFileName(String fileName) {
  69     mEntity.setFileName(fileName);
  70     return this;
  71   }
  72 
  73   /**
  74    * 设置上传文件类型
  75    *
  76    * @param contentType tip：multipart/form-data
  77    */
  78   public UploadTarget setContentType(String contentType) {
  79     mTaskEntity.contentType = contentType;
  80     return this;
  81   }
  82 
  83   /**
  84    * 下载任务是否存在
  85    */
  86   @Override
  87   public boolean taskExists() {
  88     return UploadTaskQueue.getInstance().getTask(mEntity.getFilePath()) != null;
  89   }
  90 
  91   /**
  92    * 是否在下载
  93    */
  94   public boolean isUploading() {
  95     UploadTask task = UploadTaskQueue.getInstance().getTask(mEntity);
  96     return (task != null) &amp;&amp; task.isRunning();
  97   }
  98 }
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  package com.arialyy.aria.core.upload;
  17  
  18  import android.support.annotation.NonNull;
  19  import com.arialyy.aria.core.RequestEnum;
  20  import com.arialyy.aria.core.inf.AbsTarget;

  21  import com.arialyy.aria.core.queue.UploadTaskQueue;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  22 -import com.arialyy.aria.orm.DbEntity;</span>
  23  import java.util.Map;
  24  
  25  /**
  26   * Created by lyy on 2017/2/28.
  27   */
  28  public class UploadTarget extends AbsTarget&lt;UploadEntity, UploadTaskEntity&gt; {

  29  
  30    UploadTarget(UploadEntity entity, String targetName) {
  31      this.entity = entity;
  32      this.targetName = targetName;
  33      taskEntity = new UploadTaskEntity(entity);




  34    }
  35  
  36    /**
  37     * 设置userAgent
  38     */
  39    public UploadTarget setUserAngent(@NonNull String userAgent) {
  40      taskEntity.userAgent = userAgent;

  41      return this;
  42    }
  43  
  44    /**
  45     * 设置上传路径
  46     *
  47     * @param uploadUrl 上传路径
  48     */
  49    public UploadTarget setUploadUrl(@NonNull String uploadUrl) {
  50      taskEntity.uploadUrl = uploadUrl;

  51      return this;
  52    }
  53  
  54    /**
  55     * 设置服务器需要的附件key
  56     *
  57     * @param attachment 附件key
  58     */
  59    public UploadTarget setAttachment(@NonNull String attachment) {
  60      taskEntity.attachment = attachment;

  61      return this;
  62    }
  63  
  64    /**
  65     * 设置文件名
  66     */
  67    public UploadTarget setFileName(String fileName) {
  68      entity.setFileName(fileName);

  69      return this;
  70    }
  71  
  72    /**
  73     * 设置上传文件类型
  74     *
  75     * @param contentType tip：multipart/form-data
  76     */
  77    public UploadTarget setContentType(String contentType) {
  78      taskEntity.contentType = contentType;
  79      return this;
  80    }
  81  
  82    /**
  83     * 给url请求添加头部
  84     *
  85     * @param key 头部key
  86     * @param header 头部value
  87     */
  88    public UploadTarget addHeader(@NonNull String key, @NonNull String header) {
  89      super._addHeader(key, header);
  90      return this;
  91    }
  92  
  93    /**
  94     * 给url请求添加头部
  95     *
  96     * @param headers key为http头部的key，Value为http头对应的配置
  97     */
  98    public UploadTarget addHeaders(Map&lt;String, String&gt; headers) {
  99      super._addHeaders(headers);

 100      return this;
 101    }
 102  
 103    /**
 104     * 下载任务是否存在
 105     */
 106    @Override public boolean taskExists() {
 107      return UploadTaskQueue.getInstance().getTask(entity.getFilePath()) != null;

 108    }
 109  
 110    /**
 111     * 设置请求类型
 112     *
 113     * @param requestEnum {@link RequestEnum}
 114     */
 115    public UploadTarget setRequestMode(RequestEnum requestEnum) {
 116      super._setRequestMode(requestEnum);
 117      return this;
 118    }
 119  
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 120 -  private UploadEntity getDownloadEntity() {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 121 +  private UploadEntity getUploadEntity() {</span>
 122      return entity;
 123    }
 124  
 125    /**
 126     * 是否在下载
 127     */
 128    public boolean isUploading() {
 129      UploadTask task = UploadTaskQueue.getInstance().getTask(entity);

 130      return task != null &amp;&amp; task.isRunning();
 131    }

 132  }</pre></td>
                            <td><pre>   1  /*
   2   * Copyright (C) 2016 AriaLyy(https://github.com/AriaLyy/Aria)
   3   *
   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   5   * you may not use this file except in compliance with the License.
   6   * You may obtain a copy of the License at
   7   *
   8   *      http://www.apache.org/licenses/LICENSE-2.0
   9   *
  10   * Unless required by applicable law or agreed to in writing, software
  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13   * See the License for the specific language governing permissions and
  14   * limitations under the License.
  15   */
  16  package com.arialyy.aria.core.upload;
  17  
  18  import android.support.annotation.NonNull;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  19 -import com.arialyy.aria.core.RequestEnum;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  20 -import com.arialyy.aria.core.inf.AbsTarget;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  21 +import com.arialyy.aria.core.inf.AbsNormalTarget;</span>
  22  import com.arialyy.aria.core.queue.UploadTaskQueue;
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  23 -import com.arialyy.aria.orm.DbEntity;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  24 -import java.util.Map;</span>
  25  
  26  /**
  27   * Created by lyy on 2017/2/28.
  28   */
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  29 -public class UploadTarget extends AbsTarget&lt;UploadEntity, UploadTaskEntity&gt; {</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +public class UploadTarget extends AbsNormalTarget&lt;UploadTarget, UploadEntity, UploadTaskEntity&gt; {</span>
  31  
  32    UploadTarget(UploadEntity entity, String targetName) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  33 -    this.entity = entity;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  34 -    this.targetName = targetName;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  35 -    taskEntity = new UploadTaskEntity(entity);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +    this.mEntity = entity;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  37 +    this.mTargetName = targetName;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  38 +    mTaskEntity = new UploadTaskEntity();</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  39 +    mTaskEntity.entity = entity;</span>
  40    }
  41  
  42    /**
  43     * 设置userAgent
  44     */
  45    public UploadTarget setUserAngent(@NonNull String userAgent) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  46 -    taskEntity.userAgent = userAgent;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  47 +    mTaskEntity.userAgent = userAgent;</span>
  48      return this;
  49    }
  50  
  51    /**
  52     * 设置上传路径
  53     *
  54     * @param uploadUrl 上传路径
  55     */
  56    public UploadTarget setUploadUrl(@NonNull String uploadUrl) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  57 -    taskEntity.uploadUrl = uploadUrl;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +    mTaskEntity.uploadUrl = uploadUrl;</span>
  59      return this;
  60    }
  61  
  62    /**
  63     * 设置服务器需要的附件key
  64     *
  65     * @param attachment 附件key
  66     */
  67    public UploadTarget setAttachment(@NonNull String attachment) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  68 -    taskEntity.attachment = attachment;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  69 +    mTaskEntity.attachment = attachment;</span>
  70      return this;
  71    }
  72  
  73    /**
  74     * 设置文件名
  75     */
  76    public UploadTarget setFileName(String fileName) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  77 -    entity.setFileName(fileName);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +    mEntity.setFileName(fileName);</span>
  79      return this;
  80    }
  81  
  82    /**
  83     * 设置上传文件类型
  84     *
  85     * @param contentType tip：multipart/form-data
  86     */
  87    public UploadTarget setContentType(String contentType) {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  88 -    taskEntity.contentType = contentType;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  89 -    return this;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  90 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  91 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  92 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  93 -   * 给url请求添加头部</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  94 -   *</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  95 -   * @param key 头部key</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  96 -   * @param header 头部value</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  97 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  98 -  public UploadTarget addHeader(@NonNull String key, @NonNull String header) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0">  99 -    super._addHeader(key, header);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 100 -    return this;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 101 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 102 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 103 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 104 -   * 给url请求添加头部</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 105 -   *</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 106 -   * @param headers key为http头部的key，Value为http头对应的配置</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 107 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 108 -  public UploadTarget addHeaders(Map&lt;String, String&gt; headers) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 109 -    super._addHeaders(headers);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 110 +    mTaskEntity.contentType = contentType;</span>
 111      return this;
 112    }
 113  
 114    /**
 115     * 下载任务是否存在
 116     */
 117    @Override public boolean taskExists() {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 118 -    return UploadTaskQueue.getInstance().getTask(entity.getFilePath()) != null;</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 119 +    return UploadTaskQueue.getInstance().getTask(mEntity.getFilePath()) != null;</span>
 120    }
 121  
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 122 -  /**</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 123 -   * 设置请求类型</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 124 -   *</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 125 -   * @param requestEnum {@link RequestEnum}</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 126 -   */</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 127 -  public UploadTarget setRequestMode(RequestEnum requestEnum) {</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 128 -    super._setRequestMode(requestEnum);</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 129 -    return this;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 130 -  }</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 131 -</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 132 -  private UploadEntity getDownloadEntity() {</span>

<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 133 -    return entity;</span>
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 134 -  }</span>
 135  
 136    /**
 137     * 是否在下载
 138     */
 139    public boolean isUploading() {
<span style="background-color: rgba(255, 0, 0, 0.2);; margin: 0"> 140 -    UploadTask task = UploadTaskQueue.getInstance().getTask(entity);</span>
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +    UploadTask task = UploadTaskQueue.getInstance().getTask(mEntity);</span>
 142      return task != null &amp;&amp; task.isRunning();
 143    }
<span style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 144 +</span>
 145  }</pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            