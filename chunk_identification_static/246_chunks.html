<!DOCTYPE html>
<html lang="en">
          <head>
            <meta charset="utf-8">
            <title>246 chunks</title>
                <style>
                    #top {
                        height: 48vh;
                        overflow-y: auto;
                    }
                    #bottom {
                        height: 48vh;
                        overflow-y: auto;
                    }
                </style>
          </head>
          <body>
            <pre>[[{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.utils;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.app.Activity;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.graphics.Bitmap;\n&#x27;
                           &#x27;import android.graphics.Canvas;\n&#x27;
                           &#x27;import android.graphics.drawable.BitmapDrawable;\n&#x27;
                           &#x27;import android.text.Editable;\n&#x27;
                           &#x27;import android.text.Spannable;\n&#x27;
                           &#x27;import android.text.SpannableStringBuilder;\n&#x27;
                           &#x27;import android.text.TextWatcher;\n&#x27;
                           &#x27;import android.text.style.ImageSpan;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.text.TextUtils.SimpleStringSplitter;\n&#x27;
                           &#x27;import android.util.AttributeSet;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.widget.AdapterView;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.widget.AdapterView.OnItemClickListener;\n&#x27;
                           &#x27;import android.widget.MultiAutoCompleteTextView;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.automattic.simplenote.R;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class TagsMultiAutoCompleteTextView extends &#x27;
                           &#x27;MultiAutoCompleteTextView implements &#x27;
                           &#x27;OnItemClickListener {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public interface OnTagAddedListener {\n&#x27;
                           &#x27;        public void onTagsChanged(String &#x27;
                           &#x27;tagString);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private final String TAG = &#x27;
                           &#x27;&quot;TagsMultiAutoCompleteTextView&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private OnTagAddedListener &#x27;
                           &#x27;mTagsChangedListener;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context) {\n&#x27;
                           &#x27;        super(context);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs) {\n&#x27;
                           &#x27;        super(context, attrs);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs,\n&#x27;
                           &#x27;                                         int &#x27;
                           &#x27;defStyle) {\n&#x27;
                           &#x27;        super(context, attrs, defStyle);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;setOnTagAddedListener(OnTagAddedListener &#x27;
                           &#x27;listener){\n&#x27;
                           &#x27;        mTagsChangedListener = listener;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* set listeners for item click and text &#x27;
                           &#x27;change */\n&#x27;
                           &#x27;    public void init(Context context) {\n&#x27;
                           &#x27;        setOnItemClickListener(this);\n&#x27;
                           &#x27;        addTextChangedListener(textWatcher);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*TextWatcher, If user types any tag name and &#x27;
                           &#x27;presses space then following code will regenerate &#x27;
                           &#x27;chips */\n&#x27;
                           &#x27;    private TextWatcher textWatcher = new &#x27;
                           &#x27;TextWatcher() {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void onTextChanged(CharSequence s, &#x27;
                           &#x27;int start, int before, int count) {\n&#x27;
                           &quot;            // If we reach an image span, let&#x27;s &quot;
                           &#x27;remove it as well as the tag text behind it.\n&#x27;
                           &#x27;            if (before == 1) {\n&#x27;
                           &#x27;                SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(s);\n&#x27;
                           &#x27;                ImageSpan[] imageSpans = &#x27;
                           &#x27;ssb.getSpans(start, start, ImageSpan.class);\n&#x27;
                           &#x27;                if (imageSpans.length &gt; 0) {\n&#x27;
                           &#x27;                    ImageSpan tagImageSpan = &#x27;
                           &#x27;imageSpans[0];\n&#x27;
                           &#x27;                    int tagStart = &#x27;
                           &#x27;ssb.getSpanStart(tagImageSpan);\n&#x27;
                           &#x27;                    int tagEnd = &#x27;
                           &#x27;ssb.getSpanEnd(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.removeSpan(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.replace(tagStart, tagEnd, &#x27;
                           &#x27;&quot;&quot;);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;notifyTagsChanged(ssb.toString());\n&#x27;
                           &#x27;                    return;\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;\n&#x27;
                           &quot;            if (count &gt;= 1 &amp;&amp; s.charAt(start) == &#x27; &quot;
                           &quot;&#x27;) notifyTagsChanged();\n&quot;
                           &#x27;            \n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void beforeTextChanged(CharSequence &#x27;
                           &#x27;s, int start, int count, int after) {\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void afterTextChanged(Editable s) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    };\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(){\n&#x27;
                           &#x27;        notifyTagsChanged(getText().toString());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(String &#x27;
                           &#x27;tagString){\n&#x27;
                           &#x27;        if(mTagsChangedListener != null){\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mTagsChangedListener.onTagsChanged(tagString);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*This function has whole logic for chips &#x27;
                           &#x27;generate*/\n&#x27;
                           &#x27;    public void setChips(CharSequence text){\n&#x27;
                           &#x27;        // split string with space\n&#x27;
                           &#x27;        SimpleStringSplitter tags = new &#x27;
                           &quot;SimpleStringSplitter(&#x27; &#x27;);\n&quot;
                           &#x27;        tags.setString(text.toString());\n&#x27;
                           &#x27;        SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(text);\n&#x27;
                           &#x27;        int x = 0;\n&#x27;
                           &#x27;        // Loop will generate ImageSpan for every &#x27;
                           &#x27;tag separated by spaces\n&#x27;
                           &#x27;        for (String tag : tags) {\n&#x27;
                           &#x27;            // Inflate tags_textview layout\n&#x27;
                           &#x27;            LayoutInflater lf = (LayoutInflater) &#x27;
                           &#x27;getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n&#x27;
                           &#x27;            TextView textView = (TextView) &#x27;
                           &#x27;lf.inflate(R.layout.tags_textview, null);\n&#x27;
                           &#x27;            textView.setText(tag); // set text\n&#x27;
                           &#x27;            // Capture bitmap of generated &#x27;
                           &#x27;textview\n&#x27;
                           &#x27;            int spec = &#x27;
                           &#x27;MeasureSpec.makeMeasureSpec(0, &#x27;
                           &#x27;MeasureSpec.UNSPECIFIED);\n&#x27;
                           &#x27;            textView.measure(spec, spec);\n&#x27;
                           &#x27;            textView.layout(0, 0, &#x27;
                           &#x27;textView.getMeasuredWidth(), &#x27;
                           &#x27;textView.getMeasuredHeight());\n&#x27;
                           &#x27;            Bitmap b = &#x27;
                           &#x27;Bitmap.createBitmap(textView.getWidth(), &#x27;
                           &#x27;textView.getHeight(), Bitmap.Config.ARGB_8888);\n&#x27;
                           &#x27;            Canvas canvas = new Canvas(b);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;canvas.translate(-textView.getScrollX(), &#x27;
                           &#x27;-textView.getScrollY());\n&#x27;
                           &#x27;            textView.draw(canvas);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;textView.setDrawingCacheEnabled(true);\n&#x27;
                           &#x27;            Bitmap cacheBmp = &#x27;
                           &#x27;textView.getDrawingCache();\n&#x27;
                           &#x27;            Bitmap viewBmp = &#x27;
                           &#x27;cacheBmp.copy(Bitmap.Config.ARGB_8888, true);\n&#x27;
                           &#x27;            textView.destroyDrawingCache();  // &#x27;
                           &#x27;destory drawable\n&#x27;
                           &#x27;            // Create bitmap drawable for &#x27;
                           &#x27;imagespan\n&#x27;
                           &#x27;            BitmapDrawable bmpDrawable = new &#x27;
                           &#x27;BitmapDrawable(getContext().getResources(), &#x27;
                           &#x27;viewBmp);\n&#x27;
                           &#x27;            bmpDrawable.setBounds(0, 0, &#x27;
                           &#x27;bmpDrawable.getIntrinsicWidth(), &#x27;
                           &#x27;bmpDrawable.getIntrinsicHeight());\n&#x27;
                           &#x27;            // Create and set &#x27;
                           &#x27;imagespan            \n&#x27;
                           &#x27;            ssb.setSpan(new &#x27;
                           &#x27;ImageSpan(bmpDrawable), x, x + tag.length(), &#x27;
                           &#x27;Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\n&#x27;
                           &#x27;            x = x + tag.length() + 1;\n&#x27;
                           &#x27;        }\n&#x27;
                           &quot;        if (ssb.length() &gt; 0) ssb.append(&#x27; &#x27;);\n&quot;
                           &#x27;        // set chips span\n&#x27;
                           &#x27;        setText(ssb);\n&#x27;
                           &#x27;        //if &#x27;
                           &#x27;(!getText().toString().trim().equals(&quot;&quot;))\n&#x27;
                           &#x27;        // move cursor to last\n&#x27;
                           &#x27;        setSelection(getText().length());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    @Override\n&#x27;
                           &#x27;    public void onItemClick(AdapterView&lt;?&gt; parent, &#x27;
                           &#x27;View view, int position, long id) {\n&#x27;
                           &#x27;        notifyTagsChanged();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.utils;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.app.Activity;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.graphics.Bitmap;\n&#x27;
                           &#x27;import android.graphics.Canvas;\n&#x27;
                           &#x27;import android.graphics.drawable.BitmapDrawable;\n&#x27;
                           &#x27;import android.text.Editable;\n&#x27;
                           &#x27;import android.text.Spannable;\n&#x27;
                           &#x27;import android.text.SpannableStringBuilder;\n&#x27;
                           &#x27;import android.text.TextWatcher;\n&#x27;
                           &#x27;import android.text.style.ImageSpan;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.text.TextUtils.SimpleStringSplitter;\n&#x27;
                           &#x27;import android.util.AttributeSet;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.widget.AdapterView;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.widget.AdapterView.OnItemClickListener;\n&#x27;
                           &#x27;import android.widget.MultiAutoCompleteTextView;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.automattic.simplenote.R;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class TagsMultiAutoCompleteTextView extends &#x27;
                           &#x27;MultiAutoCompleteTextView implements &#x27;
                           &#x27;OnItemClickListener {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public interface OnTagAddedListener {\n&#x27;
                           &#x27;        public void onTagsChanged(String &#x27;
                           &#x27;tagString);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private final String TAG = &#x27;
                           &#x27;&quot;TagsMultiAutoCompleteTextView&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private OnTagAddedListener &#x27;
                           &#x27;mTagsChangedListener;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context) {\n&#x27;
                           &#x27;        super(context);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs) {\n&#x27;
                           &#x27;        super(context, attrs);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs,\n&#x27;
                           &#x27;                                         int &#x27;
                           &#x27;defStyle) {\n&#x27;
                           &#x27;        super(context, attrs, defStyle);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;setOnTagAddedListener(OnTagAddedListener &#x27;
                           &#x27;listener){\n&#x27;
                           &#x27;        mTagsChangedListener = listener;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* set listeners for item click and text &#x27;
                           &#x27;change */\n&#x27;
                           &#x27;    public void init(Context context) {\n&#x27;
                           &#x27;        setOnItemClickListener(this);\n&#x27;
                           &#x27;        addTextChangedListener(textWatcher);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*TextWatcher, If user types any tag name and &#x27;
                           &#x27;presses space then following code will regenerate &#x27;
                           &#x27;chips */\n&#x27;
                           &#x27;    private TextWatcher textWatcher = new &#x27;
                           &#x27;TextWatcher() {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void onTextChanged(CharSequence s, &#x27;
                           &#x27;int start, int before, int count) {\n&#x27;
                           &quot;            // If we reach an image span, let&#x27;s &quot;
                           &#x27;remove it as well as the tag text behind it.\n&#x27;
                           &#x27;            if (before == 1) {\n&#x27;
                           &#x27;                SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(s);\n&#x27;
                           &#x27;                ImageSpan[] imageSpans = &#x27;
                           &#x27;ssb.getSpans(start, start, ImageSpan.class);\n&#x27;
                           &#x27;                if (imageSpans.length &gt; 0) {\n&#x27;
                           &#x27;                    ImageSpan tagImageSpan = &#x27;
                           &#x27;imageSpans[0];\n&#x27;
                           &#x27;                    int tagStart = &#x27;
                           &#x27;ssb.getSpanStart(tagImageSpan);\n&#x27;
                           &#x27;                    int tagEnd = &#x27;
                           &#x27;ssb.getSpanEnd(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.removeSpan(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.replace(tagStart, tagEnd, &#x27;
                           &#x27;&quot;&quot;);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;notifyTagsChanged(ssb.toString());\n&#x27;
                           &#x27;                    return;\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;\n&#x27;
                           &quot;            if (count &gt;= 1 &amp;&amp; s.charAt(start) == &#x27; &quot;
                           &quot;&#x27;) notifyTagsChanged();\n&quot;
                           &#x27;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void beforeTextChanged(CharSequence &#x27;
                           &#x27;s, int start, int count, int after) {\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void afterTextChanged(Editable s) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    };\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(){\n&#x27;
                           &#x27;        notifyTagsChanged(getText().toString());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(String &#x27;
                           &#x27;tagString){\n&#x27;
                           &#x27;        if(mTagsChangedListener != null){\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mTagsChangedListener.onTagsChanged(tagString);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*This function has whole logic for chips &#x27;
                           &#x27;generate*/\n&#x27;
                           &#x27;    public void setChips(CharSequence text){\n&#x27;
                           &#x27;        // split string with space\n&#x27;
                           &#x27;        SimpleStringSplitter tags = new &#x27;
                           &quot;SimpleStringSplitter(&#x27; &#x27;);\n&quot;
                           &#x27;        tags.setString(text.toString());\n&#x27;
                           &#x27;        SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(text);\n&#x27;
                           &#x27;        int x = 0;\n&#x27;
                           &#x27;        // Loop will generate ImageSpan for every &#x27;
                           &#x27;tag separated by spaces\n&#x27;
                           &#x27;        for (String tag : tags) {\n&#x27;
                           &#x27;            // Inflate tags_textview layout\n&#x27;
                           &#x27;            LayoutInflater lf = (LayoutInflater) &#x27;
                           &#x27;getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n&#x27;
                           &#x27;            TextView textView = (TextView) &#x27;
                           &#x27;lf.inflate(R.layout.tags_textview, null);\n&#x27;
                           &#x27;            textView.setText(tag); // set text\n&#x27;
                           &#x27;            // Capture bitmap of generated &#x27;
                           &#x27;textview\n&#x27;
                           &#x27;            int spec = &#x27;
                           &#x27;MeasureSpec.makeMeasureSpec(0, &#x27;
                           &#x27;MeasureSpec.UNSPECIFIED);\n&#x27;
                           &#x27;            textView.measure(spec, spec);\n&#x27;
                           &#x27;            textView.layout(0, 0, &#x27;
                           &#x27;textView.getMeasuredWidth(), &#x27;
                           &#x27;textView.getMeasuredHeight());\n&#x27;
                           &#x27;            Bitmap b = &#x27;
                           &#x27;Bitmap.createBitmap(textView.getWidth(), &#x27;
                           &#x27;textView.getHeight(), Bitmap.Config.ARGB_8888);\n&#x27;
                           &#x27;            Canvas canvas = new Canvas(b);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;canvas.translate(-textView.getScrollX(), &#x27;
                           &#x27;-textView.getScrollY());\n&#x27;
                           &#x27;            textView.draw(canvas);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;textView.setDrawingCacheEnabled(true);\n&#x27;
                           &#x27;            Bitmap cacheBmp = &#x27;
                           &#x27;textView.getDrawingCache();\n&#x27;
                           &#x27;            Bitmap viewBmp = &#x27;
                           &#x27;cacheBmp.copy(Bitmap.Config.ARGB_8888, true);\n&#x27;
                           &#x27;            textView.destroyDrawingCache();  // &#x27;
                           &#x27;destory drawable\n&#x27;
                           &#x27;            // Create bitmap drawable for &#x27;
                           &#x27;imagespan\n&#x27;
                           &#x27;            BitmapDrawable bmpDrawable = new &#x27;
                           &#x27;BitmapDrawable(getContext().getResources(), &#x27;
                           &#x27;viewBmp);\n&#x27;
                           &#x27;            bmpDrawable.setBounds(0, 0, &#x27;
                           &#x27;bmpDrawable.getIntrinsicWidth(), &#x27;
                           &#x27;bmpDrawable.getIntrinsicHeight());\n&#x27;
                           &#x27;            // Create and set imagespan\n&#x27;
                           &#x27;            ssb.setSpan(new &#x27;
                           &#x27;ImageSpan(bmpDrawable), x, x + tag.length(), &#x27;
                           &#x27;Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\n&#x27;
                           &#x27;            x = x + tag.length() + 1;\n&#x27;
                           &#x27;        }\n&#x27;
                           &quot;        if (ssb.length() &gt; 0) ssb.append(&#x27; &#x27;);\n&quot;
                           &#x27;        // set chips span\n&#x27;
                           &#x27;        setText(ssb);\n&#x27;
                           &#x27;        //if &#x27;
                           &#x27;(!getText().toString().trim().equals(&quot;&quot;))\n&#x27;
                           &#x27;        // move cursor to last\n&#x27;
                           &#x27;        setSelection(getText().length());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    @Override\n&#x27;
                           &#x27;    public void onItemClick(AdapterView&lt;?&gt; parent, &#x27;
                           &#x27;View view, int position, long id) {\n&#x27;
                           &#x27;        notifyTagsChanged();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;package com.automattic.simplenote.utils;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.app.Activity;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.graphics.Bitmap;\n&#x27;
                           &#x27;import android.graphics.Canvas;\n&#x27;
                           &#x27;import android.graphics.drawable.BitmapDrawable;\n&#x27;
                           &#x27;import android.text.Editable;\n&#x27;
                           &#x27;import android.text.Spannable;\n&#x27;
                           &#x27;import android.text.SpannableStringBuilder;\n&#x27;
                           &#x27;import android.text.TextWatcher;\n&#x27;
                           &#x27;import android.text.style.ImageSpan;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.text.TextUtils.SimpleStringSplitter;\n&#x27;
                           &#x27;import android.util.AttributeSet;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.widget.AdapterView;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.widget.AdapterView.OnItemClickListener;\n&#x27;
                           &#x27;import android.widget.MultiAutoCompleteTextView;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.automattic.simplenote.R;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class TagsMultiAutoCompleteTextView extends &#x27;
                           &#x27;MultiAutoCompleteTextView implements &#x27;
                           &#x27;OnItemClickListener {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public interface OnTagAddedListener {\n&#x27;
                           &#x27;        public void onTagsChanged(String &#x27;
                           &#x27;tagString);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private final String TAG = &#x27;
                           &#x27;&quot;TagsMultiAutoCompleteTextView&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private OnTagAddedListener &#x27;
                           &#x27;mTagsChangedListener;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context) {\n&#x27;
                           &#x27;        super(context);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs) {\n&#x27;
                           &#x27;        super(context, attrs);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs,\n&#x27;
                           &#x27;                                         int &#x27;
                           &#x27;defStyle) {\n&#x27;
                           &#x27;        super(context, attrs, defStyle);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;setOnTagAddedListener(OnTagAddedListener &#x27;
                           &#x27;listener){\n&#x27;
                           &#x27;        mTagsChangedListener = listener;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* set listeners for item click and text &#x27;
                           &#x27;change */\n&#x27;
                           &#x27;    public void init(Context context) {\n&#x27;
                           &#x27;        setOnItemClickListener(this);\n&#x27;
                           &#x27;        addTextChangedListener(textWatcher);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*TextWatcher, If user types any tag name and &#x27;
                           &#x27;presses space then following code will regenerate &#x27;
                           &#x27;chips */\n&#x27;
                           &#x27;    private TextWatcher textWatcher = new &#x27;
                           &#x27;TextWatcher() {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void onTextChanged(CharSequence s, &#x27;
                           &#x27;int start, int before, int count) {\n&#x27;
                           &quot;            // If we reach an image span, let&#x27;s &quot;
                           &#x27;remove it as well as the tag text behind it.\n&#x27;
                           &#x27;            if (before == 1) {\n&#x27;
                           &#x27;                SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(s);\n&#x27;
                           &#x27;                ImageSpan[] imageSpans = &#x27;
                           &#x27;ssb.getSpans(start, start, ImageSpan.class);\n&#x27;
                           &#x27;                if (imageSpans.length &gt; 0) {\n&#x27;
                           &#x27;                    ImageSpan tagImageSpan = &#x27;
                           &#x27;imageSpans[0];\n&#x27;
                           &#x27;                    int tagStart = &#x27;
                           &#x27;ssb.getSpanStart(tagImageSpan);\n&#x27;
                           &#x27;                    int tagEnd = &#x27;
                           &#x27;ssb.getSpanEnd(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.removeSpan(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.replace(tagStart, tagEnd, &#x27;
                           &#x27;&quot;&quot;);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;notifyTagsChanged(ssb.toString());\n&#x27;
                           &#x27;                    return;\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;\n&#x27;
                           &quot;            if (count &gt;= 1 &amp;&amp; s.charAt(start) == &#x27; &quot;
                           &quot;&#x27;) notifyTagsChanged();\n&quot;
                           &#x27;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void beforeTextChanged(CharSequence &#x27;
                           &#x27;s, int start, int count, int after) {\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void afterTextChanged(Editable s) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    };\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(){\n&#x27;
                           &#x27;        notifyTagsChanged(getText().toString());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(String &#x27;
                           &#x27;tagString){\n&#x27;
                           &#x27;        if(mTagsChangedListener != null){\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mTagsChangedListener.onTagsChanged(tagString);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*This function has whole logic for chips &#x27;
                           &#x27;generate*/\n&#x27;
                           &#x27;    public void setChips(CharSequence text){\n&#x27;
                           &#x27;        // split string with space\n&#x27;
                           &#x27;        SimpleStringSplitter tags = new &#x27;
                           &quot;SimpleStringSplitter(&#x27; &#x27;);\n&quot;
                           &#x27;        tags.setString(text.toString());\n&#x27;
                           &#x27;        SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(text);\n&#x27;
                           &#x27;        int x = 0;\n&#x27;
                           &#x27;        // Loop will generate ImageSpan for every &#x27;
                           &#x27;tag separated by spaces\n&#x27;
                           &#x27;        for (String tag : tags) {\n&#x27;
                           &#x27;            // Inflate tags_textview layout\n&#x27;
                           &#x27;            LayoutInflater lf = (LayoutInflater) &#x27;
                           &#x27;getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n&#x27;
                           &#x27;            TextView textView = (TextView) &#x27;
                           &#x27;lf.inflate(R.layout.tags_textview, null);\n&#x27;
                           &#x27;            textView.setText(tag); // set text\n&#x27;
                           &#x27;            // Capture bitmap of generated &#x27;
                           &#x27;textview\n&#x27;
                           &#x27;            int spec = &#x27;
                           &#x27;MeasureSpec.makeMeasureSpec(0, &#x27;
                           &#x27;MeasureSpec.UNSPECIFIED);\n&#x27;
                           &#x27;            textView.measure(spec, spec);\n&#x27;
                           &#x27;            textView.layout(0, 0, &#x27;
                           &#x27;textView.getMeasuredWidth(), &#x27;
                           &#x27;textView.getMeasuredHeight());\n&#x27;
                           &#x27;            Bitmap b = &#x27;
                           &#x27;Bitmap.createBitmap(textView.getWidth(), &#x27;
                           &#x27;textView.getHeight(), Bitmap.Config.ARGB_8888);\n&#x27;
                           &#x27;            Canvas canvas = new Canvas(b);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;canvas.translate(-textView.getScrollX(), &#x27;
                           &#x27;-textView.getScrollY());\n&#x27;
                           &#x27;            textView.draw(canvas);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;textView.setDrawingCacheEnabled(true);\n&#x27;
                           &#x27;            Bitmap cacheBmp = &#x27;
                           &#x27;textView.getDrawingCache();\n&#x27;
                           &#x27;            Bitmap viewBmp = &#x27;
                           &#x27;cacheBmp.copy(Bitmap.Config.ARGB_8888, true);\n&#x27;
                           &#x27;            textView.destroyDrawingCache();  // &#x27;
                           &#x27;destory drawable\n&#x27;
                           &#x27;            // Create bitmap drawable for &#x27;
                           &#x27;imagespan\n&#x27;
                           &#x27;            BitmapDrawable bmpDrawable = new &#x27;
                           &#x27;BitmapDrawable(getContext().getResources(), &#x27;
                           &#x27;viewBmp);\n&#x27;
                           &#x27;            bmpDrawable.setBounds(0, 0, &#x27;
                           &#x27;bmpDrawable.getIntrinsicWidth(), &#x27;
                           &#x27;bmpDrawable.getIntrinsicHeight());\n&#x27;
                           &#x27;            // Create and set imagespan\n&#x27;
                           &#x27;            ssb.setSpan(new &#x27;
                           &#x27;ImageSpan(bmpDrawable), x, x + tag.length(), &#x27;
                           &#x27;Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\n&#x27;
                           &#x27;            x = x + tag.length() + 1;\n&#x27;
                           &#x27;        }\n&#x27;
                           &quot;        if (ssb.length() &gt; 0) ssb.append(&#x27; &#x27;);\n&quot;
                           &#x27;        // set chips span\n&#x27;
                           &#x27;        setText(ssb);\n&#x27;
                           &#x27;        //if &#x27;
                           &#x27;(!getText().toString().trim().equals(&quot;&quot;))\n&#x27;
                           &#x27;        // move cursor to last\n&#x27;
                           &#x27;        setSelection(getText().length());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    @Override\n&#x27;
                           &#x27;    public void onItemClick(AdapterView&lt;?&gt; parent, &#x27;
                           &#x27;View view, int position, long id) {\n&#x27;
                           &#x27;        notifyTagsChanged();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;}\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}}],
 [{&#x27;eq&#x27;: [{&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.utils;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.app.Activity;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.graphics.Bitmap;\n&#x27;
                           &#x27;import android.graphics.Canvas;\n&#x27;
                           &#x27;import android.graphics.drawable.BitmapDrawable;\n&#x27;
                           &#x27;import android.text.Editable;\n&#x27;
                           &#x27;import android.text.Spannable;\n&#x27;
                           &#x27;import android.text.SpannableStringBuilder;\n&#x27;
                           &#x27;import android.text.TextWatcher;\n&#x27;
                           &#x27;import android.text.style.ImageSpan;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.text.TextUtils.SimpleStringSplitter;\n&#x27;
                           &#x27;import android.util.AttributeSet;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.widget.AdapterView;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.widget.AdapterView.OnItemClickListener;\n&#x27;
                           &#x27;import android.widget.MultiAutoCompleteTextView;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.automattic.simplenote.R;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class TagsMultiAutoCompleteTextView extends &#x27;
                           &#x27;MultiAutoCompleteTextView implements &#x27;
                           &#x27;OnItemClickListener {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public interface OnTagAddedListener {\n&#x27;
                           &#x27;        public void onTagsChanged(String &#x27;
                           &#x27;tagString);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private final String TAG = &#x27;
                           &#x27;&quot;TagsMultiAutoCompleteTextView&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private OnTagAddedListener &#x27;
                           &#x27;mTagsChangedListener;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context) {\n&#x27;
                           &#x27;        super(context);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs) {\n&#x27;
                           &#x27;        super(context, attrs);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs,\n&#x27;
                           &#x27;                                         int &#x27;
                           &#x27;defStyle) {\n&#x27;
                           &#x27;        super(context, attrs, defStyle);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;setOnTagAddedListener(OnTagAddedListener &#x27;
                           &#x27;listener){\n&#x27;
                           &#x27;        mTagsChangedListener = listener;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* set listeners for item click and text &#x27;
                           &#x27;change */\n&#x27;
                           &#x27;    public void init(Context context) {\n&#x27;
                           &#x27;        setOnItemClickListener(this);\n&#x27;
                           &#x27;        addTextChangedListener(textWatcher);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*TextWatcher, If user types any tag name and &#x27;
                           &#x27;presses space then following code will regenerate &#x27;
                           &#x27;chips */\n&#x27;
                           &#x27;    private TextWatcher textWatcher = new &#x27;
                           &#x27;TextWatcher() {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void onTextChanged(CharSequence s, &#x27;
                           &#x27;int start, int before, int count) {\n&#x27;
                           &quot;            // If we reach an image span, let&#x27;s &quot;
                           &#x27;remove it as well as the tag text behind it.\n&#x27;
                           &#x27;            if (before == 1) {\n&#x27;
                           &#x27;                SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(s);\n&#x27;
                           &#x27;                ImageSpan[] imageSpans = &#x27;
                           &#x27;ssb.getSpans(start, start, ImageSpan.class);\n&#x27;
                           &#x27;                if (imageSpans.length &gt; 0) {\n&#x27;
                           &#x27;                    ImageSpan tagImageSpan = &#x27;
                           &#x27;imageSpans[0];\n&#x27;
                           &#x27;                    int tagStart = &#x27;
                           &#x27;ssb.getSpanStart(tagImageSpan);\n&#x27;
                           &#x27;                    int tagEnd = &#x27;
                           &#x27;ssb.getSpanEnd(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.removeSpan(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.replace(tagStart, tagEnd, &#x27;
                           &#x27;&quot;&quot;);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;notifyTagsChanged(ssb.toString());\n&#x27;
                           &#x27;                    return;\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;\n&#x27;
                           &quot;            if (count &gt;= 1 &amp;&amp; s.charAt(start) == &#x27; &quot;
                           &quot;&#x27;) notifyTagsChanged();\n&quot;
                           &#x27;            \n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void beforeTextChanged(CharSequence &#x27;
                           &#x27;s, int start, int count, int after) {\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void afterTextChanged(Editable s) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    };\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(){\n&#x27;
                           &#x27;        notifyTagsChanged(getText().toString());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(String &#x27;
                           &#x27;tagString){\n&#x27;
                           &#x27;        if(mTagsChangedListener != null){\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mTagsChangedListener.onTagsChanged(tagString);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*This function has whole logic for chips &#x27;
                           &#x27;generate*/\n&#x27;
                           &#x27;    public void setChips(CharSequence text){\n&#x27;
                           &#x27;        // split string with space\n&#x27;
                           &#x27;        SimpleStringSplitter tags = new &#x27;
                           &quot;SimpleStringSplitter(&#x27; &#x27;);\n&quot;
                           &#x27;        tags.setString(text.toString());\n&#x27;
                           &#x27;        SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(text);\n&#x27;
                           &#x27;        int x = 0;\n&#x27;
                           &#x27;        // Loop will generate ImageSpan for every &#x27;
                           &#x27;tag separated by spaces\n&#x27;
                           &#x27;        for (String tag : tags) {\n&#x27;
                           &#x27;            // Inflate tags_textview layout\n&#x27;
                           &#x27;            LayoutInflater lf = (LayoutInflater) &#x27;
                           &#x27;getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n&#x27;
                           &#x27;            TextView textView = (TextView) &#x27;
                           &#x27;lf.inflate(R.layout.tags_textview, null);\n&#x27;
                           &#x27;            textView.setText(tag); // set text\n&#x27;
                           &#x27;            // Capture bitmap of generated &#x27;
                           &#x27;textview\n&#x27;
                           &#x27;            int spec = &#x27;
                           &#x27;MeasureSpec.makeMeasureSpec(0, &#x27;
                           &#x27;MeasureSpec.UNSPECIFIED);\n&#x27;
                           &#x27;            textView.measure(spec, spec);\n&#x27;
                           &#x27;            textView.layout(0, 0, &#x27;
                           &#x27;textView.getMeasuredWidth(), &#x27;
                           &#x27;textView.getMeasuredHeight());\n&#x27;
                           &#x27;            Bitmap b = &#x27;
                           &#x27;Bitmap.createBitmap(textView.getWidth(), &#x27;
                           &#x27;textView.getHeight(), Bitmap.Config.ARGB_8888);\n&#x27;
                           &#x27;            Canvas canvas = new Canvas(b);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;canvas.translate(-textView.getScrollX(), &#x27;
                           &#x27;-textView.getScrollY());\n&#x27;
                           &#x27;            textView.draw(canvas);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;textView.setDrawingCacheEnabled(true);\n&#x27;
                           &#x27;            Bitmap cacheBmp = &#x27;
                           &#x27;textView.getDrawingCache();\n&#x27;
                           &#x27;            Bitmap viewBmp = &#x27;
                           &#x27;cacheBmp.copy(Bitmap.Config.ARGB_8888, true);\n&#x27;
                           &#x27;            textView.destroyDrawingCache();  // &#x27;
                           &#x27;destory drawable\n&#x27;
                           &#x27;            // Create bitmap drawable for &#x27;
                           &#x27;imagespan\n&#x27;
                           &#x27;            BitmapDrawable bmpDrawable = new &#x27;
                           &#x27;BitmapDrawable(getContext().getResources(), &#x27;
                           &#x27;viewBmp);\n&#x27;
                           &#x27;            bmpDrawable.setBounds(0, 0, &#x27;
                           &#x27;bmpDrawable.getIntrinsicWidth(), &#x27;
                           &#x27;bmpDrawable.getIntrinsicHeight());\n&#x27;
                           &#x27;            // Create and set &#x27;
                           &#x27;imagespan            \n&#x27;
                           &#x27;            ssb.setSpan(new &#x27;
                           &#x27;ImageSpan(bmpDrawable), x, x + tag.length(), &#x27;
                           &#x27;Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\n&#x27;
                           &#x27;            x = x + tag.length() + 1;\n&#x27;
                           &#x27;        }\n&#x27;
                           &quot;        if (ssb.length() &gt; 0) ssb.append(&#x27; &#x27;);\n&quot;
                           &#x27;        // set chips span\n&#x27;
                           &#x27;        setText(ssb);\n&#x27;
                           &#x27;        //if &#x27;
                           &#x27;(!getText().toString().trim().equals(&quot;&quot;))\n&#x27;
                           &#x27;        // move cursor to last\n&#x27;
                           &#x27;        setSelection(getText().length());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    @Override\n&#x27;
                           &#x27;    public void onItemClick(AdapterView&lt;?&gt; parent, &#x27;
                           &#x27;View view, int position, long id) {\n&#x27;
                           &#x27;        notifyTagsChanged();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;package com.automattic.simplenote.utils;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.app.Activity;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.graphics.Bitmap;\n&#x27;
                           &#x27;import android.graphics.Canvas;\n&#x27;
                           &#x27;import android.graphics.drawable.BitmapDrawable;\n&#x27;
                           &#x27;import android.text.Editable;\n&#x27;
                           &#x27;import android.text.Spannable;\n&#x27;
                           &#x27;import android.text.SpannableStringBuilder;\n&#x27;
                           &#x27;import android.text.TextWatcher;\n&#x27;
                           &#x27;import android.text.style.ImageSpan;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.text.TextUtils.SimpleStringSplitter;\n&#x27;
                           &#x27;import android.util.AttributeSet;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.widget.AdapterView;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.widget.AdapterView.OnItemClickListener;\n&#x27;
                           &#x27;import android.widget.MultiAutoCompleteTextView;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.automattic.simplenote.R;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class TagsMultiAutoCompleteTextView extends &#x27;
                           &#x27;MultiAutoCompleteTextView implements &#x27;
                           &#x27;OnItemClickListener {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public interface OnTagAddedListener {\n&#x27;
                           &#x27;        public void onTagsChanged(String &#x27;
                           &#x27;tagString);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private final String TAG = &#x27;
                           &#x27;&quot;TagsMultiAutoCompleteTextView&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private OnTagAddedListener &#x27;
                           &#x27;mTagsChangedListener;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context) {\n&#x27;
                           &#x27;        super(context);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs) {\n&#x27;
                           &#x27;        super(context, attrs);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs,\n&#x27;
                           &#x27;                                         int &#x27;
                           &#x27;defStyle) {\n&#x27;
                           &#x27;        super(context, attrs, defStyle);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;setOnTagAddedListener(OnTagAddedListener &#x27;
                           &#x27;listener){\n&#x27;
                           &#x27;        mTagsChangedListener = listener;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* set listeners for item click and text &#x27;
                           &#x27;change */\n&#x27;
                           &#x27;    public void init(Context context) {\n&#x27;
                           &#x27;        setOnItemClickListener(this);\n&#x27;
                           &#x27;        addTextChangedListener(textWatcher);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*TextWatcher, If user types any tag name and &#x27;
                           &#x27;presses space then following code will regenerate &#x27;
                           &#x27;chips */\n&#x27;
                           &#x27;    private TextWatcher textWatcher = new &#x27;
                           &#x27;TextWatcher() {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void onTextChanged(CharSequence s, &#x27;
                           &#x27;int start, int before, int count) {\n&#x27;
                           &quot;            // If we reach an image span, let&#x27;s &quot;
                           &#x27;remove it as well as the tag text behind it.\n&#x27;
                           &#x27;            if (before == 1) {\n&#x27;
                           &#x27;                SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(s);\n&#x27;
                           &#x27;                ImageSpan[] imageSpans = &#x27;
                           &#x27;ssb.getSpans(start, start, ImageSpan.class);\n&#x27;
                           &#x27;                if (imageSpans.length &gt; 0) {\n&#x27;
                           &#x27;                    ImageSpan tagImageSpan = &#x27;
                           &#x27;imageSpans[0];\n&#x27;
                           &#x27;                    int tagStart = &#x27;
                           &#x27;ssb.getSpanStart(tagImageSpan);\n&#x27;
                           &#x27;                    int tagEnd = &#x27;
                           &#x27;ssb.getSpanEnd(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.removeSpan(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.replace(tagStart, tagEnd, &#x27;
                           &#x27;&quot;&quot;);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;notifyTagsChanged(ssb.toString());\n&#x27;
                           &#x27;                    return;\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;\n&#x27;
                           &quot;            if (count &gt;= 1 &amp;&amp; s.charAt(start) == &#x27; &quot;
                           &quot;&#x27;) notifyTagsChanged();\n&quot;
                           &#x27;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void beforeTextChanged(CharSequence &#x27;
                           &#x27;s, int start, int count, int after) {\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void afterTextChanged(Editable s) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    };\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(){\n&#x27;
                           &#x27;        notifyTagsChanged(getText().toString());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(String &#x27;
                           &#x27;tagString){\n&#x27;
                           &#x27;        if(mTagsChangedListener != null){\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mTagsChangedListener.onTagsChanged(tagString);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*This function has whole logic for chips &#x27;
                           &#x27;generate*/\n&#x27;
                           &#x27;    public void setChips(CharSequence text){\n&#x27;
                           &#x27;        // split string with space\n&#x27;
                           &#x27;        SimpleStringSplitter tags = new &#x27;
                           &quot;SimpleStringSplitter(&#x27; &#x27;);\n&quot;
                           &#x27;        tags.setString(text.toString());\n&#x27;
                           &#x27;        SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(text);\n&#x27;
                           &#x27;        int x = 0;\n&#x27;
                           &#x27;        // Loop will generate ImageSpan for every &#x27;
                           &#x27;tag separated by spaces\n&#x27;
                           &#x27;        for (String tag : tags) {\n&#x27;
                           &#x27;            // Inflate tags_textview layout\n&#x27;
                           &#x27;            LayoutInflater lf = (LayoutInflater) &#x27;
                           &#x27;getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n&#x27;
                           &#x27;            TextView textView = (TextView) &#x27;
                           &#x27;lf.inflate(R.layout.tags_textview, null);\n&#x27;
                           &#x27;            textView.setText(tag); // set text\n&#x27;
                           &#x27;            // Capture bitmap of generated &#x27;
                           &#x27;textview\n&#x27;
                           &#x27;            int spec = &#x27;
                           &#x27;MeasureSpec.makeMeasureSpec(0, &#x27;
                           &#x27;MeasureSpec.UNSPECIFIED);\n&#x27;
                           &#x27;            textView.measure(spec, spec);\n&#x27;
                           &#x27;            textView.layout(0, 0, &#x27;
                           &#x27;textView.getMeasuredWidth(), &#x27;
                           &#x27;textView.getMeasuredHeight());\n&#x27;
                           &#x27;            Bitmap b = &#x27;
                           &#x27;Bitmap.createBitmap(textView.getWidth(), &#x27;
                           &#x27;textView.getHeight(), Bitmap.Config.ARGB_8888);\n&#x27;
                           &#x27;            Canvas canvas = new Canvas(b);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;canvas.translate(-textView.getScrollX(), &#x27;
                           &#x27;-textView.getScrollY());\n&#x27;
                           &#x27;            textView.draw(canvas);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;textView.setDrawingCacheEnabled(true);\n&#x27;
                           &#x27;            Bitmap cacheBmp = &#x27;
                           &#x27;textView.getDrawingCache();\n&#x27;
                           &#x27;            Bitmap viewBmp = &#x27;
                           &#x27;cacheBmp.copy(Bitmap.Config.ARGB_8888, true);\n&#x27;
                           &#x27;            textView.destroyDrawingCache();  // &#x27;
                           &#x27;destory drawable\n&#x27;
                           &#x27;            // Create bitmap drawable for &#x27;
                           &#x27;imagespan\n&#x27;
                           &#x27;            BitmapDrawable bmpDrawable = new &#x27;
                           &#x27;BitmapDrawable(getContext().getResources(), &#x27;
                           &#x27;viewBmp);\n&#x27;
                           &#x27;            bmpDrawable.setBounds(0, 0, &#x27;
                           &#x27;bmpDrawable.getIntrinsicWidth(), &#x27;
                           &#x27;bmpDrawable.getIntrinsicHeight());\n&#x27;
                           &#x27;            // Create and set imagespan\n&#x27;
                           &#x27;            ssb.setSpan(new &#x27;
                           &#x27;ImageSpan(bmpDrawable), x, x + tag.length(), &#x27;
                           &#x27;Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\n&#x27;
                           &#x27;            x = x + tag.length() + 1;\n&#x27;
                           &#x27;        }\n&#x27;
                           &quot;        if (ssb.length() &gt; 0) ssb.append(&#x27; &#x27;);\n&quot;
                           &#x27;        // set chips span\n&#x27;
                           &#x27;        setText(ssb);\n&#x27;
                           &#x27;        //if &#x27;
                           &#x27;(!getText().toString().trim().equals(&quot;&quot;))\n&#x27;
                           &#x27;        // move cursor to last\n&#x27;
                           &#x27;        setSelection(getText().length());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    @Override\n&#x27;
                           &#x27;    public void onItemClick(AdapterView&lt;?&gt; parent, &#x27;
                           &#x27;View view, int position, long id) {\n&#x27;
                           &#x27;        notifyTagsChanged();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;}\n&#x27;},
          {&#x27;CHUNK_OURS&#x27;: &#x27;&#x27;,
           &#x27;CHUNK_THEIRS&#x27;: &#x27;\n&#x27;
                           &#x27;package com.automattic.simplenote.utils;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import android.app.Activity;\n&#x27;
                           &#x27;import android.content.Context;\n&#x27;
                           &#x27;import android.graphics.Bitmap;\n&#x27;
                           &#x27;import android.graphics.Canvas;\n&#x27;
                           &#x27;import android.graphics.drawable.BitmapDrawable;\n&#x27;
                           &#x27;import android.text.Editable;\n&#x27;
                           &#x27;import android.text.Spannable;\n&#x27;
                           &#x27;import android.text.SpannableStringBuilder;\n&#x27;
                           &#x27;import android.text.TextWatcher;\n&#x27;
                           &#x27;import android.text.style.ImageSpan;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.text.TextUtils.SimpleStringSplitter;\n&#x27;
                           &#x27;import android.util.AttributeSet;\n&#x27;
                           &#x27;import android.view.LayoutInflater;\n&#x27;
                           &#x27;import android.view.View;\n&#x27;
                           &#x27;import android.widget.AdapterView;\n&#x27;
                           &#x27;import &#x27;
                           &#x27;android.widget.AdapterView.OnItemClickListener;\n&#x27;
                           &#x27;import android.widget.MultiAutoCompleteTextView;\n&#x27;
                           &#x27;import android.widget.TextView;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import com.automattic.simplenote.R;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;import java.util.List;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;public class TagsMultiAutoCompleteTextView extends &#x27;
                           &#x27;MultiAutoCompleteTextView implements &#x27;
                           &#x27;OnItemClickListener {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public interface OnTagAddedListener {\n&#x27;
                           &#x27;        public void onTagsChanged(String &#x27;
                           &#x27;tagString);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private final String TAG = &#x27;
                           &#x27;&quot;TagsMultiAutoCompleteTextView&quot;;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    private OnTagAddedListener &#x27;
                           &#x27;mTagsChangedListener;\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context) {\n&#x27;
                           &#x27;        super(context);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs) {\n&#x27;
                           &#x27;        super(context, attrs);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* Constructor */\n&#x27;
                           &#x27;    public TagsMultiAutoCompleteTextView(Context &#x27;
                           &#x27;context, AttributeSet attrs,\n&#x27;
                           &#x27;                                         int &#x27;
                           &#x27;defStyle) {\n&#x27;
                           &#x27;        super(context, attrs, defStyle);\n&#x27;
                           &#x27;        init(context);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void &#x27;
                           &#x27;setOnTagAddedListener(OnTagAddedListener &#x27;
                           &#x27;listener){\n&#x27;
                           &#x27;        mTagsChangedListener = listener;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /* set listeners for item click and text &#x27;
                           &#x27;change */\n&#x27;
                           &#x27;    public void init(Context context) {\n&#x27;
                           &#x27;        setOnItemClickListener(this);\n&#x27;
                           &#x27;        addTextChangedListener(textWatcher);\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*TextWatcher, If user types any tag name and &#x27;
                           &#x27;presses space then following code will regenerate &#x27;
                           &#x27;chips */\n&#x27;
                           &#x27;    private TextWatcher textWatcher = new &#x27;
                           &#x27;TextWatcher() {\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void onTextChanged(CharSequence s, &#x27;
                           &#x27;int start, int before, int count) {\n&#x27;
                           &quot;            // If we reach an image span, let&#x27;s &quot;
                           &#x27;remove it as well as the tag text behind it.\n&#x27;
                           &#x27;            if (before == 1) {\n&#x27;
                           &#x27;                SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(s);\n&#x27;
                           &#x27;                ImageSpan[] imageSpans = &#x27;
                           &#x27;ssb.getSpans(start, start, ImageSpan.class);\n&#x27;
                           &#x27;                if (imageSpans.length &gt; 0) {\n&#x27;
                           &#x27;                    ImageSpan tagImageSpan = &#x27;
                           &#x27;imageSpans[0];\n&#x27;
                           &#x27;                    int tagStart = &#x27;
                           &#x27;ssb.getSpanStart(tagImageSpan);\n&#x27;
                           &#x27;                    int tagEnd = &#x27;
                           &#x27;ssb.getSpanEnd(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.removeSpan(tagImageSpan);\n&#x27;
                           &#x27;                    ssb.replace(tagStart, tagEnd, &#x27;
                           &#x27;&quot;&quot;);\n&#x27;
                           &#x27;                    &#x27;
                           &#x27;notifyTagsChanged(ssb.toString());\n&#x27;
                           &#x27;                    return;\n&#x27;
                           &#x27;                }\n&#x27;
                           &#x27;            }\n&#x27;
                           &#x27;\n&#x27;
                           &quot;            if (count &gt;= 1 &amp;&amp; s.charAt(start) == &#x27; &quot;
                           &quot;&#x27;) notifyTagsChanged();\n&quot;
                           &#x27;\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void beforeTextChanged(CharSequence &#x27;
                           &#x27;s, int start, int count, int after) {\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;        @Override\n&#x27;
                           &#x27;        public void afterTextChanged(Editable s) &#x27;
                           &#x27;{\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    };\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(){\n&#x27;
                           &#x27;        notifyTagsChanged(getText().toString());\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    public void notifyTagsChanged(String &#x27;
                           &#x27;tagString){\n&#x27;
                           &#x27;        if(mTagsChangedListener != null){\n&#x27;
                           &#x27;            &#x27;
                           &#x27;mTagsChangedListener.onTagsChanged(tagString);\n&#x27;
                           &#x27;        }\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    /*This function has whole logic for chips &#x27;
                           &#x27;generate*/\n&#x27;
                           &#x27;    public void setChips(CharSequence text){\n&#x27;
                           &#x27;        // split string with space\n&#x27;
                           &#x27;        SimpleStringSplitter tags = new &#x27;
                           &quot;SimpleStringSplitter(&#x27; &#x27;);\n&quot;
                           &#x27;        tags.setString(text.toString());\n&#x27;
                           &#x27;        SpannableStringBuilder ssb = new &#x27;
                           &#x27;SpannableStringBuilder(text);\n&#x27;
                           &#x27;        int x = 0;\n&#x27;
                           &#x27;        // Loop will generate ImageSpan for every &#x27;
                           &#x27;tag separated by spaces\n&#x27;
                           &#x27;        for (String tag : tags) {\n&#x27;
                           &#x27;            // Inflate tags_textview layout\n&#x27;
                           &#x27;            LayoutInflater lf = (LayoutInflater) &#x27;
                           &#x27;getContext().getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n&#x27;
                           &#x27;            TextView textView = (TextView) &#x27;
                           &#x27;lf.inflate(R.layout.tags_textview, null);\n&#x27;
                           &#x27;            textView.setText(tag); // set text\n&#x27;
                           &#x27;            // Capture bitmap of generated &#x27;
                           &#x27;textview\n&#x27;
                           &#x27;            int spec = &#x27;
                           &#x27;MeasureSpec.makeMeasureSpec(0, &#x27;
                           &#x27;MeasureSpec.UNSPECIFIED);\n&#x27;
                           &#x27;            textView.measure(spec, spec);\n&#x27;
                           &#x27;            textView.layout(0, 0, &#x27;
                           &#x27;textView.getMeasuredWidth(), &#x27;
                           &#x27;textView.getMeasuredHeight());\n&#x27;
                           &#x27;            Bitmap b = &#x27;
                           &#x27;Bitmap.createBitmap(textView.getWidth(), &#x27;
                           &#x27;textView.getHeight(), Bitmap.Config.ARGB_8888);\n&#x27;
                           &#x27;            Canvas canvas = new Canvas(b);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;canvas.translate(-textView.getScrollX(), &#x27;
                           &#x27;-textView.getScrollY());\n&#x27;
                           &#x27;            textView.draw(canvas);\n&#x27;
                           &#x27;            &#x27;
                           &#x27;textView.setDrawingCacheEnabled(true);\n&#x27;
                           &#x27;            Bitmap cacheBmp = &#x27;
                           &#x27;textView.getDrawingCache();\n&#x27;
                           &#x27;            Bitmap viewBmp = &#x27;
                           &#x27;cacheBmp.copy(Bitmap.Config.ARGB_8888, true);\n&#x27;
                           &#x27;            textView.destroyDrawingCache();  // &#x27;
                           &#x27;destory drawable\n&#x27;
                           &#x27;            // Create bitmap drawable for &#x27;
                           &#x27;imagespan\n&#x27;
                           &#x27;            BitmapDrawable bmpDrawable = new &#x27;
                           &#x27;BitmapDrawable(getContext().getResources(), &#x27;
                           &#x27;viewBmp);\n&#x27;
                           &#x27;            bmpDrawable.setBounds(0, 0, &#x27;
                           &#x27;bmpDrawable.getIntrinsicWidth(), &#x27;
                           &#x27;bmpDrawable.getIntrinsicHeight());\n&#x27;
                           &#x27;            // Create and set imagespan\n&#x27;
                           &#x27;            ssb.setSpan(new &#x27;
                           &#x27;ImageSpan(bmpDrawable), x, x + tag.length(), &#x27;
                           &#x27;Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);\n&#x27;
                           &#x27;            x = x + tag.length() + 1;\n&#x27;
                           &#x27;        }\n&#x27;
                           &quot;        if (ssb.length() &gt; 0) ssb.append(&#x27; &#x27;);\n&quot;
                           &#x27;        // set chips span\n&#x27;
                           &#x27;        setText(ssb);\n&#x27;
                           &#x27;        //if &#x27;
                           &#x27;(!getText().toString().trim().equals(&quot;&quot;))\n&#x27;
                           &#x27;        // move cursor to last\n&#x27;
                           &#x27;        setSelection(getText().length());\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;    @Override\n&#x27;
                           &#x27;    public void onItemClick(AdapterView&lt;?&gt; parent, &#x27;
                           &#x27;View view, int position, long id) {\n&#x27;
                           &#x27;        notifyTagsChanged();\n&#x27;
                           &#x27;    }\n&#x27;
                           &#x27;\n&#x27;
                           &#x27;}\n&#x27;}],
   &#x27;mergers&#x27;: {&#x27;spork&#x27;, &#x27;baseline&#x27;, &#x27;jfstmerge&#x27;}}]]</pre>
          </body>
        </html>
        