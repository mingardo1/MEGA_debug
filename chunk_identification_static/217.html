<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>217</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    217
                    <a href="216.html">prev</a>
                    <a href="218.html">next</a>
                    <a href="217_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_85784acfd63b348aa9271a84368432c2699a9d67_core/broadleaf-profile/src/main/java/org/broadleafcommerce/profile/core/dao/CustomerAddressDaoImpl.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;85784acfd63b348aa9271a84368432c2699a9d67:core/broadleaf-profile/src/main/java/org/broadleafcommerce/profile/core/dao/CustomerAddressDaoImpl.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;85784acfd63b348aa9271a84368432c2699a9d67^1:core/broadleaf-profile/src/main/java/org/broadleafcommerce/profile/core/dao/CustomerAddressDaoImpl.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;85784acfd63b348aa9271a84368432c2699a9d67^2:core/broadleaf-profile/src/main/java/org/broadleafcommerce/profile/core/dao/CustomerAddressDaoImpl.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;ce5c9279711e306f5901899835666ffa510d85bd:core/broadleaf-profile/src/main/java/org/broadleafcommerce/profile/core/dao/CustomerAddressDaoImpl.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="195929208389810495" onmouseenter="enter('195929208389810495');" onmouseout="out('195929208389810495');" style="">   3  * BroadleafCommerce Profile                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="6027610907884846264" onmouseenter="enter('6027610907884846264');" onmouseout="out('6027610907884846264');" style="">  18 package org.broadleafcommerce.profile.core.dao;                                                          </span>
<span  style="">  19                                                                                                          </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  20 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="6426334870911270785" onmouseenter="enter('6426334870911270785');" onmouseout="out('6426334870911270785');" style="">  21 import org.broadleafcommerce.profile.core.domain.CustomerAddress;                                        </span>
<span class="3849549693512608890" onmouseenter="enter('3849549693512608890');" onmouseout="out('3849549693512608890');" style="">  22 import org.broadleafcommerce.profile.core.domain.CustomerAddressImpl;                                    </span>
<span class="-1670062540256016456" onmouseenter="enter('-1670062540256016456');" onmouseout="out('-1670062540256016456');" style="">  23 import org.hibernate.jpa.QueryHints;                                                                     </span>
<span class="-4190555539420257130" onmouseenter="enter('-4190555539420257130');" onmouseout="out('-4190555539420257130');" style="">  24 import org.springframework.stereotype.Repository;                                                        </span>
<span  style="">  25                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  27 import java.util.List;                                                                                   </span>
<span  style="">  28                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  29 import javax.annotation.Resource;                                                                        </span>
<span class="7911938180110628123" onmouseenter="enter('7911938180110628123');" onmouseout="out('7911938180110628123');" style="">  30 import javax.persistence.EntityManager;                                                                  </span>
<span class="3821515051839343306" onmouseenter="enter('3821515051839343306');" onmouseout="out('3821515051839343306');" style="">  31 import javax.persistence.PersistenceContext;                                                             </span>
<span class="2825707167313657836" onmouseenter="enter('2825707167313657836');" onmouseout="out('2825707167313657836');" style="">  32 import javax.persistence.Query;                                                                          </span>
<span class="6539032290250175619" onmouseenter="enter('6539032290250175619');" onmouseout="out('6539032290250175619');" style="">  33 import javax.persistence.TypedQuery;                                                                     </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="">  34 import javax.persistence.criteria.CriteriaBuilder;                                                       </span>
<span class="9191540725958216337" onmouseenter="enter('9191540725958216337');" onmouseout="out('9191540725958216337');" style="">  35 import javax.persistence.criteria.CriteriaQuery;                                                         </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="">  36 import javax.persistence.criteria.Predicate;                                                             </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="">  37 import javax.persistence.criteria.Root;                                                                  </span>
<span  style="">  38                                                                                                          </span>
<span class="4234143865573250754" onmouseenter="enter('4234143865573250754');" onmouseout="out('4234143865573250754');" style="">  39 @Repository(&quot;blCustomerAddressDao&quot;)                                                                      </span>
<span class="-5847330852586179203" onmouseenter="enter('-5847330852586179203');" onmouseout="out('-5847330852586179203');" style="">  40 public class CustomerAddressDaoImpl implements CustomerAddressDao {                                      </span>
<span  style="">  41                                                                                                          </span>
<span class="5710637357667853932" onmouseenter="enter('5710637357667853932');" onmouseout="out('5710637357667853932');" style="">  42     @PersistenceContext(unitName = &quot;blPU&quot;)                                                               </span>
<span class="-5741815223868414625" onmouseenter="enter('-5741815223868414625');" onmouseout="out('-5741815223868414625');" style="">  43     protected EntityManager em;                                                                          </span>
<span  style="">  44                                                                                                          </span>
<span class="6650882675825573659" onmouseenter="enter('6650882675825573659');" onmouseout="out('6650882675825573659');" style="">  45     @Resource(name = &quot;blEntityConfiguration&quot;)                                                            </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style="">  46     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">  49     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="5841285089711821481" onmouseenter="enter('5841285089711821481');" onmouseout="out('5841285089711821481');" style="">  50     public List&lt;CustomerAddress&gt; readActiveCustomerAddressesByCustomerId(Long customerId) {              </span>
<span class="-8727618258019471447" onmouseenter="enter('-8727618258019471447');" onmouseout="out('-8727618258019471447');" style="">  51         Query query = em.createNamedQuery(&quot;BC_READ_ACTIVE_CUSTOMER_ADDRESSES_BY_CUSTOMER_ID&quot;);           </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style="">  52         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="-548945811583991909" onmouseenter="enter('-548945811583991909');" onmouseout="out('-548945811583991909');" style="">  53         query.setParameter(&quot;archived&quot;, &#x27;N&#x27;);                                                             </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  54         return query.getResultList();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55     }                                                                                                    </span>
<span  style="">  56                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  57     @Override                                                                                            </span>
<span class="-3193932741741959187" onmouseenter="enter('-3193932741741959187');" onmouseout="out('-3193932741741959187');" style="">  58     public CustomerAddress save(CustomerAddress customerAddress) {                                       </span>
<span class="564614569327986057" onmouseenter="enter('564614569327986057');" onmouseout="out('564614569327986057');" style="">  59             return em.merge(customerAddress);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60     }                                                                                                    </span>
<span  style="">  61                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  62     @Override                                                                                            </span>
<span class="-3157048316807924532" onmouseenter="enter('-3157048316807924532');" onmouseout="out('-3157048316807924532');" style="">  63     public CustomerAddress create() {                                                                    </span>
<span class="8271516022795133195" onmouseenter="enter('8271516022795133195');" onmouseout="out('8271516022795133195');" style=""><abbr title="  64         return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName());">  64         return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName()ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65     }                                                                                                    </span>
<span  style="">  66                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67     @Override                                                                                            </span>
<span class="-6194539781709384496" onmouseenter="enter('-6194539781709384496');" onmouseout="out('-6194539781709384496');" style="">  68     public List&lt;CustomerAddress&gt; readBatchCustomerAddresses(int start, int pageSize) {                   </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  69         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style="">  70         CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);            </span>
<span class="4612987881921830605" onmouseenter="enter('4612987881921830605');" onmouseout="out('4612987881921830605');" style="">  71         Root&lt;CustomerAddressImpl&gt; customer = criteria.from(CustomerAddressImpl.class);                   </span>
<span class="-1221922620640865590" onmouseenter="enter('-1221922620640865590');" onmouseout="out('-1221922620640865590');" style="">  72         criteria.select(customer);                                                                       </span>
<span  style="">  73                                                                                                          </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style="">  74         TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                    </span>
<span class="7256466159581272771" onmouseenter="enter('7256466159581272771');" onmouseout="out('7256466159581272771');" style="">  75         query.setFirstResult(start);                                                                     </span>
<span class="7206424276034703302" onmouseenter="enter('7206424276034703302');" onmouseout="out('7206424276034703302');" style="">  76         query.setMaxResults(pageSize);                                                                   </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style="">  77         query.setHint(QueryHints.HINT_CACHEABLE, true);                                                  </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style="">  78         query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                            </span>
<span  style="">  79                                                                                                          </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  80         return query.getResultList();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81     }                                                                                                    </span>
<span  style="">  82                                                                                                          </span>
<span  style="">  83                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  84     @Override                                                                                            </span>
<span class="7504543473263375719" onmouseenter="enter('7504543473263375719');" onmouseout="out('7504543473263375719');" style="">  85     public Long readNumberOfAddresses() {                                                                </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  86         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="1553585152448885012" onmouseenter="enter('1553585152448885012');" onmouseout="out('1553585152448885012');" style="">  87         CriteriaQuery&lt;Long&gt; criteria = builder.createQuery(Long.class);                                  </span>
<span class="-6031368113203336526" onmouseenter="enter('-6031368113203336526');" onmouseout="out('-6031368113203336526');" style="">  88         criteria.select(builder.count(criteria.from(CustomerAddressImpl.class)));                        </span>
<span class="2641644591534382769" onmouseenter="enter('2641644591534382769');" onmouseout="out('2641644591534382769');" style="">  89         TypedQuery&lt;Long&gt; query = em.createQuery(criteria);                                               </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style="">  90         return query.getSingleResult();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91     }                                                                                                    </span>
<span  style="">  92                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  93     @Override                                                                                            </span>
<span class="8498262962855997672" onmouseenter="enter('8498262962855997672');" onmouseout="out('8498262962855997672');" style="">  94     public CustomerAddress readCustomerAddressById(Long customerAddressId) {                             </span>
<span class="-7280304719837821647" onmouseenter="enter('-7280304719837821647');" onmouseout="out('-7280304719837821647');" style="">  95         return em.find(CustomerAddressImpl.class, customerAddressId);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96     }                                                                                                    </span>
<span  style="">  97                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  98     @Override                                                                                            </span>
<span class="5509964832384242344" onmouseenter="enter('5509964832384242344');" onmouseout="out('5509964832384242344');" style="">  99     public void makeCustomerAddressDefault(Long customerAddressId, Long customerId) {                    </span>
<span class="6227423108233917793" onmouseenter="enter('6227423108233917793');" onmouseout="out('6227423108233917793');" style=""> 100         // Throws a RuntimeException if the CustomerAddress is not found                                 </span>
<span class="-2333155017407435549" onmouseenter="enter('-2333155017407435549');" onmouseout="out('-2333155017407435549');" style=""><abbr title=" 101         CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customerId);"> 101         CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customeðŸ”µ</abbr></span>
<span  style=""> 102                                                                                                          </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 103         if (customerAddress != null) {                                                                   </span>
<span class="-828813452559622140" onmouseenter="enter('-828813452559622140');" onmouseout="out('-828813452559622140');" style=""> 104             clearDefaultAddressForCustomer(customerId);                                                  </span>
<span  style=""> 105                                                                                                          </span>
<span class="-927886860919280924" onmouseenter="enter('-927886860919280924');" onmouseout="out('-927886860919280924');" style=""> 106             em.refresh(customerAddress);                                                                 </span>
<span class="4463382214218800723" onmouseenter="enter('4463382214218800723');" onmouseout="out('4463382214218800723');" style=""> 107             customerAddress.getAddress().setDefault(true);                                               </span>
<span  style=""> 108                                                                                                          </span>
<span class="8850746041642701545" onmouseenter="enter('8850746041642701545');" onmouseout="out('8850746041642701545');" style=""> 109             save(customerAddress);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113     @Override                                                                                            </span>
<span class="1241467502724446835" onmouseenter="enter('1241467502724446835');" onmouseout="out('1241467502724446835');" style=""><abbr title=" 114     public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) {"> 114     public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) ðŸ”µ</abbr></span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style=""> 115         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style=""> 116         CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);            </span>
<span class="393679443130889984" onmouseenter="enter('393679443130889984');" onmouseout="out('393679443130889984');" style=""> 117         Root&lt;CustomerAddressImpl&gt; customerAddress = criteria.from(CustomerAddressImpl.class);            </span>
<span class="-522284501261771371" onmouseenter="enter('-522284501261771371');" onmouseout="out('-522284501261771371');" style=""> 118         criteria.select(customerAddress);                                                                </span>
<span  style=""> 119                                                                                                          </span>
<span class="5017050138899260321" onmouseenter="enter('5017050138899260321');" onmouseout="out('5017050138899260321');" style=""> 120         List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();                                                  </span>
<span class="-2542841621387878562" onmouseenter="enter('-2542841621387878562');" onmouseout="out('-2542841621387878562');" style=""> 121         predicates.add(builder.equal(customerAddress.get(&quot;id&quot;), customerAddressId));                     </span>
<span class="8433502504722478197" onmouseenter="enter('8433502504722478197');" onmouseout="out('8433502504722478197');" style=""> 122         predicates.add(builder.equal(customerAddress.get(&quot;customer&quot;).get(&quot;id&quot;), customerId));            </span>
<span  style=""> 123                                                                                                          </span>
<span class="4292944152199103147" onmouseenter="enter('4292944152199103147');" onmouseout="out('4292944152199103147');" style=""> 124         criteria.where(builder.and(predicates.toArray(new Predicate[predicates.size()])));               </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style=""> 125         TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                    </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style=""> 126         query.setHint(QueryHints.HINT_CACHEABLE, true);                                                  </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style=""> 127         query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                            </span>
<span  style=""> 128                                                                                                          </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style=""> 129         return query.getSingleResult();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 132     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="-4927787537759965463" onmouseenter="enter('-4927787537759965463');" onmouseout="out('-4927787537759965463');" style=""> 133     protected void clearDefaultAddressForCustomer(Long customerId) {                                     </span>
<span class="7904778526223369490" onmouseenter="enter('7904778526223369490');" onmouseout="out('7904778526223369490');" style=""><abbr title=" 134         // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on the same table"> 134         // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subðŸ”µ</abbr></span>
<span class="5773339046720584884" onmouseenter="enter('5773339046720584884');" onmouseout="out('5773339046720584884');" style=""> 135         Query query = em.createNamedQuery(&quot;BC_READ_DEFAULT_ADDRESS_IDS_BY_CUSTOMER_ID&quot;);                 </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 136         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="6358392185322259832" onmouseenter="enter('6358392185322259832');" onmouseout="out('6358392185322259832');" style=""> 137         List&lt;Long&gt; addressIds = query.getResultList();                                                   </span>
<span class="2579245229178922994" onmouseenter="enter('2579245229178922994');" onmouseout="out('2579245229178922994');" style=""> 138         Query update = em.createNamedQuery(&quot;BC_CLEAR_DEFAULT_ADDRESS_BY_IDS&quot;);                           </span>
<span class="-6804883647222027806" onmouseenter="enter('-6804883647222027806');" onmouseout="out('-6804883647222027806');" style=""> 139         update.setParameter(&quot;addressIds&quot;, addressIds);                                                   </span>
<span class="2732253004329504343" onmouseenter="enter('2732253004329504343');" onmouseout="out('2732253004329504343');" style=""> 140         update.executeUpdate();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span  style=""> 142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143     @Override                                                                                            </span>
<span class="6070738824775840977" onmouseenter="enter('6070738824775840977');" onmouseout="out('6070738824775840977');" style=""> 144     public void deleteCustomerAddressById(Long customerAddressId) {                                      </span>
<span class="3332479756782710599" onmouseenter="enter('3332479756782710599');" onmouseout="out('3332479756782710599');" style=""> 145         CustomerAddress customerAddress = readCustomerAddressById(customerAddressId);                    </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 146         if (customerAddress != null) {                                                                   </span>
<span class="-3578987786562339930" onmouseenter="enter('-3578987786562339930');" onmouseout="out('-3578987786562339930');" style=""> 147             em.remove(customerAddress);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149     }                                                                                                    </span>
<span  style=""> 150                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 151 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 152     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 153 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154                                                                                                          </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 155 =======                                                                                                  </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 156 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 157     @Override                                                                                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 158     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="2739438753959711043" onmouseenter="enter('2739438753959711043');" onmouseout="out('2739438753959711043');" style=""> 159     public CustomerAddress findDefaultCustomerAddress(Long customerId) {                                 </span>
<span class="401288734530170433" onmouseenter="enter('401288734530170433');" onmouseout="out('401288734530170433');" style=""> 160         Query query = em.createNamedQuery(&quot;BC_FIND_DEFAULT_ADDRESS_BY_CUSTOMER_ID&quot;);                     </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 161         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="5538742140932691325" onmouseenter="enter('5538742140932691325');" onmouseout="out('5538742140932691325');" style=""> 162         List&lt;CustomerAddress&gt; customerAddresses = query.getResultList();                                 </span>
<span class="7583529804453956901" onmouseenter="enter('7583529804453956901');" onmouseout="out('7583529804453956901');" style=""> 163         return customerAddresses.isEmpty() ? null : customerAddresses.get(0);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="195929208389810495" onmouseenter="enter('195929208389810495');" onmouseout="out('195929208389810495');" style="">   3  * BroadleafCommerce Profile                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="6027610907884846264" onmouseenter="enter('6027610907884846264');" onmouseout="out('6027610907884846264');" style="">  18 package org.broadleafcommerce.profile.core.dao;                                                          </span>
<span  style="">  19                                                                                                          </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  20 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="6426334870911270785" onmouseenter="enter('6426334870911270785');" onmouseout="out('6426334870911270785');" style="">  21 import org.broadleafcommerce.profile.core.domain.CustomerAddress;                                        </span>
<span class="3849549693512608890" onmouseenter="enter('3849549693512608890');" onmouseout="out('3849549693512608890');" style="">  22 import org.broadleafcommerce.profile.core.domain.CustomerAddressImpl;                                    </span>
<span class="-1670062540256016456" onmouseenter="enter('-1670062540256016456');" onmouseout="out('-1670062540256016456');" style="">  23 import org.hibernate.jpa.QueryHints;                                                                     </span>
<span class="-4190555539420257130" onmouseenter="enter('-4190555539420257130');" onmouseout="out('-4190555539420257130');" style="">  24 import org.springframework.stereotype.Repository;                                                        </span>
<span  style="">  25                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  27 import java.util.List;                                                                                   </span>
<span  style="">  28                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  29 import javax.annotation.Resource;                                                                        </span>
<span class="7911938180110628123" onmouseenter="enter('7911938180110628123');" onmouseout="out('7911938180110628123');" style="">  30 import javax.persistence.EntityManager;                                                                  </span>
<span class="3821515051839343306" onmouseenter="enter('3821515051839343306');" onmouseout="out('3821515051839343306');" style="">  31 import javax.persistence.PersistenceContext;                                                             </span>
<span class="2825707167313657836" onmouseenter="enter('2825707167313657836');" onmouseout="out('2825707167313657836');" style="">  32 import javax.persistence.Query;                                                                          </span>
<span class="6539032290250175619" onmouseenter="enter('6539032290250175619');" onmouseout="out('6539032290250175619');" style="">  33 import javax.persistence.TypedQuery;                                                                     </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="">  34 import javax.persistence.criteria.CriteriaBuilder;                                                       </span>
<span class="9191540725958216337" onmouseenter="enter('9191540725958216337');" onmouseout="out('9191540725958216337');" style="">  35 import javax.persistence.criteria.CriteriaQuery;                                                         </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="">  36 import javax.persistence.criteria.Predicate;                                                             </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="">  37 import javax.persistence.criteria.Root;                                                                  </span>
<span  style="">  38                                                                                                          </span>
<span class="4234143865573250754" onmouseenter="enter('4234143865573250754');" onmouseout="out('4234143865573250754');" style="">  39 @Repository(&quot;blCustomerAddressDao&quot;)                                                                      </span>
<span class="-5847330852586179203" onmouseenter="enter('-5847330852586179203');" onmouseout="out('-5847330852586179203');" style="">  40 public class CustomerAddressDaoImpl implements CustomerAddressDao {                                      </span>
<span  style="">  41                                                                                                          </span>
<span class="5710637357667853932" onmouseenter="enter('5710637357667853932');" onmouseout="out('5710637357667853932');" style="">  42     @PersistenceContext(unitName = &quot;blPU&quot;)                                                               </span>
<span class="-5741815223868414625" onmouseenter="enter('-5741815223868414625');" onmouseout="out('-5741815223868414625');" style="">  43     protected EntityManager em;                                                                          </span>
<span  style="">  44                                                                                                          </span>
<span class="6650882675825573659" onmouseenter="enter('6650882675825573659');" onmouseout="out('6650882675825573659');" style="">  45     @Resource(name = &quot;blEntityConfiguration&quot;)                                                            </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style="">  46     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style="">  47                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48     @Override                                                                                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">  49     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="5841285089711821481" onmouseenter="enter('5841285089711821481');" onmouseout="out('5841285089711821481');" style="">  50     public List&lt;CustomerAddress&gt; readActiveCustomerAddressesByCustomerId(Long customerId) {              </span>
<span class="-8727618258019471447" onmouseenter="enter('-8727618258019471447');" onmouseout="out('-8727618258019471447');" style="">  51         Query query = em.createNamedQuery(&quot;BC_READ_ACTIVE_CUSTOMER_ADDRESSES_BY_CUSTOMER_ID&quot;);           </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style="">  52         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="-548945811583991909" onmouseenter="enter('-548945811583991909');" onmouseout="out('-548945811583991909');" style="">  53         query.setParameter(&quot;archived&quot;, &#x27;N&#x27;);                                                             </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  54         return query.getResultList();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55     }                                                                                                    </span>
<span  style="">  56                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  57     @Override                                                                                            </span>
<span class="-3193932741741959187" onmouseenter="enter('-3193932741741959187');" onmouseout="out('-3193932741741959187');" style="">  58     public CustomerAddress save(CustomerAddress customerAddress) {                                       </span>
<span class="564614569327986057" onmouseenter="enter('564614569327986057');" onmouseout="out('564614569327986057');" style="">  59             return em.merge(customerAddress);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60     }                                                                                                    </span>
<span  style="">  61                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  62     @Override                                                                                            </span>
<span class="-3157048316807924532" onmouseenter="enter('-3157048316807924532');" onmouseout="out('-3157048316807924532');" style="">  63     public CustomerAddress create() {                                                                    </span>
<span class="8271516022795133195" onmouseenter="enter('8271516022795133195');" onmouseout="out('8271516022795133195');" style=""><abbr title="  64         return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName());">  64         return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName()ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65     }                                                                                                    </span>
<span  style="">  66                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67     @Override                                                                                            </span>
<span class="-6194539781709384496" onmouseenter="enter('-6194539781709384496');" onmouseout="out('-6194539781709384496');" style="">  68     public List&lt;CustomerAddress&gt; readBatchCustomerAddresses(int start, int pageSize) {                   </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  69         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style="">  70         CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);            </span>
<span class="4612987881921830605" onmouseenter="enter('4612987881921830605');" onmouseout="out('4612987881921830605');" style="">  71         Root&lt;CustomerAddressImpl&gt; customer = criteria.from(CustomerAddressImpl.class);                   </span>
<span class="-1221922620640865590" onmouseenter="enter('-1221922620640865590');" onmouseout="out('-1221922620640865590');" style="">  72         criteria.select(customer);                                                                       </span>
<span  style="">  73                                                                                                          </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style="">  74         TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                    </span>
<span class="7256466159581272771" onmouseenter="enter('7256466159581272771');" onmouseout="out('7256466159581272771');" style="">  75         query.setFirstResult(start);                                                                     </span>
<span class="7206424276034703302" onmouseenter="enter('7206424276034703302');" onmouseout="out('7206424276034703302');" style="">  76         query.setMaxResults(pageSize);                                                                   </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style="">  77         query.setHint(QueryHints.HINT_CACHEABLE, true);                                                  </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style="">  78         query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                            </span>
<span  style="">  79                                                                                                          </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  80         return query.getResultList();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81     }                                                                                                    </span>
<span  style="">  82                                                                                                          </span>
<span  style="">  83                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  84     @Override                                                                                            </span>
<span class="7504543473263375719" onmouseenter="enter('7504543473263375719');" onmouseout="out('7504543473263375719');" style="">  85     public Long readNumberOfAddresses() {                                                                </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  86         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="1553585152448885012" onmouseenter="enter('1553585152448885012');" onmouseout="out('1553585152448885012');" style="">  87         CriteriaQuery&lt;Long&gt; criteria = builder.createQuery(Long.class);                                  </span>
<span class="-6031368113203336526" onmouseenter="enter('-6031368113203336526');" onmouseout="out('-6031368113203336526');" style="">  88         criteria.select(builder.count(criteria.from(CustomerAddressImpl.class)));                        </span>
<span class="2641644591534382769" onmouseenter="enter('2641644591534382769');" onmouseout="out('2641644591534382769');" style="">  89         TypedQuery&lt;Long&gt; query = em.createQuery(criteria);                                               </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style="">  90         return query.getSingleResult();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91     }                                                                                                    </span>
<span  style="">  92                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  93     @Override                                                                                            </span>
<span class="8498262962855997672" onmouseenter="enter('8498262962855997672');" onmouseout="out('8498262962855997672');" style="">  94     public CustomerAddress readCustomerAddressById(Long customerAddressId) {                             </span>
<span class="-7280304719837821647" onmouseenter="enter('-7280304719837821647');" onmouseout="out('-7280304719837821647');" style="">  95         return em.find(CustomerAddressImpl.class, customerAddressId);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96     }                                                                                                    </span>
<span  style="">  97                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  98     @Override                                                                                            </span>
<span class="5509964832384242344" onmouseenter="enter('5509964832384242344');" onmouseout="out('5509964832384242344');" style="">  99     public void makeCustomerAddressDefault(Long customerAddressId, Long customerId) {                    </span>
<span class="6227423108233917793" onmouseenter="enter('6227423108233917793');" onmouseout="out('6227423108233917793');" style=""> 100         // Throws a RuntimeException if the CustomerAddress is not found                                 </span>
<span class="-2333155017407435549" onmouseenter="enter('-2333155017407435549');" onmouseout="out('-2333155017407435549');" style=""><abbr title=" 101         CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customerId);"> 101         CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customeðŸ”µ</abbr></span>
<span  style=""> 102                                                                                                          </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 103         if (customerAddress != null) {                                                                   </span>
<span class="-828813452559622140" onmouseenter="enter('-828813452559622140');" onmouseout="out('-828813452559622140');" style=""> 104             clearDefaultAddressForCustomer(customerId);                                                  </span>
<span  style=""> 105                                                                                                          </span>
<span class="-927886860919280924" onmouseenter="enter('-927886860919280924');" onmouseout="out('-927886860919280924');" style=""> 106             em.refresh(customerAddress);                                                                 </span>
<span class="4463382214218800723" onmouseenter="enter('4463382214218800723');" onmouseout="out('4463382214218800723');" style=""> 107             customerAddress.getAddress().setDefault(true);                                               </span>
<span  style=""> 108                                                                                                          </span>
<span class="8850746041642701545" onmouseenter="enter('8850746041642701545');" onmouseout="out('8850746041642701545');" style=""> 109             save(customerAddress);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113     @Override                                                                                            </span>
<span class="1241467502724446835" onmouseenter="enter('1241467502724446835');" onmouseout="out('1241467502724446835');" style=""><abbr title=" 114     public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) {"> 114     public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) ðŸ”µ</abbr></span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style=""> 115         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style=""> 116         CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);            </span>
<span class="393679443130889984" onmouseenter="enter('393679443130889984');" onmouseout="out('393679443130889984');" style=""> 117         Root&lt;CustomerAddressImpl&gt; customerAddress = criteria.from(CustomerAddressImpl.class);            </span>
<span class="-522284501261771371" onmouseenter="enter('-522284501261771371');" onmouseout="out('-522284501261771371');" style=""> 118         criteria.select(customerAddress);                                                                </span>
<span  style=""> 119                                                                                                          </span>
<span class="5017050138899260321" onmouseenter="enter('5017050138899260321');" onmouseout="out('5017050138899260321');" style=""> 120         List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();                                                  </span>
<span class="-2542841621387878562" onmouseenter="enter('-2542841621387878562');" onmouseout="out('-2542841621387878562');" style=""> 121         predicates.add(builder.equal(customerAddress.get(&quot;id&quot;), customerAddressId));                     </span>
<span class="8433502504722478197" onmouseenter="enter('8433502504722478197');" onmouseout="out('8433502504722478197');" style=""> 122         predicates.add(builder.equal(customerAddress.get(&quot;customer&quot;).get(&quot;id&quot;), customerId));            </span>
<span  style=""> 123                                                                                                          </span>
<span class="4292944152199103147" onmouseenter="enter('4292944152199103147');" onmouseout="out('4292944152199103147');" style=""> 124         criteria.where(builder.and(predicates.toArray(new Predicate[predicates.size()])));               </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style=""> 125         TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                    </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style=""> 126         query.setHint(QueryHints.HINT_CACHEABLE, true);                                                  </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style=""> 127         query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                            </span>
<span  style=""> 128                                                                                                          </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style=""> 129         return query.getSingleResult();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130     }                                                                                                    </span>
<span  style=""> 131                                                                                                          </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 132     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="-4927787537759965463" onmouseenter="enter('-4927787537759965463');" onmouseout="out('-4927787537759965463');" style=""> 133     protected void clearDefaultAddressForCustomer(Long customerId) {                                     </span>
<span class="7904778526223369490" onmouseenter="enter('7904778526223369490');" onmouseout="out('7904778526223369490');" style=""><abbr title=" 134         // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on the same table"> 134         // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subðŸ”µ</abbr></span>
<span class="5773339046720584884" onmouseenter="enter('5773339046720584884');" onmouseout="out('5773339046720584884');" style=""> 135         Query query = em.createNamedQuery(&quot;BC_READ_DEFAULT_ADDRESS_IDS_BY_CUSTOMER_ID&quot;);                 </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 136         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="6358392185322259832" onmouseenter="enter('6358392185322259832');" onmouseout="out('6358392185322259832');" style=""> 137         List&lt;Long&gt; addressIds = query.getResultList();                                                   </span>
<span class="2579245229178922994" onmouseenter="enter('2579245229178922994');" onmouseout="out('2579245229178922994');" style=""> 138         Query update = em.createNamedQuery(&quot;BC_CLEAR_DEFAULT_ADDRESS_BY_IDS&quot;);                           </span>
<span class="-6804883647222027806" onmouseenter="enter('-6804883647222027806');" onmouseout="out('-6804883647222027806');" style=""> 139         update.setParameter(&quot;addressIds&quot;, addressIds);                                                   </span>
<span class="2732253004329504343" onmouseenter="enter('2732253004329504343');" onmouseout="out('2732253004329504343');" style=""> 140         update.executeUpdate();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span  style=""> 142                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143     @Override                                                                                            </span>
<span class="6070738824775840977" onmouseenter="enter('6070738824775840977');" onmouseout="out('6070738824775840977');" style=""> 144     public void deleteCustomerAddressById(Long customerAddressId) {                                      </span>
<span class="3332479756782710599" onmouseenter="enter('3332479756782710599');" onmouseout="out('3332479756782710599');" style=""> 145         CustomerAddress customerAddress = readCustomerAddressById(customerAddressId);                    </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 146         if (customerAddress != null) {                                                                   </span>
<span class="-3578987786562339930" onmouseenter="enter('-3578987786562339930');" onmouseout="out('-3578987786562339930');" style=""> 147             em.remove(customerAddress);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149     }                                                                                                    </span>
<span  style=""> 150                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 151     @Override                                                                                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 152     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="2739438753959711043" onmouseenter="enter('2739438753959711043');" onmouseout="out('2739438753959711043');" style=""> 153     public CustomerAddress findDefaultCustomerAddress(Long customerId) {                                 </span>
<span class="401288734530170433" onmouseenter="enter('401288734530170433');" onmouseout="out('401288734530170433');" style=""> 154         Query query = em.createNamedQuery(&quot;BC_FIND_DEFAULT_ADDRESS_BY_CUSTOMER_ID&quot;);                     </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 155         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="5538742140932691325" onmouseenter="enter('5538742140932691325');" onmouseout="out('5538742140932691325');" style=""> 156         List&lt;CustomerAddress&gt; customerAddresses = query.getResultList();                                 </span>
<span class="7583529804453956901" onmouseenter="enter('7583529804453956901');" onmouseout="out('7583529804453956901');" style=""> 157         return customerAddresses.isEmpty() ? null : customerAddresses.get(0);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159 }                                                                                                        </span>




</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="195929208389810495" onmouseenter="enter('195929208389810495');" onmouseout="out('195929208389810495');" style="">   3  * BroadleafCommerce Profile                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="6027610907884846264" onmouseenter="enter('6027610907884846264');" onmouseout="out('6027610907884846264');" style="">  18 package org.broadleafcommerce.profile.core.dao;                                                          </span>
<span  style="">  19                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21 import java.util.List;                                                                                   </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  22 import javax.annotation.Resource;                                                                        </span>
<span class="7911938180110628123" onmouseenter="enter('7911938180110628123');" onmouseout="out('7911938180110628123');" style="">  23 import javax.persistence.EntityManager;                                                                  </span>
<span class="3821515051839343306" onmouseenter="enter('3821515051839343306');" onmouseout="out('3821515051839343306');" style="">  24 import javax.persistence.PersistenceContext;                                                             </span>
<span class="2825707167313657836" onmouseenter="enter('2825707167313657836');" onmouseout="out('2825707167313657836');" style="">  25 import javax.persistence.Query;                                                                          </span>
<span class="6539032290250175619" onmouseenter="enter('6539032290250175619');" onmouseout="out('6539032290250175619');" style="">  26 import javax.persistence.TypedQuery;                                                                     </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="">  27 import javax.persistence.criteria.CriteriaBuilder;                                                       </span>
<span class="9191540725958216337" onmouseenter="enter('9191540725958216337');" onmouseout="out('9191540725958216337');" style="">  28 import javax.persistence.criteria.CriteriaQuery;                                                         </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="">  29 import javax.persistence.criteria.Predicate;                                                             </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="">  30 import javax.persistence.criteria.Root;                                                                  </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  31 import org.broadleafcommerce.common.persistence.EntityConfiguration;                                     </span>
<span class="6426334870911270785" onmouseenter="enter('6426334870911270785');" onmouseout="out('6426334870911270785');" style="">  32 import org.broadleafcommerce.profile.core.domain.CustomerAddress;                                        </span>
<span class="3849549693512608890" onmouseenter="enter('3849549693512608890');" onmouseout="out('3849549693512608890');" style="">  33 import org.broadleafcommerce.profile.core.domain.CustomerAddressImpl;                                    </span>
<span class="-1670062540256016456" onmouseenter="enter('-1670062540256016456');" onmouseout="out('-1670062540256016456');" style="">  34 import org.hibernate.jpa.QueryHints;                                                                     </span>
<span class="-4190555539420257130" onmouseenter="enter('-4190555539420257130');" onmouseout="out('-4190555539420257130');" style="">  35 import org.springframework.stereotype.Repository;                                                        </span>
<span  style="">  36                                                                                                          </span>
<span  style="">  37                                                                                                          </span>
<span class="4234143865573250754" onmouseenter="enter('4234143865573250754');" onmouseout="out('4234143865573250754');" style="">  38 @Repository(&quot;blCustomerAddressDao&quot;)                                                                      </span>
<span class="-5847330852586179203" onmouseenter="enter('-5847330852586179203');" onmouseout="out('-5847330852586179203');" style="">  39 public class CustomerAddressDaoImpl implements CustomerAddressDao {                                      </span>
<span class="5710637357667853932" onmouseenter="enter('5710637357667853932');" onmouseout="out('5710637357667853932');" style="">  40     @PersistenceContext(unitName = &quot;blPU&quot;)                                                               </span>
<span class="-5741815223868414625" onmouseenter="enter('-5741815223868414625');" onmouseout="out('-5741815223868414625');" style="">  41     protected EntityManager em;                                                                          </span>
<span  style="">  42                                                                                                          </span>
<span class="6650882675825573659" onmouseenter="enter('6650882675825573659');" onmouseout="out('6650882675825573659');" style="">  43     @Resource(name = &quot;blEntityConfiguration&quot;)                                                            </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style="">  44     protected EntityConfiguration entityConfiguration;                                                   </span>
<span  style="">  45                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  46     @Override                                                                                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">  47     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="5841285089711821481" onmouseenter="enter('5841285089711821481');" onmouseout="out('5841285089711821481');" style="">  48     public List&lt;CustomerAddress&gt; readActiveCustomerAddressesByCustomerId(Long customerId) {              </span>
<span class="-8727618258019471447" onmouseenter="enter('-8727618258019471447');" onmouseout="out('-8727618258019471447');" style="">  49         Query query = em.createNamedQuery(&quot;BC_READ_ACTIVE_CUSTOMER_ADDRESSES_BY_CUSTOMER_ID&quot;);           </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style="">  50         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="-548945811583991909" onmouseenter="enter('-548945811583991909');" onmouseout="out('-548945811583991909');" style="">  51         query.setParameter(&quot;archived&quot;, &#x27;N&#x27;);                                                             </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  52         return query.getResultList();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  53     }                                                                                                    </span>
<span  style="">  54                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  55     @Override                                                                                            </span>
<span class="-3193932741741959187" onmouseenter="enter('-3193932741741959187');" onmouseout="out('-3193932741741959187');" style="">  56     public CustomerAddress save(CustomerAddress customerAddress) {                                       </span>
<span class="564614569327986057" onmouseenter="enter('564614569327986057');" onmouseout="out('564614569327986057');" style="">  57             return em.merge(customerAddress);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  58     }                                                                                                    </span>
<span  style="">  59                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  60     @Override                                                                                            </span>
<span class="-3157048316807924532" onmouseenter="enter('-3157048316807924532');" onmouseout="out('-3157048316807924532');" style="">  61     public CustomerAddress create() {                                                                    </span>
<span class="8271516022795133195" onmouseenter="enter('8271516022795133195');" onmouseout="out('8271516022795133195');" style=""><abbr title="  62         return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName());">  62         return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName()ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  63     }                                                                                                    </span>
<span  style="">  64                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  65     @Override                                                                                            </span>
<span class="-6194539781709384496" onmouseenter="enter('-6194539781709384496');" onmouseout="out('-6194539781709384496');" style="">  66     public List&lt;CustomerAddress&gt; readBatchCustomerAddresses(int start, int pageSize) {                   </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  67         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style="">  68         CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);            </span>
<span class="4612987881921830605" onmouseenter="enter('4612987881921830605');" onmouseout="out('4612987881921830605');" style="">  69         Root&lt;CustomerAddressImpl&gt; customer = criteria.from(CustomerAddressImpl.class);                   </span>
<span class="-1221922620640865590" onmouseenter="enter('-1221922620640865590');" onmouseout="out('-1221922620640865590');" style="">  70         criteria.select(customer);                                                                       </span>
<span  style="">  71                                                                                                          </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style="">  72         TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                    </span>
<span class="7256466159581272771" onmouseenter="enter('7256466159581272771');" onmouseout="out('7256466159581272771');" style="">  73         query.setFirstResult(start);                                                                     </span>
<span class="7206424276034703302" onmouseenter="enter('7206424276034703302');" onmouseout="out('7206424276034703302');" style="">  74         query.setMaxResults(pageSize);                                                                   </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style="">  75         query.setHint(QueryHints.HINT_CACHEABLE, true);                                                  </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style="">  76         query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                            </span>
<span  style="">  77                                                                                                          </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  78         return query.getResultList();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79     }                                                                                                    </span>
<span  style="">  80                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  81     @Override                                                                                            </span>
<span class="7504543473263375719" onmouseenter="enter('7504543473263375719');" onmouseout="out('7504543473263375719');" style="">  82     public Long readNumberOfAddresses() {                                                                </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  83         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="1553585152448885012" onmouseenter="enter('1553585152448885012');" onmouseout="out('1553585152448885012');" style="">  84         CriteriaQuery&lt;Long&gt; criteria = builder.createQuery(Long.class);                                  </span>
<span class="-6031368113203336526" onmouseenter="enter('-6031368113203336526');" onmouseout="out('-6031368113203336526');" style="">  85         criteria.select(builder.count(criteria.from(CustomerAddressImpl.class)));                        </span>
<span class="2641644591534382769" onmouseenter="enter('2641644591534382769');" onmouseout="out('2641644591534382769');" style="">  86         TypedQuery&lt;Long&gt; query = em.createQuery(criteria);                                               </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style="">  87         return query.getSingleResult();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  88     }                                                                                                    </span>
<span  style="">  89                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  90     @Override                                                                                            </span>
<span class="8498262962855997672" onmouseenter="enter('8498262962855997672');" onmouseout="out('8498262962855997672');" style="">  91     public CustomerAddress readCustomerAddressById(Long customerAddressId) {                             </span>
<span class="-7280304719837821647" onmouseenter="enter('-7280304719837821647');" onmouseout="out('-7280304719837821647');" style="">  92         return em.find(CustomerAddressImpl.class, customerAddressId);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  93     }                                                                                                    </span>
<span  style="">  94                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  95     @Override                                                                                            </span>
<span class="5509964832384242344" onmouseenter="enter('5509964832384242344');" onmouseout="out('5509964832384242344');" style="">  96     public void makeCustomerAddressDefault(Long customerAddressId, Long customerId) {                    </span>
<span class="6227423108233917793" onmouseenter="enter('6227423108233917793');" onmouseout="out('6227423108233917793');" style="">  97         // Throws a RuntimeException if the CustomerAddress is not found                                 </span>
<span class="-2333155017407435549" onmouseenter="enter('-2333155017407435549');" onmouseout="out('-2333155017407435549');" style=""><abbr title="  98         CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customerId);">  98         CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customeðŸ”µ</abbr></span>
<span  style="">  99                                                                                                          </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 100         if (customerAddress != null) {                                                                   </span>
<span class="-828813452559622140" onmouseenter="enter('-828813452559622140');" onmouseout="out('-828813452559622140');" style=""> 101             clearDefaultAddressForCustomer(customerId);                                                  </span>
<span  style=""> 102                                                                                                          </span>
<span class="-927886860919280924" onmouseenter="enter('-927886860919280924');" onmouseout="out('-927886860919280924');" style=""> 103             em.refresh(customerAddress);                                                                 </span>
<span class="4463382214218800723" onmouseenter="enter('4463382214218800723');" onmouseout="out('4463382214218800723');" style=""> 104             customerAddress.getAddress().setDefault(true);                                               </span>
<span  style=""> 105                                                                                                          </span>
<span class="8850746041642701545" onmouseenter="enter('8850746041642701545');" onmouseout="out('8850746041642701545');" style=""> 106             save(customerAddress);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 108     }                                                                                                    </span>
<span  style=""> 109                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 110     @Override                                                                                            </span>
<span class="1241467502724446835" onmouseenter="enter('1241467502724446835');" onmouseout="out('1241467502724446835');" style=""><abbr title=" 111     public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) {"> 111     public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) ðŸ”µ</abbr></span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style=""> 112         CriteriaBuilder builder = em.getCriteriaBuilder();                                               </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style=""> 113         CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);            </span>
<span class="393679443130889984" onmouseenter="enter('393679443130889984');" onmouseout="out('393679443130889984');" style=""> 114         Root&lt;CustomerAddressImpl&gt; customerAddress = criteria.from(CustomerAddressImpl.class);            </span>
<span class="-522284501261771371" onmouseenter="enter('-522284501261771371');" onmouseout="out('-522284501261771371');" style=""> 115         criteria.select(customerAddress);                                                                </span>
<span  style=""> 116                                                                                                          </span>
<span class="5017050138899260321" onmouseenter="enter('5017050138899260321');" onmouseout="out('5017050138899260321');" style=""> 117         List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();                                                  </span>
<span class="-2542841621387878562" onmouseenter="enter('-2542841621387878562');" onmouseout="out('-2542841621387878562');" style=""> 118         predicates.add(builder.equal(customerAddress.get(&quot;id&quot;), customerAddressId));                     </span>
<span class="8433502504722478197" onmouseenter="enter('8433502504722478197');" onmouseout="out('8433502504722478197');" style=""> 119         predicates.add(builder.equal(customerAddress.get(&quot;customer&quot;).get(&quot;id&quot;), customerId));            </span>
<span  style=""> 120                                                                                                          </span>
<span class="4292944152199103147" onmouseenter="enter('4292944152199103147');" onmouseout="out('4292944152199103147');" style=""> 121         criteria.where(builder.and(predicates.toArray(new Predicate[predicates.size()])));               </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style=""> 122         TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                    </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style=""> 123         query.setHint(QueryHints.HINT_CACHEABLE, true);                                                  </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style=""> 124         query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                            </span>
<span  style=""> 125                                                                                                          </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style=""> 126         return query.getSingleResult();                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 127     }                                                                                                    </span>
<span  style=""> 128                                                                                                          </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 129     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="-4927787537759965463" onmouseenter="enter('-4927787537759965463');" onmouseout="out('-4927787537759965463');" style=""> 130     protected void clearDefaultAddressForCustomer(Long customerId) {                                     </span>
<span class="7904778526223369490" onmouseenter="enter('7904778526223369490');" onmouseout="out('7904778526223369490');" style=""><abbr title=" 131         // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on the same table"> 131         // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subðŸ”µ</abbr></span>
<span class="5773339046720584884" onmouseenter="enter('5773339046720584884');" onmouseout="out('5773339046720584884');" style=""> 132         Query query = em.createNamedQuery(&quot;BC_READ_DEFAULT_ADDRESS_IDS_BY_CUSTOMER_ID&quot;);                 </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 133         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="6358392185322259832" onmouseenter="enter('6358392185322259832');" onmouseout="out('6358392185322259832');" style=""> 134         List&lt;Long&gt; addressIds = query.getResultList();                                                   </span>
<span class="2579245229178922994" onmouseenter="enter('2579245229178922994');" onmouseout="out('2579245229178922994');" style=""> 135         Query update = em.createNamedQuery(&quot;BC_CLEAR_DEFAULT_ADDRESS_BY_IDS&quot;);                           </span>
<span class="-6804883647222027806" onmouseenter="enter('-6804883647222027806');" onmouseout="out('-6804883647222027806');" style=""> 136         update.setParameter(&quot;addressIds&quot;, addressIds);                                                   </span>
<span class="2732253004329504343" onmouseenter="enter('2732253004329504343');" onmouseout="out('2732253004329504343');" style=""> 137         update.executeUpdate();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138     }                                                                                                    </span>
<span  style=""> 139                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 140     @Override                                                                                            </span>
<span class="6070738824775840977" onmouseenter="enter('6070738824775840977');" onmouseout="out('6070738824775840977');" style=""> 141     public void deleteCustomerAddressById(Long customerAddressId) {                                      </span>
<span class="3332479756782710599" onmouseenter="enter('3332479756782710599');" onmouseout="out('3332479756782710599');" style=""> 142         CustomerAddress customerAddress = readCustomerAddressById(customerAddressId);                    </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 143         if (customerAddress != null) {                                                                   </span>
<span class="-3578987786562339930" onmouseenter="enter('-3578987786562339930');" onmouseout="out('-3578987786562339930');" style=""> 144             em.remove(customerAddress);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 146     }                                                                                                    </span>
<span  style=""> 147                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 148     @Override                                                                                            </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 149     @SuppressWarnings(&quot;unchecked&quot;)                                                                       </span>
<span class="2739438753959711043" onmouseenter="enter('2739438753959711043');" onmouseout="out('2739438753959711043');" style=""> 150     public CustomerAddress findDefaultCustomerAddress(Long customerId) {                                 </span>
<span class="401288734530170433" onmouseenter="enter('401288734530170433');" onmouseout="out('401288734530170433');" style=""> 151         Query query = em.createNamedQuery(&quot;BC_FIND_DEFAULT_ADDRESS_BY_CUSTOMER_ID&quot;);                     </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 152         query.setParameter(&quot;customerId&quot;, customerId);                                                    </span>
<span class="5538742140932691325" onmouseenter="enter('5538742140932691325');" onmouseout="out('5538742140932691325');" style=""> 153         List&lt;CustomerAddress&gt; customerAddresses = query.getResultList();                                 </span>
<span class="7583529804453956901" onmouseenter="enter('7583529804453956901');" onmouseout="out('7583529804453956901');" style=""> 154         return customerAddresses.isEmpty() ? null : customerAddresses.get(0);                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 155     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156 }                                                                                                        </span>







</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="195929208389810495" onmouseenter="enter('195929208389810495');" onmouseout="out('195929208389810495');" style="">   3   * BroadleafCommerce Profile                                                                                      </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="6027610907884846264" onmouseenter="enter('6027610907884846264');" onmouseout="out('6027610907884846264');" style="">  18  package org.broadleafcommerce.profile.core.dao;                                                                   </span>
<span  style="">  19                                                                                                                    </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  20  import org.broadleafcommerce.common.persistence.EntityConfiguration;                                              </span>
<span class="6426334870911270785" onmouseenter="enter('6426334870911270785');" onmouseout="out('6426334870911270785');" style="">  21  import org.broadleafcommerce.profile.core.domain.CustomerAddress;                                                 </span>
<span class="3849549693512608890" onmouseenter="enter('3849549693512608890');" onmouseout="out('3849549693512608890');" style="">  22  import org.broadleafcommerce.profile.core.domain.CustomerAddressImpl;                                             </span>
<span class="-1670062540256016456" onmouseenter="enter('-1670062540256016456');" onmouseout="out('-1670062540256016456');" style="">  23  import org.hibernate.jpa.QueryHints;                                                                              </span>
<span class="-4190555539420257130" onmouseenter="enter('-4190555539420257130');" onmouseout="out('-4190555539420257130');" style="">  24  import org.springframework.stereotype.Repository;                                                                 </span>
<span  style="">  25                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  27  import java.util.List;                                                                                            </span>
<span  style="">  28                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  29  import javax.annotation.Resource;                                                                                 </span>
<span class="7911938180110628123" onmouseenter="enter('7911938180110628123');" onmouseout="out('7911938180110628123');" style="">  30  import javax.persistence.EntityManager;                                                                           </span>
<span class="3821515051839343306" onmouseenter="enter('3821515051839343306');" onmouseout="out('3821515051839343306');" style="">  31  import javax.persistence.PersistenceContext;                                                                      </span>
<span class="2825707167313657836" onmouseenter="enter('2825707167313657836');" onmouseout="out('2825707167313657836');" style="">  32  import javax.persistence.Query;                                                                                   </span>
<span class="6539032290250175619" onmouseenter="enter('6539032290250175619');" onmouseout="out('6539032290250175619');" style="">  33  import javax.persistence.TypedQuery;                                                                              </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="">  34  import javax.persistence.criteria.CriteriaBuilder;                                                                </span>
<span class="9191540725958216337" onmouseenter="enter('9191540725958216337');" onmouseout="out('9191540725958216337');" style="">  35  import javax.persistence.criteria.CriteriaQuery;                                                                  </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="">  36  import javax.persistence.criteria.Predicate;                                                                      </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="">  37  import javax.persistence.criteria.Root;                                                                           </span>
<span  style="">  38                                                                                                                    </span>
<span class="4234143865573250754" onmouseenter="enter('4234143865573250754');" onmouseout="out('4234143865573250754');" style="">  39  @Repository(&quot;blCustomerAddressDao&quot;)                                                                               </span>
<span class="-5847330852586179203" onmouseenter="enter('-5847330852586179203');" onmouseout="out('-5847330852586179203');" style="">  40  public class CustomerAddressDaoImpl implements CustomerAddressDao {                                               </span>
<span  style="">  41                                                                                                                    </span>
<span class="5710637357667853932" onmouseenter="enter('5710637357667853932');" onmouseout="out('5710637357667853932');" style="">  42      @PersistenceContext(unitName = &quot;blPU&quot;)                                                                        </span>
<span class="-5741815223868414625" onmouseenter="enter('-5741815223868414625');" onmouseout="out('-5741815223868414625');" style="">  43      protected EntityManager em;                                                                                   </span>
<span  style="">  44                                                                                                                    </span>
<span class="6650882675825573659" onmouseenter="enter('6650882675825573659');" onmouseout="out('6650882675825573659');" style="">  45      @Resource(name = &quot;blEntityConfiguration&quot;)                                                                     </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style="">  46      protected EntityConfiguration entityConfiguration;                                                            </span>
<span  style="">  47                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48      @Override                                                                                                     </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">  49      @SuppressWarnings(&quot;unchecked&quot;)                                                                                </span>
<span class="5841285089711821481" onmouseenter="enter('5841285089711821481');" onmouseout="out('5841285089711821481');" style="">  50      public List&lt;CustomerAddress&gt; readActiveCustomerAddressesByCustomerId(Long customerId) {                       </span>
<span class="-8727618258019471447" onmouseenter="enter('-8727618258019471447');" onmouseout="out('-8727618258019471447');" style="">  51          Query query = em.createNamedQuery(&quot;BC_READ_ACTIVE_CUSTOMER_ADDRESSES_BY_CUSTOMER_ID&quot;);                    </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style="">  52          query.setParameter(&quot;customerId&quot;, customerId);                                                             </span>
<span class="-548945811583991909" onmouseenter="enter('-548945811583991909');" onmouseout="out('-548945811583991909');" style="">  53          query.setParameter(&quot;archived&quot;, &#x27;N&#x27;);                                                                      </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  54          return query.getResultList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55      }                                                                                                             </span>
<span  style="">  56                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  57      @Override                                                                                                     </span>
<span class="-3193932741741959187" onmouseenter="enter('-3193932741741959187');" onmouseout="out('-3193932741741959187');" style="">  58      public CustomerAddress save(CustomerAddress customerAddress) {                                                </span>
<span class="564614569327986057" onmouseenter="enter('564614569327986057');" onmouseout="out('564614569327986057');" style="">  59              return em.merge(customerAddress);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60      }                                                                                                             </span>
<span  style="">  61                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  62      @Override                                                                                                     </span>
<span class="-3157048316807924532" onmouseenter="enter('-3157048316807924532');" onmouseout="out('-3157048316807924532');" style="">  63      public CustomerAddress create() {                                                                             </span>
<span class="8271516022795133195" onmouseenter="enter('8271516022795133195');" onmouseout="out('8271516022795133195');" style="">  64          return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName());       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65      }                                                                                                             </span>
<span  style="">  66                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67      @Override                                                                                                     </span>
<span class="-6194539781709384496" onmouseenter="enter('-6194539781709384496');" onmouseout="out('-6194539781709384496');" style="">  68      public List&lt;CustomerAddress&gt; readBatchCustomerAddresses(int start, int pageSize) {                            </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  69          CriteriaBuilder builder = em.getCriteriaBuilder();                                                        </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style="">  70          CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);                     </span>
<span class="4612987881921830605" onmouseenter="enter('4612987881921830605');" onmouseout="out('4612987881921830605');" style="">  71          Root&lt;CustomerAddressImpl&gt; customer = criteria.from(CustomerAddressImpl.class);                            </span>
<span class="-1221922620640865590" onmouseenter="enter('-1221922620640865590');" onmouseout="out('-1221922620640865590');" style="">  72          criteria.select(customer);                                                                                </span>
<span  style="">  73                                                                                                                    </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style="">  74          TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                             </span>
<span class="7256466159581272771" onmouseenter="enter('7256466159581272771');" onmouseout="out('7256466159581272771');" style="">  75          query.setFirstResult(start);                                                                              </span>
<span class="7206424276034703302" onmouseenter="enter('7206424276034703302');" onmouseout="out('7206424276034703302');" style="">  76          query.setMaxResults(pageSize);                                                                            </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style="">  77          query.setHint(QueryHints.HINT_CACHEABLE, true);                                                           </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style="">  78          query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                                     </span>
<span  style="">  79                                                                                                                    </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  80          return query.getResultList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81      }                                                                                                             </span>
<span  style="">  82                                                                                                                    </span>
<span  style="">  83                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  84      @Override                                                                                                     </span>
<span class="7504543473263375719" onmouseenter="enter('7504543473263375719');" onmouseout="out('7504543473263375719');" style="">  85      public Long readNumberOfAddresses() {                                                                         </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  86          CriteriaBuilder builder = em.getCriteriaBuilder();                                                        </span>
<span class="1553585152448885012" onmouseenter="enter('1553585152448885012');" onmouseout="out('1553585152448885012');" style="">  87          CriteriaQuery&lt;Long&gt; criteria = builder.createQuery(Long.class);                                           </span>
<span class="-6031368113203336526" onmouseenter="enter('-6031368113203336526');" onmouseout="out('-6031368113203336526');" style="">  88          criteria.select(builder.count(criteria.from(CustomerAddressImpl.class)));                                 </span>
<span class="2641644591534382769" onmouseenter="enter('2641644591534382769');" onmouseout="out('2641644591534382769');" style="">  89          TypedQuery&lt;Long&gt; query = em.createQuery(criteria);                                                        </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style="">  90          return query.getSingleResult();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91      }                                                                                                             </span>
<span  style="">  92                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  93      @Override                                                                                                     </span>
<span class="8498262962855997672" onmouseenter="enter('8498262962855997672');" onmouseout="out('8498262962855997672');" style="">  94      public CustomerAddress readCustomerAddressById(Long customerAddressId) {                                      </span>
<span class="-7280304719837821647" onmouseenter="enter('-7280304719837821647');" onmouseout="out('-7280304719837821647');" style="">  95          return em.find(CustomerAddressImpl.class, customerAddressId);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96      }                                                                                                             </span>
<span  style="">  97                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  98      @Override                                                                                                     </span>
<span class="5509964832384242344" onmouseenter="enter('5509964832384242344');" onmouseout="out('5509964832384242344');" style="">  99      public void makeCustomerAddressDefault(Long customerAddressId, Long customerId) {                             </span>
<span class="6227423108233917793" onmouseenter="enter('6227423108233917793');" onmouseout="out('6227423108233917793');" style=""> 100          // Throws a RuntimeException if the CustomerAddress is not found                                          </span>
<span class="-2333155017407435549" onmouseenter="enter('-2333155017407435549');" onmouseout="out('-2333155017407435549');" style=""> 101          CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customerId);    </span>
<span  style=""> 102                                                                                                                    </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 103          if (customerAddress != null) {                                                                            </span>
<span class="-828813452559622140" onmouseenter="enter('-828813452559622140');" onmouseout="out('-828813452559622140');" style=""> 104              clearDefaultAddressForCustomer(customerId);                                                           </span>
<span  style=""> 105                                                                                                                    </span>
<span class="-927886860919280924" onmouseenter="enter('-927886860919280924');" onmouseout="out('-927886860919280924');" style=""> 106              em.refresh(customerAddress);                                                                          </span>
<span class="4463382214218800723" onmouseenter="enter('4463382214218800723');" onmouseout="out('4463382214218800723');" style=""> 107              customerAddress.getAddress().setDefault(true);                                                        </span>
<span  style=""> 108                                                                                                                    </span>
<span class="8850746041642701545" onmouseenter="enter('8850746041642701545');" onmouseout="out('8850746041642701545');" style=""> 109              save(customerAddress);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111      }                                                                                                             </span>
<span  style=""> 112                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113      @Override                                                                                                     </span>
<span class="1241467502724446835" onmouseenter="enter('1241467502724446835');" onmouseout="out('1241467502724446835');" style=""> 114      public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) {        </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style=""> 115          CriteriaBuilder builder = em.getCriteriaBuilder();                                                        </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style=""> 116          CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);                     </span>
<span class="393679443130889984" onmouseenter="enter('393679443130889984');" onmouseout="out('393679443130889984');" style=""> 117          Root&lt;CustomerAddressImpl&gt; customerAddress = criteria.from(CustomerAddressImpl.class);                     </span>
<span class="-522284501261771371" onmouseenter="enter('-522284501261771371');" onmouseout="out('-522284501261771371');" style=""> 118          criteria.select(customerAddress);                                                                         </span>
<span  style=""> 119                                                                                                                    </span>
<span class="5017050138899260321" onmouseenter="enter('5017050138899260321');" onmouseout="out('5017050138899260321');" style=""> 120          List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();                                                           </span>
<span class="-2542841621387878562" onmouseenter="enter('-2542841621387878562');" onmouseout="out('-2542841621387878562');" style=""> 121          predicates.add(builder.equal(customerAddress.get(&quot;id&quot;), customerAddressId));                              </span>
<span class="8433502504722478197" onmouseenter="enter('8433502504722478197');" onmouseout="out('8433502504722478197');" style=""> 122          predicates.add(builder.equal(customerAddress.get(&quot;customer&quot;).get(&quot;id&quot;), customerId));                     </span>
<span  style=""> 123                                                                                                                    </span>
<span class="4292944152199103147" onmouseenter="enter('4292944152199103147');" onmouseout="out('4292944152199103147');" style=""> 124          criteria.where(builder.and(predicates.toArray(new Predicate[predicates.size()])));                        </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style=""> 125          TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                             </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style=""> 126          query.setHint(QueryHints.HINT_CACHEABLE, true);                                                           </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style=""> 127          query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                                     </span>
<span  style=""> 128                                                                                                                    </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style=""> 129          return query.getSingleResult();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span  style=""> 131                                                                                                                    </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 132      @SuppressWarnings(&quot;unchecked&quot;)                                                                                </span>
<span class="-4927787537759965463" onmouseenter="enter('-4927787537759965463');" onmouseout="out('-4927787537759965463');" style=""> 133      protected void clearDefaultAddressForCustomer(Long customerId) {                                              </span>
<span class="7904778526223369490" onmouseenter="enter('7904778526223369490');" onmouseout="out('7904778526223369490');" style=""><abbr title=" 134          // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on the same table"> 134          // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on ðŸ”µ</abbr></span>
<span class="5773339046720584884" onmouseenter="enter('5773339046720584884');" onmouseout="out('5773339046720584884');" style=""> 135          Query query = em.createNamedQuery(&quot;BC_READ_DEFAULT_ADDRESS_IDS_BY_CUSTOMER_ID&quot;);                          </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 136          query.setParameter(&quot;customerId&quot;, customerId);                                                             </span>
<span class="6358392185322259832" onmouseenter="enter('6358392185322259832');" onmouseout="out('6358392185322259832');" style=""> 137          List&lt;Long&gt; addressIds = query.getResultList();                                                            </span>
<span class="2579245229178922994" onmouseenter="enter('2579245229178922994');" onmouseout="out('2579245229178922994');" style=""> 138          Query update = em.createNamedQuery(&quot;BC_CLEAR_DEFAULT_ADDRESS_BY_IDS&quot;);                                    </span>
<span class="-6804883647222027806" onmouseenter="enter('-6804883647222027806');" onmouseout="out('-6804883647222027806');" style=""> 139          update.setParameter(&quot;addressIds&quot;, addressIds);                                                            </span>
<span class="2732253004329504343" onmouseenter="enter('2732253004329504343');" onmouseout="out('2732253004329504343');" style=""> 140          update.executeUpdate();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141      }                                                                                                             </span>
<span  style=""> 142                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143      @Override                                                                                                     </span>
<span class="6070738824775840977" onmouseenter="enter('6070738824775840977');" onmouseout="out('6070738824775840977');" style=""> 144      public void deleteCustomerAddressById(Long customerAddressId) {                                               </span>
<span class="3332479756782710599" onmouseenter="enter('3332479756782710599');" onmouseout="out('3332479756782710599');" style=""> 145          CustomerAddress customerAddress = readCustomerAddressById(customerAddressId);                             </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 146          if (customerAddress != null) {                                                                            </span>
<span class="-3578987786562339930" onmouseenter="enter('-3578987786562339930');" onmouseout="out('-3578987786562339930');" style=""> 147              em.remove(customerAddress);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149      }                                                                                                             </span>
<span  style=""> 150                                                                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -                                                                                                                  </span>

<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 152      @SuppressWarnings(&quot;unchecked&quot;)                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 153      @Override                                                                                                     </span>
<span class="2739438753959711043" onmouseenter="enter('2739438753959711043');" onmouseout="out('2739438753959711043');" style=""> 154      public CustomerAddress findDefaultCustomerAddress(Long customerId) {                                          </span>
<span class="401288734530170433" onmouseenter="enter('401288734530170433');" onmouseout="out('401288734530170433');" style=""> 155          Query query = em.createNamedQuery(&quot;BC_FIND_DEFAULT_ADDRESS_BY_CUSTOMER_ID&quot;);                              </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 156          query.setParameter(&quot;customerId&quot;, customerId);                                                             </span>
<span class="5538742140932691325" onmouseenter="enter('5538742140932691325');" onmouseout="out('5538742140932691325');" style=""> 157          List&lt;CustomerAddress&gt; customerAddresses = query.getResultList();                                          </span>
<span class="7583529804453956901" onmouseenter="enter('7583529804453956901');" onmouseout="out('7583529804453956901');" style=""> 158          return customerAddresses.isEmpty() ? null : customerAddresses.get(0);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 159      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="195929208389810495" onmouseenter="enter('195929208389810495');" onmouseout="out('195929208389810495');" style="">   3   * BroadleafCommerce Profile                                                                                      </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="6027610907884846264" onmouseenter="enter('6027610907884846264');" onmouseout="out('6027610907884846264');" style="">  18  package org.broadleafcommerce.profile.core.dao;                                                                   </span>
<span  style="">  19                                                                                                                    </span>
<span class="4111478795314305516" onmouseenter="enter('4111478795314305516');" onmouseout="out('4111478795314305516');" style="">  20  import org.broadleafcommerce.common.persistence.EntityConfiguration;                                              </span>
<span class="6426334870911270785" onmouseenter="enter('6426334870911270785');" onmouseout="out('6426334870911270785');" style="">  21  import org.broadleafcommerce.profile.core.domain.CustomerAddress;                                                 </span>
<span class="3849549693512608890" onmouseenter="enter('3849549693512608890');" onmouseout="out('3849549693512608890');" style="">  22  import org.broadleafcommerce.profile.core.domain.CustomerAddressImpl;                                             </span>
<span class="-1670062540256016456" onmouseenter="enter('-1670062540256016456');" onmouseout="out('-1670062540256016456');" style="">  23  import org.hibernate.jpa.QueryHints;                                                                              </span>
<span class="-4190555539420257130" onmouseenter="enter('-4190555539420257130');" onmouseout="out('-4190555539420257130');" style="">  24  import org.springframework.stereotype.Repository;                                                                 </span>
<span  style="">  25                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  26  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  27  import java.util.List;                                                                                            </span>
<span  style="">  28                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  29  import javax.annotation.Resource;                                                                                 </span>
<span class="7911938180110628123" onmouseenter="enter('7911938180110628123');" onmouseout="out('7911938180110628123');" style="">  30  import javax.persistence.EntityManager;                                                                           </span>
<span class="3821515051839343306" onmouseenter="enter('3821515051839343306');" onmouseout="out('3821515051839343306');" style="">  31  import javax.persistence.PersistenceContext;                                                                      </span>
<span class="2825707167313657836" onmouseenter="enter('2825707167313657836');" onmouseout="out('2825707167313657836');" style="">  32  import javax.persistence.Query;                                                                                   </span>
<span class="6539032290250175619" onmouseenter="enter('6539032290250175619');" onmouseout="out('6539032290250175619');" style="">  33  import javax.persistence.TypedQuery;                                                                              </span>
<span class="8485852916582699615" onmouseenter="enter('8485852916582699615');" onmouseout="out('8485852916582699615');" style="">  34  import javax.persistence.criteria.CriteriaBuilder;                                                                </span>
<span class="9191540725958216337" onmouseenter="enter('9191540725958216337');" onmouseout="out('9191540725958216337');" style="">  35  import javax.persistence.criteria.CriteriaQuery;                                                                  </span>
<span class="7244103982108254428" onmouseenter="enter('7244103982108254428');" onmouseout="out('7244103982108254428');" style="">  36  import javax.persistence.criteria.Predicate;                                                                      </span>
<span class="5782830673162504954" onmouseenter="enter('5782830673162504954');" onmouseout="out('5782830673162504954');" style="">  37  import javax.persistence.criteria.Root;                                                                           </span>
<span  style="">  38                                                                                                                    </span>
<span class="4234143865573250754" onmouseenter="enter('4234143865573250754');" onmouseout="out('4234143865573250754');" style="">  39  @Repository(&quot;blCustomerAddressDao&quot;)                                                                               </span>
<span class="-5847330852586179203" onmouseenter="enter('-5847330852586179203');" onmouseout="out('-5847330852586179203');" style="">  40  public class CustomerAddressDaoImpl implements CustomerAddressDao {                                               </span>
<span  style="">  41                                                                                                                    </span>
<span class="5710637357667853932" onmouseenter="enter('5710637357667853932');" onmouseout="out('5710637357667853932');" style="">  42      @PersistenceContext(unitName = &quot;blPU&quot;)                                                                        </span>
<span class="-5741815223868414625" onmouseenter="enter('-5741815223868414625');" onmouseout="out('-5741815223868414625');" style="">  43      protected EntityManager em;                                                                                   </span>
<span  style="">  44                                                                                                                    </span>
<span class="6650882675825573659" onmouseenter="enter('6650882675825573659');" onmouseout="out('6650882675825573659');" style="">  45      @Resource(name = &quot;blEntityConfiguration&quot;)                                                                     </span>
<span class="-8812870795397979367" onmouseenter="enter('-8812870795397979367');" onmouseout="out('-8812870795397979367');" style="">  46      protected EntityConfiguration entityConfiguration;                                                            </span>
<span  style="">  47                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  48      @Override                                                                                                     </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style="">  49      @SuppressWarnings(&quot;unchecked&quot;)                                                                                </span>
<span class="5841285089711821481" onmouseenter="enter('5841285089711821481');" onmouseout="out('5841285089711821481');" style="">  50      public List&lt;CustomerAddress&gt; readActiveCustomerAddressesByCustomerId(Long customerId) {                       </span>
<span class="-8727618258019471447" onmouseenter="enter('-8727618258019471447');" onmouseout="out('-8727618258019471447');" style="">  51          Query query = em.createNamedQuery(&quot;BC_READ_ACTIVE_CUSTOMER_ADDRESSES_BY_CUSTOMER_ID&quot;);                    </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style="">  52          query.setParameter(&quot;customerId&quot;, customerId);                                                             </span>
<span class="-548945811583991909" onmouseenter="enter('-548945811583991909');" onmouseout="out('-548945811583991909');" style="">  53          query.setParameter(&quot;archived&quot;, &#x27;N&#x27;);                                                                      </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  54          return query.getResultList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  55      }                                                                                                             </span>
<span  style="">  56                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  57      @Override                                                                                                     </span>
<span class="-3193932741741959187" onmouseenter="enter('-3193932741741959187');" onmouseout="out('-3193932741741959187');" style="">  58      public CustomerAddress save(CustomerAddress customerAddress) {                                                </span>
<span class="564614569327986057" onmouseenter="enter('564614569327986057');" onmouseout="out('564614569327986057');" style="">  59              return em.merge(customerAddress);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  60      }                                                                                                             </span>
<span  style="">  61                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  62      @Override                                                                                                     </span>
<span class="-3157048316807924532" onmouseenter="enter('-3157048316807924532');" onmouseout="out('-3157048316807924532');" style="">  63      public CustomerAddress create() {                                                                             </span>
<span class="8271516022795133195" onmouseenter="enter('8271516022795133195');" onmouseout="out('8271516022795133195');" style="">  64          return (CustomerAddress) entityConfiguration.createEntityInstance(CustomerAddress.class.getName());       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65      }                                                                                                             </span>
<span  style="">  66                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  67      @Override                                                                                                     </span>
<span class="-6194539781709384496" onmouseenter="enter('-6194539781709384496');" onmouseout="out('-6194539781709384496');" style="">  68      public List&lt;CustomerAddress&gt; readBatchCustomerAddresses(int start, int pageSize) {                            </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  69          CriteriaBuilder builder = em.getCriteriaBuilder();                                                        </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style="">  70          CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);                     </span>
<span class="4612987881921830605" onmouseenter="enter('4612987881921830605');" onmouseout="out('4612987881921830605');" style="">  71          Root&lt;CustomerAddressImpl&gt; customer = criteria.from(CustomerAddressImpl.class);                            </span>
<span class="-1221922620640865590" onmouseenter="enter('-1221922620640865590');" onmouseout="out('-1221922620640865590');" style="">  72          criteria.select(customer);                                                                                </span>
<span  style="">  73                                                                                                                    </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style="">  74          TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                             </span>
<span class="7256466159581272771" onmouseenter="enter('7256466159581272771');" onmouseout="out('7256466159581272771');" style="">  75          query.setFirstResult(start);                                                                              </span>
<span class="7206424276034703302" onmouseenter="enter('7206424276034703302');" onmouseout="out('7206424276034703302');" style="">  76          query.setMaxResults(pageSize);                                                                            </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style="">  77          query.setHint(QueryHints.HINT_CACHEABLE, true);                                                           </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style="">  78          query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                                     </span>
<span  style="">  79                                                                                                                    </span>
<span class="6708314796189813357" onmouseenter="enter('6708314796189813357');" onmouseout="out('6708314796189813357');" style="">  80          return query.getResultList();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  81      }                                                                                                             </span>
<span  style="">  82                                                                                                                    </span>
<span  style="">  83                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  84      @Override                                                                                                     </span>
<span class="7504543473263375719" onmouseenter="enter('7504543473263375719');" onmouseout="out('7504543473263375719');" style="">  85      public Long readNumberOfAddresses() {                                                                         </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style="">  86          CriteriaBuilder builder = em.getCriteriaBuilder();                                                        </span>
<span class="1553585152448885012" onmouseenter="enter('1553585152448885012');" onmouseout="out('1553585152448885012');" style="">  87          CriteriaQuery&lt;Long&gt; criteria = builder.createQuery(Long.class);                                           </span>
<span class="-6031368113203336526" onmouseenter="enter('-6031368113203336526');" onmouseout="out('-6031368113203336526');" style="">  88          criteria.select(builder.count(criteria.from(CustomerAddressImpl.class)));                                 </span>
<span class="2641644591534382769" onmouseenter="enter('2641644591534382769');" onmouseout="out('2641644591534382769');" style="">  89          TypedQuery&lt;Long&gt; query = em.createQuery(criteria);                                                        </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style="">  90          return query.getSingleResult();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  91      }                                                                                                             </span>
<span  style="">  92                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  93      @Override                                                                                                     </span>
<span class="8498262962855997672" onmouseenter="enter('8498262962855997672');" onmouseout="out('8498262962855997672');" style="">  94      public CustomerAddress readCustomerAddressById(Long customerAddressId) {                                      </span>
<span class="-7280304719837821647" onmouseenter="enter('-7280304719837821647');" onmouseout="out('-7280304719837821647');" style="">  95          return em.find(CustomerAddressImpl.class, customerAddressId);                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96      }                                                                                                             </span>
<span  style="">  97                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  98      @Override                                                                                                     </span>
<span class="5509964832384242344" onmouseenter="enter('5509964832384242344');" onmouseout="out('5509964832384242344');" style="">  99      public void makeCustomerAddressDefault(Long customerAddressId, Long customerId) {                             </span>
<span class="6227423108233917793" onmouseenter="enter('6227423108233917793');" onmouseout="out('6227423108233917793');" style=""> 100          // Throws a RuntimeException if the CustomerAddress is not found                                          </span>
<span class="-2333155017407435549" onmouseenter="enter('-2333155017407435549');" onmouseout="out('-2333155017407435549');" style=""> 101          CustomerAddress customerAddress = readCustomerAddressByIdAndCustomerId(customerAddressId, customerId);    </span>
<span  style=""> 102                                                                                                                    </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 103          if (customerAddress != null) {                                                                            </span>
<span class="-828813452559622140" onmouseenter="enter('-828813452559622140');" onmouseout="out('-828813452559622140');" style=""> 104              clearDefaultAddressForCustomer(customerId);                                                           </span>
<span  style=""> 105                                                                                                                    </span>
<span class="-927886860919280924" onmouseenter="enter('-927886860919280924');" onmouseout="out('-927886860919280924');" style=""> 106              em.refresh(customerAddress);                                                                          </span>
<span class="4463382214218800723" onmouseenter="enter('4463382214218800723');" onmouseout="out('4463382214218800723');" style=""> 107              customerAddress.getAddress().setDefault(true);                                                        </span>
<span  style=""> 108                                                                                                                    </span>
<span class="8850746041642701545" onmouseenter="enter('8850746041642701545');" onmouseout="out('8850746041642701545');" style=""> 109              save(customerAddress);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 110          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111      }                                                                                                             </span>
<span  style=""> 112                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 113      @Override                                                                                                     </span>
<span class="1241467502724446835" onmouseenter="enter('1241467502724446835');" onmouseout="out('1241467502724446835');" style=""> 114      public CustomerAddress readCustomerAddressByIdAndCustomerId(Long customerAddressId, Long customerId) {        </span>
<span class="2959951002703615279" onmouseenter="enter('2959951002703615279');" onmouseout="out('2959951002703615279');" style=""> 115          CriteriaBuilder builder = em.getCriteriaBuilder();                                                        </span>
<span class="-1286700357120740457" onmouseenter="enter('-1286700357120740457');" onmouseout="out('-1286700357120740457');" style=""> 116          CriteriaQuery&lt;CustomerAddress&gt; criteria = builder.createQuery(CustomerAddress.class);                     </span>
<span class="393679443130889984" onmouseenter="enter('393679443130889984');" onmouseout="out('393679443130889984');" style=""> 117          Root&lt;CustomerAddressImpl&gt; customerAddress = criteria.from(CustomerAddressImpl.class);                     </span>
<span class="-522284501261771371" onmouseenter="enter('-522284501261771371');" onmouseout="out('-522284501261771371');" style=""> 118          criteria.select(customerAddress);                                                                         </span>
<span  style=""> 119                                                                                                                    </span>
<span class="5017050138899260321" onmouseenter="enter('5017050138899260321');" onmouseout="out('5017050138899260321');" style=""> 120          List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();                                                           </span>
<span class="-2542841621387878562" onmouseenter="enter('-2542841621387878562');" onmouseout="out('-2542841621387878562');" style=""> 121          predicates.add(builder.equal(customerAddress.get(&quot;id&quot;), customerAddressId));                              </span>
<span class="8433502504722478197" onmouseenter="enter('8433502504722478197');" onmouseout="out('8433502504722478197');" style=""> 122          predicates.add(builder.equal(customerAddress.get(&quot;customer&quot;).get(&quot;id&quot;), customerId));                     </span>
<span  style=""> 123                                                                                                                    </span>
<span class="4292944152199103147" onmouseenter="enter('4292944152199103147');" onmouseout="out('4292944152199103147');" style=""> 124          criteria.where(builder.and(predicates.toArray(new Predicate[predicates.size()])));                        </span>
<span class="-6998072544869811351" onmouseenter="enter('-6998072544869811351');" onmouseout="out('-6998072544869811351');" style=""> 125          TypedQuery&lt;CustomerAddress&gt; query = em.createQuery(criteria);                                             </span>
<span class="5915708249677748664" onmouseenter="enter('5915708249677748664');" onmouseout="out('5915708249677748664');" style=""> 126          query.setHint(QueryHints.HINT_CACHEABLE, true);                                                           </span>
<span class="-4644300282882019575" onmouseenter="enter('-4644300282882019575');" onmouseout="out('-4644300282882019575');" style=""> 127          query.setHint(QueryHints.HINT_CACHE_REGION, &quot;query.CustomerAddress&quot;);                                     </span>
<span  style=""> 128                                                                                                                    </span>
<span class="-5318016161907480331" onmouseenter="enter('-5318016161907480331');" onmouseout="out('-5318016161907480331');" style=""> 129          return query.getSingleResult();                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 130      }                                                                                                             </span>
<span  style=""> 131                                                                                                                    </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 132      @SuppressWarnings(&quot;unchecked&quot;)                                                                                </span>
<span class="-4927787537759965463" onmouseenter="enter('-4927787537759965463');" onmouseout="out('-4927787537759965463');" style=""> 133      protected void clearDefaultAddressForCustomer(Long customerId) {                                              </span>
<span class="7904778526223369490" onmouseenter="enter('7904778526223369490');" onmouseout="out('7904778526223369490');" style=""><abbr title=" 134          // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on the same table"> 134          // This has to be done in two queries because MySQL doesn&#x27;t support updates on a table with a subquery on ðŸ”µ</abbr></span>
<span class="5773339046720584884" onmouseenter="enter('5773339046720584884');" onmouseout="out('5773339046720584884');" style=""> 135          Query query = em.createNamedQuery(&quot;BC_READ_DEFAULT_ADDRESS_IDS_BY_CUSTOMER_ID&quot;);                          </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 136          query.setParameter(&quot;customerId&quot;, customerId);                                                             </span>
<span class="6358392185322259832" onmouseenter="enter('6358392185322259832');" onmouseout="out('6358392185322259832');" style=""> 137          List&lt;Long&gt; addressIds = query.getResultList();                                                            </span>
<span class="2579245229178922994" onmouseenter="enter('2579245229178922994');" onmouseout="out('2579245229178922994');" style=""> 138          Query update = em.createNamedQuery(&quot;BC_CLEAR_DEFAULT_ADDRESS_BY_IDS&quot;);                                    </span>
<span class="-6804883647222027806" onmouseenter="enter('-6804883647222027806');" onmouseout="out('-6804883647222027806');" style=""> 139          update.setParameter(&quot;addressIds&quot;, addressIds);                                                            </span>
<span class="2732253004329504343" onmouseenter="enter('2732253004329504343');" onmouseout="out('2732253004329504343');" style=""> 140          update.executeUpdate();                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141      }                                                                                                             </span>
<span  style=""> 142                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 143      @Override                                                                                                     </span>
<span class="6070738824775840977" onmouseenter="enter('6070738824775840977');" onmouseout="out('6070738824775840977');" style=""> 144      public void deleteCustomerAddressById(Long customerAddressId) {                                               </span>
<span class="3332479756782710599" onmouseenter="enter('3332479756782710599');" onmouseout="out('3332479756782710599');" style=""> 145          CustomerAddress customerAddress = readCustomerAddressById(customerAddressId);                             </span>
<span class="2829345237187656797" onmouseenter="enter('2829345237187656797');" onmouseout="out('2829345237187656797');" style=""> 146          if (customerAddress != null) {                                                                            </span>
<span class="-3578987786562339930" onmouseenter="enter('-3578987786562339930');" onmouseout="out('-3578987786562339930');" style=""> 147              em.remove(customerAddress);                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149      }                                                                                                             </span>
<span  style=""> 150                                                                                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 151 -                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 152 +    @Override                                                                                                     </span>
<span class="7948482626287429940" onmouseenter="enter('7948482626287429940');" onmouseout="out('7948482626287429940');" style=""> 153      @SuppressWarnings(&quot;unchecked&quot;)                                                                                </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 154 -    @Override                                                                                                     </span>
<span class="2739438753959711043" onmouseenter="enter('2739438753959711043');" onmouseout="out('2739438753959711043');" style=""> 155      public CustomerAddress findDefaultCustomerAddress(Long customerId) {                                          </span>
<span class="401288734530170433" onmouseenter="enter('401288734530170433');" onmouseout="out('401288734530170433');" style=""> 156          Query query = em.createNamedQuery(&quot;BC_FIND_DEFAULT_ADDRESS_BY_CUSTOMER_ID&quot;);                              </span>
<span class="8561515080977906642" onmouseenter="enter('8561515080977906642');" onmouseout="out('8561515080977906642');" style=""> 157          query.setParameter(&quot;customerId&quot;, customerId);                                                             </span>
<span class="5538742140932691325" onmouseenter="enter('5538742140932691325');" onmouseout="out('5538742140932691325');" style=""> 158          List&lt;CustomerAddress&gt; customerAddresses = query.getResultList();                                          </span>
<span class="7583529804453956901" onmouseenter="enter('7583529804453956901');" onmouseout="out('7583529804453956901');" style=""> 159          return customerAddresses.isEmpty() ? null : customerAddresses.get(0);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160      }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 161  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            