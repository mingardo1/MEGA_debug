<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>420</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    420
                    <a href="419.html">prev</a>
                    <a href="421.html">next</a>
                    <a href="420_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    EhsanTang/ApiManager_8d736aa2e68667d44b70ef12bcb8ddd207f641a5_api/src/main/java/cn/crap/controller/user/InterfaceController.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\EhsanTang\ApiManager show &quot;8d736aa2e68667d44b70ef12bcb8ddd207f641a5:api/src/main/java/cn/crap/controller/user/InterfaceController.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\EhsanTang\ApiManager show &quot;8d736aa2e68667d44b70ef12bcb8ddd207f641a5^1:api/src/main/java/cn/crap/controller/user/InterfaceController.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\EhsanTang\ApiManager show &quot;8d736aa2e68667d44b70ef12bcb8ddd207f641a5^2:api/src/main/java/cn/crap/controller/user/InterfaceController.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\EhsanTang\ApiManager show &quot;d55f2c80dd4e445a00e823a5d1bd2f8dbc94ffd8:api/src/main/java/cn/crap/controller/user/InterfaceController.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj], [s]], subset: [[bsj]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8453884345636310198" onmouseenter="enter('8453884345636310198');" onmouseout="out('8453884345636310198');" style="">   1 package cn.crap.controller.user;                                                                        </span>
<span  style="">   2                                                                                                         </span>
<span class="3872670124992133569" onmouseenter="enter('3872670124992133569');" onmouseout="out('3872670124992133569');" style="">   3 import cn.crap.adapter.InterfaceAdapter;                                                                </span>
<span class="4279274079824086333" onmouseenter="enter('4279274079824086333');" onmouseout="out('4279274079824086333');" style="">   4 import cn.crap.beans.Config;                                                                            </span>
<span class="6807184333094047547" onmouseenter="enter('6807184333094047547');" onmouseout="out('6807184333094047547');" style="">   5 import cn.crap.dto.InterfaceDto;                                                                        </span>
<span class="7929325164483847730" onmouseenter="enter('7929325164483847730');" onmouseout="out('7929325164483847730');" style="">   6 import cn.crap.dto.LoginInfoDto;                                                                        </span>
<span class="1522833305812512221" onmouseenter="enter('1522833305812512221');" onmouseout="out('1522833305812512221');" style="">   7 import cn.crap.dto.SearchDto;                                                                           </span>
<span class="-911749451892422883" onmouseenter="enter('-911749451892422883');" onmouseout="out('-911749451892422883');" style="">   8 import cn.crap.enumer.MonitorType;                                                                      </span>
<span class="5139023199245080803" onmouseenter="enter('5139023199245080803');" onmouseout="out('5139023199245080803');" style="">   9 import cn.crap.enumer.MyError;                                                                          </span>
<span class="-7847071603028321447" onmouseenter="enter('-7847071603028321447');" onmouseout="out('-7847071603028321447');" style="">  10 import cn.crap.framework.JsonResult;                                                                    </span>
<span class="-7574536783671103865" onmouseenter="enter('-7574536783671103865');" onmouseout="out('-7574536783671103865');" style="">  11 import cn.crap.framework.MyException;                                                                   </span>
<span class="-4522781807489195049" onmouseenter="enter('-4522781807489195049');" onmouseout="out('-4522781807489195049');" style="">  12 import cn.crap.framework.base.BaseController;                                                           </span>
<span class="4903612087055488212" onmouseenter="enter('4903612087055488212');" onmouseout="out('4903612087055488212');" style="">  13 import cn.crap.framework.interceptor.AuthPassport;                                                      </span>
<span class="8147845229390238491" onmouseenter="enter('8147845229390238491');" onmouseout="out('8147845229390238491');" style="">  14 import cn.crap.model.Error;                                                                             </span>
<span class="6961814849649346163" onmouseenter="enter('6961814849649346163');" onmouseout="out('6961814849649346163');" style="">  15 import cn.crap.model.InterfaceWithBLOBs;                                                                </span>
<span class="-3829059158540726081" onmouseenter="enter('-3829059158540726081');" onmouseout="out('-3829059158540726081');" style="">  16 import cn.crap.model.Module;                                                                            </span>
<span class="-2569611458616973012" onmouseenter="enter('-2569611458616973012');" onmouseout="out('-2569611458616973012');" style="">  17 import cn.crap.model.Project;                                                                           </span>
<span class="24505043057363846" onmouseenter="enter('24505043057363846');" onmouseout="out('24505043057363846');" style="">  18 import cn.crap.query.ErrorQuery;                                                                        </span>
<span class="5577390926415763020" onmouseenter="enter('5577390926415763020');" onmouseout="out('5577390926415763020');" style="">  19 import cn.crap.query.InterfaceQuery;                                                                    </span>
<span class="-5580999983088044782" onmouseenter="enter('-5580999983088044782');" onmouseout="out('-5580999983088044782');" style="">  20 import cn.crap.service.ErrorService;                                                                    </span>
<span class="2810978048240697020" onmouseenter="enter('2810978048240697020');" onmouseout="out('2810978048240697020');" style="">  21 import cn.crap.service.ISearchService;                                                                  </span>
<span class="-256793303282880299" onmouseenter="enter('-256793303282880299');" onmouseout="out('-256793303282880299');" style="">  22 import cn.crap.service.InterfaceService;                                                                </span>
<span class="5115699361496505387" onmouseenter="enter('5115699361496505387');" onmouseout="out('5115699361496505387');" style="">  23 import cn.crap.utils.LoginUserHelper;                                                                   </span>
<span class="6445485251376419284" onmouseenter="enter('6445485251376419284');" onmouseout="out('6445485251376419284');" style="">  24 import cn.crap.utils.MyString;                                                                          </span>
<span class="7821392437622009242" onmouseenter="enter('7821392437622009242');" onmouseout="out('7821392437622009242');" style="">  25 import cn.crap.utils.Page;                                                                              </span>
<span class="2894550376389390724" onmouseenter="enter('2894550376389390724');" onmouseout="out('2894550376389390724');" style="">  26 import cn.crap.utils.Tools;                                                                             </span>
<span class="9045939009765002950" onmouseenter="enter('9045939009765002950');" onmouseout="out('9045939009765002950');" style="">  27 import net.sf.json.JSONArray;                                                                           </span>
<span class="-6148326362900055524" onmouseenter="enter('-6148326362900055524');" onmouseout="out('-6148326362900055524');" style="">  28 import org.springframework.beans.factory.annotation.Autowired;                                          </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  29 import org.springframework.stereotype.Controller;                                                       </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  30 import org.springframework.util.Assert;                                                                 </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  31 import org.springframework.web.bind.annotation.ModelAttribute;                                          </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  32 import org.springframework.web.bind.annotation.RequestMapping;                                          </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  33 import org.springframework.web.bind.annotation.RequestParam;                                            </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  34 import org.springframework.web.bind.annotation.ResponseBody;                                            </span>
<span  style="">  35                                                                                                         </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  36 import java.io.IOException;                                                                             </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  37 import java.util.List;                                                                                  </span>
<span  style="">  38                                                                                                         </span>
<span class="4777805177773543995" onmouseenter="enter('4777805177773543995');" onmouseout="out('4777805177773543995');" style="">  39 @Controller                                                                                             </span>
<span class="-1946225143665328935" onmouseenter="enter('-1946225143665328935');" onmouseout="out('-1946225143665328935');" style="">  40 @RequestMapping(&quot;/user/interface&quot;)                                                                      </span>
<span class="6388668049573310758" onmouseenter="enter('6388668049573310758');" onmouseout="out('6388668049573310758');" style="">  41 public class InterfaceController extends BaseController{                                                </span>
<span  style="">  42                                                                                                         </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  43 	@Autowired                                                                                             </span>
<span class="5676854317382137038" onmouseenter="enter('5676854317382137038');" onmouseout="out('5676854317382137038');" style="">  44 	private InterfaceService interfaceService;                                                             </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  45 	@Autowired                                                                                             </span>
<span class="-925519006397285322" onmouseenter="enter('-925519006397285322');" onmouseout="out('-925519006397285322');" style="">  46 	private ISearchService luceneService;                                                                  </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  47 	@Autowired                                                                                             </span>
<span class="-3968544807213930836" onmouseenter="enter('-3968544807213930836');" onmouseout="out('-3968544807213930836');" style="">  48 	private ErrorService errorService;                                                                     </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  49 	@Autowired                                                                                             </span>
<span class="-3607813097408339844" onmouseenter="enter('-3607813097408339844');" onmouseout="out('-3607813097408339844');" style="">  50 	private Config config;                                                                                 </span>
<span  style="">  51 	                                                                                                       </span>
<span  style="">  52 	                                                                                                       </span>
<span class="3216165995479628896" onmouseenter="enter('3216165995479628896');" onmouseout="out('3216165995479628896');" style="">  53 	@RequestMapping(&quot;/list.do&quot;)                                                                            </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  54 	@ResponseBody                                                                                          </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style="">  55 	@AuthPassport                                                                                          </span>
<span class="406281474848555250" onmouseenter="enter('406281474848555250');" onmouseout="out('406281474848555250');" style="">  56 	public JsonResult list(@RequestParam String moduleId, String interfaceName, String url,                </span>
<span class="6957141086400891835" onmouseenter="enter('6957141086400891835');" onmouseout="out('6957141086400891835');" style="">  57 			 Integer currentPage) throws MyException{                                                            </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style="">  58 		InterfaceQuery interfaceQuery = new InterfaceQuery();                                                 </span>
<span class="8382525882236311366" onmouseenter="enter('8382525882236311366');" onmouseout="out('8382525882236311366');" style=""><abbr title="  59 		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(currentPage);">  59 		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(cur🔵</abbr></span>
<span class="-5279124502853396526" onmouseenter="enter('-5279124502853396526');" onmouseout="out('-5279124502853396526');" style="">  60 		Page page= new Page(interfaceQuery);                                                                  </span>
<span  style="">  61                                                                                                         </span>
<span class="3442007748957955908" onmouseenter="enter('3442007748957955908');" onmouseout="out('3442007748957955908');" style="">  62 		Module module = moduleCache.get(moduleId);                                                            </span>
<span class="8699301439456190280" onmouseenter="enter('8699301439456190280');" onmouseout="out('8699301439456190280');" style="">  63 		Project project = projectCache.get(module.getProjectId());                                            </span>
<span class="6295340851346331112" onmouseenter="enter('6295340851346331112');" onmouseout="out('6295340851346331112');" style="">  64 		checkUserPermissionByProject(project.getId(), VIEW);                                                  </span>
<span  style="">  65                                                                                                         </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style="">  66 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-8091314608405686849" onmouseenter="enter('-8091314608405686849');" onmouseout="out('-8091314608405686849');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  67 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module, project);">  67 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module,🔵</abbr></span>
<span class="-3280997506223267100" onmouseenter="enter('-3280997506223267100');" onmouseout="out('-3280997506223267100');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  68 		page.setAllRow(interfaceService.count(interfaceQuery));                                               </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style="">  69 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70                                                                                                         </span>
<span class="-8743619996132367741" onmouseenter="enter('-8743619996132367741');" onmouseout="out('-8743619996132367741');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  71 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example), null);">  71 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOB🔵</abbr></span>
<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72 		JsonResult result = new JsonResult(1, interfaces, page);                                              </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  73 =======                                                                                                  </span>
<span class="-8743619996132367741" onmouseenter="enter('-8743619996132367741');" onmouseout="out('-8743619996132367741');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  74 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example), null);">  74 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOB🔵</abbr></span>
<span class="7334426988050538035" onmouseenter="enter('7334426988050538035');" onmouseout="out('7334426988050538035');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  75         page.setAllRow(mybatisInterfaceService.countByExample(example));                                </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style="">  76 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="">  77 		JsonResult result = new JsonResult(1, interfaces, page);                                              </span>
<span class="-3039605850617260143" onmouseenter="enter('-3039605850617260143');" onmouseout="out('-3039605850617260143');" style="">  78 		result.putOthers(&quot;crumbs&quot;, Tools.getCrumbs(&quot;接口列表:&quot;+ moduleCache.get(moduleId).getName(),&quot;void&quot;))      </span>
<span class="-2242017820679200314" onmouseenter="enter('-2242017820679200314');" onmouseout="out('-2242017820679200314');" style="">  79 				.putOthers(&quot;module&quot;, moduleCache.get(moduleId));                                                    </span>
<span  style="">  80                                                                                                         </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  81 		return result;                                                                                        </span>
<span  style="">  82 		                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83 	}                                                                                                      </span>
<span  style="">  84                                                                                                         </span>
<span class="-557002042091694149" onmouseenter="enter('-557002042091694149');" onmouseout="out('-557002042091694149');" style="">  85 	@RequestMapping(&quot;/detail.do&quot;)                                                                          </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  86 	@ResponseBody                                                                                          </span>
<span class="-7956266425262709264" onmouseenter="enter('-7956266425262709264');" onmouseout="out('-7956266425262709264');" style="">  87 	public JsonResult detail(String id, String moduleId) throws MyException {                              </span>
<span class="-5013732608106508542" onmouseenter="enter('-5013732608106508542');" onmouseout="out('-5013732608106508542');" style="">  88 		InterfaceWithBLOBs model;                                                                             </span>
<span class="6526027684909256553" onmouseenter="enter('6526027684909256553');" onmouseout="out('6526027684909256553');" style="">  89 		Module module = null;                                                                                 </span>
<span class="-6983393444998086393" onmouseenter="enter('-6983393444998086393');" onmouseout="out('-6983393444998086393');" style="">  90 		if(id != null){                                                                                       </span>
<span class="-2399207700769929325" onmouseenter="enter('-2399207700769929325');" onmouseout="out('-2399207700769929325');" style="">  91 			model= interfaceService.getById(id);                                                                 </span>
<span class="1040064000347861178" onmouseenter="enter('1040064000347861178');" onmouseout="out('1040064000347861178');" style="">  92 			module = moduleCache.get(model.getModuleId());                                                       </span>
<span class="-185843402063825431" onmouseenter="enter('-185843402063825431');" onmouseout="out('-185843402063825431');" style="">  93 			checkUserPermissionByProject(model.getProjectId(), VIEW);                                            </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style="">  94 		}else{                                                                                                </span>
<span class="-7029962562203235323" onmouseenter="enter('-7029962562203235323');" onmouseout="out('-7029962562203235323');" style="">  95 			model = new InterfaceWithBLOBs();                                                                    </span>
<span class="-2587857982027861322" onmouseenter="enter('-2587857982027861322');" onmouseout="out('-2587857982027861322');" style="">  96 			module = moduleCache.get(moduleId);                                                                  </span>
<span class="-853942339085784102" onmouseenter="enter('-853942339085784102');" onmouseout="out('-853942339085784102');" style="">  97 			model.setModuleId( moduleId);                                                                        </span>
<span class="-5617097986837608318" onmouseenter="enter('-5617097986837608318');" onmouseout="out('-5617097986837608318');" style="">  98 			model.setProjectId(module.getProjectId());                                                           </span>
<span class="4623621077757195404" onmouseenter="enter('4623621077757195404');" onmouseout="out('4623621077757195404');" style="">  99 			model.setParam(&quot;form=[]&quot;);                                                                           </span>
<span class="-646854625022819456" onmouseenter="enter('-646854625022819456');" onmouseout="out('-646854625022819456');" style=""> 100 			model.setResponseParam(&quot;[]&quot;);                                                                        </span>
<span class="-7417036509485016685" onmouseenter="enter('-7417036509485016685');" onmouseout="out('-7417036509485016685');" style=""> 101 			model.setHeader(&quot;[]&quot;);                                                                               </span>
<span class="2272429349124999400" onmouseenter="enter('2272429349124999400');" onmouseout="out('2272429349124999400');" style=""> 102 			model.setParamRemark(&quot;[]&quot;);                                                                          </span>
<span class="-8254387329445674854" onmouseenter="enter('-8254387329445674854');" onmouseout="out('-8254387329445674854');" style=""> 103 			if(!MyString.isEmpty(module.getTemplateId())){                                                       </span>
<span class="-4020697440483671496" onmouseenter="enter('-4020697440483671496');" onmouseout="out('-4020697440483671496');" style=""> 104 				InterfaceWithBLOBs template = interfaceService.getById(module.getTemplateId());                     </span>
<span class="5678506116785444717" onmouseenter="enter('5678506116785444717');" onmouseout="out('5678506116785444717');" style=""> 105 				// 根据模板初始化接口                                                                                        </span>
<span class="-4452779201008749745" onmouseenter="enter('-4452779201008749745');" onmouseout="out('-4452779201008749745');" style=""> 106 				if(template != null){                                                                               </span>
<span class="5089751341604219548" onmouseenter="enter('5089751341604219548');" onmouseout="out('5089751341604219548');" style=""> 107 					model.setHeader(template.getHeader());                                                             </span>
<span class="-7527905069934626121" onmouseenter="enter('-7527905069934626121');" onmouseout="out('-7527905069934626121');" style=""> 108 					model.setParam(template.getParam());                                                               </span>
<span class="-7059470924530166388" onmouseenter="enter('-7059470924530166388');" onmouseout="out('-7059470924530166388');" style=""> 109 					model.setMethod(template.getMethod());                                                             </span>
<span class="5940911261599321088" onmouseenter="enter('5940911261599321088');" onmouseout="out('5940911261599321088');" style=""> 110 					model.setVersion(template.getVersion());                                                           </span>
<span class="-3448468761886356175" onmouseenter="enter('-3448468761886356175');" onmouseout="out('-3448468761886356175');" style=""> 111 					model.setParamRemark(template.getParamRemark());                                                   </span>
<span class="1622152235047204734" onmouseenter="enter('1622152235047204734');" onmouseout="out('1622152235047204734');" style=""> 112 					model.setResponseParam(template.getResponseParam());                                               </span>
<span class="-6414379266760239220" onmouseenter="enter('-6414379266760239220');" onmouseout="out('-6414379266760239220');" style=""> 113 					model.setErrorList(template.getErrorList());                                                       </span>
<span class="-379237002060688021" onmouseenter="enter('-379237002060688021');" onmouseout="out('-379237002060688021');" style=""> 114 					model.setErrors(template.getErrors());                                                             </span>
<span class="2306293464665606986" onmouseenter="enter('2306293464665606986');" onmouseout="out('2306293464665606986');" style=""> 115 					model.setFalseExam(template.getFalseExam());                                                       </span>
<span class="5307078882417853010" onmouseenter="enter('5307078882417853010');" onmouseout="out('5307078882417853010');" style=""> 116 					model.setTrueExam(template.getTrueExam());                                                         </span>
<span class="-994236842464253118" onmouseenter="enter('-994236842464253118');" onmouseout="out('-994236842464253118');" style=""> 117 					model.setStatus(template.getStatus());                                                             </span>
<span class="-2721857626840181883" onmouseenter="enter('-2721857626840181883');" onmouseout="out('-2721857626840181883');" style=""> 118 					model.setContentType(template.getContentType());                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119 				}                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120 			}                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121 		}                                                                                                     </span>
<span class="5907549922391530254" onmouseenter="enter('5907549922391530254');" onmouseout="out('5907549922391530254');" style=""> 122 		return new JsonResult(1, InterfaceAdapter.getDto(model, module, null, false));                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123 	}                                                                                                      </span>
<span  style=""> 124 	                                                                                                       </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 125 	/**                                                                                                    </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 126 	 * @param interFace                                                                                    </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 127 	 * @return                                                                                             </span>
<span class="-5665355684135370133" onmouseenter="enter('-5665355684135370133');" onmouseout="out('-5665355684135370133');" style=""> 128 	 * @throws MyException                                                                                 </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style=""> 129 	 * @throws IOException                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 130 	 */                                                                                                    </span>
<span class="3944392597235221522" onmouseenter="enter('3944392597235221522');" onmouseout="out('3944392597235221522');" style=""> 131 	@RequestMapping(&quot;/copy.do&quot;)                                                                            </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 132 	@ResponseBody                                                                                          </span>
<span class="1639735162589969103" onmouseenter="enter('1639735162589969103');" onmouseout="out('1639735162589969103');" style=""> 133 	public JsonResult copy(@ModelAttribute InterfaceDto interFace) throws MyException, IOException {       </span>
<span class="-8206169773439054267" onmouseenter="enter('-8206169773439054267');" onmouseout="out('-8206169773439054267');" style=""> 134 		//判断是否拥有该模块的权限                                                                                        </span>
<span class="2279808889297804532" onmouseenter="enter('2279808889297804532');" onmouseout="out('2279808889297804532');" style=""> 135 		checkUserPermissionByProject(interFace.getProjectId(), ADD_INTER);                                    </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 136 		Module module = moduleCache.get(interFace.getModuleId());                                             </span>
<span  style=""> 137                                                                                                         </span>
<span class="6932488038728960880" onmouseenter="enter('6932488038728960880');" onmouseout="out('6932488038728960880');" style=""> 138 		if(!config.isCanRepeatUrl()){                                                                         </span>
<span class="-3960254172214938545" onmouseenter="enter('-3960254172214938545');" onmouseout="out('-3960254172214938545');" style=""><abbr title=" 139 			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(module.getUrl() + interFace.getUrl())) &gt; 0){"> 139 			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(m🔵</abbr></span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 140 				throw new MyException(MyError.E000004);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141 			}                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142 		}                                                                                                     </span>
<span class="-4927829934273936544" onmouseenter="enter('-4927829934273936544');" onmouseout="out('-4927829934273936544');" style=""> 143 		interFace.setId(null);                                                                                </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 144 		interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                           </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style=""> 145 		interfaceService.insert(InterfaceAdapter.getModel(interFace));                                        </span>
<span  style=""> 146                                                                                                         </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 147 		luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                          </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 148 		return new JsonResult(1, interFace);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149 	}                                                                                                      </span>
<span  style=""> 150 	                                                                                                       </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 151 	/**                                                                                                    </span>
<span class="-7492619764061686694" onmouseenter="enter('-7492619764061686694');" onmouseout="out('-7492619764061686694');" style=""> 152 	 * 根据参数生成请求示例                                                                                          </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 153 	 * @param interFace                                                                                    </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 154 	 * @return                                                                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 155 	 */                                                                                                    </span>
<span class="4685904336828752448" onmouseenter="enter('4685904336828752448');" onmouseout="out('4685904336828752448');" style=""> 156 	@RequestMapping(&quot;/getRequestExam.do&quot;)                                                                  </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 157 	@ResponseBody                                                                                          </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 158 	@AuthPassport                                                                                          </span>
<span class="3638284629125143669" onmouseenter="enter('3638284629125143669');" onmouseout="out('3638284629125143669');" style=""> 159 	public JsonResult getRequestExam(@ModelAttribute InterfaceDto interFace) {                             </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style=""> 160 		interfaceService.getInterFaceRequestExam(interFace);                                                  </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 161 		return new JsonResult(1, interFace);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162 	}                                                                                                      </span>
<span  style=""> 163                                                                                                         </span>
<span class="9102117119873215850" onmouseenter="enter('9102117119873215850');" onmouseout="out('9102117119873215850');" style=""> 164 	@RequestMapping(&quot;/addOrUpdate.do&quot;)                                                                     </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 165 	@ResponseBody                                                                                          </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 166 	@AuthPassport                                                                                          </span>
<span class="-2371211080264372097" onmouseenter="enter('-2371211080264372097');" onmouseout="out('-2371211080264372097');" style=""> 167 	public JsonResult addOrUpdate(@ModelAttribute InterfaceDto interFace) throws IOException, MyException {</span>
<span class="-7246000527363885378" onmouseenter="enter('-7246000527363885378');" onmouseout="out('-7246000527363885378');" style=""> 168 		Assert.notNull(interFace.getProjectId(), &quot;projectId can&#x27;t be null&quot;);                                  </span>
<span  style=""> 169                                                                                                         </span>
<span class="3680314398792253191" onmouseenter="enter('3680314398792253191');" onmouseout="out('3680314398792253191');" style=""> 170 		if(MyString.isEmpty(interFace.getUrl())) {                                                            </span>
<span class="-2022936812063158899" onmouseenter="enter('-2022936812063158899');" onmouseout="out('-2022936812063158899');" style=""> 171 			return new JsonResult(MyError.E000005);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172 		}                                                                                                     </span>
<span class="-1520907386631176867" onmouseenter="enter('-1520907386631176867');" onmouseout="out('-1520907386631176867');" style=""> 173 		interFace.setUrl(interFace.getUrl().trim());                                                          </span>
<span  style=""> 174 		                                                                                                      </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 175 		/**                                                                                                   </span>
<span class="7045250225799015466" onmouseenter="enter('7045250225799015466');" onmouseout="out('7045250225799015466');" style=""> 176 		 * 根据选着的错误码id，组装json字符串                                                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 177 		 */                                                                                                   </span>
<span class="-8271447941175878236" onmouseenter="enter('-8271447941175878236');" onmouseout="out('-8271447941175878236');" style=""> 178         ErrorQuery query = new ErrorQuery().setProjectId(interFace.getProjectId())                      </span>
<span class="-954574203782809238" onmouseenter="enter('-954574203782809238');" onmouseout="out('-954574203782809238');" style=""> 179                 .setErrorCodeList(Tools.getIdsFromField(interFace.getErrorList())).setPageSize(100);    </span>
<span class="7007176770365788864" onmouseenter="enter('7007176770365788864');" onmouseout="out('7007176770365788864');" style=""> 180         List&lt;Error&gt; errors  = errorService.query(query);                                                </span>
<span class="8099633558915995513" onmouseenter="enter('8099633558915995513');" onmouseout="out('8099633558915995513');" style=""> 181 		interFace.setErrors(JSONArray.fromObject(errors).toString());                                         </span>
<span  style=""> 182                                                                                                         </span>
<span class="1766529869277441370" onmouseenter="enter('1766529869277441370');" onmouseout="out('1766529869277441370');" style=""> 183 		LoginInfoDto user = LoginUserHelper.getUser();                                                        </span>
<span class="3045017157654780991" onmouseenter="enter('3045017157654780991');" onmouseout="out('3045017157654780991');" style=""> 184 		interFace.setUpdateBy(&quot;userName：&quot;+user.getUserName()+&quot; | trueName：&quot;+ user.getTrueName());             </span>
<span  style=""> 185                                                                                                         </span>
<span class="8532154523355485279" onmouseenter="enter('8532154523355485279');" onmouseout="out('8532154523355485279');" style=""> 186 		//请求示例为空，则自动添加                                                                                        </span>
<span class="4679476040111179483" onmouseenter="enter('4679476040111179483');" onmouseout="out('4679476040111179483');" style=""> 187 		if(MyString.isEmpty(interFace.getRequestExam())){                                                     </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style=""> 188 			interfaceService.getInterFaceRequestExam(interFace);                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189 		}                                                                                                     </span>
<span class="2009751668094616815" onmouseenter="enter('2009751668094616815');" onmouseout="out('2009751668094616815');" style=""> 190         interFace.setMonitorType(MonitorType.No.getValue());                                            </span>
<span class="-941211001760564316" onmouseenter="enter('-941211001760564316');" onmouseout="out('-941211001760564316');" style=""> 191 		//检查邮件格式是否正确                                                                                          </span>
<span class="-22728527345241303" onmouseenter="enter('-22728527345241303');" onmouseout="out('-22728527345241303');" style=""> 192 		/**if(interFace.getMonitorType() != MonitorType.No.getValue()){                                       </span>
<span class="6470615935665347659" onmouseenter="enter('6470615935665347659');" onmouseout="out('6470615935665347659');" style=""> 193 			if(!MyString.isEmpty(interFace.getMonitorEmails())){                                                 </span>
<span class="9144489970704028395" onmouseenter="enter('9144489970704028395');" onmouseout="out('9144489970704028395');" style=""> 194 				for(String email : interFace.getMonitorEmails().split(&quot;;&quot;)){                                        </span>
<span class="1445021202833529364" onmouseenter="enter('1445021202833529364');" onmouseout="out('1445021202833529364');" style=""> 195 					if( !Tools.checkEmail(email) ){                                                                    </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 196 						throw new MyException(E000032&quot;);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197 					}                                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198 				}                                                                                                   </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 199 			}else{                                                                                               </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 200 				throw new MyException(E000032&quot;);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201 			}                                                                                                    </span>
<span class="4278934915650879980" onmouseenter="enter('4278934915650879980');" onmouseout="out('4278934915650879980');" style=""> 202 		}**/                                                                                                  </span>
<span  style=""> 203                                                                                                         </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 204 		Module module = moduleCache.get(interFace.getModuleId());                                             </span>
<span class="5243642841384736036" onmouseenter="enter('5243642841384736036');" onmouseout="out('5243642841384736036');" style=""> 205 		if (!MyString.isEmpty(interFace.getId())) {                                                           </span>
<span class="5922306788492517961" onmouseenter="enter('5922306788492517961');" onmouseout="out('5922306788492517961');" style=""> 206 			String oldModuleId = interfaceService.getById(interFace.getId()).getModuleId();                      </span>
<span class="-2347736199422220093" onmouseenter="enter('-2347736199422220093');" onmouseout="out('-2347736199422220093');" style=""> 207 			String projectId = moduleCache.get(oldModuleId).getProjectId();                                      </span>
<span class="3404097771773836763" onmouseenter="enter('3404097771773836763');" onmouseout="out('3404097771773836763');" style=""> 208 			Project project = projectCache.get(interFace.getProjectId() );                                       </span>
<span  style=""> 209                                                                                                         </span>
<span class="8257633002726469813" onmouseenter="enter('8257633002726469813');" onmouseout="out('8257633002726469813');" style=""> 210 			// 接口只能在同一个项目下的模块中移动                                                                                 </span>
<span class="-8654578892208964423" onmouseenter="enter('-8654578892208964423');" onmouseout="out('-8654578892208964423');" style=""> 211 			if( !projectId.equals(project.getId())){                                                             </span>
<span class="3828115358811128245" onmouseenter="enter('3828115358811128245');" onmouseout="out('3828115358811128245');" style=""> 212 				throw new MyException(MyError.E000047);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213 			}                                                                                                    </span>
<span class="7913111081342953879" onmouseenter="enter('7913111081342953879');" onmouseout="out('7913111081342953879');" style=""> 214 			// 判断是否有修改模块的权限                                                                                      </span>
<span class="-3388185289221243217" onmouseenter="enter('-3388185289221243217');" onmouseout="out('-3388185289221243217');" style=""> 215 			checkUserPermissionByProject(project, MOD_INTER);                                                    </span>
<span  style=""> 216 			                                                                                                     </span>
<span class="-2337234168619506843" onmouseenter="enter('-2337234168619506843');" onmouseout="out('-2337234168619506843');" style=""> 217 			//同一模块下不允许 url 重复                                                                                    </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style=""> 218             InterfaceQuery interfaceQuery = new InterfaceQuery();                                       </span>
<span class="-6576102208848169069" onmouseenter="enter('-6576102208848169069');" onmouseout="out('-6576102208848169069');" style=""><abbr title=" 219             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl()).setExceptId(interFace.getId());"> 219             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.get🔵</abbr></span>
<span class="1249147487164872071" onmouseenter="enter('1249147487164872071');" onmouseout="out('1249147487164872071');" style=""> 220 			if( !config.isCanRepeatUrl() &amp;&amp; interfaceService.count(interfaceQuery) &gt;0 ){                         </span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 221 				throw new MyException(MyError.E000004);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222 			}                                                                                                    </span>
<span  style=""> 223 			                                                                                                     </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 224 			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                          </span>
<span class="4401707851467701848" onmouseenter="enter('4401707851467701848');" onmouseout="out('4401707851467701848');" style=""> 225 			interfaceService.update(InterfaceAdapter.getModel(interFace), &quot;接口&quot;, &quot;&quot;);                             </span>
<span class="40941063765621390" onmouseenter="enter('40941063765621390');" onmouseout="out('40941063765621390');" style=""> 226 			if(interFace.getId().equals(interFace.getProjectId())){                                              </span>
<span class="8284136097153874854" onmouseenter="enter('8284136097153874854');" onmouseout="out('8284136097153874854');" style=""> 227 				throw new MyException(MyError.E000027);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228 			}                                                                                                    </span>
<span class="-8095562614157245048" onmouseenter="enter('-8095562614157245048');" onmouseout="out('-8095562614157245048');" style=""> 229 			luceneService.update(InterfaceAdapter.getSearchDto(interFace));                                      </span>
<span  style=""> 230 			                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 231 		} else {                                                                                              </span>
<span class="-7477248359633755306" onmouseenter="enter('-7477248359633755306');" onmouseout="out('-7477248359633755306');" style=""> 232 			checkUserPermissionByProject(projectCache.get(interFace.getProjectId() ), ADD_INTER);                </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style=""> 233             InterfaceQuery interfaceQuery = new InterfaceQuery();                                       </span>
<span class="-7466550613099324542" onmouseenter="enter('-7466550613099324542');" onmouseout="out('-7466550613099324542');" style=""><abbr title=" 234             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl());"> 234             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.get🔵</abbr></span>
<span class="-8914770776061455942" onmouseenter="enter('-8914770776061455942');" onmouseout="out('-8914770776061455942');" style=""> 235 			if(!config.isCanRepeatUrl() &amp;&amp; interfaceService.count(interfaceQuery)&gt;0){                            </span>
<span class="8772628239303623293" onmouseenter="enter('8772628239303623293');" onmouseout="out('8772628239303623293');" style=""> 236 				return new JsonResult(MyError.E000004);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237 			}                                                                                                    </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 238 			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                          </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style=""> 239 			interfaceService.insert(InterfaceAdapter.getModel(interFace));                                       </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 240 			luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241 		}                                                                                                     </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 242 		return new JsonResult(1, interFace);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243 	}                                                                                                      </span>
<span  style=""> 244                                                                                                         </span>
<span class="3908622465717054108" onmouseenter="enter('3908622465717054108');" onmouseout="out('3908622465717054108');" style=""> 245 	@RequestMapping(&quot;/delete.do&quot;)                                                                          </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 246 	@ResponseBody                                                                                          </span>
<span class="-5585810528016230380" onmouseenter="enter('-5585810528016230380');" onmouseout="out('-5585810528016230380');" style=""> 247 	public JsonResult delete(String id, String ids) throws MyException, IOException{                       </span>
<span class="5500260682396997685" onmouseenter="enter('5500260682396997685');" onmouseout="out('5500260682396997685');" style=""> 248 		if( MyString.isEmpty(id) &amp;&amp; MyString.isEmpty(ids)){                                                   </span>
<span class="5841283794467303202" onmouseenter="enter('5841283794467303202');" onmouseout="out('5841283794467303202');" style=""> 249 			throw new MyException(MyError.E000029);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250 		}                                                                                                     </span>
<span class="-8135195691626680328" onmouseenter="enter('-8135195691626680328');" onmouseout="out('-8135195691626680328');" style=""> 251 		if( MyString.isEmpty(ids) ){                                                                          </span>
<span class="3511947876673837079" onmouseenter="enter('3511947876673837079');" onmouseout="out('3511947876673837079');" style=""> 252 			ids = id;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253 		}                                                                                                     </span>
<span  style=""> 254 		                                                                                                      </span>
<span class="-2656961914898447548" onmouseenter="enter('-2656961914898447548');" onmouseout="out('-2656961914898447548');" style=""> 255 		for(String tempId : ids.split(&quot;,&quot;)){                                                                  </span>
<span class="-3040966783477954494" onmouseenter="enter('-3040966783477954494');" onmouseout="out('-3040966783477954494');" style=""> 256 			if(MyString.isEmpty(tempId)){                                                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 257 				continue;                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258 			}                                                                                                    </span>
<span class="6005130977645696533" onmouseenter="enter('6005130977645696533');" onmouseout="out('6005130977645696533');" style=""> 259 			InterfaceWithBLOBs interFace = interfaceService.getById( tempId );                                   </span>
<span class="-3259762685715036382" onmouseenter="enter('-3259762685715036382');" onmouseout="out('-3259762685715036382');" style=""> 260 			checkUserPermissionByProject(interFace.getProjectId(), DEL_INTER);                                   </span>
<span class="5403926906782818954" onmouseenter="enter('5403926906782818954');" onmouseout="out('5403926906782818954');" style=""> 261 			interfaceService.delete(interFace.getId(), &quot;接口&quot;, &quot;&quot;);                                                </span>
<span class="2858649065821216875" onmouseenter="enter('2858649065821216875');" onmouseout="out('2858649065821216875');" style=""> 262 			luceneService.delete(new SearchDto(interFace.getId()));                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 263 		}                                                                                                     </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 264 		return new JsonResult(1, null);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265 	}                                                                                                      </span>
<span  style=""> 266                                                                                                         </span>
<span class="3383448423842759854" onmouseenter="enter('3383448423842759854');" onmouseout="out('3383448423842759854');" style=""> 267 	@RequestMapping(&quot;/changeSequence.do&quot;)                                                                  </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 268 	@ResponseBody                                                                                          </span>
<span class="-4262891591549373351" onmouseenter="enter('-4262891591549373351');" onmouseout="out('-4262891591549373351');" style=""><abbr title=" 269 	public JsonResult changeSequence(@RequestParam String id,@RequestParam String changeId) throws MyException {"> 269 	public JsonResult changeSequence(@RequestParam String id,@RequestParam String changeId) throws MyExcepti🔵</abbr></span>
<span class="-114025814901609390" onmouseenter="enter('-114025814901609390');" onmouseout="out('-114025814901609390');" style=""> 270 		InterfaceWithBLOBs change = interfaceService.getById(changeId);                                       </span>
<span class="1535172332471428490" onmouseenter="enter('1535172332471428490');" onmouseout="out('1535172332471428490');" style=""> 271 		InterfaceWithBLOBs model = interfaceService.getById(id);                                              </span>
<span class="1373326694122548312" onmouseenter="enter('1373326694122548312');" onmouseout="out('1373326694122548312');" style=""> 272 		checkUserPermissionByProject(model.getProjectId(), MOD_INTER);                                        </span>
<span class="9185443680929913036" onmouseenter="enter('9185443680929913036');" onmouseout="out('9185443680929913036');" style=""> 273 		checkUserPermissionByProject(change.getProjectId(), MOD_INTER);                                       </span>
<span  style=""> 274 		                                                                                                      </span>
<span class="-6471227968333011823" onmouseenter="enter('-6471227968333011823');" onmouseout="out('-6471227968333011823');" style=""> 275 		int modelSequence = model.getSequence();                                                              </span>
<span  style=""> 276 		                                                                                                      </span>
<span class="-7348627876629533627" onmouseenter="enter('-7348627876629533627');" onmouseout="out('-7348627876629533627');" style=""> 277 		model.setSequence(change.getSequence());                                                              </span>
<span class="-8403247859037350919" onmouseenter="enter('-8403247859037350919');" onmouseout="out('-8403247859037350919');" style=""> 278 		change.setSequence(modelSequence);                                                                    </span>
<span  style=""> 279                                                                                                         </span>
<span class="1992515717850273638" onmouseenter="enter('1992515717850273638');" onmouseout="out('1992515717850273638');" style=""> 280 		interfaceService.update(model);                                                                       </span>
<span class="8445067308225092068" onmouseenter="enter('8445067308225092068');" onmouseout="out('8445067308225092068');" style=""> 281 		interfaceService.update(change);                                                                      </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 282 		return new JsonResult(1, null);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283 	}                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284 }                                                                                                       </span>

</pre></td>
                            <td><pre><span class="8453884345636310198" onmouseenter="enter('8453884345636310198');" onmouseout="out('8453884345636310198');" style="">   1 package cn.crap.controller.user;                                                                         </span>
<span  style="">   2                                                                                                          </span>
<span class="3872670124992133569" onmouseenter="enter('3872670124992133569');" onmouseout="out('3872670124992133569');" style="">   3 import cn.crap.adapter.InterfaceAdapter;                                                                 </span>
<span class="6807184333094047547" onmouseenter="enter('6807184333094047547');" onmouseout="out('6807184333094047547');" style="">   4 import cn.crap.dto.InterfaceDto;                                                                         </span>
<span class="7929325164483847730" onmouseenter="enter('7929325164483847730');" onmouseout="out('7929325164483847730');" style="">   5 import cn.crap.dto.LoginInfoDto;                                                                         </span>
<span class="1522833305812512221" onmouseenter="enter('1522833305812512221');" onmouseout="out('1522833305812512221');" style="">   6 import cn.crap.dto.SearchDto;                                                                            </span>
<span class="-911749451892422883" onmouseenter="enter('-911749451892422883');" onmouseout="out('-911749451892422883');" style="">   7 import cn.crap.enumer.MonitorType;                                                                       </span>
<span class="5139023199245080803" onmouseenter="enter('5139023199245080803');" onmouseout="out('5139023199245080803');" style="">   8 import cn.crap.enumer.MyError;                                                                           </span>
<span class="-7847071603028321447" onmouseenter="enter('-7847071603028321447');" onmouseout="out('-7847071603028321447');" style="">   9 import cn.crap.framework.JsonResult;                                                                     </span>
<span class="-7574536783671103865" onmouseenter="enter('-7574536783671103865');" onmouseout="out('-7574536783671103865');" style="">  10 import cn.crap.framework.MyException;                                                                    </span>
<span class="-4522781807489195049" onmouseenter="enter('-4522781807489195049');" onmouseout="out('-4522781807489195049');" style="">  11 import cn.crap.framework.base.BaseController;                                                            </span>
<span class="4903612087055488212" onmouseenter="enter('4903612087055488212');" onmouseout="out('4903612087055488212');" style="">  12 import cn.crap.framework.interceptor.AuthPassport;                                                       </span>
<span class="8147845229390238491" onmouseenter="enter('8147845229390238491');" onmouseout="out('8147845229390238491');" style="">  13 import cn.crap.model.Error;                                                                              </span>
<span class="6961814849649346163" onmouseenter="enter('6961814849649346163');" onmouseout="out('6961814849649346163');" style="">  14 import cn.crap.model.InterfaceWithBLOBs;                                                                 </span>
<span class="-3829059158540726081" onmouseenter="enter('-3829059158540726081');" onmouseout="out('-3829059158540726081');" style="">  15 import cn.crap.model.Module;                                                                             </span>
<span class="-2569611458616973012" onmouseenter="enter('-2569611458616973012');" onmouseout="out('-2569611458616973012');" style="">  16 import cn.crap.model.Project;                                                                            </span>
<span class="24505043057363846" onmouseenter="enter('24505043057363846');" onmouseout="out('24505043057363846');" style="">  17 import cn.crap.query.ErrorQuery;                                                                         </span>
<span class="5577390926415763020" onmouseenter="enter('5577390926415763020');" onmouseout="out('5577390926415763020');" style="">  18 import cn.crap.query.InterfaceQuery;                                                                     </span>
<span class="-5580999983088044782" onmouseenter="enter('-5580999983088044782');" onmouseout="out('-5580999983088044782');" style="">  19 import cn.crap.service.ErrorService;                                                                     </span>
<span class="2810978048240697020" onmouseenter="enter('2810978048240697020');" onmouseout="out('2810978048240697020');" style="">  20 import cn.crap.service.ISearchService;                                                                   </span>
<span class="-256793303282880299" onmouseenter="enter('-256793303282880299');" onmouseout="out('-256793303282880299');" style="">  21 import cn.crap.service.InterfaceService;                                                                 </span>
<span class="5115699361496505387" onmouseenter="enter('5115699361496505387');" onmouseout="out('5115699361496505387');" style="">  22 import cn.crap.utils.LoginUserHelper;                                                                    </span>
<span class="6445485251376419284" onmouseenter="enter('6445485251376419284');" onmouseout="out('6445485251376419284');" style="">  23 import cn.crap.utils.MyString;                                                                           </span>
<span class="7821392437622009242" onmouseenter="enter('7821392437622009242');" onmouseout="out('7821392437622009242');" style="">  24 import cn.crap.utils.Page;                                                                               </span>
<span class="2894550376389390724" onmouseenter="enter('2894550376389390724');" onmouseout="out('2894550376389390724');" style="">  25 import cn.crap.utils.Tools;                                                                              </span>
<span class="4279274079824086333" onmouseenter="enter('4279274079824086333');" onmouseout="out('4279274079824086333');" style="">  26 import cn.crap.beans.Config;                                                                             </span>
<span class="9045939009765002950" onmouseenter="enter('9045939009765002950');" onmouseout="out('9045939009765002950');" style="">  27 import net.sf.json.JSONArray;                                                                            </span>
<span class="-6148326362900055524" onmouseenter="enter('-6148326362900055524');" onmouseout="out('-6148326362900055524');" style="">  28 import org.springframework.beans.factory.annotation.Autowired;                                           </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  29 import org.springframework.stereotype.Controller;                                                        </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  30 import org.springframework.util.Assert;                                                                  </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  31 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  32 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  33 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  34 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span  style="">  35                                                                                                          </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  36 import java.io.IOException;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  37 import java.util.List;                                                                                   </span>
<span  style="">  38                                                                                                          </span>
<span class="4777805177773543995" onmouseenter="enter('4777805177773543995');" onmouseout="out('4777805177773543995');" style="">  39 @Controller                                                                                              </span>
<span class="-1946225143665328935" onmouseenter="enter('-1946225143665328935');" onmouseout="out('-1946225143665328935');" style="">  40 @RequestMapping(&quot;/user/interface&quot;)                                                                       </span>
<span class="6388668049573310758" onmouseenter="enter('6388668049573310758');" onmouseout="out('6388668049573310758');" style="">  41 public class InterfaceController extends BaseController{                                                 </span>
<span  style="">  42                                                                                                          </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  43 	@Autowired                                                                                              </span>
<span class="5676854317382137038" onmouseenter="enter('5676854317382137038');" onmouseout="out('5676854317382137038');" style="">  44 	private InterfaceService interfaceService;                                                              </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  45 	@Autowired                                                                                              </span>
<span class="-925519006397285322" onmouseenter="enter('-925519006397285322');" onmouseout="out('-925519006397285322');" style="">  46 	private ISearchService luceneService;                                                                   </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  47 	@Autowired                                                                                              </span>
<span class="-3968544807213930836" onmouseenter="enter('-3968544807213930836');" onmouseout="out('-3968544807213930836');" style="">  48 	private ErrorService errorService;                                                                      </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  49 	@Autowired                                                                                              </span>
<span class="-3607813097408339844" onmouseenter="enter('-3607813097408339844');" onmouseout="out('-3607813097408339844');" style="">  50 	private Config config;                                                                                  </span>
<span  style="">  51                                                                                                          </span>
<span  style="">  52                                                                                                          </span>
<span class="3216165995479628896" onmouseenter="enter('3216165995479628896');" onmouseout="out('3216165995479628896');" style="">  53 	@RequestMapping(&quot;/list.do&quot;)                                                                             </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  54 	@ResponseBody                                                                                           </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style="">  55 	@AuthPassport                                                                                           </span>
<span class="406281474848555250" onmouseenter="enter('406281474848555250');" onmouseout="out('406281474848555250');" style="">  56 	public JsonResult list(@RequestParam String moduleId, String interfaceName, String url,                 </span>
<span class="6957141086400891835" onmouseenter="enter('6957141086400891835');" onmouseout="out('6957141086400891835');" style="">  57 			 Integer currentPage) throws MyException{                                                             </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style="">  58 		InterfaceQuery interfaceQuery = new InterfaceQuery();                                                  </span>
<span class="8382525882236311366" onmouseenter="enter('8382525882236311366');" onmouseout="out('8382525882236311366');" style=""><abbr title="  59 		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(currentPage);">  59 		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(cur🔵</abbr></span>
<span class="-5279124502853396526" onmouseenter="enter('-5279124502853396526');" onmouseout="out('-5279124502853396526');" style="">  60 		Page page= new Page(interfaceQuery);                                                                   </span>
<span  style="">  61                                                                                                          </span>
<span class="3442007748957955908" onmouseenter="enter('3442007748957955908');" onmouseout="out('3442007748957955908');" style="">  62 		Module module = moduleCache.get(moduleId);                                                             </span>
<span class="8699301439456190280" onmouseenter="enter('8699301439456190280');" onmouseout="out('8699301439456190280');" style="">  63 		Project project = projectCache.get(module.getProjectId());                                             </span>
<span class="6295340851346331112" onmouseenter="enter('6295340851346331112');" onmouseout="out('6295340851346331112');" style="">  64 		checkUserPermissionByProject(project.getId(), VIEW);                                                   </span>
<span  style="">  65                                                                                                          </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style="">  66 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-8091314608405686849" onmouseenter="enter('-8091314608405686849');" onmouseout="out('-8091314608405686849');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title="  67 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module, project);">  67 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module,🔵</abbr></span>
<span class="-3280997506223267100" onmouseenter="enter('-3280997506223267100');" onmouseout="out('-3280997506223267100');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  68 		page.setAllRow(interfaceService.count(interfaceQuery));                                                </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  69 ||||||| BASE                                                                                             </span>
<span class="-3262307933636202428" onmouseenter="enter('-3262307933636202428');" onmouseout="out('-3262307933636202428');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  70 		if (!MyString.isEmpty(url)){                                                                           </span>
<span class="-6698610763898127298" onmouseenter="enter('-6698610763898127298');" onmouseout="out('-6698610763898127298');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  71 			criteria.andFullUrlLike(&quot;%&quot; + url + &quot;%&quot;);                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  72 		}                                                                                                      </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  73                                                                                                          </span>
<span class="-8743619996132367741" onmouseenter="enter('-8743619996132367741');" onmouseout="out('-8743619996132367741');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  74 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example), null);">  74 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOB🔵</abbr></span>
<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0">  75 		JsonResult result = new JsonResult(1, interfaces, page);                                               </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  76 =======                                                                                                  </span>
<span class="-8743619996132367741" onmouseenter="enter('-8743619996132367741');" onmouseout="out('-8743619996132367741');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title="  77 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example), null);">  77 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOB🔵</abbr></span>
<span class="7334426988050538035" onmouseenter="enter('7334426988050538035');" onmouseout="out('7334426988050538035');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  78         page.setAllRow(mybatisInterfaceService.countByExample(example));                                 </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style="">  79 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="">  80 		JsonResult result = new JsonResult(1, interfaces, page);                                               </span>
<span class="-3039605850617260143" onmouseenter="enter('-3039605850617260143');" onmouseout="out('-3039605850617260143');" style="">  81 		result.putOthers(&quot;crumbs&quot;, Tools.getCrumbs(&quot;接口列表:&quot;+ moduleCache.get(moduleId).getName(),&quot;void&quot;))       </span>
<span class="-2242017820679200314" onmouseenter="enter('-2242017820679200314');" onmouseout="out('-2242017820679200314');" style="">  82 				.putOthers(&quot;module&quot;, moduleCache.get(moduleId));                                                     </span>
<span  style="">  83                                                                                                          </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  84 		return result;                                                                                         </span>
<span  style="">  85                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  86 	}                                                                                                       </span>
<span  style="">  87                                                                                                          </span>
<span class="-557002042091694149" onmouseenter="enter('-557002042091694149');" onmouseout="out('-557002042091694149');" style="">  88 	@RequestMapping(&quot;/detail.do&quot;)                                                                           </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  89 	@ResponseBody                                                                                           </span>
<span class="-7956266425262709264" onmouseenter="enter('-7956266425262709264');" onmouseout="out('-7956266425262709264');" style="">  90 	public JsonResult detail(String id, String moduleId) throws MyException {                               </span>
<span class="-5013732608106508542" onmouseenter="enter('-5013732608106508542');" onmouseout="out('-5013732608106508542');" style="">  91 		InterfaceWithBLOBs model;                                                                              </span>
<span class="6526027684909256553" onmouseenter="enter('6526027684909256553');" onmouseout="out('6526027684909256553');" style="">  92 		Module module = null;                                                                                  </span>
<span class="-6983393444998086393" onmouseenter="enter('-6983393444998086393');" onmouseout="out('-6983393444998086393');" style="">  93 		if(id != null){                                                                                        </span>
<span class="-2399207700769929325" onmouseenter="enter('-2399207700769929325');" onmouseout="out('-2399207700769929325');" style="">  94 			model= interfaceService.getById(id);                                                                  </span>
<span class="1040064000347861178" onmouseenter="enter('1040064000347861178');" onmouseout="out('1040064000347861178');" style="">  95 			module = moduleCache.get(model.getModuleId());                                                        </span>
<span class="-185843402063825431" onmouseenter="enter('-185843402063825431');" onmouseout="out('-185843402063825431');" style="">  96 			checkUserPermissionByProject(model.getProjectId(), VIEW);                                             </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style="">  97 		}else{                                                                                                 </span>
<span class="-7029962562203235323" onmouseenter="enter('-7029962562203235323');" onmouseout="out('-7029962562203235323');" style="">  98 			model = new InterfaceWithBLOBs();                                                                     </span>
<span class="-2587857982027861322" onmouseenter="enter('-2587857982027861322');" onmouseout="out('-2587857982027861322');" style="">  99 			module = moduleCache.get(moduleId);                                                                   </span>
<span class="-853942339085784102" onmouseenter="enter('-853942339085784102');" onmouseout="out('-853942339085784102');" style=""> 100 			model.setModuleId( moduleId);                                                                         </span>
<span class="-5617097986837608318" onmouseenter="enter('-5617097986837608318');" onmouseout="out('-5617097986837608318');" style=""> 101 			model.setProjectId(module.getProjectId());                                                            </span>
<span class="4623621077757195404" onmouseenter="enter('4623621077757195404');" onmouseout="out('4623621077757195404');" style=""> 102 			model.setParam(&quot;form=[]&quot;);                                                                            </span>
<span class="-646854625022819456" onmouseenter="enter('-646854625022819456');" onmouseout="out('-646854625022819456');" style=""> 103 			model.setResponseParam(&quot;[]&quot;);                                                                         </span>
<span class="-7417036509485016685" onmouseenter="enter('-7417036509485016685');" onmouseout="out('-7417036509485016685');" style=""> 104 			model.setHeader(&quot;[]&quot;);                                                                                </span>
<span class="2272429349124999400" onmouseenter="enter('2272429349124999400');" onmouseout="out('2272429349124999400');" style=""> 105 			model.setParamRemark(&quot;[]&quot;);                                                                           </span>
<span class="-8254387329445674854" onmouseenter="enter('-8254387329445674854');" onmouseout="out('-8254387329445674854');" style=""> 106 			if(!MyString.isEmpty(module.getTemplateId())){                                                        </span>
<span class="-4020697440483671496" onmouseenter="enter('-4020697440483671496');" onmouseout="out('-4020697440483671496');" style=""> 107 				InterfaceWithBLOBs template = interfaceService.getById(module.getTemplateId());                      </span>
<span class="5678506116785444717" onmouseenter="enter('5678506116785444717');" onmouseout="out('5678506116785444717');" style=""> 108 				// 根据模板初始化接口                                                                                         </span>
<span class="-4452779201008749745" onmouseenter="enter('-4452779201008749745');" onmouseout="out('-4452779201008749745');" style=""> 109 				if(template != null){                                                                                </span>
<span class="5089751341604219548" onmouseenter="enter('5089751341604219548');" onmouseout="out('5089751341604219548');" style=""> 110 					model.setHeader(template.getHeader());                                                              </span>
<span class="-7527905069934626121" onmouseenter="enter('-7527905069934626121');" onmouseout="out('-7527905069934626121');" style=""> 111 					model.setParam(template.getParam());                                                                </span>
<span class="-7059470924530166388" onmouseenter="enter('-7059470924530166388');" onmouseout="out('-7059470924530166388');" style=""> 112 					model.setMethod(template.getMethod());                                                              </span>
<span class="5940911261599321088" onmouseenter="enter('5940911261599321088');" onmouseout="out('5940911261599321088');" style=""> 113 					model.setVersion(template.getVersion());                                                            </span>
<span class="-3448468761886356175" onmouseenter="enter('-3448468761886356175');" onmouseout="out('-3448468761886356175');" style=""> 114 					model.setParamRemark(template.getParamRemark());                                                    </span>
<span class="1622152235047204734" onmouseenter="enter('1622152235047204734');" onmouseout="out('1622152235047204734');" style=""> 115 					model.setResponseParam(template.getResponseParam());                                                </span>
<span class="-6414379266760239220" onmouseenter="enter('-6414379266760239220');" onmouseout="out('-6414379266760239220');" style=""> 116 					model.setErrorList(template.getErrorList());                                                        </span>
<span class="-379237002060688021" onmouseenter="enter('-379237002060688021');" onmouseout="out('-379237002060688021');" style=""> 117 					model.setErrors(template.getErrors());                                                              </span>
<span class="2306293464665606986" onmouseenter="enter('2306293464665606986');" onmouseout="out('2306293464665606986');" style=""> 118 					model.setFalseExam(template.getFalseExam());                                                        </span>
<span class="5307078882417853010" onmouseenter="enter('5307078882417853010');" onmouseout="out('5307078882417853010');" style=""> 119 					model.setTrueExam(template.getTrueExam());                                                          </span>
<span class="-994236842464253118" onmouseenter="enter('-994236842464253118');" onmouseout="out('-994236842464253118');" style=""> 120 					model.setStatus(template.getStatus());                                                              </span>
<span class="-2721857626840181883" onmouseenter="enter('-2721857626840181883');" onmouseout="out('-2721857626840181883');" style=""> 121 					model.setContentType(template.getContentType());                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 122 				}                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 123 			}                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124 		}                                                                                                      </span>
<span class="5907549922391530254" onmouseenter="enter('5907549922391530254');" onmouseout="out('5907549922391530254');" style=""> 125 		return new JsonResult(1, InterfaceAdapter.getDto(model, module, null, false));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126 	}                                                                                                       </span>
<span  style=""> 127                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 128 	/**                                                                                                     </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 129 	 * @param interFace                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 130 	 * @return                                                                                              </span>
<span class="-5665355684135370133" onmouseenter="enter('-5665355684135370133');" onmouseout="out('-5665355684135370133');" style=""> 131 	 * @throws MyException                                                                                  </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style=""> 132 	 * @throws IOException                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 133 	 */                                                                                                     </span>
<span class="3944392597235221522" onmouseenter="enter('3944392597235221522');" onmouseout="out('3944392597235221522');" style=""> 134 	@RequestMapping(&quot;/copy.do&quot;)                                                                             </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 135 	@ResponseBody                                                                                           </span>
<span class="1639735162589969103" onmouseenter="enter('1639735162589969103');" onmouseout="out('1639735162589969103');" style=""> 136 	public JsonResult copy(@ModelAttribute InterfaceDto interFace) throws MyException, IOException {        </span>
<span class="-8206169773439054267" onmouseenter="enter('-8206169773439054267');" onmouseout="out('-8206169773439054267');" style=""> 137 		//判断是否拥有该模块的权限                                                                                         </span>
<span class="2279808889297804532" onmouseenter="enter('2279808889297804532');" onmouseout="out('2279808889297804532');" style=""> 138 		checkUserPermissionByProject(interFace.getProjectId(), ADD_INTER);                                     </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 139 		Module module = moduleCache.get(interFace.getModuleId());                                              </span>
<span  style=""> 140                                                                                                          </span>
<span class="6932488038728960880" onmouseenter="enter('6932488038728960880');" onmouseout="out('6932488038728960880');" style=""> 141 		if(!config.isCanRepeatUrl()){                                                                          </span>
<span class="-3960254172214938545" onmouseenter="enter('-3960254172214938545');" onmouseout="out('-3960254172214938545');" style=""><abbr title=" 142 			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(module.getUrl() + interFace.getUrl())) &gt; 0){"> 142 			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(m🔵</abbr></span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 143 				throw new MyException(MyError.E000004);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144 			}                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145 		}                                                                                                      </span>
<span class="-4927829934273936544" onmouseenter="enter('-4927829934273936544');" onmouseout="out('-4927829934273936544');" style=""> 146 		interFace.setId(null);                                                                                 </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 147 		interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                            </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style=""> 148 		interfaceService.insert(InterfaceAdapter.getModel(interFace));                                         </span>
<span  style=""> 149                                                                                                          </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 150 		luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                           </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 151 		return new JsonResult(1, interFace);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152 	}                                                                                                       </span>
<span  style=""> 153                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 154 	/**                                                                                                     </span>
<span class="-7492619764061686694" onmouseenter="enter('-7492619764061686694');" onmouseout="out('-7492619764061686694');" style=""> 155 	 * 根据参数生成请求示例                                                                                           </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 156 	 * @param interFace                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 157 	 * @return                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 158 	 */                                                                                                     </span>
<span class="4685904336828752448" onmouseenter="enter('4685904336828752448');" onmouseout="out('4685904336828752448');" style=""> 159 	@RequestMapping(&quot;/getRequestExam.do&quot;)                                                                   </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 160 	@ResponseBody                                                                                           </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 161 	@AuthPassport                                                                                           </span>
<span class="3638284629125143669" onmouseenter="enter('3638284629125143669');" onmouseout="out('3638284629125143669');" style=""> 162 	public JsonResult getRequestExam(@ModelAttribute InterfaceDto interFace) {                              </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style=""> 163 		interfaceService.getInterFaceRequestExam(interFace);                                                   </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 164 		return new JsonResult(1, interFace);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165 	}                                                                                                       </span>
<span  style=""> 166                                                                                                          </span>
<span class="9102117119873215850" onmouseenter="enter('9102117119873215850');" onmouseout="out('9102117119873215850');" style=""> 167 	@RequestMapping(&quot;/addOrUpdate.do&quot;)                                                                      </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 168 	@ResponseBody                                                                                           </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 169 	@AuthPassport                                                                                           </span>
<span class="-2371211080264372097" onmouseenter="enter('-2371211080264372097');" onmouseout="out('-2371211080264372097');" style=""> 170 	public JsonResult addOrUpdate(@ModelAttribute InterfaceDto interFace) throws IOException, MyException { </span>
<span class="-7246000527363885378" onmouseenter="enter('-7246000527363885378');" onmouseout="out('-7246000527363885378');" style=""> 171 		Assert.notNull(interFace.getProjectId(), &quot;projectId can&#x27;t be null&quot;);                                   </span>
<span  style=""> 172                                                                                                          </span>
<span class="3680314398792253191" onmouseenter="enter('3680314398792253191');" onmouseout="out('3680314398792253191');" style=""> 173 		if(MyString.isEmpty(interFace.getUrl())) {                                                             </span>
<span class="-2022936812063158899" onmouseenter="enter('-2022936812063158899');" onmouseout="out('-2022936812063158899');" style=""> 174 			return new JsonResult(MyError.E000005);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175 		}                                                                                                      </span>
<span class="-1520907386631176867" onmouseenter="enter('-1520907386631176867');" onmouseout="out('-1520907386631176867');" style=""> 176 		interFace.setUrl(interFace.getUrl().trim());                                                           </span>
<span  style=""> 177                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 178 		/**                                                                                                    </span>
<span class="7045250225799015466" onmouseenter="enter('7045250225799015466');" onmouseout="out('7045250225799015466');" style=""> 179 		 * 根据选着的错误码id，组装json字符串                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 180 		 */                                                                                                    </span>
<span class="-8271447941175878236" onmouseenter="enter('-8271447941175878236');" onmouseout="out('-8271447941175878236');" style=""> 181         ErrorQuery query = new ErrorQuery().setProjectId(interFace.getProjectId())                       </span>
<span class="-954574203782809238" onmouseenter="enter('-954574203782809238');" onmouseout="out('-954574203782809238');" style=""> 182                 .setErrorCodeList(Tools.getIdsFromField(interFace.getErrorList())).setPageSize(100);     </span>
<span class="7007176770365788864" onmouseenter="enter('7007176770365788864');" onmouseout="out('7007176770365788864');" style=""> 183         List&lt;Error&gt; errors  = errorService.query(query);                                                 </span>
<span class="8099633558915995513" onmouseenter="enter('8099633558915995513');" onmouseout="out('8099633558915995513');" style=""> 184 		interFace.setErrors(JSONArray.fromObject(errors).toString());                                          </span>
<span  style=""> 185                                                                                                          </span>
<span class="1766529869277441370" onmouseenter="enter('1766529869277441370');" onmouseout="out('1766529869277441370');" style=""> 186 		LoginInfoDto user = LoginUserHelper.getUser();                                                         </span>
<span class="3045017157654780991" onmouseenter="enter('3045017157654780991');" onmouseout="out('3045017157654780991');" style=""> 187 		interFace.setUpdateBy(&quot;userName：&quot;+user.getUserName()+&quot; | trueName：&quot;+ user.getTrueName());              </span>
<span  style=""> 188                                                                                                          </span>
<span class="8532154523355485279" onmouseenter="enter('8532154523355485279');" onmouseout="out('8532154523355485279');" style=""> 189 		//请求示例为空，则自动添加                                                                                         </span>
<span class="4679476040111179483" onmouseenter="enter('4679476040111179483');" onmouseout="out('4679476040111179483');" style=""> 190 		if(MyString.isEmpty(interFace.getRequestExam())){                                                      </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style=""> 191 			interfaceService.getInterFaceRequestExam(interFace);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192 		}                                                                                                      </span>
<span class="2009751668094616815" onmouseenter="enter('2009751668094616815');" onmouseout="out('2009751668094616815');" style=""> 193         interFace.setMonitorType(MonitorType.No.getValue());                                             </span>
<span class="-941211001760564316" onmouseenter="enter('-941211001760564316');" onmouseout="out('-941211001760564316');" style=""> 194 		//检查邮件格式是否正确                                                                                           </span>
<span class="-22728527345241303" onmouseenter="enter('-22728527345241303');" onmouseout="out('-22728527345241303');" style=""> 195 		/**if(interFace.getMonitorType() != MonitorType.No.getValue()){                                        </span>
<span class="6470615935665347659" onmouseenter="enter('6470615935665347659');" onmouseout="out('6470615935665347659');" style=""> 196 			if(!MyString.isEmpty(interFace.getMonitorEmails())){                                                  </span>
<span class="9144489970704028395" onmouseenter="enter('9144489970704028395');" onmouseout="out('9144489970704028395');" style=""> 197 				for(String email : interFace.getMonitorEmails().split(&quot;;&quot;)){                                         </span>
<span class="1445021202833529364" onmouseenter="enter('1445021202833529364');" onmouseout="out('1445021202833529364');" style=""> 198 					if( !Tools.checkEmail(email) ){                                                                     </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 199 						throw new MyException(E000032&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200 					}                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201 				}                                                                                                    </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 202 			}else{                                                                                                </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 203 				throw new MyException(E000032&quot;);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204 			}                                                                                                     </span>
<span class="4278934915650879980" onmouseenter="enter('4278934915650879980');" onmouseout="out('4278934915650879980');" style=""> 205 		}**/                                                                                                   </span>
<span  style=""> 206                                                                                                          </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 207 		Module module = moduleCache.get(interFace.getModuleId());                                              </span>
<span class="5243642841384736036" onmouseenter="enter('5243642841384736036');" onmouseout="out('5243642841384736036');" style=""> 208 		if (!MyString.isEmpty(interFace.getId())) {                                                            </span>
<span class="5922306788492517961" onmouseenter="enter('5922306788492517961');" onmouseout="out('5922306788492517961');" style=""> 209 			String oldModuleId = interfaceService.getById(interFace.getId()).getModuleId();                       </span>
<span class="-2347736199422220093" onmouseenter="enter('-2347736199422220093');" onmouseout="out('-2347736199422220093');" style=""> 210 			String projectId = moduleCache.get(oldModuleId).getProjectId();                                       </span>
<span class="3404097771773836763" onmouseenter="enter('3404097771773836763');" onmouseout="out('3404097771773836763');" style=""> 211 			Project project = projectCache.get(interFace.getProjectId() );                                        </span>
<span  style=""> 212                                                                                                          </span>
<span class="8257633002726469813" onmouseenter="enter('8257633002726469813');" onmouseout="out('8257633002726469813');" style=""> 213 			// 接口只能在同一个项目下的模块中移动                                                                                  </span>
<span class="-8654578892208964423" onmouseenter="enter('-8654578892208964423');" onmouseout="out('-8654578892208964423');" style=""> 214 			if( !projectId.equals(project.getId())){                                                              </span>
<span class="3828115358811128245" onmouseenter="enter('3828115358811128245');" onmouseout="out('3828115358811128245');" style=""> 215 				throw new MyException(MyError.E000047);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216 			}                                                                                                     </span>
<span class="7913111081342953879" onmouseenter="enter('7913111081342953879');" onmouseout="out('7913111081342953879');" style=""> 217 			// 判断是否有修改模块的权限                                                                                       </span>
<span class="-3388185289221243217" onmouseenter="enter('-3388185289221243217');" onmouseout="out('-3388185289221243217');" style=""> 218 			checkUserPermissionByProject(project, MOD_INTER);                                                     </span>
<span  style=""> 219                                                                                                          </span>
<span class="-2337234168619506843" onmouseenter="enter('-2337234168619506843');" onmouseout="out('-2337234168619506843');" style=""> 220 			//同一模块下不允许 url 重复                                                                                     </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style=""> 221             InterfaceQuery interfaceQuery = new InterfaceQuery();                                        </span>
<span class="-6576102208848169069" onmouseenter="enter('-6576102208848169069');" onmouseout="out('-6576102208848169069');" style=""><abbr title=" 222             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl()).setExceptId(interFace.getId());"> 222             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.get🔵</abbr></span>
<span class="1249147487164872071" onmouseenter="enter('1249147487164872071');" onmouseout="out('1249147487164872071');" style=""> 223 			if( !config.isCanRepeatUrl() &amp;&amp; interfaceService.count(interfaceQuery) &gt;0 ){                          </span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 224 				throw new MyException(MyError.E000004);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225 			}                                                                                                     </span>
<span  style=""> 226                                                                                                          </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 227 			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                           </span>
<span class="4401707851467701848" onmouseenter="enter('4401707851467701848');" onmouseout="out('4401707851467701848');" style=""> 228 			interfaceService.update(InterfaceAdapter.getModel(interFace), &quot;接口&quot;, &quot;&quot;);                              </span>
<span class="40941063765621390" onmouseenter="enter('40941063765621390');" onmouseout="out('40941063765621390');" style=""> 229 			if(interFace.getId().equals(interFace.getProjectId())){                                               </span>
<span class="8284136097153874854" onmouseenter="enter('8284136097153874854');" onmouseout="out('8284136097153874854');" style=""> 230 				throw new MyException(MyError.E000027);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231 			}                                                                                                     </span>
<span class="-8095562614157245048" onmouseenter="enter('-8095562614157245048');" onmouseout="out('-8095562614157245048');" style=""> 232 			luceneService.update(InterfaceAdapter.getSearchDto(interFace));                                       </span>
<span  style=""> 233                                                                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 234 		} else {                                                                                               </span>
<span class="-7477248359633755306" onmouseenter="enter('-7477248359633755306');" onmouseout="out('-7477248359633755306');" style=""> 235 			checkUserPermissionByProject(projectCache.get(interFace.getProjectId() ), ADD_INTER);                 </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style=""> 236             InterfaceQuery interfaceQuery = new InterfaceQuery();                                        </span>
<span class="-7466550613099324542" onmouseenter="enter('-7466550613099324542');" onmouseout="out('-7466550613099324542');" style=""><abbr title=" 237             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl());"> 237             interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.get🔵</abbr></span>
<span class="-8914770776061455942" onmouseenter="enter('-8914770776061455942');" onmouseout="out('-8914770776061455942');" style=""> 238 			if(!config.isCanRepeatUrl() &amp;&amp; interfaceService.count(interfaceQuery)&gt;0){                             </span>
<span class="8772628239303623293" onmouseenter="enter('8772628239303623293');" onmouseout="out('8772628239303623293');" style=""> 239 				return new JsonResult(MyError.E000004);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240 			}                                                                                                     </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 241 			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                           </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style=""> 242 			interfaceService.insert(InterfaceAdapter.getModel(interFace));                                        </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 243 			luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244 		}                                                                                                      </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 245 		return new JsonResult(1, interFace);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246 	}                                                                                                       </span>
<span  style=""> 247                                                                                                          </span>
<span class="3908622465717054108" onmouseenter="enter('3908622465717054108');" onmouseout="out('3908622465717054108');" style=""> 248 	@RequestMapping(&quot;/delete.do&quot;)                                                                           </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 249 	@ResponseBody                                                                                           </span>
<span class="-5585810528016230380" onmouseenter="enter('-5585810528016230380');" onmouseout="out('-5585810528016230380');" style=""> 250 	public JsonResult delete(String id, String ids) throws MyException, IOException{                        </span>
<span class="5500260682396997685" onmouseenter="enter('5500260682396997685');" onmouseout="out('5500260682396997685');" style=""> 251 		if( MyString.isEmpty(id) &amp;&amp; MyString.isEmpty(ids)){                                                    </span>
<span class="5841283794467303202" onmouseenter="enter('5841283794467303202');" onmouseout="out('5841283794467303202');" style=""> 252 			throw new MyException(MyError.E000029);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253 		}                                                                                                      </span>
<span class="-8135195691626680328" onmouseenter="enter('-8135195691626680328');" onmouseout="out('-8135195691626680328');" style=""> 254 		if( MyString.isEmpty(ids) ){                                                                           </span>
<span class="3511947876673837079" onmouseenter="enter('3511947876673837079');" onmouseout="out('3511947876673837079');" style=""> 255 			ids = id;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256 		}                                                                                                      </span>
<span  style=""> 257                                                                                                          </span>
<span class="-2656961914898447548" onmouseenter="enter('-2656961914898447548');" onmouseout="out('-2656961914898447548');" style=""> 258 		for(String tempId : ids.split(&quot;,&quot;)){                                                                   </span>
<span class="-3040966783477954494" onmouseenter="enter('-3040966783477954494');" onmouseout="out('-3040966783477954494');" style=""> 259 			if(MyString.isEmpty(tempId)){                                                                         </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 260 				continue;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261 			}                                                                                                     </span>
<span class="6005130977645696533" onmouseenter="enter('6005130977645696533');" onmouseout="out('6005130977645696533');" style=""> 262 			InterfaceWithBLOBs interFace = interfaceService.getById( tempId );                                    </span>
<span class="-3259762685715036382" onmouseenter="enter('-3259762685715036382');" onmouseout="out('-3259762685715036382');" style=""> 263 			checkUserPermissionByProject(interFace.getProjectId(), DEL_INTER);                                    </span>
<span class="5403926906782818954" onmouseenter="enter('5403926906782818954');" onmouseout="out('5403926906782818954');" style=""> 264 			interfaceService.delete(interFace.getId(), &quot;接口&quot;, &quot;&quot;);                                                 </span>
<span class="2858649065821216875" onmouseenter="enter('2858649065821216875');" onmouseout="out('2858649065821216875');" style=""> 265 			luceneService.delete(new SearchDto(interFace.getId()));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266 		}                                                                                                      </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 267 		return new JsonResult(1, null);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268 	}                                                                                                       </span>
<span  style=""> 269                                                                                                          </span>
<span class="3383448423842759854" onmouseenter="enter('3383448423842759854');" onmouseout="out('3383448423842759854');" style=""> 270 	@RequestMapping(&quot;/changeSequence.do&quot;)                                                                   </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 271 	@ResponseBody                                                                                           </span>
<span class="-4262891591549373351" onmouseenter="enter('-4262891591549373351');" onmouseout="out('-4262891591549373351');" style=""><abbr title=" 272 	public JsonResult changeSequence(@RequestParam String id,@RequestParam String changeId) throws MyException {"> 272 	public JsonResult changeSequence(@RequestParam String id,@RequestParam String changeId) throws MyExcepti🔵</abbr></span>
<span class="-114025814901609390" onmouseenter="enter('-114025814901609390');" onmouseout="out('-114025814901609390');" style=""> 273 		InterfaceWithBLOBs change = interfaceService.getById(changeId);                                        </span>
<span class="1535172332471428490" onmouseenter="enter('1535172332471428490');" onmouseout="out('1535172332471428490');" style=""> 274 		InterfaceWithBLOBs model = interfaceService.getById(id);                                               </span>
<span class="1373326694122548312" onmouseenter="enter('1373326694122548312');" onmouseout="out('1373326694122548312');" style=""> 275 		checkUserPermissionByProject(model.getProjectId(), MOD_INTER);                                         </span>
<span class="9185443680929913036" onmouseenter="enter('9185443680929913036');" onmouseout="out('9185443680929913036');" style=""> 276 		checkUserPermissionByProject(change.getProjectId(), MOD_INTER);                                        </span>
<span  style=""> 277                                                                                                          </span>
<span class="-6471227968333011823" onmouseenter="enter('-6471227968333011823');" onmouseout="out('-6471227968333011823');" style=""> 278 		int modelSequence = model.getSequence();                                                               </span>
<span  style=""> 279                                                                                                          </span>
<span class="-7348627876629533627" onmouseenter="enter('-7348627876629533627');" onmouseout="out('-7348627876629533627');" style=""> 280 		model.setSequence(change.getSequence());                                                               </span>
<span class="-8403247859037350919" onmouseenter="enter('-8403247859037350919');" onmouseout="out('-8403247859037350919');" style=""> 281 		change.setSequence(modelSequence);                                                                     </span>
<span  style=""> 282                                                                                                          </span>
<span class="1992515717850273638" onmouseenter="enter('1992515717850273638');" onmouseout="out('1992515717850273638');" style=""> 283 		interfaceService.update(model);                                                                        </span>
<span class="8445067308225092068" onmouseenter="enter('8445067308225092068');" onmouseout="out('8445067308225092068');" style=""> 284 		interfaceService.update(change);                                                                       </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 285 		return new JsonResult(1, null);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286 	}                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287 }                                                                                                        </span></pre></td>
                            <td><pre><span class="8453884345636310198" onmouseenter="enter('8453884345636310198');" onmouseout="out('8453884345636310198');" style="">   1 package cn.crap.controller.user;                                                                         </span>
<span  style="">   2                                                                                                          </span>
<span class="3872670124992133569" onmouseenter="enter('3872670124992133569');" onmouseout="out('3872670124992133569');" style="">   3 import cn.crap.adapter.InterfaceAdapter;                                                                 </span>
<span class="4279274079824086333" onmouseenter="enter('4279274079824086333');" onmouseout="out('4279274079824086333');" style="">   4 import cn.crap.beans.Config;                                                                             </span>
<span class="6807184333094047547" onmouseenter="enter('6807184333094047547');" onmouseout="out('6807184333094047547');" style="">   5 import cn.crap.dto.InterfaceDto;                                                                         </span>
<span class="7929325164483847730" onmouseenter="enter('7929325164483847730');" onmouseout="out('7929325164483847730');" style="">   6 import cn.crap.dto.LoginInfoDto;                                                                         </span>
<span class="1522833305812512221" onmouseenter="enter('1522833305812512221');" onmouseout="out('1522833305812512221');" style="">   7 import cn.crap.dto.SearchDto;                                                                            </span>
<span class="-911749451892422883" onmouseenter="enter('-911749451892422883');" onmouseout="out('-911749451892422883');" style="">   8 import cn.crap.enumer.MonitorType;                                                                       </span>
<span class="5139023199245080803" onmouseenter="enter('5139023199245080803');" onmouseout="out('5139023199245080803');" style="">   9 import cn.crap.enumer.MyError;                                                                           </span>
<span class="-7847071603028321447" onmouseenter="enter('-7847071603028321447');" onmouseout="out('-7847071603028321447');" style="">  10 import cn.crap.framework.JsonResult;                                                                     </span>
<span class="-7574536783671103865" onmouseenter="enter('-7574536783671103865');" onmouseout="out('-7574536783671103865');" style="">  11 import cn.crap.framework.MyException;                                                                    </span>
<span class="-4522781807489195049" onmouseenter="enter('-4522781807489195049');" onmouseout="out('-4522781807489195049');" style="">  12 import cn.crap.framework.base.BaseController;                                                            </span>
<span class="4903612087055488212" onmouseenter="enter('4903612087055488212');" onmouseout="out('4903612087055488212');" style="">  13 import cn.crap.framework.interceptor.AuthPassport;                                                       </span>
<span class="8147845229390238491" onmouseenter="enter('8147845229390238491');" onmouseout="out('8147845229390238491');" style="">  14 import cn.crap.model.Error;                                                                              </span>
<span class="6961814849649346163" onmouseenter="enter('6961814849649346163');" onmouseout="out('6961814849649346163');" style="">  15 import cn.crap.model.InterfaceWithBLOBs;                                                                 </span>
<span class="-3829059158540726081" onmouseenter="enter('-3829059158540726081');" onmouseout="out('-3829059158540726081');" style="">  16 import cn.crap.model.Module;                                                                             </span>
<span class="-2569611458616973012" onmouseenter="enter('-2569611458616973012');" onmouseout="out('-2569611458616973012');" style="">  17 import cn.crap.model.Project;                                                                            </span>
<span class="24505043057363846" onmouseenter="enter('24505043057363846');" onmouseout="out('24505043057363846');" style="">  18 import cn.crap.query.ErrorQuery;                                                                         </span>
<span class="5577390926415763020" onmouseenter="enter('5577390926415763020');" onmouseout="out('5577390926415763020');" style="">  19 import cn.crap.query.InterfaceQuery;                                                                     </span>
<span class="-5580999983088044782" onmouseenter="enter('-5580999983088044782');" onmouseout="out('-5580999983088044782');" style="">  20 import cn.crap.service.ErrorService;                                                                     </span>
<span class="2810978048240697020" onmouseenter="enter('2810978048240697020');" onmouseout="out('2810978048240697020');" style="">  21 import cn.crap.service.ISearchService;                                                                   </span>
<span class="-256793303282880299" onmouseenter="enter('-256793303282880299');" onmouseout="out('-256793303282880299');" style="">  22 import cn.crap.service.InterfaceService;                                                                 </span>
<span class="5115699361496505387" onmouseenter="enter('5115699361496505387');" onmouseout="out('5115699361496505387');" style="">  23 import cn.crap.utils.LoginUserHelper;                                                                    </span>
<span class="6445485251376419284" onmouseenter="enter('6445485251376419284');" onmouseout="out('6445485251376419284');" style="">  24 import cn.crap.utils.MyString;                                                                           </span>
<span class="7821392437622009242" onmouseenter="enter('7821392437622009242');" onmouseout="out('7821392437622009242');" style="">  25 import cn.crap.utils.Page;                                                                               </span>
<span class="2894550376389390724" onmouseenter="enter('2894550376389390724');" onmouseout="out('2894550376389390724');" style="">  26 import cn.crap.utils.Tools;                                                                              </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  27 import java.io.IOException;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  28 import java.util.List;                                                                                   </span>
<span class="9045939009765002950" onmouseenter="enter('9045939009765002950');" onmouseout="out('9045939009765002950');" style="">  29 import net.sf.json.JSONArray;                                                                            </span>
<span class="-6148326362900055524" onmouseenter="enter('-6148326362900055524');" onmouseout="out('-6148326362900055524');" style="">  30 import org.springframework.beans.factory.annotation.Autowired;                                           </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  31 import org.springframework.stereotype.Controller;                                                        </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  32 import org.springframework.util.Assert;                                                                  </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  33 import org.springframework.web.bind.annotation.ModelAttribute;                                           </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  34 import org.springframework.web.bind.annotation.RequestMapping;                                           </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  35 import org.springframework.web.bind.annotation.RequestParam;                                             </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  36 import org.springframework.web.bind.annotation.ResponseBody;                                             </span>
<span  style="">  37                                                                                                          </span>
<span  style="">  38                                                                                                          </span>
<span class="4777805177773543995" onmouseenter="enter('4777805177773543995');" onmouseout="out('4777805177773543995');" style="">  39 @Controller                                                                                              </span>
<span class="-1946225143665328935" onmouseenter="enter('-1946225143665328935');" onmouseout="out('-1946225143665328935');" style="">  40 @RequestMapping(&quot;/user/interface&quot;)                                                                       </span>
<span class="-5803183987450937954" onmouseenter="enter('-5803183987450937954');" onmouseout="out('-5803183987450937954');" style="">  41 public class InterfaceController extends BaseController {                                                </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  42 	@Autowired                                                                                              </span>
<span class="5676854317382137038" onmouseenter="enter('5676854317382137038');" onmouseout="out('5676854317382137038');" style="">  43 	private InterfaceService interfaceService;                                                              </span>
<span  style="">  44                                                                                                          </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  45 	@Autowired                                                                                              </span>
<span class="-925519006397285322" onmouseenter="enter('-925519006397285322');" onmouseout="out('-925519006397285322');" style="">  46 	private ISearchService luceneService;                                                                   </span>
<span  style="">  47                                                                                                          </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  48 	@Autowired                                                                                              </span>
<span class="-3968544807213930836" onmouseenter="enter('-3968544807213930836');" onmouseout="out('-3968544807213930836');" style="">  49 	private ErrorService errorService;                                                                      </span>
<span  style="">  50                                                                                                          </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  51 	@Autowired                                                                                              </span>
<span class="-3607813097408339844" onmouseenter="enter('-3607813097408339844');" onmouseout="out('-3607813097408339844');" style="">  52 	private Config config;                                                                                  </span>
<span  style="">  53                                                                                                          </span>
<span class="3216165995479628896" onmouseenter="enter('3216165995479628896');" onmouseout="out('3216165995479628896');" style="">  54 	@RequestMapping(&quot;/list.do&quot;)                                                                             </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  55 	@ResponseBody                                                                                           </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style="">  56 	@AuthPassport                                                                                           </span>
<span class="-5383505525432175749" onmouseenter="enter('-5383505525432175749');" onmouseout="out('-5383505525432175749');" style="">  57 	public JsonResult list(@RequestParam                                                                    </span>
<span class="-4880033384207310845" onmouseenter="enter('-4880033384207310845');" onmouseout="out('-4880033384207310845');" style="">  58 	String moduleId, String interfaceName, String url, Integer currentPage) throws MyException {            </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style="">  59 		InterfaceQuery interfaceQuery = new InterfaceQuery();                                                  </span>
<span class="8382525882236311366" onmouseenter="enter('8382525882236311366');" onmouseout="out('8382525882236311366');" style=""><abbr title="  60 		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(currentPage);">  60 		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(cur🔵</abbr></span>
<span class="1660160644386510373" onmouseenter="enter('1660160644386510373');" onmouseout="out('1660160644386510373');" style="">  61 		Page page = new Page(interfaceQuery);                                                                  </span>
<span class="3442007748957955908" onmouseenter="enter('3442007748957955908');" onmouseout="out('3442007748957955908');" style="">  62 		Module module = moduleCache.get(moduleId);                                                             </span>
<span class="8699301439456190280" onmouseenter="enter('8699301439456190280');" onmouseout="out('8699301439456190280');" style="">  63 		Project project = projectCache.get(module.getProjectId());                                             </span>
<span class="6295340851346331112" onmouseenter="enter('6295340851346331112');" onmouseout="out('6295340851346331112');" style="">  64 		checkUserPermissionByProject(project.getId(), VIEW);                                                   </span>
<span class="-8091314608405686849" onmouseenter="enter('-8091314608405686849');" onmouseout="out('-8091314608405686849');" style=""><abbr title="  65 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module, project);">  65 		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module,🔵</abbr></span>
<span  style="">  66                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style="">  67 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="-3280997506223267100" onmouseenter="enter('-3280997506223267100');" onmouseout="out('-3280997506223267100');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0">  68 		page.setAllRow(interfaceService.count(interfaceQuery));                                                </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style="">  69 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title="  70 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/">  70 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kw🔵</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style="">  71 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  72                                                                                                          </span>
<span class="7334426988050538035" onmouseenter="enter('7334426988050538035');" onmouseout="out('7334426988050538035');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0">  73         page.setAllRow(mybatisInterfaceService.countByExample(example));                                 </span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style="">  74 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style="">  75                                                                                                          </span>
<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="">  76 		JsonResult result = new JsonResult(1, interfaces, page);                                               </span>
<span class="-5472853287679813107" onmouseenter="enter('-5472853287679813107');" onmouseout="out('-5472853287679813107');" style=""><abbr title="  77 		result.putOthers(&quot;crumbs&quot;, Tools.getCrumbs(&quot;接口列表:&quot; + moduleCache.get(moduleId).getName(), &quot;void&quot;)).putOthers(&quot;module&quot;, moduleCache.get(moduleId));">  77 		result.putOthers(&quot;crumbs&quot;, Tools.getCrumbs(&quot;接口列表:&quot; + moduleCache.get(moduleId).getName(), &quot;void&quot;)).putO🔵</abbr></span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  78 		return result;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  79 	}                                                                                                       </span>
<span  style="">  80                                                                                                          </span>
<span class="-557002042091694149" onmouseenter="enter('-557002042091694149');" onmouseout="out('-557002042091694149');" style="">  81 	@RequestMapping(&quot;/detail.do&quot;)                                                                           </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  82 	@ResponseBody                                                                                           </span>
<span class="-7956266425262709264" onmouseenter="enter('-7956266425262709264');" onmouseout="out('-7956266425262709264');" style="">  83 	public JsonResult detail(String id, String moduleId) throws MyException {                               </span>
<span class="-5013732608106508542" onmouseenter="enter('-5013732608106508542');" onmouseout="out('-5013732608106508542');" style="">  84 		InterfaceWithBLOBs model;                                                                              </span>
<span class="6526027684909256553" onmouseenter="enter('6526027684909256553');" onmouseout="out('6526027684909256553');" style="">  85 		Module module = null;                                                                                  </span>
<span class="-168595834781466469" onmouseenter="enter('-168595834781466469');" onmouseout="out('-168595834781466469');" style="">  86 		if (id != null) {                                                                                      </span>
<span class="7470666660414541298" onmouseenter="enter('7470666660414541298');" onmouseout="out('7470666660414541298');" style="">  87 			model = interfaceService.getById(id);                                                                 </span>
<span class="1040064000347861178" onmouseenter="enter('1040064000347861178');" onmouseout="out('1040064000347861178');" style="">  88 			module = moduleCache.get(model.getModuleId());                                                        </span>
<span class="-185843402063825431" onmouseenter="enter('-185843402063825431');" onmouseout="out('-185843402063825431');" style="">  89 			checkUserPermissionByProject(model.getProjectId(), VIEW);                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style="">  90 		} else {                                                                                               </span>
<span class="-7029962562203235323" onmouseenter="enter('-7029962562203235323');" onmouseout="out('-7029962562203235323');" style="">  91 			model = new InterfaceWithBLOBs();                                                                     </span>
<span class="-2587857982027861322" onmouseenter="enter('-2587857982027861322');" onmouseout="out('-2587857982027861322');" style="">  92 			module = moduleCache.get(moduleId);                                                                   </span>
<span class="2198248050508074195" onmouseenter="enter('2198248050508074195');" onmouseout="out('2198248050508074195');" style="">  93 			model.setModuleId(moduleId);                                                                          </span>
<span class="-5617097986837608318" onmouseenter="enter('-5617097986837608318');" onmouseout="out('-5617097986837608318');" style="">  94 			model.setProjectId(module.getProjectId());                                                            </span>
<span class="4623621077757195404" onmouseenter="enter('4623621077757195404');" onmouseout="out('4623621077757195404');" style="">  95 			model.setParam(&quot;form=[]&quot;);                                                                            </span>
<span class="-646854625022819456" onmouseenter="enter('-646854625022819456');" onmouseout="out('-646854625022819456');" style="">  96 			model.setResponseParam(&quot;[]&quot;);                                                                         </span>
<span class="-7417036509485016685" onmouseenter="enter('-7417036509485016685');" onmouseout="out('-7417036509485016685');" style="">  97 			model.setHeader(&quot;[]&quot;);                                                                                </span>
<span class="2272429349124999400" onmouseenter="enter('2272429349124999400');" onmouseout="out('2272429349124999400');" style="">  98 			model.setParamRemark(&quot;[]&quot;);                                                                           </span>
<span class="3773924671439589779" onmouseenter="enter('3773924671439589779');" onmouseout="out('3773924671439589779');" style="">  99 			if (!MyString.isEmpty(module.getTemplateId())) {                                                      </span>
<span class="-4020697440483671496" onmouseenter="enter('-4020697440483671496');" onmouseout="out('-4020697440483671496');" style=""> 100 				InterfaceWithBLOBs template = interfaceService.getById(module.getTemplateId());                      </span>
<span class="5678506116785444717" onmouseenter="enter('5678506116785444717');" onmouseout="out('5678506116785444717');" style=""> 101 				// 根据模板初始化接口                                                                                         </span>
<span class="7740475940313126071" onmouseenter="enter('7740475940313126071');" onmouseout="out('7740475940313126071');" style=""> 102 				if (template != null) {                                                                              </span>
<span class="5089751341604219548" onmouseenter="enter('5089751341604219548');" onmouseout="out('5089751341604219548');" style=""> 103 					model.setHeader(template.getHeader());                                                              </span>
<span class="-7527905069934626121" onmouseenter="enter('-7527905069934626121');" onmouseout="out('-7527905069934626121');" style=""> 104 					model.setParam(template.getParam());                                                                </span>
<span class="-7059470924530166388" onmouseenter="enter('-7059470924530166388');" onmouseout="out('-7059470924530166388');" style=""> 105 					model.setMethod(template.getMethod());                                                              </span>
<span class="5940911261599321088" onmouseenter="enter('5940911261599321088');" onmouseout="out('5940911261599321088');" style=""> 106 					model.setVersion(template.getVersion());                                                            </span>
<span class="-3448468761886356175" onmouseenter="enter('-3448468761886356175');" onmouseout="out('-3448468761886356175');" style=""> 107 					model.setParamRemark(template.getParamRemark());                                                    </span>
<span class="1622152235047204734" onmouseenter="enter('1622152235047204734');" onmouseout="out('1622152235047204734');" style=""> 108 					model.setResponseParam(template.getResponseParam());                                                </span>
<span class="-6414379266760239220" onmouseenter="enter('-6414379266760239220');" onmouseout="out('-6414379266760239220');" style=""> 109 					model.setErrorList(template.getErrorList());                                                        </span>
<span class="-379237002060688021" onmouseenter="enter('-379237002060688021');" onmouseout="out('-379237002060688021');" style=""> 110 					model.setErrors(template.getErrors());                                                              </span>
<span class="2306293464665606986" onmouseenter="enter('2306293464665606986');" onmouseout="out('2306293464665606986');" style=""> 111 					model.setFalseExam(template.getFalseExam());                                                        </span>
<span class="5307078882417853010" onmouseenter="enter('5307078882417853010');" onmouseout="out('5307078882417853010');" style=""> 112 					model.setTrueExam(template.getTrueExam());                                                          </span>
<span class="-994236842464253118" onmouseenter="enter('-994236842464253118');" onmouseout="out('-994236842464253118');" style=""> 113 					model.setStatus(template.getStatus());                                                              </span>
<span class="-2721857626840181883" onmouseenter="enter('-2721857626840181883');" onmouseout="out('-2721857626840181883');" style=""> 114 					model.setContentType(template.getContentType());                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115 				}                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 116 			}                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117 		}                                                                                                      </span>
<span class="5907549922391530254" onmouseenter="enter('5907549922391530254');" onmouseout="out('5907549922391530254');" style=""> 118 		return new JsonResult(1, InterfaceAdapter.getDto(model, module, null, false));                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 119 	}                                                                                                       </span>
<span  style=""> 120                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 121 	/**                                                                                                     </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 122 	 * @param interFace                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 123 	 * @return                                                                                              </span>
<span class="-5665355684135370133" onmouseenter="enter('-5665355684135370133');" onmouseout="out('-5665355684135370133');" style=""> 124 	 * @throws MyException                                                                                  </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style=""> 125 	 * @throws IOException                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 126 	 */                                                                                                     </span>
<span class="3944392597235221522" onmouseenter="enter('3944392597235221522');" onmouseout="out('3944392597235221522');" style=""> 127 	@RequestMapping(&quot;/copy.do&quot;)                                                                             </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 128 	@ResponseBody                                                                                           </span>
<span class="-8089768770140392635" onmouseenter="enter('-8089768770140392635');" onmouseout="out('-8089768770140392635');" style=""> 129 	public JsonResult copy(@ModelAttribute                                                                  </span>
<span class="-571890454928347501" onmouseenter="enter('-571890454928347501');" onmouseout="out('-571890454928347501');" style=""> 130 	InterfaceDto interFace) throws MyException, IOException {                                               </span>
<span class="-8206169773439054267" onmouseenter="enter('-8206169773439054267');" onmouseout="out('-8206169773439054267');" style=""> 131 		//判断是否拥有该模块的权限                                                                                         </span>
<span class="2279808889297804532" onmouseenter="enter('2279808889297804532');" onmouseout="out('2279808889297804532');" style=""> 132 		checkUserPermissionByProject(interFace.getProjectId(), ADD_INTER);                                     </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 133 		Module module = moduleCache.get(interFace.getModuleId());                                              </span>
<span class="6505789696015195011" onmouseenter="enter('6505789696015195011');" onmouseout="out('6505789696015195011');" style=""> 134 		if (!config.isCanRepeatUrl()) {                                                                        </span>
<span class="62347744942306370" onmouseenter="enter('62347744942306370');" onmouseout="out('62347744942306370');" style=""><abbr title=" 135 			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(module.getUrl() + interFace.getUrl())) &gt; 0) {"> 135 			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(m🔵</abbr></span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 136 				throw new MyException(MyError.E000004);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137 			}                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138 		}                                                                                                      </span>
<span class="-4927829934273936544" onmouseenter="enter('-4927829934273936544');" onmouseout="out('-4927829934273936544');" style=""> 139 		interFace.setId(null);                                                                                 </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 140 		interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                            </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style=""> 141 		interfaceService.insert(InterfaceAdapter.getModel(interFace));                                         </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 142 		luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                           </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 143 		return new JsonResult(1, interFace);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144 	}                                                                                                       </span>
<span  style=""> 145                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 146 	/**                                                                                                     </span>
<span class="-7492619764061686694" onmouseenter="enter('-7492619764061686694');" onmouseout="out('-7492619764061686694');" style=""> 147 	 * 根据参数生成请求示例                                                                                           </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 148 	 * @param interFace                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 149 	 * @return                                                                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 150 	 */                                                                                                     </span>
<span class="4685904336828752448" onmouseenter="enter('4685904336828752448');" onmouseout="out('4685904336828752448');" style=""> 151 	@RequestMapping(&quot;/getRequestExam.do&quot;)                                                                   </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 152 	@ResponseBody                                                                                           </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 153 	@AuthPassport                                                                                           </span>
<span class="2125510222153105415" onmouseenter="enter('2125510222153105415');" onmouseout="out('2125510222153105415');" style=""> 154 	public JsonResult getRequestExam(@ModelAttribute                                                        </span>
<span class="8515943378039759202" onmouseenter="enter('8515943378039759202');" onmouseout="out('8515943378039759202');" style=""> 155 	InterfaceDto interFace) {                                                                               </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style=""> 156 		interfaceService.getInterFaceRequestExam(interFace);                                                   </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 157 		return new JsonResult(1, interFace);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158 	}                                                                                                       </span>
<span  style=""> 159                                                                                                          </span>
<span class="9102117119873215850" onmouseenter="enter('9102117119873215850');" onmouseout="out('9102117119873215850');" style=""> 160 	@RequestMapping(&quot;/addOrUpdate.do&quot;)                                                                      </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 161 	@ResponseBody                                                                                           </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 162 	@AuthPassport                                                                                           </span>
<span class="4070281136153192463" onmouseenter="enter('4070281136153192463');" onmouseout="out('4070281136153192463');" style=""> 163 	public JsonResult addOrUpdate(@ModelAttribute                                                           </span>
<span class="3676186137224326822" onmouseenter="enter('3676186137224326822');" onmouseout="out('3676186137224326822');" style=""> 164 	InterfaceDto interFace) throws IOException, MyException {                                               </span>
<span class="-7246000527363885378" onmouseenter="enter('-7246000527363885378');" onmouseout="out('-7246000527363885378');" style=""> 165 		Assert.notNull(interFace.getProjectId(), &quot;projectId can&#x27;t be null&quot;);                                   </span>
<span class="-6703346286955935961" onmouseenter="enter('-6703346286955935961');" onmouseout="out('-6703346286955935961');" style=""> 166 		if (MyString.isEmpty(interFace.getUrl())) {                                                            </span>
<span class="-2022936812063158899" onmouseenter="enter('-2022936812063158899');" onmouseout="out('-2022936812063158899');" style=""> 167 			return new JsonResult(MyError.E000005);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168 		}                                                                                                      </span>
<span class="-1520907386631176867" onmouseenter="enter('-1520907386631176867');" onmouseout="out('-1520907386631176867');" style=""> 169 		interFace.setUrl(interFace.getUrl().trim());                                                           </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 170 		/**                                                                                                    </span>
<span class="7045250225799015466" onmouseenter="enter('7045250225799015466');" onmouseout="out('7045250225799015466');" style=""> 171 		 * 根据选着的错误码id，组装json字符串                                                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 172 		 */                                                                                                    </span>
<span class="-4891126420656749592" onmouseenter="enter('-4891126420656749592');" onmouseout="out('-4891126420656749592');" style=""><abbr title=" 173 		ErrorQuery query = new ErrorQuery().setProjectId(interFace.getProjectId()).setErrorCodeList(Tools.getIdsFromField(interFace.getErrorList())).setPageSize(100);"> 173 		ErrorQuery query = new ErrorQuery().setProjectId(interFace.getProjectId()).setErrorCodeList(Tools.getId🔵</abbr></span>
<span class="6721326658202550169" onmouseenter="enter('6721326658202550169');" onmouseout="out('6721326658202550169');" style=""> 174 		List&lt;Error&gt; errors = errorService.query(query);                                                        </span>
<span class="8099633558915995513" onmouseenter="enter('8099633558915995513');" onmouseout="out('8099633558915995513');" style=""> 175 		interFace.setErrors(JSONArray.fromObject(errors).toString());                                          </span>
<span class="1766529869277441370" onmouseenter="enter('1766529869277441370');" onmouseout="out('1766529869277441370');" style=""> 176 		LoginInfoDto user = LoginUserHelper.getUser();                                                         </span>
<span class="-1592113097046537904" onmouseenter="enter('-1592113097046537904');" onmouseout="out('-1592113097046537904');" style=""> 177 		interFace.setUpdateBy(((&quot;userName：&quot; + user.getUserName()) + &quot; | trueName：&quot;) + user.getTrueName());     </span>
<span class="8532154523355485279" onmouseenter="enter('8532154523355485279');" onmouseout="out('8532154523355485279');" style=""> 178 		//请求示例为空，则自动添加                                                                                         </span>
<span class="4602342517473517448" onmouseenter="enter('4602342517473517448');" onmouseout="out('4602342517473517448');" style=""> 179 		if (MyString.isEmpty(interFace.getRequestExam())) {                                                    </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style=""> 180 			interfaceService.getInterFaceRequestExam(interFace);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181 		}                                                                                                      </span>
<span class="2009751668094616815" onmouseenter="enter('2009751668094616815');" onmouseout="out('2009751668094616815');" style=""> 182 		interFace.setMonitorType(MonitorType.No.getValue());                                                   </span>
<span class="-941211001760564316" onmouseenter="enter('-941211001760564316');" onmouseout="out('-941211001760564316');" style=""> 183 		//检查邮件格式是否正确                                                                                           </span>
<span class="-22728527345241303" onmouseenter="enter('-22728527345241303');" onmouseout="out('-22728527345241303');" style=""> 184 		/**if(interFace.getMonitorType() != MonitorType.No.getValue()){                                        </span>
<span class="6470615935665347659" onmouseenter="enter('6470615935665347659');" onmouseout="out('6470615935665347659');" style=""> 185 			if(!MyString.isEmpty(interFace.getMonitorEmails())){                                                  </span>
<span class="9144489970704028395" onmouseenter="enter('9144489970704028395');" onmouseout="out('9144489970704028395');" style=""> 186 				for(String email : interFace.getMonitorEmails().split(&quot;;&quot;)){                                         </span>
<span class="1445021202833529364" onmouseenter="enter('1445021202833529364');" onmouseout="out('1445021202833529364');" style=""> 187 					if( !Tools.checkEmail(email) ){                                                                     </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 188 						throw new MyException(E000032&quot;);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189 					}                                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190 				}                                                                                                    </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 191 			}else{                                                                                                </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 192 				throw new MyException(E000032&quot;);                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 193 			}                                                                                                     </span>
<span class="4278934915650879980" onmouseenter="enter('4278934915650879980');" onmouseout="out('4278934915650879980');" style=""> 194 		}**/                                                                                                   </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 195 		Module module = moduleCache.get(interFace.getModuleId());                                              </span>
<span class="5243642841384736036" onmouseenter="enter('5243642841384736036');" onmouseout="out('5243642841384736036');" style=""> 196 		if (!MyString.isEmpty(interFace.getId())) {                                                            </span>
<span class="5922306788492517961" onmouseenter="enter('5922306788492517961');" onmouseout="out('5922306788492517961');" style=""> 197 			String oldModuleId = interfaceService.getById(interFace.getId()).getModuleId();                       </span>
<span class="-2347736199422220093" onmouseenter="enter('-2347736199422220093');" onmouseout="out('-2347736199422220093');" style=""> 198 			String projectId = moduleCache.get(oldModuleId).getProjectId();                                       </span>
<span class="5491796810681698044" onmouseenter="enter('5491796810681698044');" onmouseout="out('5491796810681698044');" style=""> 199 			Project project = projectCache.get(interFace.getProjectId());                                         </span>
<span class="8257633002726469813" onmouseenter="enter('8257633002726469813');" onmouseout="out('8257633002726469813');" style=""> 200 			// 接口只能在同一个项目下的模块中移动                                                                                  </span>
<span class="-1636883700100488255" onmouseenter="enter('-1636883700100488255');" onmouseout="out('-1636883700100488255');" style=""> 201 			if (!projectId.equals(project.getId())) {                                                             </span>
<span class="3828115358811128245" onmouseenter="enter('3828115358811128245');" onmouseout="out('3828115358811128245');" style=""> 202 				throw new MyException(MyError.E000047);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203 			}                                                                                                     </span>
<span class="7913111081342953879" onmouseenter="enter('7913111081342953879');" onmouseout="out('7913111081342953879');" style=""> 204 			// 判断是否有修改模块的权限                                                                                       </span>
<span class="-3388185289221243217" onmouseenter="enter('-3388185289221243217');" onmouseout="out('-3388185289221243217');" style=""> 205 			checkUserPermissionByProject(project, MOD_INTER);                                                     </span>
<span class="2843972616624051211" onmouseenter="enter('2843972616624051211');" onmouseout="out('2843972616624051211');" style=""> 206 			// 同一模块下不允许 url 重复                                                                                    </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style=""> 207 			InterfaceQuery interfaceQuery = new InterfaceQuery();                                                 </span>
<span class="-6768630349280848862" onmouseenter="enter('-6768630349280848862');" onmouseout="out('-6768630349280848862');" style=""><abbr title=" 208 			interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() + interFace.getUrl()).setExceptId(interFace.getId());"> 208 			interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() + interFace.getUrl()).s🔵</abbr></span>
<span class="-3624635998094716140" onmouseenter="enter('-3624635998094716140');" onmouseout="out('-3624635998094716140');" style=""> 209 			if ((!config.isCanRepeatUrl()) &amp;&amp; (interfaceService.count(interfaceQuery) &gt; 0)) {                     </span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 210 				throw new MyException(MyError.E000004);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 211 			}                                                                                                     </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 212 			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                           </span>
<span class="4401707851467701848" onmouseenter="enter('4401707851467701848');" onmouseout="out('4401707851467701848');" style=""> 213 			interfaceService.update(InterfaceAdapter.getModel(interFace), &quot;接口&quot;, &quot;&quot;);                              </span>
<span class="-8188303492521453743" onmouseenter="enter('-8188303492521453743');" onmouseout="out('-8188303492521453743');" style=""> 214 			if (interFace.getId().equals(interFace.getProjectId())) {                                             </span>
<span class="8284136097153874854" onmouseenter="enter('8284136097153874854');" onmouseout="out('8284136097153874854');" style=""> 215 				throw new MyException(MyError.E000027);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216 			}                                                                                                     </span>
<span class="-8095562614157245048" onmouseenter="enter('-8095562614157245048');" onmouseout="out('-8095562614157245048');" style=""> 217 			luceneService.update(InterfaceAdapter.getSearchDto(interFace));                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 218 		} else {                                                                                               </span>
<span class="2392761974789585301" onmouseenter="enter('2392761974789585301');" onmouseout="out('2392761974789585301');" style=""> 219 			checkUserPermissionByProject(projectCache.get(interFace.getProjectId()), ADD_INTER);                  </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style=""> 220 			InterfaceQuery interfaceQuery = new InterfaceQuery();                                                 </span>
<span class="3456347313213406321" onmouseenter="enter('3456347313213406321');" onmouseout="out('3456347313213406321');" style=""> 221 			interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() + interFace.getUrl()); </span>
<span class="-3624635998094716140" onmouseenter="enter('-3624635998094716140');" onmouseout="out('-3624635998094716140');" style=""> 222 			if ((!config.isCanRepeatUrl()) &amp;&amp; (interfaceService.count(interfaceQuery) &gt; 0)) {                     </span>
<span class="8772628239303623293" onmouseenter="enter('8772628239303623293');" onmouseout="out('8772628239303623293');" style=""> 223 				return new JsonResult(MyError.E000004);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224 			}                                                                                                     </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 225 			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                           </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style=""> 226 			interfaceService.insert(InterfaceAdapter.getModel(interFace));                                        </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 227 			luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228 		}                                                                                                      </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 229 		return new JsonResult(1, interFace);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230 	}                                                                                                       </span>
<span  style=""> 231                                                                                                          </span>
<span class="3908622465717054108" onmouseenter="enter('3908622465717054108');" onmouseout="out('3908622465717054108');" style=""> 232 	@RequestMapping(&quot;/delete.do&quot;)                                                                           </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 233 	@ResponseBody                                                                                           </span>
<span class="-5864823594683390936" onmouseenter="enter('-5864823594683390936');" onmouseout="out('-5864823594683390936');" style=""> 234 	public JsonResult delete(String id, String ids) throws MyException, IOException {                       </span>
<span class="-3461427893236609634" onmouseenter="enter('-3461427893236609634');" onmouseout="out('-3461427893236609634');" style=""> 235 		if (MyString.isEmpty(id) &amp;&amp; MyString.isEmpty(ids)) {                                                   </span>
<span class="5841283794467303202" onmouseenter="enter('5841283794467303202');" onmouseout="out('5841283794467303202');" style=""> 236 			throw new MyException(MyError.E000029);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237 		}                                                                                                      </span>
<span class="-1116094427166003898" onmouseenter="enter('-1116094427166003898');" onmouseout="out('-1116094427166003898');" style=""> 238 		if (MyString.isEmpty(ids)) {                                                                           </span>
<span class="3511947876673837079" onmouseenter="enter('3511947876673837079');" onmouseout="out('3511947876673837079');" style=""> 239 			ids = id;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240 		}                                                                                                      </span>
<span class="-4167522595921394461" onmouseenter="enter('-4167522595921394461');" onmouseout="out('-4167522595921394461');" style=""> 241 		for (String tempId : ids.split(&quot;,&quot;)) {                                                                 </span>
<span class="-540512292166039300" onmouseenter="enter('-540512292166039300');" onmouseout="out('-540512292166039300');" style=""> 242 			if (MyString.isEmpty(tempId)) {                                                                       </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 243 				continue;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244 			}                                                                                                     </span>
<span class="9026621319827941550" onmouseenter="enter('9026621319827941550');" onmouseout="out('9026621319827941550');" style=""> 245 			InterfaceWithBLOBs interFace = interfaceService.getById(tempId);                                      </span>
<span class="-3259762685715036382" onmouseenter="enter('-3259762685715036382');" onmouseout="out('-3259762685715036382');" style=""> 246 			checkUserPermissionByProject(interFace.getProjectId(), DEL_INTER);                                    </span>
<span class="5403926906782818954" onmouseenter="enter('5403926906782818954');" onmouseout="out('5403926906782818954');" style=""> 247 			interfaceService.delete(interFace.getId(), &quot;接口&quot;, &quot;&quot;);                                                 </span>
<span class="2858649065821216875" onmouseenter="enter('2858649065821216875');" onmouseout="out('2858649065821216875');" style=""> 248 			luceneService.delete(new SearchDto(interFace.getId()));                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249 		}                                                                                                      </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 250 		return new JsonResult(1, null);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 251 	}                                                                                                       </span>
<span  style=""> 252                                                                                                          </span>
<span class="3383448423842759854" onmouseenter="enter('3383448423842759854');" onmouseout="out('3383448423842759854');" style=""> 253 	@RequestMapping(&quot;/changeSequence.do&quot;)                                                                   </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 254 	@ResponseBody                                                                                           </span>
<span class="-4895017852740811338" onmouseenter="enter('-4895017852740811338');" onmouseout="out('-4895017852740811338');" style=""> 255 	public JsonResult changeSequence(@RequestParam                                                          </span>
<span class="1513688614479317028" onmouseenter="enter('1513688614479317028');" onmouseout="out('1513688614479317028');" style=""> 256 	String id, @RequestParam                                                                                </span>
<span class="2100765133056061676" onmouseenter="enter('2100765133056061676');" onmouseout="out('2100765133056061676');" style=""> 257 	String changeId) throws MyException {                                                                   </span>
<span class="-114025814901609390" onmouseenter="enter('-114025814901609390');" onmouseout="out('-114025814901609390');" style=""> 258 		InterfaceWithBLOBs change = interfaceService.getById(changeId);                                        </span>
<span class="1535172332471428490" onmouseenter="enter('1535172332471428490');" onmouseout="out('1535172332471428490');" style=""> 259 		InterfaceWithBLOBs model = interfaceService.getById(id);                                               </span>
<span class="1373326694122548312" onmouseenter="enter('1373326694122548312');" onmouseout="out('1373326694122548312');" style=""> 260 		checkUserPermissionByProject(model.getProjectId(), MOD_INTER);                                         </span>
<span class="9185443680929913036" onmouseenter="enter('9185443680929913036');" onmouseout="out('9185443680929913036');" style=""> 261 		checkUserPermissionByProject(change.getProjectId(), MOD_INTER);                                        </span>
<span class="-6471227968333011823" onmouseenter="enter('-6471227968333011823');" onmouseout="out('-6471227968333011823');" style=""> 262 		int modelSequence = model.getSequence();                                                               </span>
<span class="-7348627876629533627" onmouseenter="enter('-7348627876629533627');" onmouseout="out('-7348627876629533627');" style=""> 263 		model.setSequence(change.getSequence());                                                               </span>
<span class="-8403247859037350919" onmouseenter="enter('-8403247859037350919');" onmouseout="out('-8403247859037350919');" style=""> 264 		change.setSequence(modelSequence);                                                                     </span>
<span class="1992515717850273638" onmouseenter="enter('1992515717850273638');" onmouseout="out('1992515717850273638');" style=""> 265 		interfaceService.update(model);                                                                        </span>
<span class="8445067308225092068" onmouseenter="enter('8445067308225092068');" onmouseout="out('8445067308225092068');" style=""> 266 		interfaceService.update(change);                                                                       </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 267 		return new JsonResult(1, null);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268 	}                                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269 }                                                                                                        </span>
















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="8453884345636310198" onmouseenter="enter('8453884345636310198');" onmouseout="out('8453884345636310198');" style="">   1  package cn.crap.controller.user;                                                                                  </span>
<span  style="">   2                                                                                                                    </span>
<span class="3872670124992133569" onmouseenter="enter('3872670124992133569');" onmouseout="out('3872670124992133569');" style="">   3  import cn.crap.adapter.InterfaceAdapter;                                                                          </span>
<span class="4279274079824086333" onmouseenter="enter('4279274079824086333');" onmouseout="out('4279274079824086333');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">   4 +import cn.crap.beans.Config;                                                                                      </span>
<span class="6807184333094047547" onmouseenter="enter('6807184333094047547');" onmouseout="out('6807184333094047547');" style="">   5  import cn.crap.dto.InterfaceDto;                                                                                  </span>
<span class="7929325164483847730" onmouseenter="enter('7929325164483847730');" onmouseout="out('7929325164483847730');" style="">   6  import cn.crap.dto.LoginInfoDto;                                                                                  </span>
<span class="1522833305812512221" onmouseenter="enter('1522833305812512221');" onmouseout="out('1522833305812512221');" style="">   7  import cn.crap.dto.SearchDto;                                                                                     </span>
<span class="-911749451892422883" onmouseenter="enter('-911749451892422883');" onmouseout="out('-911749451892422883');" style="">   8  import cn.crap.enumer.MonitorType;                                                                                </span>
<span class="5139023199245080803" onmouseenter="enter('5139023199245080803');" onmouseout="out('5139023199245080803');" style="">   9  import cn.crap.enumer.MyError;                                                                                    </span>
<span class="-7847071603028321447" onmouseenter="enter('-7847071603028321447');" onmouseout="out('-7847071603028321447');" style="">  10  import cn.crap.framework.JsonResult;                                                                              </span>
<span class="-7574536783671103865" onmouseenter="enter('-7574536783671103865');" onmouseout="out('-7574536783671103865');" style="">  11  import cn.crap.framework.MyException;                                                                             </span>
<span class="-4522781807489195049" onmouseenter="enter('-4522781807489195049');" onmouseout="out('-4522781807489195049');" style="">  12  import cn.crap.framework.base.BaseController;                                                                     </span>
<span class="4903612087055488212" onmouseenter="enter('4903612087055488212');" onmouseout="out('4903612087055488212');" style="">  13  import cn.crap.framework.interceptor.AuthPassport;                                                                </span>
<span class="6918812738981283976" onmouseenter="enter('6918812738981283976');" onmouseout="out('6918812738981283976');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  14 -import cn.crap.model.mybatis.Error;                                                                               </span>
<span class="7947320592764196414" onmouseenter="enter('7947320592764196414');" onmouseout="out('7947320592764196414');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  15 -import cn.crap.model.mybatis.*;                                                                                   </span>
<span class="8147845229390238491" onmouseenter="enter('8147845229390238491');" onmouseout="out('8147845229390238491');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  16 +import cn.crap.model.Error;                                                                                       </span>
<span class="6961814849649346163" onmouseenter="enter('6961814849649346163');" onmouseout="out('6961814849649346163');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  17 +import cn.crap.model.InterfaceWithBLOBs;                                                                          </span>
<span class="-3829059158540726081" onmouseenter="enter('-3829059158540726081');" onmouseout="out('-3829059158540726081');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  18 +import cn.crap.model.Module;                                                                                      </span>
<span class="-2569611458616973012" onmouseenter="enter('-2569611458616973012');" onmouseout="out('-2569611458616973012');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  19 +import cn.crap.model.Project;                                                                                     </span>
<span class="24505043057363846" onmouseenter="enter('24505043057363846');" onmouseout="out('24505043057363846');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  20 +import cn.crap.query.ErrorQuery;                                                                                  </span>
<span class="5577390926415763020" onmouseenter="enter('5577390926415763020');" onmouseout="out('5577390926415763020');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  21 +import cn.crap.query.InterfaceQuery;                                                                              </span>
<span class="-5580999983088044782" onmouseenter="enter('-5580999983088044782');" onmouseout="out('-5580999983088044782');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  22 +import cn.crap.service.ErrorService;                                                                              </span>
<span class="2810978048240697020" onmouseenter="enter('2810978048240697020');" onmouseout="out('2810978048240697020');" style="">  23  import cn.crap.service.ISearchService;                                                                            </span>
<span class="3204752822407608187" onmouseenter="enter('3204752822407608187');" onmouseout="out('3204752822407608187');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  24 -import cn.crap.service.custom.CustomErrorService;                                                                 </span>
<span class="-5830266922446194054" onmouseenter="enter('-5830266922446194054');" onmouseout="out('-5830266922446194054');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  25 -import cn.crap.service.custom.CustomInterfaceService;                                                             </span>
<span class="3152424729930326541" onmouseenter="enter('3152424729930326541');" onmouseout="out('3152424729930326541');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  26 -import cn.crap.service.mybatis.InterfaceService;                                                                  </span>
<span class="4279274079824086333" onmouseenter="enter('4279274079824086333');" onmouseout="out('4279274079824086333');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  27 -import cn.crap.beans.Config;                                                                                      </span>
<span class="3571843901690526929" onmouseenter="enter('3571843901690526929');" onmouseout="out('3571843901690526929');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  28 -import cn.crap.utils.*;                                                                                           </span>
<span class="-256793303282880299" onmouseenter="enter('-256793303282880299');" onmouseout="out('-256793303282880299');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  29 +import cn.crap.service.InterfaceService;                                                                          </span>
<span class="5115699361496505387" onmouseenter="enter('5115699361496505387');" onmouseout="out('5115699361496505387');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  30 +import cn.crap.utils.LoginUserHelper;                                                                             </span>
<span class="6445485251376419284" onmouseenter="enter('6445485251376419284');" onmouseout="out('6445485251376419284');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  31 +import cn.crap.utils.MyString;                                                                                    </span>
<span class="7821392437622009242" onmouseenter="enter('7821392437622009242');" onmouseout="out('7821392437622009242');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  32 +import cn.crap.utils.Page;                                                                                        </span>
<span class="2894550376389390724" onmouseenter="enter('2894550376389390724');" onmouseout="out('2894550376389390724');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  33 +import cn.crap.utils.Tools;                                                                                       </span>
<span class="9045939009765002950" onmouseenter="enter('9045939009765002950');" onmouseout="out('9045939009765002950');" style="">  34  import net.sf.json.JSONArray;                                                                                     </span>
<span class="-6148326362900055524" onmouseenter="enter('-6148326362900055524');" onmouseout="out('-6148326362900055524');" style="">  35  import org.springframework.beans.factory.annotation.Autowired;                                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  36  import org.springframework.stereotype.Controller;                                                                 </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  37  import org.springframework.util.Assert;                                                                           </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  38  import org.springframework.web.bind.annotation.ModelAttribute;                                                    </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  39  import org.springframework.web.bind.annotation.RequestMapping;                                                    </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  40  import org.springframework.web.bind.annotation.RequestParam;                                                      </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  41  import org.springframework.web.bind.annotation.ResponseBody;                                                      </span>
<span  style="">  42                                                                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  43  import java.io.IOException;                                                                                       </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  44 -import java.util.Date;                                                                                            </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  45  import java.util.List;                                                                                            </span>
<span  style="">  46                                                                                                                    </span>
<span class="4777805177773543995" onmouseenter="enter('4777805177773543995');" onmouseout="out('4777805177773543995');" style="">  47  @Controller                                                                                                       </span>
<span class="-1946225143665328935" onmouseenter="enter('-1946225143665328935');" onmouseout="out('-1946225143665328935');" style="">  48  @RequestMapping(&quot;/user/interface&quot;)                                                                                </span>
<span class="6388668049573310758" onmouseenter="enter('6388668049573310758');" onmouseout="out('6388668049573310758');" style="">  49  public class InterfaceController extends BaseController{                                                          </span>
<span  style="">  50                                                                                                                    </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  51  	@Autowired                                                                                                       </span>
<span class="2899478971554593826" onmouseenter="enter('2899478971554593826');" onmouseout="out('2899478971554593826');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  52 -	private CustomInterfaceService customInterfaceService;                                                           </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  53 -	@Autowired                                                                                                       </span>
<span class="7679472003521629176" onmouseenter="enter('7679472003521629176');" onmouseout="out('7679472003521629176');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  54 -	private InterfaceService mybatisInterfaceService;                                                                </span>
<span class="5676854317382137038" onmouseenter="enter('5676854317382137038');" onmouseout="out('5676854317382137038');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  55 +	private InterfaceService interfaceService;                                                                       </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  56  	@Autowired                                                                                                       </span>
<span class="-925519006397285322" onmouseenter="enter('-925519006397285322');" onmouseout="out('-925519006397285322');" style="">  57  	private ISearchService luceneService;                                                                            </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  58  	@Autowired                                                                                                       </span>
<span class="-5513827626367361969" onmouseenter="enter('-5513827626367361969');" onmouseout="out('-5513827626367361969');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  59 -	private CustomErrorService customErrorService;                                                                   </span>
<span class="-3968544807213930836" onmouseenter="enter('-3968544807213930836');" onmouseout="out('-3968544807213930836');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +	private ErrorService errorService;                                                                               </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  61  	@Autowired                                                                                                       </span>
<span class="-3607813097408339844" onmouseenter="enter('-3607813097408339844');" onmouseout="out('-3607813097408339844');" style="">  62  	private Config config;                                                                                           </span>
<span  style="">  63                                                                                                                    </span>
<span  style="">  64                                                                                                                    </span>
<span class="3216165995479628896" onmouseenter="enter('3216165995479628896');" onmouseout="out('3216165995479628896');" style="">  65  	@RequestMapping(&quot;/list.do&quot;)                                                                                      </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  66  	@ResponseBody                                                                                                    </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style="">  67  	@AuthPassport                                                                                                    </span>
<span class="406281474848555250" onmouseenter="enter('406281474848555250');" onmouseout="out('406281474848555250');" style="">  68  	public JsonResult list(@RequestParam String moduleId, String interfaceName, String url,                          </span>
<span class="6957141086400891835" onmouseenter="enter('6957141086400891835');" onmouseout="out('6957141086400891835');" style="">  69  			 Integer currentPage) throws MyException{                                                                      </span>
<span class="-3788017470690474402" onmouseenter="enter('-3788017470690474402');" onmouseout="out('-3788017470690474402');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  70 -		Page page= new Page(currentPage);                                                                               </span>
<span class="-1257262529751619377" onmouseenter="enter('-1257262529751619377');" onmouseout="out('-1257262529751619377');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  71 -		checkUserPermissionByModuleId(moduleId, VIEW);                                                                  </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  72 -                                                                                                                  </span>
<span class="79352456157947925" onmouseenter="enter('79352456157947925');" onmouseout="out('79352456157947925');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  73 -		InterfaceCriteria example = new InterfaceCriteria();                                                            </span>
<span class="877235730442223421" onmouseenter="enter('877235730442223421');" onmouseout="out('877235730442223421');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  74 -		InterfaceCriteria.Criteria criteria = example.createCriteria().andModuleIdEqualTo(moduleId);                    </span>
<span class="5947007371237771236" onmouseenter="enter('5947007371237771236');" onmouseout="out('5947007371237771236');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  75 -		if (!MyString.isEmpty(interfaceName)){                                                                          </span>
<span class="-1349920481569799161" onmouseenter="enter('-1349920481569799161');" onmouseout="out('-1349920481569799161');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  76 -			criteria.andInterfaceNameLike(&quot;%&quot; + interfaceName + &quot;%&quot;);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  77 -		}                                                                                                               </span>
<span class="-3262307933636202428" onmouseenter="enter('-3262307933636202428');" onmouseout="out('-3262307933636202428');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  78 -		if (!MyString.isEmpty(url)){                                                                                    </span>
<span class="-6698610763898127298" onmouseenter="enter('-6698610763898127298');" onmouseout="out('-6698610763898127298');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  79 -			criteria.andFullUrlLike(&quot;%&quot; + url + &quot;%&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  80 -		}                                                                                                               </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  81 -                                                                                                                  </span>
<span class="-8743619996132367741" onmouseenter="enter('-8743619996132367741');" onmouseout="out('-8743619996132367741');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title="  82 -		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example), null);">  82 -		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example🔵</abbr></span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  83 +		InterfaceQuery interfaceQuery = new InterfaceQuery();                                                           </span>
<span class="8382525882236311366" onmouseenter="enter('8382525882236311366');" onmouseout="out('8382525882236311366');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  84 +		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(currentPage);">  84 +		interfaceQuery.setModuleId(moduleId).setInterfaceName(interfaceName).setFullUrl(url).setCurrentPage(currentPage)🔵</abbr></span>
<span class="-5279124502853396526" onmouseenter="enter('-5279124502853396526');" onmouseout="out('-5279124502853396526');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  85 +		Page page= new Page(interfaceQuery);                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  86 +                                                                                                                  </span>
<span class="3442007748957955908" onmouseenter="enter('3442007748957955908');" onmouseout="out('3442007748957955908');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  87 +		Module module = moduleCache.get(moduleId);                                                                      </span>
<span class="8699301439456190280" onmouseenter="enter('8699301439456190280');" onmouseout="out('8699301439456190280');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  88 +		Project project = projectCache.get(module.getProjectId());                                                      </span>
<span class="6295340851346331112" onmouseenter="enter('6295340851346331112');" onmouseout="out('6295340851346331112');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  89 +		checkUserPermissionByProject(project.getId(), VIEW);                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  90 +                                                                                                                  </span>
<span class="-8091314608405686849" onmouseenter="enter('-8091314608405686849');" onmouseout="out('-8091314608405686849');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title="  91 +		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module, project);">  91 +		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(interfaceService.query(interfaceQuery), module, project)🔵</abbr></span>
<span class="-3280997506223267100" onmouseenter="enter('-3280997506223267100');" onmouseout="out('-3280997506223267100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  92 +		page.setAllRow(interfaceService.count(interfaceQuery));                                                         </span>
<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="">  93  		JsonResult result = new JsonResult(1, interfaces, page);                                                        </span>
<span class="-3039605850617260143" onmouseenter="enter('-3039605850617260143');" onmouseout="out('-3039605850617260143');" style="">  94  		result.putOthers(&quot;crumbs&quot;, Tools.getCrumbs(&quot;接口列表:&quot;+ moduleCache.get(moduleId).getName(),&quot;void&quot;))                </span>
<span class="-2242017820679200314" onmouseenter="enter('-2242017820679200314');" onmouseout="out('-2242017820679200314');" style="">  95  				.putOthers(&quot;module&quot;, moduleCache.get(moduleId));                                                              </span>
<span  style="">  96                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  97  		return result;                                                                                                  </span>
<span  style="">  98                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  99  	}                                                                                                                </span>
<span  style=""> 100                                                                                                                    </span>
<span class="-557002042091694149" onmouseenter="enter('-557002042091694149');" onmouseout="out('-557002042091694149');" style=""> 101  	@RequestMapping(&quot;/detail.do&quot;)                                                                                    </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 102  	@ResponseBody                                                                                                    </span>
<span class="-7956266425262709264" onmouseenter="enter('-7956266425262709264');" onmouseout="out('-7956266425262709264');" style=""> 103  	public JsonResult detail(String id, String moduleId) throws MyException {                                        </span>
<span class="-5013732608106508542" onmouseenter="enter('-5013732608106508542');" onmouseout="out('-5013732608106508542');" style=""> 104  		InterfaceWithBLOBs model;                                                                                       </span>
<span class="6526027684909256553" onmouseenter="enter('6526027684909256553');" onmouseout="out('6526027684909256553');" style=""> 105  		Module module = null;                                                                                           </span>
<span class="-6983393444998086393" onmouseenter="enter('-6983393444998086393');" onmouseout="out('-6983393444998086393');" style=""> 106  		if(id != null){                                                                                                 </span>
<span class="2136695934268049965" onmouseenter="enter('2136695934268049965');" onmouseout="out('2136695934268049965');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 107 -			model= mybatisInterfaceService.getById(id);                                                                    </span>
<span class="-2399207700769929325" onmouseenter="enter('-2399207700769929325');" onmouseout="out('-2399207700769929325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 108 +			model= interfaceService.getById(id);                                                                           </span>
<span class="1040064000347861178" onmouseenter="enter('1040064000347861178');" onmouseout="out('1040064000347861178');" style=""> 109  			module = moduleCache.get(model.getModuleId());                                                                 </span>
<span class="-185843402063825431" onmouseenter="enter('-185843402063825431');" onmouseout="out('-185843402063825431');" style=""> 110  			checkUserPermissionByProject(model.getProjectId(), VIEW);                                                      </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 111  		}else{                                                                                                          </span>
<span class="-7029962562203235323" onmouseenter="enter('-7029962562203235323');" onmouseout="out('-7029962562203235323');" style=""> 112  			model = new InterfaceWithBLOBs();                                                                              </span>
<span class="-2587857982027861322" onmouseenter="enter('-2587857982027861322');" onmouseout="out('-2587857982027861322');" style=""> 113  			module = moduleCache.get(moduleId);                                                                            </span>
<span class="-853942339085784102" onmouseenter="enter('-853942339085784102');" onmouseout="out('-853942339085784102');" style=""> 114  			model.setModuleId( moduleId);                                                                                  </span>
<span class="-5617097986837608318" onmouseenter="enter('-5617097986837608318');" onmouseout="out('-5617097986837608318');" style=""> 115  			model.setProjectId(module.getProjectId());                                                                     </span>
<span class="4623621077757195404" onmouseenter="enter('4623621077757195404');" onmouseout="out('4623621077757195404');" style=""> 116  			model.setParam(&quot;form=[]&quot;);                                                                                     </span>
<span class="-646854625022819456" onmouseenter="enter('-646854625022819456');" onmouseout="out('-646854625022819456');" style=""> 117  			model.setResponseParam(&quot;[]&quot;);                                                                                  </span>
<span class="-7417036509485016685" onmouseenter="enter('-7417036509485016685');" onmouseout="out('-7417036509485016685');" style=""> 118  			model.setHeader(&quot;[]&quot;);                                                                                         </span>
<span class="2272429349124999400" onmouseenter="enter('2272429349124999400');" onmouseout="out('2272429349124999400');" style=""> 119  			model.setParamRemark(&quot;[]&quot;);                                                                                    </span>
<span class="-8254387329445674854" onmouseenter="enter('-8254387329445674854');" onmouseout="out('-8254387329445674854');" style=""> 120  			if(!MyString.isEmpty(module.getTemplateId())){                                                                 </span>
<span class="15965008614372872" onmouseenter="enter('15965008614372872');" onmouseout="out('15965008614372872');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 121 -				InterfaceWithBLOBs template = mybatisInterfaceService.getById(module.getTemplateId());                        </span>
<span class="-4020697440483671496" onmouseenter="enter('-4020697440483671496');" onmouseout="out('-4020697440483671496');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 122 +				InterfaceWithBLOBs template = interfaceService.getById(module.getTemplateId());                               </span>
<span class="5678506116785444717" onmouseenter="enter('5678506116785444717');" onmouseout="out('5678506116785444717');" style=""> 123  				// 根据模板初始化接口                                                                                                  </span>
<span class="-4452779201008749745" onmouseenter="enter('-4452779201008749745');" onmouseout="out('-4452779201008749745');" style=""> 124  				if(template != null){                                                                                         </span>
<span class="5089751341604219548" onmouseenter="enter('5089751341604219548');" onmouseout="out('5089751341604219548');" style=""> 125  					model.setHeader(template.getHeader());                                                                       </span>
<span class="-7527905069934626121" onmouseenter="enter('-7527905069934626121');" onmouseout="out('-7527905069934626121');" style=""> 126  					model.setParam(template.getParam());                                                                         </span>
<span class="-7059470924530166388" onmouseenter="enter('-7059470924530166388');" onmouseout="out('-7059470924530166388');" style=""> 127  					model.setMethod(template.getMethod());                                                                       </span>
<span class="5940911261599321088" onmouseenter="enter('5940911261599321088');" onmouseout="out('5940911261599321088');" style=""> 128  					model.setVersion(template.getVersion());                                                                     </span>
<span class="-3448468761886356175" onmouseenter="enter('-3448468761886356175');" onmouseout="out('-3448468761886356175');" style=""> 129  					model.setParamRemark(template.getParamRemark());                                                             </span>
<span class="1622152235047204734" onmouseenter="enter('1622152235047204734');" onmouseout="out('1622152235047204734');" style=""> 130  					model.setResponseParam(template.getResponseParam());                                                         </span>
<span class="-6414379266760239220" onmouseenter="enter('-6414379266760239220');" onmouseout="out('-6414379266760239220');" style=""> 131  					model.setErrorList(template.getErrorList());                                                                 </span>
<span class="-379237002060688021" onmouseenter="enter('-379237002060688021');" onmouseout="out('-379237002060688021');" style=""> 132  					model.setErrors(template.getErrors());                                                                       </span>
<span class="2306293464665606986" onmouseenter="enter('2306293464665606986');" onmouseout="out('2306293464665606986');" style=""> 133  					model.setFalseExam(template.getFalseExam());                                                                 </span>
<span class="5307078882417853010" onmouseenter="enter('5307078882417853010');" onmouseout="out('5307078882417853010');" style=""> 134  					model.setTrueExam(template.getTrueExam());                                                                   </span>
<span class="-994236842464253118" onmouseenter="enter('-994236842464253118');" onmouseout="out('-994236842464253118');" style=""> 135  					model.setStatus(template.getStatus());                                                                       </span>
<span class="-2721857626840181883" onmouseenter="enter('-2721857626840181883');" onmouseout="out('-2721857626840181883');" style=""> 136  					model.setContentType(template.getContentType());                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137  				}                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138  			}                                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139  		}                                                                                                               </span>
<span class="-3285112137533597017" onmouseenter="enter('-3285112137533597017');" onmouseout="out('-3285112137533597017');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 140 -		return new JsonResult(1, InterfaceAdapter.getDto(model, module, false));                                        </span>
<span class="5907549922391530254" onmouseenter="enter('5907549922391530254');" onmouseout="out('5907549922391530254');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 141 +		return new JsonResult(1, InterfaceAdapter.getDto(model, module, null, false));                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142  	}                                                                                                                </span>
<span  style=""> 143                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 144  	/**                                                                                                              </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 145  	 * @param interFace                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 146  	 * @return                                                                                                       </span>
<span class="-5665355684135370133" onmouseenter="enter('-5665355684135370133');" onmouseout="out('-5665355684135370133');" style=""> 147  	 * @throws MyException                                                                                           </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style=""> 148  	 * @throws IOException                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 149  	 */                                                                                                              </span>
<span class="3944392597235221522" onmouseenter="enter('3944392597235221522');" onmouseout="out('3944392597235221522');" style=""> 150  	@RequestMapping(&quot;/copy.do&quot;)                                                                                      </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 151  	@ResponseBody                                                                                                    </span>
<span class="1639735162589969103" onmouseenter="enter('1639735162589969103');" onmouseout="out('1639735162589969103');" style=""> 152  	public JsonResult copy(@ModelAttribute InterfaceDto interFace) throws MyException, IOException {                 </span>
<span class="-8206169773439054267" onmouseenter="enter('-8206169773439054267');" onmouseout="out('-8206169773439054267');" style=""> 153  		//判断是否拥有该模块的权限                                                                                                  </span>
<span class="2279808889297804532" onmouseenter="enter('2279808889297804532');" onmouseout="out('2279808889297804532');" style=""> 154  		checkUserPermissionByProject(interFace.getProjectId(), ADD_INTER);                                              </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 155  		Module module = moduleCache.get(interFace.getModuleId());                                                       </span>
<span  style=""> 156                                                                                                                    </span>
<span class="6932488038728960880" onmouseenter="enter('6932488038728960880');" onmouseout="out('6932488038728960880');" style=""> 157  		if(!config.isCanRepeatUrl()){                                                                                   </span>
<span class="79352456157947925" onmouseenter="enter('79352456157947925');" onmouseout="out('79352456157947925');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 158 -			InterfaceCriteria example = new InterfaceCriteria();                                                           </span>
<span class="1875924719643896699" onmouseenter="enter('1875924719643896699');" onmouseout="out('1875924719643896699');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 159 -			InterfaceCriteria.Criteria criteria = example.createCriteria();                                                </span>
<span class="8511472322804707057" onmouseenter="enter('8511472322804707057');" onmouseout="out('8511472322804707057');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 160 -			criteria.andModuleIdEqualTo(interFace.getModuleId()).andFullUrlEqualTo(module.getUrl() + interFace.getUrl());  </span>
<span class="4391789810700113516" onmouseenter="enter('4391789810700113516');" onmouseout="out('4391789810700113516');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 161 -			if (mybatisInterfaceService.countByExample(example) &gt; 0){                                                      </span>
<span class="-3960254172214938545" onmouseenter="enter('-3960254172214938545');" onmouseout="out('-3960254172214938545');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 162 +			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(module.getUrl() + interFace.getUrl())) &gt; 0){"> 162 +			if (interfaceService.count(new InterfaceQuery().setModuleId(interFace.getModuleId()).setEqualFullUrl(module.get🔵</abbr></span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 163  				throw new MyException(MyError.E000004);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 164  			}                                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165  		}                                                                                                               </span>
<span class="-4927829934273936544" onmouseenter="enter('-4927829934273936544');" onmouseout="out('-4927829934273936544');" style=""> 166  		interFace.setId(null);                                                                                          </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 167  		interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                                     </span>
<span class="-8789612314220373117" onmouseenter="enter('-8789612314220373117');" onmouseout="out('-8789612314220373117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 168 -		mybatisInterfaceService.insert(InterfaceAdapter.getModel(interFace));                                           </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 169 +		interfaceService.insert(InterfaceAdapter.getModel(interFace));                                                  </span>
<span  style=""> 170                                                                                                                    </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 171  		luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                                    </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 172  		return new JsonResult(1, interFace);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173  	}                                                                                                                </span>
<span  style=""> 174                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 175  	/**                                                                                                              </span>
<span class="-7492619764061686694" onmouseenter="enter('-7492619764061686694');" onmouseout="out('-7492619764061686694');" style=""> 176  	 * 根据参数生成请求示例                                                                                                    </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 177  	 * @param interFace                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 178  	 * @return                                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 179  	 */                                                                                                              </span>
<span class="4685904336828752448" onmouseenter="enter('4685904336828752448');" onmouseout="out('4685904336828752448');" style=""> 180  	@RequestMapping(&quot;/getRequestExam.do&quot;)                                                                            </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 181  	@ResponseBody                                                                                                    </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 182  	@AuthPassport                                                                                                    </span>
<span class="3638284629125143669" onmouseenter="enter('3638284629125143669');" onmouseout="out('3638284629125143669');" style=""> 183  	public JsonResult getRequestExam(@ModelAttribute InterfaceDto interFace) {                                       </span>
<span class="-551733375967960079" onmouseenter="enter('-551733375967960079');" onmouseout="out('-551733375967960079');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 184 -		customInterfaceService.getInterFaceRequestExam(interFace);                                                      </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +		interfaceService.getInterFaceRequestExam(interFace);                                                            </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 186  		return new JsonResult(1, interFace);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187  	}                                                                                                                </span>
<span  style=""> 188                                                                                                                    </span>
<span class="9102117119873215850" onmouseenter="enter('9102117119873215850');" onmouseout="out('9102117119873215850');" style=""> 189  	@RequestMapping(&quot;/addOrUpdate.do&quot;)                                                                               </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 190  	@ResponseBody                                                                                                    </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 191  	@AuthPassport                                                                                                    </span>
<span class="-2371211080264372097" onmouseenter="enter('-2371211080264372097');" onmouseout="out('-2371211080264372097');" style=""> 192  	public JsonResult addOrUpdate(@ModelAttribute InterfaceDto interFace) throws IOException, MyException {          </span>
<span class="-7246000527363885378" onmouseenter="enter('-7246000527363885378');" onmouseout="out('-7246000527363885378');" style=""> 193  		Assert.notNull(interFace.getProjectId(), &quot;projectId can&#x27;t be null&quot;);                                            </span>
<span  style=""> 194                                                                                                                    </span>
<span class="3680314398792253191" onmouseenter="enter('3680314398792253191');" onmouseout="out('3680314398792253191');" style=""> 195  		if(MyString.isEmpty(interFace.getUrl())) {                                                                      </span>
<span class="-2022936812063158899" onmouseenter="enter('-2022936812063158899');" onmouseout="out('-2022936812063158899');" style=""> 196  			return new JsonResult(MyError.E000005);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197  		}                                                                                                               </span>
<span class="-1520907386631176867" onmouseenter="enter('-1520907386631176867');" onmouseout="out('-1520907386631176867');" style=""> 198  		interFace.setUrl(interFace.getUrl().trim());                                                                    </span>
<span  style=""> 199                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 200  		/**                                                                                                             </span>
<span class="7045250225799015466" onmouseenter="enter('7045250225799015466');" onmouseout="out('7045250225799015466');" style=""> 201  		 * 根据选着的错误码id，组装json字符串                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 202  		 */                                                                                                             </span>
<span class="28798638763014117" onmouseenter="enter('28798638763014117');" onmouseout="out('28798638763014117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 203 -		String errorIds = interFace.getErrorList();                                                                     </span>
<span class="-3521543674443001094" onmouseenter="enter('-3521543674443001094');" onmouseout="out('-3521543674443001094');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 204 -		List&lt;Error&gt; errors  = customErrorService.queryByProjectIdAndErrorCode(interFace.getProjectId(), Tools.getIdsFromField(errorIds));"> 204 -		List&lt;Error&gt; errors  = customErrorService.queryByProjectIdAndErrorCode(interFace.getProjectId(), Tools.getIdsFrom🔵</abbr></span>
<span class="-8271447941175878236" onmouseenter="enter('-8271447941175878236');" onmouseout="out('-8271447941175878236');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 205 +        ErrorQuery query = new ErrorQuery().setProjectId(interFace.getProjectId())                                </span>
<span class="-954574203782809238" onmouseenter="enter('-954574203782809238');" onmouseout="out('-954574203782809238');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 206 +                .setErrorCodeList(Tools.getIdsFromField(interFace.getErrorList())).setPageSize(100);              </span>
<span class="7007176770365788864" onmouseenter="enter('7007176770365788864');" onmouseout="out('7007176770365788864');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 207 +        List&lt;Error&gt; errors  = errorService.query(query);                                                          </span>
<span class="8099633558915995513" onmouseenter="enter('8099633558915995513');" onmouseout="out('8099633558915995513');" style=""> 208  		interFace.setErrors(JSONArray.fromObject(errors).toString());                                                   </span>
<span  style=""> 209                                                                                                                    </span>
<span class="1766529869277441370" onmouseenter="enter('1766529869277441370');" onmouseout="out('1766529869277441370');" style=""> 210  		LoginInfoDto user = LoginUserHelper.getUser();                                                                  </span>
<span class="3045017157654780991" onmouseenter="enter('3045017157654780991');" onmouseout="out('3045017157654780991');" style=""> 211  		interFace.setUpdateBy(&quot;userName：&quot;+user.getUserName()+&quot; | trueName：&quot;+ user.getTrueName());                       </span>
<span  style=""> 212                                                                                                                    </span>
<span class="8532154523355485279" onmouseenter="enter('8532154523355485279');" onmouseout="out('8532154523355485279');" style=""> 213  		//请求示例为空，则自动添加                                                                                                  </span>
<span class="4679476040111179483" onmouseenter="enter('4679476040111179483');" onmouseout="out('4679476040111179483');" style=""> 214  		if(MyString.isEmpty(interFace.getRequestExam())){                                                               </span>
<span class="-551733375967960079" onmouseenter="enter('-551733375967960079');" onmouseout="out('-551733375967960079');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 215 -			customInterfaceService.getInterFaceRequestExam(interFace);                                                     </span>
<span class="-5225351620401365404" onmouseenter="enter('-5225351620401365404');" onmouseout="out('-5225351620401365404');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +			interfaceService.getInterFaceRequestExam(interFace);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 217  		}                                                                                                               </span>
<span class="2009751668094616815" onmouseenter="enter('2009751668094616815');" onmouseout="out('2009751668094616815');" style=""> 218          interFace.setMonitorType(MonitorType.No.getValue());                                                      </span>
<span class="-941211001760564316" onmouseenter="enter('-941211001760564316');" onmouseout="out('-941211001760564316');" style=""> 219  		//检查邮件格式是否正确                                                                                                    </span>
<span class="-22728527345241303" onmouseenter="enter('-22728527345241303');" onmouseout="out('-22728527345241303');" style=""> 220  		/**if(interFace.getMonitorType() != MonitorType.No.getValue()){                                                 </span>
<span class="6470615935665347659" onmouseenter="enter('6470615935665347659');" onmouseout="out('6470615935665347659');" style=""> 221  			if(!MyString.isEmpty(interFace.getMonitorEmails())){                                                           </span>
<span class="9144489970704028395" onmouseenter="enter('9144489970704028395');" onmouseout="out('9144489970704028395');" style=""> 222  				for(String email : interFace.getMonitorEmails().split(&quot;;&quot;)){                                                  </span>
<span class="1445021202833529364" onmouseenter="enter('1445021202833529364');" onmouseout="out('1445021202833529364');" style=""> 223  					if( !Tools.checkEmail(email) ){                                                                              </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 224  						throw new MyException(E000032&quot;);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225  					}                                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226  				}                                                                                                             </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 227  			}else{                                                                                                         </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 228  				throw new MyException(E000032&quot;);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 229  			}                                                                                                              </span>
<span class="4278934915650879980" onmouseenter="enter('4278934915650879980');" onmouseout="out('4278934915650879980');" style=""> 230  		}**/                                                                                                            </span>
<span  style=""> 231                                                                                                                    </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 232  		Module module = moduleCache.get(interFace.getModuleId());                                                       </span>
<span class="5243642841384736036" onmouseenter="enter('5243642841384736036');" onmouseout="out('5243642841384736036');" style=""> 233  		if (!MyString.isEmpty(interFace.getId())) {                                                                     </span>
<span class="4634617091812320018" onmouseenter="enter('4634617091812320018');" onmouseout="out('4634617091812320018');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 234 -			String oldModuleId = mybatisInterfaceService.getById(interFace.getId()).getModuleId();                         </span>
<span class="5922306788492517961" onmouseenter="enter('5922306788492517961');" onmouseout="out('5922306788492517961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +			String oldModuleId = interfaceService.getById(interFace.getId()).getModuleId();                                </span>
<span class="-2347736199422220093" onmouseenter="enter('-2347736199422220093');" onmouseout="out('-2347736199422220093');" style=""> 236  			String projectId = moduleCache.get(oldModuleId).getProjectId();                                                </span>
<span class="3404097771773836763" onmouseenter="enter('3404097771773836763');" onmouseout="out('3404097771773836763');" style=""> 237  			Project project = projectCache.get(interFace.getProjectId() );                                                 </span>
<span  style=""> 238                                                                                                                    </span>
<span class="8257633002726469813" onmouseenter="enter('8257633002726469813');" onmouseout="out('8257633002726469813');" style=""> 239  			// 接口只能在同一个项目下的模块中移动                                                                                           </span>
<span class="-8654578892208964423" onmouseenter="enter('-8654578892208964423');" onmouseout="out('-8654578892208964423');" style=""> 240  			if( !projectId.equals(project.getId())){                                                                       </span>
<span class="3828115358811128245" onmouseenter="enter('3828115358811128245');" onmouseout="out('3828115358811128245');" style=""> 241  				throw new MyException(MyError.E000047);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242  			}                                                                                                              </span>
<span class="7913111081342953879" onmouseenter="enter('7913111081342953879');" onmouseout="out('7913111081342953879');" style=""> 243  			// 判断是否有修改模块的权限                                                                                                </span>
<span class="-3388185289221243217" onmouseenter="enter('-3388185289221243217');" onmouseout="out('-3388185289221243217');" style=""> 244  			checkUserPermissionByProject(project, MOD_INTER);                                                              </span>
<span  style=""> 245                                                                                                                    </span>
<span class="-2337234168619506843" onmouseenter="enter('-2337234168619506843');" onmouseout="out('-2337234168619506843');" style=""> 246  			//同一模块下不允许 url 重复                                                                                              </span>
<span class="-1727492280611767040" onmouseenter="enter('-1727492280611767040');" onmouseout="out('-1727492280611767040');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 247 -			if( !config.isCanRepeatUrl() &amp;&amp; customInterfaceService.countByFullUrl(interFace.getModuleId(),                 </span>
<span class="1797095910007032596" onmouseenter="enter('1797095910007032596');" onmouseout="out('1797095910007032596');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 248 -					module.getUrl() +interFace.getUrl(), interFace.getId()) &gt;0 ){                                                </span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +            InterfaceQuery interfaceQuery = new InterfaceQuery();                                                 </span>
<span class="-6576102208848169069" onmouseenter="enter('-6576102208848169069');" onmouseout="out('-6576102208848169069');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 250 +            interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl()).setExceptId(interFace.getId());"> 250 +            interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl()).se🔵</abbr></span>
<span class="1249147487164872071" onmouseenter="enter('1249147487164872071');" onmouseout="out('1249147487164872071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 251 +			if( !config.isCanRepeatUrl() &amp;&amp; interfaceService.count(interfaceQuery) &gt;0 ){                                   </span>
<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 252  				throw new MyException(MyError.E000004);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253  			}                                                                                                              </span>
<span  style=""> 254                                                                                                                    </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 255  			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                                    </span>
<span class="-1055638939010755303" onmouseenter="enter('-1055638939010755303');" onmouseout="out('-1055638939010755303');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 256 -			customInterfaceService.update(InterfaceAdapter.getModel(interFace), &quot;接口&quot;, &quot;&quot;);                                 </span>
<span class="4401707851467701848" onmouseenter="enter('4401707851467701848');" onmouseout="out('4401707851467701848');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 257 +			interfaceService.update(InterfaceAdapter.getModel(interFace), &quot;接口&quot;, &quot;&quot;);                                       </span>
<span class="40941063765621390" onmouseenter="enter('40941063765621390');" onmouseout="out('40941063765621390');" style=""> 258  			if(interFace.getId().equals(interFace.getProjectId())){                                                        </span>
<span class="8284136097153874854" onmouseenter="enter('8284136097153874854');" onmouseout="out('8284136097153874854');" style=""> 259  				throw new MyException(MyError.E000027);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260  			}                                                                                                              </span>
<span class="-8095562614157245048" onmouseenter="enter('-8095562614157245048');" onmouseout="out('-8095562614157245048');" style=""> 261  			luceneService.update(InterfaceAdapter.getSearchDto(interFace));                                                </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 263  		} else {                                                                                                        </span>
<span class="-7477248359633755306" onmouseenter="enter('-7477248359633755306');" onmouseout="out('-7477248359633755306');" style=""> 264  			checkUserPermissionByProject(projectCache.get(interFace.getProjectId() ), ADD_INTER);                          </span>
<span class="7893577801508787229" onmouseenter="enter('7893577801508787229');" onmouseout="out('7893577801508787229');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 265 -			if(!config.isCanRepeatUrl() &amp;&amp; customInterfaceService.countByFullUrl(interFace.getModuleId(),module.getUrl() + interFace.getUrl(), null)&gt;0){"> 265 -			if(!config.isCanRepeatUrl() &amp;&amp; customInterfaceService.countByFullUrl(interFace.getModuleId(),module.getUrl() + 🔵</abbr></span>
<span class="-5624716949717336642" onmouseenter="enter('-5624716949717336642');" onmouseout="out('-5624716949717336642');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 266 +            InterfaceQuery interfaceQuery = new InterfaceQuery();                                                 </span>
<span class="-7466550613099324542" onmouseenter="enter('-7466550613099324542');" onmouseout="out('-7466550613099324542');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 267 +            interfaceQuery.setModuleId(interFace.getModuleId()).setFullUrl(module.getUrl() +interFace.getUrl());  </span>
<span class="-8914770776061455942" onmouseenter="enter('-8914770776061455942');" onmouseout="out('-8914770776061455942');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 268 +			if(!config.isCanRepeatUrl() &amp;&amp; interfaceService.count(interfaceQuery)&gt;0){                                      </span>
<span class="8772628239303623293" onmouseenter="enter('8772628239303623293');" onmouseout="out('8772628239303623293');" style=""> 269  				return new JsonResult(MyError.E000004);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270  			}                                                                                                              </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 271  			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                                    </span>
<span class="-8789612314220373117" onmouseenter="enter('-8789612314220373117');" onmouseout="out('-8789612314220373117');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 272 -			mybatisInterfaceService.insert(InterfaceAdapter.getModel(interFace));                                          </span>
<span class="618037758910901766" onmouseenter="enter('618037758910901766');" onmouseout="out('618037758910901766');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 273 +			interfaceService.insert(InterfaceAdapter.getModel(interFace));                                                 </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 274  			luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275  		}                                                                                                               </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 276  		return new JsonResult(1, interFace);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277  	}                                                                                                                </span>
<span  style=""> 278                                                                                                                    </span>
<span class="3908622465717054108" onmouseenter="enter('3908622465717054108');" onmouseout="out('3908622465717054108');" style=""> 279  	@RequestMapping(&quot;/delete.do&quot;)                                                                                    </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 280  	@ResponseBody                                                                                                    </span>
<span class="-5585810528016230380" onmouseenter="enter('-5585810528016230380');" onmouseout="out('-5585810528016230380');" style=""> 281  	public JsonResult delete(String id, String ids) throws MyException, IOException{                                 </span>
<span class="5500260682396997685" onmouseenter="enter('5500260682396997685');" onmouseout="out('5500260682396997685');" style=""> 282  		if( MyString.isEmpty(id) &amp;&amp; MyString.isEmpty(ids)){                                                             </span>
<span class="5841283794467303202" onmouseenter="enter('5841283794467303202');" onmouseout="out('5841283794467303202');" style=""> 283  			throw new MyException(MyError.E000029);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 284  		}                                                                                                               </span>
<span class="-8135195691626680328" onmouseenter="enter('-8135195691626680328');" onmouseout="out('-8135195691626680328');" style=""> 285  		if( MyString.isEmpty(ids) ){                                                                                    </span>
<span class="3511947876673837079" onmouseenter="enter('3511947876673837079');" onmouseout="out('3511947876673837079');" style=""> 286  			ids = id;                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 287  		}                                                                                                               </span>
<span  style=""> 288                                                                                                                    </span>
<span class="-2656961914898447548" onmouseenter="enter('-2656961914898447548');" onmouseout="out('-2656961914898447548');" style=""> 289  		for(String tempId : ids.split(&quot;,&quot;)){                                                                            </span>
<span class="-3040966783477954494" onmouseenter="enter('-3040966783477954494');" onmouseout="out('-3040966783477954494');" style=""> 290  			if(MyString.isEmpty(tempId)){                                                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 291  				continue;                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292  			}                                                                                                              </span>
<span class="4615658532965343080" onmouseenter="enter('4615658532965343080');" onmouseout="out('4615658532965343080');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 293 -			InterfaceWithBLOBs interFace = mybatisInterfaceService.getById( tempId );                                      </span>
<span class="6005130977645696533" onmouseenter="enter('6005130977645696533');" onmouseout="out('6005130977645696533');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 294 +			InterfaceWithBLOBs interFace = interfaceService.getById( tempId );                                             </span>
<span class="-3259762685715036382" onmouseenter="enter('-3259762685715036382');" onmouseout="out('-3259762685715036382');" style=""> 295  			checkUserPermissionByProject(interFace.getProjectId(), DEL_INTER);                                             </span>
<span class="1056590746991860519" onmouseenter="enter('1056590746991860519');" onmouseout="out('1056590746991860519');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 296 -			customInterfaceService.delete(interFace.getId(), &quot;接口&quot;, &quot;&quot;);                                                    </span>
<span class="5403926906782818954" onmouseenter="enter('5403926906782818954');" onmouseout="out('5403926906782818954');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 297 +			interfaceService.delete(interFace.getId(), &quot;接口&quot;, &quot;&quot;);                                                          </span>
<span class="2858649065821216875" onmouseenter="enter('2858649065821216875');" onmouseout="out('2858649065821216875');" style=""> 298  			luceneService.delete(new SearchDto(interFace.getId()));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 299  		}                                                                                                               </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 300  		return new JsonResult(1, null);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301  	}                                                                                                                </span>
<span  style=""> 302                                                                                                                    </span>
<span class="3383448423842759854" onmouseenter="enter('3383448423842759854');" onmouseout="out('3383448423842759854');" style=""> 303  	@RequestMapping(&quot;/changeSequence.do&quot;)                                                                            </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 304  	@ResponseBody                                                                                                    </span>
<span class="-4262891591549373351" onmouseenter="enter('-4262891591549373351');" onmouseout="out('-4262891591549373351');" style=""> 305  	public JsonResult changeSequence(@RequestParam String id,@RequestParam String changeId) throws MyException {     </span>
<span class="-8109615337570232534" onmouseenter="enter('-8109615337570232534');" onmouseout="out('-8109615337570232534');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 306 -		InterfaceWithBLOBs change = mybatisInterfaceService.getById(changeId);                                          </span>
<span class="-1139618140683157175" onmouseenter="enter('-1139618140683157175');" onmouseout="out('-1139618140683157175');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 307 -		InterfaceWithBLOBs model = mybatisInterfaceService.getById(id);                                                 </span>
<span class="-114025814901609390" onmouseenter="enter('-114025814901609390');" onmouseout="out('-114025814901609390');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 308 +		InterfaceWithBLOBs change = interfaceService.getById(changeId);                                                 </span>
<span class="1535172332471428490" onmouseenter="enter('1535172332471428490');" onmouseout="out('1535172332471428490');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 309 +		InterfaceWithBLOBs model = interfaceService.getById(id);                                                        </span>
<span class="1373326694122548312" onmouseenter="enter('1373326694122548312');" onmouseout="out('1373326694122548312');" style=""> 310  		checkUserPermissionByProject(model.getProjectId(), MOD_INTER);                                                  </span>
<span class="9185443680929913036" onmouseenter="enter('9185443680929913036');" onmouseout="out('9185443680929913036');" style=""> 311  		checkUserPermissionByProject(change.getProjectId(), MOD_INTER);                                                 </span>
<span  style=""> 312                                                                                                                    </span>
<span class="-6471227968333011823" onmouseenter="enter('-6471227968333011823');" onmouseout="out('-6471227968333011823');" style=""> 313  		int modelSequence = model.getSequence();                                                                        </span>
<span  style=""> 314                                                                                                                    </span>
<span class="-7348627876629533627" onmouseenter="enter('-7348627876629533627');" onmouseout="out('-7348627876629533627');" style=""> 315  		model.setSequence(change.getSequence());                                                                        </span>
<span class="-8403247859037350919" onmouseenter="enter('-8403247859037350919');" onmouseout="out('-8403247859037350919');" style=""> 316  		change.setSequence(modelSequence);                                                                              </span>
<span  style=""> 317                                                                                                                    </span>
<span class="-6504951827173969687" onmouseenter="enter('-6504951827173969687');" onmouseout="out('-6504951827173969687');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 318 -		mybatisInterfaceService.update(model);                                                                          </span>
<span class="-8243206060953081636" onmouseenter="enter('-8243206060953081636');" onmouseout="out('-8243206060953081636');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 319 -		mybatisInterfaceService.update(change);                                                                         </span>
<span class="1992515717850273638" onmouseenter="enter('1992515717850273638');" onmouseout="out('1992515717850273638');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 320 +		interfaceService.update(model);                                                                                 </span>
<span class="8445067308225092068" onmouseenter="enter('8445067308225092068');" onmouseout="out('8445067308225092068');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 321 +		interfaceService.update(change);                                                                                </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 322  		return new JsonResult(1, null);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323  	}                                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="8453884345636310198" onmouseenter="enter('8453884345636310198');" onmouseout="out('8453884345636310198');" style="">   1  package cn.crap.controller.user;                                                                                  </span>
<span  style="">   2                                                                                                                    </span>
<span class="3872670124992133569" onmouseenter="enter('3872670124992133569');" onmouseout="out('3872670124992133569');" style="">   3  import cn.crap.adapter.InterfaceAdapter;                                                                          </span>

<span class="6807184333094047547" onmouseenter="enter('6807184333094047547');" onmouseout="out('6807184333094047547');" style="">   4  import cn.crap.dto.InterfaceDto;                                                                                  </span>
<span class="7929325164483847730" onmouseenter="enter('7929325164483847730');" onmouseout="out('7929325164483847730');" style="">   5  import cn.crap.dto.LoginInfoDto;                                                                                  </span>
<span class="1522833305812512221" onmouseenter="enter('1522833305812512221');" onmouseout="out('1522833305812512221');" style="">   6  import cn.crap.dto.SearchDto;                                                                                     </span>
<span class="-911749451892422883" onmouseenter="enter('-911749451892422883');" onmouseout="out('-911749451892422883');" style="">   7  import cn.crap.enumer.MonitorType;                                                                                </span>
<span class="5139023199245080803" onmouseenter="enter('5139023199245080803');" onmouseout="out('5139023199245080803');" style="">   8  import cn.crap.enumer.MyError;                                                                                    </span>
<span class="-7847071603028321447" onmouseenter="enter('-7847071603028321447');" onmouseout="out('-7847071603028321447');" style="">   9  import cn.crap.framework.JsonResult;                                                                              </span>
<span class="-7574536783671103865" onmouseenter="enter('-7574536783671103865');" onmouseout="out('-7574536783671103865');" style="">  10  import cn.crap.framework.MyException;                                                                             </span>
<span class="-4522781807489195049" onmouseenter="enter('-4522781807489195049');" onmouseout="out('-4522781807489195049');" style="">  11  import cn.crap.framework.base.BaseController;                                                                     </span>
<span class="4903612087055488212" onmouseenter="enter('4903612087055488212');" onmouseout="out('4903612087055488212');" style="">  12  import cn.crap.framework.interceptor.AuthPassport;                                                                </span>
<span class="6918812738981283976" onmouseenter="enter('6918812738981283976');" onmouseout="out('6918812738981283976');" style="">  13  import cn.crap.model.mybatis.Error;                                                                               </span>
<span class="7947320592764196414" onmouseenter="enter('7947320592764196414');" onmouseout="out('7947320592764196414');" style="">  14  import cn.crap.model.mybatis.*;                                                                                   </span>







<span class="2810978048240697020" onmouseenter="enter('2810978048240697020');" onmouseout="out('2810978048240697020');" style="">  15  import cn.crap.service.ISearchService;                                                                            </span>
<span class="3204752822407608187" onmouseenter="enter('3204752822407608187');" onmouseout="out('3204752822407608187');" style="">  16  import cn.crap.service.custom.CustomErrorService;                                                                 </span>
<span class="-5830266922446194054" onmouseenter="enter('-5830266922446194054');" onmouseout="out('-5830266922446194054');" style="">  17  import cn.crap.service.custom.CustomInterfaceService;                                                             </span>
<span class="3152424729930326541" onmouseenter="enter('3152424729930326541');" onmouseout="out('3152424729930326541');" style="">  18  import cn.crap.service.mybatis.InterfaceService;                                                                  </span>
<span class="4279274079824086333" onmouseenter="enter('4279274079824086333');" onmouseout="out('4279274079824086333');" style="">  19  import cn.crap.beans.Config;                                                                                      </span>
<span class="3571843901690526929" onmouseenter="enter('3571843901690526929');" onmouseout="out('3571843901690526929');" style="">  20  import cn.crap.utils.*;                                                                                           </span>





<span class="9045939009765002950" onmouseenter="enter('9045939009765002950');" onmouseout="out('9045939009765002950');" style="">  21  import net.sf.json.JSONArray;                                                                                     </span>
<span class="-6148326362900055524" onmouseenter="enter('-6148326362900055524');" onmouseout="out('-6148326362900055524');" style="">  22  import org.springframework.beans.factory.annotation.Autowired;                                                    </span>
<span class="4128309806836178094" onmouseenter="enter('4128309806836178094');" onmouseout="out('4128309806836178094');" style="">  23  import org.springframework.stereotype.Controller;                                                                 </span>
<span class="7608804911988512946" onmouseenter="enter('7608804911988512946');" onmouseout="out('7608804911988512946');" style="">  24  import org.springframework.util.Assert;                                                                           </span>
<span class="2718246165073723950" onmouseenter="enter('2718246165073723950');" onmouseout="out('2718246165073723950');" style="">  25  import org.springframework.web.bind.annotation.ModelAttribute;                                                    </span>
<span class="-7989471178862524182" onmouseenter="enter('-7989471178862524182');" onmouseout="out('-7989471178862524182');" style="">  26  import org.springframework.web.bind.annotation.RequestMapping;                                                    </span>
<span class="-8913037601281016619" onmouseenter="enter('-8913037601281016619');" onmouseout="out('-8913037601281016619');" style="">  27  import org.springframework.web.bind.annotation.RequestParam;                                                      </span>
<span class="-7662224364501075428" onmouseenter="enter('-7662224364501075428');" onmouseout="out('-7662224364501075428');" style="">  28  import org.springframework.web.bind.annotation.ResponseBody;                                                      </span>
<span  style="">  29                                                                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  30  import java.io.IOException;                                                                                       </span>
<span class="1748005127055838442" onmouseenter="enter('1748005127055838442');" onmouseout="out('1748005127055838442');" style="">  31  import java.util.Date;                                                                                            </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  32  import java.util.List;                                                                                            </span>
<span  style="">  33                                                                                                                    </span>
<span class="4777805177773543995" onmouseenter="enter('4777805177773543995');" onmouseout="out('4777805177773543995');" style="">  34  @Controller                                                                                                       </span>
<span class="-1946225143665328935" onmouseenter="enter('-1946225143665328935');" onmouseout="out('-1946225143665328935');" style="">  35  @RequestMapping(&quot;/user/interface&quot;)                                                                                </span>
<span class="6388668049573310758" onmouseenter="enter('6388668049573310758');" onmouseout="out('6388668049573310758');" style="">  36  public class InterfaceController extends BaseController{                                                          </span>
<span  style="">  37                                                                                                                    </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  38  	@Autowired                                                                                                       </span>
<span class="2899478971554593826" onmouseenter="enter('2899478971554593826');" onmouseout="out('2899478971554593826');" style="">  39  	private CustomInterfaceService customInterfaceService;                                                           </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  40  	@Autowired                                                                                                       </span>
<span class="7679472003521629176" onmouseenter="enter('7679472003521629176');" onmouseout="out('7679472003521629176');" style="">  41  	private InterfaceService mybatisInterfaceService;                                                                </span>

<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  42  	@Autowired                                                                                                       </span>
<span class="-925519006397285322" onmouseenter="enter('-925519006397285322');" onmouseout="out('-925519006397285322');" style="">  43  	private ISearchService luceneService;                                                                            </span>
<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  44  	@Autowired                                                                                                       </span>
<span class="-5513827626367361969" onmouseenter="enter('-5513827626367361969');" onmouseout="out('-5513827626367361969');" style="">  45  	private CustomErrorService customErrorService;                                                                   </span>

<span class="5554564923016007608" onmouseenter="enter('5554564923016007608');" onmouseout="out('5554564923016007608');" style="">  46  	@Autowired                                                                                                       </span>
<span class="-3607813097408339844" onmouseenter="enter('-3607813097408339844');" onmouseout="out('-3607813097408339844');" style="">  47  	private Config config;                                                                                           </span>
<span  style="">  48                                                                                                                    </span>
<span  style="">  49                                                                                                                    </span>
<span class="3216165995479628896" onmouseenter="enter('3216165995479628896');" onmouseout="out('3216165995479628896');" style="">  50  	@RequestMapping(&quot;/list.do&quot;)                                                                                      </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  51  	@ResponseBody                                                                                                    </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style="">  52  	@AuthPassport                                                                                                    </span>
<span class="406281474848555250" onmouseenter="enter('406281474848555250');" onmouseout="out('406281474848555250');" style="">  53  	public JsonResult list(@RequestParam String moduleId, String interfaceName, String url,                          </span>
<span class="6957141086400891835" onmouseenter="enter('6957141086400891835');" onmouseout="out('6957141086400891835');" style="">  54  			 Integer currentPage) throws MyException{                                                                      </span>
<span class="-3788017470690474402" onmouseenter="enter('-3788017470690474402');" onmouseout="out('-3788017470690474402');" style="">  55  		Page page= new Page(currentPage);                                                                               </span>
<span class="-1257262529751619377" onmouseenter="enter('-1257262529751619377');" onmouseout="out('-1257262529751619377');" style="">  56  		checkUserPermissionByModuleId(moduleId, VIEW);                                                                  </span>
<span  style="">  57                                                                                                                    </span>
<span class="79352456157947925" onmouseenter="enter('79352456157947925');" onmouseout="out('79352456157947925');" style="">  58  		InterfaceCriteria example = new InterfaceCriteria();                                                            </span>
<span class="877235730442223421" onmouseenter="enter('877235730442223421');" onmouseout="out('877235730442223421');" style="">  59  		InterfaceCriteria.Criteria criteria = example.createCriteria().andModuleIdEqualTo(moduleId);                    </span>
<span class="5947007371237771236" onmouseenter="enter('5947007371237771236');" onmouseout="out('5947007371237771236');" style="">  60  		if (!MyString.isEmpty(interfaceName)){                                                                          </span>
<span class="-1349920481569799161" onmouseenter="enter('-1349920481569799161');" onmouseout="out('-1349920481569799161');" style="">  61  			criteria.andInterfaceNameLike(&quot;%&quot; + interfaceName + &quot;%&quot;);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  62  		}                                                                                                               </span>
<span class="-3262307933636202428" onmouseenter="enter('-3262307933636202428');" onmouseout="out('-3262307933636202428');" style="">  63  		if (!MyString.isEmpty(url)){                                                                                    </span>
<span class="-6698610763898127298" onmouseenter="enter('-6698610763898127298');" onmouseout="out('-6698610763898127298');" style="">  64  			criteria.andFullUrlLike(&quot;%&quot; + url + &quot;%&quot;);                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  65  		}                                                                                                               </span>
<span  style="">  66                                                                                                                    </span>
<span class="-8743619996132367741" onmouseenter="enter('-8743619996132367741');" onmouseout="out('-8743619996132367741');" style=""><abbr title="  67  		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example), null);">  67  		List&lt;InterfaceDto&gt; interfaces = InterfaceAdapter.getDto(mybatisInterfaceService.selectByExampleWithBLOBs(example🔵</abbr></span>
<span class="7334426988050538035" onmouseenter="enter('7334426988050538035');" onmouseout="out('7334426988050538035');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  68 +        page.setAllRow(mybatisInterfaceService.countByExample(example));                                          </span>









<span class="-6516659540432669121" onmouseenter="enter('-6516659540432669121');" onmouseout="out('-6516659540432669121');" style="">  69  		JsonResult result = new JsonResult(1, interfaces, page);                                                        </span>
<span class="-3039605850617260143" onmouseenter="enter('-3039605850617260143');" onmouseout="out('-3039605850617260143');" style="">  70  		result.putOthers(&quot;crumbs&quot;, Tools.getCrumbs(&quot;接口列表:&quot;+ moduleCache.get(moduleId).getName(),&quot;void&quot;))                </span>
<span class="-2242017820679200314" onmouseenter="enter('-2242017820679200314');" onmouseout="out('-2242017820679200314');" style="">  71  				.putOthers(&quot;module&quot;, moduleCache.get(moduleId));                                                              </span>
<span  style="">  72                                                                                                                    </span>
<span class="-6419540350677864751" onmouseenter="enter('-6419540350677864751');" onmouseout="out('-6419540350677864751');" style="">  73  		return result;                                                                                                  </span>
<span  style="">  74                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  75  	}                                                                                                                </span>
<span  style="">  76                                                                                                                    </span>
<span class="-557002042091694149" onmouseenter="enter('-557002042091694149');" onmouseout="out('-557002042091694149');" style="">  77  	@RequestMapping(&quot;/detail.do&quot;)                                                                                    </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style="">  78  	@ResponseBody                                                                                                    </span>
<span class="-7956266425262709264" onmouseenter="enter('-7956266425262709264');" onmouseout="out('-7956266425262709264');" style="">  79  	public JsonResult detail(String id, String moduleId) throws MyException {                                        </span>
<span class="-5013732608106508542" onmouseenter="enter('-5013732608106508542');" onmouseout="out('-5013732608106508542');" style="">  80  		InterfaceWithBLOBs model;                                                                                       </span>
<span class="6526027684909256553" onmouseenter="enter('6526027684909256553');" onmouseout="out('6526027684909256553');" style="">  81  		Module module = null;                                                                                           </span>
<span class="-6983393444998086393" onmouseenter="enter('-6983393444998086393');" onmouseout="out('-6983393444998086393');" style="">  82  		if(id != null){                                                                                                 </span>
<span class="2136695934268049965" onmouseenter="enter('2136695934268049965');" onmouseout="out('2136695934268049965');" style="">  83  			model= mybatisInterfaceService.getById(id);                                                                    </span>

<span class="1040064000347861178" onmouseenter="enter('1040064000347861178');" onmouseout="out('1040064000347861178');" style="">  84  			module = moduleCache.get(model.getModuleId());                                                                 </span>
<span class="-185843402063825431" onmouseenter="enter('-185843402063825431');" onmouseout="out('-185843402063825431');" style="">  85  			checkUserPermissionByProject(model.getProjectId(), VIEW);                                                      </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style="">  86  		}else{                                                                                                          </span>
<span class="-7029962562203235323" onmouseenter="enter('-7029962562203235323');" onmouseout="out('-7029962562203235323');" style="">  87  			model = new InterfaceWithBLOBs();                                                                              </span>
<span class="-2587857982027861322" onmouseenter="enter('-2587857982027861322');" onmouseout="out('-2587857982027861322');" style="">  88  			module = moduleCache.get(moduleId);                                                                            </span>
<span class="-853942339085784102" onmouseenter="enter('-853942339085784102');" onmouseout="out('-853942339085784102');" style="">  89  			model.setModuleId( moduleId);                                                                                  </span>
<span class="-5617097986837608318" onmouseenter="enter('-5617097986837608318');" onmouseout="out('-5617097986837608318');" style="">  90  			model.setProjectId(module.getProjectId());                                                                     </span>
<span class="4623621077757195404" onmouseenter="enter('4623621077757195404');" onmouseout="out('4623621077757195404');" style="">  91  			model.setParam(&quot;form=[]&quot;);                                                                                     </span>
<span class="-646854625022819456" onmouseenter="enter('-646854625022819456');" onmouseout="out('-646854625022819456');" style="">  92  			model.setResponseParam(&quot;[]&quot;);                                                                                  </span>
<span class="-7417036509485016685" onmouseenter="enter('-7417036509485016685');" onmouseout="out('-7417036509485016685');" style="">  93  			model.setHeader(&quot;[]&quot;);                                                                                         </span>
<span class="2272429349124999400" onmouseenter="enter('2272429349124999400');" onmouseout="out('2272429349124999400');" style="">  94  			model.setParamRemark(&quot;[]&quot;);                                                                                    </span>
<span class="-8254387329445674854" onmouseenter="enter('-8254387329445674854');" onmouseout="out('-8254387329445674854');" style="">  95  			if(!MyString.isEmpty(module.getTemplateId())){                                                                 </span>
<span class="15965008614372872" onmouseenter="enter('15965008614372872');" onmouseout="out('15965008614372872');" style="">  96  				InterfaceWithBLOBs template = mybatisInterfaceService.getById(module.getTemplateId());                        </span>

<span class="5678506116785444717" onmouseenter="enter('5678506116785444717');" onmouseout="out('5678506116785444717');" style="">  97  				// 根据模板初始化接口                                                                                                  </span>
<span class="-4452779201008749745" onmouseenter="enter('-4452779201008749745');" onmouseout="out('-4452779201008749745');" style="">  98  				if(template != null){                                                                                         </span>
<span class="5089751341604219548" onmouseenter="enter('5089751341604219548');" onmouseout="out('5089751341604219548');" style="">  99  					model.setHeader(template.getHeader());                                                                       </span>
<span class="-7527905069934626121" onmouseenter="enter('-7527905069934626121');" onmouseout="out('-7527905069934626121');" style=""> 100  					model.setParam(template.getParam());                                                                         </span>
<span class="-7059470924530166388" onmouseenter="enter('-7059470924530166388');" onmouseout="out('-7059470924530166388');" style=""> 101  					model.setMethod(template.getMethod());                                                                       </span>
<span class="5940911261599321088" onmouseenter="enter('5940911261599321088');" onmouseout="out('5940911261599321088');" style=""> 102  					model.setVersion(template.getVersion());                                                                     </span>
<span class="-3448468761886356175" onmouseenter="enter('-3448468761886356175');" onmouseout="out('-3448468761886356175');" style=""> 103  					model.setParamRemark(template.getParamRemark());                                                             </span>
<span class="1622152235047204734" onmouseenter="enter('1622152235047204734');" onmouseout="out('1622152235047204734');" style=""> 104  					model.setResponseParam(template.getResponseParam());                                                         </span>
<span class="-6414379266760239220" onmouseenter="enter('-6414379266760239220');" onmouseout="out('-6414379266760239220');" style=""> 105  					model.setErrorList(template.getErrorList());                                                                 </span>
<span class="-379237002060688021" onmouseenter="enter('-379237002060688021');" onmouseout="out('-379237002060688021');" style=""> 106  					model.setErrors(template.getErrors());                                                                       </span>
<span class="2306293464665606986" onmouseenter="enter('2306293464665606986');" onmouseout="out('2306293464665606986');" style=""> 107  					model.setFalseExam(template.getFalseExam());                                                                 </span>
<span class="5307078882417853010" onmouseenter="enter('5307078882417853010');" onmouseout="out('5307078882417853010');" style=""> 108  					model.setTrueExam(template.getTrueExam());                                                                   </span>
<span class="-994236842464253118" onmouseenter="enter('-994236842464253118');" onmouseout="out('-994236842464253118');" style=""> 109  					model.setStatus(template.getStatus());                                                                       </span>
<span class="-2721857626840181883" onmouseenter="enter('-2721857626840181883');" onmouseout="out('-2721857626840181883');" style=""> 110  					model.setContentType(template.getContentType());                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111  				}                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 112  			}                                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113  		}                                                                                                               </span>
<span class="-3285112137533597017" onmouseenter="enter('-3285112137533597017');" onmouseout="out('-3285112137533597017');" style=""> 114  		return new JsonResult(1, InterfaceAdapter.getDto(model, module, false));                                        </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115  	}                                                                                                                </span>
<span  style=""> 116                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 117  	/**                                                                                                              </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 118  	 * @param interFace                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 119  	 * @return                                                                                                       </span>
<span class="-5665355684135370133" onmouseenter="enter('-5665355684135370133');" onmouseout="out('-5665355684135370133');" style=""> 120  	 * @throws MyException                                                                                           </span>
<span class="-2042953791166134795" onmouseenter="enter('-2042953791166134795');" onmouseout="out('-2042953791166134795');" style=""> 121  	 * @throws IOException                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 122  	 */                                                                                                              </span>
<span class="3944392597235221522" onmouseenter="enter('3944392597235221522');" onmouseout="out('3944392597235221522');" style=""> 123  	@RequestMapping(&quot;/copy.do&quot;)                                                                                      </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 124  	@ResponseBody                                                                                                    </span>
<span class="1639735162589969103" onmouseenter="enter('1639735162589969103');" onmouseout="out('1639735162589969103');" style=""> 125  	public JsonResult copy(@ModelAttribute InterfaceDto interFace) throws MyException, IOException {                 </span>
<span class="-8206169773439054267" onmouseenter="enter('-8206169773439054267');" onmouseout="out('-8206169773439054267');" style=""> 126  		//判断是否拥有该模块的权限                                                                                                  </span>
<span class="2279808889297804532" onmouseenter="enter('2279808889297804532');" onmouseout="out('2279808889297804532');" style=""> 127  		checkUserPermissionByProject(interFace.getProjectId(), ADD_INTER);                                              </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 128  		Module module = moduleCache.get(interFace.getModuleId());                                                       </span>
<span  style=""> 129                                                                                                                    </span>
<span class="6932488038728960880" onmouseenter="enter('6932488038728960880');" onmouseout="out('6932488038728960880');" style=""> 130  		if(!config.isCanRepeatUrl()){                                                                                   </span>
<span class="79352456157947925" onmouseenter="enter('79352456157947925');" onmouseout="out('79352456157947925');" style=""> 131  			InterfaceCriteria example = new InterfaceCriteria();                                                           </span>
<span class="1875924719643896699" onmouseenter="enter('1875924719643896699');" onmouseout="out('1875924719643896699');" style=""> 132  			InterfaceCriteria.Criteria criteria = example.createCriteria();                                                </span>
<span class="8511472322804707057" onmouseenter="enter('8511472322804707057');" onmouseout="out('8511472322804707057');" style=""> 133  			criteria.andModuleIdEqualTo(interFace.getModuleId()).andFullUrlEqualTo(module.getUrl() + interFace.getUrl());  </span>
<span class="4391789810700113516" onmouseenter="enter('4391789810700113516');" onmouseout="out('4391789810700113516');" style=""> 134  			if (mybatisInterfaceService.countByExample(example) &gt; 0){                                                      </span>

<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 135  				throw new MyException(MyError.E000004);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136  			}                                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137  		}                                                                                                               </span>
<span class="-4927829934273936544" onmouseenter="enter('-4927829934273936544');" onmouseout="out('-4927829934273936544');" style=""> 138  		interFace.setId(null);                                                                                          </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 139  		interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                                     </span>
<span class="-8789612314220373117" onmouseenter="enter('-8789612314220373117');" onmouseout="out('-8789612314220373117');" style=""> 140  		mybatisInterfaceService.insert(InterfaceAdapter.getModel(interFace));                                           </span>

<span  style=""> 141                                                                                                                    </span>
<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 142  		luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                                    </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 143  		return new JsonResult(1, interFace);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144  	}                                                                                                                </span>
<span  style=""> 145                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 146  	/**                                                                                                              </span>
<span class="-7492619764061686694" onmouseenter="enter('-7492619764061686694');" onmouseout="out('-7492619764061686694');" style=""> 147  	 * 根据参数生成请求示例                                                                                                    </span>
<span class="-4379264201720330868" onmouseenter="enter('-4379264201720330868');" onmouseout="out('-4379264201720330868');" style=""> 148  	 * @param interFace                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 149  	 * @return                                                                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 150  	 */                                                                                                              </span>
<span class="4685904336828752448" onmouseenter="enter('4685904336828752448');" onmouseout="out('4685904336828752448');" style=""> 151  	@RequestMapping(&quot;/getRequestExam.do&quot;)                                                                            </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 152  	@ResponseBody                                                                                                    </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 153  	@AuthPassport                                                                                                    </span>
<span class="3638284629125143669" onmouseenter="enter('3638284629125143669');" onmouseout="out('3638284629125143669');" style=""> 154  	public JsonResult getRequestExam(@ModelAttribute InterfaceDto interFace) {                                       </span>
<span class="-551733375967960079" onmouseenter="enter('-551733375967960079');" onmouseout="out('-551733375967960079');" style=""> 155  		customInterfaceService.getInterFaceRequestExam(interFace);                                                      </span>

<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 156  		return new JsonResult(1, interFace);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157  	}                                                                                                                </span>
<span  style=""> 158                                                                                                                    </span>
<span class="9102117119873215850" onmouseenter="enter('9102117119873215850');" onmouseout="out('9102117119873215850');" style=""> 159  	@RequestMapping(&quot;/addOrUpdate.do&quot;)                                                                               </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 160  	@ResponseBody                                                                                                    </span>
<span class="381720208389073649" onmouseenter="enter('381720208389073649');" onmouseout="out('381720208389073649');" style=""> 161  	@AuthPassport                                                                                                    </span>
<span class="-2371211080264372097" onmouseenter="enter('-2371211080264372097');" onmouseout="out('-2371211080264372097');" style=""> 162  	public JsonResult addOrUpdate(@ModelAttribute InterfaceDto interFace) throws IOException, MyException {          </span>
<span class="-7246000527363885378" onmouseenter="enter('-7246000527363885378');" onmouseout="out('-7246000527363885378');" style=""> 163  		Assert.notNull(interFace.getProjectId(), &quot;projectId can&#x27;t be null&quot;);                                            </span>
<span  style=""> 164                                                                                                                    </span>
<span class="3680314398792253191" onmouseenter="enter('3680314398792253191');" onmouseout="out('3680314398792253191');" style=""> 165  		if(MyString.isEmpty(interFace.getUrl())) {                                                                      </span>
<span class="-2022936812063158899" onmouseenter="enter('-2022936812063158899');" onmouseout="out('-2022936812063158899');" style=""> 166  			return new JsonResult(MyError.E000005);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167  		}                                                                                                               </span>
<span class="-1520907386631176867" onmouseenter="enter('-1520907386631176867');" onmouseout="out('-1520907386631176867');" style=""> 168  		interFace.setUrl(interFace.getUrl().trim());                                                                    </span>
<span  style=""> 169                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 170  		/**                                                                                                             </span>
<span class="7045250225799015466" onmouseenter="enter('7045250225799015466');" onmouseout="out('7045250225799015466');" style=""> 171  		 * 根据选着的错误码id，组装json字符串                                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 172  		 */                                                                                                             </span>
<span class="28798638763014117" onmouseenter="enter('28798638763014117');" onmouseout="out('28798638763014117');" style=""> 173  		String errorIds = interFace.getErrorList();                                                                     </span>
<span class="-3521543674443001094" onmouseenter="enter('-3521543674443001094');" onmouseout="out('-3521543674443001094');" style=""><abbr title=" 174  		List&lt;Error&gt; errors  = customErrorService.queryByProjectIdAndErrorCode(interFace.getProjectId(), Tools.getIdsFromField(errorIds));"> 174  		List&lt;Error&gt; errors  = customErrorService.queryByProjectIdAndErrorCode(interFace.getProjectId(), Tools.getIdsFrom🔵</abbr></span>



<span class="8099633558915995513" onmouseenter="enter('8099633558915995513');" onmouseout="out('8099633558915995513');" style=""> 175  		interFace.setErrors(JSONArray.fromObject(errors).toString());                                                   </span>
<span  style=""> 176                                                                                                                    </span>
<span class="1766529869277441370" onmouseenter="enter('1766529869277441370');" onmouseout="out('1766529869277441370');" style=""> 177  		LoginInfoDto user = LoginUserHelper.getUser();                                                                  </span>
<span class="3045017157654780991" onmouseenter="enter('3045017157654780991');" onmouseout="out('3045017157654780991');" style=""> 178  		interFace.setUpdateBy(&quot;userName：&quot;+user.getUserName()+&quot; | trueName：&quot;+ user.getTrueName());                       </span>
<span  style=""> 179                                                                                                                    </span>
<span class="8532154523355485279" onmouseenter="enter('8532154523355485279');" onmouseout="out('8532154523355485279');" style=""> 180  		//请求示例为空，则自动添加                                                                                                  </span>
<span class="4679476040111179483" onmouseenter="enter('4679476040111179483');" onmouseout="out('4679476040111179483');" style=""> 181  		if(MyString.isEmpty(interFace.getRequestExam())){                                                               </span>
<span class="-551733375967960079" onmouseenter="enter('-551733375967960079');" onmouseout="out('-551733375967960079');" style=""> 182  			customInterfaceService.getInterFaceRequestExam(interFace);                                                     </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 183  		}                                                                                                               </span>
<span class="2009751668094616815" onmouseenter="enter('2009751668094616815');" onmouseout="out('2009751668094616815');" style=""> 184          interFace.setMonitorType(MonitorType.No.getValue());                                                      </span>
<span class="-941211001760564316" onmouseenter="enter('-941211001760564316');" onmouseout="out('-941211001760564316');" style=""> 185  		//检查邮件格式是否正确                                                                                                    </span>
<span class="-22728527345241303" onmouseenter="enter('-22728527345241303');" onmouseout="out('-22728527345241303');" style=""> 186  		/**if(interFace.getMonitorType() != MonitorType.No.getValue()){                                                 </span>
<span class="6470615935665347659" onmouseenter="enter('6470615935665347659');" onmouseout="out('6470615935665347659');" style=""> 187  			if(!MyString.isEmpty(interFace.getMonitorEmails())){                                                           </span>
<span class="9144489970704028395" onmouseenter="enter('9144489970704028395');" onmouseout="out('9144489970704028395');" style=""> 188  				for(String email : interFace.getMonitorEmails().split(&quot;;&quot;)){                                                  </span>
<span class="1445021202833529364" onmouseenter="enter('1445021202833529364');" onmouseout="out('1445021202833529364');" style=""> 189  					if( !Tools.checkEmail(email) ){                                                                              </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 190  						throw new MyException(E000032&quot;);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191  					}                                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 192  				}                                                                                                             </span>
<span class="2918192000430827733" onmouseenter="enter('2918192000430827733');" onmouseout="out('2918192000430827733');" style=""> 193  			}else{                                                                                                         </span>
<span class="7348859531950873456" onmouseenter="enter('7348859531950873456');" onmouseout="out('7348859531950873456');" style=""> 194  				throw new MyException(E000032&quot;);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195  			}                                                                                                              </span>
<span class="4278934915650879980" onmouseenter="enter('4278934915650879980');" onmouseout="out('4278934915650879980');" style=""> 196  		}**/                                                                                                            </span>
<span  style=""> 197                                                                                                                    </span>
<span class="4900000768952865515" onmouseenter="enter('4900000768952865515');" onmouseout="out('4900000768952865515');" style=""> 198  		Module module = moduleCache.get(interFace.getModuleId());                                                       </span>
<span class="5243642841384736036" onmouseenter="enter('5243642841384736036');" onmouseout="out('5243642841384736036');" style=""> 199  		if (!MyString.isEmpty(interFace.getId())) {                                                                     </span>
<span class="4634617091812320018" onmouseenter="enter('4634617091812320018');" onmouseout="out('4634617091812320018');" style=""> 200  			String oldModuleId = mybatisInterfaceService.getById(interFace.getId()).getModuleId();                         </span>

<span class="-2347736199422220093" onmouseenter="enter('-2347736199422220093');" onmouseout="out('-2347736199422220093');" style=""> 201  			String projectId = moduleCache.get(oldModuleId).getProjectId();                                                </span>
<span class="3404097771773836763" onmouseenter="enter('3404097771773836763');" onmouseout="out('3404097771773836763');" style=""> 202  			Project project = projectCache.get(interFace.getProjectId() );                                                 </span>
<span  style=""> 203                                                                                                                    </span>
<span class="8257633002726469813" onmouseenter="enter('8257633002726469813');" onmouseout="out('8257633002726469813');" style=""> 204  			// 接口只能在同一个项目下的模块中移动                                                                                           </span>
<span class="-8654578892208964423" onmouseenter="enter('-8654578892208964423');" onmouseout="out('-8654578892208964423');" style=""> 205  			if( !projectId.equals(project.getId())){                                                                       </span>
<span class="3828115358811128245" onmouseenter="enter('3828115358811128245');" onmouseout="out('3828115358811128245');" style=""> 206  				throw new MyException(MyError.E000047);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 207  			}                                                                                                              </span>
<span class="7913111081342953879" onmouseenter="enter('7913111081342953879');" onmouseout="out('7913111081342953879');" style=""> 208  			// 判断是否有修改模块的权限                                                                                                </span>
<span class="-3388185289221243217" onmouseenter="enter('-3388185289221243217');" onmouseout="out('-3388185289221243217');" style=""> 209  			checkUserPermissionByProject(project, MOD_INTER);                                                              </span>
<span  style=""> 210                                                                                                                    </span>
<span class="-2337234168619506843" onmouseenter="enter('-2337234168619506843');" onmouseout="out('-2337234168619506843');" style=""> 211  			//同一模块下不允许 url 重复                                                                                              </span>
<span class="-1727492280611767040" onmouseenter="enter('-1727492280611767040');" onmouseout="out('-1727492280611767040');" style=""> 212  			if( !config.isCanRepeatUrl() &amp;&amp; customInterfaceService.countByFullUrl(interFace.getModuleId(),                 </span>
<span class="1797095910007032596" onmouseenter="enter('1797095910007032596');" onmouseout="out('1797095910007032596');" style=""> 213  					module.getUrl() +interFace.getUrl(), interFace.getId()) &gt;0 ){                                                </span>



<span class="9002550931415075161" onmouseenter="enter('9002550931415075161');" onmouseout="out('9002550931415075161');" style=""> 214  				throw new MyException(MyError.E000004);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215  			}                                                                                                              </span>
<span  style=""> 216                                                                                                                    </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 217  			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                                    </span>
<span class="-1055638939010755303" onmouseenter="enter('-1055638939010755303');" onmouseout="out('-1055638939010755303');" style=""> 218  			customInterfaceService.update(InterfaceAdapter.getModel(interFace), &quot;接口&quot;, &quot;&quot;);                                 </span>

<span class="40941063765621390" onmouseenter="enter('40941063765621390');" onmouseout="out('40941063765621390');" style=""> 219  			if(interFace.getId().equals(interFace.getProjectId())){                                                        </span>
<span class="8284136097153874854" onmouseenter="enter('8284136097153874854');" onmouseout="out('8284136097153874854');" style=""> 220  				throw new MyException(MyError.E000027);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221  			}                                                                                                              </span>
<span class="-8095562614157245048" onmouseenter="enter('-8095562614157245048');" onmouseout="out('-8095562614157245048');" style=""> 222  			luceneService.update(InterfaceAdapter.getSearchDto(interFace));                                                </span>
<span  style=""> 223                                                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 224  		} else {                                                                                                        </span>
<span class="-7477248359633755306" onmouseenter="enter('-7477248359633755306');" onmouseout="out('-7477248359633755306');" style=""> 225  			checkUserPermissionByProject(projectCache.get(interFace.getProjectId() ), ADD_INTER);                          </span>
<span class="7893577801508787229" onmouseenter="enter('7893577801508787229');" onmouseout="out('7893577801508787229');" style=""><abbr title=" 226  			if(!config.isCanRepeatUrl() &amp;&amp; customInterfaceService.countByFullUrl(interFace.getModuleId(),module.getUrl() + interFace.getUrl(), null)&gt;0){"> 226  			if(!config.isCanRepeatUrl() &amp;&amp; customInterfaceService.countByFullUrl(interFace.getModuleId(),module.getUrl() + 🔵</abbr></span>



<span class="8772628239303623293" onmouseenter="enter('8772628239303623293');" onmouseout="out('8772628239303623293');" style=""> 227  				return new JsonResult(MyError.E000004);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 228  			}                                                                                                              </span>
<span class="5384413444251314180" onmouseenter="enter('5384413444251314180');" onmouseout="out('5384413444251314180');" style=""> 229  			interFace.setFullUrl(module.getUrl() + interFace.getUrl());                                                    </span>
<span class="-8789612314220373117" onmouseenter="enter('-8789612314220373117');" onmouseout="out('-8789612314220373117');" style=""> 230  			mybatisInterfaceService.insert(InterfaceAdapter.getModel(interFace));                                          </span>

<span class="6969598331868004910" onmouseenter="enter('6969598331868004910');" onmouseout="out('6969598331868004910');" style=""> 231  			luceneService.add(InterfaceAdapter.getSearchDto(interFace));                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232  		}                                                                                                               </span>
<span class="6925597905290627630" onmouseenter="enter('6925597905290627630');" onmouseout="out('6925597905290627630');" style=""> 233  		return new JsonResult(1, interFace);                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 234  	}                                                                                                                </span>
<span  style=""> 235                                                                                                                    </span>
<span class="3908622465717054108" onmouseenter="enter('3908622465717054108');" onmouseout="out('3908622465717054108');" style=""> 236  	@RequestMapping(&quot;/delete.do&quot;)                                                                                    </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 237  	@ResponseBody                                                                                                    </span>
<span class="-5585810528016230380" onmouseenter="enter('-5585810528016230380');" onmouseout="out('-5585810528016230380');" style=""> 238  	public JsonResult delete(String id, String ids) throws MyException, IOException{                                 </span>
<span class="5500260682396997685" onmouseenter="enter('5500260682396997685');" onmouseout="out('5500260682396997685');" style=""> 239  		if( MyString.isEmpty(id) &amp;&amp; MyString.isEmpty(ids)){                                                             </span>
<span class="5841283794467303202" onmouseenter="enter('5841283794467303202');" onmouseout="out('5841283794467303202');" style=""> 240  			throw new MyException(MyError.E000029);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241  		}                                                                                                               </span>
<span class="-8135195691626680328" onmouseenter="enter('-8135195691626680328');" onmouseout="out('-8135195691626680328');" style=""> 242  		if( MyString.isEmpty(ids) ){                                                                                    </span>
<span class="3511947876673837079" onmouseenter="enter('3511947876673837079');" onmouseout="out('3511947876673837079');" style=""> 243  			ids = id;                                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 244  		}                                                                                                               </span>
<span  style=""> 245                                                                                                                    </span>
<span class="-2656961914898447548" onmouseenter="enter('-2656961914898447548');" onmouseout="out('-2656961914898447548');" style=""> 246  		for(String tempId : ids.split(&quot;,&quot;)){                                                                            </span>
<span class="-3040966783477954494" onmouseenter="enter('-3040966783477954494');" onmouseout="out('-3040966783477954494');" style=""> 247  			if(MyString.isEmpty(tempId)){                                                                                  </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 248  				continue;                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249  			}                                                                                                              </span>
<span class="4615658532965343080" onmouseenter="enter('4615658532965343080');" onmouseout="out('4615658532965343080');" style=""> 250  			InterfaceWithBLOBs interFace = mybatisInterfaceService.getById( tempId );                                      </span>

<span class="-3259762685715036382" onmouseenter="enter('-3259762685715036382');" onmouseout="out('-3259762685715036382');" style=""> 251  			checkUserPermissionByProject(interFace.getProjectId(), DEL_INTER);                                             </span>
<span class="1056590746991860519" onmouseenter="enter('1056590746991860519');" onmouseout="out('1056590746991860519');" style=""> 252  			customInterfaceService.delete(interFace.getId(), &quot;接口&quot;, &quot;&quot;);                                                    </span>

<span class="2858649065821216875" onmouseenter="enter('2858649065821216875');" onmouseout="out('2858649065821216875');" style=""> 253  			luceneService.delete(new SearchDto(interFace.getId()));                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254  		}                                                                                                               </span>
<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 255  		return new JsonResult(1, null);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256  	}                                                                                                                </span>
<span  style=""> 257                                                                                                                    </span>
<span class="3383448423842759854" onmouseenter="enter('3383448423842759854');" onmouseout="out('3383448423842759854');" style=""> 258  	@RequestMapping(&quot;/changeSequence.do&quot;)                                                                            </span>
<span class="3400436135683901540" onmouseenter="enter('3400436135683901540');" onmouseout="out('3400436135683901540');" style=""> 259  	@ResponseBody                                                                                                    </span>
<span class="-4262891591549373351" onmouseenter="enter('-4262891591549373351');" onmouseout="out('-4262891591549373351');" style=""> 260  	public JsonResult changeSequence(@RequestParam String id,@RequestParam String changeId) throws MyException {     </span>
<span class="-8109615337570232534" onmouseenter="enter('-8109615337570232534');" onmouseout="out('-8109615337570232534');" style=""> 261  		InterfaceWithBLOBs change = mybatisInterfaceService.getById(changeId);                                          </span>
<span class="-1139618140683157175" onmouseenter="enter('-1139618140683157175');" onmouseout="out('-1139618140683157175');" style=""> 262  		InterfaceWithBLOBs model = mybatisInterfaceService.getById(id);                                                 </span>


<span class="1373326694122548312" onmouseenter="enter('1373326694122548312');" onmouseout="out('1373326694122548312');" style=""> 263  		checkUserPermissionByProject(model.getProjectId(), MOD_INTER);                                                  </span>
<span class="9185443680929913036" onmouseenter="enter('9185443680929913036');" onmouseout="out('9185443680929913036');" style=""> 264  		checkUserPermissionByProject(change.getProjectId(), MOD_INTER);                                                 </span>
<span  style=""> 265                                                                                                                    </span>
<span class="-6471227968333011823" onmouseenter="enter('-6471227968333011823');" onmouseout="out('-6471227968333011823');" style=""> 266  		int modelSequence = model.getSequence();                                                                        </span>
<span  style=""> 267                                                                                                                    </span>
<span class="-7348627876629533627" onmouseenter="enter('-7348627876629533627');" onmouseout="out('-7348627876629533627');" style=""> 268  		model.setSequence(change.getSequence());                                                                        </span>
<span class="-8403247859037350919" onmouseenter="enter('-8403247859037350919');" onmouseout="out('-8403247859037350919');" style=""> 269  		change.setSequence(modelSequence);                                                                              </span>
<span  style=""> 270                                                                                                                    </span>
<span class="-6504951827173969687" onmouseenter="enter('-6504951827173969687');" onmouseout="out('-6504951827173969687');" style=""> 271  		mybatisInterfaceService.update(model);                                                                          </span>
<span class="-8243206060953081636" onmouseenter="enter('-8243206060953081636');" onmouseout="out('-8243206060953081636');" style=""> 272  		mybatisInterfaceService.update(change);                                                                         </span>


<span class="-4157589009275146063" onmouseenter="enter('-4157589009275146063');" onmouseout="out('-4157589009275146063');" style=""> 273  		return new JsonResult(1, null);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274  	}                                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 275  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            