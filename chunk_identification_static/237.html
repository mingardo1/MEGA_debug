<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>237</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    237
                    <a href="236.html">prev</a>
                    <a href="238.html">next</a>
                    <a href="237_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    BroadleafCommerce/BroadleafCommerce_bd01ec244a4deb5017acbb8fcaa766701c0c8cac_common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;bd01ec244a4deb5017acbb8fcaa766701c0c8cac:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;bd01ec244a4deb5017acbb8fcaa766701c0c8cac^1:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;bd01ec244a4deb5017acbb8fcaa766701c0c8cac^2:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\BroadleafCommerce\BroadleafCommerce show &quot;27fb8aeb76208048099aab14c546c94639b2a4ef:common/src/main/java/org/broadleafcommerce/common/i18n/service/TranslationServiceImpl.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[bj], [s]], subset: [[bj], [s]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3  * BroadleafCommerce Common Libraries                                                                    </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18 package org.broadleafcommerce.common.i18n.service;                                                       </span>
<span  style="">  19                                                                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23 import org.broadleafcommerce.common.cache.StatisticsService;                                             </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25 import org.broadleafcommerce.common.extension.ItemStatus;                                                </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26 import org.broadleafcommerce.common.extension.ResultType;                                                </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27 import org.broadleafcommerce.common.extension.StandardCacheItem;                                         </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28 import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                             </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30 import org.broadleafcommerce.common.i18n.domain.Translation;                                             </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33 import org.broadleafcommerce.common.locale.util.LocaleUtil;                                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37 import org.springframework.stereotype.Service;                                                           </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38 import org.springframework.transaction.annotation.Transactional;                                         </span>
<span  style="">  39                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44 import java.util.Map.Entry;                                                                              </span>
<span  style="">  45                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46 import javax.annotation.Resource;                                                                        </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="">  47 import javax.cache.Cache;                                                                                </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="">  48 import javax.cache.CacheManager;                                                                         </span>
<span  style="">  49                                                                                                          </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  50 @Service(&quot;blTranslationService&quot;)                                                                         </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  51 public class TranslationServiceImpl implements TranslationService, TranslationSupport {                  </span>
<span  style="">  52                                                                                                          </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  53     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="">  54     private static final Translation DELETED_TRANSLATION = new TranslationImpl();                        </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="">  55     private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                        </span>
<span  style="">  56                                                                                                          </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  57     @Resource(name = &quot;blTranslationDao&quot;)                                                                 </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  58     protected TranslationDao dao;                                                                        </span>
<span  style="">  59                                                                                                          </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  60     @Resource(name=&quot;blStatisticsService&quot;)                                                                </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  61     protected StatisticsService statisticsService;                                                       </span>
<span  style="">  62                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  63     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  64     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style="">  65                                                                                                          </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  66     @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                               </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  67     protected TranslationServiceExtensionManager extensionManager;                                       </span>
<span  style="">  68                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  69     /**                                                                                                  </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  70      * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  71      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  72     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  73     protected int thresholdForFullCache;                                                                 </span>
<span  style="">  74                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  75     /**                                                                                                  </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  76      * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for              </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  77      * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                  </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  78      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  78      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  79      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  80     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  81     protected int templateThresholdForFullCache;                                                         </span>
<span  style="">  82                                                                                                          </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  83     @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                         </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  84     protected boolean returnBlankTranslationForNotDefaultLocale;                                         </span>
<span  style="">  85                                                                                                          </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  86     @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                 </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  87     protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                     </span>
<span  style="">  88                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  89     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  90     protected LocaleService localeService;                                                               </span>
<span  style="">  91                                                                                                          </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  92     @Resource                                                                                            </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  93     protected List&lt;TranslationOverrideStrategy&gt; strategies;                                              </span>
<span  style="">  94                                                                                                          </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="">  95     @Resource(name = &quot;blCacheManager&quot;)                                                                   </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="">  96     protected CacheManager cacheManager;                                                                 </span>
<span  style="">  97                                                                                                          </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="">  98     protected Cache&lt;String, Object&gt; cache;                                                               </span>
<span  style="">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 101     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 102     public Translation save(Translation translation) {                                                   </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 103         return dao.save(translation);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span  style=""> 105                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 106     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 107     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 108     public Translation save(String entityType, String entityId, String fieldName, String localeCode,     </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 109             String translatedValue) {                                                                    </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 110         TranslatedEntity te = getAssignableEntityType(entityType);                                       </span>
<span  style=""> 111                                                                                                          </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 112         Translation translation = getTranslation(te, entityId, fieldName, localeCode);                   </span>
<span  style=""> 113                                                                                                          </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 114         if (translation == null) {                                                                       </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 115             translation = dao.create();                                                                  </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 116             translation.setEntityType(te);                                                               </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 117             translation.setEntityId(entityId);                                                           </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 118             translation.setFieldName(fieldName);                                                         </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 119             translation.setLocaleCode(localeCode);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span  style=""> 121                                                                                                          </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 122         translation.setTranslatedValue(translatedValue);                                                 </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 123         return save(translation);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126     @Override                                                                                            </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 127     public Translation findTranslationById(Long id) {                                                    </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 128         return dao.readTranslationById(id);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 132     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 133     public Translation update(Long translationId, String localeCode, String translatedValue) {           </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 134         Translation t = dao.readTranslationById(translationId);                                          </span>
<span  style=""> 135                                                                                                          </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 136         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 136         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it ifðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""><abbr title=" 137         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);"> 137         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeðŸ”µ</abbr></span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 138         if (t2 != null &amp;&amp; t != t2) {                                                                     </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 139             dao.delete(t2);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140         }                                                                                                </span>
<span  style=""> 141                                                                                                          </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 142         t.setLocaleCode(localeCode);                                                                     </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 143         t.setTranslatedValue(translatedValue);                                                           </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 144         return save(t);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 147     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 148     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 149     public void deleteTranslationById(Long translationId) {                                              </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 150         Translation t = dao.readTranslationById(translationId);                                          </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 151         dao.delete(t);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154     @Override                                                                                            </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 155     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 155     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String ðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 156         return dao.readTranslation(entity, entityId, fieldName, localeCode);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159     @Override                                                                                            </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""><abbr title=" 160     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {"> 160     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String propeðŸ”µ</abbr></span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 161         TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                   </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 162         return dao.readTranslations(entityType, entityId, property);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165     @Override                                                                                            </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style=""> 166     public Cache&lt;String, Object&gt; getCache() {                                                            </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 167         if (cache == null) {                                                                             </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 168             synchronized (this) {                                                                        </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 169                 if (cache == null) {                                                                     </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style=""> 170                     cache = cacheManager.getCache(getCacheName());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173         }                                                                                                </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 174         return cache;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style=""> 177     protected String getCacheName() {                                                                    </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style=""> 178         return TRANSLATION_CACHE_NAME;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181     @Override                                                                                            </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 182     public String getTranslatedValue(Object entity, String property, Locale locale) {                    </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 183         String localeCode = locale.getLanguage();                                                        </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 184         String localeCountryCode = localeCode;                                                           </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 185         if (StringUtils.isNotBlank(locale.getCountry())) {                                               </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 186             localeCountryCode += &quot;_&quot; + locale.getCountry();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187         }                                                                                                </span>
<span  style=""> 188                                                                                                          </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 189         if (!shouldTranslateLocale(localeCountryCode)) {                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 190             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span  style=""> 192                                                                                                          </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 193         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 194         String entityId = dao.getEntityId(entityType, entity);                                           </span>
<span  style=""> 195                                                                                                          </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 196         if (TranslationBatchReadCache.hasCache()) {                                                      </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 197             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 197             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, properðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 198             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 199                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 200             } else {                                                                                     </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 201                 // There is no translation for this entity if it is not in the cache                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 202                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204         }                                                                                                </span>
<span  style=""> 205                                                                                                          </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 206         boolean isValidForCache = false;                                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 207         if (extensionManager != null) {                                                                  </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 208             ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();              </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 209             response.setResult(false);                                                                   </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 210             extensionManager.getProxy().isValidState(response);                                          </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 211             isValidForCache = response.getResult();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""><abbr title=" 213         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {"> 213         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCacðŸ”µ</abbr></span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 214             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 214             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, locðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 215                     ResultType.CATALOG_ONLY);                                                            </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 216             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 217                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 218             } else {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 219                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221         }                                                                                                </span>
<span  style=""> 222                                                                                                          </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 223         return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224     }                                                                                                    </span>
<span  style=""> 225                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 226     /**                                                                                                  </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 227      * Whether translations should be gathered for the provided locale.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 228      *                                                                                                   </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 229      * @param localeCode                                                                                 </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 230      * @return Whether translations should be gathered for the provided locale.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 231      */                                                                                                  </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 232     protected boolean shouldTranslateLocale(String localeCode) {                                         </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""><abbr title=" 233         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);"> 233         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCðŸ”µ</abbr></span>
<span  style=""> 234                                                                                                          </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 235         if (locale == null) {                                                                            </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 236 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-3037306379894869870" onmouseenter="enter('-3037306379894869870');" onmouseout="out('-3037306379894869870');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 237             throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);"> 237             throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: ðŸ”µ</abbr></span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 238 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 239                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 239                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType())ðŸ”µ</abbr></span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 240                     for (String key: cacheKeysList) {                                                    </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 241                         LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                       </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 242                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 243                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 244                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 245             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 246         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 247     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 248                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 249     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 250                                                 String entityId, String localeCode, String localeCountryCode) {"> 250                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 251 =======                                                                                                  </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 252             LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 253             return true;                                                                                 </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 254 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255         }                                                                                                </span>
<span  style=""> 256                                                                                                          </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 257         return !locale.getDefaultFlag();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 258     }                                                                                                    </span>
<span  style=""> 259                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 260     @Override                                                                                            </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 261     public void removeTranslationFromCache(Translation translation) {                                    </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 262         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 263             ResultType resultType = ResultType.STANDARD;                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 264             if (extensionManager != null) {                                                              </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 265                 ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();    </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 266                 extensionManager.getProxy().getResultType(translation, response);                        </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 267                 resultType = response.getResult();                                                       </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 268                 if (ResultType.STANDARD == resultType) {                                                 </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 269                     String key = getCacheKey(resultType, translation.getEntityType());                   </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 270                     LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                           </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 271                     getCache().remove(key);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 272                 } else {                                                                                 </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 273                     List&lt;String&gt; cacheKeysList =                                                         </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""><abbr title=" 274                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 274                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType())ðŸ”µ</abbr></span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 275                     for (String key: cacheKeysList) {                                                    </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 276                         LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                       </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 277                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 278                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 281         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 282     }                                                                                                    </span>
<span  style=""> 283                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 284     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""><abbr title=" 285                                                 String entityId, String localeCode, String localeCountryCode) {"> 285                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 286         boolean specificTranslationDeleted = false;                                                      </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 287         boolean generalTranslationDeleted = false;                                                       </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 288         StandardCacheItem specificTranslation = null;                                                    </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 289         StandardCacheItem generalTranslation = null;                                                     </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 290         String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                 </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 291         String generalPropertyKey = property + &quot;_&quot; + localeCode;                                         </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 292         String response = null;                                                                          </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 293         String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                  </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 294         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 295         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 296             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 296             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 297             if(override != null) {                                                                       </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 298                 specificTranslation = override.getSpecificItem();                                        </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 299                 generalTranslation = override.getGeneralItem();                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 300                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 303         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 304             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 304             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305         }                                                                                                </span>
<span  style=""> 306                                                                                                          </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 307         if (specificTranslation != null) {                                                               </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 308             if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                        </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 309                 specificTranslationDeleted = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 310             } else {                                                                                     </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 311                 if (specificTranslation.getCacheItem() instanceof Translation) {                         </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 312                     response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 313                 } else {                                                                                 </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 314                     response = (String) specificTranslation.getCacheItem();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                 }                                                                                        </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 316                 return replaceEmptyWithNullResponse(response);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318         }                                                                                                </span>
<span  style=""> 319                                                                                                          </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 320         if (generalTranslation != null) {                                                                </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 321             if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                         </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 322                 generalTranslationDeleted = true;                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 323                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 324                 //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 324                 //If the general translation is override deleted and we&#x27;ve only got a general local code ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 325                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 326                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 327                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 328             } else {                                                                                     </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 329                 if (generalTranslation.getCacheItem() instanceof Translation) {                          </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 330                     response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 331                 } else {                                                                                 </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 332                     response = (String) generalTranslation.getCacheItem();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333                 }                                                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 334                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""><abbr title=" 335                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done"> 335                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 336                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 337                     return replaceEmptyWithNullResponse(response);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338                 }                                                                                        </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 339                 //We have a valid general override - don&#x27;t check for general template value              </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 340                 generalTranslationDeleted = true;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 342         }                                                                                                </span>
<span  style=""> 343                                                                                                          </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 344         // Check for a Template Match                                                                    </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 345         if (specificTranslationDeleted) {                                                                </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 346             // only check general properties since we explicitly deleted specific properties at standard (site) level"> 346             // only check general properties since we explicitly deleted specific properties at standard ðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 347             specificPropertyKey = generalPropertyKey;                                                    </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 348         } else if (generalTranslationDeleted) {                                                          </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 349             // only check specific properties since we explicitly deleted general properties at standard (site) level"> 349             // only check specific properties since we explicitly deleted general properties at standard ðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 350             generalPropertyKey = specificPropertyKey;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351         }                                                                                                </span>
<span  style=""> 352                                                                                                          </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""><abbr title=" 353         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,"> 353         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, loðŸ”µ</abbr></span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 354                     localeCountryCode, specificPropertyKey, generalPropertyKey);                         </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 355         if (templateResponse != null) {                                                                  </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 356             response = templateResponse;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357         }                                                                                                </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 358         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359     }                                                                                                    </span>
<span  style=""> 360                                                                                                          </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 361     protected String replaceEmptyWithNullResponse(String response) {                                     </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 362         if (!StringUtils.isEmpty(response)) {                                                            </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 363             return response;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 364         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 365         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366     }                                                                                                    </span>
<span  style=""> 367                                                                                                          </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 368     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 368     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntitðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 369                         String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 369                         String entityId, String localeCode, String localeCountryCode, String specificPropðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 370         String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                  </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 371         StandardCacheItem translation = null;                                                            </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 372         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 373         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 374             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 374             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, locðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 375             if(override != null) {                                                                       </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 376                 translation = override.getSpecificItem();                                                </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 377                 if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 378                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 380                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 381             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 383         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 384             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 384             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385         }                                                                                                </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 386         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 386         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 389     @Override                                                                                            </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 390     public StandardCacheItem lookupTranslationFromMap(String key,                                        </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 391             Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {       </span>
<span  style=""> 392                                                                                                          </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 393         StandardCacheItem cacheItem = null;                                                              </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 394         if (propertyTranslationMap.containsKey(key)) {                                                   </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 395             Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                   </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 396             cacheItem = byEntity.get(entityId);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 397         }                                                                                                </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 398         return cacheItem;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399     }                                                                                                    </span>
<span  style=""> 400                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 401     @Override                                                                                            </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 402     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 402     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey,ðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 403         Translation translation = null;                                                                  </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 404         if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                   </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 405             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);         </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 406             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407         }                                                                                                </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 408         if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {             </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 409             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);          </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 410             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411         }                                                                                                </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 412         return translation;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413     }                                                                                                    </span>
<span  style=""> 414                                                                                                          </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 415     protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                     </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 416         for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 417             try {                                                                                        </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 418                 Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                          </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 419                 if (clazz.isAssignableFrom(entityClass)) {                                               </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 420                     return entry.getValue();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 422             } catch (ClassNotFoundException e) {                                                         </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""><abbr title=" 423                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);"> 423                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425         }                                                                                                </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 426         throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427     }                                                                                                    </span>
<span  style=""> 428                                                                                                          </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 429     protected TranslatedEntity getEntityType(Object entity) {                                            </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 430         return getEntityType(entity.getClass());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431     }                                                                                                    </span>
<span  style=""> 432                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 433     @Override                                                                                            </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 434     public TranslatedEntity getAssignableEntityType(String className) {                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 435         try {                                                                                            </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 436             Class&lt;?&gt; clazz = Class.forName(className);                                                   </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 437             return getEntityType(clazz);                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 438         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 439             throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441     }                                                                                                    </span>
<span  style=""> 442                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 443     @Override                                                                                            </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 444     public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                      </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 445         String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);           </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 446         if (extensionManager != null) {                                                                  </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 447             ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                  </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 448             extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                       </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 449             if (result.getResult() != null) {                                                            </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 450                 cacheKey = result.getResult();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452         }                                                                                                </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 453         return cacheKey;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454     }                                                                                                    </span>
<span  style=""> 455                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 456     @Override                                                                                            </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 457     public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                            </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 458         List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                   </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 459         String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                            </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 460         if (extensionManager != null) {                                                                  </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 461             ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();      </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 462             extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 463             if (result.getResult() != null) {                                                            </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 464                 cacheKeyList = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 467         return cacheKeyList;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468     }                                                                                                    </span>
<span  style=""> 469                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 470     @Override                                                                                            </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 471     public int getThresholdForFullCache() {                                                              </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 472         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 473             return thresholdForFullCache;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 474         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 475             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 476             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478     }                                                                                                    </span>
<span  style=""> 479                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 480     @Override                                                                                            </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 481     public void setThresholdForFullCache(int thresholdForFullCache) {                                    </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 482         this.thresholdForFullCache = thresholdForFullCache;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483     }                                                                                                    </span>
<span  style=""> 484                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 485     @Override                                                                                            </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 486     public int getTemplateThresholdForFullCache() {                                                      </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 487         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 488             return templateThresholdForFullCache;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 489         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 490             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 491             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 492         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493     }                                                                                                    </span>
<span  style=""> 494                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 495     @Override                                                                                            </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 496     public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                    </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 497         this.templateThresholdForFullCache = templateThresholdForFullCache;                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 498     }                                                                                                    </span>
<span  style=""> 499                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 500     @Override                                                                                            </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 501     public String getDefaultTranslationValue(Object entity, String property, Locale locale,              </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 502             String requestedDefaultValue) {                                                              </span>
<span  style=""> 503                                                                                                          </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 504         if (returnBlankTranslationForNotDefaultLocale                                                    </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 505                 &amp;&amp; !localeMatchesDefaultLocale(locale)                                                   </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 506                 &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 507             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508         }                                                                                                </span>
<span  style=""> 509                                                                                                          </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 510         return requestedDefaultValue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511     }                                                                                                    </span>
<span  style=""> 512                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 513     @Override                                                                                            </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 514     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 514     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType stanðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 515         return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516     }                                                                                                    </span>
<span  style=""> 517                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 518     /**                                                                                                  </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 519      * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 520      *                                                                                                   </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 521      * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the         </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 522      * property matches one of the regularExpressions in that list.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 523      *                                                                                                   </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 524      * Implementors are expected to override this method for implementation specific needs.              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 525      *                                                                                                   </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 526      * @param entity                                                                                     </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 527      * @param property                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 528      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 529      */                                                                                                  </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 530     protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 531         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 532         if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 533             for (String exceptionProperty : translationExceptionProperties) {                            </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 534                 if (property.matches(exceptionProperty)) {                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 535                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 538         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 539         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540     }                                                                                                    </span>
<span  style=""> 541                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 542     /**                                                                                                  </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 543      * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.             </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 544      * @param locale                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 545      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 546      */                                                                                                  </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 547     protected boolean localeMatchesDefaultLocale(Locale locale) {                                        </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 548         String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());         </span>
<span  style=""> 549                                                                                                          </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 550         if (defaultLanguage != null &amp;&amp; locale != null) {                                                 </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 551             return defaultLanguage.equals(locale.getLanguage());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 553         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554     }                                                                                                    </span>
<span  style=""> 555                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3  * BroadleafCommerce Common Libraries                                                                    </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18 package org.broadleafcommerce.common.i18n.service;                                                       </span>
<span  style="">  19                                                                                                          </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23 import org.broadleafcommerce.common.cache.StatisticsService;                                             </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25 import org.broadleafcommerce.common.extension.ItemStatus;                                                </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26 import org.broadleafcommerce.common.extension.ResultType;                                                </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27 import org.broadleafcommerce.common.extension.StandardCacheItem;                                         </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28 import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                             </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30 import org.broadleafcommerce.common.i18n.domain.Translation;                                             </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33 import org.broadleafcommerce.common.locale.util.LocaleUtil;                                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37 import org.springframework.stereotype.Service;                                                           </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38 import org.springframework.transaction.annotation.Transactional;                                         </span>
<span  style="">  39                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42 import java.util.Locale;                                                                                 </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43 import java.util.Map;                                                                                    </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44 import java.util.Map.Entry;                                                                              </span>
<span  style="">  45                                                                                                          </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46 import javax.annotation.Resource;                                                                        </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="">  47 import javax.cache.Cache;                                                                                </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="">  48 import javax.cache.CacheManager;                                                                         </span>
<span  style="">  49                                                                                                          </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  50 @Service(&quot;blTranslationService&quot;)                                                                         </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  51 public class TranslationServiceImpl implements TranslationService, TranslationSupport {                  </span>
<span  style="">  52                                                                                                          </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  53     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="">  54     private static final Translation DELETED_TRANSLATION = new TranslationImpl();                        </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="">  55     private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                        </span>
<span  style="">  56                                                                                                          </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  57     @Resource(name = &quot;blTranslationDao&quot;)                                                                 </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  58     protected TranslationDao dao;                                                                        </span>
<span  style="">  59                                                                                                          </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  60     @Resource(name=&quot;blStatisticsService&quot;)                                                                </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  61     protected StatisticsService statisticsService;                                                       </span>
<span  style="">  62                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  63     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  64     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style="">  65                                                                                                          </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="">  66     protected Cache&lt;String, Object&gt; cache;                                                               </span>
<span  style="">  67                                                                                                          </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  68     @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                               </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  69     protected TranslationServiceExtensionManager extensionManager;                                       </span>
<span  style="">  70                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  71     /**                                                                                                  </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  72      * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  73      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  74     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  75     protected int thresholdForFullCache;                                                                 </span>
<span  style="">  76                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  77     /**                                                                                                  </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  78      * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for              </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  79      * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                  </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  80      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  80      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  81      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  82     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  83     protected int templateThresholdForFullCache;                                                         </span>
<span  style="">  84                                                                                                          </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  85     @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                         </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  86     protected boolean returnBlankTranslationForNotDefaultLocale;                                         </span>
<span  style="">  87                                                                                                          </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  88     @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                 </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  89     protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                     </span>
<span  style="">  90                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  91     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  92     protected LocaleService localeService;                                                               </span>
<span  style="">  93                                                                                                          </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  94     @Resource                                                                                            </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  95     protected List&lt;TranslationOverrideStrategy&gt; strategies;                                              </span>
<span  style="">  96                                                                                                          </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="">  97     @Resource(name = &quot;blCacheManager&quot;)                                                                   </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="">  98     protected CacheManager cacheManager;                                                                 </span>
<span  style="">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 101     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 102     public Translation save(Translation translation) {                                                   </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 103         return dao.save(translation);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span  style=""> 105                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 106     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 107     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 108     public Translation save(String entityType, String entityId, String fieldName, String localeCode,     </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 109             String translatedValue) {                                                                    </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 110         TranslatedEntity te = getAssignableEntityType(entityType);                                       </span>
<span  style=""> 111                                                                                                          </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 112         Translation translation = getTranslation(te, entityId, fieldName, localeCode);                   </span>
<span  style=""> 113                                                                                                          </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 114         if (translation == null) {                                                                       </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 115             translation = dao.create();                                                                  </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 116             translation.setEntityType(te);                                                               </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 117             translation.setEntityId(entityId);                                                           </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 118             translation.setFieldName(fieldName);                                                         </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 119             translation.setLocaleCode(localeCode);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span  style=""> 121                                                                                                          </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 122         translation.setTranslatedValue(translatedValue);                                                 </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 123         return save(translation);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126     @Override                                                                                            </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 127     public Translation findTranslationById(Long id) {                                                    </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 128         return dao.readTranslationById(id);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 132     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 133     public Translation update(Long translationId, String localeCode, String translatedValue) {           </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 134         Translation t = dao.readTranslationById(translationId);                                          </span>
<span  style=""> 135                                                                                                          </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 136         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 136         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it ifðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""><abbr title=" 137         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);"> 137         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeðŸ”µ</abbr></span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 138         if (t2 != null &amp;&amp; t != t2) {                                                                     </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 139             dao.delete(t2);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140         }                                                                                                </span>
<span  style=""> 141                                                                                                          </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 142         t.setLocaleCode(localeCode);                                                                     </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 143         t.setTranslatedValue(translatedValue);                                                           </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 144         return save(t);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 147     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 148     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 149     public void deleteTranslationById(Long translationId) {                                              </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 150         Translation t = dao.readTranslationById(translationId);                                          </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 151         dao.delete(t);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154     @Override                                                                                            </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 155     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 155     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String ðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 156         return dao.readTranslation(entity, entityId, fieldName, localeCode);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159     @Override                                                                                            </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""><abbr title=" 160     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {"> 160     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String propeðŸ”µ</abbr></span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 161         TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                   </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 162         return dao.readTranslations(entityType, entityId, property);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165     @Override                                                                                            </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style=""> 166     public Cache&lt;String, Object&gt; getCache() {                                                            </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 167         if (cache == null) {                                                                             </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style=""> 168             synchronized (this) {                                                                        </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 169                 if (cache == null) {                                                                     </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style=""> 170                     cache = cacheManager.getCache(getCacheName());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173         }                                                                                                </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 174         return cache;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style=""> 177     protected String getCacheName() {                                                                    </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style=""> 178         return TRANSLATION_CACHE_NAME;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181     @Override                                                                                            </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 182     public String getTranslatedValue(Object entity, String property, Locale locale) {                    </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 183         String localeCode = locale.getLanguage();                                                        </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 184         String localeCountryCode = localeCode;                                                           </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 185         if (StringUtils.isNotBlank(locale.getCountry())) {                                               </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 186             localeCountryCode += &quot;_&quot; + locale.getCountry();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187         }                                                                                                </span>
<span  style=""> 188                                                                                                          </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 189         if (!shouldTranslateLocale(localeCountryCode)) {                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 190             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 191         }                                                                                                </span>
<span  style=""> 192                                                                                                          </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 193         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 194         String entityId = dao.getEntityId(entityType, entity);                                           </span>
<span  style=""> 195                                                                                                          </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 196         if (TranslationBatchReadCache.hasCache()) {                                                      </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 197             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 197             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, properðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 198             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 199                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 200             } else {                                                                                     </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 201                 // There is no translation for this entity if it is not in the cache                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 202                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 203             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204         }                                                                                                </span>
<span  style=""> 205                                                                                                          </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 206         boolean isValidForCache = false;                                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 207         if (extensionManager != null) {                                                                  </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 208             ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();              </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 209             response.setResult(false);                                                                   </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 210             extensionManager.getProxy().isValidState(response);                                          </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 211             isValidForCache = response.getResult();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212         }                                                                                                </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""><abbr title=" 213         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {"> 213         if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCacðŸ”µ</abbr></span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 214             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 214             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, locðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 215                     ResultType.CATALOG_ONLY);                                                            </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 216             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 217                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 218             } else {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 219                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 220             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221         }                                                                                                </span>
<span  style=""> 222                                                                                                          </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 223         return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 224     }                                                                                                    </span>
<span  style=""> 225                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 226     /**                                                                                                  </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 227      * Whether translations should be gathered for the provided locale.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 228      *                                                                                                   </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 229      * @param localeCode                                                                                 </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 230      * @return Whether translations should be gathered for the provided locale.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 231      */                                                                                                  </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 232     protected boolean shouldTranslateLocale(String localeCode) {                                         </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""><abbr title=" 233         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);"> 233         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCðŸ”µ</abbr></span>
<span  style=""> 234                                                                                                          </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 235         if (locale == null) {                                                                            </span>
<span class="7598536375028459133" onmouseenter="enter('7598536375028459133');" onmouseout="out('7598536375028459133');" style=""> 236 &lt;&lt;&lt;&lt;&lt;&lt;&lt; MINE                                                                                             </span>
<span class="-3037306379894869870" onmouseenter="enter('-3037306379894869870');" onmouseout="out('-3037306379894869870');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"><abbr title=" 237             throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);"> 237             throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: ðŸ”µ</abbr></span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 238 ||||||| BASE                                                                                             </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 239 =======                                                                                                  </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 240             LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 241             return true;                                                                                 </span>
<span class="-5027112130205478640" onmouseenter="enter('-5027112130205478640');" onmouseout="out('-5027112130205478640');" style=""> 242 &gt;&gt;&gt;&gt;&gt;&gt;&gt; YOURS                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 243         }                                                                                                </span>
<span  style=""> 244                                                                                                          </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 245         return !locale.getDefaultFlag();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 248     @Override                                                                                            </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 249     public void removeTranslationFromCache(Translation translation) {                                    </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 250         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 251             ResultType resultType = ResultType.STANDARD;                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 252             if (extensionManager != null) {                                                              </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 253                 ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();    </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 254                 extensionManager.getProxy().getResultType(translation, response);                        </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 255                 resultType = response.getResult();                                                       </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 256                 if (ResultType.STANDARD == resultType) {                                                 </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 257                     String key = getCacheKey(resultType, translation.getEntityType());                   </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 258                     LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                           </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 259                     getCache().remove(key);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 260                 } else {                                                                                 </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 261                     List&lt;String&gt; cacheKeysList =                                                         </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""><abbr title=" 262                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 262                             getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType())ðŸ”µ</abbr></span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 263                     for (String key: cacheKeysList) {                                                    </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 264                         LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                       </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 265                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 266                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 268             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 272     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""><abbr title=" 273                                                 String entityId, String localeCode, String localeCountryCode) {"> 273                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 274         boolean specificTranslationDeleted = false;                                                      </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 275         boolean generalTranslationDeleted = false;                                                       </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 276         StandardCacheItem specificTranslation = null;                                                    </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 277         StandardCacheItem generalTranslation = null;                                                     </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 278         String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                 </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 279         String generalPropertyKey = property + &quot;_&quot; + localeCode;                                         </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 280         String response = null;                                                                          </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 281         String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                  </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 282         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 283         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 284             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 284             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 285             if(override != null) {                                                                       </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 286                 specificTranslation = override.getSpecificItem();                                        </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 287                 generalTranslation = override.getGeneralItem();                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 288                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 291         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 292             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 292             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293         }                                                                                                </span>
<span  style=""> 294                                                                                                          </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 295         if (specificTranslation != null) {                                                               </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 296             if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                        </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 297                 specificTranslationDeleted = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 298             } else {                                                                                     </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 299                 if (specificTranslation.getCacheItem() instanceof Translation) {                         </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 300                     response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 301                 } else {                                                                                 </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 302                     response = (String) specificTranslation.getCacheItem();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 303                 }                                                                                        </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 304                 return replaceEmptyWithNullResponse(response);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 306         }                                                                                                </span>
<span  style=""> 307                                                                                                          </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 308         if (generalTranslation != null) {                                                                </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 309             if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                         </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 310                 generalTranslationDeleted = true;                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 311                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 312                 //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 312                 //If the general translation is override deleted and we&#x27;ve only got a general local code ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 313                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 314                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 315                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 316             } else {                                                                                     </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 317                 if (generalTranslation.getCacheItem() instanceof Translation) {                          </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 318                     response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 319                 } else {                                                                                 </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 320                     response = (String) generalTranslation.getCacheItem();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321                 }                                                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 322                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""><abbr title=" 323                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done"> 323                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 324                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 325                     return replaceEmptyWithNullResponse(response);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326                 }                                                                                        </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 327                 //We have a valid general override - don&#x27;t check for general template value              </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 328                 generalTranslationDeleted = true;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330         }                                                                                                </span>
<span  style=""> 331                                                                                                          </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 332         // Check for a Template Match                                                                    </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 333         if (specificTranslationDeleted) {                                                                </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 334             // only check general properties since we explicitly deleted specific properties at standard (site) level"> 334             // only check general properties since we explicitly deleted specific properties at standard ðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 335             specificPropertyKey = generalPropertyKey;                                                    </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 336         } else if (generalTranslationDeleted) {                                                          </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 337             // only check specific properties since we explicitly deleted general properties at standard (site) level"> 337             // only check specific properties since we explicitly deleted general properties at standard ðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 338             generalPropertyKey = specificPropertyKey;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339         }                                                                                                </span>
<span  style=""> 340                                                                                                          </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""><abbr title=" 341         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,"> 341         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, loðŸ”µ</abbr></span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 342                     localeCountryCode, specificPropertyKey, generalPropertyKey);                         </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 343         if (templateResponse != null) {                                                                  </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 344             response = templateResponse;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345         }                                                                                                </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 346         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 347     }                                                                                                    </span>
<span  style=""> 348                                                                                                          </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 349     protected String replaceEmptyWithNullResponse(String response) {                                     </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 350         if (!StringUtils.isEmpty(response)) {                                                            </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 351             return response;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 353         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354     }                                                                                                    </span>
<span  style=""> 355                                                                                                          </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 356     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 356     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntitðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 357                         String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 357                         String entityId, String localeCode, String localeCountryCode, String specificPropðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 358         String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                  </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 359         StandardCacheItem translation = null;                                                            </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 360         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 361         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 362             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 362             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, locðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 363             if(override != null) {                                                                       </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 364                 translation = override.getSpecificItem();                                                </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 365                 if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 366                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 367                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 368                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 371         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 372             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 372             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373         }                                                                                                </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 374         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 374         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 375     }                                                                                                    </span>
<span  style=""> 376                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 377     @Override                                                                                            </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 378     public StandardCacheItem lookupTranslationFromMap(String key,                                        </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 379             Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {       </span>
<span  style=""> 380                                                                                                          </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 381         StandardCacheItem cacheItem = null;                                                              </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 382         if (propertyTranslationMap.containsKey(key)) {                                                   </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 383             Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                   </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 384             cacheItem = byEntity.get(entityId);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385         }                                                                                                </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 386         return cacheItem;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 389     @Override                                                                                            </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 390     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 390     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey,ðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 391         Translation translation = null;                                                                  </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 392         if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                   </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 393             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);         </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 394             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 395         }                                                                                                </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 396         if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {             </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 397             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);          </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 398             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399         }                                                                                                </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 400         return translation;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401     }                                                                                                    </span>
<span  style=""> 402                                                                                                          </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 403     protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                     </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 404         for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 405             try {                                                                                        </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 406                 Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                          </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 407                 if (clazz.isAssignableFrom(entityClass)) {                                               </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 408                     return entry.getValue();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 409                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 410             } catch (ClassNotFoundException e) {                                                         </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""><abbr title=" 411                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);"> 411                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 412             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413         }                                                                                                </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 414         throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415     }                                                                                                    </span>
<span  style=""> 416                                                                                                          </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 417     protected TranslatedEntity getEntityType(Object entity) {                                            </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 418         return getEntityType(entity.getClass());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419     }                                                                                                    </span>
<span  style=""> 420                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 421     @Override                                                                                            </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 422 public TranslatedEntity getAssignableEntityType(String className) {                                      </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 423         try {                                                                                            </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 424             Class&lt;?&gt; clazz = Class.forName(className);                                                   </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 425             return getEntityType(clazz);                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 426         } catch (ClassNotFoundException e) {                                                             </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 427             throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429     }                                                                                                    </span>
<span  style=""> 430                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 431     @Override                                                                                            </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 432     public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                      </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 433         String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);           </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 434         if (extensionManager != null) {                                                                  </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 435             ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                  </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 436             extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                       </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 437             if (result.getResult() != null) {                                                            </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 438                 cacheKey = result.getResult();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440         }                                                                                                </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 441         return cacheKey;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442     }                                                                                                    </span>
<span  style=""> 443                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 444     @Override                                                                                            </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 445     public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                            </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 446         List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                   </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 447         String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                            </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 448         if (extensionManager != null) {                                                                  </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 449             ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();      </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 450             extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 451             if (result.getResult() != null) {                                                            </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 452                 cacheKeyList = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 454         }                                                                                                </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 455         return cacheKeyList;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456     }                                                                                                    </span>
<span  style=""> 457                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 458     @Override                                                                                            </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 459     public int getThresholdForFullCache() {                                                              </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 460         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 461             return thresholdForFullCache;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 462         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 463             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 464             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466     }                                                                                                    </span>
<span  style=""> 467                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 468     @Override                                                                                            </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 469     public void setThresholdForFullCache(int thresholdForFullCache) {                                    </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 470         this.thresholdForFullCache = thresholdForFullCache;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471     }                                                                                                    </span>
<span  style=""> 472                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 473     @Override                                                                                            </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 474     public int getTemplateThresholdForFullCache() {                                                      </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 475         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 476             return templateThresholdForFullCache;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 477         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 478             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 479             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481     }                                                                                                    </span>
<span  style=""> 482                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 483     @Override                                                                                            </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 484     public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                    </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 485         this.templateThresholdForFullCache = templateThresholdForFullCache;                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486     }                                                                                                    </span>
<span  style=""> 487                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 488     @Override                                                                                            </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 489     public String getDefaultTranslationValue(Object entity, String property, Locale locale,              </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 490             String requestedDefaultValue) {                                                              </span>
<span  style=""> 491                                                                                                          </span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style=""> 492         if (returnBlankTranslationForNotDefaultLocale                                                    </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style=""> 493                 &amp;&amp; !localeMatchesDefaultLocale(locale)                                                   </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style=""> 494                 &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                            </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 495             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 496         }                                                                                                </span>
<span  style=""> 497                                                                                                          </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 498         return requestedDefaultValue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499     }                                                                                                    </span>
<span  style=""> 500                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 501     @Override                                                                                            </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 502     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 502     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType stanðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 503         return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504     }                                                                                                    </span>
<span  style=""> 505                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 506     /**                                                                                                  </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 507      * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 508      *                                                                                                   </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 509      * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the         </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 510      * property matches one of the regularExpressions in that list.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 511      *                                                                                                   </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 512      * Implementors are expected to override this method for implementation specific needs.              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 513      *                                                                                                   </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 514      * @param entity                                                                                     </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 515      * @param property                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 516      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 517      */                                                                                                  </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 518     protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 519         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 520         if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 521             for (String exceptionProperty : translationExceptionProperties) {                            </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 522                 if (property.matches(exceptionProperty)) {                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 523                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 525             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 527         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528     }                                                                                                    </span>
<span  style=""> 529                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 530     /**                                                                                                  </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 531      * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.             </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 532      * @param locale                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 533      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 534      */                                                                                                  </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 535     protected boolean localeMatchesDefaultLocale(Locale locale) {                                        </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 536         String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());         </span>
<span  style=""> 537                                                                                                          </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 538         if (defaultLanguage != null &amp;&amp; locale != null) {                                                 </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 539             return defaultLanguage.equals(locale.getLanguage());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 541         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542     }                                                                                                    </span>
<span  style=""> 543                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 544 }                                                                                                        </span>










</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2  * #%L                                                                                                   </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3  * BroadleafCommerce Common Libraries                                                                    </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4  * %%                                                                                                    </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5  * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                          </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6  * %%                                                                                                    </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7  * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                  </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8  * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)    </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9  * unless the restrictions on use therein are violated and require payment to Broadleaf in which case    </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10  * the Broadleaf End User License Agreement (EULA), Version 1.1                                          </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11  * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt) </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12  * shall apply.                                                                                          </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13  *                                                                                                       </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14  * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;CustomðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style=""><abbr title="  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.">  15  * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicableðŸ”µ</abbr></span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16  * #L%                                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17  */                                                                                                      </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18 package org.broadleafcommerce.common.i18n.service;                                                       </span>
<span  style="">  19                                                                                                          </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  20 import java.util.ArrayList;                                                                              </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  21 import java.util.List;                                                                                   </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  22 import java.util.Locale;                                                                                 </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  23 import java.util.Map.Entry;                                                                              </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  24 import java.util.Map;                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  25 import javax.annotation.Resource;                                                                        </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="">  26 import javax.cache.Cache;                                                                                </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="">  27 import javax.cache.CacheManager;                                                                         </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  28 import org.apache.commons.lang3.StringUtils;                                                             </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  29 import org.apache.commons.logging.Log;                                                                   </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  30 import org.apache.commons.logging.LogFactory;                                                            </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  31 import org.broadleafcommerce.common.cache.StatisticsService;                                             </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  32 import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                     </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  33 import org.broadleafcommerce.common.extension.ItemStatus;                                                </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  34 import org.broadleafcommerce.common.extension.ResultType;                                                </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  35 import org.broadleafcommerce.common.extension.StandardCacheItem;                                         </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  36 import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                             </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  37 import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                        </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  38 import org.broadleafcommerce.common.i18n.domain.Translation;                                             </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  39 import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                         </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  40 import org.broadleafcommerce.common.locale.service.LocaleService;                                        </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  41 import org.broadleafcommerce.common.locale.util.LocaleUtil;                                              </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  42 import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                               </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  43 import org.broadleafcommerce.common.web.BroadleafRequestContext;                                         </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  44 import org.springframework.beans.factory.annotation.Value;                                               </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  45 import org.springframework.stereotype.Service;                                                           </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  46 import org.springframework.transaction.annotation.Transactional;                                         </span>
<span  style="">  47                                                                                                          </span>
<span  style="">  48                                                                                                          </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  49 @Service(&quot;blTranslationService&quot;)                                                                         </span>
<span class="-8776382781726420357" onmouseenter="enter('-8776382781726420357');" onmouseout="out('-8776382781726420357');" style="">  50 public class TranslationServiceImpl implements TranslationService , TranslationSupport {                 </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  51     protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                    </span>
<span  style="">  52                                                                                                          </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="">  53     private static final Translation DELETED_TRANSLATION = new TranslationImpl();                        </span>
<span  style="">  54                                                                                                          </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="">  55     private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                        </span>
<span  style="">  56                                                                                                          </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  57     @Resource(name = &quot;blTranslationDao&quot;)                                                                 </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  58     protected TranslationDao dao;                                                                        </span>
<span  style="">  59                                                                                                          </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  60     @Resource(name=&quot;blStatisticsService&quot;)                                                                </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  61     protected StatisticsService statisticsService;                                                       </span>
<span  style="">  62                                                                                                          </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  63     @Resource(name=&quot;blSandBoxHelper&quot;)                                                                    </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  64     protected SandBoxHelper sandBoxHelper;                                                               </span>
<span  style="">  65                                                                                                          </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  66     @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                               </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  67     protected TranslationServiceExtensionManager extensionManager;                                       </span>
<span  style="">  68                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  69     /**                                                                                                  </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  70      * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  71      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  72     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  73     protected int thresholdForFullCache;                                                                 </span>
<span  style="">  74                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  75     /**                                                                                                  </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  76      * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for              </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  77      * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                  </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  78      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  78      * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  79      */                                                                                                  </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  80     @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                  </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  81     protected int templateThresholdForFullCache;                                                         </span>
<span  style="">  82                                                                                                          </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  83     @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                         </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  84     protected boolean returnBlankTranslationForNotDefaultLocale;                                         </span>
<span  style="">  85                                                                                                          </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  86     @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                 </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  87     protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                     </span>
<span  style="">  88                                                                                                          </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  89     @Resource(name = &quot;blLocaleService&quot;)                                                                  </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  90     protected LocaleService localeService;                                                               </span>
<span  style="">  91                                                                                                          </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  92     @Resource                                                                                            </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  93     protected List&lt;TranslationOverrideStrategy&gt; strategies;                                              </span>
<span  style="">  94                                                                                                          </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="">  95     @Resource(name = &quot;blCacheManager&quot;)                                                                   </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="">  96     protected CacheManager cacheManager;                                                                 </span>
<span  style="">  97                                                                                                          </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="">  98     protected Cache&lt;String, Object&gt; cache;                                                               </span>
<span  style="">  99                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 100     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 101     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 102     public Translation save(Translation translation) {                                                   </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 103         return dao.save(translation);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span  style=""> 105                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 106     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 107     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 108     public Translation save(String entityType, String entityId, String fieldName, String localeCode,     </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 109             String translatedValue) {                                                                    </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 110         TranslatedEntity te = getAssignableEntityType(entityType);                                       </span>
<span  style=""> 111                                                                                                          </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 112         Translation translation = getTranslation(te, entityId, fieldName, localeCode);                   </span>
<span  style=""> 113                                                                                                          </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 114         if (translation == null) {                                                                       </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 115             translation = dao.create();                                                                  </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 116             translation.setEntityType(te);                                                               </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 117             translation.setEntityId(entityId);                                                           </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 118             translation.setFieldName(fieldName);                                                         </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 119             translation.setLocaleCode(localeCode);                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 120         }                                                                                                </span>
<span  style=""> 121                                                                                                          </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 122         translation.setTranslatedValue(translatedValue);                                                 </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 123         return save(translation);                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 126     @Override                                                                                            </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 127     public Translation findTranslationById(Long id) {                                                    </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 128         return dao.readTranslationById(id);                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129     }                                                                                                    </span>
<span  style=""> 130                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 132     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 133     public Translation update(Long translationId, String localeCode, String translatedValue) {           </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 134         Translation t = dao.readTranslationById(translationId);                                          </span>
<span  style=""> 135                                                                                                          </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 136         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 136         // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it ifðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""><abbr title=" 137         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);"> 137         Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeðŸ”µ</abbr></span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 138         if (t2 != null &amp;&amp; t != t2) {                                                                     </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 139             dao.delete(t2);                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140         }                                                                                                </span>
<span  style=""> 141                                                                                                          </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 142         t.setLocaleCode(localeCode);                                                                     </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 143         t.setTranslatedValue(translatedValue);                                                           </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 144         return save(t);                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145     }                                                                                                    </span>
<span  style=""> 146                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 147     @Override                                                                                            </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 148     @Transactional(&quot;blTransactionManager&quot;)                                                               </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 149     public void deleteTranslationById(Long translationId) {                                              </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 150         Translation t = dao.readTranslationById(translationId);                                          </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 151         dao.delete(t);                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 152     }                                                                                                    </span>
<span  style=""> 153                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 154     @Override                                                                                            </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 155     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 155     public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String ðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 156         return dao.readTranslation(entity, entityId, fieldName, localeCode);                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157     }                                                                                                    </span>
<span  style=""> 158                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159     @Override                                                                                            </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""><abbr title=" 160     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {"> 160     public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String propeðŸ”µ</abbr></span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 161         TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                   </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 162         return dao.readTranslations(entityType, entityId, property);                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163     }                                                                                                    </span>
<span  style=""> 164                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 165     @Override                                                                                            </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style=""> 166     public Cache&lt;String, Object&gt; getCache() {                                                            </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 167         if (cache == null) {                                                                             </span>
<span class="2782390661741246227" onmouseenter="enter('2782390661741246227');" onmouseout="out('2782390661741246227');" style=""> 168             synchronized(this) {                                                                         </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 169                 if (cache == null) {                                                                     </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style=""> 170                     cache = cacheManager.getCache(getCacheName());                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173         }                                                                                                </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 174         return cache;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175     }                                                                                                    </span>
<span  style=""> 176                                                                                                          </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style=""> 177     protected String getCacheName() {                                                                    </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style=""> 178         return TRANSLATION_CACHE_NAME;                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179     }                                                                                                    </span>
<span  style=""> 180                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 181     @Override                                                                                            </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 182     public String getTranslatedValue(Object entity, String property, Locale locale) {                    </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 183         String localeCode = locale.getLanguage();                                                        </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 184         String localeCountryCode = localeCode;                                                           </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 185         if (StringUtils.isNotBlank(locale.getCountry())) {                                               </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 186             localeCountryCode += &quot;_&quot; + locale.getCountry();                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 187         }                                                                                                </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style=""> 188         if (!shouldTranslateLocale(localeCountryCode)) {                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 189             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 190         }                                                                                                </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 191         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style=""> 192         String entityId = dao.getEntityId(entityType, entity);                                           </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 193         if (TranslationBatchReadCache.hasCache()) {                                                      </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 194             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 194             Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, properðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 195             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 196                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 197             } else {                                                                                     </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 198                 // There is no translation for this entity if it is not in the cache                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 199                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 200             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201         }                                                                                                </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 202         boolean isValidForCache = false;                                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 203         if (extensionManager != null) {                                                                  </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 204             ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();              </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 205             response.setResult(false);                                                                   </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 206             extensionManager.getProxy().isValidState(response);                                          </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 207             isValidForCache = response.getResult();                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208         }                                                                                                </span>
<span class="4552173445564862096" onmouseenter="enter('4552173445564862096');" onmouseout="out('4552173445564862096');" style=""><abbr title=" 209         if ((!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) || (!isValidForCache)) {"> 209         if ((!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) || (!isValidForðŸ”µ</abbr></span>
<span class="-2602664814822383261" onmouseenter="enter('-2602664814822383261');" onmouseout="out('-2602664814822383261');" style=""><abbr title=" 210             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode, ResultType.CATALOG_ONLY);"> 210             Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, locðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 211             if (translation != null) {                                                                   </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 212                 return translation.getTranslatedValue();                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 213             } else {                                                                                     </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 214                 return null;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216         }                                                                                                </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 217         return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 218     }                                                                                                    </span>
<span  style=""> 219                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 220     @Override                                                                                            </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 221     public void removeTranslationFromCache(Translation translation) {                                    </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 222         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 223             ResultType resultType = ResultType.STANDARD;                                                 </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 224             if (extensionManager != null) {                                                              </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 225                 ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();    </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 226                 extensionManager.getProxy().getResultType(translation, response);                        </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 227                 resultType = response.getResult();                                                       </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 228                 if (ResultType.STANDARD == resultType) {                                                 </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 229                     String key = getCacheKey(resultType, translation.getEntityType());                   </span>
<span class="1677623124633880424" onmouseenter="enter('1677623124633880424');" onmouseout="out('1677623124633880424');" style=""> 230                     LOG.debug((&quot;Removing key [&quot; + key) + &quot;] for STANDARD site&quot;);                         </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 231                     getCache().remove(key);                                                              </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 232                 } else {                                                                                 </span>
<span class="-6329878695069103820" onmouseenter="enter('-6329878695069103820');" onmouseout="out('-6329878695069103820');" style=""><abbr title=" 233                     List&lt;String&gt; cacheKeysList = getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());"> 233                     List&lt;String&gt; cacheKeysList = getCacheKeyListForTemplateSite(translation.getEntityTypeðŸ”µ</abbr></span>
<span class="4287047758984603709" onmouseenter="enter('4287047758984603709');" onmouseout="out('4287047758984603709');" style=""> 234                     for (String key : cacheKeysList) {                                                   </span>
<span class="853853908254995793" onmouseenter="enter('853853908254995793');" onmouseout="out('853853908254995793');" style=""> 235                         LOG.debug((&quot;Removing key [&quot; + key) + &quot;] for TEMPLATE site&quot;);                     </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 236                         getCache().remove(key);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 238                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 240         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241     }                                                                                                    </span>
<span  style=""> 242                                                                                                          </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 243     protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,            </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""><abbr title=" 244                                                 String entityId, String localeCode, String localeCountryCode) {"> 244                                                 String entityId, String localeCode, String localeCountryCðŸ”µ</abbr></span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 245         boolean specificTranslationDeleted = false;                                                      </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 246         boolean generalTranslationDeleted = false;                                                       </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 247         StandardCacheItem specificTranslation = null;                                                    </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 248         StandardCacheItem generalTranslation = null;                                                     </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 249         String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                 </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 250         String generalPropertyKey = property + &quot;_&quot; + localeCode;                                         </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 251         String response = null;                                                                          </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 252         String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                  </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 253         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 254         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 255             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 255             override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 256             if(override != null) {                                                                       </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 257                 specificTranslation = override.getSpecificItem();                                        </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 258                 generalTranslation = override.getGeneralItem();                                          </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 259                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 261         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 262         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 263             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 263             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 264         }                                                                                                </span>
<span  style=""> 265                                                                                                          </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 266         if (specificTranslation != null) {                                                               </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 267             if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                        </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 268                 specificTranslationDeleted = true;                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 269             } else {                                                                                     </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 270                 if (specificTranslation.getCacheItem() instanceof Translation) {                         </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 271                     response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();  </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 272                 } else {                                                                                 </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 273                     response = (String) specificTranslation.getCacheItem();                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274                 }                                                                                        </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 275                 return replaceEmptyWithNullResponse(response);                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277         }                                                                                                </span>
<span  style=""> 278                                                                                                          </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 279         if (generalTranslation != null) {                                                                </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 280             if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                         </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 281                 generalTranslationDeleted = true;                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 282                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 283                 //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 283                 //If the general translation is override deleted and we&#x27;ve only got a general local code ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 284                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 285                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286                 }                                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 287             } else {                                                                                     </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 288                 if (generalTranslation.getCacheItem() instanceof Translation) {                          </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 289                     response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();   </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 290                 } else {                                                                                 </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 291                     response = (String) generalTranslation.getCacheItem();                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292                 }                                                                                        </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 293                 //If the specific translation is override deleted as well, we&#x27;re done                    </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""><abbr title=" 294                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done"> 294                 //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re ðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 295                 if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                    </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 296                     return replaceEmptyWithNullResponse(response);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297                 }                                                                                        </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 298                 //We have a valid general override - don&#x27;t check for general template value              </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 299                 generalTranslationDeleted = true;                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 300             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 301         }                                                                                                </span>
<span  style=""> 302                                                                                                          </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 303         // Check for a Template Match                                                                    </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 304         if (specificTranslationDeleted) {                                                                </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 305             // only check general properties since we explicitly deleted specific properties at standard (site) level"> 305             // only check general properties since we explicitly deleted specific properties at standard ðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 306             specificPropertyKey = generalPropertyKey;                                                    </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 307         } else if (generalTranslationDeleted) {                                                          </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 308             // only check specific properties since we explicitly deleted general properties at standard (site) level"> 308             // only check specific properties since we explicitly deleted general properties at standard ðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 309             generalPropertyKey = specificPropertyKey;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310         }                                                                                                </span>
<span  style=""> 311                                                                                                          </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""><abbr title=" 312         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,"> 312         String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, loðŸ”µ</abbr></span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 313                     localeCountryCode, specificPropertyKey, generalPropertyKey);                         </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 314         if (templateResponse != null) {                                                                  </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 315             response = templateResponse;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316         }                                                                                                </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 317         return response;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318     }                                                                                                    </span>
<span  style=""> 319                                                                                                          </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 320     protected String replaceEmptyWithNullResponse(String response) {                                     </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 321         if (!StringUtils.isEmpty(response)) {                                                            </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 322             return response;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 323         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 324         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325     }                                                                                                    </span>
<span  style=""> 326                                                                                                          </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 327     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 327     protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntitðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 328                         String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 328                         String entityId, String localeCode, String localeCountryCode, String specificPropðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 329         String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                  </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 330         StandardCacheItem translation = null;                                                            </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 331         LocalePair override = null;                                                                      </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 332         for (TranslationOverrideStrategy strategy : strategies) {                                        </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 333             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 333             override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, locðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 334             if(override != null) {                                                                       </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 335                 translation = override.getSpecificItem();                                                </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 336                 if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                  </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 337                     return null;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338                 }                                                                                        </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 339                 break;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 340             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341         }                                                                                                </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 342         if (override == null) {                                                                          </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 343             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 343             throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 344         }                                                                                                </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 345         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 345         return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheIteðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346     }                                                                                                    </span>
<span  style=""> 347                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 348     @Override                                                                                            </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 349     public StandardCacheItem lookupTranslationFromMap(String key,                                        </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 350             Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {       </span>
<span  style=""> 351                                                                                                          </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 352         StandardCacheItem cacheItem = null;                                                              </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 353         if (propertyTranslationMap.containsKey(key)) {                                                   </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 354             Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                   </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 355             cacheItem = byEntity.get(entityId);                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356         }                                                                                                </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 357         return cacheItem;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358     }                                                                                                    </span>
<span  style=""> 359                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 360     @Override                                                                                            </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 361     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 361     public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey,ðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 362         Translation translation = null;                                                                  </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 363         if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                   </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 364             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);         </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 365             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366         }                                                                                                </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 367         if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {             </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 368             Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);          </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 369             translation = byEntity.get(entityId);                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 370         }                                                                                                </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 371         return translation;                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372     }                                                                                                    </span>
<span  style=""> 373                                                                                                          </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 374     protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                     </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 375         for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 376             try {                                                                                        </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 377                 Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                          </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 378                 if (clazz.isAssignableFrom(entityClass)) {                                               </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 379                     return entry.getValue();                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380                 }                                                                                        </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 381             } catch (ClassNotFoundException e) {                                                         </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""><abbr title=" 382                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);"> 382                 throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, ðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 383             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 384         }                                                                                                </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 385         throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);</span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386     }                                                                                                    </span>
<span  style=""> 387                                                                                                          </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 388     protected TranslatedEntity getEntityType(Object entity) {                                            </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 389         return getEntityType(entity.getClass());                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 392     @Override                                                                                            </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 393     public TranslatedEntity getAssignableEntityType(String className) {                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 394         try {                                                                                            </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 395             Class&lt;?&gt; clazz = Class.forName(className);                                                   </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 396             return getEntityType(clazz);                                                                 </span>
<span class="-4826617111900065805" onmouseenter="enter('-4826617111900065805');" onmouseout="out('-4826617111900065805');" style=""> 397         } catch (java.lang.ClassNotFoundException e) {                                                   </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 398             throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400     }                                                                                                    </span>
<span  style=""> 401                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 402     @Override                                                                                            </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 403     public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                      </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 404         String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);           </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 405         if (extensionManager != null) {                                                                  </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 406             ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                  </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 407             extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                       </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 408             if (result.getResult() != null) {                                                            </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 409                 cacheKey = result.getResult();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 411         }                                                                                                </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 412         return cacheKey;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413     }                                                                                                    </span>
<span  style=""> 414                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 415     @Override                                                                                            </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 416     public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                            </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 417         List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                   </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 418         String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                            </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 419         if (extensionManager != null) {                                                                  </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 420             ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();      </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 421             extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 422             if (result.getResult() != null) {                                                            </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 423                 cacheKeyList = result.getResult();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425         }                                                                                                </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 426         return cacheKeyList;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427     }                                                                                                    </span>
<span  style=""> 428                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 429     @Override                                                                                            </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 430     public int getThresholdForFullCache() {                                                              </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 431         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 432             return thresholdForFullCache;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 433         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 434             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 435             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 437     }                                                                                                    </span>
<span  style=""> 438                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 439     @Override                                                                                            </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 440     public void setThresholdForFullCache(int thresholdForFullCache) {                                    </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 441         this.thresholdForFullCache = thresholdForFullCache;                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442     }                                                                                                    </span>
<span  style=""> 443                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 444     @Override                                                                                            </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 445     public int getTemplateThresholdForFullCache() {                                                      </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 446         if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 447             return templateThresholdForFullCache;                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 448         } else {                                                                                         </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 449             // don&#x27;t cache when not in a SandBox                                                         </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 450             return -1;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452     }                                                                                                    </span>
<span  style=""> 453                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 454     @Override                                                                                            </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 455     public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                    </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 456         this.templateThresholdForFullCache = templateThresholdForFullCache;                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457     }                                                                                                    </span>
<span  style=""> 458                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 459     @Override                                                                                            </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 460     public String getDefaultTranslationValue(Object entity, String property, Locale locale,              </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 461             String requestedDefaultValue) {                                                              </span>
<span  style=""> 462                                                                                                          </span>
<span class="-4848941814779870531" onmouseenter="enter('-4848941814779870531');" onmouseout="out('-4848941814779870531');" style=""><abbr title=" 463         if (returnBlankTranslationForNotDefaultLocale &amp;&amp; !localeMatchesDefaultLocale(locale) &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {"> 463         if (returnBlankTranslationForNotDefaultLocale &amp;&amp; !localeMatchesDefaultLocale(locale) &amp;&amp; !propertyðŸ”µ</abbr></span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 464             return &quot;&quot;;                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465         }                                                                                                </span>
<span  style=""> 466                                                                                                          </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 467         return requestedDefaultValue;                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 468     }                                                                                                    </span>
<span  style=""> 469                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 470     @Override                                                                                            </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 471     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 471     public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType stanðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 472         return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473     }                                                                                                    </span>
<span  style=""> 474                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 475     /**                                                                                                  </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 476      * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 477      *                                                                                                   </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 478      * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the         </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 479      * property matches one of the regularExpressions in that list.                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 480      *                                                                                                   </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 481      * Implementors are expected to override this method for implementation specific needs.              </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 482      *                                                                                                   </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 483      * @param entity                                                                                     </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 484      * @param property                                                                                   </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 485      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 486      */                                                                                                  </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 487     protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 488         TranslatedEntity entityType = getEntityType(entity);                                             </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 489         if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 490             for (String exceptionProperty : translationExceptionProperties) {                            </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 491                 if (property.matches(exceptionProperty)) {                                               </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 492                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 494             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 495         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 496         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 497     }                                                                                                    </span>
<span  style=""> 498                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 499     /**                                                                                                  </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 500      * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.             </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 501      * @param locale                                                                                     </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 502      * @return                                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 503      */                                                                                                  </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 504     protected boolean localeMatchesDefaultLocale(Locale locale) {                                        </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 505         String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());         </span>
<span  style=""> 506                                                                                                          </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 507         if (defaultLanguage != null &amp;&amp; locale != null) {                                                 </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 508             return defaultLanguage.equals(locale.getLanguage());                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509         }                                                                                                </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 510         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511     }                                                                                                    </span>
<span  style=""> 512                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 513     /**                                                                                                  </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style=""> 514      * Whether translations should be gathered for the provided locale.                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 515      *                                                                                                   </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style=""> 516      * @param localeCode                                                                                 </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 517      *                                                                                                   </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style=""> 518      * @return Whether translations should be gathered for the provided locale.                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 519      */                                                                                                  </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style=""> 520     protected boolean shouldTranslateLocale(String localeCode) {                                         </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style=""><abbr title=" 521         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);"> 521         org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCðŸ”µ</abbr></span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style=""> 522         if (locale == null) {                                                                            </span>
<span  style=""> 523                                                                                                          </span>
<span class="-6681681893462133916" onmouseenter="enter('-6681681893462133916');" onmouseout="out('-6681681893462133916');" style=""> 524 &lt;&lt;&lt;&lt;&lt;&lt;&lt; LEFT                                                                                             </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 525             LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);           </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 526             return true;                                                                                 </span>
<span class="7991106586064342212" onmouseenter="enter('7991106586064342212');" onmouseout="out('7991106586064342212');" style=""> 527 ||||||| BASE                                                                                             </span>
<span class="-3639349873877828882" onmouseenter="enter('-3639349873877828882');" onmouseout="out('-3639349873877828882');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"><abbr title=" 528 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwohrp23k5b6vdk93d3r*/"> 528 /*d94z9sk0k4hf9j3ijd - note the base isn&#x27;t actually empty, spork simply doesn&#x27;t generate a base - gd930kwðŸ”µ</abbr></span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 529 =======                                                                                                  </span>
<span  style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 530                                                                                                          </span>
<span class="-3037306379894869870" onmouseenter="enter('-3037306379894869870');" onmouseout="out('-3037306379894869870');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"><abbr title=" 531             throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);"> 531             throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: ðŸ”µ</abbr></span>
<span class="-1814092468913316143" onmouseenter="enter('-1814092468913316143');" onmouseout="out('-1814092468913316143');" style=""> 532 &gt;&gt;&gt;&gt;&gt;&gt;&gt; RIGHT                                                                                            </span>
<span  style=""> 533                                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 534         }                                                                                                </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style=""> 535         return !locale.getDefaultFlag();                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 537 }                                                                                                        </span>

















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3   * BroadleafCommerce Common Libraries                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18  package org.broadleafcommerce.common.i18n.service;                                                                </span>
<span  style="">  19                                                                                                                    </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23  import org.broadleafcommerce.common.cache.StatisticsService;                                                      </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25  import org.broadleafcommerce.common.extension.ItemStatus;                                                         </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26  import org.broadleafcommerce.common.extension.ResultType;                                                         </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27  import org.broadleafcommerce.common.extension.StandardCacheItem;                                                  </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28  import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                                      </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29  import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30  import org.broadleafcommerce.common.i18n.domain.Translation;                                                      </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31  import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                                  </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32  import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33  import org.broadleafcommerce.common.locale.util.LocaleUtil;                                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36  import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37  import org.springframework.stereotype.Service;                                                                    </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38  import org.springframework.transaction.annotation.Transactional;                                                  </span>
<span  style="">  39                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44  import java.util.Map.Entry;                                                                                       </span>
<span  style="">  45                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46  import javax.annotation.Resource;                                                                                 </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  47 -                                                                                                                  </span>
<span class="5660945883633846598" onmouseenter="enter('5660945883633846598');" onmouseout="out('5660945883633846598');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  48 -import net.sf.ehcache.Cache;                                                                                      </span>
<span class="-6192515751407234406" onmouseenter="enter('-6192515751407234406');" onmouseout="out('-6192515751407234406');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  49 -import net.sf.ehcache.CacheManager;                                                                               </span>
<span class="-6258432847510010429" onmouseenter="enter('-6258432847510010429');" onmouseout="out('-6258432847510010429');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  50 +import javax.cache.Cache;                                                                                         </span>
<span class="-3482083277054128214" onmouseenter="enter('-3482083277054128214');" onmouseout="out('-3482083277054128214');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  51 +import javax.cache.CacheManager;                                                                                  </span>
<span  style="">  52                                                                                                                    </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  53  @Service(&quot;blTranslationService&quot;)                                                                                  </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  54  public class TranslationServiceImpl implements TranslationService, TranslationSupport {                           </span>
<span  style="">  55                                                                                                                    </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  56      protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                             </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="">  57      private static final Translation DELETED_TRANSLATION = new TranslationImpl();                                 </span>
<span class="-3579212461233303566" onmouseenter="enter('-3579212461233303566');" onmouseout="out('-3579212461233303566');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +    private static final String TRANSLATION_CACHE_NAME = &quot;blTranslationElements&quot;;                                 </span>
<span  style="">  59                                                                                                                    </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  60      @Resource(name = &quot;blTranslationDao&quot;)                                                                          </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  61      protected TranslationDao dao;                                                                                 </span>
<span  style="">  62                                                                                                                    </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  63      @Resource(name=&quot;blStatisticsService&quot;)                                                                         </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  64      protected StatisticsService statisticsService;                                                                </span>
<span  style="">  65                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  66      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  67      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  68 -                                                                                                                  </span>
<span class="5728497805721601572" onmouseenter="enter('5728497805721601572');" onmouseout="out('5728497805721601572');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0">  69 -    protected Cache cache;                                                                                        </span>
<span  style="">  70                                                                                                                    </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  71      @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                                        </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  72      protected TranslationServiceExtensionManager extensionManager;                                                </span>
<span  style="">  73                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  74      /**                                                                                                           </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  75       * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  76       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  77      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  78      protected int thresholdForFullCache;                                                                          </span>
<span  style="">  79                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  80      /**                                                                                                           </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  81       * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for                       </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  82       * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                           </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  83       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  83       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  84       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  85      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  86      protected int templateThresholdForFullCache;                                                                  </span>
<span  style="">  87                                                                                                                    </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  88      @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                                  </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  89      protected boolean returnBlankTranslationForNotDefaultLocale;                                                  </span>
<span  style="">  90                                                                                                                    </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  91      @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                          </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  92      protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                              </span>
<span  style="">  93                                                                                                                    </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  94      @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  95      protected LocaleService localeService;                                                                        </span>
<span  style="">  96                                                                                                                    </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  97      @Resource                                                                                                     </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  98      protected List&lt;TranslationOverrideStrategy&gt; strategies;                                                       </span>
<span  style="">  99                                                                                                                    </span>
<span class="-6074783871920695309" onmouseenter="enter('-6074783871920695309');" onmouseout="out('-6074783871920695309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 100 +    @Resource(name = &quot;blCacheManager&quot;)                                                                            </span>
<span class="-3665571381079102791" onmouseenter="enter('-3665571381079102791');" onmouseout="out('-3665571381079102791');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 101 +    protected CacheManager cacheManager;                                                                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 102 +                                                                                                                  </span>
<span class="-6119508890863585039" onmouseenter="enter('-6119508890863585039');" onmouseout="out('-6119508890863585039');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 103 +    protected Cache&lt;String, Object&gt; cache;                                                                        </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 104 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 105      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 106      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style=""> 107      public Translation save(Translation translation) {                                                            </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 108          return dao.save(translation);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 109      }                                                                                                             </span>
<span  style=""> 110                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 111      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 112      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 113      public Translation save(String entityType, String entityId, String fieldName, String localeCode,              </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 114              String translatedValue) {                                                                             </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 115          TranslatedEntity te = getAssignableEntityType(entityType);                                                </span>
<span  style=""> 116                                                                                                                    </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 117          Translation translation = getTranslation(te, entityId, fieldName, localeCode);                            </span>
<span  style=""> 118                                                                                                                    </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 119          if (translation == null) {                                                                                </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 120              translation = dao.create();                                                                           </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 121              translation.setEntityType(te);                                                                        </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 122              translation.setEntityId(entityId);                                                                    </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 123              translation.setFieldName(fieldName);                                                                  </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 124              translation.setLocaleCode(localeCode);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 125          }                                                                                                         </span>
<span  style=""> 126                                                                                                                    </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 127          translation.setTranslatedValue(translatedValue);                                                          </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 128          return save(translation);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 129      }                                                                                                             </span>
<span  style=""> 130                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 131      @Override                                                                                                     </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 132      public Translation findTranslationById(Long id) {                                                             </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 133          return dao.readTranslationById(id);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 134      }                                                                                                             </span>
<span  style=""> 135                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 136      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 137      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 138      public Translation update(Long translationId, String localeCode, String translatedValue) {                    </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 139          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span  style=""> 140                                                                                                                    </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 141          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 141          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it existðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""> 142          Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);   </span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 143          if (t2 != null &amp;&amp; t != t2) {                                                                              </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 144              dao.delete(t2);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 145          }                                                                                                         </span>
<span  style=""> 146                                                                                                                    </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 147          t.setLocaleCode(localeCode);                                                                              </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 148          t.setTranslatedValue(translatedValue);                                                                    </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 149          return save(t);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 150      }                                                                                                             </span>
<span  style=""> 151                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 152      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 153      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 154      public void deleteTranslationById(Long translationId) {                                                       </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 155          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 156          dao.delete(t);                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157      }                                                                                                             </span>
<span  style=""> 158                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 159      @Override                                                                                                     </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 160      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 160      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCodðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 161          return dao.readTranslation(entity, entityId, fieldName, localeCode);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162      }                                                                                                             </span>
<span  style=""> 163                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 164      @Override                                                                                                     </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""> 165      public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {   </span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 166          TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                            </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 167          return dao.readTranslations(entityType, entityId, property);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168      }                                                                                                             </span>
<span  style=""> 169                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170      @Override                                                                                                     </span>
<span class="4838669116707005734" onmouseenter="enter('4838669116707005734');" onmouseout="out('4838669116707005734');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 171 -    public Cache getCache() {                                                                                     </span>
<span class="-4886725497768994717" onmouseenter="enter('-4886725497768994717');" onmouseout="out('-4886725497768994717');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 172 +    public Cache&lt;String, Object&gt; getCache() {                                                                     </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 173          if (cache == null) {                                                                                      </span>
<span class="-5157563271905766439" onmouseenter="enter('-5157563271905766439');" onmouseout="out('-5157563271905766439');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 174 -            cache = CacheManager.getInstance().getCache(&quot;blTranslationElements&quot;);                                 </span>
<span class="4272670215510692319" onmouseenter="enter('4272670215510692319');" onmouseout="out('4272670215510692319');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 175 +            synchronized (this) {                                                                                 </span>
<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 176 +                if (cache == null) {                                                                              </span>
<span class="617998338693725424" onmouseenter="enter('617998338693725424');" onmouseout="out('617998338693725424');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 177 +                    cache = cacheManager.getCache(getCacheName());                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 178 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 179 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180          }                                                                                                         </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 181          return cache;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182      }                                                                                                             </span>
<span  style=""> 183                                                                                                                    </span>
<span class="685589089938576682" onmouseenter="enter('685589089938576682');" onmouseout="out('685589089938576682');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +    protected String getCacheName() {                                                                             </span>
<span class="182753376077163040" onmouseenter="enter('182753376077163040');" onmouseout="out('182753376077163040');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +        return TRANSLATION_CACHE_NAME;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 187 +                                                                                                                  </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 188      @Override                                                                                                     </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 189      public String getTranslatedValue(Object entity, String property, Locale locale) {                             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 190 -        TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 191 -        String entityId = dao.getEntityId(entityType, entity);                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 192 -                                                                                                                  </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 193          String localeCode = locale.getLanguage();                                                                 </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 194          String localeCountryCode = localeCode;                                                                    </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 195          if (StringUtils.isNotBlank(locale.getCountry())) {                                                        </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 196              localeCountryCode += &quot;_&quot; + locale.getCountry();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197          }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 198 +                                                                                                                  </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 199 +        if (!shouldTranslateLocale(localeCountryCode)) {                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 200 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 201 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 202 +                                                                                                                  </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 203 +        TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 204 +        String entityId = dao.getEntityId(entityType, entity);                                                    </span>
<span  style=""> 205                                                                                                                    </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 206          if (TranslationBatchReadCache.hasCache()) {                                                               </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 207              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 207              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 208              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 209                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 210              } else {                                                                                              </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 211                  // There is no translation for this entity if it is not in the cache                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 212                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 214          }                                                                                                         </span>
<span  style=""> 215                                                                                                                    </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 216          boolean isValidForCache = false;                                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 217          if (extensionManager != null) {                                                                           </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 218              ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();                       </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 219              response.setResult(false);                                                                            </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 220              extensionManager.getProxy().isValidState(response);                                                   </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 221              isValidForCache = response.getResult();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222          }                                                                                                         </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""> 223          if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {    </span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 224              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 224              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountrðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 225                      ResultType.CATALOG_ONLY);                                                                     </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 226              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 227                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 228              } else {                                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 229                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 230              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 231          }                                                                                                         </span>
<span  style=""> 232                                                                                                                    </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 233          return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 234 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 235 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 236 +    /**                                                                                                           </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 237 +     * Whether translations should be gathered for the provided locale.                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 238 +     *                                                                                                            </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 239 +     * @param localeCode                                                                                          </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 240 +     * @return Whether translations should be gathered for the provided locale.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 241 +     */                                                                                                           </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 242 +    protected boolean shouldTranslateLocale(String localeCode) {                                                  </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 243 +        org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 244 +                                                                                                                  </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 245 +        if (locale == null) {                                                                                     </span>
<span class="-3037306379894869870" onmouseenter="enter('-3037306379894869870');" onmouseout="out('-3037306379894869870');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"><abbr title=" 246 +            throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);"> 246 +            throw new IllegalArgumentException(&quot;A locale could not be found for the provided localeCode: &quot;+ localeðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 247 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 248 +                                                                                                                  </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 249 +        return !locale.getDefaultFlag();                                                                          </span>

<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 250      }                                                                                                             </span>
<span  style=""> 251                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 252      @Override                                                                                                     </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 253      public void removeTranslationFromCache(Translation translation) {                                             </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 254          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 255              ResultType resultType = ResultType.STANDARD;                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 256              if (extensionManager != null) {                                                                       </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 257                  ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();             </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 258                  extensionManager.getProxy().getResultType(translation, response);                                 </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 259                  resultType = response.getResult();                                                                </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 260                  if (ResultType.STANDARD == resultType) {                                                          </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 261                      String key = getCacheKey(resultType, translation.getEntityType());                            </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 262                      LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                                    </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 263                      getCache().remove(key);                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 264                  } else {                                                                                          </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 265                      List&lt;String&gt; cacheKeysList =                                                                  </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""> 266                              getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());        </span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 267                      for (String key: cacheKeysList) {                                                             </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 268                          LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                                </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 269                          getCache().remove(key);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 272              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 273          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274      }                                                                                                             </span>
<span  style=""> 275                                                                                                                    </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 276      protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,                     </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""> 277                                                  String entityId, String localeCode, String localeCountryCode) {   </span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 278          boolean specificTranslationDeleted = false;                                                               </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 279          boolean generalTranslationDeleted = false;                                                                </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 280          StandardCacheItem specificTranslation = null;                                                             </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 281          StandardCacheItem generalTranslation = null;                                                              </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 282          String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                          </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 283          String generalPropertyKey = property + &quot;_&quot; + localeCode;                                                  </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 284          String response = null;                                                                                   </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 285          String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                           </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 286          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 287          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 288              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 288              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCoðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 289              if(override != null) {                                                                                </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 290                  specificTranslation = override.getSpecificItem();                                                 </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 291                  generalTranslation = override.getGeneralItem();                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 292                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 295          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 296              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 296              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297          }                                                                                                         </span>
<span  style=""> 298                                                                                                                    </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 299          if (specificTranslation != null) {                                                                        </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 300              if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                                 </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 301                  specificTranslationDeleted = true;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 302              } else {                                                                                              </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 303                  if (specificTranslation.getCacheItem() instanceof Translation) {                                  </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 304                      response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 305                  } else {                                                                                          </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 306                      response = (String) specificTranslation.getCacheItem();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307                  }                                                                                                 </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 308                  return replaceEmptyWithNullResponse(response);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310          }                                                                                                         </span>
<span  style=""> 311                                                                                                                    </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 312          if (generalTranslation != null) {                                                                         </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 313              if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                                  </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 314                  generalTranslationDeleted = true;                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 315                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 316                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 316                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re dðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 317                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 318                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 319                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 320              } else {                                                                                              </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 321                  if (generalTranslation.getCacheItem() instanceof Translation) {                                   </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 322                      response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 323                  } else {                                                                                          </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 324                      response = (String) generalTranslation.getCacheItem();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325                  }                                                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 326                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""> 327                  //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done     </span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 328                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 329                      return replaceEmptyWithNullResponse(response);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330                  }                                                                                                 </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 331                  //We have a valid general override - don&#x27;t check for general template value                       </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 332                  generalTranslationDeleted = true;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334          }                                                                                                         </span>
<span  style=""> 335                                                                                                                    </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 336          // Check for a Template Match                                                                             </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 337          if (specificTranslationDeleted) {                                                                         </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 338              // only check general properties since we explicitly deleted specific properties at standard (site) level"> 338              // only check general properties since we explicitly deleted specific properties at standard (site) leðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 339              specificPropertyKey = generalPropertyKey;                                                             </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 340          } else if (generalTranslationDeleted) {                                                                   </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 341              // only check specific properties since we explicitly deleted general properties at standard (site) level"> 341              // only check specific properties since we explicitly deleted general properties at standard (site) leðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 342              generalPropertyKey = specificPropertyKey;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 343          }                                                                                                         </span>
<span  style=""> 344                                                                                                                    </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""> 345          String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,</span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 346                      localeCountryCode, specificPropertyKey, generalPropertyKey);                                  </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 347          if (templateResponse != null) {                                                                           </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 348              response = templateResponse;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 349          }                                                                                                         </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 350          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 351      }                                                                                                             </span>
<span  style=""> 352                                                                                                                    </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 353      protected String replaceEmptyWithNullResponse(String response) {                                              </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 354          if (!StringUtils.isEmpty(response)) {                                                                     </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 355              return response;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 357          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358      }                                                                                                             </span>
<span  style=""> 359                                                                                                                    </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 360      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 360      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityTðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 361                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 361                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, ðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 362          String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                           </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 363          StandardCacheItem translation = null;                                                                     </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 364          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 365          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 366              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 366              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, ðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 367              if(override != null) {                                                                                </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 368                  translation = override.getSpecificItem();                                                         </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 369                  if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 370                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 371                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 372                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 373              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 375          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 376              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 376              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 377          }                                                                                                         </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 378          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 378          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379      }                                                                                                             </span>
<span  style=""> 380                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 381      @Override                                                                                                     </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 382      public StandardCacheItem lookupTranslationFromMap(String key,                                                 </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 383              Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {                </span>
<span  style=""> 384                                                                                                                    </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 385          StandardCacheItem cacheItem = null;                                                                       </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 386          if (propertyTranslationMap.containsKey(key)) {                                                            </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 387              Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                            </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 388              cacheItem = byEntity.get(entityId);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 389          }                                                                                                         </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 390          return cacheItem;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 391      }                                                                                                             </span>
<span  style=""> 392                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 393      @Override                                                                                                     </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 394      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 394      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;StriðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 395          Translation translation = null;                                                                           </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 396          if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                            </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 397              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);                  </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 398              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399          }                                                                                                         </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 400          if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {                      </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 401              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);                   </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 402              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403          }                                                                                                         </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 404          return translation;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405      }                                                                                                             </span>
<span  style=""> 406                                                                                                                    </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 407      protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                              </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 408          for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 409              try {                                                                                                 </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 410                  Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                                   </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 411                  if (clazz.isAssignableFrom(entityClass)) {                                                        </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 412                      return entry.getValue();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413                  }                                                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 414              } catch (ClassNotFoundException e) {                                                                  </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""> 415                  throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 416              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417          }                                                                                                         </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 418          throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 419      }                                                                                                             </span>
<span  style=""> 420                                                                                                                    </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 421      protected TranslatedEntity getEntityType(Object entity) {                                                     </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 422          return getEntityType(entity.getClass());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 423      }                                                                                                             </span>
<span  style=""> 424                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 425 +    @Override                                                                                                     </span>
<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 426      public TranslatedEntity getAssignableEntityType(String className) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 427          try {                                                                                                     </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 428              Class&lt;?&gt; clazz = Class.forName(className);                                                            </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 429              return getEntityType(clazz);                                                                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 430          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 431              throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 433      }                                                                                                             </span>
<span  style=""> 434                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 435      @Override                                                                                                     </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 436      public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                               </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 437          String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);                    </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 438          if (extensionManager != null) {                                                                           </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 439              ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                           </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 440              extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 441              if (result.getResult() != null) {                                                                     </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 442                  cacheKey = result.getResult();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 443              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 444          }                                                                                                         </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 445          return cacheKey;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 446      }                                                                                                             </span>
<span  style=""> 447                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 448      @Override                                                                                                     </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 449      public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                                     </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 450          List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                            </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 451          String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                                     </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 452          if (extensionManager != null) {                                                                           </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 453              ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();               </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 454              extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                         </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 455              if (result.getResult() != null) {                                                                     </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 456                  cacheKeyList = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 458          }                                                                                                         </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 459          return cacheKeyList;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460      }                                                                                                             </span>
<span  style=""> 461                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 462      @Override                                                                                                     </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 463      public int getThresholdForFullCache() {                                                                       </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 464          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 465              return thresholdForFullCache;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 466          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 467              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 468              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 470      }                                                                                                             </span>
<span  style=""> 471                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 472      @Override                                                                                                     </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 473      public void setThresholdForFullCache(int thresholdForFullCache) {                                             </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 474          this.thresholdForFullCache = thresholdForFullCache;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475      }                                                                                                             </span>
<span  style=""> 476                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 477      @Override                                                                                                     </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 478      public int getTemplateThresholdForFullCache() {                                                               </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 479          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 480              return templateThresholdForFullCache;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 481          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 482              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 483              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 485      }                                                                                                             </span>
<span  style=""> 486                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 487      @Override                                                                                                     </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 488      public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                             </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 489          this.templateThresholdForFullCache = templateThresholdForFullCache;                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 490      }                                                                                                             </span>
<span  style=""> 491                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 492      @Override                                                                                                     </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 493      public String getDefaultTranslationValue(Object entity, String property, Locale locale,                       </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 494              String requestedDefaultValue) {                                                                       </span>
<span  style=""> 495                                                                                                                    </span>
<span class="-4848941814779870531" onmouseenter="enter('-4848941814779870531');" onmouseout="out('-4848941814779870531');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 496 -        if (returnBlankTranslationForNotDefaultLocale &amp;&amp; !localeMatchesDefaultLocale(locale) &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {"> 496 -        if (returnBlankTranslationForNotDefaultLocale &amp;&amp; !localeMatchesDefaultLocale(locale) &amp;&amp; !propertyInDefaultðŸ”µ</abbr></span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 497 +        if (returnBlankTranslationForNotDefaultLocale                                                             </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 498 +                &amp;&amp; !localeMatchesDefaultLocale(locale)                                                            </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 499 +                &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 500              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501          }                                                                                                         </span>
<span  style=""> 502                                                                                                                    </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 503          return requestedDefaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504      }                                                                                                             </span>
<span  style=""> 505                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 506      @Override                                                                                                     </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 507      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 507      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, LisðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 508          return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509      }                                                                                                             </span>
<span  style=""> 510                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 511      /**                                                                                                           </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 512       * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 513       *                                                                                                            </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 514       * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the                  </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 515       * property matches one of the regularExpressions in that list.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 516       *                                                                                                            </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 517       * Implementors are expected to override this method for implementation specific needs.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 518       *                                                                                                            </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 519       * @param entity                                                                                              </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 520       * @param property                                                                                            </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 521       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 522       */                                                                                                           </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 523      protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {                      </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 524          TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 525          if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                         </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 526              for (String exceptionProperty : translationExceptionProperties) {                                     </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 527                  if (property.matches(exceptionProperty)) {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 528                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 532          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533      }                                                                                                             </span>
<span  style=""> 534                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 535      /**                                                                                                           </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 536       * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.                      </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 537       * @param locale                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 538       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 539       */                                                                                                           </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 540      protected boolean localeMatchesDefaultLocale(Locale locale) {                                                 </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 541          String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());                  </span>
<span  style=""> 542                                                                                                                    </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 543          if (defaultLanguage != null &amp;&amp; locale != null) {                                                          </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 544              return defaultLanguage.equals(locale.getLanguage());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 546          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547      }                                                                                                             </span>
<span  style=""> 548                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="7283730021202772321" onmouseenter="enter('7283730021202772321');" onmouseout="out('7283730021202772321');" style="">   2   * #%L                                                                                                            </span>
<span class="-4573490878212285276" onmouseenter="enter('-4573490878212285276');" onmouseout="out('-4573490878212285276');" style="">   3   * BroadleafCommerce Common Libraries                                                                             </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   4   * %%                                                                                                             </span>
<span class="1978304592184257722" onmouseenter="enter('1978304592184257722');" onmouseout="out('1978304592184257722');" style="">   5   * Copyright (C) 2009 - 2016 Broadleaf Commerce                                                                   </span>
<span class="305149960078729975" onmouseenter="enter('305149960078729975');" onmouseout="out('305149960078729975');" style="">   6   * %%                                                                                                             </span>
<span class="4430451662992926684" onmouseenter="enter('4430451662992926684');" onmouseout="out('4430451662992926684');" style="">   7   * Licensed under the Broadleaf Fair Use License Agreement, Version 1.0                                           </span>
<span class="8206099442596739681" onmouseenter="enter('8206099442596739681');" onmouseout="out('8206099442596739681');" style="">   8   * (the &quot;Fair Use License&quot; located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)             </span>
<span class="-4338570431005413339" onmouseenter="enter('-4338570431005413339');" onmouseout="out('-4338570431005413339');" style="">   9   * unless the restrictions on use therein are violated and require payment to Broadleaf in which case             </span>
<span class="-5739615313038505012" onmouseenter="enter('-5739615313038505012');" onmouseout="out('-5739615313038505012');" style="">  10   * the Broadleaf End User License Agreement (EULA), Version 1.1                                                   </span>
<span class="-196756316119086558" onmouseenter="enter('-196756316119086558');" onmouseout="out('-196756316119086558');" style="">  11   * (the &quot;Commercial License&quot; located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)          </span>
<span class="-3691518077331372763" onmouseenter="enter('-3691518077331372763');" onmouseout="out('-3691518077331372763');" style="">  12   * shall apply.                                                                                                   </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">  13   *                                                                                                                </span>
<span class="-3333434530440420199" onmouseenter="enter('-3333434530440420199');" onmouseout="out('-3333434530440420199');" style=""><abbr title="  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;)">  14   * Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the &quot;Custom License&quot;ðŸ”µ</abbr></span>
<span class="-2556272520656899284" onmouseenter="enter('-2556272520656899284');" onmouseout="out('-2556272520656899284');" style="">  15   * between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.</span>
<span class="3739716589509259313" onmouseenter="enter('3739716589509259313');" onmouseout="out('3739716589509259313');" style="">  16   * #L%                                                                                                            </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  17   */                                                                                                               </span>
<span class="3902602085833793388" onmouseenter="enter('3902602085833793388');" onmouseout="out('3902602085833793388');" style="">  18  package org.broadleafcommerce.common.i18n.service;                                                                </span>
<span  style="">  19                                                                                                                    </span>
<span class="-8105670274694144339" onmouseenter="enter('-8105670274694144339');" onmouseout="out('-8105670274694144339');" style="">  20  import org.apache.commons.lang3.StringUtils;                                                                      </span>
<span class="494203924075255110" onmouseenter="enter('494203924075255110');" onmouseout="out('494203924075255110');" style="">  21  import org.apache.commons.logging.Log;                                                                            </span>
<span class="-8227491862907452788" onmouseenter="enter('-8227491862907452788');" onmouseout="out('-8227491862907452788');" style="">  22  import org.apache.commons.logging.LogFactory;                                                                     </span>
<span class="8649674970413961577" onmouseenter="enter('8649674970413961577');" onmouseout="out('8649674970413961577');" style="">  23  import org.broadleafcommerce.common.cache.StatisticsService;                                                      </span>
<span class="-7911969485500261220" onmouseenter="enter('-7911969485500261220');" onmouseout="out('-7911969485500261220');" style="">  24  import org.broadleafcommerce.common.extension.ExtensionResultHolder;                                              </span>
<span class="2407443049805877959" onmouseenter="enter('2407443049805877959');" onmouseout="out('2407443049805877959');" style="">  25  import org.broadleafcommerce.common.extension.ItemStatus;                                                         </span>
<span class="4866956120799998835" onmouseenter="enter('4866956120799998835');" onmouseout="out('4866956120799998835');" style="">  26  import org.broadleafcommerce.common.extension.ResultType;                                                         </span>
<span class="4776392059602735436" onmouseenter="enter('4776392059602735436');" onmouseout="out('4776392059602735436');" style="">  27  import org.broadleafcommerce.common.extension.StandardCacheItem;                                                  </span>
<span class="5225229877803638625" onmouseenter="enter('5225229877803638625');" onmouseout="out('5225229877803638625');" style="">  28  import org.broadleafcommerce.common.i18n.dao.TranslationDao;                                                      </span>
<span class="-4810625992201169553" onmouseenter="enter('-4810625992201169553');" onmouseout="out('-4810625992201169553');" style="">  29  import org.broadleafcommerce.common.i18n.domain.TranslatedEntity;                                                 </span>
<span class="2302039805076540014" onmouseenter="enter('2302039805076540014');" onmouseout="out('2302039805076540014');" style="">  30  import org.broadleafcommerce.common.i18n.domain.Translation;                                                      </span>
<span class="-5532422728873105180" onmouseenter="enter('-5532422728873105180');" onmouseout="out('-5532422728873105180');" style="">  31  import org.broadleafcommerce.common.i18n.domain.TranslationImpl;                                                  </span>
<span class="3092944370275379663" onmouseenter="enter('3092944370275379663');" onmouseout="out('3092944370275379663');" style="">  32  import org.broadleafcommerce.common.locale.service.LocaleService;                                                 </span>
<span class="-2348192880124019402" onmouseenter="enter('-2348192880124019402');" onmouseout="out('-2348192880124019402');" style="">  33  import org.broadleafcommerce.common.locale.util.LocaleUtil;                                                       </span>
<span class="-2818686525334833130" onmouseenter="enter('-2818686525334833130');" onmouseout="out('-2818686525334833130');" style="">  34  import org.broadleafcommerce.common.sandbox.SandBoxHelper;                                                        </span>
<span class="8689743329875302887" onmouseenter="enter('8689743329875302887');" onmouseout="out('8689743329875302887');" style="">  35  import org.broadleafcommerce.common.web.BroadleafRequestContext;                                                  </span>
<span class="-7404358339654927739" onmouseenter="enter('-7404358339654927739');" onmouseout="out('-7404358339654927739');" style="">  36  import org.springframework.beans.factory.annotation.Value;                                                        </span>
<span class="-5275076188864034753" onmouseenter="enter('-5275076188864034753');" onmouseout="out('-5275076188864034753');" style="">  37  import org.springframework.stereotype.Service;                                                                    </span>
<span class="4419089678332371422" onmouseenter="enter('4419089678332371422');" onmouseout="out('4419089678332371422');" style="">  38  import org.springframework.transaction.annotation.Transactional;                                                  </span>
<span  style="">  39                                                                                                                    </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  40  import java.util.ArrayList;                                                                                       </span>
<span class="-1786020958497218848" onmouseenter="enter('-1786020958497218848');" onmouseout="out('-1786020958497218848');" style="">  41  import java.util.List;                                                                                            </span>
<span class="-4563680703184802189" onmouseenter="enter('-4563680703184802189');" onmouseout="out('-4563680703184802189');" style="">  42  import java.util.Locale;                                                                                          </span>
<span class="6618655971923850695" onmouseenter="enter('6618655971923850695');" onmouseout="out('6618655971923850695');" style="">  43  import java.util.Map;                                                                                             </span>
<span class="2393042000349901971" onmouseenter="enter('2393042000349901971');" onmouseout="out('2393042000349901971');" style="">  44  import java.util.Map.Entry;                                                                                       </span>
<span  style="">  45                                                                                                                    </span>
<span class="-5292076237369528758" onmouseenter="enter('-5292076237369528758');" onmouseout="out('-5292076237369528758');" style="">  46  import javax.annotation.Resource;                                                                                 </span>
<span  style="">  47                                                                                                                    </span>
<span class="5660945883633846598" onmouseenter="enter('5660945883633846598');" onmouseout="out('5660945883633846598');" style="">  48  import net.sf.ehcache.Cache;                                                                                      </span>
<span class="-6192515751407234406" onmouseenter="enter('-6192515751407234406');" onmouseout="out('-6192515751407234406');" style="">  49  import net.sf.ehcache.CacheManager;                                                                               </span>


<span  style="">  50                                                                                                                    </span>
<span class="-4969197714747632503" onmouseenter="enter('-4969197714747632503');" onmouseout="out('-4969197714747632503');" style="">  51  @Service(&quot;blTranslationService&quot;)                                                                                  </span>
<span class="-5092760609107914372" onmouseenter="enter('-5092760609107914372');" onmouseout="out('-5092760609107914372');" style="">  52  public class TranslationServiceImpl implements TranslationService, TranslationSupport {                           </span>
<span  style="">  53                                                                                                                    </span>
<span class="-1515064447895178469" onmouseenter="enter('-1515064447895178469');" onmouseout="out('-1515064447895178469');" style="">  54      protected static final Log LOG = LogFactory.getLog(TranslationServiceImpl.class);                             </span>
<span class="-3309288372722201629" onmouseenter="enter('-3309288372722201629');" onmouseout="out('-3309288372722201629');" style="">  55      private static final Translation DELETED_TRANSLATION = new TranslationImpl();                                 </span>

<span  style="">  56                                                                                                                    </span>
<span class="-4256966979053158677" onmouseenter="enter('-4256966979053158677');" onmouseout="out('-4256966979053158677');" style="">  57      @Resource(name = &quot;blTranslationDao&quot;)                                                                          </span>
<span class="3641940799778236869" onmouseenter="enter('3641940799778236869');" onmouseout="out('3641940799778236869');" style="">  58      protected TranslationDao dao;                                                                                 </span>
<span  style="">  59                                                                                                                    </span>
<span class="3217789031976136948" onmouseenter="enter('3217789031976136948');" onmouseout="out('3217789031976136948');" style="">  60      @Resource(name=&quot;blStatisticsService&quot;)                                                                         </span>
<span class="835266198425147367" onmouseenter="enter('835266198425147367');" onmouseout="out('835266198425147367');" style="">  61      protected StatisticsService statisticsService;                                                                </span>
<span  style="">  62                                                                                                                    </span>
<span class="-7030764210296949798" onmouseenter="enter('-7030764210296949798');" onmouseout="out('-7030764210296949798');" style="">  63      @Resource(name=&quot;blSandBoxHelper&quot;)                                                                             </span>
<span class="-7799183597372200632" onmouseenter="enter('-7799183597372200632');" onmouseout="out('-7799183597372200632');" style="">  64      protected SandBoxHelper sandBoxHelper;                                                                        </span>
<span  style="">  65                                                                                                                    </span>
<span class="5728497805721601572" onmouseenter="enter('5728497805721601572');" onmouseout="out('5728497805721601572');" style="">  66      protected Cache cache;                                                                                        </span>
<span  style="">  67                                                                                                                    </span>
<span class="-3547006080916030042" onmouseenter="enter('-3547006080916030042');" onmouseout="out('-3547006080916030042');" style="">  68      @Resource(name=&quot;blTranslationServiceExtensionManager&quot;)                                                        </span>
<span class="5126576004228377889" onmouseenter="enter('5126576004228377889');" onmouseout="out('5126576004228377889');" style="">  69      protected TranslationServiceExtensionManager extensionManager;                                                </span>
<span  style="">  70                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  71      /**                                                                                                           </span>
<span class="-3093872994315627704" onmouseenter="enter('-3093872994315627704');" onmouseout="out('-3093872994315627704');" style="">  72       * The default is 1000. Use the &#x27;translation.thresholdForFullCache&#x27; to change the value.                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  73       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  74      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="850013986116541011" onmouseenter="enter('850013986116541011');" onmouseout="out('850013986116541011');" style="">  75      protected int thresholdForFullCache;                                                                          </span>
<span  style="">  76                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  77      /**                                                                                                           </span>
<span class="4149507741479562437" onmouseenter="enter('4149507741479562437');" onmouseout="out('4149507741479562437');" style="">  78       * The default is 1000. This property also uses &#x27;translation.thresholdForFullCache&#x27; for                       </span>
<span class="779705240124289339" onmouseenter="enter('779705240124289339');" onmouseout="out('779705240124289339');" style="">  79       * backwards compatibility. If you wish to change this value, you&#x27;ll need to extend                           </span>
<span class="-3798125159540735479" onmouseenter="enter('-3798125159540735479');" onmouseout="out('-3798125159540735479');" style=""><abbr title="  80       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCache()}">  80       * TranslationServiceImpl and return a custom value for {@link TranslationSupport#getTemplateThresholdForFullCðŸ”µ</abbr></span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  81       */                                                                                                           </span>
<span class="6063225988308154022" onmouseenter="enter('6063225988308154022');" onmouseout="out('6063225988308154022');" style="">  82      @Value(&quot;${translation.thresholdForFullCache:1000}&quot;)                                                           </span>
<span class="-4476265864235557073" onmouseenter="enter('-4476265864235557073');" onmouseout="out('-4476265864235557073');" style="">  83      protected int templateThresholdForFullCache;                                                                  </span>
<span  style="">  84                                                                                                                    </span>
<span class="3524010452909497611" onmouseenter="enter('3524010452909497611');" onmouseout="out('3524010452909497611');" style="">  85      @Value(&quot;${returnBlankTranslationForNotDefaultLocale:false}&quot;)                                                  </span>
<span class="4264480247967551472" onmouseenter="enter('4264480247967551472');" onmouseout="out('4264480247967551472');" style="">  86      protected boolean returnBlankTranslationForNotDefaultLocale;                                                  </span>
<span  style="">  87                                                                                                                    </span>
<span class="8666632820095542697" onmouseenter="enter('8666632820095542697');" onmouseout="out('8666632820095542697');" style="">  88      @Resource(name = &quot;blTranslationExceptionProperties&quot;)                                                          </span>
<span class="9192801512157900946" onmouseenter="enter('9192801512157900946');" onmouseout="out('9192801512157900946');" style="">  89      protected List&lt;String&gt; translationExceptionProperties = new ArrayList&lt;String&gt;();                              </span>
<span  style="">  90                                                                                                                    </span>
<span class="6008764380027861894" onmouseenter="enter('6008764380027861894');" onmouseout="out('6008764380027861894');" style="">  91      @Resource(name = &quot;blLocaleService&quot;)                                                                           </span>
<span class="-5080270678165807269" onmouseenter="enter('-5080270678165807269');" onmouseout="out('-5080270678165807269');" style="">  92      protected LocaleService localeService;                                                                        </span>
<span  style="">  93                                                                                                                    </span>
<span class="-2309360235309114106" onmouseenter="enter('-2309360235309114106');" onmouseout="out('-2309360235309114106');" style="">  94      @Resource                                                                                                     </span>
<span class="-335117526376212399" onmouseenter="enter('-335117526376212399');" onmouseout="out('-335117526376212399');" style="">  95      protected List&lt;TranslationOverrideStrategy&gt; strategies;                                                       </span>
<span  style="">  96                                                                                                                    </span>





<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style="">  97      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style="">  98      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-5026940951401457411" onmouseenter="enter('-5026940951401457411');" onmouseout="out('-5026940951401457411');" style="">  99      public Translation save(Translation translation) {                                                            </span>
<span class="1248445214951772071" onmouseenter="enter('1248445214951772071');" onmouseout="out('1248445214951772071');" style=""> 100          return dao.save(translation);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 101      }                                                                                                             </span>
<span  style=""> 102                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 103      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 104      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-3021784746266364748" onmouseenter="enter('-3021784746266364748');" onmouseout="out('-3021784746266364748');" style=""> 105      public Translation save(String entityType, String entityId, String fieldName, String localeCode,              </span>
<span class="-331559722644418845" onmouseenter="enter('-331559722644418845');" onmouseout="out('-331559722644418845');" style=""> 106              String translatedValue) {                                                                             </span>
<span class="6355559016492356298" onmouseenter="enter('6355559016492356298');" onmouseout="out('6355559016492356298');" style=""> 107          TranslatedEntity te = getAssignableEntityType(entityType);                                                </span>
<span  style=""> 108                                                                                                                    </span>
<span class="-6711457685574130599" onmouseenter="enter('-6711457685574130599');" onmouseout="out('-6711457685574130599');" style=""> 109          Translation translation = getTranslation(te, entityId, fieldName, localeCode);                            </span>
<span  style=""> 110                                                                                                                    </span>
<span class="7624642046509501760" onmouseenter="enter('7624642046509501760');" onmouseout="out('7624642046509501760');" style=""> 111          if (translation == null) {                                                                                </span>
<span class="3186764489727278688" onmouseenter="enter('3186764489727278688');" onmouseout="out('3186764489727278688');" style=""> 112              translation = dao.create();                                                                           </span>
<span class="6450784792320057431" onmouseenter="enter('6450784792320057431');" onmouseout="out('6450784792320057431');" style=""> 113              translation.setEntityType(te);                                                                        </span>
<span class="7448098839632729730" onmouseenter="enter('7448098839632729730');" onmouseout="out('7448098839632729730');" style=""> 114              translation.setEntityId(entityId);                                                                    </span>
<span class="-2595579502242154658" onmouseenter="enter('-2595579502242154658');" onmouseout="out('-2595579502242154658');" style=""> 115              translation.setFieldName(fieldName);                                                                  </span>
<span class="-8137091880437585419" onmouseenter="enter('-8137091880437585419');" onmouseout="out('-8137091880437585419');" style=""> 116              translation.setLocaleCode(localeCode);                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 117          }                                                                                                         </span>
<span  style=""> 118                                                                                                                    </span>
<span class="-1684565861521035899" onmouseenter="enter('-1684565861521035899');" onmouseout="out('-1684565861521035899');" style=""> 119          translation.setTranslatedValue(translatedValue);                                                          </span>
<span class="-941711918426392729" onmouseenter="enter('-941711918426392729');" onmouseout="out('-941711918426392729');" style=""> 120          return save(translation);                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121      }                                                                                                             </span>
<span  style=""> 122                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 123      @Override                                                                                                     </span>
<span class="2941049931464611445" onmouseenter="enter('2941049931464611445');" onmouseout="out('2941049931464611445');" style=""> 124      public Translation findTranslationById(Long id) {                                                             </span>
<span class="3349378483942208921" onmouseenter="enter('3349378483942208921');" onmouseout="out('3349378483942208921');" style=""> 125          return dao.readTranslationById(id);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 126      }                                                                                                             </span>
<span  style=""> 127                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 128      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 129      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-678925402186904295" onmouseenter="enter('-678925402186904295');" onmouseout="out('-678925402186904295');" style=""> 130      public Translation update(Long translationId, String localeCode, String translatedValue) {                    </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 131          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span  style=""> 132                                                                                                                    </span>
<span class="-3737796267979800243" onmouseenter="enter('-3737796267979800243');" onmouseout="out('-3737796267979800243');" style=""><abbr title=" 133          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it exists"> 133          // Check to see if there is another translation that matches this updated one. We&#x27;ll remove it if it existðŸ”µ</abbr></span>
<span class="-1876596457563239090" onmouseenter="enter('-1876596457563239090');" onmouseout="out('-1876596457563239090');" style=""> 134          Translation t2 = dao.readTranslation(t.getEntityType(), t.getEntityId(), t.getFieldName(), localeCode);   </span>
<span class="4753243232770596798" onmouseenter="enter('4753243232770596798');" onmouseout="out('4753243232770596798');" style=""> 135          if (t2 != null &amp;&amp; t != t2) {                                                                              </span>
<span class="1098464091942821621" onmouseenter="enter('1098464091942821621');" onmouseout="out('1098464091942821621');" style=""> 136              dao.delete(t2);                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137          }                                                                                                         </span>
<span  style=""> 138                                                                                                                    </span>
<span class="-2637556871482090325" onmouseenter="enter('-2637556871482090325');" onmouseout="out('-2637556871482090325');" style=""> 139          t.setLocaleCode(localeCode);                                                                              </span>
<span class="-190204043916545673" onmouseenter="enter('-190204043916545673');" onmouseout="out('-190204043916545673');" style=""> 140          t.setTranslatedValue(translatedValue);                                                                    </span>
<span class="-1850623328188038112" onmouseenter="enter('-1850623328188038112');" onmouseout="out('-1850623328188038112');" style=""> 141          return save(t);                                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 142      }                                                                                                             </span>
<span  style=""> 143                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 144      @Override                                                                                                     </span>
<span class="5049387329381023556" onmouseenter="enter('5049387329381023556');" onmouseout="out('5049387329381023556');" style=""> 145      @Transactional(&quot;blTransactionManager&quot;)                                                                        </span>
<span class="-4172419973751251438" onmouseenter="enter('-4172419973751251438');" onmouseout="out('-4172419973751251438');" style=""> 146      public void deleteTranslationById(Long translationId) {                                                       </span>
<span class="2648025329341220031" onmouseenter="enter('2648025329341220031');" onmouseout="out('2648025329341220031');" style=""> 147          Translation t = dao.readTranslationById(translationId);                                                   </span>
<span class="-6450696018465208738" onmouseenter="enter('-6450696018465208738');" onmouseout="out('-6450696018465208738');" style=""> 148          dao.delete(t);                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 149      }                                                                                                             </span>
<span  style=""> 150                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 151      @Override                                                                                                     </span>
<span class="-2144392026684541946" onmouseenter="enter('-2144392026684541946');" onmouseout="out('-2144392026684541946');" style=""><abbr title=" 152      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCode) {"> 152      public Translation getTranslation(TranslatedEntity entity, String entityId, String fieldName, String localeCodðŸ”µ</abbr></span>
<span class="4205729862737385801" onmouseenter="enter('4205729862737385801');" onmouseout="out('4205729862737385801');" style=""> 153          return dao.readTranslation(entity, entityId, fieldName, localeCode);                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 154      }                                                                                                             </span>
<span  style=""> 155                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 156      @Override                                                                                                     </span>
<span class="-4158253071110345769" onmouseenter="enter('-4158253071110345769');" onmouseout="out('-4158253071110345769');" style=""> 157      public List&lt;Translation&gt; getTranslations(String ceilingEntityClassname, String entityId, String property) {   </span>
<span class="2716453412110920891" onmouseenter="enter('2716453412110920891');" onmouseout="out('2716453412110920891');" style=""> 158          TranslatedEntity entityType = getAssignableEntityType(ceilingEntityClassname);                            </span>
<span class="1313656657524272138" onmouseenter="enter('1313656657524272138');" onmouseout="out('1313656657524272138');" style=""> 159          return dao.readTranslations(entityType, entityId, property);                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160      }                                                                                                             </span>
<span  style=""> 161                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 162      @Override                                                                                                     </span>
<span class="4838669116707005734" onmouseenter="enter('4838669116707005734');" onmouseout="out('4838669116707005734');" style=""> 163      public Cache getCache() {                                                                                     </span>

<span class="3690595679967484902" onmouseenter="enter('3690595679967484902');" onmouseout="out('3690595679967484902');" style=""> 164          if (cache == null) {                                                                                      </span>
<span class="-5157563271905766439" onmouseenter="enter('-5157563271905766439');" onmouseout="out('-5157563271905766439');" style=""> 165              cache = CacheManager.getInstance().getCache(&quot;blTranslationElements&quot;);                                 </span>





<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 166          }                                                                                                         </span>
<span class="8112173048397977288" onmouseenter="enter('8112173048397977288');" onmouseout="out('8112173048397977288');" style=""> 167          return cache;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168      }                                                                                                             </span>
<span  style=""> 169                                                                                                                    </span>




<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 170      @Override                                                                                                     </span>
<span class="-3610112395631191305" onmouseenter="enter('-3610112395631191305');" onmouseout="out('-3610112395631191305');" style=""> 171      public String getTranslatedValue(Object entity, String property, Locale locale) {                             </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 172 -        TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 173 -        String entityId = dao.getEntityId(entityType, entity);                                                    </span>
<span  style="background-color: rgba(255, 0, 0, 0.2); margin: 0"> 174 -                                                                                                                  </span>
<span class="6162860701239477464" onmouseenter="enter('6162860701239477464');" onmouseout="out('6162860701239477464');" style=""> 175          String localeCode = locale.getLanguage();                                                                 </span>
<span class="1655999750355988413" onmouseenter="enter('1655999750355988413');" onmouseout="out('1655999750355988413');" style=""> 176          String localeCountryCode = localeCode;                                                                    </span>
<span class="5495131611227743324" onmouseenter="enter('5495131611227743324');" onmouseout="out('5495131611227743324');" style=""> 177          if (StringUtils.isNotBlank(locale.getCountry())) {                                                        </span>
<span class="-2123218499592291286" onmouseenter="enter('-2123218499592291286');" onmouseout="out('-2123218499592291286');" style=""> 178              localeCountryCode += &quot;_&quot; + locale.getCountry();                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 179          }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 180 +                                                                                                                  </span>
<span class="350258884684332847" onmouseenter="enter('350258884684332847');" onmouseout="out('350258884684332847');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 181 +        if (!shouldTranslateLocale(localeCountryCode)) {                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 182 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 183 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 184 +                                                                                                                  </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 185 +        TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="-4315844521495424748" onmouseenter="enter('-4315844521495424748');" onmouseout="out('-4315844521495424748');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 186 +        String entityId = dao.getEntityId(entityType, entity);                                                    </span>
<span  style=""> 187                                                                                                                    </span>
<span class="-8910262485688301070" onmouseenter="enter('-8910262485688301070');" onmouseout="out('-8910262485688301070');" style=""> 188          if (TranslationBatchReadCache.hasCache()) {                                                               </span>
<span class="-6409337639457090814" onmouseenter="enter('-6409337639457090814');" onmouseout="out('-6409337639457090814');" style=""><abbr title=" 189              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localeCountryCode);"> 189              Translation translation = TranslationBatchReadCache.getFromCache(entityType, entityId, property, localðŸ”µ</abbr></span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 190              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 191                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 192              } else {                                                                                              </span>
<span class="4611148976654548359" onmouseenter="enter('4611148976654548359');" onmouseout="out('4611148976654548359');" style=""> 193                  // There is no translation for this entity if it is not in the cache                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 194                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196          }                                                                                                         </span>
<span  style=""> 197                                                                                                                    </span>
<span class="2571721633030556567" onmouseenter="enter('2571721633030556567');" onmouseout="out('2571721633030556567');" style=""> 198          boolean isValidForCache = false;                                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 199          if (extensionManager != null) {                                                                           </span>
<span class="2604695025021693140" onmouseenter="enter('2604695025021693140');" onmouseout="out('2604695025021693140');" style=""> 200              ExtensionResultHolder&lt;Boolean&gt; response = new ExtensionResultHolder&lt;Boolean&gt;();                       </span>
<span class="-8508480569024136382" onmouseenter="enter('-8508480569024136382');" onmouseout="out('-8508480569024136382');" style=""> 201              response.setResult(false);                                                                            </span>
<span class="5812250061512499353" onmouseenter="enter('5812250061512499353');" onmouseout="out('5812250061512499353');" style=""> 202              extensionManager.getProxy().isValidState(response);                                                   </span>
<span class="-563746909959864110" onmouseenter="enter('-563746909959864110');" onmouseout="out('-563746909959864110');" style=""> 203              isValidForCache = response.getResult();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204          }                                                                                                         </span>
<span class="-4595713850266243020" onmouseenter="enter('-4595713850266243020');" onmouseout="out('-4595713850266243020');" style=""> 205          if (!BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox() || !isValidForCache) {    </span>
<span class="-1690028297243532811" onmouseenter="enter('-1690028297243532811');" onmouseout="out('-1690028297243532811');" style=""><abbr title=" 206              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountryCode,"> 206              Translation translation = dao.readTranslation(entityType, entityId, property, localeCode, localeCountrðŸ”µ</abbr></span>
<span class="-5409176498122889832" onmouseenter="enter('-5409176498122889832');" onmouseout="out('-5409176498122889832');" style=""> 207                      ResultType.CATALOG_ONLY);                                                                     </span>
<span class="-3646074144402169054" onmouseenter="enter('-3646074144402169054');" onmouseout="out('-3646074144402169054');" style=""> 208              if (translation != null) {                                                                            </span>
<span class="-8089029346428338761" onmouseenter="enter('-8089029346428338761');" onmouseout="out('-8089029346428338761');" style=""> 209                  return translation.getTranslatedValue();                                                          </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 210              } else {                                                                                              </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 211                  return null;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213          }                                                                                                         </span>
<span  style=""> 214                                                                                                                    </span>
<span class="-8968473907148348127" onmouseenter="enter('-8968473907148348127');" onmouseout="out('-8968473907148348127');" style=""> 215          return getOverrideTranslatedValue(property, entityType, entityId, localeCode, localeCountryCode);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 216 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 217 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 218 +    /**                                                                                                           </span>
<span class="-8545519969728615332" onmouseenter="enter('-8545519969728615332');" onmouseout="out('-8545519969728615332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 219 +     * Whether translations should be gathered for the provided locale.                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 220 +     *                                                                                                            </span>
<span class="-4075008591275953951" onmouseenter="enter('-4075008591275953951');" onmouseout="out('-4075008591275953951');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 221 +     * @param localeCode                                                                                          </span>
<span class="7158393001280914952" onmouseenter="enter('7158393001280914952');" onmouseout="out('7158393001280914952');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 222 +     * @return Whether translations should be gathered for the provided locale.                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 223 +     */                                                                                                           </span>
<span class="1903996536988144043" onmouseenter="enter('1903996536988144043');" onmouseout="out('1903996536988144043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 224 +    protected boolean shouldTranslateLocale(String localeCode) {                                                  </span>
<span class="-1486776238678068429" onmouseenter="enter('-1486776238678068429');" onmouseout="out('-1486776238678068429');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 225 +        org.broadleafcommerce.common.locale.domain.Locale locale = localeService.findLocaleByCode(localeCode);    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 226 +                                                                                                                  </span>
<span class="-4848599432709717146" onmouseenter="enter('-4848599432709717146');" onmouseout="out('-4848599432709717146');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 227 +        if (locale == null) {                                                                                     </span>
<span class="5480108089254840469" onmouseenter="enter('5480108089254840469');" onmouseout="out('5480108089254840469');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 228 +            LOG.warn(&quot;A locale could not be found for the provided localeCode: &quot;+ localeCode);                    </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 229 +            return true;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 230 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 231 +                                                                                                                  </span>
<span class="7368007824537987849" onmouseenter="enter('7368007824537987849');" onmouseout="out('7368007824537987849');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 232 +        return !locale.getDefaultFlag();                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 233      }                                                                                                             </span>
<span  style=""> 234                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 235      @Override                                                                                                     </span>
<span class="7941143873124722510" onmouseenter="enter('7941143873124722510');" onmouseout="out('7941143873124722510');" style=""> 236      public void removeTranslationFromCache(Translation translation) {                                             </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 237          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-599264878207722726" onmouseenter="enter('-599264878207722726');" onmouseout="out('-599264878207722726');" style=""> 238              ResultType resultType = ResultType.STANDARD;                                                          </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 239              if (extensionManager != null) {                                                                       </span>
<span class="-1157796725197227576" onmouseenter="enter('-1157796725197227576');" onmouseout="out('-1157796725197227576');" style=""> 240                  ExtensionResultHolder&lt;ResultType&gt; response = new ExtensionResultHolder&lt;ResultType&gt;();             </span>
<span class="-7469700647024489246" onmouseenter="enter('-7469700647024489246');" onmouseout="out('-7469700647024489246');" style=""> 241                  extensionManager.getProxy().getResultType(translation, response);                                 </span>
<span class="-1155299446346540501" onmouseenter="enter('-1155299446346540501');" onmouseout="out('-1155299446346540501');" style=""> 242                  resultType = response.getResult();                                                                </span>
<span class="-8846228755034494210" onmouseenter="enter('-8846228755034494210');" onmouseout="out('-8846228755034494210');" style=""> 243                  if (ResultType.STANDARD == resultType) {                                                          </span>
<span class="-331504048921860470" onmouseenter="enter('-331504048921860470');" onmouseout="out('-331504048921860470');" style=""> 244                      String key = getCacheKey(resultType, translation.getEntityType());                            </span>
<span class="-2711023983839584043" onmouseenter="enter('-2711023983839584043');" onmouseout="out('-2711023983839584043');" style=""> 245                      LOG.debug(&quot;Removing key [&quot; + key + &quot;] for STANDARD site&quot;);                                    </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 246                      getCache().remove(key);                                                                       </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 247                  } else {                                                                                          </span>
<span class="879847884277417151" onmouseenter="enter('879847884277417151');" onmouseout="out('879847884277417151');" style=""> 248                      List&lt;String&gt; cacheKeysList =                                                                  </span>
<span class="8369889147867576005" onmouseenter="enter('8369889147867576005');" onmouseout="out('8369889147867576005');" style=""> 249                              getCacheKeyListForTemplateSite(translation.getEntityType().getFriendlyType());        </span>
<span class="2994216932758826686" onmouseenter="enter('2994216932758826686');" onmouseout="out('2994216932758826686');" style=""> 250                      for (String key: cacheKeysList) {                                                             </span>
<span class="-6287757546188275766" onmouseenter="enter('-6287757546188275766');" onmouseout="out('-6287757546188275766');" style=""> 251                          LOG.debug(&quot;Removing key [&quot; + key + &quot;] for TEMPLATE site&quot;);                                </span>
<span class="6146464737417226479" onmouseenter="enter('6146464737417226479');" onmouseout="out('6146464737417226479');" style=""> 252                          getCache().remove(key);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 253                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 254                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 255              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 256          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 257      }                                                                                                             </span>
<span  style=""> 258                                                                                                                    </span>
<span class="4135386644614040696" onmouseenter="enter('4135386644614040696');" onmouseout="out('4135386644614040696');" style=""> 259      protected String getOverrideTranslatedValue(String property, TranslatedEntity entityType,                     </span>
<span class="2362421030160058589" onmouseenter="enter('2362421030160058589');" onmouseout="out('2362421030160058589');" style=""> 260                                                  String entityId, String localeCode, String localeCountryCode) {   </span>
<span class="-5459725592104459351" onmouseenter="enter('-5459725592104459351');" onmouseout="out('-5459725592104459351');" style=""> 261          boolean specificTranslationDeleted = false;                                                               </span>
<span class="5093185000504246591" onmouseenter="enter('5093185000504246591');" onmouseout="out('5093185000504246591');" style=""> 262          boolean generalTranslationDeleted = false;                                                                </span>
<span class="7508428896669277580" onmouseenter="enter('7508428896669277580');" onmouseout="out('7508428896669277580');" style=""> 263          StandardCacheItem specificTranslation = null;                                                             </span>
<span class="3183474989354331097" onmouseenter="enter('3183474989354331097');" onmouseout="out('3183474989354331097');" style=""> 264          StandardCacheItem generalTranslation = null;                                                              </span>
<span class="-2792440719555484148" onmouseenter="enter('-2792440719555484148');" onmouseout="out('-2792440719555484148');" style=""> 265          String specificPropertyKey = property + &quot;_&quot; + localeCountryCode;                                          </span>
<span class="8147379559605827432" onmouseenter="enter('8147379559605827432');" onmouseout="out('8147379559605827432');" style=""> 266          String generalPropertyKey = property + &quot;_&quot; + localeCode;                                                  </span>
<span class="-1267882250955994239" onmouseenter="enter('-1267882250955994239');" onmouseout="out('-1267882250955994239');" style=""> 267          String response = null;                                                                                   </span>
<span class="5766840619343226030" onmouseenter="enter('5766840619343226030');" onmouseout="out('5766840619343226030');" style=""> 268          String cacheKey = getCacheKey(ResultType.STANDARD, entityType);                                           </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 269          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 270          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="6448463090830107173" onmouseenter="enter('6448463090830107173');" onmouseout="out('6448463090830107173');" style=""><abbr title=" 271              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCode, cacheKey);"> 271              override = strategy.getLocaleBasedOverride(property, entityType, entityId, localeCode, localeCountryCoðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 272              if(override != null) {                                                                                </span>
<span class="6163494614586989517" onmouseenter="enter('6163494614586989517');" onmouseout="out('6163494614586989517');" style=""> 273                  specificTranslation = override.getSpecificItem();                                                 </span>
<span class="7172681236942917904" onmouseenter="enter('7172681236942917904');" onmouseout="out('7172681236942917904');" style=""> 274                  generalTranslation = override.getGeneralItem();                                                   </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 275                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 276              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 277          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 278          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 279              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 279              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 280          }                                                                                                         </span>
<span  style=""> 281                                                                                                                    </span>
<span class="3229919014362534281" onmouseenter="enter('3229919014362534281');" onmouseout="out('3229919014362534281');" style=""> 282          if (specificTranslation != null) {                                                                        </span>
<span class="8586602568312740184" onmouseenter="enter('8586602568312740184');" onmouseout="out('8586602568312740184');" style=""> 283              if (ItemStatus.DELETED.equals(specificTranslation.getItemStatus())) {                                 </span>
<span class="-304344412763239983" onmouseenter="enter('-304344412763239983');" onmouseout="out('-304344412763239983');" style=""> 284                  specificTranslationDeleted = true;                                                                </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 285              } else {                                                                                              </span>
<span class="4085047678284164506" onmouseenter="enter('4085047678284164506');" onmouseout="out('4085047678284164506');" style=""> 286                  if (specificTranslation.getCacheItem() instanceof Translation) {                                  </span>
<span class="5092439281374553667" onmouseenter="enter('5092439281374553667');" onmouseout="out('5092439281374553667');" style=""> 287                      response = ((Translation) specificTranslation.getCacheItem()).getTranslatedValue();           </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 288                  } else {                                                                                          </span>
<span class="-1389994735563856165" onmouseenter="enter('-1389994735563856165');" onmouseout="out('-1389994735563856165');" style=""> 289                      response = (String) specificTranslation.getCacheItem();                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290                  }                                                                                                 </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 291                  return replaceEmptyWithNullResponse(response);                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 293          }                                                                                                         </span>
<span  style=""> 294                                                                                                                    </span>
<span class="7548715454640496004" onmouseenter="enter('7548715454640496004');" onmouseout="out('7548715454640496004');" style=""> 295          if (generalTranslation != null) {                                                                         </span>
<span class="-255489092820453243" onmouseenter="enter('-255489092820453243');" onmouseout="out('-255489092820453243');" style=""> 296              if (ItemStatus.DELETED.equals(generalTranslation.getItemStatus())) {                                  </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 297                  generalTranslationDeleted = true;                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 298                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="5352475896244618945" onmouseenter="enter('5352475896244618945');" onmouseout="out('5352475896244618945');" style=""><abbr title=" 299                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re done"> 299                  //If the general translation is override deleted and we&#x27;ve only got a general local code - we&#x27;re dðŸ”µ</abbr></span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 300                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 301                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 302                  }                                                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 303              } else {                                                                                              </span>
<span class="-6893766964201441462" onmouseenter="enter('-6893766964201441462');" onmouseout="out('-6893766964201441462');" style=""> 304                  if (generalTranslation.getCacheItem() instanceof Translation) {                                   </span>
<span class="2803296103630391563" onmouseenter="enter('2803296103630391563');" onmouseout="out('2803296103630391563');" style=""> 305                      response = ((Translation) generalTranslation.getCacheItem()).getTranslatedValue();            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 306                  } else {                                                                                          </span>
<span class="-8220571724192979246" onmouseenter="enter('-8220571724192979246');" onmouseout="out('-8220571724192979246');" style=""> 307                      response = (String) generalTranslation.getCacheItem();                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 308                  }                                                                                                 </span>
<span class="-4326015688840588054" onmouseenter="enter('-4326015688840588054');" onmouseout="out('-4326015688840588054');" style=""> 309                  //If the specific translation is override deleted as well, we&#x27;re done                             </span>
<span class="-8318425783825005434" onmouseenter="enter('-8318425783825005434');" onmouseout="out('-8318425783825005434');" style=""> 310                  //If the general translation is override and we&#x27;ve only got a general local code - we&#x27;re done     </span>
<span class="-1229523350269871713" onmouseenter="enter('-1229523350269871713');" onmouseout="out('-1229523350269871713');" style=""> 311                  if (specificTranslationDeleted || !localeCountryCode.contains(&quot;_&quot;)) {                             </span>
<span class="-8945803954704248569" onmouseenter="enter('-8945803954704248569');" onmouseout="out('-8945803954704248569');" style=""> 312                      return replaceEmptyWithNullResponse(response);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313                  }                                                                                                 </span>
<span class="7363358416283228582" onmouseenter="enter('7363358416283228582');" onmouseout="out('7363358416283228582');" style=""> 314                  //We have a valid general override - don&#x27;t check for general template value                       </span>
<span class="1750564421921617667" onmouseenter="enter('1750564421921617667');" onmouseout="out('1750564421921617667');" style=""> 315                  generalTranslationDeleted = true;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 316              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 317          }                                                                                                         </span>
<span  style=""> 318                                                                                                                    </span>
<span class="-5648163133478490789" onmouseenter="enter('-5648163133478490789');" onmouseout="out('-5648163133478490789');" style=""> 319          // Check for a Template Match                                                                             </span>
<span class="7808487525420585798" onmouseenter="enter('7808487525420585798');" onmouseout="out('7808487525420585798');" style=""> 320          if (specificTranslationDeleted) {                                                                         </span>
<span class="-6198192514429304292" onmouseenter="enter('-6198192514429304292');" onmouseout="out('-6198192514429304292');" style=""><abbr title=" 321              // only check general properties since we explicitly deleted specific properties at standard (site) level"> 321              // only check general properties since we explicitly deleted specific properties at standard (site) leðŸ”µ</abbr></span>
<span class="92221589817148056" onmouseenter="enter('92221589817148056');" onmouseout="out('92221589817148056');" style=""> 322              specificPropertyKey = generalPropertyKey;                                                             </span>
<span class="-8492470751572813975" onmouseenter="enter('-8492470751572813975');" onmouseout="out('-8492470751572813975');" style=""> 323          } else if (generalTranslationDeleted) {                                                                   </span>
<span class="161427389089903073" onmouseenter="enter('161427389089903073');" onmouseout="out('161427389089903073');" style=""><abbr title=" 324              // only check specific properties since we explicitly deleted general properties at standard (site) level"> 324              // only check specific properties since we explicitly deleted general properties at standard (site) leðŸ”µ</abbr></span>
<span class="-7962987072208752012" onmouseenter="enter('-7962987072208752012');" onmouseout="out('-7962987072208752012');" style=""> 325              generalPropertyKey = specificPropertyKey;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326          }                                                                                                         </span>
<span  style=""> 327                                                                                                                    </span>
<span class="3080693614000903632" onmouseenter="enter('3080693614000903632');" onmouseout="out('3080693614000903632');" style=""> 328          String templateResponse = getTemplateTranslatedValue(cacheKey, property, entityType, entityId, localeCode,</span>
<span class="3892696384201792069" onmouseenter="enter('3892696384201792069');" onmouseout="out('3892696384201792069');" style=""> 329                      localeCountryCode, specificPropertyKey, generalPropertyKey);                                  </span>
<span class="276467000645136515" onmouseenter="enter('276467000645136515');" onmouseout="out('276467000645136515');" style=""> 330          if (templateResponse != null) {                                                                           </span>
<span class="-289597866956781860" onmouseenter="enter('-289597866956781860');" onmouseout="out('-289597866956781860');" style=""> 331              response = templateResponse;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332          }                                                                                                         </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 333          return response;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334      }                                                                                                             </span>
<span  style=""> 335                                                                                                                    </span>
<span class="-642646862308610316" onmouseenter="enter('-642646862308610316');" onmouseout="out('-642646862308610316');" style=""> 336      protected String replaceEmptyWithNullResponse(String response) {                                              </span>
<span class="-6864162032162424544" onmouseenter="enter('-6864162032162424544');" onmouseout="out('-6864162032162424544');" style=""> 337          if (!StringUtils.isEmpty(response)) {                                                                     </span>
<span class="-1838489616061912436" onmouseenter="enter('-1838489616061912436');" onmouseout="out('-1838489616061912436');" style=""> 338              return response;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 340          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341      }                                                                                                             </span>
<span  style=""> 342                                                                                                                    </span>
<span class="8378684221947224933" onmouseenter="enter('8378684221947224933');" onmouseout="out('8378684221947224933');" style=""><abbr title=" 343      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityType,"> 343      protected String getTemplateTranslatedValue(String standardCacheKey, String property, TranslatedEntity entityTðŸ”µ</abbr></span>
<span class="-4090303560613663544" onmouseenter="enter('-4090303560613663544');" onmouseout="out('-4090303560613663544');" style=""><abbr title=" 344                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, String generalPropertyKey) {"> 344                          String entityId, String localeCode, String localeCountryCode, String specificPropertyKey, ðŸ”µ</abbr></span>
<span class="-4747149263787073601" onmouseenter="enter('-4747149263787073601');" onmouseout="out('-4747149263787073601');" style=""> 345          String cacheKey = getCacheKey(ResultType.TEMPLATE, entityType);                                           </span>
<span class="2122375478512106132" onmouseenter="enter('2122375478512106132');" onmouseout="out('2122375478512106132');" style=""> 346          StandardCacheItem translation = null;                                                                     </span>
<span class="-3557156580946018940" onmouseenter="enter('-3557156580946018940');" onmouseout="out('-3557156580946018940');" style=""> 347          LocalePair override = null;                                                                               </span>
<span class="1517045662051673914" onmouseenter="enter('1517045662051673914');" onmouseout="out('1517045662051673914');" style=""> 348          for (TranslationOverrideStrategy strategy : strategies) {                                                 </span>
<span class="-4522433003109705956" onmouseenter="enter('-4522433003109705956');" onmouseout="out('-4522433003109705956');" style=""><abbr title=" 349              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, localeCountryCode, specificPropertyKey, generalPropertyKey);"> 349              override = strategy.getLocaleBasedTemplateValue(cacheKey, property, entityType, entityId, localeCode, ðŸ”µ</abbr></span>
<span class="9210160193650519734" onmouseenter="enter('9210160193650519734');" onmouseout="out('9210160193650519734');" style=""> 350              if(override != null) {                                                                                </span>
<span class="-1973370934680019685" onmouseenter="enter('-1973370934680019685');" onmouseout="out('-1973370934680019685');" style=""> 351                  translation = override.getSpecificItem();                                                         </span>
<span class="-3321317064519542419" onmouseenter="enter('-3321317064519542419');" onmouseout="out('-3321317064519542419');" style=""> 352                  if (!strategy.validateTemplateProcessing(standardCacheKey, cacheKey)) {                           </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 353                      return null;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354                  }                                                                                                 </span>
<span class="-7917104194997868056" onmouseenter="enter('-7917104194997868056');" onmouseout="out('-7917104194997868056');" style=""> 355                  break;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 356              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357          }                                                                                                         </span>
<span class="-7664477840689445128" onmouseenter="enter('-7664477840689445128');" onmouseout="out('-7664477840689445128');" style=""> 358          if (override == null) {                                                                                   </span>
<span class="-3097292565633002261" onmouseenter="enter('-3097292565633002261');" onmouseout="out('-3097292565633002261');" style=""><abbr title=" 359              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid value&quot;);"> 359              throw new IllegalStateException(&quot;Expected at least one TranslationOverrideStrategy to return a valid vðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 360          }                                                                                                         </span>
<span class="7097610361367876323" onmouseenter="enter('7097610361367876323');" onmouseout="out('7097610361367876323');" style=""><abbr title=" 361          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTranslatedValue());"> 361          return translation==null?null:replaceEmptyWithNullResponse(((Translation) translation.getCacheItem()).getTðŸ”µ</abbr></span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362      }                                                                                                             </span>
<span  style=""> 363                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 364      @Override                                                                                                     </span>
<span class="-3594042154085207539" onmouseenter="enter('-3594042154085207539');" onmouseout="out('-3594042154085207539');" style=""> 365      public StandardCacheItem lookupTranslationFromMap(String key,                                                 </span>
<span class="8054967648441996342" onmouseenter="enter('8054967648441996342');" onmouseout="out('8054967648441996342');" style=""> 366              Map&lt;String, Map&lt;String, StandardCacheItem&gt;&gt; propertyTranslationMap, String entityId) {                </span>
<span  style=""> 367                                                                                                                    </span>
<span class="8033166320578810203" onmouseenter="enter('8033166320578810203');" onmouseout="out('8033166320578810203');" style=""> 368          StandardCacheItem cacheItem = null;                                                                       </span>
<span class="-9039723330936797775" onmouseenter="enter('-9039723330936797775');" onmouseout="out('-9039723330936797775');" style=""> 369          if (propertyTranslationMap.containsKey(key)) {                                                            </span>
<span class="-6694693359797112751" onmouseenter="enter('-6694693359797112751');" onmouseout="out('-6694693359797112751');" style=""> 370              Map&lt;String, StandardCacheItem&gt; byEntity = propertyTranslationMap.get(key);                            </span>
<span class="1120345993243144575" onmouseenter="enter('1120345993243144575');" onmouseout="out('1120345993243144575');" style=""> 371              cacheItem = byEntity.get(entityId);                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372          }                                                                                                         </span>
<span class="7677042704500942878" onmouseenter="enter('7677042704500942878');" onmouseout="out('7677042704500942878');" style=""> 373          return cacheItem;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374      }                                                                                                             </span>
<span  style=""> 375                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 376      @Override                                                                                                     </span>
<span class="-6571940507978380571" onmouseenter="enter('-6571940507978380571');" onmouseout="out('-6571940507978380571');" style=""><abbr title=" 377      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;String, Map&lt;String, Translation&gt;&gt; propertyTranslationMap, String entityId) {"> 377      public Translation findBestTemplateTranslation(String specificPropertyKey, String generalPropertyKey, Map&lt;StriðŸ”µ</abbr></span>
<span class="-7818881412025637839" onmouseenter="enter('-7818881412025637839');" onmouseout="out('-7818881412025637839');" style=""> 378          Translation translation = null;                                                                           </span>
<span class="4103235042259210811" onmouseenter="enter('4103235042259210811');" onmouseout="out('4103235042259210811');" style=""> 379          if (propertyTranslationMap.containsKey(specificPropertyKey)) {                                            </span>
<span class="-1164790866652041108" onmouseenter="enter('-1164790866652041108');" onmouseout="out('-1164790866652041108');" style=""> 380              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(specificPropertyKey);                  </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 381              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382          }                                                                                                         </span>
<span class="-6678812101881455261" onmouseenter="enter('-6678812101881455261');" onmouseout="out('-6678812101881455261');" style=""> 383          if (translation == null &amp;&amp; propertyTranslationMap.containsKey(generalPropertyKey)) {                      </span>
<span class="7860427162964234580" onmouseenter="enter('7860427162964234580');" onmouseout="out('7860427162964234580');" style=""> 384              Map&lt;String, Translation&gt; byEntity = propertyTranslationMap.get(generalPropertyKey);                   </span>
<span class="7442803123457248345" onmouseenter="enter('7442803123457248345');" onmouseout="out('7442803123457248345');" style=""> 385              translation = byEntity.get(entityId);                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386          }                                                                                                         </span>
<span class="-2878355982650547214" onmouseenter="enter('-2878355982650547214');" onmouseout="out('-2878355982650547214');" style=""> 387          return translation;                                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 388      }                                                                                                             </span>
<span  style=""> 389                                                                                                                    </span>
<span class="4440453093236271463" onmouseenter="enter('4440453093236271463');" onmouseout="out('4440453093236271463');" style=""> 390      protected TranslatedEntity getEntityType(Class&lt;?&gt; entityClass) {                                              </span>
<span class="-7773293680224692585" onmouseenter="enter('-7773293680224692585');" onmouseout="out('-7773293680224692585');" style=""> 391          for (Entry&lt;String, TranslatedEntity&gt; entry : TranslatedEntity.getTypes().entrySet()) {                    </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 392              try {                                                                                                 </span>
<span class="-3666865467483460571" onmouseenter="enter('-3666865467483460571');" onmouseout="out('-3666865467483460571');" style=""> 393                  Class&lt;?&gt; clazz = Class.forName(entry.getKey());                                                   </span>
<span class="1674809452292530007" onmouseenter="enter('1674809452292530007');" onmouseout="out('1674809452292530007');" style=""> 394                  if (clazz.isAssignableFrom(entityClass)) {                                                        </span>
<span class="-3703293303347525374" onmouseenter="enter('-3703293303347525374');" onmouseout="out('-3703293303347525374');" style=""> 395                      return entry.getValue();                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 396                  }                                                                                                 </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 397              } catch (ClassNotFoundException e) {                                                                  </span>
<span class="-4478086799825263302" onmouseenter="enter('-4478086799825263302');" onmouseout="out('-4478086799825263302');" style=""> 398                  throw new IllegalArgumentException(&quot;TranslatedEntity type was not set to a known class&quot;, e);      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400          }                                                                                                         </span>
<span class="-2236633196245095070" onmouseenter="enter('-2236633196245095070');" onmouseout="out('-2236633196245095070');" style=""> 401          throw new IllegalArgumentException(entityClass.getName() + &quot; is not a known translatable class&quot;);         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 402      }                                                                                                             </span>
<span  style=""> 403                                                                                                                    </span>
<span class="-6105766954135949968" onmouseenter="enter('-6105766954135949968');" onmouseout="out('-6105766954135949968');" style=""> 404      protected TranslatedEntity getEntityType(Object entity) {                                                     </span>
<span class="5957034970902419140" onmouseenter="enter('5957034970902419140');" onmouseout="out('5957034970902419140');" style=""> 405          return getEntityType(entity.getClass());                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406      }                                                                                                             </span>
<span  style=""> 407                                                                                                                    </span>

<span class="7200037068679539466" onmouseenter="enter('7200037068679539466');" onmouseout="out('7200037068679539466');" style=""> 408      public TranslatedEntity getAssignableEntityType(String className) {                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 409          try {                                                                                                     </span>
<span class="-2905421381517068832" onmouseenter="enter('-2905421381517068832');" onmouseout="out('-2905421381517068832');" style=""> 410              Class&lt;?&gt; clazz = Class.forName(className);                                                            </span>
<span class="-1397014990282176047" onmouseenter="enter('-1397014990282176047');" onmouseout="out('-1397014990282176047');" style=""> 411              return getEntityType(clazz);                                                                          </span>
<span class="1054888787890391626" onmouseenter="enter('1054888787890391626');" onmouseout="out('1054888787890391626');" style=""> 412          } catch (ClassNotFoundException e) {                                                                      </span>
<span class="-5334770744120586543" onmouseenter="enter('-5334770744120586543');" onmouseout="out('-5334770744120586543');" style=""> 413              throw new IllegalArgumentException(className + &quot; is not a known translatable class&quot;);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 415      }                                                                                                             </span>
<span  style=""> 416                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 417      @Override                                                                                                     </span>
<span class="-3966058599535922296" onmouseenter="enter('-3966058599535922296');" onmouseout="out('-3966058599535922296');" style=""> 418      public String getCacheKey(ResultType resultType, TranslatedEntity entityType) {                               </span>
<span class="6343737122444425220" onmouseenter="enter('6343737122444425220');" onmouseout="out('6343737122444425220');" style=""> 419          String cacheKey = StringUtils.join(new String[] { entityType.getFriendlyType()}, &quot;|&quot;);                    </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 420          if (extensionManager != null) {                                                                           </span>
<span class="6502299595336874110" onmouseenter="enter('6502299595336874110');" onmouseout="out('6502299595336874110');" style=""> 421              ExtensionResultHolder&lt;String&gt; result = new ExtensionResultHolder&lt;String&gt;();                           </span>
<span class="-2901050288405824828" onmouseenter="enter('-2901050288405824828');" onmouseout="out('-2901050288405824828');" style=""> 422              extensionManager.getProxy().getCacheKey(cacheKey, resultType, result);                                </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 423              if (result.getResult() != null) {                                                                     </span>
<span class="1573467712811888621" onmouseenter="enter('1573467712811888621');" onmouseout="out('1573467712811888621');" style=""> 424                  cacheKey = result.getResult();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 426          }                                                                                                         </span>
<span class="-3532505248562998337" onmouseenter="enter('-3532505248562998337');" onmouseout="out('-3532505248562998337');" style=""> 427          return cacheKey;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428      }                                                                                                             </span>
<span  style=""> 429                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 430      @Override                                                                                                     </span>
<span class="3486683463782321009" onmouseenter="enter('3486683463782321009');" onmouseout="out('3486683463782321009');" style=""> 431      public List&lt;String&gt; getCacheKeyListForTemplateSite(String propertyName) {                                     </span>
<span class="8592468642006407625" onmouseenter="enter('8592468642006407625');" onmouseout="out('8592468642006407625');" style=""> 432          List&lt;String&gt; cacheKeyList = new ArrayList&lt;&gt;();                                                            </span>
<span class="-5197867609704074688" onmouseenter="enter('-5197867609704074688');" onmouseout="out('-5197867609704074688');" style=""> 433          String cacheKey = StringUtils.join(new String[] {propertyName}, &quot;|&quot;);                                     </span>
<span class="955805546394053652" onmouseenter="enter('955805546394053652');" onmouseout="out('955805546394053652');" style=""> 434          if (extensionManager != null) {                                                                           </span>
<span class="1746765389969784854" onmouseenter="enter('1746765389969784854');" onmouseout="out('1746765389969784854');" style=""> 435              ExtensionResultHolder&lt;List&lt;String&gt;&gt; result = new ExtensionResultHolder&lt;List&lt;String&gt;&gt;();               </span>
<span class="8259864317564038513" onmouseenter="enter('8259864317564038513');" onmouseout="out('8259864317564038513');" style=""> 436              extensionManager.getProxy().getCacheKeyListForTemplateSite(cacheKey, result);                         </span>
<span class="-7623351381199554060" onmouseenter="enter('-7623351381199554060');" onmouseout="out('-7623351381199554060');" style=""> 437              if (result.getResult() != null) {                                                                     </span>
<span class="3215700546037359134" onmouseenter="enter('3215700546037359134');" onmouseout="out('3215700546037359134');" style=""> 438                  cacheKeyList = result.getResult();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 439              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 440          }                                                                                                         </span>
<span class="-2620697551916263207" onmouseenter="enter('-2620697551916263207');" onmouseout="out('-2620697551916263207');" style=""> 441          return cacheKeyList;                                                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442      }                                                                                                             </span>
<span  style=""> 443                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 444      @Override                                                                                                     </span>
<span class="-607461820763680835" onmouseenter="enter('-607461820763680835');" onmouseout="out('-607461820763680835');" style=""> 445      public int getThresholdForFullCache() {                                                                       </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 446          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="-1676774107963308299" onmouseenter="enter('-1676774107963308299');" onmouseout="out('-1676774107963308299');" style=""> 447              return thresholdForFullCache;                                                                         </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 448          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 449              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 450              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452      }                                                                                                             </span>
<span  style=""> 453                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 454      @Override                                                                                                     </span>
<span class="4617223922758212131" onmouseenter="enter('4617223922758212131');" onmouseout="out('4617223922758212131');" style=""> 455      public void setThresholdForFullCache(int thresholdForFullCache) {                                             </span>
<span class="4688153158969268860" onmouseenter="enter('4688153158969268860');" onmouseout="out('4688153158969268860');" style=""> 456          this.thresholdForFullCache = thresholdForFullCache;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 457      }                                                                                                             </span>
<span  style=""> 458                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 459      @Override                                                                                                     </span>
<span class="-3422778391087199420" onmouseenter="enter('-3422778391087199420');" onmouseout="out('-3422778391087199420');" style=""> 460      public int getTemplateThresholdForFullCache() {                                                               </span>
<span class="1085131074430359585" onmouseenter="enter('1085131074430359585');" onmouseout="out('1085131074430359585');" style=""> 461          if (BroadleafRequestContext.getBroadleafRequestContext().isProductionSandBox()) {                         </span>
<span class="8301223344211222236" onmouseenter="enter('8301223344211222236');" onmouseout="out('8301223344211222236');" style=""> 462              return templateThresholdForFullCache;                                                                 </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 463          } else {                                                                                                  </span>
<span class="8213655867837658469" onmouseenter="enter('8213655867837658469');" onmouseout="out('8213655867837658469');" style=""> 464              // don&#x27;t cache when not in a SandBox                                                                  </span>
<span class="7311380543145824752" onmouseenter="enter('7311380543145824752');" onmouseout="out('7311380543145824752');" style=""> 465              return -1;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 467      }                                                                                                             </span>
<span  style=""> 468                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 469      @Override                                                                                                     </span>
<span class="-8110239734596715322" onmouseenter="enter('-8110239734596715322');" onmouseout="out('-8110239734596715322');" style=""> 470      public void setTemplateThresholdForFullCache(int templateThresholdForFullCache) {                             </span>
<span class="-2229688611480356401" onmouseenter="enter('-2229688611480356401');" onmouseout="out('-2229688611480356401');" style=""> 471          this.templateThresholdForFullCache = templateThresholdForFullCache;                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472      }                                                                                                             </span>
<span  style=""> 473                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 474      @Override                                                                                                     </span>
<span class="-840274279153232521" onmouseenter="enter('-840274279153232521');" onmouseout="out('-840274279153232521');" style=""> 475      public String getDefaultTranslationValue(Object entity, String property, Locale locale,                       </span>
<span class="-4390929911343015370" onmouseenter="enter('-4390929911343015370');" onmouseout="out('-4390929911343015370');" style=""> 476              String requestedDefaultValue) {                                                                       </span>
<span  style=""> 477                                                                                                                    </span>
<span class="-4848941814779870531" onmouseenter="enter('-4848941814779870531');" onmouseout="out('-4848941814779870531');" style="background-color: rgba(255, 0, 0, 0.2); margin: 0"><abbr title=" 478 -        if (returnBlankTranslationForNotDefaultLocale &amp;&amp; !localeMatchesDefaultLocale(locale) &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {"> 478 -        if (returnBlankTranslationForNotDefaultLocale &amp;&amp; !localeMatchesDefaultLocale(locale) &amp;&amp; !propertyInDefaultðŸ”µ</abbr></span>
<span class="7235566179838147311" onmouseenter="enter('7235566179838147311');" onmouseout="out('7235566179838147311');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 479 +        if (returnBlankTranslationForNotDefaultLocale                                                             </span>
<span class="-784023248534136325" onmouseenter="enter('-784023248534136325');" onmouseout="out('-784023248534136325');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 480 +                &amp;&amp; !localeMatchesDefaultLocale(locale)                                                            </span>
<span class="-486304902738293809" onmouseenter="enter('-486304902738293809');" onmouseout="out('-486304902738293809');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 481 +                &amp;&amp; !propertyInDefaultLocaleExceptionList(entity, property)) {                                     </span>
<span class="-8289946804601166879" onmouseenter="enter('-8289946804601166879');" onmouseout="out('-8289946804601166879');" style=""> 482              return &quot;&quot;;                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 483          }                                                                                                         </span>
<span  style=""> 484                                                                                                                    </span>
<span class="8681388047503150152" onmouseenter="enter('8681388047503150152');" onmouseout="out('8681388047503150152');" style=""> 485          return requestedDefaultValue;                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 486      }                                                                                                             </span>
<span  style=""> 487                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 488      @Override                                                                                                     </span>
<span class="7727132871372172213" onmouseenter="enter('7727132871372172213');" onmouseout="out('7727132871372172213');" style=""><abbr title=" 489      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, List&lt;String&gt; entityIds) {"> 489      public List&lt;Translation&gt; findAllTranslationEntries(TranslatedEntity translatedEntity, ResultType standard, LisðŸ”µ</abbr></span>
<span class="-4045135361282838738" onmouseenter="enter('-4045135361282838738');" onmouseout="out('-4045135361282838738');" style=""> 490          return dao.readAllTranslationEntries(translatedEntity, standard, entityIds);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 491      }                                                                                                             </span>
<span  style=""> 492                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 493      /**                                                                                                           </span>
<span class="4067718673387762292" onmouseenter="enter('4067718673387762292');" onmouseout="out('4067718673387762292');" style=""> 494       * Returns true if the passed in entity / property combination is in the defaultLocaleExceptionList           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 495       *                                                                                                            </span>
<span class="2630277762033162453" onmouseenter="enter('2630277762033162453');" onmouseout="out('2630277762033162453');" style=""> 496       * The default implementation checks the &quot;translationExceptionProperties&quot; list to see if the                  </span>
<span class="-3325919767700005379" onmouseenter="enter('-3325919767700005379');" onmouseout="out('-3325919767700005379');" style=""> 497       * property matches one of the regularExpressions in that list.                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 498       *                                                                                                            </span>
<span class="-5554850477208108947" onmouseenter="enter('-5554850477208108947');" onmouseout="out('-5554850477208108947');" style=""> 499       * Implementors are expected to override this method for implementation specific needs.                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 500       *                                                                                                            </span>
<span class="5381683285013722867" onmouseenter="enter('5381683285013722867');" onmouseout="out('5381683285013722867');" style=""> 501       * @param entity                                                                                              </span>
<span class="8967809841928422101" onmouseenter="enter('8967809841928422101');" onmouseout="out('8967809841928422101');" style=""> 502       * @param property                                                                                            </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 503       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 504       */                                                                                                           </span>
<span class="-5212101188966202854" onmouseenter="enter('-5212101188966202854');" onmouseout="out('-5212101188966202854');" style=""> 505      protected boolean propertyInDefaultLocaleExceptionList(Object entity, String property) {                      </span>
<span class="-4323767378197487262" onmouseenter="enter('-4323767378197487262');" onmouseout="out('-4323767378197487262');" style=""> 506          TranslatedEntity entityType = getEntityType(entity);                                                      </span>
<span class="8801010486011248695" onmouseenter="enter('8801010486011248695');" onmouseout="out('8801010486011248695');" style=""> 507          if (entityType != null &amp;&amp; entityType.getFriendlyType() != null) {                                         </span>
<span class="332034624469152237" onmouseenter="enter('332034624469152237');" onmouseout="out('332034624469152237');" style=""> 508              for (String exceptionProperty : translationExceptionProperties) {                                     </span>
<span class="4765982936172677958" onmouseenter="enter('4765982936172677958');" onmouseout="out('4765982936172677958');" style=""> 509                  if (property.matches(exceptionProperty)) {                                                        </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 510                      return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 512              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 513          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 514          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515      }                                                                                                             </span>
<span  style=""> 516                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 517      /**                                                                                                           </span>
<span class="3685695046998517654" onmouseenter="enter('3685695046998517654');" onmouseout="out('3685695046998517654');" style=""> 518       * Returns true if the passed in locale&#x27;s language matches the Broadleaf default locale.                      </span>
<span class="6409497180733687586" onmouseenter="enter('6409497180733687586');" onmouseout="out('6409497180733687586');" style=""> 519       * @param locale                                                                                              </span>
<span class="-9165797340485297481" onmouseenter="enter('-9165797340485297481');" onmouseout="out('-9165797340485297481');" style=""> 520       * @return                                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 521       */                                                                                                           </span>
<span class="5271189750114099898" onmouseenter="enter('5271189750114099898');" onmouseout="out('5271189750114099898');" style=""> 522      protected boolean localeMatchesDefaultLocale(Locale locale) {                                                 </span>
<span class="-1183370807565107896" onmouseenter="enter('-1183370807565107896');" onmouseout="out('-1183370807565107896');" style=""> 523          String defaultLanguage = LocaleUtil.findLanguageCode(localeService.findDefaultLocale());                  </span>
<span  style=""> 524                                                                                                                    </span>
<span class="1416267938282284804" onmouseenter="enter('1416267938282284804');" onmouseout="out('1416267938282284804');" style=""> 525          if (defaultLanguage != null &amp;&amp; locale != null) {                                                          </span>
<span class="8234179994230982180" onmouseenter="enter('8234179994230982180');" onmouseout="out('8234179994230982180');" style=""> 526              return defaultLanguage.equals(locale.getLanguage());                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527          }                                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 528          return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529      }                                                                                                             </span>
<span  style=""> 530                                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            