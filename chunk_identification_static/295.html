<!DOCTYPE html>
    <html lang="en">
              <head>
                <meta charset="utf-8">
                <title>295</title>
                    <style>
                        #top {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        #bottom {
                            height: 48vh;
                            overflow-y: auto;
                        }
                        .highlighted {
                            background-color: rgba(177, 82, 227, 0.85) !important;
                        }
                    </style>
                    <script>
                        function enter(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.add('highlighted');
                            }
                        }
                        function out(c) {
                            const lines = document.getElementsByClassName(c);
                            for (let i = 0; i < lines.length; i++) {
                               lines.item(i).classList.remove('highlighted');
                            }
                        }
                    </script>
              </head>
              <body>
                <span style="height: 4vh">
                    295
                    <a href="294.html">prev</a>
                    <a href="296.html">next</a>
                    <a href="295_chunks.html">chunks</a>
                    <a href="index.html">index</a>
                    CyanogenMod/android_packages_apps_Trebuchet_8f73d7032e557c6f01a9954a2ec0f386987946e4_src/com/android/launcher3/Utilities.java
                    <textarea rows=1 onclick='navigator.clipboard.writeText(this.value)'>cd C:\studies\se\mega\git-analyzer-plus\notebooks\debug
del /Q *
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;8f73d7032e557c6f01a9954a2ec0f386987946e4:src/com/android/launcher3/Utilities.java&quot; &gt; committed.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;8f73d7032e557c6f01a9954a2ec0f386987946e4^1:src/com/android/launcher3/Utilities.java&quot; &gt; ours.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;8f73d7032e557c6f01a9954a2ec0f386987946e4^2:src/com/android/launcher3/Utilities.java&quot; &gt; theirs.java
git -C C:\studies\se\mega\project-dirs\projects_Java_desc-stars-1000\CyanogenMod\android_packages_apps_Trebuchet show &quot;a6095969bb5938ad95ee9f858970d5eb54eb124d:src/com/android/launcher3/Utilities.java&quot; &gt; base.java
copy ours.java 1ours.java
copy ours.java 2ours.java
copy theirs.java 1theirs.java
copy theirs.java 2theirs.java
copy base.java 1base.java
copy base.java 2base.java
&quot;C:\Program Files\Java\jdk1.8.0_241\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\jFSTMerge\build\libs\jFSTMerge-all.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\1theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\jfstmerge.java --show-base
&quot;C:\Program Files\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin\java.exe&quot; -Dfile.encoding=UTF-8 -jar &quot;C:\studies\se\spork\target\spork-0.5.0-SNAPSHOT.jar&quot; C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2ours.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2base.java C:\studies\se\mega\git-analyzer-plus\notebooks\debug\2theirs.java -o C:\studies\se\mega\git-analyzer-plus\notebooks\debug\spork.java
del /Q 1*.java
del /Q 2*.java
del /Q jfstmerge.java.merge
</textarea>
                    {strict: [[b]], subset: [[b]]}
                </span>
                <div id="top">

                    <table>
                        <tr>
                            <th>line based (standard git)</th>
                            <th>jfstmerge</th>
                            <th>spork</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20 import android.app.Activity;                                                                             </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27 import android.content.Intent;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  29 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  30 import android.content.pm.PackageManager;                                                                </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  31 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  32 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  33 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  34 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  35 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  36 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  37 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  38 import android.graphics.Color;                                                                           </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  39 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  40 import android.graphics.Paint;                                                                           </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  41 import android.graphics.PaintFlagsDrawFilter;                                                            </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  42 import android.graphics.Rect;                                                                            </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  43 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  44 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  45 import android.graphics.drawable.PaintDrawable;                                                          </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  46 import android.os.Build;                                                                                 </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  47 import android.os.Process;                                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  48 import android.text.TextUtils;                                                                           </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="">  49 import android.util.DisplayMetrics;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51 import android.util.Pair;                                                                                </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  52 import android.util.SparseArray;                                                                         </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  53 import android.util.TypedValue;                                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  54 import android.view.View;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  55 import android.widget.Toast;                                                                             </span>
<span  style="">  56                                                                                                          </span>
<span class="5153960293286862196" onmouseenter="enter('5153960293286862196');" onmouseout="out('5153960293286862196');" style="">  57 import junit.framework.Assert;                                                                           </span>
<span  style="">  58                                                                                                          </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="">  59 import java.io.ByteArrayOutputStream;                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  60 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61 import java.util.ArrayList;                                                                              </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  62 import java.util.Comparator;                                                                             </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  63 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  64 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  65                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  66 /**                                                                                                      </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  67  * Various utilities shared amongst the Launcher&#x27;s classes.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68  */                                                                                                      </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  69 public final class Utilities {                                                                           </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  70     private static final String TAG = &quot;Launcher.Utilities&quot;;                                              </span>
<span  style="">  71                                                                                                          </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="">  72     private static int sIconWidth = -1;                                                                  </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="">  73     private static int sIconHeight = -1;                                                                 </span>
<span  style="">  74                                                                                                          </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  75     private static final Rect sOldBounds = new Rect();                                                   </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  76     private static final Canvas sCanvas = new Canvas();                                                  </span>
<span  style="">  77                                                                                                          </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="">  78     private static final Pattern sTrimPattern =                                                          </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="">  79             Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                 </span>
<span  style="">  80                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  81     static {                                                                                             </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  82         sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  83                 Paint.FILTER_BITMAP_FLAG));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84     }                                                                                                    </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  85     static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                       </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  86     static int sColorIndex = 0;                                                                          </span>
<span  style="">  87                                                                                                          </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="">  88     static int[] sLoc0 = new int[2];                                                                     </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="">  89     static int[] sLoc1 = new int[2];                                                                     </span>
<span  style="">  90                                                                                                          </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  91     // To turn on these properties, type                                                                 </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  92     // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                      </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="">  93     static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                        </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="">  94     public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);      </span>
<span  style="">  95                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96     /**                                                                                                  </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style="">  97      * Returns a FastBitmapDrawable with the icon, accurately sized.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  98      */                                                                                                  </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style="">  99     public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                   </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style=""> 100         FastBitmapDrawable d = new FastBitmapDrawable(icon);                                             </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style=""> 101         d.setFilterBitmap(true);                                                                         </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style=""> 102         resizeIconDrawable(d);                                                                           </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style=""> 103         return d;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span  style=""> 105                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106     /**                                                                                                  </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style=""> 107      * Resizes an icon drawable to the correct icon size.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 108      */                                                                                                  </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style=""> 109     static void resizeIconDrawable(Drawable icon) {                                                      </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style=""> 110         icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style=""> 113     public static boolean isPropertyEnabled(String propertyName) {                                       </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style=""> 114         return Log.isLoggable(propertyName, Log.VERBOSE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115     }                                                                                                    </span>
<span  style=""> 116                                                                                                          </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style=""> 117     public static boolean isRotationEnabled(Context c) {                                                 </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style=""> 118         boolean enableRotation = sForceEnableRotation ||                                                 </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style=""> 119                 c.getResources().getBoolean(R.bool.allow_rotation);                                      </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style=""> 120         return enableRotation;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121     }                                                                                                    </span>
<span  style=""> 122                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 123     /**                                                                                                  </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 124      * Indicates if the device is running LMP or higher.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 125      */                                                                                                  </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 126     public static boolean isLmpOrAbove() {                                                               </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 127         return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="-4667942192763773056" onmouseenter="enter('-4667942192763773056');" onmouseout="out('-4667942192763773056');" style=""> 130 &lt;&lt;&lt;&lt;&lt;&lt;&lt; GitAnalyzerPlus_ours                                                                             </span>
<span class="-6979259339435522046" onmouseenter="enter('-6979259339435522046');" onmouseout="out('-6979259339435522046');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 131     static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                           </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 132         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 133         try {                                                                                            </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 134             return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 135         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 136             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(255, 167, 0, 0.24); margin: 0"> 137         }                                                                                                </span>
<span class="6741223626729319096" onmouseenter="enter('6741223626729319096');" onmouseout="out('6741223626729319096');" style=""> 138 ||||||| GitAnalyzerPlus_base                                                                             </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 139     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 140      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 141      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 142      */                                                                                                  </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 143     static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,             </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 144             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 145         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 146         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 147         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 148             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 149             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 150                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 151                 return createIconBitmap(                                                                 </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 152                         resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 153             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 154         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 155             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 156         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 157         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 158     }                                                                                                    </span>
<span  style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 159                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 0, 0, 0.15); margin: 0"> 160     /**                                                                                                  </span>
<span class="3796057323931724632" onmouseenter="enter('3796057323931724632');" onmouseout="out('3796057323931724632');" style=""> 161 =======                                                                                                  </span>
<span class="2780421130698938768" onmouseenter="enter('2780421130698938768');" onmouseout="out('2780421130698938768');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 162     public static boolean isLmpMr1() {                                                                   </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style="background-color: rgba(0, 0, 255, 0.24); margin: 0"> 163         return Build.VERSION.SDK_INT == 22;                                                              </span>
<span class="-1382546150375666264" onmouseenter="enter('-1382546150375666264');" onmouseout="out('-1382546150375666264');" style=""> 164 &gt;&gt;&gt;&gt;&gt;&gt;&gt; GitAnalyzerPlus_theirs                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165     }                                                                                                    </span>
<span  style=""> 166                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 167     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 168      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 169      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 170      */                                                                                                  </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style=""> 171     static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,             </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 172             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 173         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 174         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 175         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 176             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 177             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 178                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 179                 return createIconBitmap(                                                                 </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style=""> 180                         resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 181             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 182         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 183             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 184         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 185         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186     }                                                                                                    </span>
<span  style=""> 187                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 188     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 189      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 190      */                                                                                                  </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style=""> 191     static Bitmap createIconBitmap(Bitmap icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 192         synchronized (sCanvas) { // we share the statics :-(                                             </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 193             if (sIconWidth == -1) {                                                                      </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 194                 initStatics(context);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 195             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 196         }                                                                                                </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style=""> 197         if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                          </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 198             return icon;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 199         }                                                                                                </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 200         return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201     }                                                                                                    </span>
<span  style=""> 202                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 203     /**                                                                                                  </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 204      * Returns a bitmap suitable for the all apps view.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 205      */                                                                                                  </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 206     public static Bitmap createIconBitmap(Drawable icon, Context context) {                              </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 207         synchronized (sCanvas) { // we share the statics :-(                                             </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 208             if (sIconWidth == -1) {                                                                      </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 209                 initStatics(context);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 210             }                                                                                            </span>
<span  style=""> 211                                                                                                          </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style=""> 212             int width = sIconWidth;                                                                      </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style=""> 213             int height = sIconHeight;                                                                    </span>
<span  style=""> 214                                                                                                          </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 215             if (icon instanceof PaintDrawable) {                                                         </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 216                 PaintDrawable painter = (PaintDrawable) icon;                                            </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 217                 painter.setIntrinsicWidth(width);                                                        </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 218                 painter.setIntrinsicHeight(height);                                                      </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 219             } else if (icon instanceof BitmapDrawable) {                                                 </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 220                 // Ensure the bitmap has a density.                                                      </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 221                 BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                   </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 222                 Bitmap bitmap = bitmapDrawable.getBitmap();                                              </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 223                 if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                        </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 224                     bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 225                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 226             }                                                                                            </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 227             int sourceWidth = icon.getIntrinsicWidth();                                                  </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 228             int sourceHeight = icon.getIntrinsicHeight();                                                </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 229             if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                   </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 230                 // Scale the icon proportionally to the icon dimensions                                  </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 231                 final float ratio = (float) sourceWidth / sourceHeight;                                  </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 232                 if (sourceWidth &gt; sourceHeight) {                                                        </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 233                     height = (int) (width / ratio);                                                      </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 234                 } else if (sourceHeight &gt; sourceWidth) {                                                 </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 235                     width = (int) (height * ratio);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 237             }                                                                                            </span>
<span  style=""> 238                                                                                                          </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 239             // no intrinsic size --&gt; use default size                                                    </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style=""> 240             int textureWidth = sIconWidth;                                                               </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style=""> 241             int textureHeight = sIconHeight;                                                             </span>
<span  style=""> 242                                                                                                          </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 243             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                       </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 244                     Bitmap.Config.ARGB_8888);                                                            </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 245             final Canvas canvas = sCanvas;                                                               </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 246             canvas.setBitmap(bitmap);                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 248             final int left = (textureWidth-width) / 2;                                                   </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 249             final int top = (textureHeight-height) / 2;                                                  </span>
<span  style=""> 250                                                                                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 251             @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                       </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 252             final boolean debug = false;                                                                 </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 253             if (debug) {                                                                                 </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 254                 // draw a big box for the icon for debugging                                             </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 255                 canvas.drawColor(sColors[sColorIndex]);                                                  </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 256                 if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                    </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 257                 Paint debugPaint = new Paint();                                                          </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 258                 debugPaint.setColor(0xffcccc00);                                                         </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 259                 canvas.drawRect(left, top, left+width, top+height, debugPaint);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 260             }                                                                                            </span>
<span  style=""> 261                                                                                                          </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 262             sOldBounds.set(icon.getBounds());                                                            </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 263             icon.setBounds(left, top, left+width, top+height);                                           </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 264             icon.draw(canvas);                                                                           </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 265             icon.setBounds(sOldBounds);                                                                  </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 266             canvas.setBitmap(null);                                                                      </span>
<span  style=""> 267                                                                                                          </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 268             return bitmap;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 269         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270     }                                                                                                    </span>
<span  style=""> 271                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 272     /**                                                                                                  </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 273      * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s             </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 274      * coordinates.                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 275      *                                                                                                   </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 276      * @param descendant The descendant to which the passed coordinate is relative.                      </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 277      * @param root The root view to make the coordinates relative to.                                    </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 278      * @param coord The coordinate that we want mapped.                                                  </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 279      * @param includeRootScroll Whether or not to account for the scroll of the descendant:              </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 280      *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.            </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 281      * @return The factor by which this descendant is scaled relative to this DragLayer. Caution         </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 282      *         this scale factor is assumed to be equal in X and Y, and so if at any point this          </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 283      *         assumption fails, we will need to return a pair of scale factors.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 284      */                                                                                                  </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 285     public static float getDescendantCoordRelativeToParent(View descendant, View root,                   </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 286                                                            int[] coord, boolean includeRootScroll) {     </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 287         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 288                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 289         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 290                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 291         View v = descendant;                                                                             </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 292         while(v != root &amp;&amp; v != null) {                                                                  </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 293             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 294             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 295         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 296         ancestorChain.add(root);                                                                         </span>
<span  style=""> 297                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 298         float scale = 1.0f;                                                                              </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 299         int count = ancestorChain.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 300         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 301             View v0 = ancestorChain.get(i);                                                              </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 302             // For TextViews, scroll has a meaning which relates to the text position                    </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 303             // which is very strange... ignore the scroll.                                               </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 304             if (v0 != descendant || includeRootScroll) {                                                 </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 305                 pt[0] -= v0.getScrollX();                                                                </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 306                 pt[1] -= v0.getScrollY();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 307             }                                                                                            </span>
<span  style=""> 308                                                                                                          </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 309             v0.getMatrix().mapPoints(pt);                                                                </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 310             pt[0] += v0.getLeft();                                                                       </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 311             pt[1] += v0.getTop();                                                                        </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 312             scale *= v0.getScaleX();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 313         }                                                                                                </span>
<span  style=""> 314                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 315         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 316         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 317         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 318     }                                                                                                    </span>
<span  style=""> 319                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 320     /**                                                                                                  </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 321      * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 322      */                                                                                                  </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 323     public static float mapCoordInSelfToDescendent(View descendant, View root,                           </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 324                                                    int[] coord) {                                        </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 325         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 326                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 327         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 328                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 329         View v = descendant;                                                                             </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 330         while(v != root) {                                                                               </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 331             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 332             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 333         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 334         ancestorChain.add(root);                                                                         </span>
<span  style=""> 335                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 336         float scale = 1.0f;                                                                              </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 337         Matrix inverse = new Matrix();                                                                   </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 338         int count = ancestorChain.size();                                                                </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 339         for (int i = count - 1; i &gt;= 0; i--) {                                                           </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 340             View ancestor = ancestorChain.get(i);                                                        </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 341             View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                           </span>
<span  style=""> 342                                                                                                          </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 343             pt[0] += ancestor.getScrollX();                                                              </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 344             pt[1] += ancestor.getScrollY();                                                              </span>
<span  style=""> 345                                                                                                          </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 346             if (next != null) {                                                                          </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 347                 pt[0] -= next.getLeft();                                                                 </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 348                 pt[1] -= next.getTop();                                                                  </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 349                 next.getMatrix().invert(inverse);                                                        </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 350                 inverse.mapPoints(pt);                                                                   </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 351                 scale *= next.getScaleX();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353         }                                                                                                </span>
<span  style=""> 354                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 355         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 356         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 357         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358     }                                                                                                    </span>
<span  style=""> 359                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 360     /**                                                                                                  </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 361      * Utility method to determine whether the given point, in local coordinates,                        </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 362      * is inside the view, where the area of the view is expanded by the slop factor.                    </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 363      * This method is called while processing touch-move events to determine if the event                </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 364      * is still within the view.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 365      */                                                                                                  </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 366     public static boolean pointInView(View v, float localX, float localY, float slop) {                  </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 367         return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                   </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 368                 localY &lt; (v.getHeight() + slop);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 369     }                                                                                                    </span>
<span  style=""> 370                                                                                                          </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style=""> 371     private static void initStatics(Context context) {                                                   </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style=""> 372         final Resources resources = context.getResources();                                              </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style=""> 373         sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 374     }                                                                                                    </span>
<span  style=""> 375                                                                                                          </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style=""> 376     public static void setIconSize(int widthPx) {                                                        </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style=""> 377         sIconWidth = sIconHeight = widthPx;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378     }                                                                                                    </span>
<span  style=""> 379                                                                                                          </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 380     public static void scaleRect(Rect r, float scale) {                                                  </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 381         if (scale != 1.0f) {                                                                             </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 382             r.left = (int) (r.left * scale + 0.5f);                                                      </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 383             r.top = (int) (r.top * scale + 0.5f);                                                        </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 384             r.right = (int) (r.right * scale + 0.5f);                                                    </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 385             r.bottom = (int) (r.bottom * scale + 0.5f);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 387     }                                                                                                    </span>
<span  style=""> 388                                                                                                          </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 389     public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                     </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 390         v0.getLocationInWindow(sLoc0);                                                                   </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 391         v1.getLocationInWindow(sLoc1);                                                                   </span>
<span  style=""> 392                                                                                                          </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 393         sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                        </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 394         sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                       </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 395         sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                        </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 396         sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                       </span>
<span  style=""> 397                                                                                                          </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 398         if (delta == null) {                                                                             </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 399             delta = new int[2];                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400         }                                                                                                </span>
<span  style=""> 401                                                                                                          </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 402         delta[0] = sLoc1[0] - sLoc0[0];                                                                  </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 403         delta[1] = sLoc1[1] - sLoc0[1];                                                                  </span>
<span  style=""> 404                                                                                                          </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 405         return delta;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406     }                                                                                                    </span>
<span  style=""> 407                                                                                                          </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 408     public static void scaleRectAboutCenter(Rect r, float scale) {                                       </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 409         int cx = r.centerX();                                                                            </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 410         int cy = r.centerY();                                                                            </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 411         r.offset(-cx, -cy);                                                                              </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 412         Utilities.scaleRect(r, scale);                                                                   </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 413         r.offset(cx, cy);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414     }                                                                                                    </span>
<span  style=""> 415                                                                                                          </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 416     public static void startActivityForResultSafely(                                                     </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 417             Activity activity, Intent intent, int requestCode) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 418         try {                                                                                            </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 419             activity.startActivityForResult(intent, requestCode);                                        </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 420         } catch (ActivityNotFoundException e) {                                                          </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 421             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 422         } catch (SecurityException e) {                                                                  </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 423             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 424             Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                     </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 425                     &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +       </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 426                     &quot;or use the exported attribute for this activity.&quot;, e);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 427         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428     }                                                                                                    </span>
<span  style=""> 429                                                                                                          </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 430     static boolean isSystemApp(Context context, Intent intent) {                                         </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 431         PackageManager pm = context.getPackageManager();                                                 </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 432         ComponentName cn = intent.getComponent();                                                        </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 433         String packageName = null;                                                                       </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 434         if (cn == null) {                                                                                </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 435             ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);            </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 436             if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                         </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 437                 packageName = info.activityInfo.packageName;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 439         } else {                                                                                         </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 440             packageName = cn.getPackageName();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 441         }                                                                                                </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 442         if (packageName != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 443             try {                                                                                        </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 444                 PackageInfo info = pm.getPackageInfo(packageName, 0);                                    </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 445                 return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                               </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 446                         ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);               </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 447             } catch (NameNotFoundException e) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 448                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 449             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 450         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 451             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453     }                                                                                                    </span>
<span  style=""> 454                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 455     /**                                                                                                  </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 456      * This picks a dominant color, looking for high-saturation, high-value, repeated hues.              </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 457      * @param bitmap The bitmap to scan                                                                  </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 458      * @param samples The approximate max number of samples to use.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 459      */                                                                                                  </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 460     static int findDominantColorByHue(Bitmap bitmap, int samples) {                                      </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 461         final int height = bitmap.getHeight();                                                           </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 462         final int width = bitmap.getWidth();                                                             </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 463         int sampleStride = (int) Math.sqrt((height * width) / samples);                                  </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 464         if (sampleStride &lt; 1) {                                                                          </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 465             sampleStride = 1;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 466         }                                                                                                </span>
<span  style=""> 467                                                                                                          </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 468         // This is an out-param, for getting the hsv values for an rgb                                   </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 469         float[] hsv = new float[3];                                                                      </span>
<span  style=""> 470                                                                                                          </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 471         // First get the best hue, by creating a histogram over 360 hue buckets,                         </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 472         // where each pixel contributes a score weighted by saturation, value, and alpha.                </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 473         float[] hueScoreHistogram = new float[360];                                                      </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 474         float highScore = -1;                                                                            </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 475         int bestHue = -1;                                                                                </span>
<span  style=""> 476                                                                                                          </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 477         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 478             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 479                 int argb = bitmap.getPixel(x, y);                                                        </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 480                 int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                         </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 481                 if (alpha &lt; 0x80) {                                                                      </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 482                     // Drop mostly-transparent pixels.                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 483                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484                 }                                                                                        </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 485                 // Remove the alpha channel.                                                             </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 486                 int rgb = argb | 0xFF000000;                                                             </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 487                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 488                 // Bucket colors by the 360 integer hues.                                                </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 489                 int hue = (int) hsv[0];                                                                  </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 490                 if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                        </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 491                     // Defensively avoid array bounds violations.                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 492                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 493                 }                                                                                        </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 494                 float score = hsv[1] * hsv[2];                                                           </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 495                 hueScoreHistogram[hue] += score;                                                         </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 496                 if (hueScoreHistogram[hue] &gt; highScore) {                                                </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 497                     highScore = hueScoreHistogram[hue];                                                  </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 498                     bestHue = hue;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501         }                                                                                                </span>
<span  style=""> 502                                                                                                          </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 503         SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                         </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 504         int bestColor = 0xff000000;                                                                      </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 505         highScore = -1;                                                                                  </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 506         // Go back over the RGB colors that match the winning hue,                                       </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 507         // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                 </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 508         // The highest-scoring RGB color wins.                                                           </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 509         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 510             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 511                 int rgb = bitmap.getPixel(x, y) | 0xff000000;                                            </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 512                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 513                 int hue = (int) hsv[0];                                                                  </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 514                 if (hue == bestHue) {                                                                    </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 515                     float s = hsv[1];                                                                    </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 516                     float v = hsv[2];                                                                    </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 517                     int bucket = (int) (s * 100) + (int) (v * 10000);                                    </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 518                     // Score by cumulative saturation * value.                                           </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 519                     float score = s * v;                                                                 </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 520                     Float oldTotal = rgbScores.get(bucket);                                              </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 521                     float newTotal = oldTotal == null ? score : oldTotal + score;                        </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 522                     rgbScores.put(bucket, newTotal);                                                     </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 523                     if (newTotal &gt; highScore) {                                                          </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 524                         highScore = newTotal;                                                            </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 525                         // All the colors in the winning bucket are very similar. Last in wins.          </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 526                         bestColor = rgb;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530         }                                                                                                </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 531         return bestColor;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 532     }                                                                                                    </span>
<span  style=""> 533                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 534     /*                                                                                                   </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 535      * Finds a system apk which had a broadcast receiver listening to a particular action.               </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 536      * @param action intent action used to find the apk                                                  </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 537      * @return a pair of apk package name and the resources.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 538      */                                                                                                  </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 539     static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                     </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 540         final Intent intent = new Intent(action);                                                        </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 541         for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                 </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 542             if (info.activityInfo != null &amp;&amp;                                                             </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 543                     (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {      </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 544                 final String packageName = info.activityInfo.packageName;                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 545                 try {                                                                                    </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 546                     final Resources res = pm.getResourcesForApplication(packageName);                    </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 547                     return Pair.create(packageName, res);                                                </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 548                 } catch (NameNotFoundException e) {                                                      </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 549                     Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 550                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 551             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 552         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 553         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 554     }                                                                                                    </span>
<span  style=""> 555                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 556     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 557     public static boolean isViewAttachedToWindow(View v) {                                               </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 558         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 559             return v.isAttachedToWindow();                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 560         } else {                                                                                         </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 561             // A proxy call which returns null, if the view is not attached to the window.               </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 562             return v.getKeyDispatcherState() != null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 563         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 564     }                                                                                                    </span>
<span  style=""> 565                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 566     /**                                                                                                  </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 567      * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}            </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 568      * provided by the same package which is set to be global search activity.                           </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 569      * If widgetCategory is not supported, or no such widget is found, returns the first widget          </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 570      * provided by the package.                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 571      */                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 572     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 573     public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                       </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 574         SearchManager searchManager =                                                                    </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 575                 (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                        </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 576         ComponentName searchComponent = searchManager.getGlobalSearchActivity();                         </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 577         if (searchComponent == null) return null;                                                        </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 578         String providerPkg = searchComponent.getPackageName();                                           </span>
<span  style=""> 579                                                                                                          </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 580         AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                      </span>
<span  style=""> 581                                                                                                          </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 582         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                       </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 583         for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                    </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 584             if (info.provider.getPackageName().equals(providerPkg)) {                                    </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 585                 if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                       </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 586                     if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 587                         return info;                                                                     </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 588                     } else if (defaultWidgetForSearchPackage == null) {                                  </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 589                         defaultWidgetForSearchPackage = info;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 590                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 591                 } else {                                                                                 </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 592                     return info;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 593                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595         }                                                                                                </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 596         return defaultWidgetForSearchPackage;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 597     }                                                                                                    </span>
<span  style=""> 598                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 599     /**                                                                                                  </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style=""> 600      * Compresses the bitmap to a byte array for serialization.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 601      */                                                                                                  </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style=""> 602     public static byte[] flattenBitmap(Bitmap bitmap) {                                                  </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style=""> 603         // Try go guesstimate how much space the icon will take when serialized                          </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style=""> 604         // to avoid unnecessary allocations/copies during the write.                                     </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style=""> 605         int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                           </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style=""> 606         ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 607         try {                                                                                            </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style=""> 608             bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                        </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style=""> 609             out.flush();                                                                                 </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style=""> 610             out.close();                                                                                 </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style=""> 611             return out.toByteArray();                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 612         } catch (IOException e) {                                                                        </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style=""> 613             Log.w(TAG, &quot;Could not write bitmap&quot;);                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 614             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 615         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 616     }                                                                                                    </span>
<span  style=""> 617                                                                                                          </span>
<span class="-6850884554410138223" onmouseenter="enter('-6850884554410138223');" onmouseout="out('-6850884554410138223');" style=""> 618     public static final Comparator&lt;ItemInfo&gt; RANK_COMPARATOR = new Comparator&lt;ItemInfo&gt;() {              </span>
<span  style=""> 619                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 620         @Override                                                                                        </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style=""> 621         public int compare(ItemInfo lhs, ItemInfo rhs) {                                                 </span>
<span class="-1773115321274512652" onmouseenter="enter('-1773115321274512652');" onmouseout="out('-1773115321274512652');" style=""> 622             return lhs.rank - rhs.rank;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 624     };                                                                                                   </span>
<span  style=""> 625                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 626     /**                                                                                                  </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style=""> 627      * Find the first vacant cell, if there is one.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 628      *                                                                                                   </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style=""> 629      * @param vacant Holds the x and y coordinate of the vacant cell                                     </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style=""> 630      * @param spanX Horizontal cell span.                                                                </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style=""> 631      * @param spanY Vertical cell span.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 632      *                                                                                                   </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style=""> 633      * @return true if a vacant cell was found                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 634      */                                                                                                  </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style=""> 635     public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                             </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style=""> 636             int xCount, int yCount, boolean[][] occupied) {                                              </span>
<span  style=""> 637                                                                                                          </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style=""> 638         for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                    </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style=""> 639             for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style=""> 640                 boolean available = !occupied[x][y];                                                     </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style=""> 641                 out:            for (int i = x; i &lt; x + spanX; i++) {                                    </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style=""> 642                     for (int j = y; j &lt; y + spanY; j++) {                                                </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style=""> 643                         available = available &amp;&amp; !occupied[i][j];                                        </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style=""> 644                         if (!available) break out;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 645                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 646                 }                                                                                        </span>
<span  style=""> 647                                                                                                          </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style=""> 648                 if (available) {                                                                         </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style=""> 649                     vacant[0] = x;                                                                       </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style=""> 650                     vacant[1] = y;                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 651                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 652                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 654         }                                                                                                </span>
<span  style=""> 655                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 656         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 657     }                                                                                                    </span>
<span  style=""> 658                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 659     /**                                                                                                  </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style=""> 660      * Trims the string, removing all whitespace at the beginning and end of the string.                 </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style=""> 661      * Non-breaking whitespaces are also removed.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 662      */                                                                                                  </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style=""> 663     public static String trim(CharSequence s) {                                                          </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style=""> 664         if (s == null) {                                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 665             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 666         }                                                                                                </span>
<span  style=""> 667                                                                                                          </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style=""> 668         // Just strip any sequence of whitespace or java space characters from the beginning and end     </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style=""> 669         Matcher m = sTrimPattern.matcher(s);                                                             </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style=""> 670         return m.replaceAll(&quot;$1&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 671     }                                                                                                    </span>
<span  style=""> 672                                                                                                          </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 673     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style=""> 674     public static boolean isRtl(Resources res) {                                                         </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style=""> 675         return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                          </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style=""> 676                 (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677     }                                                                                                    </span>
<span  style=""> 678                                                                                                          </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style=""> 679     public static void assertWorkerThread() {                                                            </span>
<span class="-1651879741492188549" onmouseenter="enter('-1651879741492188549');" onmouseout="out('-1651879741492188549');" style=""> 680         if (LauncherAppState.isDogfoodBuild()) {                                                         </span>
<span class="-6645568629780700748" onmouseenter="enter('-6645568629780700748');" onmouseout="out('-6645568629780700748');" style=""> 681             Assert.assertTrue(LauncherModel.sWorkerThread.getThreadId() == Process.myTid());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 683     }                                                                                                    </span>
<span  style=""> 684                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 685     /**                                                                                                  </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style=""> 686      * Returns true if the intent is a valid launch intent for a launcher activity of an app.            </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style=""> 687      * This is used to identify shortcuts which are different from the ones exposed by the               </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style=""> 688      * applications&#x27; manifest file.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 689      *                                                                                                   </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style=""> 690      * @param launchIntent The intent that will be launched when the shortcut is clicked.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 691      */                                                                                                  </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style=""> 692     public static boolean isLauncherAppTarget(Intent launchIntent) {                                     </span>
<span class="-961226375159472711" onmouseenter="enter('-961226375159472711');" onmouseout="out('-961226375159472711');" style=""> 693         return launchIntent != null                                                                      </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style=""> 694                 &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                   </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style=""> 695                 &amp;&amp; launchIntent.getComponent() != null                                                   </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style=""> 696                 &amp;&amp; launchIntent.getCategories() != null                                                  </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style=""> 697                 &amp;&amp; launchIntent.getCategories().size() == 1                                              </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style=""> 698                 &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                    </span>
<span class="2314548842827800323" onmouseenter="enter('2314548842827800323');" onmouseout="out('2314548842827800323');" style=""> 699                 &amp;&amp; launchIntent.getExtras() == null                                                      </span>
<span class="-1240644601343588312" onmouseenter="enter('-1240644601343588312');" onmouseout="out('-1240644601343588312');" style=""> 700                 &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 701     }                                                                                                    </span>
<span  style=""> 702                                                                                                          </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style=""> 703     public static float dpiFromPx(int size, DisplayMetrics metrics){                                     </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style=""> 704         float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style=""> 705         return (size / densityRatio);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 706     }                                                                                                    </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style=""> 707     public static int pxFromDp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style=""> 708         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                   </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 709                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 710     }                                                                                                    </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style=""> 711     public static int pxFromSp(float size, DisplayMetrics metrics) {                                     </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style=""> 712         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                    </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 713                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 714     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 715 }                                                                                                        </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span  style="">  16                                                                                                          </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17 package com.android.launcher3;                                                                           </span>
<span  style="">  18                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19 import android.annotation.TargetApi;                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20 import android.app.Activity;                                                                             </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27 import android.content.Intent;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  29 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  30 import android.content.pm.PackageManager;                                                                </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  31 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  32 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  33 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  34 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  35 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  36 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  37 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  38 import android.graphics.Color;                                                                           </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  39 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  40 import android.graphics.Paint;                                                                           </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  41 import android.graphics.PaintFlagsDrawFilter;                                                            </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  42 import android.graphics.Rect;                                                                            </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  43 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  44 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  45 import android.graphics.drawable.PaintDrawable;                                                          </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  46 import android.os.Build;                                                                                 </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  47 import android.os.Process;                                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  48 import android.text.TextUtils;                                                                           </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="">  49 import android.util.DisplayMetrics;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51 import android.util.Pair;                                                                                </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  52 import android.util.SparseArray;                                                                         </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  53 import android.util.TypedValue;                                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  54 import android.view.View;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  55 import android.widget.Toast;                                                                             </span>
<span  style="">  56                                                                                                          </span>
<span class="5153960293286862196" onmouseenter="enter('5153960293286862196');" onmouseout="out('5153960293286862196');" style="">  57 import junit.framework.Assert;                                                                           </span>
<span  style="">  58                                                                                                          </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="">  59 import java.io.ByteArrayOutputStream;                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  60 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61 import java.util.ArrayList;                                                                              </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  62 import java.util.Comparator;                                                                             </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  63 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  64 import java.util.regex.Pattern;                                                                          </span>
<span  style="">  65                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  66 /**                                                                                                      </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  67  * Various utilities shared amongst the Launcher&#x27;s classes.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68  */                                                                                                      </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  69 public final class Utilities {                                                                           </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  70     private static final String TAG = &quot;Launcher.Utilities&quot;;                                              </span>
<span  style="">  71                                                                                                          </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="">  72     private static int sIconWidth = -1;                                                                  </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="">  73     private static int sIconHeight = -1;                                                                 </span>
<span  style="">  74                                                                                                          </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  75     private static final Rect sOldBounds = new Rect();                                                   </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  76     private static final Canvas sCanvas = new Canvas();                                                  </span>
<span  style="">  77                                                                                                          </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="">  78     private static final Pattern sTrimPattern =                                                          </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="">  79             Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                 </span>
<span  style="">  80                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  81     static {                                                                                             </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  82         sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  83                 Paint.FILTER_BITMAP_FLAG));                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84     }                                                                                                    </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  85     static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                       </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  86     static int sColorIndex = 0;                                                                          </span>
<span  style="">  87                                                                                                          </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="">  88     static int[] sLoc0 = new int[2];                                                                     </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="">  89     static int[] sLoc1 = new int[2];                                                                     </span>
<span  style="">  90                                                                                                          </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  91     // To turn on these properties, type                                                                 </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  92     // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                      </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="">  93     static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                        </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="">  94     public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);      </span>
<span  style="">  95                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96     /**                                                                                                  </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style="">  97      * Returns a FastBitmapDrawable with the icon, accurately sized.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  98      */                                                                                                  </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style="">  99     public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                   </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style=""> 100         FastBitmapDrawable d = new FastBitmapDrawable(icon);                                             </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style=""> 101         d.setFilterBitmap(true);                                                                         </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style=""> 102         resizeIconDrawable(d);                                                                           </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style=""> 103         return d;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104     }                                                                                                    </span>
<span  style=""> 105                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106     /**                                                                                                  </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style=""> 107      * Resizes an icon drawable to the correct icon size.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 108      */                                                                                                  </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style=""> 109     static void resizeIconDrawable(Drawable icon) {                                                      </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style=""> 110         icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111     }                                                                                                    </span>
<span  style=""> 112                                                                                                          </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style=""> 113     public static boolean isPropertyEnabled(String propertyName) {                                       </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style=""> 114         return Log.isLoggable(propertyName, Log.VERBOSE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115     }                                                                                                    </span>
<span  style=""> 116                                                                                                          </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style=""> 117     public static boolean isRotationEnabled(Context c) {                                                 </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style=""> 118         boolean enableRotation = sForceEnableRotation ||                                                 </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style=""> 119                 c.getResources().getBoolean(R.bool.allow_rotation);                                      </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style=""> 120         return enableRotation;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121     }                                                                                                    </span>
<span  style=""> 122                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 123     /**                                                                                                  </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 124      * Indicates if the device is running LMP or higher.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 125      */                                                                                                  </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 126     public static boolean isLmpOrAbove() {                                                               </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 127         return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 128     }                                                                                                    </span>
<span  style=""> 129                                                                                                          </span>
<span class="-6979259339435522046" onmouseenter="enter('-6979259339435522046');" onmouseout="out('-6979259339435522046');" style=""> 130     static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                           </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style=""> 131         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 132         try {                                                                                            </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style=""> 133             return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 134         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 135             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137     }                                                                                                    </span>
<span  style=""> 138                                                                                                          </span>
<span class="2780421130698938768" onmouseenter="enter('2780421130698938768');" onmouseout="out('2780421130698938768');" style=""> 139     public static boolean isLmpMr1() {                                                                   </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style=""> 140         return Build.VERSION.SDK_INT == 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 141     }                                                                                                    </span>
<span  style=""> 142                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 143     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 144      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 145      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 146      */                                                                                                  </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style=""> 147     static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,             </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 148             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 149         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 150         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 151         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 152             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 153             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 154                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 155                 return createIconBitmap(                                                                 </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style=""> 156                         resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 157             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 158         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 159             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 161         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162     }                                                                                                    </span>
<span  style=""> 163                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 164     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 165      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 166      */                                                                                                  </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style=""> 167     static Bitmap createIconBitmap(Bitmap icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 168         synchronized (sCanvas) { // we share the statics :-(                                             </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 169             if (sIconWidth == -1) {                                                                      </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 170                 initStatics(context);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 172         }                                                                                                </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style=""> 173         if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                          </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 174             return icon;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 176         return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177     }                                                                                                    </span>
<span  style=""> 178                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 179     /**                                                                                                  </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 180      * Returns a bitmap suitable for the all apps view.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 181      */                                                                                                  </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 182     public static Bitmap createIconBitmap(Drawable icon, Context context) {                              </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 183         synchronized (sCanvas) { // we share the statics :-(                                             </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 184             if (sIconWidth == -1) {                                                                      </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 185                 initStatics(context);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 186             }                                                                                            </span>
<span  style=""> 187                                                                                                          </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style=""> 188             int width = sIconWidth;                                                                      </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style=""> 189             int height = sIconHeight;                                                                    </span>
<span  style=""> 190                                                                                                          </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 191             if (icon instanceof PaintDrawable) {                                                         </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 192                 PaintDrawable painter = (PaintDrawable) icon;                                            </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 193                 painter.setIntrinsicWidth(width);                                                        </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 194                 painter.setIntrinsicHeight(height);                                                      </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 195             } else if (icon instanceof BitmapDrawable) {                                                 </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 196                 // Ensure the bitmap has a density.                                                      </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 197                 BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                   </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 198                 Bitmap bitmap = bitmapDrawable.getBitmap();                                              </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 199                 if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                        </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 200                     bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 201                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 202             }                                                                                            </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 203             int sourceWidth = icon.getIntrinsicWidth();                                                  </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 204             int sourceHeight = icon.getIntrinsicHeight();                                                </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 205             if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                   </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 206                 // Scale the icon proportionally to the icon dimensions                                  </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 207                 final float ratio = (float) sourceWidth / sourceHeight;                                  </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 208                 if (sourceWidth &gt; sourceHeight) {                                                        </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 209                     height = (int) (width / ratio);                                                      </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 210                 } else if (sourceHeight &gt; sourceWidth) {                                                 </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 211                     width = (int) (height * ratio);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 213             }                                                                                            </span>
<span  style=""> 214                                                                                                          </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 215             // no intrinsic size --&gt; use default size                                                    </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style=""> 216             int textureWidth = sIconWidth;                                                               </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style=""> 217             int textureHeight = sIconHeight;                                                             </span>
<span  style=""> 218                                                                                                          </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 219             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                       </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 220                     Bitmap.Config.ARGB_8888);                                                            </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 221             final Canvas canvas = sCanvas;                                                               </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 222             canvas.setBitmap(bitmap);                                                                    </span>
<span  style=""> 223                                                                                                          </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 224             final int left = (textureWidth-width) / 2;                                                   </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 225             final int top = (textureHeight-height) / 2;                                                  </span>
<span  style=""> 226                                                                                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 227             @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                       </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 228             final boolean debug = false;                                                                 </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 229             if (debug) {                                                                                 </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 230                 // draw a big box for the icon for debugging                                             </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 231                 canvas.drawColor(sColors[sColorIndex]);                                                  </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 232                 if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                    </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 233                 Paint debugPaint = new Paint();                                                          </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 234                 debugPaint.setColor(0xffcccc00);                                                         </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 235                 canvas.drawRect(left, top, left+width, top+height, debugPaint);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 236             }                                                                                            </span>
<span  style=""> 237                                                                                                          </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 238             sOldBounds.set(icon.getBounds());                                                            </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 239             icon.setBounds(left, top, left+width, top+height);                                           </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 240             icon.draw(canvas);                                                                           </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 241             icon.setBounds(sOldBounds);                                                                  </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 242             canvas.setBitmap(null);                                                                      </span>
<span  style=""> 243                                                                                                          </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 244             return bitmap;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 245         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 246     }                                                                                                    </span>
<span  style=""> 247                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 248     /**                                                                                                  </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 249      * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s             </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 250      * coordinates.                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 251      *                                                                                                   </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 252      * @param descendant The descendant to which the passed coordinate is relative.                      </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 253      * @param root The root view to make the coordinates relative to.                                    </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 254      * @param coord The coordinate that we want mapped.                                                  </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 255      * @param includeRootScroll Whether or not to account for the scroll of the descendant:              </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 256      *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.            </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 257      * @return The factor by which this descendant is scaled relative to this DragLayer. Caution         </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 258      *         this scale factor is assumed to be equal in X and Y, and so if at any point this          </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 259      *         assumption fails, we will need to return a pair of scale factors.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 260      */                                                                                                  </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 261     public static float getDescendantCoordRelativeToParent(View descendant, View root,                   </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 262                                                            int[] coord, boolean includeRootScroll) {     </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 263         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 264                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 265         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 266                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 267         View v = descendant;                                                                             </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 268         while(v != root &amp;&amp; v != null) {                                                                  </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 269             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 270             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 271         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 272         ancestorChain.add(root);                                                                         </span>
<span  style=""> 273                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 274         float scale = 1.0f;                                                                              </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 275         int count = ancestorChain.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 276         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 277             View v0 = ancestorChain.get(i);                                                              </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 278             // For TextViews, scroll has a meaning which relates to the text position                    </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 279             // which is very strange... ignore the scroll.                                               </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 280             if (v0 != descendant || includeRootScroll) {                                                 </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 281                 pt[0] -= v0.getScrollX();                                                                </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 282                 pt[1] -= v0.getScrollY();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 283             }                                                                                            </span>
<span  style=""> 284                                                                                                          </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 285             v0.getMatrix().mapPoints(pt);                                                                </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 286             pt[0] += v0.getLeft();                                                                       </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 287             pt[1] += v0.getTop();                                                                        </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 288             scale *= v0.getScaleX();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 289         }                                                                                                </span>
<span  style=""> 290                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 291         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 292         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 293         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 294     }                                                                                                    </span>
<span  style=""> 295                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 296     /**                                                                                                  </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 297      * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 298      */                                                                                                  </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 299     public static float mapCoordInSelfToDescendent(View descendant, View root,                           </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 300                                                    int[] coord) {                                        </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 301         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 302                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 303         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 304                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 305         View v = descendant;                                                                             </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 306         while(v != root) {                                                                               </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 307             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 308             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 309         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 310         ancestorChain.add(root);                                                                         </span>
<span  style=""> 311                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 312         float scale = 1.0f;                                                                              </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 313         Matrix inverse = new Matrix();                                                                   </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 314         int count = ancestorChain.size();                                                                </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 315         for (int i = count - 1; i &gt;= 0; i--) {                                                           </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 316             View ancestor = ancestorChain.get(i);                                                        </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 317             View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                           </span>
<span  style=""> 318                                                                                                          </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 319             pt[0] += ancestor.getScrollX();                                                              </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 320             pt[1] += ancestor.getScrollY();                                                              </span>
<span  style=""> 321                                                                                                          </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 322             if (next != null) {                                                                          </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 323                 pt[0] -= next.getLeft();                                                                 </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 324                 pt[1] -= next.getTop();                                                                  </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 325                 next.getMatrix().invert(inverse);                                                        </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 326                 inverse.mapPoints(pt);                                                                   </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 327                 scale *= next.getScaleX();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 328             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 329         }                                                                                                </span>
<span  style=""> 330                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 331         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 332         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 333         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 334     }                                                                                                    </span>
<span  style=""> 335                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 336     /**                                                                                                  </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 337      * Utility method to determine whether the given point, in local coordinates,                        </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 338      * is inside the view, where the area of the view is expanded by the slop factor.                    </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 339      * This method is called while processing touch-move events to determine if the event                </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 340      * is still within the view.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 341      */                                                                                                  </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 342     public static boolean pointInView(View v, float localX, float localY, float slop) {                  </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 343         return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                   </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 344                 localY &lt; (v.getHeight() + slop);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 345     }                                                                                                    </span>
<span  style=""> 346                                                                                                          </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style=""> 347     private static void initStatics(Context context) {                                                   </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style=""> 348         final Resources resources = context.getResources();                                              </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style=""> 349         sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350     }                                                                                                    </span>
<span  style=""> 351                                                                                                          </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style=""> 352     public static void setIconSize(int widthPx) {                                                        </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style=""> 353         sIconWidth = sIconHeight = widthPx;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 354     }                                                                                                    </span>
<span  style=""> 355                                                                                                          </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 356     public static void scaleRect(Rect r, float scale) {                                                  </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 357         if (scale != 1.0f) {                                                                             </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 358             r.left = (int) (r.left * scale + 0.5f);                                                      </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 359             r.top = (int) (r.top * scale + 0.5f);                                                        </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 360             r.right = (int) (r.right * scale + 0.5f);                                                    </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 361             r.bottom = (int) (r.bottom * scale + 0.5f);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 362         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 363     }                                                                                                    </span>
<span  style=""> 364                                                                                                          </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 365     public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                     </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 366         v0.getLocationInWindow(sLoc0);                                                                   </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 367         v1.getLocationInWindow(sLoc1);                                                                   </span>
<span  style=""> 368                                                                                                          </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 369         sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                        </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 370         sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                       </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 371         sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                        </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 372         sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                       </span>
<span  style=""> 373                                                                                                          </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 374         if (delta == null) {                                                                             </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 375             delta = new int[2];                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 376         }                                                                                                </span>
<span  style=""> 377                                                                                                          </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 378         delta[0] = sLoc1[0] - sLoc0[0];                                                                  </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 379         delta[1] = sLoc1[1] - sLoc0[1];                                                                  </span>
<span  style=""> 380                                                                                                          </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 381         return delta;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 382     }                                                                                                    </span>
<span  style=""> 383                                                                                                          </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 384     public static void scaleRectAboutCenter(Rect r, float scale) {                                       </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 385         int cx = r.centerX();                                                                            </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 386         int cy = r.centerY();                                                                            </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 387         r.offset(-cx, -cy);                                                                              </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 388         Utilities.scaleRect(r, scale);                                                                   </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 389         r.offset(cx, cy);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390     }                                                                                                    </span>
<span  style=""> 391                                                                                                          </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 392     public static void startActivityForResultSafely(                                                     </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 393             Activity activity, Intent intent, int requestCode) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 394         try {                                                                                            </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 395             activity.startActivityForResult(intent, requestCode);                                        </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 396         } catch (ActivityNotFoundException e) {                                                          </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 397             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 398         } catch (SecurityException e) {                                                                  </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 399             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 400             Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                     </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 401                     &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +       </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 402                     &quot;or use the exported attribute for this activity.&quot;, e);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 403         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404     }                                                                                                    </span>
<span  style=""> 405                                                                                                          </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 406     static boolean isSystemApp(Context context, Intent intent) {                                         </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 407         PackageManager pm = context.getPackageManager();                                                 </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 408         ComponentName cn = intent.getComponent();                                                        </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 409         String packageName = null;                                                                       </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 410         if (cn == null) {                                                                                </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 411             ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);            </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 412             if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                         </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 413                 packageName = info.activityInfo.packageName;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 414             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 415         } else {                                                                                         </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 416             packageName = cn.getPackageName();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417         }                                                                                                </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 418         if (packageName != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 419             try {                                                                                        </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 420                 PackageInfo info = pm.getPackageInfo(packageName, 0);                                    </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 421                 return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                               </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 422                         ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);               </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 423             } catch (NameNotFoundException e) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 424                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 426         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 427             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 429     }                                                                                                    </span>
<span  style=""> 430                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 431     /**                                                                                                  </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 432      * This picks a dominant color, looking for high-saturation, high-value, repeated hues.              </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 433      * @param bitmap The bitmap to scan                                                                  </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 434      * @param samples The approximate max number of samples to use.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 435      */                                                                                                  </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 436     static int findDominantColorByHue(Bitmap bitmap, int samples) {                                      </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 437         final int height = bitmap.getHeight();                                                           </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 438         final int width = bitmap.getWidth();                                                             </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 439         int sampleStride = (int) Math.sqrt((height * width) / samples);                                  </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 440         if (sampleStride &lt; 1) {                                                                          </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 441             sampleStride = 1;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 442         }                                                                                                </span>
<span  style=""> 443                                                                                                          </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 444         // This is an out-param, for getting the hsv values for an rgb                                   </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 445         float[] hsv = new float[3];                                                                      </span>
<span  style=""> 446                                                                                                          </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 447         // First get the best hue, by creating a histogram over 360 hue buckets,                         </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 448         // where each pixel contributes a score weighted by saturation, value, and alpha.                </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 449         float[] hueScoreHistogram = new float[360];                                                      </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 450         float highScore = -1;                                                                            </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 451         int bestHue = -1;                                                                                </span>
<span  style=""> 452                                                                                                          </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 453         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 454             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 455                 int argb = bitmap.getPixel(x, y);                                                        </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 456                 int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                         </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 457                 if (alpha &lt; 0x80) {                                                                      </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 458                     // Drop mostly-transparent pixels.                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 459                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 460                 }                                                                                        </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 461                 // Remove the alpha channel.                                                             </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 462                 int rgb = argb | 0xFF000000;                                                             </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 463                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 464                 // Bucket colors by the 360 integer hues.                                                </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 465                 int hue = (int) hsv[0];                                                                  </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 466                 if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                        </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 467                     // Defensively avoid array bounds violations.                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 468                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 469                 }                                                                                        </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 470                 float score = hsv[1] * hsv[2];                                                           </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 471                 hueScoreHistogram[hue] += score;                                                         </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 472                 if (hueScoreHistogram[hue] &gt; highScore) {                                                </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 473                     highScore = hueScoreHistogram[hue];                                                  </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 474                     bestHue = hue;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 475                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 476             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 477         }                                                                                                </span>
<span  style=""> 478                                                                                                          </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 479         SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                         </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 480         int bestColor = 0xff000000;                                                                      </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 481         highScore = -1;                                                                                  </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 482         // Go back over the RGB colors that match the winning hue,                                       </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 483         // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                 </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 484         // The highest-scoring RGB color wins.                                                           </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 485         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 486             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 487                 int rgb = bitmap.getPixel(x, y) | 0xff000000;                                            </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 488                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 489                 int hue = (int) hsv[0];                                                                  </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 490                 if (hue == bestHue) {                                                                    </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 491                     float s = hsv[1];                                                                    </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 492                     float v = hsv[2];                                                                    </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 493                     int bucket = (int) (s * 100) + (int) (v * 10000);                                    </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 494                     // Score by cumulative saturation * value.                                           </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 495                     float score = s * v;                                                                 </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 496                     Float oldTotal = rgbScores.get(bucket);                                              </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 497                     float newTotal = oldTotal == null ? score : oldTotal + score;                        </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 498                     rgbScores.put(bucket, newTotal);                                                     </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 499                     if (newTotal &gt; highScore) {                                                          </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 500                         highScore = newTotal;                                                            </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 501                         // All the colors in the winning bucket are very similar. Last in wins.          </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 502                         bestColor = rgb;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 505             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506         }                                                                                                </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 507         return bestColor;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508     }                                                                                                    </span>
<span  style=""> 509                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 510     /*                                                                                                   </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 511      * Finds a system apk which had a broadcast receiver listening to a particular action.               </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 512      * @param action intent action used to find the apk                                                  </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 513      * @return a pair of apk package name and the resources.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 514      */                                                                                                  </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 515     static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                     </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 516         final Intent intent = new Intent(action);                                                        </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 517         for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                 </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 518             if (info.activityInfo != null &amp;&amp;                                                             </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 519                     (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {      </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 520                 final String packageName = info.activityInfo.packageName;                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 521                 try {                                                                                    </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 522                     final Resources res = pm.getResourcesForApplication(packageName);                    </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 523                     return Pair.create(packageName, res);                                                </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 524                 } catch (NameNotFoundException e) {                                                      </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 525                     Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 527             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 528         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 529         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530     }                                                                                                    </span>
<span  style=""> 531                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 532     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 533     public static boolean isViewAttachedToWindow(View v) {                                               </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 534         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 535             return v.isAttachedToWindow();                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 536         } else {                                                                                         </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 537             // A proxy call which returns null, if the view is not attached to the window.               </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 538             return v.getKeyDispatcherState() != null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 539         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 540     }                                                                                                    </span>
<span  style=""> 541                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 542     /**                                                                                                  </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 543      * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}            </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 544      * provided by the same package which is set to be global search activity.                           </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 545      * If widgetCategory is not supported, or no such widget is found, returns the first widget          </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 546      * provided by the package.                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 547      */                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 548     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 549     public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                       </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 550         SearchManager searchManager =                                                                    </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 551                 (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                        </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 552         ComponentName searchComponent = searchManager.getGlobalSearchActivity();                         </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 553         if (searchComponent == null) return null;                                                        </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 554         String providerPkg = searchComponent.getPackageName();                                           </span>
<span  style=""> 555                                                                                                          </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 556         AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                      </span>
<span  style=""> 557                                                                                                          </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 558         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                       </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 559         for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                    </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 560             if (info.provider.getPackageName().equals(providerPkg)) {                                    </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 561                 if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                       </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 562                     if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 563                         return info;                                                                     </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 564                     } else if (defaultWidgetForSearchPackage == null) {                                  </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 565                         defaultWidgetForSearchPackage = info;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 567                 } else {                                                                                 </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 568                     return info;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 570             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 571         }                                                                                                </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 572         return defaultWidgetForSearchPackage;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573     }                                                                                                    </span>
<span  style=""> 574                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 575     /**                                                                                                  </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style=""> 576      * Compresses the bitmap to a byte array for serialization.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 577      */                                                                                                  </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style=""> 578     public static byte[] flattenBitmap(Bitmap bitmap) {                                                  </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style=""> 579         // Try go guesstimate how much space the icon will take when serialized                          </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style=""> 580         // to avoid unnecessary allocations/copies during the write.                                     </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style=""> 581         int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                           </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style=""> 582         ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 583         try {                                                                                            </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style=""> 584             bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                        </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style=""> 585             out.flush();                                                                                 </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style=""> 586             out.close();                                                                                 </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style=""> 587             return out.toByteArray();                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 588         } catch (IOException e) {                                                                        </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style=""> 589             Log.w(TAG, &quot;Could not write bitmap&quot;);                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 590             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 591         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 592     }                                                                                                    </span>
<span  style=""> 593                                                                                                          </span>
<span class="-6850884554410138223" onmouseenter="enter('-6850884554410138223');" onmouseout="out('-6850884554410138223');" style=""> 594     public static final Comparator&lt;ItemInfo&gt; RANK_COMPARATOR = new Comparator&lt;ItemInfo&gt;() {              </span>
<span  style=""> 595                                                                                                          </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 596         @Override                                                                                        </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style=""> 597         public int compare(ItemInfo lhs, ItemInfo rhs) {                                                 </span>
<span class="-1773115321274512652" onmouseenter="enter('-1773115321274512652');" onmouseout="out('-1773115321274512652');" style=""> 598             return lhs.rank - rhs.rank;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 599         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 600     };                                                                                                   </span>
<span  style=""> 601                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 602     /**                                                                                                  </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style=""> 603      * Find the first vacant cell, if there is one.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 604      *                                                                                                   </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style=""> 605      * @param vacant Holds the x and y coordinate of the vacant cell                                     </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style=""> 606      * @param spanX Horizontal cell span.                                                                </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style=""> 607      * @param spanY Vertical cell span.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 608      *                                                                                                   </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style=""> 609      * @return true if a vacant cell was found                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 610      */                                                                                                  </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style=""> 611     public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                             </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style=""> 612             int xCount, int yCount, boolean[][] occupied) {                                              </span>
<span  style=""> 613                                                                                                          </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style=""> 614         for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                    </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style=""> 615             for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style=""> 616                 boolean available = !occupied[x][y];                                                     </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style=""> 617                 out:            for (int i = x; i &lt; x + spanX; i++) {                                    </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style=""> 618                     for (int j = y; j &lt; y + spanY; j++) {                                                </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style=""> 619                         available = available &amp;&amp; !occupied[i][j];                                        </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style=""> 620                         if (!available) break out;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 621                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 622                 }                                                                                        </span>
<span  style=""> 623                                                                                                          </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style=""> 624                 if (available) {                                                                         </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style=""> 625                     vacant[0] = x;                                                                       </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style=""> 626                     vacant[1] = y;                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 627                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 628                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 629             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630         }                                                                                                </span>
<span  style=""> 631                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 632         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 633     }                                                                                                    </span>
<span  style=""> 634                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 635     /**                                                                                                  </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style=""> 636      * Trims the string, removing all whitespace at the beginning and end of the string.                 </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style=""> 637      * Non-breaking whitespaces are also removed.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 638      */                                                                                                  </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style=""> 639     public static String trim(CharSequence s) {                                                          </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style=""> 640         if (s == null) {                                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 641             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 642         }                                                                                                </span>
<span  style=""> 643                                                                                                          </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style=""> 644         // Just strip any sequence of whitespace or java space characters from the beginning and end     </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style=""> 645         Matcher m = sTrimPattern.matcher(s);                                                             </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style=""> 646         return m.replaceAll(&quot;$1&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 647     }                                                                                                    </span>
<span  style=""> 648                                                                                                          </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 649     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style=""> 650     public static boolean isRtl(Resources res) {                                                         </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style=""> 651         return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                          </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style=""> 652                 (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 653     }                                                                                                    </span>
<span  style=""> 654                                                                                                          </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style=""> 655     public static void assertWorkerThread() {                                                            </span>
<span class="-1651879741492188549" onmouseenter="enter('-1651879741492188549');" onmouseout="out('-1651879741492188549');" style=""> 656         if (LauncherAppState.isDogfoodBuild()) {                                                         </span>
<span class="-6645568629780700748" onmouseenter="enter('-6645568629780700748');" onmouseout="out('-6645568629780700748');" style=""> 657             Assert.assertTrue(LauncherModel.sWorkerThread.getThreadId() == Process.myTid());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 658         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 659     }                                                                                                    </span>
<span  style=""> 660                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 661     /**                                                                                                  </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style=""> 662      * Returns true if the intent is a valid launch intent for a launcher activity of an app.            </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style=""> 663      * This is used to identify shortcuts which are different from the ones exposed by the               </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style=""> 664      * applications&#x27; manifest file.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 665      *                                                                                                   </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style=""> 666      * @param launchIntent The intent that will be launched when the shortcut is clicked.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 667      */                                                                                                  </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style=""> 668     public static boolean isLauncherAppTarget(Intent launchIntent) {                                     </span>
<span class="-961226375159472711" onmouseenter="enter('-961226375159472711');" onmouseout="out('-961226375159472711');" style=""> 669         return launchIntent != null                                                                      </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style=""> 670                 &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                   </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style=""> 671                 &amp;&amp; launchIntent.getComponent() != null                                                   </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style=""> 672                 &amp;&amp; launchIntent.getCategories() != null                                                  </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style=""> 673                 &amp;&amp; launchIntent.getCategories().size() == 1                                              </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style=""> 674                 &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                    </span>
<span class="2314548842827800323" onmouseenter="enter('2314548842827800323');" onmouseout="out('2314548842827800323');" style=""> 675                 &amp;&amp; launchIntent.getExtras() == null                                                      </span>
<span class="-1240644601343588312" onmouseenter="enter('-1240644601343588312');" onmouseout="out('-1240644601343588312');" style=""> 676                 &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 677     }                                                                                                    </span>
<span  style=""> 678                                                                                                          </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style=""> 679     public static float dpiFromPx(int size, DisplayMetrics metrics){                                     </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style=""> 680         float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style=""> 681         return (size / densityRatio);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 682     }                                                                                                    </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style=""> 683     public static int pxFromDp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style=""> 684         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                   </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 685                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 686     }                                                                                                    </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style=""> 687     public static int pxFromSp(float size, DisplayMetrics metrics) {                                     </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style=""> 688         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                    </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 689                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 690     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 691 }                                                                                                        </span>






















</pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1 /*                                                                                                       </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2  * Copyright (C) 2008 The Android Open Source Project                                                    </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3  *                                                                                                       </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4  * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                       </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5  * you may not use this file except in compliance with the License.                                      </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6  * You may obtain a copy of the License at                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7  *                                                                                                       </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8  *      http://www.apache.org/licenses/LICENSE-2.0                                                       </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9  *                                                                                                       </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10  * Unless required by applicable law or agreed to in writing, software                                   </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11  * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                     </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                              </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13  * See the License for the specific language governing permissions and                                   </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14  * limitations under the License.                                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15  */                                                                                                      </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  16 package com.android.launcher3;                                                                           </span>
<span  style="">  17                                                                                                          </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  18 import android.annotation.TargetApi;                                                                     </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  19 import android.app.Activity;                                                                             </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  20 import android.app.SearchManager;                                                                        </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  21 import android.appwidget.AppWidgetManager;                                                               </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  22 import android.appwidget.AppWidgetProviderInfo;                                                          </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  23 import android.content.ActivityNotFoundException;                                                        </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  24 import android.content.ComponentName;                                                                    </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  25 import android.content.Context;                                                                          </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  26 import android.content.Intent;                                                                           </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  27 import android.content.pm.ApplicationInfo;                                                               </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  28 import android.content.pm.PackageInfo;                                                                   </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  29 import android.content.pm.PackageManager.NameNotFoundException;                                          </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  30 import android.content.pm.PackageManager;                                                                </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  31 import android.content.pm.ResolveInfo;                                                                   </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  32 import android.content.res.Resources;                                                                    </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="">  33 import android.database.Cursor;                                                                          </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  34 import android.graphics.Bitmap;                                                                          </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="">  35 import android.graphics.BitmapFactory;                                                                   </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  36 import android.graphics.Canvas;                                                                          </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  37 import android.graphics.Color;                                                                           </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  38 import android.graphics.Matrix;                                                                          </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  39 import android.graphics.Paint;                                                                           </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  40 import android.graphics.PaintFlagsDrawFilter;                                                            </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  41 import android.graphics.Rect;                                                                            </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  42 import android.graphics.drawable.BitmapDrawable;                                                         </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  43 import android.graphics.drawable.Drawable;                                                               </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  44 import android.graphics.drawable.PaintDrawable;                                                          </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  45 import android.os.Build;                                                                                 </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="">  46 import android.os.Process;                                                                               </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="">  47 import android.text.TextUtils;                                                                           </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="">  48 import android.util.DisplayMetrics;                                                                      </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  49 import android.util.Log;                                                                                 </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  50 import android.util.Pair;                                                                                </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  51 import android.util.SparseArray;                                                                         </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="">  52 import android.util.TypedValue;                                                                          </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  53 import android.view.View;                                                                                </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  54 import android.widget.Toast;                                                                             </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="">  55 import java.io.ByteArrayOutputStream;                                                                    </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="">  56 import java.io.IOException;                                                                              </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  57 import java.util.ArrayList;                                                                              </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  58 import java.util.Comparator;                                                                             </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="">  59 import java.util.regex.Matcher;                                                                          </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="">  60 import java.util.regex.Pattern;                                                                          </span>
<span class="5153960293286862196" onmouseenter="enter('5153960293286862196');" onmouseout="out('5153960293286862196');" style="">  61 import junit.framework.Assert;                                                                           </span>
<span  style="">  62                                                                                                          </span>
<span  style="">  63                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  64 /**                                                                                                      </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  65  * Various utilities shared amongst the Launcher&#x27;s classes.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  66  */                                                                                                      </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  67 public final class Utilities {                                                                           </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  68     private static final String TAG = &quot;Launcher.Utilities&quot;;                                              </span>
<span  style="">  69                                                                                                          </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="">  70     private static int sIconWidth = -1;                                                                  </span>
<span  style="">  71                                                                                                          </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="">  72     private static int sIconHeight = -1;                                                                 </span>
<span  style="">  73                                                                                                          </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  74     private static final Rect sOldBounds = new Rect();                                                   </span>
<span  style="">  75                                                                                                          </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  76     private static final Canvas sCanvas = new Canvas();                                                  </span>
<span  style="">  77                                                                                                          </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="">  78     private static final Pattern sTrimPattern =                                                          </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="">  79             Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                 </span>
<span  style="">  80                                                                                                          </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  81     static {                                                                                             </span>
<span class="2243904178974373005" onmouseenter="enter('2243904178974373005');" onmouseout="out('2243904178974373005');" style="">  82         sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG, Paint.FILTER_BITMAP_FLAG));    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  83     }                                                                                                    </span>
<span  style="">  84                                                                                                          </span>
<span class="1883998753051363106" onmouseenter="enter('1883998753051363106');" onmouseout="out('1883998753051363106');" style="">  85     static int[] sColors = new int[]{ 0xffff0000, 0xff00ff00, 0xff0000ff };                              </span>
<span  style="">  86                                                                                                          </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  87     static int sColorIndex = 0;                                                                          </span>
<span  style="">  88                                                                                                          </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="">  89     static int[] sLoc0 = new int[2];                                                                     </span>
<span  style="">  90                                                                                                          </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="">  91     static int[] sLoc1 = new int[2];                                                                     </span>
<span  style="">  92                                                                                                          </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  93     // To turn on these properties, type                                                                 </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  94     // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                      </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="">  95     static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                        </span>
<span  style="">  96                                                                                                          </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="">  97     public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);      </span>
<span  style="">  98                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  99     /**                                                                                                  </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style=""> 100      * Returns a FastBitmapDrawable with the icon, accurately sized.                                     </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 101      */                                                                                                  </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style=""> 102     public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                   </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style=""> 103         FastBitmapDrawable d = new FastBitmapDrawable(icon);                                             </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style=""> 104         d.setFilterBitmap(true);                                                                         </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style=""> 105         resizeIconDrawable(d);                                                                           </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style=""> 106         return d;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 107     }                                                                                                    </span>
<span  style=""> 108                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 109     /**                                                                                                  </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style=""> 110      * Resizes an icon drawable to the correct icon size.                                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 111      */                                                                                                  </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style=""> 112     static void resizeIconDrawable(Drawable icon) {                                                      </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style=""> 113         icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 114     }                                                                                                    </span>
<span  style=""> 115                                                                                                          </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style=""> 116     public static boolean isPropertyEnabled(String propertyName) {                                       </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style=""> 117         return Log.isLoggable(propertyName, Log.VERBOSE);                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 118     }                                                                                                    </span>
<span  style=""> 119                                                                                                          </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style=""> 120     public static boolean isRotationEnabled(Context c) {                                                 </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style=""> 121         boolean enableRotation = sForceEnableRotation ||                                                 </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style=""> 122                 c.getResources().getBoolean(R.bool.allow_rotation);                                      </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style=""> 123         return enableRotation;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 124     }                                                                                                    </span>
<span  style=""> 125                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 126     /**                                                                                                  </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 127      * Indicates if the device is running LMP or higher.                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 128      */                                                                                                  </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 129     public static boolean isLmpOrAbove() {                                                               </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 130         return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 131     }                                                                                                    </span>
<span  style=""> 132                                                                                                          </span>
<span class="-6979259339435522046" onmouseenter="enter('-6979259339435522046');" onmouseout="out('-6979259339435522046');" style=""> 133     static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                           </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style=""> 134         byte[] data = c.getBlob(iconIndex);                                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 135         try {                                                                                            </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style=""> 136             return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);       </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 137         } catch (Exception e) {                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 138             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 139         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 140     }                                                                                                    </span>
<span  style=""> 141                                                                                                          </span>
<span class="2780421130698938768" onmouseenter="enter('2780421130698938768');" onmouseout="out('2780421130698938768');" style=""> 142     public static boolean isLmpMr1() {                                                                   </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style=""> 143         return Build.VERSION.SDK_INT == 22;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 144     }                                                                                                    </span>
<span  style=""> 145                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 146     /**                                                                                                  </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 147      * Returns a bitmap suitable for the all apps view. If the package or the resource do not            </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 148      * exist, it returns null.                                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 149      */                                                                                                  </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style=""> 150     static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,             </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 151             Context context) {                                                                           </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 152         PackageManager packageManager = context.getPackageManager();                                     </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 153         // the resource                                                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 154         try {                                                                                            </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 155             Resources resources = packageManager.getResourcesForApplication(packageName);                </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 156             if (resources != null) {                                                                     </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 157                 final int id = resources.getIdentifier(resourceName, null, null);                        </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 158                 return createIconBitmap(                                                                 </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style=""> 159                         resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 160             }                                                                                            </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 161         } catch (Exception e) {                                                                          </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 162             // Icon not found.                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 163         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 164         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 165     }                                                                                                    </span>
<span  style=""> 166                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 167     /**                                                                                                  </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 168      * Returns a bitmap which is of the appropriate size to be displayed as an icon                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 169      */                                                                                                  </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style=""> 170     static Bitmap createIconBitmap(Bitmap icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 171         synchronized (sCanvas) { // we share the statics :-(                                             </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 172             if (sIconWidth == -1) {                                                                      </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 173                 initStatics(context);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 174             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 175         }                                                                                                </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style=""> 176         if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                          </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 177             return icon;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178         }                                                                                                </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 179         return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 180     }                                                                                                    </span>
<span  style=""> 181                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 182     /**                                                                                                  </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 183      * Returns a bitmap suitable for the all apps view.                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 184      */                                                                                                  </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 185     public static Bitmap createIconBitmap(Drawable icon, Context context) {                              </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 186         synchronized (sCanvas) { // we share the statics :-(                                             </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 187             if (sIconWidth == -1) {                                                                      </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 188                 initStatics(context);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189             }                                                                                            </span>
<span  style=""> 190                                                                                                          </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style=""> 191             int width = sIconWidth;                                                                      </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style=""> 192             int height = sIconHeight;                                                                    </span>
<span  style=""> 193                                                                                                          </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 194             if (icon instanceof PaintDrawable) {                                                         </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 195                 PaintDrawable painter = (PaintDrawable) icon;                                            </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 196                 painter.setIntrinsicWidth(width);                                                        </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 197                 painter.setIntrinsicHeight(height);                                                      </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 198             } else if (icon instanceof BitmapDrawable) {                                                 </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 199                 // Ensure the bitmap has a density.                                                      </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 200                 BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                   </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 201                 Bitmap bitmap = bitmapDrawable.getBitmap();                                              </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 202                 if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                        </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 203                     bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 204                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 205             }                                                                                            </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 206             int sourceWidth = icon.getIntrinsicWidth();                                                  </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 207             int sourceHeight = icon.getIntrinsicHeight();                                                </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 208             if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                   </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 209                 // Scale the icon proportionally to the icon dimensions                                  </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 210                 final float ratio = (float) sourceWidth / sourceHeight;                                  </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 211                 if (sourceWidth &gt; sourceHeight) {                                                        </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 212                     height = (int) (width / ratio);                                                      </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 213                 } else if (sourceHeight &gt; sourceWidth) {                                                 </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 214                     width = (int) (height * ratio);                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 215                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 216             }                                                                                            </span>
<span  style=""> 217                                                                                                          </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 218             // no intrinsic size --&gt; use default size                                                    </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style=""> 219             int textureWidth = sIconWidth;                                                               </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style=""> 220             int textureHeight = sIconHeight;                                                             </span>
<span  style=""> 221                                                                                                          </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 222             final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                       </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 223                     Bitmap.Config.ARGB_8888);                                                            </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 224             final Canvas canvas = sCanvas;                                                               </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 225             canvas.setBitmap(bitmap);                                                                    </span>
<span  style=""> 226                                                                                                          </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 227             final int left = (textureWidth-width) / 2;                                                   </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 228             final int top = (textureHeight-height) / 2;                                                  </span>
<span  style=""> 229                                                                                                          </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 230             @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                       </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 231             final boolean debug = false;                                                                 </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 232             if (debug) {                                                                                 </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 233                 // draw a big box for the icon for debugging                                             </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 234                 canvas.drawColor(sColors[sColorIndex]);                                                  </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 235                 if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                    </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 236                 Paint debugPaint = new Paint();                                                          </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 237                 debugPaint.setColor(0xffcccc00);                                                         </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 238                 canvas.drawRect(left, top, left+width, top+height, debugPaint);                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 239             }                                                                                            </span>
<span  style=""> 240                                                                                                          </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 241             sOldBounds.set(icon.getBounds());                                                            </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 242             icon.setBounds(left, top, left+width, top+height);                                           </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 243             icon.draw(canvas);                                                                           </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 244             icon.setBounds(sOldBounds);                                                                  </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 245             canvas.setBitmap(null);                                                                      </span>
<span  style=""> 246                                                                                                          </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 247             return bitmap;                                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 248         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 249     }                                                                                                    </span>
<span  style=""> 250                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 251     /**                                                                                                  </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 252      * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s             </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 253      * coordinates.                                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 254      *                                                                                                   </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 255      * @param descendant The descendant to which the passed coordinate is relative.                      </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 256      * @param root The root view to make the coordinates relative to.                                    </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 257      * @param coord The coordinate that we want mapped.                                                  </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 258      * @param includeRootScroll Whether or not to account for the scroll of the descendant:              </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 259      *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.            </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 260      * @return The factor by which this descendant is scaled relative to this DragLayer. Caution         </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 261      *         this scale factor is assumed to be equal in X and Y, and so if at any point this          </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 262      *         assumption fails, we will need to return a pair of scale factors.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 263      */                                                                                                  </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 264     public static float getDescendantCoordRelativeToParent(View descendant, View root,                   </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 265                                                            int[] coord, boolean includeRootScroll) {     </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 266         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 267                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 268         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 269                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 270         View v = descendant;                                                                             </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 271         while(v != root &amp;&amp; v != null) {                                                                  </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 272             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 273             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 274         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 275         ancestorChain.add(root);                                                                         </span>
<span  style=""> 276                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 277         float scale = 1.0f;                                                                              </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 278         int count = ancestorChain.size();                                                                </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 279         for (int i = 0; i &lt; count; i++) {                                                                </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 280             View v0 = ancestorChain.get(i);                                                              </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 281             // For TextViews, scroll has a meaning which relates to the text position                    </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 282             // which is very strange... ignore the scroll.                                               </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 283             if (v0 != descendant || includeRootScroll) {                                                 </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 284                 pt[0] -= v0.getScrollX();                                                                </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 285                 pt[1] -= v0.getScrollY();                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 286             }                                                                                            </span>
<span  style=""> 287                                                                                                          </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 288             v0.getMatrix().mapPoints(pt);                                                                </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 289             pt[0] += v0.getLeft();                                                                       </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 290             pt[1] += v0.getTop();                                                                        </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 291             scale *= v0.getScaleX();                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 292         }                                                                                                </span>
<span  style=""> 293                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 294         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 295         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 296         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 297     }                                                                                                    </span>
<span  style=""> 298                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 299     /**                                                                                                  </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 300      * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 301      */                                                                                                  </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 302     public static float mapCoordInSelfToDescendent(View descendant, View root,                           </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 303                                                    int[] coord) {                                        </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 304         ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                           </span>
<span  style=""> 305                                                                                                          </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 306         float[] pt = {coord[0], coord[1]};                                                               </span>
<span  style=""> 307                                                                                                          </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 308         View v = descendant;                                                                             </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 309         while(v != root) {                                                                               </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 310             ancestorChain.add(v);                                                                        </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 311             v = (View) v.getParent();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 312         }                                                                                                </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 313         ancestorChain.add(root);                                                                         </span>
<span  style=""> 314                                                                                                          </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 315         float scale = 1.0f;                                                                              </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 316         Matrix inverse = new Matrix();                                                                   </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 317         int count = ancestorChain.size();                                                                </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 318         for (int i = count - 1; i &gt;= 0; i--) {                                                           </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 319             View ancestor = ancestorChain.get(i);                                                        </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 320             View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                           </span>
<span  style=""> 321                                                                                                          </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 322             pt[0] += ancestor.getScrollX();                                                              </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 323             pt[1] += ancestor.getScrollY();                                                              </span>
<span  style=""> 324                                                                                                          </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 325             if (next != null) {                                                                          </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 326                 pt[0] -= next.getLeft();                                                                 </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 327                 pt[1] -= next.getTop();                                                                  </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 328                 next.getMatrix().invert(inverse);                                                        </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 329                 inverse.mapPoints(pt);                                                                   </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 330                 scale *= next.getScaleX();                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 331             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 332         }                                                                                                </span>
<span  style=""> 333                                                                                                          </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 334         coord[0] = (int) Math.round(pt[0]);                                                              </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 335         coord[1] = (int) Math.round(pt[1]);                                                              </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 336         return scale;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 337     }                                                                                                    </span>
<span  style=""> 338                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 339     /**                                                                                                  </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 340      * Utility method to determine whether the given point, in local coordinates,                        </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 341      * is inside the view, where the area of the view is expanded by the slop factor.                    </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 342      * This method is called while processing touch-move events to determine if the event                </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 343      * is still within the view.                                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 344      */                                                                                                  </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 345     public static boolean pointInView(View v, float localX, float localY, float slop) {                  </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 346         return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                   </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 347                 localY &lt; (v.getHeight() + slop);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 348     }                                                                                                    </span>
<span  style=""> 349                                                                                                          </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style=""> 350     private static void initStatics(Context context) {                                                   </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style=""> 351         final Resources resources = context.getResources();                                              </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style=""> 352         sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 353     }                                                                                                    </span>
<span  style=""> 354                                                                                                          </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style=""> 355     public static void setIconSize(int widthPx) {                                                        </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style=""> 356         sIconWidth = sIconHeight = widthPx;                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 357     }                                                                                                    </span>
<span  style=""> 358                                                                                                          </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 359     public static void scaleRect(Rect r, float scale) {                                                  </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 360         if (scale != 1.0f) {                                                                             </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 361             r.left = (int) (r.left * scale + 0.5f);                                                      </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 362             r.top = (int) (r.top * scale + 0.5f);                                                        </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 363             r.right = (int) (r.right * scale + 0.5f);                                                    </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 364             r.bottom = (int) (r.bottom * scale + 0.5f);                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 365         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366     }                                                                                                    </span>
<span  style=""> 367                                                                                                          </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 368     public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                     </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 369         v0.getLocationInWindow(sLoc0);                                                                   </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 370         v1.getLocationInWindow(sLoc1);                                                                   </span>
<span  style=""> 371                                                                                                          </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 372         sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                        </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 373         sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                       </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 374         sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                        </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 375         sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                       </span>
<span  style=""> 376                                                                                                          </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 377         if (delta == null) {                                                                             </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 378             delta = new int[2];                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379         }                                                                                                </span>
<span  style=""> 380                                                                                                          </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 381         delta[0] = sLoc1[0] - sLoc0[0];                                                                  </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 382         delta[1] = sLoc1[1] - sLoc0[1];                                                                  </span>
<span  style=""> 383                                                                                                          </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 384         return delta;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 385     }                                                                                                    </span>
<span  style=""> 386                                                                                                          </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 387     public static void scaleRectAboutCenter(Rect r, float scale) {                                       </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 388         int cx = r.centerX();                                                                            </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 389         int cy = r.centerY();                                                                            </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 390         r.offset(-cx, -cy);                                                                              </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 391         Utilities.scaleRect(r, scale);                                                                   </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 392         r.offset(cx, cy);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393     }                                                                                                    </span>
<span  style=""> 394                                                                                                          </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 395     public static void startActivityForResultSafely(                                                     </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 396             Activity activity, Intent intent, int requestCode) {                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 397         try {                                                                                            </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 398             activity.startActivityForResult(intent, requestCode);                                        </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 399         } catch (ActivityNotFoundException e) {                                                          </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 400             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 401         } catch (SecurityException e) {                                                                  </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 402             Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();            </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 403             Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                     </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 404                     &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +       </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 405                     &quot;or use the exported attribute for this activity.&quot;, e);                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 406         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 407     }                                                                                                    </span>
<span  style=""> 408                                                                                                          </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 409     static boolean isSystemApp(Context context, Intent intent) {                                         </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 410         PackageManager pm = context.getPackageManager();                                                 </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 411         ComponentName cn = intent.getComponent();                                                        </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 412         String packageName = null;                                                                       </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 413         if (cn == null) {                                                                                </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 414             ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);            </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 415             if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                         </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 416                 packageName = info.activityInfo.packageName;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 417             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 418         } else {                                                                                         </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 419             packageName = cn.getPackageName();                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 420         }                                                                                                </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 421         if (packageName != null) {                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 422             try {                                                                                        </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 423                 PackageInfo info = pm.getPackageInfo(packageName, 0);                                    </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 424                 return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                               </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 425                         ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);               </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 426             } catch (NameNotFoundException e) {                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 427                 return false;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 428             }                                                                                            </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 429         } else {                                                                                         </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 430             return false;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 431         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 432     }                                                                                                    </span>
<span  style=""> 433                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 434     /**                                                                                                  </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 435      * This picks a dominant color, looking for high-saturation, high-value, repeated hues.              </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 436      * @param bitmap The bitmap to scan                                                                  </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 437      * @param samples The approximate max number of samples to use.                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 438      */                                                                                                  </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 439     static int findDominantColorByHue(Bitmap bitmap, int samples) {                                      </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 440         final int height = bitmap.getHeight();                                                           </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 441         final int width = bitmap.getWidth();                                                             </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 442         int sampleStride = (int) Math.sqrt((height * width) / samples);                                  </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 443         if (sampleStride &lt; 1) {                                                                          </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 444             sampleStride = 1;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445         }                                                                                                </span>
<span  style=""> 446                                                                                                          </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 447         // This is an out-param, for getting the hsv values for an rgb                                   </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 448         float[] hsv = new float[3];                                                                      </span>
<span  style=""> 449                                                                                                          </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 450         // First get the best hue, by creating a histogram over 360 hue buckets,                         </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 451         // where each pixel contributes a score weighted by saturation, value, and alpha.                </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 452         float[] hueScoreHistogram = new float[360];                                                      </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 453         float highScore = -1;                                                                            </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 454         int bestHue = -1;                                                                                </span>
<span  style=""> 455                                                                                                          </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 456         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 457             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 458                 int argb = bitmap.getPixel(x, y);                                                        </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 459                 int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                         </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 460                 if (alpha &lt; 0x80) {                                                                      </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 461                     // Drop mostly-transparent pixels.                                                   </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 462                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 463                 }                                                                                        </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 464                 // Remove the alpha channel.                                                             </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 465                 int rgb = argb | 0xFF000000;                                                             </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 466                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 467                 // Bucket colors by the 360 integer hues.                                                </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 468                 int hue = (int) hsv[0];                                                                  </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 469                 if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                        </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 470                     // Defensively avoid array bounds violations.                                        </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 471                     continue;                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472                 }                                                                                        </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 473                 float score = hsv[1] * hsv[2];                                                           </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 474                 hueScoreHistogram[hue] += score;                                                         </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 475                 if (hueScoreHistogram[hue] &gt; highScore) {                                                </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 476                     highScore = hueScoreHistogram[hue];                                                  </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 477                     bestHue = hue;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 478                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480         }                                                                                                </span>
<span  style=""> 481                                                                                                          </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 482         SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                         </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 483         int bestColor = 0xff000000;                                                                      </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 484         highScore = -1;                                                                                  </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 485         // Go back over the RGB colors that match the winning hue,                                       </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 486         // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                 </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 487         // The highest-scoring RGB color wins.                                                           </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 488         for (int y = 0; y &lt; height; y += sampleStride) {                                                 </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 489             for (int x = 0; x &lt; width; x += sampleStride) {                                              </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 490                 int rgb = bitmap.getPixel(x, y) | 0xff000000;                                            </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 491                 Color.colorToHSV(rgb, hsv);                                                              </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 492                 int hue = (int) hsv[0];                                                                  </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 493                 if (hue == bestHue) {                                                                    </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 494                     float s = hsv[1];                                                                    </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 495                     float v = hsv[2];                                                                    </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 496                     int bucket = (int) (s * 100) + (int) (v * 10000);                                    </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 497                     // Score by cumulative saturation * value.                                           </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 498                     float score = s * v;                                                                 </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 499                     Float oldTotal = rgbScores.get(bucket);                                              </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 500                     float newTotal = oldTotal == null ? score : oldTotal + score;                        </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 501                     rgbScores.put(bucket, newTotal);                                                     </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 502                     if (newTotal &gt; highScore) {                                                          </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 503                         highScore = newTotal;                                                            </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 504                         // All the colors in the winning bucket are very similar. Last in wins.          </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 505                         bestColor = rgb;                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 507                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 508             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 509         }                                                                                                </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 510         return bestColor;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 511     }                                                                                                    </span>
<span  style=""> 512                                                                                                          </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 513     /*                                                                                                   </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 514      * Finds a system apk which had a broadcast receiver listening to a particular action.               </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 515      * @param action intent action used to find the apk                                                  </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 516      * @return a pair of apk package name and the resources.                                             </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 517      */                                                                                                  </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 518     static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                     </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 519         final Intent intent = new Intent(action);                                                        </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 520         for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                 </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 521             if (info.activityInfo != null &amp;&amp;                                                             </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 522                     (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {      </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 523                 final String packageName = info.activityInfo.packageName;                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 524                 try {                                                                                    </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 525                     final Resources res = pm.getResourcesForApplication(packageName);                    </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 526                     return Pair.create(packageName, res);                                                </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 527                 } catch (NameNotFoundException e) {                                                      </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 528                     Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 529                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 530             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 531         }                                                                                                </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 532         return null;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 533     }                                                                                                    </span>
<span  style=""> 534                                                                                                          </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 535     @TargetApi(Build.VERSION_CODES.KITKAT)                                                               </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 536     public static boolean isViewAttachedToWindow(View v) {                                               </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 537         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                       </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 538             return v.isAttachedToWindow();                                                               </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 539         } else {                                                                                         </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 540             // A proxy call which returns null, if the view is not attached to the window.               </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 541             return v.getKeyDispatcherState() != null;                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 543     }                                                                                                    </span>
<span  style=""> 544                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 545     /**                                                                                                  </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 546      * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}            </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 547      * provided by the same package which is set to be global search activity.                           </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 548      * If widgetCategory is not supported, or no such widget is found, returns the first widget          </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 549      * provided by the package.                                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 550      */                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 551     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 552     public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                       </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 553         SearchManager searchManager =                                                                    </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 554                 (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                        </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 555         ComponentName searchComponent = searchManager.getGlobalSearchActivity();                         </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 556         if (searchComponent == null) return null;                                                        </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 557         String providerPkg = searchComponent.getPackageName();                                           </span>
<span  style=""> 558                                                                                                          </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 559         AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                      </span>
<span  style=""> 560                                                                                                          </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 561         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                       </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 562         for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                    </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 563             if (info.provider.getPackageName().equals(providerPkg)) {                                    </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 564                 if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                       </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 565                     if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {  </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 566                         return info;                                                                     </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 567                     } else if (defaultWidgetForSearchPackage == null) {                                  </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 568                         defaultWidgetForSearchPackage = info;                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569                     }                                                                                    </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 570                 } else {                                                                                 </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 571                     return info;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 572                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 573             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 574         }                                                                                                </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 575         return defaultWidgetForSearchPackage;                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 576     }                                                                                                    </span>
<span  style=""> 577                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 578     /**                                                                                                  </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style=""> 579      * Compresses the bitmap to a byte array for serialization.                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 580      */                                                                                                  </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style=""> 581     public static byte[] flattenBitmap(Bitmap bitmap) {                                                  </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style=""> 582         // Try go guesstimate how much space the icon will take when serialized                          </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style=""> 583         // to avoid unnecessary allocations/copies during the write.                                     </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style=""> 584         int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                           </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style=""> 585         ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                     </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 586         try {                                                                                            </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style=""> 587             bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                        </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style=""> 588             out.flush();                                                                                 </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style=""> 589             out.close();                                                                                 </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style=""> 590             return out.toByteArray();                                                                    </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style=""> 591         } catch (IOException e) {                                                                        </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style=""> 592             Log.w(TAG, &quot;Could not write bitmap&quot;);                                                        </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 593             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 594         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595     }                                                                                                    </span>
<span  style=""> 596                                                                                                          </span>
<span class="-6850884554410138223" onmouseenter="enter('-6850884554410138223');" onmouseout="out('-6850884554410138223');" style=""> 597     public static final Comparator&lt;ItemInfo&gt; RANK_COMPARATOR = new Comparator&lt;ItemInfo&gt;() {              </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 598         @Override                                                                                        </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style=""> 599         public int compare(ItemInfo lhs, ItemInfo rhs) {                                                 </span>
<span class="-1773115321274512652" onmouseenter="enter('-1773115321274512652');" onmouseout="out('-1773115321274512652');" style=""> 600             return lhs.rank - rhs.rank;                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 601         }                                                                                                </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 602     };                                                                                                   </span>
<span  style=""> 603                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 604     /**                                                                                                  </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style=""> 605      * Find the first vacant cell, if there is one.                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 606      *                                                                                                   </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style=""> 607      * @param vacant Holds the x and y coordinate of the vacant cell                                     </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style=""> 608      * @param spanX Horizontal cell span.                                                                </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style=""> 609      * @param spanY Vertical cell span.                                                                  </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 610      *                                                                                                   </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style=""> 611      * @return true if a vacant cell was found                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 612      */                                                                                                  </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style=""> 613     public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                             </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style=""> 614             int xCount, int yCount, boolean[][] occupied) {                                              </span>
<span  style=""> 615                                                                                                          </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style=""> 616         for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                    </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style=""> 617             for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style=""> 618                 boolean available = !occupied[x][y];                                                     </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style=""> 619                 out:            for (int i = x; i &lt; x + spanX; i++) {                                    </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style=""> 620                     for (int j = y; j &lt; y + spanY; j++) {                                                </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style=""> 621                         available = available &amp;&amp; !occupied[i][j];                                        </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style=""> 622                         if (!available) break out;                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 623                     }                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 624                 }                                                                                        </span>
<span  style=""> 625                                                                                                          </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style=""> 626                 if (available) {                                                                         </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style=""> 627                     vacant[0] = x;                                                                       </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style=""> 628                     vacant[1] = y;                                                                       </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style=""> 629                     return true;                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 630                 }                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 631             }                                                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 632         }                                                                                                </span>
<span  style=""> 633                                                                                                          </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 634         return false;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 635     }                                                                                                    </span>
<span  style=""> 636                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 637     /**                                                                                                  </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style=""> 638      * Trims the string, removing all whitespace at the beginning and end of the string.                 </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style=""> 639      * Non-breaking whitespaces are also removed.                                                        </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 640      */                                                                                                  </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style=""> 641     public static String trim(CharSequence s) {                                                          </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style=""> 642         if (s == null) {                                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 643             return null;                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 644         }                                                                                                </span>
<span  style=""> 645                                                                                                          </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style=""> 646         // Just strip any sequence of whitespace or java space characters from the beginning and end     </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style=""> 647         Matcher m = sTrimPattern.matcher(s);                                                             </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style=""> 648         return m.replaceAll(&quot;$1&quot;);                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 649     }                                                                                                    </span>
<span  style=""> 650                                                                                                          </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 651     @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                       </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style=""> 652     public static boolean isRtl(Resources res) {                                                         </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style=""> 653         return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                          </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style=""> 654                 (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 655     }                                                                                                    </span>
<span  style=""> 656                                                                                                          </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style=""> 657     public static void assertWorkerThread() {                                                            </span>
<span class="-1651879741492188549" onmouseenter="enter('-1651879741492188549');" onmouseout="out('-1651879741492188549');" style=""> 658         if (LauncherAppState.isDogfoodBuild()) {                                                         </span>
<span class="-6645568629780700748" onmouseenter="enter('-6645568629780700748');" onmouseout="out('-6645568629780700748');" style=""> 659             Assert.assertTrue(LauncherModel.sWorkerThread.getThreadId() == Process.myTid());             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 660         }                                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 661     }                                                                                                    </span>
<span  style=""> 662                                                                                                          </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 663     /**                                                                                                  </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style=""> 664      * Returns true if the intent is a valid launch intent for a launcher activity of an app.            </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style=""> 665      * This is used to identify shortcuts which are different from the ones exposed by the               </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style=""> 666      * applications&#x27; manifest file.                                                                      </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 667      *                                                                                                   </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style=""> 668      * @param launchIntent The intent that will be launched when the shortcut is clicked.                </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 669      */                                                                                                  </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style=""> 670     public static boolean isLauncherAppTarget(Intent launchIntent) {                                     </span>
<span class="-961226375159472711" onmouseenter="enter('-961226375159472711');" onmouseout="out('-961226375159472711');" style=""> 671         return launchIntent != null                                                                      </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style=""> 672                 &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                   </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style=""> 673                 &amp;&amp; launchIntent.getComponent() != null                                                   </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style=""> 674                 &amp;&amp; launchIntent.getCategories() != null                                                  </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style=""> 675                 &amp;&amp; launchIntent.getCategories().size() == 1                                              </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style=""> 676                 &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                    </span>
<span class="2314548842827800323" onmouseenter="enter('2314548842827800323');" onmouseout="out('2314548842827800323');" style=""> 677                 &amp;&amp; launchIntent.getExtras() == null                                                      </span>
<span class="-1240644601343588312" onmouseenter="enter('-1240644601343588312');" onmouseout="out('-1240644601343588312');" style=""> 678                 &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString());                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 679     }                                                                                                    </span>
<span  style=""> 680                                                                                                          </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style=""> 681     public static float dpiFromPx(int size, DisplayMetrics metrics){                                     </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style=""> 682         float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style=""> 683         return (size / densityRatio);                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 684     }                                                                                                    </span>
<span  style=""> 685                                                                                                          </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style=""> 686     public static int pxFromDp(float size, DisplayMetrics metrics) {                                     </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style=""> 687         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                   </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 688                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 689     }                                                                                                    </span>
<span  style=""> 690                                                                                                          </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style=""> 691     public static int pxFromSp(float size, DisplayMetrics metrics) {                                     </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style=""> 692         return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                    </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style=""> 693                 size, metrics));                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 694     }                                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 695 }                                                                                                        </span>


















</pre></td>
                        </tr>
                    </table>
                </div>
                <div id="bottom">
                    <table style="margin:auto">
                        <tr>
                            <th>ours vs. base</th>
                            <th>theirs vs. base</th>
                        </tr>
                        <tr>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19  import android.annotation.TargetApi;                                                                              </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20  import android.app.Activity;                                                                                      </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24  import android.content.ActivityNotFoundException;                                                                 </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27  import android.content.Intent;                                                                                    </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28  import android.content.pm.ApplicationInfo;                                                                        </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  29  import android.content.pm.PackageInfo;                                                                            </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  30  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  31  import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  32  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  33  import android.content.res.Resources;                                                                             </span>
<span class="6294169624328016071" onmouseenter="enter('6294169624328016071');" onmouseout="out('6294169624328016071');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  34 +import android.database.Cursor;                                                                                   </span>
<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  35  import android.graphics.Bitmap;                                                                                   </span>
<span class="-3019416561807484959" onmouseenter="enter('-3019416561807484959');" onmouseout="out('-3019416561807484959');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  36 +import android.graphics.BitmapFactory;                                                                            </span>
<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  37  import android.graphics.Canvas;                                                                                   </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  38  import android.graphics.Color;                                                                                    </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  39  import android.graphics.Matrix;                                                                                   </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  40  import android.graphics.Paint;                                                                                    </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  41  import android.graphics.PaintFlagsDrawFilter;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  42  import android.graphics.Rect;                                                                                     </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  43  import android.graphics.drawable.BitmapDrawable;                                                                  </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  44  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  45  import android.graphics.drawable.PaintDrawable;                                                                   </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  46  import android.os.Build;                                                                                          </span>
<span class="3485143652294101472" onmouseenter="enter('3485143652294101472');" onmouseout="out('3485143652294101472');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  47 +import android.os.Process;                                                                                        </span>
<span class="3727887607099278716" onmouseenter="enter('3727887607099278716');" onmouseout="out('3727887607099278716');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  48 +import android.text.TextUtils;                                                                                    </span>
<span class="-8138675088784084481" onmouseenter="enter('-8138675088784084481');" onmouseout="out('-8138675088784084481');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  49 +import android.util.DisplayMetrics;                                                                               </span>
<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  50  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  51  import android.util.Pair;                                                                                         </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  52  import android.util.SparseArray;                                                                                  </span>
<span class="-1289400933432271961" onmouseenter="enter('-1289400933432271961');" onmouseout="out('-1289400933432271961');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  53 +import android.util.TypedValue;                                                                                   </span>
<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  54  import android.view.View;                                                                                         </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  55  import android.widget.Toast;                                                                                      </span>
<span  style="">  56                                                                                                                    </span>
<span class="5153960293286862196" onmouseenter="enter('5153960293286862196');" onmouseout="out('5153960293286862196');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  57 +import junit.framework.Assert;                                                                                    </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  58 +                                                                                                                  </span>
<span class="9184227348967602043" onmouseenter="enter('9184227348967602043');" onmouseout="out('9184227348967602043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  59 +import java.io.ByteArrayOutputStream;                                                                             </span>
<span class="103340661636203254" onmouseenter="enter('103340661636203254');" onmouseout="out('103340661636203254');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  60 +import java.io.IOException;                                                                                       </span>
<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  61  import java.util.ArrayList;                                                                                       </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  62  import java.util.Comparator;                                                                                      </span>
<span class="2159928926335330273" onmouseenter="enter('2159928926335330273');" onmouseout="out('2159928926335330273');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  63 +import java.util.regex.Matcher;                                                                                   </span>
<span class="1513108047920599059" onmouseenter="enter('1513108047920599059');" onmouseout="out('1513108047920599059');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  64 +import java.util.regex.Pattern;                                                                                   </span>
<span  style="">  65                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  66  /**                                                                                                               </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  67   * Various utilities shared amongst the Launcher&#x27;s classes.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  68   */                                                                                                               </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  69  public final class Utilities {                                                                                    </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  70      private static final String TAG = &quot;Launcher.Utilities&quot;;                                                       </span>
<span  style="">  71                                                                                                                    </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="">  72      private static int sIconWidth = -1;                                                                           </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="">  73      private static int sIconHeight = -1;                                                                          </span>
<span  style="">  74                                                                                                                    </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  75      private static final Rect sOldBounds = new Rect();                                                            </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  76      private static final Canvas sCanvas = new Canvas();                                                           </span>
<span  style="">  77                                                                                                                    </span>
<span class="-1329756999223092373" onmouseenter="enter('-1329756999223092373');" onmouseout="out('-1329756999223092373');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  78 +    private static final Pattern sTrimPattern =                                                                   </span>
<span class="1309858825264038043" onmouseenter="enter('1309858825264038043');" onmouseout="out('1309858825264038043');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  79 +            Pattern.compile(&quot;^[\\s|\\p{javaSpaceChar}]*(.*)[\\s|\\p{javaSpaceChar}]*$&quot;);                          </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0">  80 +                                                                                                                  </span>
<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  81      static {                                                                                                      </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  82          sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                         </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  83                  Paint.FILTER_BITMAP_FLAG));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  84      }                                                                                                             </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  85      static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                                </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  86      static int sColorIndex = 0;                                                                                   </span>
<span  style="">  87                                                                                                                    </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="">  88      static int[] sLoc0 = new int[2];                                                                              </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="">  89      static int[] sLoc1 = new int[2];                                                                              </span>
<span  style="">  90                                                                                                                    </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  91      // To turn on these properties, type                                                                          </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  92      // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                               </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="">  93      static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                                 </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="">  94      public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);               </span>
<span  style="">  95                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  96      /**                                                                                                           </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style="">  97       * Returns a FastBitmapDrawable with the icon, accurately sized.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  98       */                                                                                                           </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style="">  99      public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                            </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style=""> 100          FastBitmapDrawable d = new FastBitmapDrawable(icon);                                                      </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style=""> 101          d.setFilterBitmap(true);                                                                                  </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style=""> 102          resizeIconDrawable(d);                                                                                    </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style=""> 103          return d;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 104      }                                                                                                             </span>
<span  style=""> 105                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 106      /**                                                                                                           </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style=""> 107       * Resizes an icon drawable to the correct icon size.                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 108       */                                                                                                           </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style=""> 109      static void resizeIconDrawable(Drawable icon) {                                                               </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style=""> 110          icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 111      }                                                                                                             </span>
<span  style=""> 112                                                                                                                    </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style=""> 113      public static boolean isPropertyEnabled(String propertyName) {                                                </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style=""> 114          return Log.isLoggable(propertyName, Log.VERBOSE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 115      }                                                                                                             </span>
<span  style=""> 116                                                                                                                    </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style=""> 117      public static boolean isRotationEnabled(Context c) {                                                          </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style=""> 118          boolean enableRotation = sForceEnableRotation ||                                                          </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style=""> 119                  c.getResources().getBoolean(R.bool.allow_rotation);                                               </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style=""> 120          return enableRotation;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 121      }                                                                                                             </span>
<span  style=""> 122                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 123      /**                                                                                                           </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 124       * Indicates if the device is running LMP or higher.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 125       */                                                                                                           </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 126      public static boolean isLmpOrAbove() {                                                                        </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 127          return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 128 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 129 +                                                                                                                  </span>
<span class="-6979259339435522046" onmouseenter="enter('-6979259339435522046');" onmouseout="out('-6979259339435522046');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 130 +    static Bitmap createIconBitmap(Cursor c, int iconIndex, Context context) {                                    </span>
<span class="8801793545258782328" onmouseenter="enter('8801793545258782328');" onmouseout="out('8801793545258782328');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 131 +        byte[] data = c.getBlob(iconIndex);                                                                       </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 132 +        try {                                                                                                     </span>
<span class="-6494522703644265462" onmouseenter="enter('-6494522703644265462');" onmouseout="out('-6494522703644265462');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 133 +            return createIconBitmap(BitmapFactory.decodeByteArray(data, 0, data.length), context);                </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 134 +        } catch (Exception e) {                                                                                   </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 135 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 136 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 137      }                                                                                                             </span>
<span  style=""> 138                                                                                                                    </span>




<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 139      /**                                                                                                           </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 140       * Returns a bitmap suitable for the all apps view. If the package or the resource do not                     </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 141       * exist, it returns null.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 142       */                                                                                                           </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style=""> 143      static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,                      </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 144              Context context) {                                                                                    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 145          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 146          // the resource                                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 147          try {                                                                                                     </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 148              Resources resources = packageManager.getResourcesForApplication(packageName);                         </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 149              if (resources != null) {                                                                              </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 150                  final int id = resources.getIdentifier(resourceName, null, null);                                 </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 151                  return createIconBitmap(                                                                          </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style=""> 152                          resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 154          } catch (Exception e) {                                                                                   </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 155              // Icon not found.                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 156          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 157          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 158      }                                                                                                             </span>
<span  style=""> 159                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 160      /**                                                                                                           </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 161       * Returns a bitmap which is of the appropriate size to be displayed as an icon                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 162       */                                                                                                           </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style=""> 163      static Bitmap createIconBitmap(Bitmap icon, Context context) {                                                </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 164          synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 165              if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 166                  initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 167              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 168          }                                                                                                         </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style=""> 169          if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                                   </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 170              return icon;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 171          }                                                                                                         </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 172          return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 173      }                                                                                                             </span>
<span  style=""> 174                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 175      /**                                                                                                           </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 176       * Returns a bitmap suitable for the all apps view.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 177       */                                                                                                           </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 178      public static Bitmap createIconBitmap(Drawable icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 179          synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 180              if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 181                  initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 182              }                                                                                                     </span>
<span  style=""> 183                                                                                                                    </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style=""> 184              int width = sIconWidth;                                                                               </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style=""> 185              int height = sIconHeight;                                                                             </span>
<span  style=""> 186                                                                                                                    </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 187              if (icon instanceof PaintDrawable) {                                                                  </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 188                  PaintDrawable painter = (PaintDrawable) icon;                                                     </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 189                  painter.setIntrinsicWidth(width);                                                                 </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 190                  painter.setIntrinsicHeight(height);                                                               </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 191              } else if (icon instanceof BitmapDrawable) {                                                          </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 192                  // Ensure the bitmap has a density.                                                               </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 193                  BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                            </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 194                  Bitmap bitmap = bitmapDrawable.getBitmap();                                                       </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 195                  if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                                 </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 196                      bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 197                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 198              }                                                                                                     </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 199              int sourceWidth = icon.getIntrinsicWidth();                                                           </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 200              int sourceHeight = icon.getIntrinsicHeight();                                                         </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 201              if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                            </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 202                  // Scale the icon proportionally to the icon dimensions                                           </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 203                  final float ratio = (float) sourceWidth / sourceHeight;                                           </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 204                  if (sourceWidth &gt; sourceHeight) {                                                                 </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 205                      height = (int) (width / ratio);                                                               </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 206                  } else if (sourceHeight &gt; sourceWidth) {                                                          </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 207                      width = (int) (height * ratio);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 208                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 209              }                                                                                                     </span>
<span  style=""> 210                                                                                                                    </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 211              // no intrinsic size --&gt; use default size                                                             </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style=""> 212              int textureWidth = sIconWidth;                                                                        </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style=""> 213              int textureHeight = sIconHeight;                                                                      </span>
<span  style=""> 214                                                                                                                    </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 215              final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                                </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 216                      Bitmap.Config.ARGB_8888);                                                                     </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 217              final Canvas canvas = sCanvas;                                                                        </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 218              canvas.setBitmap(bitmap);                                                                             </span>
<span  style=""> 219                                                                                                                    </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 220              final int left = (textureWidth-width) / 2;                                                            </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 221              final int top = (textureHeight-height) / 2;                                                           </span>
<span  style=""> 222                                                                                                                    </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 223              @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 224              final boolean debug = false;                                                                          </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 225              if (debug) {                                                                                          </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 226                  // draw a big box for the icon for debugging                                                      </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 227                  canvas.drawColor(sColors[sColorIndex]);                                                           </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 228                  if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                             </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 229                  Paint debugPaint = new Paint();                                                                   </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 230                  debugPaint.setColor(0xffcccc00);                                                                  </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 231                  canvas.drawRect(left, top, left+width, top+height, debugPaint);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 232              }                                                                                                     </span>
<span  style=""> 233                                                                                                                    </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 234              sOldBounds.set(icon.getBounds());                                                                     </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 235              icon.setBounds(left, top, left+width, top+height);                                                    </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 236              icon.draw(canvas);                                                                                    </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 237              icon.setBounds(sOldBounds);                                                                           </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 238              canvas.setBitmap(null);                                                                               </span>
<span  style=""> 239                                                                                                                    </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 240              return bitmap;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 241          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 242      }                                                                                                             </span>
<span  style=""> 243                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 244      /**                                                                                                           </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 245       * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s                      </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 246       * coordinates.                                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 247       *                                                                                                            </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 248       * @param descendant The descendant to which the passed coordinate is relative.                               </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 249       * @param root The root view to make the coordinates relative to.                                             </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 250       * @param coord The coordinate that we want mapped.                                                           </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 251       * @param includeRootScroll Whether or not to account for the scroll of the descendant:                       </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 252       *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.                     </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 253       * @return The factor by which this descendant is scaled relative to this DragLayer. Caution                  </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 254       *         this scale factor is assumed to be equal in X and Y, and so if at any point this                   </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 255       *         assumption fails, we will need to return a pair of scale factors.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 256       */                                                                                                           </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 257      public static float getDescendantCoordRelativeToParent(View descendant, View root,                            </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 258                                                             int[] coord, boolean includeRootScroll) {              </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 259          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 260                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 261          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 262                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 263          View v = descendant;                                                                                      </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 264          while(v != root &amp;&amp; v != null) {                                                                           </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 265              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 266              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 267          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 268          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 269                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 270          float scale = 1.0f;                                                                                       </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 271          int count = ancestorChain.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 272          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 273              View v0 = ancestorChain.get(i);                                                                       </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 274              // For TextViews, scroll has a meaning which relates to the text position                             </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 275              // which is very strange... ignore the scroll.                                                        </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 276              if (v0 != descendant || includeRootScroll) {                                                          </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 277                  pt[0] -= v0.getScrollX();                                                                         </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 278                  pt[1] -= v0.getScrollY();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 279              }                                                                                                     </span>
<span  style=""> 280                                                                                                                    </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 281              v0.getMatrix().mapPoints(pt);                                                                         </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 282              pt[0] += v0.getLeft();                                                                                </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 283              pt[1] += v0.getTop();                                                                                 </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 284              scale *= v0.getScaleX();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285          }                                                                                                         </span>
<span  style=""> 286                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 287          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 288          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 289          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 290      }                                                                                                             </span>
<span  style=""> 291                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 292      /**                                                                                                           </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 293       * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 294       */                                                                                                           </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 295      public static float mapCoordInSelfToDescendent(View descendant, View root,                                    </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 296                                                     int[] coord) {                                                 </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 297          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 298                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 299          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 300                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 301          View v = descendant;                                                                                      </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 302          while(v != root) {                                                                                        </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 303              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 304              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 306          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 307                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 308          float scale = 1.0f;                                                                                       </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 309          Matrix inverse = new Matrix();                                                                            </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 310          int count = ancestorChain.size();                                                                         </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 311          for (int i = count - 1; i &gt;= 0; i--) {                                                                    </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 312              View ancestor = ancestorChain.get(i);                                                                 </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 313              View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                                    </span>
<span  style=""> 314                                                                                                                    </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 315              pt[0] += ancestor.getScrollX();                                                                       </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 316              pt[1] += ancestor.getScrollY();                                                                       </span>
<span  style=""> 317                                                                                                                    </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 318              if (next != null) {                                                                                   </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 319                  pt[0] -= next.getLeft();                                                                          </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 320                  pt[1] -= next.getTop();                                                                           </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 321                  next.getMatrix().invert(inverse);                                                                 </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 322                  inverse.mapPoints(pt);                                                                            </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 323                  scale *= next.getScaleX();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 324              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 325          }                                                                                                         </span>
<span  style=""> 326                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 327          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 328          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 329          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330      }                                                                                                             </span>
<span  style=""> 331                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 332      /**                                                                                                           </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 333       * Utility method to determine whether the given point, in local coordinates,                                 </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 334       * is inside the view, where the area of the view is expanded by the slop factor.                             </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 335       * This method is called while processing touch-move events to determine if the event                         </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 336       * is still within the view.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 337       */                                                                                                           </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 338      public static boolean pointInView(View v, float localX, float localY, float slop) {                           </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 339          return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                            </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 340                  localY &lt; (v.getHeight() + slop);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 341      }                                                                                                             </span>
<span  style=""> 342                                                                                                                    </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style=""> 343      private static void initStatics(Context context) {                                                            </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style=""> 344          final Resources resources = context.getResources();                                                       </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style=""> 345          sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 346      }                                                                                                             </span>
<span  style=""> 347                                                                                                                    </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style=""> 348      public static void setIconSize(int widthPx) {                                                                 </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style=""> 349          sIconWidth = sIconHeight = widthPx;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 350      }                                                                                                             </span>
<span  style=""> 351                                                                                                                    </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 352      public static void scaleRect(Rect r, float scale) {                                                           </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 353          if (scale != 1.0f) {                                                                                      </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 354              r.left = (int) (r.left * scale + 0.5f);                                                               </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 355              r.top = (int) (r.top * scale + 0.5f);                                                                 </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 356              r.right = (int) (r.right * scale + 0.5f);                                                             </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 357              r.bottom = (int) (r.bottom * scale + 0.5f);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 359      }                                                                                                             </span>
<span  style=""> 360                                                                                                                    </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 361      public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                              </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 362          v0.getLocationInWindow(sLoc0);                                                                            </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 363          v1.getLocationInWindow(sLoc1);                                                                            </span>
<span  style=""> 364                                                                                                                    </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 365          sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                                 </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 366          sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                                </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 367          sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                                 </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 368          sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                                </span>
<span  style=""> 369                                                                                                                    </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 370          if (delta == null) {                                                                                      </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 371              delta = new int[2];                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 372          }                                                                                                         </span>
<span  style=""> 373                                                                                                                    </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 374          delta[0] = sLoc1[0] - sLoc0[0];                                                                           </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 375          delta[1] = sLoc1[1] - sLoc0[1];                                                                           </span>
<span  style=""> 376                                                                                                                    </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 377          return delta;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 378      }                                                                                                             </span>
<span  style=""> 379                                                                                                                    </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 380      public static void scaleRectAboutCenter(Rect r, float scale) {                                                </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 381          int cx = r.centerX();                                                                                     </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 382          int cy = r.centerY();                                                                                     </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 383          r.offset(-cx, -cy);                                                                                       </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 384          Utilities.scaleRect(r, scale);                                                                            </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 385          r.offset(cx, cy);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 386      }                                                                                                             </span>
<span  style=""> 387                                                                                                                    </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 388      public static void startActivityForResultSafely(                                                              </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 389              Activity activity, Intent intent, int requestCode) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 390          try {                                                                                                     </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 391              activity.startActivityForResult(intent, requestCode);                                                 </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 392          } catch (ActivityNotFoundException e) {                                                                   </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 393              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 394          } catch (SecurityException e) {                                                                           </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 395              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 396              Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                              </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 397                      &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +                </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 398                      &quot;or use the exported attribute for this activity.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 399          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 400      }                                                                                                             </span>
<span  style=""> 401                                                                                                                    </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 402      static boolean isSystemApp(Context context, Intent intent) {                                                  </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 403          PackageManager pm = context.getPackageManager();                                                          </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 404          ComponentName cn = intent.getComponent();                                                                 </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 405          String packageName = null;                                                                                </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 406          if (cn == null) {                                                                                         </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 407              ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);                     </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 408              if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                                  </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 409                  packageName = info.activityInfo.packageName;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 410              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 411          } else {                                                                                                  </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 412              packageName = cn.getPackageName();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 413          }                                                                                                         </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 414          if (packageName != null) {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 415              try {                                                                                                 </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 416                  PackageInfo info = pm.getPackageInfo(packageName, 0);                                             </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 417                  return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                                        </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 418                          ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);                        </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 419              } catch (NameNotFoundException e) {                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 420                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 421              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 422          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 423              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 424          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 425      }                                                                                                             </span>
<span  style=""> 426                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 427      /**                                                                                                           </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 428       * This picks a dominant color, looking for high-saturation, high-value, repeated hues.                       </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 429       * @param bitmap The bitmap to scan                                                                           </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 430       * @param samples The approximate max number of samples to use.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 431       */                                                                                                           </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 432      static int findDominantColorByHue(Bitmap bitmap, int samples) {                                               </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 433          final int height = bitmap.getHeight();                                                                    </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 434          final int width = bitmap.getWidth();                                                                      </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 435          int sampleStride = (int) Math.sqrt((height * width) / samples);                                           </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 436          if (sampleStride &lt; 1) {                                                                                   </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 437              sampleStride = 1;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 438          }                                                                                                         </span>
<span  style=""> 439                                                                                                                    </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 440          // This is an out-param, for getting the hsv values for an rgb                                            </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 441          float[] hsv = new float[3];                                                                               </span>
<span  style=""> 442                                                                                                                    </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 443          // First get the best hue, by creating a histogram over 360 hue buckets,                                  </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 444          // where each pixel contributes a score weighted by saturation, value, and alpha.                         </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 445          float[] hueScoreHistogram = new float[360];                                                               </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 446          float highScore = -1;                                                                                     </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 447          int bestHue = -1;                                                                                         </span>
<span  style=""> 448                                                                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 449          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 450              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 451                  int argb = bitmap.getPixel(x, y);                                                                 </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 452                  int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                                  </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 453                  if (alpha &lt; 0x80) {                                                                               </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 454                      // Drop mostly-transparent pixels.                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 455                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 456                  }                                                                                                 </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 457                  // Remove the alpha channel.                                                                      </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 458                  int rgb = argb | 0xFF000000;                                                                      </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 459                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 460                  // Bucket colors by the 360 integer hues.                                                         </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 461                  int hue = (int) hsv[0];                                                                           </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 462                  if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                                 </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 463                      // Defensively avoid array bounds violations.                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 464                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 465                  }                                                                                                 </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 466                  float score = hsv[1] * hsv[2];                                                                    </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 467                  hueScoreHistogram[hue] += score;                                                                  </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 468                  if (hueScoreHistogram[hue] &gt; highScore) {                                                         </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 469                      highScore = hueScoreHistogram[hue];                                                           </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 470                      bestHue = hue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 471                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 472              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 473          }                                                                                                         </span>
<span  style=""> 474                                                                                                                    </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 475          SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                                  </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 476          int bestColor = 0xff000000;                                                                               </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 477          highScore = -1;                                                                                           </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 478          // Go back over the RGB colors that match the winning hue,                                                </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 479          // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                          </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 480          // The highest-scoring RGB color wins.                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 481          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 482              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 483                  int rgb = bitmap.getPixel(x, y) | 0xff000000;                                                     </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 484                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 485                  int hue = (int) hsv[0];                                                                           </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 486                  if (hue == bestHue) {                                                                             </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 487                      float s = hsv[1];                                                                             </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 488                      float v = hsv[2];                                                                             </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 489                      int bucket = (int) (s * 100) + (int) (v * 10000);                                             </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 490                      // Score by cumulative saturation * value.                                                    </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 491                      float score = s * v;                                                                          </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 492                      Float oldTotal = rgbScores.get(bucket);                                                       </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 493                      float newTotal = oldTotal == null ? score : oldTotal + score;                                 </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 494                      rgbScores.put(bucket, newTotal);                                                              </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 495                      if (newTotal &gt; highScore) {                                                                   </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 496                          highScore = newTotal;                                                                     </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 497                          // All the colors in the winning bucket are very similar. Last in wins.                   </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 498                          bestColor = rgb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 499                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 500                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 501              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502          }                                                                                                         </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 503          return bestColor;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504      }                                                                                                             </span>
<span  style=""> 505                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 506      /*                                                                                                            </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 507       * Finds a system apk which had a broadcast receiver listening to a particular action.                        </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 508       * @param action intent action used to find the apk                                                           </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 509       * @return a pair of apk package name and the resources.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 510       */                                                                                                           </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 511      static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                              </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 512          final Intent intent = new Intent(action);                                                                 </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 513          for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                          </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 514              if (info.activityInfo != null &amp;&amp;                                                                      </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 515                      (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {               </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 516                  final String packageName = info.activityInfo.packageName;                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 517                  try {                                                                                             </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 518                      final Resources res = pm.getResourcesForApplication(packageName);                             </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 519                      return Pair.create(packageName, res);                                                         </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 520                  } catch (NameNotFoundException e) {                                                               </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 521                      Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 522                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 523              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 524          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 525          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 526      }                                                                                                             </span>
<span  style=""> 527                                                                                                                    </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 528      @TargetApi(Build.VERSION_CODES.KITKAT)                                                                        </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 529      public static boolean isViewAttachedToWindow(View v) {                                                        </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 530          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                                </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 531              return v.isAttachedToWindow();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 532          } else {                                                                                                  </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 533              // A proxy call which returns null, if the view is not attached to the window.                        </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 534              return v.getKeyDispatcherState() != null;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 535          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 536      }                                                                                                             </span>
<span  style=""> 537                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 538      /**                                                                                                           </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 539       * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}                     </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 540       * provided by the same package which is set to be global search activity.                                    </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 541       * If widgetCategory is not supported, or no such widget is found, returns the first widget                   </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 542       * provided by the package.                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 543       */                                                                                                           </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 544      @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                                </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 545      public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 546          SearchManager searchManager =                                                                             </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 547                  (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                                 </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 548          ComponentName searchComponent = searchManager.getGlobalSearchActivity();                                  </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 549          if (searchComponent == null) return null;                                                                 </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 550          String providerPkg = searchComponent.getPackageName();                                                    </span>
<span  style=""> 551                                                                                                                    </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 552          AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                               </span>
<span  style=""> 553                                                                                                                    </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 554          AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                                </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 555          for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                             </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 556              if (info.provider.getPackageName().equals(providerPkg)) {                                             </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 557                  if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                                </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 558                      if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {           </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 559                          return info;                                                                              </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 560                      } else if (defaultWidgetForSearchPackage == null) {                                           </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 561                          defaultWidgetForSearchPackage = info;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 562                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 563                  } else {                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 564                      return info;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 565                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 566              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 567          }                                                                                                         </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 568          return defaultWidgetForSearchPackage;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 569      }                                                                                                             </span>
<span  style=""> 570                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 571 +    /**                                                                                                           </span>
<span class="2890018962810146332" onmouseenter="enter('2890018962810146332');" onmouseout="out('2890018962810146332');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 572 +     * Compresses the bitmap to a byte array for serialization.                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 573 +     */                                                                                                           </span>
<span class="3132902726257736313" onmouseenter="enter('3132902726257736313');" onmouseout="out('3132902726257736313');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 574 +    public static byte[] flattenBitmap(Bitmap bitmap) {                                                           </span>
<span class="-3581949580601242936" onmouseenter="enter('-3581949580601242936');" onmouseout="out('-3581949580601242936');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 575 +        // Try go guesstimate how much space the icon will take when serialized                                   </span>
<span class="6197194043750255949" onmouseenter="enter('6197194043750255949');" onmouseout="out('6197194043750255949');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 576 +        // to avoid unnecessary allocations/copies during the write.                                              </span>
<span class="-5093203174793348363" onmouseenter="enter('-5093203174793348363');" onmouseout="out('-5093203174793348363');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 577 +        int size = bitmap.getWidth() * bitmap.getHeight() * 4;                                                    </span>
<span class="-8739450248327170568" onmouseenter="enter('-8739450248327170568');" onmouseout="out('-8739450248327170568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 578 +        ByteArrayOutputStream out = new ByteArrayOutputStream(size);                                              </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 579 +        try {                                                                                                     </span>
<span class="-4781087380346520352" onmouseenter="enter('-4781087380346520352');" onmouseout="out('-4781087380346520352');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 580 +            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);                                                 </span>
<span class="1246699851317198176" onmouseenter="enter('1246699851317198176');" onmouseout="out('1246699851317198176');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 581 +            out.flush();                                                                                          </span>
<span class="5013182197958409712" onmouseenter="enter('5013182197958409712');" onmouseout="out('5013182197958409712');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 582 +            out.close();                                                                                          </span>
<span class="8673371338796072548" onmouseenter="enter('8673371338796072548');" onmouseout="out('8673371338796072548');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 583 +            return out.toByteArray();                                                                             </span>
<span class="7080241092423381085" onmouseenter="enter('7080241092423381085');" onmouseout="out('7080241092423381085');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 584 +        } catch (IOException e) {                                                                                 </span>
<span class="7956524499064355744" onmouseenter="enter('7956524499064355744');" onmouseout="out('7956524499064355744');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 585 +            Log.w(TAG, &quot;Could not write bitmap&quot;);                                                                 </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 586 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 587 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 588 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 589 +                                                                                                                  </span>
<span class="-6850884554410138223" onmouseenter="enter('-6850884554410138223');" onmouseout="out('-6850884554410138223');" style=""> 590      public static final Comparator&lt;ItemInfo&gt; RANK_COMPARATOR = new Comparator&lt;ItemInfo&gt;() {                       </span>
<span  style=""> 591                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 592          @Override                                                                                                 </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style=""> 593          public int compare(ItemInfo lhs, ItemInfo rhs) {                                                          </span>
<span class="-1773115321274512652" onmouseenter="enter('-1773115321274512652');" onmouseout="out('-1773115321274512652');" style=""> 594              return lhs.rank - rhs.rank;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 595          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 596      };                                                                                                            </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 597 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 598 +    /**                                                                                                           </span>
<span class="-6588275908342394580" onmouseenter="enter('-6588275908342394580');" onmouseout="out('-6588275908342394580');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 599 +     * Find the first vacant cell, if there is one.                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 600 +     *                                                                                                            </span>
<span class="2503255600921964703" onmouseenter="enter('2503255600921964703');" onmouseout="out('2503255600921964703');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 601 +     * @param vacant Holds the x and y coordinate of the vacant cell                                              </span>
<span class="4033827775756481154" onmouseenter="enter('4033827775756481154');" onmouseout="out('4033827775756481154');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 602 +     * @param spanX Horizontal cell span.                                                                         </span>
<span class="-3449734233772247568" onmouseenter="enter('-3449734233772247568');" onmouseout="out('-3449734233772247568');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 603 +     * @param spanY Vertical cell span.                                                                           </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 604 +     *                                                                                                            </span>
<span class="-2520380867733543515" onmouseenter="enter('-2520380867733543515');" onmouseout="out('-2520380867733543515');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 605 +     * @return true if a vacant cell was found                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 606 +     */                                                                                                           </span>
<span class="-3795506891981893742" onmouseenter="enter('-3795506891981893742');" onmouseout="out('-3795506891981893742');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 607 +    public static boolean findVacantCell(int[] vacant, int spanX, int spanY,                                      </span>
<span class="-8783446296633863064" onmouseenter="enter('-8783446296633863064');" onmouseout="out('-8783446296633863064');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 608 +            int xCount, int yCount, boolean[][] occupied) {                                                       </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 609 +                                                                                                                  </span>
<span class="-4617149385103036509" onmouseenter="enter('-4617149385103036509');" onmouseout="out('-4617149385103036509');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 610 +        for (int y = 0; (y + spanY) &lt;= yCount; y++) {                                                             </span>
<span class="-2519246593487215950" onmouseenter="enter('-2519246593487215950');" onmouseout="out('-2519246593487215950');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 611 +            for (int x = 0; (x + spanX) &lt;= xCount; x++) {                                                         </span>
<span class="-6044475844747713215" onmouseenter="enter('-6044475844747713215');" onmouseout="out('-6044475844747713215');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 612 +                boolean available = !occupied[x][y];                                                              </span>
<span class="-4926761125313010055" onmouseenter="enter('-4926761125313010055');" onmouseout="out('-4926761125313010055');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 613 +                out:            for (int i = x; i &lt; x + spanX; i++) {                                             </span>
<span class="6140954715248440627" onmouseenter="enter('6140954715248440627');" onmouseout="out('6140954715248440627');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 614 +                    for (int j = y; j &lt; y + spanY; j++) {                                                         </span>
<span class="-4206239266210524684" onmouseenter="enter('-4206239266210524684');" onmouseout="out('-4206239266210524684');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 615 +                        available = available &amp;&amp; !occupied[i][j];                                                 </span>
<span class="6135105910559606383" onmouseenter="enter('6135105910559606383');" onmouseout="out('6135105910559606383');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 616 +                        if (!available) break out;                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 617 +                    }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 618 +                }                                                                                                 </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 619 +                                                                                                                  </span>
<span class="-6409233339093248287" onmouseenter="enter('-6409233339093248287');" onmouseout="out('-6409233339093248287');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 620 +                if (available) {                                                                                  </span>
<span class="-5516420008230606067" onmouseenter="enter('-5516420008230606067');" onmouseout="out('-5516420008230606067');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 621 +                    vacant[0] = x;                                                                                </span>
<span class="-8126960887413790406" onmouseenter="enter('-8126960887413790406');" onmouseout="out('-8126960887413790406');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 622 +                    vacant[1] = y;                                                                                </span>
<span class="-3118901906653197100" onmouseenter="enter('-3118901906653197100');" onmouseout="out('-3118901906653197100');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 623 +                    return true;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 624 +                }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 625 +            }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 626 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 627 +                                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 628 +        return false;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 629 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 630 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 631 +    /**                                                                                                           </span>
<span class="8016895904140865359" onmouseenter="enter('8016895904140865359');" onmouseout="out('8016895904140865359');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 632 +     * Trims the string, removing all whitespace at the beginning and end of the string.                          </span>
<span class="-5493577797153084569" onmouseenter="enter('-5493577797153084569');" onmouseout="out('-5493577797153084569');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 633 +     * Non-breaking whitespaces are also removed.                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 634 +     */                                                                                                           </span>
<span class="-2226334911462083775" onmouseenter="enter('-2226334911462083775');" onmouseout="out('-2226334911462083775');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 635 +    public static String trim(CharSequence s) {                                                                   </span>
<span class="8207541066373211073" onmouseenter="enter('8207541066373211073');" onmouseout="out('8207541066373211073');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 636 +        if (s == null) {                                                                                          </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 637 +            return null;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 638 +        }                                                                                                         </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 639 +                                                                                                                  </span>
<span class="6752452014249628571" onmouseenter="enter('6752452014249628571');" onmouseout="out('6752452014249628571');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 640 +        // Just strip any sequence of whitespace or java space characters from the beginning and end              </span>
<span class="5219283686268968354" onmouseenter="enter('5219283686268968354');" onmouseout="out('5219283686268968354');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 641 +        Matcher m = sTrimPattern.matcher(s);                                                                      </span>
<span class="-3983369353860878309" onmouseenter="enter('-3983369353860878309');" onmouseout="out('-3983369353860878309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 642 +        return m.replaceAll(&quot;$1&quot;);                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 643 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 644 +                                                                                                                  </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 645 +    @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                                </span>
<span class="6706641044237115049" onmouseenter="enter('6706641044237115049');" onmouseout="out('6706641044237115049');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 646 +    public static boolean isRtl(Resources res) {                                                                  </span>
<span class="-3807300280994787598" onmouseenter="enter('-3807300280994787598');" onmouseout="out('-3807300280994787598');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 647 +        return (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &amp;&amp;                                   </span>
<span class="-6381041904087975678" onmouseenter="enter('-6381041904087975678');" onmouseout="out('-6381041904087975678');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 648 +                (res.getConfiguration().getLayoutDirection() == View.LAYOUT_DIRECTION_RTL);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 649 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 650 +                                                                                                                  </span>
<span class="7745027086805008166" onmouseenter="enter('7745027086805008166');" onmouseout="out('7745027086805008166');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 651 +    public static void assertWorkerThread() {                                                                     </span>
<span class="-1651879741492188549" onmouseenter="enter('-1651879741492188549');" onmouseout="out('-1651879741492188549');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 652 +        if (LauncherAppState.isDogfoodBuild()) {                                                                  </span>
<span class="-6645568629780700748" onmouseenter="enter('-6645568629780700748');" onmouseout="out('-6645568629780700748');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 653 +            Assert.assertTrue(LauncherModel.sWorkerThread.getThreadId() == Process.myTid());                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 654 +        }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 655 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 656 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 657 +    /**                                                                                                           </span>
<span class="-1474801224471826037" onmouseenter="enter('-1474801224471826037');" onmouseout="out('-1474801224471826037');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 658 +     * Returns true if the intent is a valid launch intent for a launcher activity of an app.                     </span>
<span class="6585786963246605309" onmouseenter="enter('6585786963246605309');" onmouseout="out('6585786963246605309');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 659 +     * This is used to identify shortcuts which are different from the ones exposed by the                        </span>
<span class="-4023082809467763476" onmouseenter="enter('-4023082809467763476');" onmouseout="out('-4023082809467763476');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 660 +     * applications&#x27; manifest file.                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 661 +     *                                                                                                            </span>
<span class="-450668369620467316" onmouseenter="enter('-450668369620467316');" onmouseout="out('-450668369620467316');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 662 +     * @param launchIntent The intent that will be launched when the shortcut is clicked.                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 663 +     */                                                                                                           </span>
<span class="-2895511923085128680" onmouseenter="enter('-2895511923085128680');" onmouseout="out('-2895511923085128680');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 664 +    public static boolean isLauncherAppTarget(Intent launchIntent) {                                              </span>
<span class="-961226375159472711" onmouseenter="enter('-961226375159472711');" onmouseout="out('-961226375159472711');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 665 +        return launchIntent != null                                                                               </span>
<span class="5458468825391823724" onmouseenter="enter('5458468825391823724');" onmouseout="out('5458468825391823724');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 666 +                &amp;&amp; Intent.ACTION_MAIN.equals(launchIntent.getAction())                                            </span>
<span class="-8557547063293546194" onmouseenter="enter('-8557547063293546194');" onmouseout="out('-8557547063293546194');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 667 +                &amp;&amp; launchIntent.getComponent() != null                                                            </span>
<span class="1111365987588044694" onmouseenter="enter('1111365987588044694');" onmouseout="out('1111365987588044694');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 668 +                &amp;&amp; launchIntent.getCategories() != null                                                           </span>
<span class="8511800567412215627" onmouseenter="enter('8511800567412215627');" onmouseout="out('8511800567412215627');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 669 +                &amp;&amp; launchIntent.getCategories().size() == 1                                                       </span>
<span class="674036002274441191" onmouseenter="enter('674036002274441191');" onmouseout="out('674036002274441191');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 670 +                &amp;&amp; launchIntent.hasCategory(Intent.CATEGORY_LAUNCHER)                                             </span>
<span class="2314548842827800323" onmouseenter="enter('2314548842827800323');" onmouseout="out('2314548842827800323');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 671 +                &amp;&amp; launchIntent.getExtras() == null                                                               </span>
<span class="-1240644601343588312" onmouseenter="enter('-1240644601343588312');" onmouseout="out('-1240644601343588312');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 672 +                &amp;&amp; TextUtils.isEmpty(launchIntent.getDataString());                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 673 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 674 +                                                                                                                  </span>
<span class="6672516174829348824" onmouseenter="enter('6672516174829348824');" onmouseout="out('6672516174829348824');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 675 +    public static float dpiFromPx(int size, DisplayMetrics metrics){                                              </span>
<span class="1954388547550632323" onmouseenter="enter('1954388547550632323');" onmouseout="out('1954388547550632323');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 676 +        float densityRatio = (float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT;                         </span>
<span class="6040406764349731403" onmouseenter="enter('6040406764349731403');" onmouseout="out('6040406764349731403');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 677 +        return (size / densityRatio);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 678 +    }                                                                                                             </span>
<span class="4669549645205847924" onmouseenter="enter('4669549645205847924');" onmouseout="out('4669549645205847924');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 679 +    public static int pxFromDp(float size, DisplayMetrics metrics) {                                              </span>
<span class="-6600010791620633138" onmouseenter="enter('-6600010791620633138');" onmouseout="out('-6600010791620633138');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 680 +        return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,                            </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 681 +                size, metrics));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 682 +    }                                                                                                             </span>
<span class="8174843599380599011" onmouseenter="enter('8174843599380599011');" onmouseout="out('8174843599380599011');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 683 +    public static int pxFromSp(float size, DisplayMetrics metrics) {                                              </span>
<span class="3954369763209540394" onmouseenter="enter('3954369763209540394');" onmouseout="out('3954369763209540394');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 684 +        return (int) Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP,                             </span>
<span class="9038935605492406889" onmouseenter="enter('9038935605492406889');" onmouseout="out('9038935605492406889');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 685 +                size, metrics));                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 686 +    }                                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 687  }                                                                                                                 </span></pre></td>
                            <td><pre><span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style="">   1  /*                                                                                                                </span>
<span class="1710841298952644868" onmouseenter="enter('1710841298952644868');" onmouseout="out('1710841298952644868');" style="">   2   * Copyright (C) 2008 The Android Open Source Project                                                             </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   3   *                                                                                                                </span>
<span class="-7144700690364548245" onmouseenter="enter('-7144700690364548245');" onmouseout="out('-7144700690364548245');" style="">   4   * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                </span>
<span class="-6614298523444173250" onmouseenter="enter('-6614298523444173250');" onmouseout="out('-6614298523444173250');" style="">   5   * you may not use this file except in compliance with the License.                                               </span>
<span class="-4753901504248728101" onmouseenter="enter('-4753901504248728101');" onmouseout="out('-4753901504248728101');" style="">   6   * You may obtain a copy of the License at                                                                        </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   7   *                                                                                                                </span>
<span class="-763207030729826407" onmouseenter="enter('-763207030729826407');" onmouseout="out('-763207030729826407');" style="">   8   *      http://www.apache.org/licenses/LICENSE-2.0                                                                </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style="">   9   *                                                                                                                </span>
<span class="2557607632756179983" onmouseenter="enter('2557607632756179983');" onmouseout="out('2557607632756179983');" style="">  10   * Unless required by applicable law or agreed to in writing, software                                            </span>
<span class="-9189129105512731955" onmouseenter="enter('-9189129105512731955');" onmouseout="out('-9189129105512731955');" style="">  11   * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                              </span>
<span class="5781161717946418340" onmouseenter="enter('5781161717946418340');" onmouseout="out('5781161717946418340');" style="">  12   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                       </span>
<span class="1761562277992059393" onmouseenter="enter('1761562277992059393');" onmouseout="out('1761562277992059393');" style="">  13   * See the License for the specific language governing permissions and                                            </span>
<span class="7217408601297779962" onmouseenter="enter('7217408601297779962');" onmouseout="out('7217408601297779962');" style="">  14   * limitations under the License.                                                                                 </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  15   */                                                                                                               </span>
<span  style="">  16                                                                                                                    </span>
<span class="5824586583419512860" onmouseenter="enter('5824586583419512860');" onmouseout="out('5824586583419512860');" style="">  17  package com.android.launcher3;                                                                                    </span>
<span  style="">  18                                                                                                                    </span>
<span class="-6548293536248798364" onmouseenter="enter('-6548293536248798364');" onmouseout="out('-6548293536248798364');" style="">  19  import android.annotation.TargetApi;                                                                              </span>
<span class="-7090287939251728203" onmouseenter="enter('-7090287939251728203');" onmouseout="out('-7090287939251728203');" style="">  20  import android.app.Activity;                                                                                      </span>
<span class="-4571264055634936550" onmouseenter="enter('-4571264055634936550');" onmouseout="out('-4571264055634936550');" style="">  21  import android.app.SearchManager;                                                                                 </span>
<span class="8802236814006375919" onmouseenter="enter('8802236814006375919');" onmouseout="out('8802236814006375919');" style="">  22  import android.appwidget.AppWidgetManager;                                                                        </span>
<span class="2479136078387107715" onmouseenter="enter('2479136078387107715');" onmouseout="out('2479136078387107715');" style="">  23  import android.appwidget.AppWidgetProviderInfo;                                                                   </span>
<span class="-1977614562358835360" onmouseenter="enter('-1977614562358835360');" onmouseout="out('-1977614562358835360');" style="">  24  import android.content.ActivityNotFoundException;                                                                 </span>
<span class="6810188203727856944" onmouseenter="enter('6810188203727856944');" onmouseout="out('6810188203727856944');" style="">  25  import android.content.ComponentName;                                                                             </span>
<span class="5922045460006936195" onmouseenter="enter('5922045460006936195');" onmouseout="out('5922045460006936195');" style="">  26  import android.content.Context;                                                                                   </span>
<span class="6568903789857736568" onmouseenter="enter('6568903789857736568');" onmouseout="out('6568903789857736568');" style="">  27  import android.content.Intent;                                                                                    </span>
<span class="-841431222158024655" onmouseenter="enter('-841431222158024655');" onmouseout="out('-841431222158024655');" style="">  28  import android.content.pm.ApplicationInfo;                                                                        </span>
<span class="-5891303348447418015" onmouseenter="enter('-5891303348447418015');" onmouseout="out('-5891303348447418015');" style="">  29  import android.content.pm.PackageInfo;                                                                            </span>
<span class="-1290624633738557221" onmouseenter="enter('-1290624633738557221');" onmouseout="out('-1290624633738557221');" style="">  30  import android.content.pm.PackageManager;                                                                         </span>
<span class="-2097531830514422912" onmouseenter="enter('-2097531830514422912');" onmouseout="out('-2097531830514422912');" style="">  31  import android.content.pm.PackageManager.NameNotFoundException;                                                   </span>
<span class="8582326229770324815" onmouseenter="enter('8582326229770324815');" onmouseout="out('8582326229770324815');" style="">  32  import android.content.pm.ResolveInfo;                                                                            </span>
<span class="7207138161133478555" onmouseenter="enter('7207138161133478555');" onmouseout="out('7207138161133478555');" style="">  33  import android.content.res.Resources;                                                                             </span>

<span class="-6379310173182770238" onmouseenter="enter('-6379310173182770238');" onmouseout="out('-6379310173182770238');" style="">  34  import android.graphics.Bitmap;                                                                                   </span>

<span class="-6358617885644310547" onmouseenter="enter('-6358617885644310547');" onmouseout="out('-6358617885644310547');" style="">  35  import android.graphics.Canvas;                                                                                   </span>
<span class="-5868658801447575011" onmouseenter="enter('-5868658801447575011');" onmouseout="out('-5868658801447575011');" style="">  36  import android.graphics.Color;                                                                                    </span>
<span class="-2838211797420958568" onmouseenter="enter('-2838211797420958568');" onmouseout="out('-2838211797420958568');" style="">  37  import android.graphics.Matrix;                                                                                   </span>
<span class="-1586527322890291073" onmouseenter="enter('-1586527322890291073');" onmouseout="out('-1586527322890291073');" style="">  38  import android.graphics.Paint;                                                                                    </span>
<span class="4705671455453466947" onmouseenter="enter('4705671455453466947');" onmouseout="out('4705671455453466947');" style="">  39  import android.graphics.PaintFlagsDrawFilter;                                                                     </span>
<span class="2207333516549486115" onmouseenter="enter('2207333516549486115');" onmouseout="out('2207333516549486115');" style="">  40  import android.graphics.Rect;                                                                                     </span>
<span class="3047127677032988177" onmouseenter="enter('3047127677032988177');" onmouseout="out('3047127677032988177');" style="">  41  import android.graphics.drawable.BitmapDrawable;                                                                  </span>
<span class="-1737226814075322931" onmouseenter="enter('-1737226814075322931');" onmouseout="out('-1737226814075322931');" style="">  42  import android.graphics.drawable.Drawable;                                                                        </span>
<span class="-6029485351438569456" onmouseenter="enter('-6029485351438569456');" onmouseout="out('-6029485351438569456');" style="">  43  import android.graphics.drawable.PaintDrawable;                                                                   </span>
<span class="-4549785658871057260" onmouseenter="enter('-4549785658871057260');" onmouseout="out('-4549785658871057260');" style="">  44  import android.os.Build;                                                                                          </span>



<span class="7196841398407674858" onmouseenter="enter('7196841398407674858');" onmouseout="out('7196841398407674858');" style="">  45  import android.util.Log;                                                                                          </span>
<span class="3840976216358711217" onmouseenter="enter('3840976216358711217');" onmouseout="out('3840976216358711217');" style="">  46  import android.util.Pair;                                                                                         </span>
<span class="-1076320969941752510" onmouseenter="enter('-1076320969941752510');" onmouseout="out('-1076320969941752510');" style="">  47  import android.util.SparseArray;                                                                                  </span>

<span class="-8980485571216513882" onmouseenter="enter('-8980485571216513882');" onmouseout="out('-8980485571216513882');" style="">  48  import android.view.View;                                                                                         </span>
<span class="-4373317539211938720" onmouseenter="enter('-4373317539211938720');" onmouseout="out('-4373317539211938720');" style="">  49  import android.widget.Toast;                                                                                      </span>
<span  style="">  50                                                                                                                    </span>




<span class="9191247685397773893" onmouseenter="enter('9191247685397773893');" onmouseout="out('9191247685397773893');" style="">  51  import java.util.ArrayList;                                                                                       </span>
<span class="4561244361960433187" onmouseenter="enter('4561244361960433187');" onmouseout="out('4561244361960433187');" style="">  52  import java.util.Comparator;                                                                                      </span>


<span  style="">  53                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  54  /**                                                                                                               </span>
<span class="-2886437864396140581" onmouseenter="enter('-2886437864396140581');" onmouseout="out('-2886437864396140581');" style="">  55   * Various utilities shared amongst the Launcher&#x27;s classes.                                                       </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  56   */                                                                                                               </span>
<span class="-2003298980783331001" onmouseenter="enter('-2003298980783331001');" onmouseout="out('-2003298980783331001');" style="">  57  public final class Utilities {                                                                                    </span>
<span class="-150478699759500960" onmouseenter="enter('-150478699759500960');" onmouseout="out('-150478699759500960');" style="">  58      private static final String TAG = &quot;Launcher.Utilities&quot;;                                                       </span>
<span  style="">  59                                                                                                                    </span>
<span class="-3285704012604926483" onmouseenter="enter('-3285704012604926483');" onmouseout="out('-3285704012604926483');" style="">  60      private static int sIconWidth = -1;                                                                           </span>
<span class="-7368656921729638655" onmouseenter="enter('-7368656921729638655');" onmouseout="out('-7368656921729638655');" style="">  61      private static int sIconHeight = -1;                                                                          </span>
<span  style="">  62                                                                                                                    </span>
<span class="7010648018911473237" onmouseenter="enter('7010648018911473237');" onmouseout="out('7010648018911473237');" style="">  63      private static final Rect sOldBounds = new Rect();                                                            </span>
<span class="-9079535141952743575" onmouseenter="enter('-9079535141952743575');" onmouseout="out('-9079535141952743575');" style="">  64      private static final Canvas sCanvas = new Canvas();                                                           </span>
<span  style="">  65                                                                                                                    </span>



<span class="2640580777198908089" onmouseenter="enter('2640580777198908089');" onmouseout="out('2640580777198908089');" style="">  66      static {                                                                                                      </span>
<span class="-626556356968599416" onmouseenter="enter('-626556356968599416');" onmouseout="out('-626556356968599416');" style="">  67          sCanvas.setDrawFilter(new PaintFlagsDrawFilter(Paint.DITHER_FLAG,                                         </span>
<span class="-4527400598837595496" onmouseenter="enter('-4527400598837595496');" onmouseout="out('-4527400598837595496');" style="">  68                  Paint.FILTER_BITMAP_FLAG));                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  69      }                                                                                                             </span>
<span class="-3555091970674166572" onmouseenter="enter('-3555091970674166572');" onmouseout="out('-3555091970674166572');" style="">  70      static int sColors[] = { 0xffff0000, 0xff00ff00, 0xff0000ff };                                                </span>
<span class="4327223678999706186" onmouseenter="enter('4327223678999706186');" onmouseout="out('4327223678999706186');" style="">  71      static int sColorIndex = 0;                                                                                   </span>
<span  style="">  72                                                                                                                    </span>
<span class="6708108430116230940" onmouseenter="enter('6708108430116230940');" onmouseout="out('6708108430116230940');" style="">  73      static int[] sLoc0 = new int[2];                                                                              </span>
<span class="-4655970674231262240" onmouseenter="enter('-4655970674231262240');" onmouseout="out('-4655970674231262240');" style="">  74      static int[] sLoc1 = new int[2];                                                                              </span>
<span  style="">  75                                                                                                                    </span>
<span class="-4730679921590688195" onmouseenter="enter('-4730679921590688195');" onmouseout="out('-4730679921590688195');" style="">  76      // To turn on these properties, type                                                                          </span>
<span class="4592706007543417945" onmouseenter="enter('4592706007543417945');" onmouseout="out('4592706007543417945');" style="">  77      // adb shell setprop log.tag.PROPERTY_NAME [VERBOSE | SUPPRESS]                                               </span>
<span class="758972178103431168" onmouseenter="enter('758972178103431168');" onmouseout="out('758972178103431168');" style="">  78      static final String FORCE_ENABLE_ROTATION_PROPERTY = &quot;launcher_force_rotate&quot;;                                 </span>
<span class="3898605814208067124" onmouseenter="enter('3898605814208067124');" onmouseout="out('3898605814208067124');" style="">  79      public static boolean sForceEnableRotation = isPropertyEnabled(FORCE_ENABLE_ROTATION_PROPERTY);               </span>
<span  style="">  80                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  81      /**                                                                                                           </span>
<span class="3077507658421339996" onmouseenter="enter('3077507658421339996');" onmouseout="out('3077507658421339996');" style="">  82       * Returns a FastBitmapDrawable with the icon, accurately sized.                                              </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  83       */                                                                                                           </span>
<span class="2837566124379999844" onmouseenter="enter('2837566124379999844');" onmouseout="out('2837566124379999844');" style="">  84      public static FastBitmapDrawable createIconDrawable(Bitmap icon) {                                            </span>
<span class="-5160443570825674575" onmouseenter="enter('-5160443570825674575');" onmouseout="out('-5160443570825674575');" style="">  85          FastBitmapDrawable d = new FastBitmapDrawable(icon);                                                      </span>
<span class="3447003701071424534" onmouseenter="enter('3447003701071424534');" onmouseout="out('3447003701071424534');" style="">  86          d.setFilterBitmap(true);                                                                                  </span>
<span class="-5129661754691309397" onmouseenter="enter('-5129661754691309397');" onmouseout="out('-5129661754691309397');" style="">  87          resizeIconDrawable(d);                                                                                    </span>
<span class="5307209598704100981" onmouseenter="enter('5307209598704100981');" onmouseout="out('5307209598704100981');" style="">  88          return d;                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  89      }                                                                                                             </span>
<span  style="">  90                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style="">  91      /**                                                                                                           </span>
<span class="-6823557864322819203" onmouseenter="enter('-6823557864322819203');" onmouseout="out('-6823557864322819203');" style="">  92       * Resizes an icon drawable to the correct icon size.                                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style="">  93       */                                                                                                           </span>
<span class="-2549186728118005702" onmouseenter="enter('-2549186728118005702');" onmouseout="out('-2549186728118005702');" style="">  94      static void resizeIconDrawable(Drawable icon) {                                                               </span>
<span class="2607064405243787742" onmouseenter="enter('2607064405243787742');" onmouseout="out('2607064405243787742');" style="">  95          icon.setBounds(0, 0, sIconWidth, sIconHeight);                                                            </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="">  96      }                                                                                                             </span>
<span  style="">  97                                                                                                                    </span>
<span class="3464706693777569340" onmouseenter="enter('3464706693777569340');" onmouseout="out('3464706693777569340');" style="">  98      public static boolean isPropertyEnabled(String propertyName) {                                                </span>
<span class="5917527799205518745" onmouseenter="enter('5917527799205518745');" onmouseout="out('5917527799205518745');" style="">  99          return Log.isLoggable(propertyName, Log.VERBOSE);                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 100      }                                                                                                             </span>
<span  style=""> 101                                                                                                                    </span>
<span class="6216232423695788303" onmouseenter="enter('6216232423695788303');" onmouseout="out('6216232423695788303');" style=""> 102      public static boolean isRotationEnabled(Context c) {                                                          </span>
<span class="2777407435637451670" onmouseenter="enter('2777407435637451670');" onmouseout="out('2777407435637451670');" style=""> 103          boolean enableRotation = sForceEnableRotation ||                                                          </span>
<span class="2602357999956778814" onmouseenter="enter('2602357999956778814');" onmouseout="out('2602357999956778814');" style=""> 104                  c.getResources().getBoolean(R.bool.allow_rotation);                                               </span>
<span class="-518478242812281738" onmouseenter="enter('-518478242812281738');" onmouseout="out('-518478242812281738');" style=""> 105          return enableRotation;                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 106      }                                                                                                             </span>
<span  style=""> 107                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 108      /**                                                                                                           </span>
<span class="-5411062930126485457" onmouseenter="enter('-5411062930126485457');" onmouseout="out('-5411062930126485457');" style=""> 109       * Indicates if the device is running LMP or higher.                                                          </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 110       */                                                                                                           </span>
<span class="9038262384163809101" onmouseenter="enter('9038262384163809101');" onmouseout="out('9038262384163809101');" style=""> 111      public static boolean isLmpOrAbove() {                                                                        </span>
<span class="1750471696359529858" onmouseenter="enter('1750471696359529858');" onmouseout="out('1750471696359529858');" style=""> 112          return Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP;                                             </span>









<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 113      }                                                                                                             </span>
<span  style=""> 114                                                                                                                    </span>
<span class="2780421130698938768" onmouseenter="enter('2780421130698938768');" onmouseout="out('2780421130698938768');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 115 +    public static boolean isLmpMr1() {                                                                            </span>
<span class="-3182404196161427649" onmouseenter="enter('-3182404196161427649');" onmouseout="out('-3182404196161427649');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 116 +        return Build.VERSION.SDK_INT == 22;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 117 +    }                                                                                                             </span>
<span  style="background-color: rgba(0, 255, 0, 0.2); margin: 0"> 118 +                                                                                                                  </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 119      /**                                                                                                           </span>
<span class="4668441563828347860" onmouseenter="enter('4668441563828347860');" onmouseout="out('4668441563828347860');" style=""> 120       * Returns a bitmap suitable for the all apps view. If the package or the resource do not                     </span>
<span class="3774832827654510116" onmouseenter="enter('3774832827654510116');" onmouseout="out('3774832827654510116');" style=""> 121       * exist, it returns null.                                                                                    </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 122       */                                                                                                           </span>
<span class="8400977027497472140" onmouseenter="enter('8400977027497472140');" onmouseout="out('8400977027497472140');" style=""> 123      static Bitmap createIconBitmap(String packageName, String resourceName, IconCache cache,                      </span>
<span class="-1446773987155957519" onmouseenter="enter('-1446773987155957519');" onmouseout="out('-1446773987155957519');" style=""> 124              Context context) {                                                                                    </span>
<span class="1266585683001909567" onmouseenter="enter('1266585683001909567');" onmouseout="out('1266585683001909567');" style=""> 125          PackageManager packageManager = context.getPackageManager();                                              </span>
<span class="-3334691377434056566" onmouseenter="enter('-3334691377434056566');" onmouseout="out('-3334691377434056566');" style=""> 126          // the resource                                                                                           </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 127          try {                                                                                                     </span>
<span class="6545965237824165222" onmouseenter="enter('6545965237824165222');" onmouseout="out('6545965237824165222');" style=""> 128              Resources resources = packageManager.getResourcesForApplication(packageName);                         </span>
<span class="-611375514508790212" onmouseenter="enter('-611375514508790212');" onmouseout="out('-611375514508790212');" style=""> 129              if (resources != null) {                                                                              </span>
<span class="-1749286829220271451" onmouseenter="enter('-1749286829220271451');" onmouseout="out('-1749286829220271451');" style=""> 130                  final int id = resources.getIdentifier(resourceName, null, null);                                 </span>
<span class="3832582864359039420" onmouseenter="enter('3832582864359039420');" onmouseout="out('3832582864359039420');" style=""> 131                  return createIconBitmap(                                                                          </span>
<span class="-6654352283563902312" onmouseenter="enter('-6654352283563902312');" onmouseout="out('-6654352283563902312');" style=""> 132                          resources.getDrawableForDensity(id, cache.getFullResIconDpi()), context);                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 133              }                                                                                                     </span>
<span class="2627011698774241688" onmouseenter="enter('2627011698774241688');" onmouseout="out('2627011698774241688');" style=""> 134          } catch (Exception e) {                                                                                   </span>
<span class="717554995175652484" onmouseenter="enter('717554995175652484');" onmouseout="out('717554995175652484');" style=""> 135              // Icon not found.                                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 136          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 137          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 138      }                                                                                                             </span>
<span  style=""> 139                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 140      /**                                                                                                           </span>
<span class="-8651925319067042860" onmouseenter="enter('-8651925319067042860');" onmouseout="out('-8651925319067042860');" style=""> 141       * Returns a bitmap which is of the appropriate size to be displayed as an icon                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 142       */                                                                                                           </span>
<span class="-6299654696161202613" onmouseenter="enter('-6299654696161202613');" onmouseout="out('-6299654696161202613');" style=""> 143      static Bitmap createIconBitmap(Bitmap icon, Context context) {                                                </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 144          synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 145              if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 146                  initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 147              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 148          }                                                                                                         </span>
<span class="-4889100653175284592" onmouseenter="enter('-4889100653175284592');" onmouseout="out('-4889100653175284592');" style=""> 149          if (sIconWidth == icon.getWidth() &amp;&amp; sIconHeight == icon.getHeight()) {                                   </span>
<span class="989760058024600884" onmouseenter="enter('989760058024600884');" onmouseout="out('989760058024600884');" style=""> 150              return icon;                                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 151          }                                                                                                         </span>
<span class="4950736054861838829" onmouseenter="enter('4950736054861838829');" onmouseout="out('4950736054861838829');" style=""> 152          return createIconBitmap(new BitmapDrawable(context.getResources(), icon), context);                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 153      }                                                                                                             </span>
<span  style=""> 154                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 155      /**                                                                                                           </span>
<span class="850173659982232805" onmouseenter="enter('850173659982232805');" onmouseout="out('850173659982232805');" style=""> 156       * Returns a bitmap suitable for the all apps view.                                                           </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 157       */                                                                                                           </span>
<span class="-732642925772727250" onmouseenter="enter('-732642925772727250');" onmouseout="out('-732642925772727250');" style=""> 158      public static Bitmap createIconBitmap(Drawable icon, Context context) {                                       </span>
<span class="1336093979541844223" onmouseenter="enter('1336093979541844223');" onmouseout="out('1336093979541844223');" style=""> 159          synchronized (sCanvas) { // we share the statics :-(                                                      </span>
<span class="-4847140045687351020" onmouseenter="enter('-4847140045687351020');" onmouseout="out('-4847140045687351020');" style=""> 160              if (sIconWidth == -1) {                                                                               </span>
<span class="-4613526761382555809" onmouseenter="enter('-4613526761382555809');" onmouseout="out('-4613526761382555809');" style=""> 161                  initStatics(context);                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 162              }                                                                                                     </span>
<span  style=""> 163                                                                                                                    </span>
<span class="6470075157816962568" onmouseenter="enter('6470075157816962568');" onmouseout="out('6470075157816962568');" style=""> 164              int width = sIconWidth;                                                                               </span>
<span class="3986870078870645386" onmouseenter="enter('3986870078870645386');" onmouseout="out('3986870078870645386');" style=""> 165              int height = sIconHeight;                                                                             </span>
<span  style=""> 166                                                                                                                    </span>
<span class="-8867193084583578996" onmouseenter="enter('-8867193084583578996');" onmouseout="out('-8867193084583578996');" style=""> 167              if (icon instanceof PaintDrawable) {                                                                  </span>
<span class="-3203993698233562145" onmouseenter="enter('-3203993698233562145');" onmouseout="out('-3203993698233562145');" style=""> 168                  PaintDrawable painter = (PaintDrawable) icon;                                                     </span>
<span class="-2736679985742307380" onmouseenter="enter('-2736679985742307380');" onmouseout="out('-2736679985742307380');" style=""> 169                  painter.setIntrinsicWidth(width);                                                                 </span>
<span class="1535538573260895654" onmouseenter="enter('1535538573260895654');" onmouseout="out('1535538573260895654');" style=""> 170                  painter.setIntrinsicHeight(height);                                                               </span>
<span class="-2636769651025003752" onmouseenter="enter('-2636769651025003752');" onmouseout="out('-2636769651025003752');" style=""> 171              } else if (icon instanceof BitmapDrawable) {                                                          </span>
<span class="1084136465877060677" onmouseenter="enter('1084136465877060677');" onmouseout="out('1084136465877060677');" style=""> 172                  // Ensure the bitmap has a density.                                                               </span>
<span class="5864892448248222012" onmouseenter="enter('5864892448248222012');" onmouseout="out('5864892448248222012');" style=""> 173                  BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;                                            </span>
<span class="3550617741478519184" onmouseenter="enter('3550617741478519184');" onmouseout="out('3550617741478519184');" style=""> 174                  Bitmap bitmap = bitmapDrawable.getBitmap();                                                       </span>
<span class="1596154265055822565" onmouseenter="enter('1596154265055822565');" onmouseout="out('1596154265055822565');" style=""> 175                  if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {                                                 </span>
<span class="3675301865158131145" onmouseenter="enter('3675301865158131145');" onmouseout="out('3675301865158131145');" style=""> 176                      bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 177                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 178              }                                                                                                     </span>
<span class="2006965770651492787" onmouseenter="enter('2006965770651492787');" onmouseout="out('2006965770651492787');" style=""> 179              int sourceWidth = icon.getIntrinsicWidth();                                                           </span>
<span class="-8929248561928909588" onmouseenter="enter('-8929248561928909588');" onmouseout="out('-8929248561928909588');" style=""> 180              int sourceHeight = icon.getIntrinsicHeight();                                                         </span>
<span class="4855423358511681684" onmouseenter="enter('4855423358511681684');" onmouseout="out('4855423358511681684');" style=""> 181              if (sourceWidth &gt; 0 &amp;&amp; sourceHeight &gt; 0) {                                                            </span>
<span class="-1171307958605951449" onmouseenter="enter('-1171307958605951449');" onmouseout="out('-1171307958605951449');" style=""> 182                  // Scale the icon proportionally to the icon dimensions                                           </span>
<span class="8584519632043235403" onmouseenter="enter('8584519632043235403');" onmouseout="out('8584519632043235403');" style=""> 183                  final float ratio = (float) sourceWidth / sourceHeight;                                           </span>
<span class="4524639752406282497" onmouseenter="enter('4524639752406282497');" onmouseout="out('4524639752406282497');" style=""> 184                  if (sourceWidth &gt; sourceHeight) {                                                                 </span>
<span class="-2436478612752165944" onmouseenter="enter('-2436478612752165944');" onmouseout="out('-2436478612752165944');" style=""> 185                      height = (int) (width / ratio);                                                               </span>
<span class="1449151696614204530" onmouseenter="enter('1449151696614204530');" onmouseout="out('1449151696614204530');" style=""> 186                  } else if (sourceHeight &gt; sourceWidth) {                                                          </span>
<span class="2807612543753435450" onmouseenter="enter('2807612543753435450');" onmouseout="out('2807612543753435450');" style=""> 187                      width = (int) (height * ratio);                                                               </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 188                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 189              }                                                                                                     </span>
<span  style=""> 190                                                                                                                    </span>
<span class="-2476355957821292914" onmouseenter="enter('-2476355957821292914');" onmouseout="out('-2476355957821292914');" style=""> 191              // no intrinsic size --&gt; use default size                                                             </span>
<span class="-2863116098807607090" onmouseenter="enter('-2863116098807607090');" onmouseout="out('-2863116098807607090');" style=""> 192              int textureWidth = sIconWidth;                                                                        </span>
<span class="7331988198270762201" onmouseenter="enter('7331988198270762201');" onmouseout="out('7331988198270762201');" style=""> 193              int textureHeight = sIconHeight;                                                                      </span>
<span  style=""> 194                                                                                                                    </span>
<span class="-2849342051430861494" onmouseenter="enter('-2849342051430861494');" onmouseout="out('-2849342051430861494');" style=""> 195              final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,                                </span>
<span class="273441602049516461" onmouseenter="enter('273441602049516461');" onmouseout="out('273441602049516461');" style=""> 196                      Bitmap.Config.ARGB_8888);                                                                     </span>
<span class="3698033219300511186" onmouseenter="enter('3698033219300511186');" onmouseout="out('3698033219300511186');" style=""> 197              final Canvas canvas = sCanvas;                                                                        </span>
<span class="-7875731838883385825" onmouseenter="enter('-7875731838883385825');" onmouseout="out('-7875731838883385825');" style=""> 198              canvas.setBitmap(bitmap);                                                                             </span>
<span  style=""> 199                                                                                                                    </span>
<span class="6000006354806990393" onmouseenter="enter('6000006354806990393');" onmouseout="out('6000006354806990393');" style=""> 200              final int left = (textureWidth-width) / 2;                                                            </span>
<span class="-6114595846735794082" onmouseenter="enter('-6114595846735794082');" onmouseout="out('-6114595846735794082');" style=""> 201              final int top = (textureHeight-height) / 2;                                                           </span>
<span  style=""> 202                                                                                                                    </span>
<span class="895463976842519436" onmouseenter="enter('895463976842519436');" onmouseout="out('895463976842519436');" style=""> 203              @SuppressWarnings(&quot;all&quot;) // suppress dead code warning                                                </span>
<span class="-1879214401865010172" onmouseenter="enter('-1879214401865010172');" onmouseout="out('-1879214401865010172');" style=""> 204              final boolean debug = false;                                                                          </span>
<span class="-8313101347568788001" onmouseenter="enter('-8313101347568788001');" onmouseout="out('-8313101347568788001');" style=""> 205              if (debug) {                                                                                          </span>
<span class="-5391493460227891425" onmouseenter="enter('-5391493460227891425');" onmouseout="out('-5391493460227891425');" style=""> 206                  // draw a big box for the icon for debugging                                                      </span>
<span class="3810327023008079616" onmouseenter="enter('3810327023008079616');" onmouseout="out('3810327023008079616');" style=""> 207                  canvas.drawColor(sColors[sColorIndex]);                                                           </span>
<span class="-2728981737664700974" onmouseenter="enter('-2728981737664700974');" onmouseout="out('-2728981737664700974');" style=""> 208                  if (++sColorIndex &gt;= sColors.length) sColorIndex = 0;                                             </span>
<span class="4172933161268745012" onmouseenter="enter('4172933161268745012');" onmouseout="out('4172933161268745012');" style=""> 209                  Paint debugPaint = new Paint();                                                                   </span>
<span class="8045718539711252061" onmouseenter="enter('8045718539711252061');" onmouseout="out('8045718539711252061');" style=""> 210                  debugPaint.setColor(0xffcccc00);                                                                  </span>
<span class="-4791499214926232504" onmouseenter="enter('-4791499214926232504');" onmouseout="out('-4791499214926232504');" style=""> 211                  canvas.drawRect(left, top, left+width, top+height, debugPaint);                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 212              }                                                                                                     </span>
<span  style=""> 213                                                                                                                    </span>
<span class="2319031195604813381" onmouseenter="enter('2319031195604813381');" onmouseout="out('2319031195604813381');" style=""> 214              sOldBounds.set(icon.getBounds());                                                                     </span>
<span class="-5910894124992584478" onmouseenter="enter('-5910894124992584478');" onmouseout="out('-5910894124992584478');" style=""> 215              icon.setBounds(left, top, left+width, top+height);                                                    </span>
<span class="-4348038507827965559" onmouseenter="enter('-4348038507827965559');" onmouseout="out('-4348038507827965559');" style=""> 216              icon.draw(canvas);                                                                                    </span>
<span class="5721329119666459000" onmouseenter="enter('5721329119666459000');" onmouseout="out('5721329119666459000');" style=""> 217              icon.setBounds(sOldBounds);                                                                           </span>
<span class="-4129720038801091692" onmouseenter="enter('-4129720038801091692');" onmouseout="out('-4129720038801091692');" style=""> 218              canvas.setBitmap(null);                                                                               </span>
<span  style=""> 219                                                                                                                    </span>
<span class="-2669835381987628663" onmouseenter="enter('-2669835381987628663');" onmouseout="out('-2669835381987628663');" style=""> 220              return bitmap;                                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 221          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 222      }                                                                                                             </span>
<span  style=""> 223                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 224      /**                                                                                                           </span>
<span class="-4204924891906698732" onmouseenter="enter('-4204924891906698732');" onmouseout="out('-4204924891906698732');" style=""> 225       * Given a coordinate relative to the descendant, find the coordinate in a parent view&#x27;s                      </span>
<span class="-6616651584005271377" onmouseenter="enter('-6616651584005271377');" onmouseout="out('-6616651584005271377');" style=""> 226       * coordinates.                                                                                               </span>
<span class="329605257831645060" onmouseenter="enter('329605257831645060');" onmouseout="out('329605257831645060');" style=""> 227       *                                                                                                            </span>
<span class="-7558888770344913372" onmouseenter="enter('-7558888770344913372');" onmouseout="out('-7558888770344913372');" style=""> 228       * @param descendant The descendant to which the passed coordinate is relative.                               </span>
<span class="-8745379995776721263" onmouseenter="enter('-8745379995776721263');" onmouseout="out('-8745379995776721263');" style=""> 229       * @param root The root view to make the coordinates relative to.                                             </span>
<span class="-3899481291465635475" onmouseenter="enter('-3899481291465635475');" onmouseout="out('-3899481291465635475');" style=""> 230       * @param coord The coordinate that we want mapped.                                                           </span>
<span class="8938283417245030073" onmouseenter="enter('8938283417245030073');" onmouseout="out('8938283417245030073');" style=""> 231       * @param includeRootScroll Whether or not to account for the scroll of the descendant:                       </span>
<span class="4257425009763457937" onmouseenter="enter('4257425009763457937');" onmouseout="out('4257425009763457937');" style=""> 232       *          sometimes this is relevant as in a child&#x27;s coordinates within the descendant.                     </span>
<span class="5869635239463966627" onmouseenter="enter('5869635239463966627');" onmouseout="out('5869635239463966627');" style=""> 233       * @return The factor by which this descendant is scaled relative to this DragLayer. Caution                  </span>
<span class="-9025773753572496041" onmouseenter="enter('-9025773753572496041');" onmouseout="out('-9025773753572496041');" style=""> 234       *         this scale factor is assumed to be equal in X and Y, and so if at any point this                   </span>
<span class="8506500727062308621" onmouseenter="enter('8506500727062308621');" onmouseout="out('8506500727062308621');" style=""> 235       *         assumption fails, we will need to return a pair of scale factors.                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 236       */                                                                                                           </span>
<span class="-4747726369066010079" onmouseenter="enter('-4747726369066010079');" onmouseout="out('-4747726369066010079');" style=""> 237      public static float getDescendantCoordRelativeToParent(View descendant, View root,                            </span>
<span class="668074939177592595" onmouseenter="enter('668074939177592595');" onmouseout="out('668074939177592595');" style=""> 238                                                             int[] coord, boolean includeRootScroll) {              </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 239          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 240                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 241          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 242                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 243          View v = descendant;                                                                                      </span>
<span class="1033673212879112846" onmouseenter="enter('1033673212879112846');" onmouseout="out('1033673212879112846');" style=""> 244          while(v != root &amp;&amp; v != null) {                                                                           </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 245              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 246              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 247          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 248          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 249                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 250          float scale = 1.0f;                                                                                       </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 251          int count = ancestorChain.size();                                                                         </span>
<span class="678980937581768133" onmouseenter="enter('678980937581768133');" onmouseout="out('678980937581768133');" style=""> 252          for (int i = 0; i &lt; count; i++) {                                                                         </span>
<span class="-1490613447172565045" onmouseenter="enter('-1490613447172565045');" onmouseout="out('-1490613447172565045');" style=""> 253              View v0 = ancestorChain.get(i);                                                                       </span>
<span class="285973050746976459" onmouseenter="enter('285973050746976459');" onmouseout="out('285973050746976459');" style=""> 254              // For TextViews, scroll has a meaning which relates to the text position                             </span>
<span class="2329516082384155696" onmouseenter="enter('2329516082384155696');" onmouseout="out('2329516082384155696');" style=""> 255              // which is very strange... ignore the scroll.                                                        </span>
<span class="330279165233587150" onmouseenter="enter('330279165233587150');" onmouseout="out('330279165233587150');" style=""> 256              if (v0 != descendant || includeRootScroll) {                                                          </span>
<span class="-828665383304775415" onmouseenter="enter('-828665383304775415');" onmouseout="out('-828665383304775415');" style=""> 257                  pt[0] -= v0.getScrollX();                                                                         </span>
<span class="-2931946620292921283" onmouseenter="enter('-2931946620292921283');" onmouseout="out('-2931946620292921283');" style=""> 258                  pt[1] -= v0.getScrollY();                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 259              }                                                                                                     </span>
<span  style=""> 260                                                                                                                    </span>
<span class="-445780995072365925" onmouseenter="enter('-445780995072365925');" onmouseout="out('-445780995072365925');" style=""> 261              v0.getMatrix().mapPoints(pt);                                                                         </span>
<span class="1294166657504208439" onmouseenter="enter('1294166657504208439');" onmouseout="out('1294166657504208439');" style=""> 262              pt[0] += v0.getLeft();                                                                                </span>
<span class="3392809098336931969" onmouseenter="enter('3392809098336931969');" onmouseout="out('3392809098336931969');" style=""> 263              pt[1] += v0.getTop();                                                                                 </span>
<span class="-3640382603344432038" onmouseenter="enter('-3640382603344432038');" onmouseout="out('-3640382603344432038');" style=""> 264              scale *= v0.getScaleX();                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 265          }                                                                                                         </span>
<span  style=""> 266                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 267          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 268          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 269          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 270      }                                                                                                             </span>
<span  style=""> 271                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 272      /**                                                                                                           </span>
<span class="-6920005811988825482" onmouseenter="enter('-6920005811988825482');" onmouseout="out('-6920005811988825482');" style=""> 273       * Inverse of {@link #getDescendantCoordRelativeToSelf(View, int[])}.                                         </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 274       */                                                                                                           </span>
<span class="-176167034249474639" onmouseenter="enter('-176167034249474639');" onmouseout="out('-176167034249474639');" style=""> 275      public static float mapCoordInSelfToDescendent(View descendant, View root,                                    </span>
<span class="-2551641563673572902" onmouseenter="enter('-2551641563673572902');" onmouseout="out('-2551641563673572902');" style=""> 276                                                     int[] coord) {                                                 </span>
<span class="1464787216398520974" onmouseenter="enter('1464787216398520974');" onmouseout="out('1464787216398520974');" style=""> 277          ArrayList&lt;View&gt; ancestorChain = new ArrayList&lt;View&gt;();                                                    </span>
<span  style=""> 278                                                                                                                    </span>
<span class="652683970449003889" onmouseenter="enter('652683970449003889');" onmouseout="out('652683970449003889');" style=""> 279          float[] pt = {coord[0], coord[1]};                                                                        </span>
<span  style=""> 280                                                                                                                    </span>
<span class="-4298100267218464431" onmouseenter="enter('-4298100267218464431');" onmouseout="out('-4298100267218464431');" style=""> 281          View v = descendant;                                                                                      </span>
<span class="8191713770390421280" onmouseenter="enter('8191713770390421280');" onmouseout="out('8191713770390421280');" style=""> 282          while(v != root) {                                                                                        </span>
<span class="3751795120379540752" onmouseenter="enter('3751795120379540752');" onmouseout="out('3751795120379540752');" style=""> 283              ancestorChain.add(v);                                                                                 </span>
<span class="6590779689643714168" onmouseenter="enter('6590779689643714168');" onmouseout="out('6590779689643714168');" style=""> 284              v = (View) v.getParent();                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 285          }                                                                                                         </span>
<span class="-4173920028616195942" onmouseenter="enter('-4173920028616195942');" onmouseout="out('-4173920028616195942');" style=""> 286          ancestorChain.add(root);                                                                                  </span>
<span  style=""> 287                                                                                                                    </span>
<span class="6198601178740989931" onmouseenter="enter('6198601178740989931');" onmouseout="out('6198601178740989931');" style=""> 288          float scale = 1.0f;                                                                                       </span>
<span class="-4497089735881146604" onmouseenter="enter('-4497089735881146604');" onmouseout="out('-4497089735881146604');" style=""> 289          Matrix inverse = new Matrix();                                                                            </span>
<span class="-4430691718645287180" onmouseenter="enter('-4430691718645287180');" onmouseout="out('-4430691718645287180');" style=""> 290          int count = ancestorChain.size();                                                                         </span>
<span class="-8483347227424409112" onmouseenter="enter('-8483347227424409112');" onmouseout="out('-8483347227424409112');" style=""> 291          for (int i = count - 1; i &gt;= 0; i--) {                                                                    </span>
<span class="-4127647695607370706" onmouseenter="enter('-4127647695607370706');" onmouseout="out('-4127647695607370706');" style=""> 292              View ancestor = ancestorChain.get(i);                                                                 </span>
<span class="6424054005802057751" onmouseenter="enter('6424054005802057751');" onmouseout="out('6424054005802057751');" style=""> 293              View next = i &gt; 0 ? ancestorChain.get(i-1) : null;                                                    </span>
<span  style=""> 294                                                                                                                    </span>
<span class="7927378635511533922" onmouseenter="enter('7927378635511533922');" onmouseout="out('7927378635511533922');" style=""> 295              pt[0] += ancestor.getScrollX();                                                                       </span>
<span class="-2345386391917380249" onmouseenter="enter('-2345386391917380249');" onmouseout="out('-2345386391917380249');" style=""> 296              pt[1] += ancestor.getScrollY();                                                                       </span>
<span  style=""> 297                                                                                                                    </span>
<span class="8263837129191589618" onmouseenter="enter('8263837129191589618');" onmouseout="out('8263837129191589618');" style=""> 298              if (next != null) {                                                                                   </span>
<span class="-1442950063126331721" onmouseenter="enter('-1442950063126331721');" onmouseout="out('-1442950063126331721');" style=""> 299                  pt[0] -= next.getLeft();                                                                          </span>
<span class="-2070174664816397499" onmouseenter="enter('-2070174664816397499');" onmouseout="out('-2070174664816397499');" style=""> 300                  pt[1] -= next.getTop();                                                                           </span>
<span class="6678736278679273197" onmouseenter="enter('6678736278679273197');" onmouseout="out('6678736278679273197');" style=""> 301                  next.getMatrix().invert(inverse);                                                                 </span>
<span class="-1323897859958572717" onmouseenter="enter('-1323897859958572717');" onmouseout="out('-1323897859958572717');" style=""> 302                  inverse.mapPoints(pt);                                                                            </span>
<span class="-6146584000517064410" onmouseenter="enter('-6146584000517064410');" onmouseout="out('-6146584000517064410');" style=""> 303                  scale *= next.getScaleX();                                                                        </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 304              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 305          }                                                                                                         </span>
<span  style=""> 306                                                                                                                    </span>
<span class="-2025148531418755448" onmouseenter="enter('-2025148531418755448');" onmouseout="out('-2025148531418755448');" style=""> 307          coord[0] = (int) Math.round(pt[0]);                                                                       </span>
<span class="-4515334535282748173" onmouseenter="enter('-4515334535282748173');" onmouseout="out('-4515334535282748173');" style=""> 308          coord[1] = (int) Math.round(pt[1]);                                                                       </span>
<span class="-5586816415448192236" onmouseenter="enter('-5586816415448192236');" onmouseout="out('-5586816415448192236');" style=""> 309          return scale;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 310      }                                                                                                             </span>
<span  style=""> 311                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 312      /**                                                                                                           </span>
<span class="566841137915488271" onmouseenter="enter('566841137915488271');" onmouseout="out('566841137915488271');" style=""> 313       * Utility method to determine whether the given point, in local coordinates,                                 </span>
<span class="98256192233724033" onmouseenter="enter('98256192233724033');" onmouseout="out('98256192233724033');" style=""> 314       * is inside the view, where the area of the view is expanded by the slop factor.                             </span>
<span class="1475804631766250018" onmouseenter="enter('1475804631766250018');" onmouseout="out('1475804631766250018');" style=""> 315       * This method is called while processing touch-move events to determine if the event                         </span>
<span class="5030846195531292266" onmouseenter="enter('5030846195531292266');" onmouseout="out('5030846195531292266');" style=""> 316       * is still within the view.                                                                                  </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 317       */                                                                                                           </span>
<span class="704807547344022788" onmouseenter="enter('704807547344022788');" onmouseout="out('704807547344022788');" style=""> 318      public static boolean pointInView(View v, float localX, float localY, float slop) {                           </span>
<span class="2945925920396954366" onmouseenter="enter('2945925920396954366');" onmouseout="out('2945925920396954366');" style=""> 319          return localX &gt;= -slop &amp;&amp; localY &gt;= -slop &amp;&amp; localX &lt; (v.getWidth() + slop) &amp;&amp;                            </span>
<span class="-479619691352272769" onmouseenter="enter('-479619691352272769');" onmouseout="out('-479619691352272769');" style=""> 320                  localY &lt; (v.getHeight() + slop);                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 321      }                                                                                                             </span>
<span  style=""> 322                                                                                                                    </span>
<span class="-7428141421266484859" onmouseenter="enter('-7428141421266484859');" onmouseout="out('-7428141421266484859');" style=""> 323      private static void initStatics(Context context) {                                                            </span>
<span class="7597797902441164085" onmouseenter="enter('7597797902441164085');" onmouseout="out('7597797902441164085');" style=""> 324          final Resources resources = context.getResources();                                                       </span>
<span class="5565293935619735218" onmouseenter="enter('5565293935619735218');" onmouseout="out('5565293935619735218');" style=""> 325          sIconWidth = sIconHeight = (int) resources.getDimension(R.dimen.app_icon_size);                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 326      }                                                                                                             </span>
<span  style=""> 327                                                                                                                    </span>
<span class="1887388638717136951" onmouseenter="enter('1887388638717136951');" onmouseout="out('1887388638717136951');" style=""> 328      public static void setIconSize(int widthPx) {                                                                 </span>
<span class="7934940689778386175" onmouseenter="enter('7934940689778386175');" onmouseout="out('7934940689778386175');" style=""> 329          sIconWidth = sIconHeight = widthPx;                                                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 330      }                                                                                                             </span>
<span  style=""> 331                                                                                                                    </span>
<span class="8825317784123702846" onmouseenter="enter('8825317784123702846');" onmouseout="out('8825317784123702846');" style=""> 332      public static void scaleRect(Rect r, float scale) {                                                           </span>
<span class="-1341307493357447074" onmouseenter="enter('-1341307493357447074');" onmouseout="out('-1341307493357447074');" style=""> 333          if (scale != 1.0f) {                                                                                      </span>
<span class="2504230390266687876" onmouseenter="enter('2504230390266687876');" onmouseout="out('2504230390266687876');" style=""> 334              r.left = (int) (r.left * scale + 0.5f);                                                               </span>
<span class="2684372968270272543" onmouseenter="enter('2684372968270272543');" onmouseout="out('2684372968270272543');" style=""> 335              r.top = (int) (r.top * scale + 0.5f);                                                                 </span>
<span class="-2115584179705908897" onmouseenter="enter('-2115584179705908897');" onmouseout="out('-2115584179705908897');" style=""> 336              r.right = (int) (r.right * scale + 0.5f);                                                             </span>
<span class="5789523852434243481" onmouseenter="enter('5789523852434243481');" onmouseout="out('5789523852434243481');" style=""> 337              r.bottom = (int) (r.bottom * scale + 0.5f);                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 338          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 339      }                                                                                                             </span>
<span  style=""> 340                                                                                                                    </span>
<span class="6666011005403523008" onmouseenter="enter('6666011005403523008');" onmouseout="out('6666011005403523008');" style=""> 341      public static int[] getCenterDeltaInScreenSpace(View v0, View v1, int[] delta) {                              </span>
<span class="2345748958031418515" onmouseenter="enter('2345748958031418515');" onmouseout="out('2345748958031418515');" style=""> 342          v0.getLocationInWindow(sLoc0);                                                                            </span>
<span class="6966631630159357397" onmouseenter="enter('6966631630159357397');" onmouseout="out('6966631630159357397');" style=""> 343          v1.getLocationInWindow(sLoc1);                                                                            </span>
<span  style=""> 344                                                                                                                    </span>
<span class="7824696549558888655" onmouseenter="enter('7824696549558888655');" onmouseout="out('7824696549558888655');" style=""> 345          sLoc0[0] += (v0.getMeasuredWidth() * v0.getScaleX()) / 2;                                                 </span>
<span class="2869763766386548146" onmouseenter="enter('2869763766386548146');" onmouseout="out('2869763766386548146');" style=""> 346          sLoc0[1] += (v0.getMeasuredHeight() * v0.getScaleY()) / 2;                                                </span>
<span class="-6559486829640243870" onmouseenter="enter('-6559486829640243870');" onmouseout="out('-6559486829640243870');" style=""> 347          sLoc1[0] += (v1.getMeasuredWidth() * v1.getScaleX()) / 2;                                                 </span>
<span class="6830465468274722987" onmouseenter="enter('6830465468274722987');" onmouseout="out('6830465468274722987');" style=""> 348          sLoc1[1] += (v1.getMeasuredHeight() * v1.getScaleY()) / 2;                                                </span>
<span  style=""> 349                                                                                                                    </span>
<span class="3167658089348357103" onmouseenter="enter('3167658089348357103');" onmouseout="out('3167658089348357103');" style=""> 350          if (delta == null) {                                                                                      </span>
<span class="-2931796313688881968" onmouseenter="enter('-2931796313688881968');" onmouseout="out('-2931796313688881968');" style=""> 351              delta = new int[2];                                                                                   </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 352          }                                                                                                         </span>
<span  style=""> 353                                                                                                                    </span>
<span class="3561402827996651192" onmouseenter="enter('3561402827996651192');" onmouseout="out('3561402827996651192');" style=""> 354          delta[0] = sLoc1[0] - sLoc0[0];                                                                           </span>
<span class="-300445877560805002" onmouseenter="enter('-300445877560805002');" onmouseout="out('-300445877560805002');" style=""> 355          delta[1] = sLoc1[1] - sLoc0[1];                                                                           </span>
<span  style=""> 356                                                                                                                    </span>
<span class="-8898325968960984603" onmouseenter="enter('-8898325968960984603');" onmouseout="out('-8898325968960984603');" style=""> 357          return delta;                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 358      }                                                                                                             </span>
<span  style=""> 359                                                                                                                    </span>
<span class="-8484797479301001904" onmouseenter="enter('-8484797479301001904');" onmouseout="out('-8484797479301001904');" style=""> 360      public static void scaleRectAboutCenter(Rect r, float scale) {                                                </span>
<span class="-8154395730927593109" onmouseenter="enter('-8154395730927593109');" onmouseout="out('-8154395730927593109');" style=""> 361          int cx = r.centerX();                                                                                     </span>
<span class="9223016816593502361" onmouseenter="enter('9223016816593502361');" onmouseout="out('9223016816593502361');" style=""> 362          int cy = r.centerY();                                                                                     </span>
<span class="-3354944834457350835" onmouseenter="enter('-3354944834457350835');" onmouseout="out('-3354944834457350835');" style=""> 363          r.offset(-cx, -cy);                                                                                       </span>
<span class="-4631345640352552841" onmouseenter="enter('-4631345640352552841');" onmouseout="out('-4631345640352552841');" style=""> 364          Utilities.scaleRect(r, scale);                                                                            </span>
<span class="6460537786803243967" onmouseenter="enter('6460537786803243967');" onmouseout="out('6460537786803243967');" style=""> 365          r.offset(cx, cy);                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 366      }                                                                                                             </span>
<span  style=""> 367                                                                                                                    </span>
<span class="-7509959966841520520" onmouseenter="enter('-7509959966841520520');" onmouseout="out('-7509959966841520520');" style=""> 368      public static void startActivityForResultSafely(                                                              </span>
<span class="3110509595878435496" onmouseenter="enter('3110509595878435496');" onmouseout="out('3110509595878435496');" style=""> 369              Activity activity, Intent intent, int requestCode) {                                                  </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 370          try {                                                                                                     </span>
<span class="8338823094997337250" onmouseenter="enter('8338823094997337250');" onmouseout="out('8338823094997337250');" style=""> 371              activity.startActivityForResult(intent, requestCode);                                                 </span>
<span class="3741055729192306706" onmouseenter="enter('3741055729192306706');" onmouseout="out('3741055729192306706');" style=""> 372          } catch (ActivityNotFoundException e) {                                                                   </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 373              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-6717650166747798643" onmouseenter="enter('-6717650166747798643');" onmouseout="out('-6717650166747798643');" style=""> 374          } catch (SecurityException e) {                                                                           </span>
<span class="-3407513593995111395" onmouseenter="enter('-3407513593995111395');" onmouseout="out('-3407513593995111395');" style=""> 375              Toast.makeText(activity, R.string.activity_not_found, Toast.LENGTH_SHORT).show();                     </span>
<span class="-8708992553278422288" onmouseenter="enter('-8708992553278422288');" onmouseout="out('-8708992553278422288');" style=""> 376              Log.e(TAG, &quot;Launcher does not have the permission to launch &quot; + intent +                              </span>
<span class="-8399859617285631686" onmouseenter="enter('-8399859617285631686');" onmouseout="out('-8399859617285631686');" style=""> 377                      &quot;. Make sure to create a MAIN intent-filter for the corresponding activity &quot; +                </span>
<span class="-1684628440094501221" onmouseenter="enter('-1684628440094501221');" onmouseout="out('-1684628440094501221');" style=""> 378                      &quot;or use the exported attribute for this activity.&quot;, e);                                       </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 379          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 380      }                                                                                                             </span>
<span  style=""> 381                                                                                                                    </span>
<span class="-818679484929223407" onmouseenter="enter('-818679484929223407');" onmouseout="out('-818679484929223407');" style=""> 382      static boolean isSystemApp(Context context, Intent intent) {                                                  </span>
<span class="-4097807257273605074" onmouseenter="enter('-4097807257273605074');" onmouseout="out('-4097807257273605074');" style=""> 383          PackageManager pm = context.getPackageManager();                                                          </span>
<span class="3077177432662788710" onmouseenter="enter('3077177432662788710');" onmouseout="out('3077177432662788710');" style=""> 384          ComponentName cn = intent.getComponent();                                                                 </span>
<span class="-2215646594172852754" onmouseenter="enter('-2215646594172852754');" onmouseout="out('-2215646594172852754');" style=""> 385          String packageName = null;                                                                                </span>
<span class="-114772934208960812" onmouseenter="enter('-114772934208960812');" onmouseout="out('-114772934208960812');" style=""> 386          if (cn == null) {                                                                                         </span>
<span class="1870851696020991881" onmouseenter="enter('1870851696020991881');" onmouseout="out('1870851696020991881');" style=""> 387              ResolveInfo info = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);                     </span>
<span class="1351073291612537138" onmouseenter="enter('1351073291612537138');" onmouseout="out('1351073291612537138');" style=""> 388              if ((info != null) &amp;&amp; (info.activityInfo != null)) {                                                  </span>
<span class="-8632565052064334255" onmouseenter="enter('-8632565052064334255');" onmouseout="out('-8632565052064334255');" style=""> 389                  packageName = info.activityInfo.packageName;                                                      </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 390              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 391          } else {                                                                                                  </span>
<span class="8810722612167424191" onmouseenter="enter('8810722612167424191');" onmouseout="out('8810722612167424191');" style=""> 392              packageName = cn.getPackageName();                                                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 393          }                                                                                                         </span>
<span class="-6492852598915989263" onmouseenter="enter('-6492852598915989263');" onmouseout="out('-6492852598915989263');" style=""> 394          if (packageName != null) {                                                                                </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 395              try {                                                                                                 </span>
<span class="5013676900639328172" onmouseenter="enter('5013676900639328172');" onmouseout="out('5013676900639328172');" style=""> 396                  PackageInfo info = pm.getPackageInfo(packageName, 0);                                             </span>
<span class="-4650910438874729800" onmouseenter="enter('-4650910438874729800');" onmouseout="out('-4650910438874729800');" style=""> 397                  return (info != null) &amp;&amp; (info.applicationInfo != null) &amp;&amp;                                        </span>
<span class="-7203530196874820771" onmouseenter="enter('-7203530196874820771');" onmouseout="out('-7203530196874820771');" style=""> 398                          ((info.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);                        </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 399              } catch (NameNotFoundException e) {                                                                   </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 400                  return false;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 401              }                                                                                                     </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 402          } else {                                                                                                  </span>
<span class="-5432226360745882584" onmouseenter="enter('-5432226360745882584');" onmouseout="out('-5432226360745882584');" style=""> 403              return false;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 404          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 405      }                                                                                                             </span>
<span  style=""> 406                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 407      /**                                                                                                           </span>
<span class="-3318881384245517629" onmouseenter="enter('-3318881384245517629');" onmouseout="out('-3318881384245517629');" style=""> 408       * This picks a dominant color, looking for high-saturation, high-value, repeated hues.                       </span>
<span class="5290175275882408061" onmouseenter="enter('5290175275882408061');" onmouseout="out('5290175275882408061');" style=""> 409       * @param bitmap The bitmap to scan                                                                           </span>
<span class="7157118922669564934" onmouseenter="enter('7157118922669564934');" onmouseout="out('7157118922669564934');" style=""> 410       * @param samples The approximate max number of samples to use.                                               </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 411       */                                                                                                           </span>
<span class="3822462998564044189" onmouseenter="enter('3822462998564044189');" onmouseout="out('3822462998564044189');" style=""> 412      static int findDominantColorByHue(Bitmap bitmap, int samples) {                                               </span>
<span class="7403831965571252635" onmouseenter="enter('7403831965571252635');" onmouseout="out('7403831965571252635');" style=""> 413          final int height = bitmap.getHeight();                                                                    </span>
<span class="7301483432473400740" onmouseenter="enter('7301483432473400740');" onmouseout="out('7301483432473400740');" style=""> 414          final int width = bitmap.getWidth();                                                                      </span>
<span class="8720560027586495363" onmouseenter="enter('8720560027586495363');" onmouseout="out('8720560027586495363');" style=""> 415          int sampleStride = (int) Math.sqrt((height * width) / samples);                                           </span>
<span class="-6243505776635340832" onmouseenter="enter('-6243505776635340832');" onmouseout="out('-6243505776635340832');" style=""> 416          if (sampleStride &lt; 1) {                                                                                   </span>
<span class="140373467323573422" onmouseenter="enter('140373467323573422');" onmouseout="out('140373467323573422');" style=""> 417              sampleStride = 1;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 418          }                                                                                                         </span>
<span  style=""> 419                                                                                                                    </span>
<span class="-5919885444565177851" onmouseenter="enter('-5919885444565177851');" onmouseout="out('-5919885444565177851');" style=""> 420          // This is an out-param, for getting the hsv values for an rgb                                            </span>
<span class="-1299670904848343708" onmouseenter="enter('-1299670904848343708');" onmouseout="out('-1299670904848343708');" style=""> 421          float[] hsv = new float[3];                                                                               </span>
<span  style=""> 422                                                                                                                    </span>
<span class="-9182418349030909075" onmouseenter="enter('-9182418349030909075');" onmouseout="out('-9182418349030909075');" style=""> 423          // First get the best hue, by creating a histogram over 360 hue buckets,                                  </span>
<span class="3621460583642912540" onmouseenter="enter('3621460583642912540');" onmouseout="out('3621460583642912540');" style=""> 424          // where each pixel contributes a score weighted by saturation, value, and alpha.                         </span>
<span class="-2553723455227819118" onmouseenter="enter('-2553723455227819118');" onmouseout="out('-2553723455227819118');" style=""> 425          float[] hueScoreHistogram = new float[360];                                                               </span>
<span class="-6859945823468708774" onmouseenter="enter('-6859945823468708774');" onmouseout="out('-6859945823468708774');" style=""> 426          float highScore = -1;                                                                                     </span>
<span class="-1364618090739496936" onmouseenter="enter('-1364618090739496936');" onmouseout="out('-1364618090739496936');" style=""> 427          int bestHue = -1;                                                                                         </span>
<span  style=""> 428                                                                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 429          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 430              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="1594896536599364064" onmouseenter="enter('1594896536599364064');" onmouseout="out('1594896536599364064');" style=""> 431                  int argb = bitmap.getPixel(x, y);                                                                 </span>
<span class="-3237424062053822660" onmouseenter="enter('-3237424062053822660');" onmouseout="out('-3237424062053822660');" style=""> 432                  int alpha = 0xFF &amp; (argb &gt;&gt; 24);                                                                  </span>
<span class="4260834258591865622" onmouseenter="enter('4260834258591865622');" onmouseout="out('4260834258591865622');" style=""> 433                  if (alpha &lt; 0x80) {                                                                               </span>
<span class="-3754196088808841131" onmouseenter="enter('-3754196088808841131');" onmouseout="out('-3754196088808841131');" style=""> 434                      // Drop mostly-transparent pixels.                                                            </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 435                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 436                  }                                                                                                 </span>
<span class="-434423225179697768" onmouseenter="enter('-434423225179697768');" onmouseout="out('-434423225179697768');" style=""> 437                  // Remove the alpha channel.                                                                      </span>
<span class="1999267811806233018" onmouseenter="enter('1999267811806233018');" onmouseout="out('1999267811806233018');" style=""> 438                  int rgb = argb | 0xFF000000;                                                                      </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 439                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-5555763609453719688" onmouseenter="enter('-5555763609453719688');" onmouseout="out('-5555763609453719688');" style=""> 440                  // Bucket colors by the 360 integer hues.                                                         </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 441                  int hue = (int) hsv[0];                                                                           </span>
<span class="1213057880038897551" onmouseenter="enter('1213057880038897551');" onmouseout="out('1213057880038897551');" style=""> 442                  if (hue &lt; 0 || hue &gt;= hueScoreHistogram.length) {                                                 </span>
<span class="-2572157140173939419" onmouseenter="enter('-2572157140173939419');" onmouseout="out('-2572157140173939419');" style=""> 443                      // Defensively avoid array bounds violations.                                                 </span>
<span class="-6362435147834875541" onmouseenter="enter('-6362435147834875541');" onmouseout="out('-6362435147834875541');" style=""> 444                      continue;                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 445                  }                                                                                                 </span>
<span class="-5212572895664147523" onmouseenter="enter('-5212572895664147523');" onmouseout="out('-5212572895664147523');" style=""> 446                  float score = hsv[1] * hsv[2];                                                                    </span>
<span class="5819244305297522287" onmouseenter="enter('5819244305297522287');" onmouseout="out('5819244305297522287');" style=""> 447                  hueScoreHistogram[hue] += score;                                                                  </span>
<span class="-5171156146602968688" onmouseenter="enter('-5171156146602968688');" onmouseout="out('-5171156146602968688');" style=""> 448                  if (hueScoreHistogram[hue] &gt; highScore) {                                                         </span>
<span class="-2466150223932608244" onmouseenter="enter('-2466150223932608244');" onmouseout="out('-2466150223932608244');" style=""> 449                      highScore = hueScoreHistogram[hue];                                                           </span>
<span class="496685829836575086" onmouseenter="enter('496685829836575086');" onmouseout="out('496685829836575086');" style=""> 450                      bestHue = hue;                                                                                </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 451                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 452              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 453          }                                                                                                         </span>
<span  style=""> 454                                                                                                                    </span>
<span class="-9042948829506073514" onmouseenter="enter('-9042948829506073514');" onmouseout="out('-9042948829506073514');" style=""> 455          SparseArray&lt;Float&gt; rgbScores = new SparseArray&lt;Float&gt;();                                                  </span>
<span class="-3598297859577513156" onmouseenter="enter('-3598297859577513156');" onmouseout="out('-3598297859577513156');" style=""> 456          int bestColor = 0xff000000;                                                                               </span>
<span class="-7576145447889035066" onmouseenter="enter('-7576145447889035066');" onmouseout="out('-7576145447889035066');" style=""> 457          highScore = -1;                                                                                           </span>
<span class="-6085893506736225529" onmouseenter="enter('-6085893506736225529');" onmouseout="out('-6085893506736225529');" style=""> 458          // Go back over the RGB colors that match the winning hue,                                                </span>
<span class="-5565737416673051398" onmouseenter="enter('-5565737416673051398');" onmouseout="out('-5565737416673051398');" style=""> 459          // creating a histogram of weighted s*v scores, for up to 100*100 [s,v] buckets.                          </span>
<span class="3173305350065337788" onmouseenter="enter('3173305350065337788');" onmouseout="out('3173305350065337788');" style=""> 460          // The highest-scoring RGB color wins.                                                                    </span>
<span class="-5264215899836901290" onmouseenter="enter('-5264215899836901290');" onmouseout="out('-5264215899836901290');" style=""> 461          for (int y = 0; y &lt; height; y += sampleStride) {                                                          </span>
<span class="-5416363860581404186" onmouseenter="enter('-5416363860581404186');" onmouseout="out('-5416363860581404186');" style=""> 462              for (int x = 0; x &lt; width; x += sampleStride) {                                                       </span>
<span class="7777252096295217855" onmouseenter="enter('7777252096295217855');" onmouseout="out('7777252096295217855');" style=""> 463                  int rgb = bitmap.getPixel(x, y) | 0xff000000;                                                     </span>
<span class="-4918220871941295145" onmouseenter="enter('-4918220871941295145');" onmouseout="out('-4918220871941295145');" style=""> 464                  Color.colorToHSV(rgb, hsv);                                                                       </span>
<span class="-7383388110147217046" onmouseenter="enter('-7383388110147217046');" onmouseout="out('-7383388110147217046');" style=""> 465                  int hue = (int) hsv[0];                                                                           </span>
<span class="6727385654925635547" onmouseenter="enter('6727385654925635547');" onmouseout="out('6727385654925635547');" style=""> 466                  if (hue == bestHue) {                                                                             </span>
<span class="7725423073224207120" onmouseenter="enter('7725423073224207120');" onmouseout="out('7725423073224207120');" style=""> 467                      float s = hsv[1];                                                                             </span>
<span class="3366910618332432349" onmouseenter="enter('3366910618332432349');" onmouseout="out('3366910618332432349');" style=""> 468                      float v = hsv[2];                                                                             </span>
<span class="-5945294880432577000" onmouseenter="enter('-5945294880432577000');" onmouseout="out('-5945294880432577000');" style=""> 469                      int bucket = (int) (s * 100) + (int) (v * 10000);                                             </span>
<span class="9115839691297946471" onmouseenter="enter('9115839691297946471');" onmouseout="out('9115839691297946471');" style=""> 470                      // Score by cumulative saturation * value.                                                    </span>
<span class="-4994743543398158719" onmouseenter="enter('-4994743543398158719');" onmouseout="out('-4994743543398158719');" style=""> 471                      float score = s * v;                                                                          </span>
<span class="-585703347570858929" onmouseenter="enter('-585703347570858929');" onmouseout="out('-585703347570858929');" style=""> 472                      Float oldTotal = rgbScores.get(bucket);                                                       </span>
<span class="-4415506786076023896" onmouseenter="enter('-4415506786076023896');" onmouseout="out('-4415506786076023896');" style=""> 473                      float newTotal = oldTotal == null ? score : oldTotal + score;                                 </span>
<span class="-5519305034991825582" onmouseenter="enter('-5519305034991825582');" onmouseout="out('-5519305034991825582');" style=""> 474                      rgbScores.put(bucket, newTotal);                                                              </span>
<span class="-7245586675746544798" onmouseenter="enter('-7245586675746544798');" onmouseout="out('-7245586675746544798');" style=""> 475                      if (newTotal &gt; highScore) {                                                                   </span>
<span class="-6510596372757662414" onmouseenter="enter('-6510596372757662414');" onmouseout="out('-6510596372757662414');" style=""> 476                          highScore = newTotal;                                                                     </span>
<span class="7418785083889410876" onmouseenter="enter('7418785083889410876');" onmouseout="out('7418785083889410876');" style=""> 477                          // All the colors in the winning bucket are very similar. Last in wins.                   </span>
<span class="-4308808155554491522" onmouseenter="enter('-4308808155554491522');" onmouseout="out('-4308808155554491522');" style=""> 478                          bestColor = rgb;                                                                          </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 479                      }                                                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 480                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 481              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 482          }                                                                                                         </span>
<span class="-3516936124295506843" onmouseenter="enter('-3516936124295506843');" onmouseout="out('-3516936124295506843');" style=""> 483          return bestColor;                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 484      }                                                                                                             </span>
<span  style=""> 485                                                                                                                    </span>
<span class="4534359625031764666" onmouseenter="enter('4534359625031764666');" onmouseout="out('4534359625031764666');" style=""> 486      /*                                                                                                            </span>
<span class="4178434955150576738" onmouseenter="enter('4178434955150576738');" onmouseout="out('4178434955150576738');" style=""> 487       * Finds a system apk which had a broadcast receiver listening to a particular action.                        </span>
<span class="-6206212471228508183" onmouseenter="enter('-6206212471228508183');" onmouseout="out('-6206212471228508183');" style=""> 488       * @param action intent action used to find the apk                                                           </span>
<span class="-615104360439117829" onmouseenter="enter('-615104360439117829');" onmouseout="out('-615104360439117829');" style=""> 489       * @return a pair of apk package name and the resources.                                                      </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 490       */                                                                                                           </span>
<span class="-3476486774428079068" onmouseenter="enter('-3476486774428079068');" onmouseout="out('-3476486774428079068');" style=""> 491      static Pair&lt;String, Resources&gt; findSystemApk(String action, PackageManager pm) {                              </span>
<span class="-4722134704779274960" onmouseenter="enter('-4722134704779274960');" onmouseout="out('-4722134704779274960');" style=""> 492          final Intent intent = new Intent(action);                                                                 </span>
<span class="-5132541052081396584" onmouseenter="enter('-5132541052081396584');" onmouseout="out('-5132541052081396584');" style=""> 493          for (ResolveInfo info : pm.queryBroadcastReceivers(intent, 0)) {                                          </span>
<span class="1670301059636946094" onmouseenter="enter('1670301059636946094');" onmouseout="out('1670301059636946094');" style=""> 494              if (info.activityInfo != null &amp;&amp;                                                                      </span>
<span class="5176448211921466190" onmouseenter="enter('5176448211921466190');" onmouseout="out('5176448211921466190');" style=""> 495                      (info.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0) {               </span>
<span class="3669834111953530169" onmouseenter="enter('3669834111953530169');" onmouseout="out('3669834111953530169');" style=""> 496                  final String packageName = info.activityInfo.packageName;                                         </span>
<span class="-2989978199866728989" onmouseenter="enter('-2989978199866728989');" onmouseout="out('-2989978199866728989');" style=""> 497                  try {                                                                                             </span>
<span class="-825358089410358342" onmouseenter="enter('-825358089410358342');" onmouseout="out('-825358089410358342');" style=""> 498                      final Resources res = pm.getResourcesForApplication(packageName);                             </span>
<span class="569297062386415049" onmouseenter="enter('569297062386415049');" onmouseout="out('569297062386415049');" style=""> 499                      return Pair.create(packageName, res);                                                         </span>
<span class="-117497467326286440" onmouseenter="enter('-117497467326286440');" onmouseout="out('-117497467326286440');" style=""> 500                  } catch (NameNotFoundException e) {                                                               </span>
<span class="5984184312950625727" onmouseenter="enter('5984184312950625727');" onmouseout="out('5984184312950625727');" style=""> 501                      Log.w(TAG, &quot;Failed to find resources for &quot; + packageName);                                    </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 502                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 503              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 504          }                                                                                                         </span>
<span class="-3732568077477539923" onmouseenter="enter('-3732568077477539923');" onmouseout="out('-3732568077477539923');" style=""> 505          return null;                                                                                              </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 506      }                                                                                                             </span>
<span  style=""> 507                                                                                                                    </span>
<span class="-570304149390069851" onmouseenter="enter('-570304149390069851');" onmouseout="out('-570304149390069851');" style=""> 508      @TargetApi(Build.VERSION_CODES.KITKAT)                                                                        </span>
<span class="-2137603693138082936" onmouseenter="enter('-2137603693138082936');" onmouseout="out('-2137603693138082936');" style=""> 509      public static boolean isViewAttachedToWindow(View v) {                                                        </span>
<span class="-611000332437619731" onmouseenter="enter('-611000332437619731');" onmouseout="out('-611000332437619731');" style=""> 510          if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {                                                </span>
<span class="7956823296415650571" onmouseenter="enter('7956823296415650571');" onmouseout="out('7956823296415650571');" style=""> 511              return v.isAttachedToWindow();                                                                        </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 512          } else {                                                                                                  </span>
<span class="-3124170433406571227" onmouseenter="enter('-3124170433406571227');" onmouseout="out('-3124170433406571227');" style=""> 513              // A proxy call which returns null, if the view is not attached to the window.                        </span>
<span class="6439470207272625976" onmouseenter="enter('6439470207272625976');" onmouseout="out('6439470207272625976');" style=""> 514              return v.getKeyDispatcherState() != null;                                                             </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 515          }                                                                                                         </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 516      }                                                                                                             </span>
<span  style=""> 517                                                                                                                    </span>
<span class="1188357178855945174" onmouseenter="enter('1188357178855945174');" onmouseout="out('1188357178855945174');" style=""> 518      /**                                                                                                           </span>
<span class="7096641934789705717" onmouseenter="enter('7096641934789705717');" onmouseout="out('7096641934789705717');" style=""> 519       * Returns a widget with category {@link AppWidgetProviderInfo#WIDGET_CATEGORY_SEARCHBOX}                     </span>
<span class="5318304330860151322" onmouseenter="enter('5318304330860151322');" onmouseout="out('5318304330860151322');" style=""> 520       * provided by the same package which is set to be global search activity.                                    </span>
<span class="-3250147996365281618" onmouseenter="enter('-3250147996365281618');" onmouseout="out('-3250147996365281618');" style=""> 521       * If widgetCategory is not supported, or no such widget is found, returns the first widget                   </span>
<span class="8251381918795720045" onmouseenter="enter('8251381918795720045');" onmouseout="out('8251381918795720045');" style=""> 522       * provided by the package.                                                                                   </span>
<span class="-3478703399357275674" onmouseenter="enter('-3478703399357275674');" onmouseout="out('-3478703399357275674');" style=""> 523       */                                                                                                           </span>
<span class="149494344456476038" onmouseenter="enter('149494344456476038');" onmouseout="out('149494344456476038');" style=""> 524      @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)                                                                </span>
<span class="9029057083519713032" onmouseenter="enter('9029057083519713032');" onmouseout="out('9029057083519713032');" style=""> 525      public static AppWidgetProviderInfo getSearchWidgetProvider(Context context) {                                </span>
<span class="-786574126457578745" onmouseenter="enter('-786574126457578745');" onmouseout="out('-786574126457578745');" style=""> 526          SearchManager searchManager =                                                                             </span>
<span class="3727828435319704835" onmouseenter="enter('3727828435319704835');" onmouseout="out('3727828435319704835');" style=""> 527                  (SearchManager) context.getSystemService(Context.SEARCH_SERVICE);                                 </span>
<span class="-8738388191629068995" onmouseenter="enter('-8738388191629068995');" onmouseout="out('-8738388191629068995');" style=""> 528          ComponentName searchComponent = searchManager.getGlobalSearchActivity();                                  </span>
<span class="-2364642473376124931" onmouseenter="enter('-2364642473376124931');" onmouseout="out('-2364642473376124931');" style=""> 529          if (searchComponent == null) return null;                                                                 </span>
<span class="3569236036924867878" onmouseenter="enter('3569236036924867878');" onmouseout="out('3569236036924867878');" style=""> 530          String providerPkg = searchComponent.getPackageName();                                                    </span>
<span  style=""> 531                                                                                                                    </span>
<span class="-4151973375556375169" onmouseenter="enter('-4151973375556375169');" onmouseout="out('-4151973375556375169');" style=""> 532          AppWidgetProviderInfo defaultWidgetForSearchPackage = null;                                               </span>
<span  style=""> 533                                                                                                                    </span>
<span class="-5928932411167690289" onmouseenter="enter('-5928932411167690289');" onmouseout="out('-5928932411167690289');" style=""> 534          AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);                                </span>
<span class="-1987072122902455388" onmouseenter="enter('-1987072122902455388');" onmouseout="out('-1987072122902455388');" style=""> 535          for (AppWidgetProviderInfo info : appWidgetManager.getInstalledProviders()) {                             </span>
<span class="-3478889066175898925" onmouseenter="enter('-3478889066175898925');" onmouseout="out('-3478889066175898925');" style=""> 536              if (info.provider.getPackageName().equals(providerPkg)) {                                             </span>
<span class="-1105615515983312300" onmouseenter="enter('-1105615515983312300');" onmouseout="out('-1105615515983312300');" style=""> 537                  if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {                                </span>
<span class="5783400580294500885" onmouseenter="enter('5783400580294500885');" onmouseout="out('5783400580294500885');" style=""> 538                      if ((info.widgetCategory &amp; AppWidgetProviderInfo.WIDGET_CATEGORY_SEARCHBOX) != 0) {           </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 539                          return info;                                                                              </span>
<span class="2474158930647189913" onmouseenter="enter('2474158930647189913');" onmouseout="out('2474158930647189913');" style=""> 540                      } else if (defaultWidgetForSearchPackage == null) {                                           </span>
<span class="455076443391319038" onmouseenter="enter('455076443391319038');" onmouseout="out('455076443391319038');" style=""> 541                          defaultWidgetForSearchPackage = info;                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 542                      }                                                                                             </span>
<span class="-6023928394739582014" onmouseenter="enter('-6023928394739582014');" onmouseout="out('-6023928394739582014');" style=""> 543                  } else {                                                                                          </span>
<span class="-3556780733195614200" onmouseenter="enter('-3556780733195614200');" onmouseout="out('-3556780733195614200');" style=""> 544                      return info;                                                                                  </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 545                  }                                                                                                 </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 546              }                                                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 547          }                                                                                                         </span>
<span class="-2334202196368247312" onmouseenter="enter('-2334202196368247312');" onmouseout="out('-2334202196368247312');" style=""> 548          return defaultWidgetForSearchPackage;                                                                     </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 549      }                                                                                                             </span>
<span  style=""> 550                                                                                                                    </span>



















<span class="-6850884554410138223" onmouseenter="enter('-6850884554410138223');" onmouseout="out('-6850884554410138223');" style=""> 551      public static final Comparator&lt;ItemInfo&gt; RANK_COMPARATOR = new Comparator&lt;ItemInfo&gt;() {                       </span>
<span  style=""> 552                                                                                                                    </span>
<span class="5563255192340639251" onmouseenter="enter('5563255192340639251');" onmouseout="out('5563255192340639251');" style=""> 553          @Override                                                                                                 </span>
<span class="-8745689557801291012" onmouseenter="enter('-8745689557801291012');" onmouseout="out('-8745689557801291012');" style=""> 554          public int compare(ItemInfo lhs, ItemInfo rhs) {                                                          </span>
<span class="-1773115321274512652" onmouseenter="enter('-1773115321274512652');" onmouseout="out('-1773115321274512652');" style=""> 555              return lhs.rank - rhs.rank;                                                                           </span>
<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 556          }                                                                                                         </span>
<span class="2468309323999483380" onmouseenter="enter('2468309323999483380');" onmouseout="out('2468309323999483380');" style=""> 557      };                                                                                                            </span>


























































































<span class="-1659227874853751674" onmouseenter="enter('-1659227874853751674');" onmouseout="out('-1659227874853751674');" style=""> 558  }                                                                                                                 </span></pre></td>
                        </tr>
                    </table>
                </div>
              </body>
            </html>
            